/*! For license information please see main.6507276c.js.LICENSE.txt */
(()=>{"use strict";var e={4(e,t,i){var n=i(853),o=i(43),s=i(950);function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function d(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function c(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(r(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),C=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope");var I=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var A=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var L=Symbol.iterator;function N(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var T=Symbol.for("react.client.reference");function R(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===T?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case v:return"Fragment";case b:return"Profiler";case y:return"StrictMode";case w:return"Suspense";case M:return"SuspenseList";case I:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case f:return"Portal";case C:return e.displayName||"Context";case x:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:R(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return R(e(t))}catch(i){}}return null}var E=Array.isArray,P=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},z=[],B=-1;function V(e){return{current:e}}function G(e){0>B||(e.current=z[B],z[B]=null,B--)}function H(e,t){B++,z[B]=e.current,e.current=t}var j,W,_=V(null),K=V(null),U=V(null),Y=V(null);function $(e,t){switch(H(U,t),H(K,e),H(_,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?yu(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=bu(t=yu(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}G(_),H(_,e)}function Z(){G(_),G(K),G(U)}function X(e){null!==e.memoizedState&&H(Y,e);var t=_.current,i=bu(t,e.type);t!==i&&(H(K,e),H(_,i))}function q(e){K.current===e&&(G(_),G(K)),Y.current===e&&(G(Y),uh._currentValue=F)}function Q(e){if(void 0===j)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||"",W=-1<i.stack.indexOf("\n    at")?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+j+e+W}var J=!1;function ee(e,t){if(!e||J)return"";J=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var i=function(){throw Error()};if(Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(i,[])}catch(o){var n=o}Reflect.construct(e,[],i)}else{try{i.call()}catch(s){n=s}e.call(i.prototype)}}else{try{throw Error()}catch(r){n=r}(i=e())&&"function"===typeof i.catch&&i.catch(function(){})}}catch(a){if(a&&n&&"string"===typeof a.stack)return[a.stack,n.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=n.DetermineComponentFrameRoot(),r=s[0],a=s[1];if(r&&a){var l=r.split("\n"),d=a.split("\n");for(o=n=0;n<l.length&&!l[n].includes("DetermineComponentFrameRoot");)n++;for(;o<d.length&&!d[o].includes("DetermineComponentFrameRoot");)o++;if(n===l.length||o===d.length)for(n=l.length-1,o=d.length-1;1<=n&&0<=o&&l[n]!==d[o];)o--;for(;1<=n&&0<=o;n--,o--)if(l[n]!==d[o]){if(1!==n||1!==o)do{if(n--,0>--o||l[n]!==d[o]){var c="\n"+l[n].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=n&&0<=o);break}}}finally{J=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Q(i):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return Q(e.type);case 16:return Q("Lazy");case 13:return e.child!==t&&null!==t?Q("Suspense Fallback"):Q("Suspense");case 19:return Q("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return Q("Activity");default:return""}}function ie(e){try{var t="",i=null;do{t+=te(e,i),i=e,e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}var ne=Object.prototype.hasOwnProperty,oe=n.unstable_scheduleCallback,se=n.unstable_cancelCallback,re=n.unstable_shouldYield,ae=n.unstable_requestPaint,le=n.unstable_now,de=n.unstable_getCurrentPriorityLevel,ce=n.unstable_ImmediatePriority,ue=n.unstable_UserBlockingPriority,he=n.unstable_NormalPriority,pe=n.unstable_LowPriority,ge=n.unstable_IdlePriority,me=n.log,fe=n.unstable_setDisableYieldValue,ve=null,ye=null;function be(e){if("function"===typeof me&&fe(e),ye&&"function"===typeof ye.setStrictMode)try{ye.setStrictMode(ve,e)}catch(t){}}var xe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(Ce(e)/Se|0)|0},Ce=Math.log,Se=Math.LN2;var we=256,Me=262144,ke=4194304;function De(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ie(e,t,i){var n=e.pendingLanes;if(0===n)return 0;var o=0,s=e.suspendedLanes,r=e.pingedLanes;e=e.warmLanes;var a=134217727&n;return 0!==a?0!==(n=a&~s)?o=De(n):0!==(r&=a)?o=De(r):i||0!==(i=a&~e)&&(o=De(i)):0!==(a=n&~s)?o=De(a):0!==r?o=De(r):i||0!==(i=n&~e)&&(o=De(i)),0===o?0:0!==t&&t!==o&&0===(t&s)&&((s=o&-o)>=(i=t&-t)||32===s&&0!==(4194048&i))?t:o}function Ae(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Le(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ne(){var e=ke;return 0===(62914560&(ke<<=1))&&(ke=4194304),e}function Te(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Re(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ee(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-xe(t);e.entangledLanes|=t,e.entanglements[n]=1073741824|e.entanglements[n]|261930&i}function Pe(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var n=31-xe(i),o=1<<n;o&t|e[n]&t&&(e[n]|=t),i&=~o}}function Oe(e,t){var i=t&-t;return 0!==((i=0!==(42&i)?1:Fe(i))&(e.suspendedLanes|t))?0:i}function Fe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ze(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Be(){var e=O.p;return 0!==e?e:void 0===(e=window.event)?32:Ih(e.type)}function Ve(e,t){var i=O.p;try{return O.p=e,t()}finally{O.p=i}}var Ge=Math.random().toString(36).slice(2),He="__reactFiber$"+Ge,je="__reactProps$"+Ge,We="__reactContainer$"+Ge,_e="__reactEvents$"+Ge,Ke="__reactListeners$"+Ge,Ue="__reactHandles$"+Ge,Ye="__reactResources$"+Ge,$e="__reactMarker$"+Ge;function Ze(e){delete e[He],delete e[je],delete e[_e],delete e[Ke],delete e[Ue]}function Xe(e){var t=e[He];if(t)return t;for(var i=e.parentNode;i;){if(t=i[We]||i[He]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=zu(e);null!==e;){if(i=e[He])return i;e=zu(e)}return t}i=(e=i).parentNode}return null}function qe(e){if(e=e[He]||e[We]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(r(33))}function Je(e){var t=e[Ye];return t||(t=e[Ye]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[$e]=!0}var tt=new Set,it={};function nt(e,t){ot(e,t),ot(e+"Capture",t)}function ot(e,t){for(it[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var st=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rt={},at={};function lt(e,t,i){if(o=t,ne.call(at,o)||!ne.call(rt,o)&&(st.test(o)?at[o]=!0:(rt[o]=!0,0)))if(null===i)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var n=t.toLowerCase().slice(0,5);if("data-"!==n&&"aria-"!==n)return void e.removeAttribute(t)}e.setAttribute(t,""+i)}var o}function dt(e,t,i){if(null===i)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+i)}}function ct(e,t,i,n){if(null===n)e.removeAttribute(i);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(i)}e.setAttributeNS(t,i,""+n)}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function pt(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,i){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function gt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=ht(e)?e.checked?"true":"false":e.value),(e=n)!==i&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var ft=/[\n"\\]/g;function vt(e){return e.replace(ft,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function yt(e,t,i,n,o,s,r,a){e.name="",null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&"boolean"!==typeof r?e.type=r:e.removeAttribute("type"),null!=t?"number"===r?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==r&&"reset"!==r||e.removeAttribute("value"),null!=t?xt(e,r,ut(t)):null!=i?xt(e,r,ut(i)):null!=n&&e.removeAttribute("value"),null==o&&null!=s&&(e.defaultChecked=!!s),null!=o&&(e.checked=o&&"function"!==typeof o&&"symbol"!==typeof o),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ut(a):e.removeAttribute("name")}function bt(e,t,i,n,o,s,r,a){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=i){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return void pt(e);i=null!=i?""+ut(i):"",t=null!=t?""+ut(t):i,a||t===e.value||(e.value=t),e.defaultValue=t}n="function"!==typeof(n=null!=n?n:o)&&"symbol"!==typeof n&&!!n,e.checked=a?e.checked:!!n,e.defaultChecked=!!n,null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&"boolean"!==typeof r&&(e.name=r),pt(e)}function xt(e,t,i){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Ct(e,t,i,n){if(e=e.options,t){t={};for(var o=0;o<i.length;o++)t["$"+i[o]]=!0;for(i=0;i<e.length;i++)o=t.hasOwnProperty("$"+e[i].value),e[i].selected!==o&&(e[i].selected=o),o&&n&&(e[i].defaultSelected=!0)}else{for(i=""+ut(i),t=null,o=0;o<e.length;o++){if(e[o].value===i)return e[o].selected=!0,void(n&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function St(e,t,i){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=i)?e.defaultValue=null!=i?""+ut(i):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,i,n){if(null==t){if(null!=n){if(null!=i)throw Error(r(92));if(E(n)){if(1<n.length)throw Error(r(93));n=n[0]}i=n}null==i&&(i=""),t=i}i=ut(t),e.defaultValue=i,(n=e.textContent)===i&&""!==n&&null!==n&&(e.value=n),pt(e)}function Mt(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dt(e,t,i){var n=0===t.indexOf("--");null==i||"boolean"===typeof i||""===i?n?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":n?e.setProperty(t,i):"number"!==typeof i||0===i||kt.has(t)?"float"===t?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function It(e,t,i){if(null!=t&&"object"!==typeof t)throw Error(r(62));if(e=e.style,null!=i){for(var n in i)!i.hasOwnProperty(n)||null!=t&&t.hasOwnProperty(n)||(0===n.indexOf("--")?e.setProperty(n,""):"float"===n?e.cssFloat="":e[n]="");for(var o in t)n=t[o],t.hasOwnProperty(o)&&i[o]!==n&&Dt(e,o,n)}else for(var s in t)t.hasOwnProperty(s)&&Dt(e,s,t[s])}function At(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tt(e){return Nt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Rt(){}var Et=null;function Pt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ot=null,Ft=null;function zt(e){var t=qe(e);if(t&&(e=t.stateNode)){var i=e[je]||null;e:switch(e=t.stateNode,t.type){case"input":if(yt(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+vt(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var o=n[je]||null;if(!o)throw Error(r(90));yt(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<i.length;t++)(n=i[t]).form===e.form&&gt(n)}break e;case"textarea":St(e,i.value,i.defaultValue);break e;case"select":null!=(t=i.value)&&Ct(e,!!i.multiple,t,!1)}}}var Bt=!1;function Vt(e,t,i){if(Bt)return e(t,i);Bt=!0;try{return e(t)}finally{if(Bt=!1,(null!==Ot||null!==Ft)&&(ec(),Ot&&(t=Ot,e=Ft,Ft=Ot=null,zt(t),e)))for(t=0;t<e.length;t++)zt(e[t])}}function Gt(e,t){var i=e.stateNode;if(null===i)return null;var n=i[je]||null;if(null===n)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(i&&"function"!==typeof i)throw Error(r(231,t,typeof i));return i}var Ht=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),jt=!1;if(Ht)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){jt=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch(Qh){jt=!1}var _t=null,Kt=null,Ut=null;function Yt(){if(Ut)return Ut;var e,t,i=Kt,n=i.length,o="value"in _t?_t.value:_t.textContent,s=o.length;for(e=0;e<n&&i[e]===o[e];e++);var r=n-e;for(t=1;t<=r&&i[n-t]===o[s-t];t++);return Ut=o.slice(e,1<t?1-t:void 0)}function $t(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Zt(){return!0}function Xt(){return!1}function qt(e){function t(t,i,n,o,s){for(var r in this._reactName=t,this._targetInst=n,this.type=i,this.nativeEvent=o,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(r)&&(t=e[r],this[r]=t?t(o):o[r]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?Zt:Xt,this.isPropagationStopped=Xt,this}return p(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Zt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Zt)},persist:function(){},isPersistent:Zt}),t}var Qt,Jt,ei,ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ii=qt(ti),ni=p({},ti,{view:0,detail:0}),oi=qt(ni),si=p({},ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fi,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ei&&(ei&&"mousemove"===e.type?(Qt=e.screenX-ei.screenX,Jt=e.screenY-ei.screenY):Jt=Qt=0,ei=e),Qt)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),ri=qt(si),ai=qt(p({},si,{dataTransfer:0})),li=qt(p({},ni,{relatedTarget:0})),di=qt(p({},ti,{animationName:0,elapsedTime:0,pseudoElement:0})),ci=qt(p({},ti,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ui=qt(p({},ti,{data:0})),hi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mi(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=gi[e])&&!!t[e]}function fi(){return mi}var vi=qt(p({},ni,{key:function(e){if(e.key){var t=hi[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=$t(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?pi[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fi,charCode:function(e){return"keypress"===e.type?$t(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?$t(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),yi=qt(p({},si,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),bi=qt(p({},ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fi})),xi=qt(p({},ti,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ci=qt(p({},si,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Si=qt(p({},ti,{newState:0,oldState:0})),wi=[9,13,27,32],Mi=Ht&&"CompositionEvent"in window,ki=null;Ht&&"documentMode"in document&&(ki=document.documentMode);var Di=Ht&&"TextEvent"in window&&!ki,Ii=Ht&&(!Mi||ki&&8<ki&&11>=ki),Ai=String.fromCharCode(32),Li=!1;function Ni(e,t){switch(e){case"keyup":return-1!==wi.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ti(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ri=!1;var Ei={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ei[e.type]:"textarea"===t}function Oi(e,t,i,n){Ot?Ft?Ft.push(n):Ft=[n]:Ot=n,0<(t=ou(t,"onChange")).length&&(i=new ii("onChange","change",null,i,n),e.push({event:i,listeners:t}))}var Fi=null,zi=null;function Bi(e){Xc(e,0)}function Vi(e){if(gt(Qe(e)))return e}function Gi(e,t){if("change"===e)return t}var Hi=!1;if(Ht){var ji;if(Ht){var Wi="oninput"in document;if(!Wi){var _i=document.createElement("div");_i.setAttribute("oninput","return;"),Wi="function"===typeof _i.oninput}ji=Wi}else ji=!1;Hi=ji&&(!document.documentMode||9<document.documentMode)}function Ki(){Fi&&(Fi.detachEvent("onpropertychange",Ui),zi=Fi=null)}function Ui(e){if("value"===e.propertyName&&Vi(zi)){var t=[];Oi(t,zi,e,Pt(e)),Vt(Bi,t)}}function Yi(e,t,i){"focusin"===e?(Ki(),zi=i,(Fi=t).attachEvent("onpropertychange",Ui)):"focusout"===e&&Ki()}function $i(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Vi(zi)}function Zi(e,t){if("click"===e)return Vi(t)}function Xi(e,t){if("input"===e||"change"===e)return Vi(t)}var qi="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Qi(e,t){if(qi(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var o=i[n];if(!ne.call(t,o)||!qi(e[o],t[o]))return!1}return!0}function Ji(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function en(e,t){var i,n=Ji(e);for(e=0;n;){if(3===n.nodeType){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ji(n)}}function tn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?tn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function nn(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var i="string"===typeof t.contentWindow.location.href}catch(n){i=!1}if(!i)break;t=mt((e=t.contentWindow).document)}return t}function on(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var sn=Ht&&"documentMode"in document&&11>=document.documentMode,rn=null,an=null,ln=null,dn=!1;function cn(e,t,i){var n=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;dn||null==rn||rn!==mt(n)||("selectionStart"in(n=rn)&&on(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},ln&&Qi(ln,n)||(ln=n,0<(n=ou(an,"onSelect")).length&&(t=new ii("onSelect","select",null,t,i),e.push({event:t,listeners:n}),t.target=rn)))}function un(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var hn={animationend:un("Animation","AnimationEnd"),animationiteration:un("Animation","AnimationIteration"),animationstart:un("Animation","AnimationStart"),transitionrun:un("Transition","TransitionRun"),transitionstart:un("Transition","TransitionStart"),transitioncancel:un("Transition","TransitionCancel"),transitionend:un("Transition","TransitionEnd")},pn={},gn={};function mn(e){if(pn[e])return pn[e];if(!hn[e])return e;var t,i=hn[e];for(t in i)if(i.hasOwnProperty(t)&&t in gn)return pn[e]=i[t];return e}Ht&&(gn=document.createElement("div").style,"AnimationEvent"in window||(delete hn.animationend.animation,delete hn.animationiteration.animation,delete hn.animationstart.animation),"TransitionEvent"in window||delete hn.transitionend.transition);var fn=mn("animationend"),vn=mn("animationiteration"),yn=mn("animationstart"),bn=mn("transitionrun"),xn=mn("transitionstart"),Cn=mn("transitioncancel"),Sn=mn("transitionend"),wn=new Map,Mn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kn(e,t){wn.set(e,t),nt(t,[e])}Mn.push("scrollEnd");var Dn="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},In=[],An=0,Ln=0;function Nn(){for(var e=An,t=Ln=An=0;t<e;){var i=In[t];In[t++]=null;var n=In[t];In[t++]=null;var o=In[t];In[t++]=null;var s=In[t];if(In[t++]=null,null!==n&&null!==o){var r=n.pending;null===r?o.next=o:(o.next=r.next,r.next=o),n.pending=o}0!==s&&Pn(i,o,s)}}function Tn(e,t,i,n){In[An++]=e,In[An++]=t,In[An++]=i,In[An++]=n,Ln|=n,e.lanes|=n,null!==(e=e.alternate)&&(e.lanes|=n)}function Rn(e,t,i,n){return Tn(e,t,i,n),On(e)}function En(e,t){return Tn(e,null,null,t),On(e)}function Pn(e,t,i){e.lanes|=i;var n=e.alternate;null!==n&&(n.lanes|=i);for(var o=!1,s=e.return;null!==s;)s.childLanes|=i,null!==(n=s.alternate)&&(n.childLanes|=i),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(o=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,o&&null!==t&&(o=31-xe(i),null===(n=(e=s.hiddenUpdates)[o])?e[o]=[t]:n.push(t),t.lane=536870912|i),s):null}function On(e){if(50<Kd)throw Kd=0,Ud=null,Error(r(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Fn={};function zn(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(e,t,i,n){return new zn(e,t,i,n)}function Vn(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Gn(e,t){var i=e.alternate;return null===i?((i=Bn(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=65011712&e.flags,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Hn(e,t){e.flags&=65011714;var i=e.alternate;return null===i?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function jn(e,t,i,n,o,s){var a=0;if(n=e,"function"===typeof e)Vn(e)&&(a=1);else if("string"===typeof e)a=function(e,t,i){if(1===i||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,i,_.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case I:return(e=Bn(31,i,t,o)).elementType=I,e.lanes=s,e;case v:return Wn(i.children,o,s,t);case y:a=8,o|=24;break;case b:return(e=Bn(12,i,t,2|o)).elementType=b,e.lanes=s,e;case w:return(e=Bn(13,i,t,o)).elementType=w,e.lanes=s,e;case M:return(e=Bn(19,i,t,o)).elementType=M,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case x:a=9;break e;case S:a=11;break e;case k:a=14;break e;case D:a=16,n=null;break e}a=29,i=Error(r(130,null===e?"null":typeof e,"")),n=null}return(t=Bn(a,i,t,o)).elementType=e,t.type=n,t.lanes=s,t}function Wn(e,t,i,n){return(e=Bn(7,e,n,t)).lanes=i,e}function _n(e,t,i){return(e=Bn(6,e,null,t)).lanes=i,e}function Kn(e){var t=Bn(18,null,null,0);return t.stateNode=e,t}function Un(e,t,i){return(t=Bn(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Yn=new WeakMap;function $n(e,t){if("object"===typeof e&&null!==e){var i=Yn.get(e);return void 0!==i?i:(t={value:e,source:t,stack:ie(t)},Yn.set(e,t),t)}return{value:e,source:t,stack:ie(t)}}var Zn=[],Xn=0,qn=null,Qn=0,Jn=[],eo=0,to=null,io=1,no="";function oo(e,t){Zn[Xn++]=Qn,Zn[Xn++]=qn,qn=e,Qn=t}function so(e,t,i){Jn[eo++]=io,Jn[eo++]=no,Jn[eo++]=to,to=e;var n=io;e=no;var o=32-xe(n)-1;n&=~(1<<o),i+=1;var s=32-xe(t)+o;if(30<s){var r=o-o%5;s=(n&(1<<r)-1).toString(32),n>>=r,o-=r,io=1<<32-xe(t)+o|i<<o|n,no=s+e}else io=1<<s|i<<o|n,no=e}function ro(e){null!==e.return&&(oo(e,1),so(e,1,0))}function ao(e){for(;e===qn;)qn=Zn[--Xn],Zn[Xn]=null,Qn=Zn[--Xn],Zn[Xn]=null;for(;e===to;)to=Jn[--eo],Jn[eo]=null,no=Jn[--eo],Jn[eo]=null,io=Jn[--eo],Jn[eo]=null}function lo(e,t){Jn[eo++]=io,Jn[eo++]=no,Jn[eo++]=to,io=t.id,no=t.overflow,to=e}var co=null,uo=null,ho=!1,po=null,go=!1,mo=Error(r(519));function fo(e){throw So($n(Error(r(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),mo}function vo(e){var t=e.stateNode,i=e.type,n=e.memoizedProps;switch(t[He]=e,t[je]=n,i){case"dialog":qc("cancel",t),qc("close",t);break;case"iframe":case"object":case"embed":qc("load",t);break;case"video":case"audio":for(i=0;i<$c.length;i++)qc($c[i],t);break;case"source":qc("error",t);break;case"img":case"image":case"link":qc("error",t),qc("load",t);break;case"details":qc("toggle",t);break;case"input":qc("invalid",t),bt(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":qc("invalid",t);break;case"textarea":qc("invalid",t),wt(t,n.value,n.defaultValue,n.children)}"string"!==typeof(i=n.children)&&"number"!==typeof i&&"bigint"!==typeof i||t.textContent===""+i||!0===n.suppressHydrationWarning||cu(t.textContent,i)?(null!=n.popover&&(qc("beforetoggle",t),qc("toggle",t)),null!=n.onScroll&&qc("scroll",t),null!=n.onScrollEnd&&qc("scrollend",t),null!=n.onClick&&(t.onclick=Rt),t=!0):t=!1,t||fo(e,!0)}function yo(e){for(co=e.return;co;)switch(co.tag){case 5:case 31:case 13:return void(go=!1);case 27:case 3:return void(go=!0);default:co=co.return}}function bo(e){if(e!==co)return!1;if(!ho)return yo(e),ho=!0,!1;var t,i=e.tag;if((t=3!==i&&27!==i)&&((t=5===i)&&(t=!("form"!==(t=e.type)&&"button"!==t)||xu(e.type,e.memoizedProps)),t=!t),t&&uo&&fo(e),yo(e),13===i){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));uo=Fu(e)}else if(31===i){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));uo=Fu(e)}else 27===i?(i=uo,Iu(e.type)?(e=Ou,Ou=null,uo=e):uo=i):uo=co?Pu(e.stateNode.nextSibling):null;return!0}function xo(){uo=co=null,ho=!1}function Co(){var e=po;return null!==e&&(null===Td?Td=e:Td.push.apply(Td,e),po=null),e}function So(e){null===po?po=[e]:po.push(e)}var wo=V(null),Mo=null,ko=null;function Do(e,t,i){H(wo,t._currentValue),t._currentValue=i}function Io(e){e._currentValue=wo.current,G(wo)}function Ao(e,t,i){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===i)break;e=e.return}}function Lo(e,t,i,n){var o=e.child;for(null!==o&&(o.return=e);null!==o;){var s=o.dependencies;if(null!==s){var a=o.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=o;for(var d=0;d<t.length;d++)if(l.context===t[d]){s.lanes|=i,null!==(l=s.alternate)&&(l.lanes|=i),Ao(s.return,i,e),n||(a=null);break e}s=l.next}}else if(18===o.tag){if(null===(a=o.return))throw Error(r(341));a.lanes|=i,null!==(s=a.alternate)&&(s.lanes|=i),Ao(a,i,e),a=null}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===e){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}}function No(e,t,i,n){e=null;for(var o=t,s=!1;null!==o;){if(!s)if(0!==(524288&o.flags))s=!0;else if(0!==(262144&o.flags))break;if(10===o.tag){var a=o.alternate;if(null===a)throw Error(r(387));if(null!==(a=a.memoizedProps)){var l=o.type;qi(o.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(o===Y.current){if(null===(a=o.alternate))throw Error(r(387));a.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(null!==e?e.push(uh):e=[uh])}o=o.return}null!==e&&Lo(t,e,i,n),t.flags|=262144}function To(e){for(e=e.firstContext;null!==e;){if(!qi(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ro(e){Mo=e,ko=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Eo(e){return Oo(Mo,e)}function Po(e,t){return null===Mo&&Ro(e),Oo(e,t)}function Oo(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},null===ko){if(null===e)throw Error(r(308));ko=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ko=ko.next=t;return i}var Fo="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},zo=n.unstable_scheduleCallback,Bo=n.unstable_NormalPriority,Vo={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Go(){return{controller:new Fo,data:new Map,refCount:0}}function Ho(e){e.refCount--,0===e.refCount&&zo(Bo,function(){e.controller.abort()})}var jo=null,Wo=0,_o=0,Ko=null;function Uo(){if(0===--Wo&&null!==jo){null!==Ko&&(Ko.status="fulfilled");var e=jo;jo=null,_o=0,Ko=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Yo=P.S;P.S=function(e,t){Pd=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===jo){var i=jo=[];Wo=0,_o=Wc(),Ko={status:"pending",value:void 0,then:function(e){i.push(e)}}}Wo++,t.then(Uo,Uo)}(0,t),null!==Yo&&Yo(e,t)};var $o=V(null);function Zo(){var e=$o.current;return null!==e?e:md.pooledCache}function Xo(e,t){H($o,null===t?$o.current:t.pool)}function qo(){var e=Zo();return null===e?null:{parent:Vo._currentValue,pool:e}}var Qo=Error(r(460)),Jo=Error(r(474)),es=Error(r(542)),ts={then:function(){}};function is(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ns(e,t,i){switch(void 0===(i=e[i])?e.push(t):i!==t&&(t.then(Rt,Rt),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw as(e=t.reason),e;default:if("string"===typeof t.status)t.then(Rt,Rt);else{if(null!==(e=md)&&100<e.shellSuspendCounter)throw Error(r(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var i=t;i.status="fulfilled",i.value=e}},function(e){if("pending"===t.status){var i=t;i.status="rejected",i.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw as(e=t.reason),e}throw ss=t,Qo}}function os(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw ss=t,Qo;throw t}}var ss=null;function rs(){if(null===ss)throw Error(r(459));var e=ss;return ss=null,e}function as(e){if(e===Qo||e===es)throw Error(r(483))}var ls=null,ds=0;function cs(e){var t=ds;return ds+=1,null===ls&&(ls=[]),ns(ls,e,t)}function us(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function hs(e,t){if(t.$$typeof===g)throw Error(r(525));throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ps(e){function t(t,i){if(e){var n=t.deletions;null===n?(t.deletions=[i],t.flags|=16):n.push(i)}}function i(i,n){if(!e)return null;for(;null!==n;)t(i,n),n=n.sibling;return null}function n(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(e,t){return(e=Gn(e,t)).index=0,e.sibling=null,e}function s(t,i,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<i?(t.flags|=67108866,i):n:(t.flags|=67108866,i):(t.flags|=1048576,i)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,i,n){return null===t||6!==t.tag?((t=_n(i,e.mode,n)).return=e,t):((t=o(t,i)).return=e,t)}function d(e,t,i,n){var s=i.type;return s===v?u(e,t,i.props.children,n,i.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&os(s)===t.type)?(us(t=o(t,i.props),i),t.return=e,t):(us(t=jn(i.type,i.key,i.props,null,e.mode,n),i),t.return=e,t)}function c(e,t,i,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=Un(i,e.mode,n)).return=e,t):((t=o(t,i.children||[])).return=e,t)}function u(e,t,i,n,s){return null===t||7!==t.tag?((t=Wn(i,e.mode,n,s)).return=e,t):((t=o(t,i)).return=e,t)}function h(e,t,i){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=_n(""+t,e.mode,i)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return us(i=jn(t.type,t.key,t.props,null,e.mode,i),t),i.return=e,i;case f:return(t=Un(t,e.mode,i)).return=e,t;case D:return h(e,t=os(t),i)}if(E(t)||N(t))return(t=Wn(t,e.mode,i,null)).return=e,t;if("function"===typeof t.then)return h(e,cs(t),i);if(t.$$typeof===C)return h(e,Po(e,t),i);hs(e,t)}return null}function p(e,t,i,n){var o=null!==t?t.key:null;if("string"===typeof i&&""!==i||"number"===typeof i||"bigint"===typeof i)return null!==o?null:l(e,t,""+i,n);if("object"===typeof i&&null!==i){switch(i.$$typeof){case m:return i.key===o?d(e,t,i,n):null;case f:return i.key===o?c(e,t,i,n):null;case D:return p(e,t,i=os(i),n)}if(E(i)||N(i))return null!==o?null:u(e,t,i,n,null);if("function"===typeof i.then)return p(e,t,cs(i),n);if(i.$$typeof===C)return p(e,t,Po(e,i),n);hs(e,i)}return null}function g(e,t,i,n,o){if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return l(t,e=e.get(i)||null,""+n,o);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return d(t,e=e.get(null===n.key?i:n.key)||null,n,o);case f:return c(t,e=e.get(null===n.key?i:n.key)||null,n,o);case D:return g(e,t,i,n=os(n),o)}if(E(n)||N(n))return u(t,e=e.get(i)||null,n,o,null);if("function"===typeof n.then)return g(e,t,i,cs(n),o);if(n.$$typeof===C)return g(e,t,i,Po(t,n),o);hs(t,n)}return null}function y(l,d,c,u){if("object"===typeof c&&null!==c&&c.type===v&&null===c.key&&(c=c.props.children),"object"===typeof c&&null!==c){switch(c.$$typeof){case m:e:{for(var b=c.key;null!==d;){if(d.key===b){if((b=c.type)===v){if(7===d.tag){i(l,d.sibling),(u=o(d,c.props.children)).return=l,l=u;break e}}else if(d.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===D&&os(b)===d.type){i(l,d.sibling),us(u=o(d,c.props),c),u.return=l,l=u;break e}i(l,d);break}t(l,d),d=d.sibling}c.type===v?((u=Wn(c.props.children,l.mode,u,c.key)).return=l,l=u):(us(u=jn(c.type,c.key,c.props,null,l.mode,u),c),u.return=l,l=u)}return a(l);case f:e:{for(b=c.key;null!==d;){if(d.key===b){if(4===d.tag&&d.stateNode.containerInfo===c.containerInfo&&d.stateNode.implementation===c.implementation){i(l,d.sibling),(u=o(d,c.children||[])).return=l,l=u;break e}i(l,d);break}t(l,d),d=d.sibling}(u=Un(c,l.mode,u)).return=l,l=u}return a(l);case D:return y(l,d,c=os(c),u)}if(E(c))return function(o,r,a,l){for(var d=null,c=null,u=r,m=r=0,f=null;null!==u&&m<a.length;m++){u.index>m?(f=u,u=null):f=u.sibling;var v=p(o,u,a[m],l);if(null===v){null===u&&(u=f);break}e&&u&&null===v.alternate&&t(o,u),r=s(v,r,m),null===c?d=v:c.sibling=v,c=v,u=f}if(m===a.length)return i(o,u),ho&&oo(o,m),d;if(null===u){for(;m<a.length;m++)null!==(u=h(o,a[m],l))&&(r=s(u,r,m),null===c?d=u:c.sibling=u,c=u);return ho&&oo(o,m),d}for(u=n(u);m<a.length;m++)null!==(f=g(u,o,m,a[m],l))&&(e&&null!==f.alternate&&u.delete(null===f.key?m:f.key),r=s(f,r,m),null===c?d=f:c.sibling=f,c=f);return e&&u.forEach(function(e){return t(o,e)}),ho&&oo(o,m),d}(l,d,c,u);if(N(c)){if("function"!==typeof(b=N(c)))throw Error(r(150));return function(o,a,l,d){if(null==l)throw Error(r(151));for(var c=null,u=null,m=a,f=a=0,v=null,y=l.next();null!==m&&!y.done;f++,y=l.next()){m.index>f?(v=m,m=null):v=m.sibling;var b=p(o,m,y.value,d);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(o,m),a=s(b,a,f),null===u?c=b:u.sibling=b,u=b,m=v}if(y.done)return i(o,m),ho&&oo(o,f),c;if(null===m){for(;!y.done;f++,y=l.next())null!==(y=h(o,y.value,d))&&(a=s(y,a,f),null===u?c=y:u.sibling=y,u=y);return ho&&oo(o,f),c}for(m=n(m);!y.done;f++,y=l.next())null!==(y=g(m,o,f,y.value,d))&&(e&&null!==y.alternate&&m.delete(null===y.key?f:y.key),a=s(y,a,f),null===u?c=y:u.sibling=y,u=y);return e&&m.forEach(function(e){return t(o,e)}),ho&&oo(o,f),c}(l,d,c=b.call(c),u)}if("function"===typeof c.then)return y(l,d,cs(c),u);if(c.$$typeof===C)return y(l,d,Po(l,c),u);hs(l,c)}return"string"===typeof c&&""!==c||"number"===typeof c||"bigint"===typeof c?(c=""+c,null!==d&&6===d.tag?(i(l,d.sibling),(u=o(d,c)).return=l,l=u):(i(l,d),(u=_n(c,l.mode,u)).return=l,l=u),a(l)):i(l,d)}return function(e,t,i,n){try{ds=0;var o=y(e,t,i,n);return ls=null,o}catch(r){if(r===Qo||r===es)throw r;var s=Bn(29,r,null,e.mode);return s.lanes=n,s.return=e,s}}}var gs=ps(!0),ms=ps(!1),fs=!1;function vs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ys(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function bs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function xs(e,t,i){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&gd)){var o=n.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),n.pending=t,t=On(e),Pn(e,null,i),t}return Tn(e,n,t,i),On(e)}function Cs(e,t,i){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&i))){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,Pe(e,i)}}function Ss(e,t){var i=e.updateQueue,n=e.alternate;if(null!==n&&i===(n=n.updateQueue)){var o=null,s=null;if(null!==(i=i.firstBaseUpdate)){do{var r={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};null===s?o=s=r:s=s.next=r,i=i.next}while(null!==i);null===s?o=s=t:s=s.next=t}else o=s=t;return i={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:n.shared,callbacks:n.callbacks},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var ws=!1;function Ms(){if(ws){if(null!==Ko)throw Ko}}function ks(e,t,i,n){ws=!1;var o=e.updateQueue;fs=!1;var s=o.firstBaseUpdate,r=o.lastBaseUpdate,a=o.shared.pending;if(null!==a){o.shared.pending=null;var l=a,d=l.next;l.next=null,null===r?s=d:r.next=d,r=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==r&&(null===a?c.firstBaseUpdate=d:a.next=d,c.lastBaseUpdate=l))}if(null!==s){var u=o.baseState;for(r=0,c=d=l=null,a=s;;){var h=-536870913&a.lane,g=h!==a.lane;if(g?(vd&h)===h:(n&h)===h){0!==h&&h===_o&&(ws=!0),null!==c&&(c=c.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,f=a;h=t;var v=i;switch(f.tag){case 1:if("function"===typeof(m=f.payload)){u=m.call(v,u,h);break e}u=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=f.payload)?m.call(v,u,h):m)||void 0===h)break e;u=p({},u,h);break e;case 2:fs=!0}}null!==(h=a.callback)&&(e.flags|=64,g&&(e.flags|=8192),null===(g=o.callbacks)?o.callbacks=[h]:g.push(h))}else g={lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(d=c=g,l=u):c=c.next=g,r|=h;if(null===(a=a.next)){if(null===(a=o.shared.pending))break;a=(g=a).next,g.next=null,o.lastBaseUpdate=g,o.shared.pending=null}}null===c&&(l=u),o.baseState=l,o.firstBaseUpdate=d,o.lastBaseUpdate=c,null===s&&(o.shared.lanes=0),kd|=r,e.lanes=r,e.memoizedState=u}}function Ds(e,t){if("function"!==typeof e)throw Error(r(191,e));e.call(t)}function Is(e,t){var i=e.callbacks;if(null!==i)for(e.callbacks=null,e=0;e<i.length;e++)Ds(i[e],t)}var As=V(null),Ls=V(0);function Ns(e,t){H(Ls,e=wd),H(As,t),wd=e|t.baseLanes}function Ts(){H(Ls,wd),H(As,As.current)}function Rs(){wd=Ls.current,G(As),G(Ls)}var Es=V(null),Ps=null;function Os(e){var t=e.alternate;H(Gs,1&Gs.current),H(Es,e),null===Ps&&(null===t||null!==As.current||null!==t.memoizedState)&&(Ps=e)}function Fs(e){H(Gs,Gs.current),H(Es,e),null===Ps&&(Ps=e)}function zs(e){22===e.tag?(H(Gs,Gs.current),H(Es,e),null===Ps&&(Ps=e)):Bs()}function Bs(){H(Gs,Gs.current),H(Es,Es.current)}function Vs(e){G(Es),Ps===e&&(Ps=null),G(Gs)}var Gs=V(0);function Hs(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||Ru(i)||Eu(i)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var js=0,Ws=null,_s=null,Ks=null,Us=!1,Ys=!1,$s=!1,Zs=0,Xs=0,qs=null,Qs=0;function Js(){throw Error(r(321))}function er(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!qi(e[i],t[i]))return!1;return!0}function tr(e,t,i,n,o,s){return js=s,Ws=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,P.H=null===e||null===e.memoizedState?va:ya,$s=!1,s=i(n,o),$s=!1,Ys&&(s=nr(t,i,n,o)),ir(e),s}function ir(e){P.H=fa;var t=null!==_s&&null!==_s.next;if(js=0,Ks=_s=Ws=null,Us=!1,Xs=0,qs=null,t)throw Error(r(300));null===e||Pa||null!==(e=e.dependencies)&&To(e)&&(Pa=!0)}function nr(e,t,i,n){Ws=e;var o=0;do{if(Ys&&(qs=null),Xs=0,Ys=!1,25<=o)throw Error(r(301));if(o+=1,Ks=_s=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}P.H=ba,s=t(i,n)}while(Ys);return s}function or(){var e=P.H,t=e.useState()[0];return t="function"===typeof t.then?cr(t):t,e=e.useState()[0],(null!==_s?_s.memoizedState:null)!==e&&(Ws.flags|=1024),t}function sr(){var e=0!==Zs;return Zs=0,e}function rr(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function ar(e){if(Us){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Us=!1}js=0,Ks=_s=Ws=null,Ys=!1,Xs=Zs=0,qs=null}function lr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ks?Ws.memoizedState=Ks=e:Ks=Ks.next=e,Ks}function dr(){if(null===_s){var e=Ws.alternate;e=null!==e?e.memoizedState:null}else e=_s.next;var t=null===Ks?Ws.memoizedState:Ks.next;if(null!==t)Ks=t,_s=e;else{if(null===e){if(null===Ws.alternate)throw Error(r(467));throw Error(r(310))}e={memoizedState:(_s=e).memoizedState,baseState:_s.baseState,baseQueue:_s.baseQueue,queue:_s.queue,next:null},null===Ks?Ws.memoizedState=Ks=e:Ks=Ks.next=e}return Ks}function cr(e){var t=Xs;return Xs+=1,null===qs&&(qs=[]),e=ns(qs,e,t),t=Ws,null===(null===Ks?t.memoizedState:Ks.next)&&(t=t.alternate,P.H=null===t||null===t.memoizedState?va:ya),e}function ur(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return cr(e);if(e.$$typeof===C)return Eo(e)}throw Error(r(438,String(e)))}function hr(e){var t=null,i=Ws.updateQueue;if(null!==i&&(t=i.memoCache),null==t){var n=Ws.alternate;null!==n&&(null!==(n=n.updateQueue)&&(null!=(n=n.memoCache)&&(t={data:n.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===i&&(i={lastEffect:null,events:null,stores:null,memoCache:null},Ws.updateQueue=i),i.memoCache=t,void 0===(i=t.data[t.index]))for(i=t.data[t.index]=Array(e),n=0;n<e;n++)i[n]=A;return t.index++,i}function pr(e,t){return"function"===typeof t?t(e):t}function gr(e){return mr(dr(),_s,e)}function mr(e,t,i){var n=e.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=i;var o=e.baseQueue,s=n.pending;if(null!==s){if(null!==o){var a=o.next;o.next=s.next,s.next=a}t.baseQueue=o=s,n.pending=null}if(s=e.baseState,null===o)e.memoizedState=s;else{var l=a=null,d=null,c=t=o.next,u=!1;do{var h=-536870913&c.lane;if(h!==c.lane?(vd&h)===h:(js&h)===h){var p=c.revertLane;if(0===p)null!==d&&(d=d.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===_o&&(u=!0);else{if((js&p)===p){c=c.next,p===_o&&(u=!0);continue}h={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===d?(l=d=h,a=s):d=d.next=h,Ws.lanes|=p,kd|=p}h=c.action,$s&&i(s,h),s=c.hasEagerState?c.eagerState:i(s,h)}else p={lane:h,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===d?(l=d=p,a=s):d=d.next=p,Ws.lanes|=h,kd|=h;c=c.next}while(null!==c&&c!==t);if(null===d?a=s:d.next=l,!qi(s,e.memoizedState)&&(Pa=!0,u&&null!==(i=Ko)))throw i;e.memoizedState=s,e.baseState=a,e.baseQueue=d,n.lastRenderedState=s}return null===o&&(n.lanes=0),[e.memoizedState,n.dispatch]}function fr(e){var t=dr(),i=t.queue;if(null===i)throw Error(r(311));i.lastRenderedReducer=e;var n=i.dispatch,o=i.pending,s=t.memoizedState;if(null!==o){i.pending=null;var a=o=o.next;do{s=e(s,a.action),a=a.next}while(a!==o);qi(s,t.memoizedState)||(Pa=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),i.lastRenderedState=s}return[s,n]}function vr(e,t,i){var n=Ws,o=dr(),s=ho;if(s){if(void 0===i)throw Error(r(407));i=i()}else i=t();var a=!qi((_s||o).memoizedState,i);if(a&&(o.memoizedState=i,Pa=!0),o=o.queue,jr(xr.bind(null,n,o,e),[e]),o.getSnapshot!==t||a||null!==Ks&&1&Ks.memoizedState.tag){if(n.flags|=2048,zr(9,{destroy:void 0},br.bind(null,n,o,i,t),null),null===md)throw Error(r(349));s||0!==(127&js)||yr(n,t,i)}return i}function yr(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},null===(t=Ws.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Ws.updateQueue=t,t.stores=[e]):null===(i=t.stores)?t.stores=[e]:i.push(e)}function br(e,t,i,n){t.value=i,t.getSnapshot=n,Cr(t)&&Sr(e)}function xr(e,t,i){return i(function(){Cr(t)&&Sr(e)})}function Cr(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!qi(e,i)}catch(Ur){return!0}}function Sr(e){var t=En(e,2);null!==t&&Zd(t,e,2)}function wr(e){var t=lr();if("function"===typeof e){var i=e;if(e=i(),$s){be(!0);try{i()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pr,lastRenderedState:e},t}function Mr(e,t,i,n){return e.baseState=i,mr(e,_s,"function"===typeof n?n:pr)}function kr(e,t,i,n,o){if(pa(e))throw Error(r(485));if(null!==(e=t.action)){var s={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==P.T?i(!0):s.isTransition=!1,n(s),null===(i=t.pending)?(s.next=t.pending=s,Dr(t,s)):(s.next=i.next,t.pending=i.next=s)}}function Dr(e,t){var i=t.action,n=t.payload,o=e.state;if(t.isTransition){var s=P.T,r={};P.T=r;try{var a=i(o,n),l=P.S;null!==l&&l(r,a),Ir(e,t,a)}catch(Ur){Lr(e,t,Ur)}finally{null!==s&&null!==r.types&&(s.types=r.types),P.T=s}}else try{Ir(e,t,s=i(o,n))}catch(d){Lr(e,t,d)}}function Ir(e,t,i){null!==i&&"object"===typeof i&&"function"===typeof i.then?i.then(function(i){Ar(e,t,i)},function(i){return Lr(e,t,i)}):Ar(e,t,i)}function Ar(e,t,i){t.status="fulfilled",t.value=i,Nr(t),e.state=i,null!==(t=e.pending)&&((i=t.next)===t?e.pending=null:(i=i.next,t.next=i,Dr(e,i)))}function Lr(e,t,i){var n=e.pending;if(e.pending=null,null!==n){n=n.next;do{t.status="rejected",t.reason=i,Nr(t),t=t.next}while(t!==n)}e.action=null}function Nr(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Tr(e,t){return t}function Rr(e,t){if(ho){var i=md.formState;if(null!==i){e:{var n=Ws;if(ho){if(uo){t:{for(var o=uo,s=go;8!==o.nodeType;){if(!s){o=null;break t}if(null===(o=Pu(o.nextSibling))){o=null;break t}}o="F!"===(s=o.data)||"F"===s?o:null}if(o){uo=Pu(o.nextSibling),n="F!"===o.data;break e}}fo(n)}n=!1}n&&(t=i[0])}}return(i=lr()).memoizedState=i.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tr,lastRenderedState:t},i.queue=n,i=ca.bind(null,Ws,n),n.dispatch=i,n=wr(!1),s=ha.bind(null,Ws,!1,n.queue),o={state:t,dispatch:null,action:e,pending:null},(n=lr()).queue=o,i=kr.bind(null,Ws,o,s,i),o.dispatch=i,n.memoizedState=e,[t,i,!1]}function Er(e){return Pr(dr(),_s,e)}function Pr(e,t,i){if(t=mr(e,t,Tr)[0],e=gr(pr)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var n=cr(t)}catch(r){if(r===Qo)throw es;throw r}else n=t;var o=(t=dr()).queue,s=o.dispatch;return i!==t.memoizedState&&(Ws.flags|=2048,zr(9,{destroy:void 0},Or.bind(null,o,i),null)),[n,s,e]}function Or(e,t){e.action=t}function Fr(e){var t=dr(),i=_s;if(null!==i)return Pr(t,i,e);dr(),t=t.memoizedState;var n=(i=dr()).queue.dispatch;return i.memoizedState=e,[t,n,!1]}function zr(e,t,i,n){return e={tag:e,create:i,deps:n,inst:t,next:null},null===(t=Ws.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Ws.updateQueue=t),null===(i=t.lastEffect)?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function Br(){return dr().memoizedState}function Vr(e,t,i,n){var o=lr();Ws.flags|=e,o.memoizedState=zr(1|t,{destroy:void 0},i,void 0===n?null:n)}function Gr(e,t,i,n){var o=dr();n=void 0===n?null:n;var s=o.memoizedState.inst;null!==_s&&null!==n&&er(n,_s.memoizedState.deps)?o.memoizedState=zr(t,s,i,n):(Ws.flags|=e,o.memoizedState=zr(1|t,s,i,n))}function Hr(e,t){Vr(8390656,8,e,t)}function jr(e,t){Gr(2048,8,e,t)}function Wr(e){var t=dr().memoizedState;return function(e){Ws.flags|=4;var t=Ws.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Ws.updateQueue=t,t.events=[e];else{var i=t.events;null===i?t.events=[e]:i.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&gd))throw Error(r(440));return t.impl.apply(void 0,arguments)}}function _r(e,t){return Gr(4,2,e,t)}function Kr(e,t){return Gr(4,4,e,t)}function Yr(e,t){if("function"===typeof t){e=e();var i=t(e);return function(){"function"===typeof i?i():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function $r(e,t,i){i=null!==i&&void 0!==i?i.concat([e]):null,Gr(4,4,Yr.bind(null,t,e),i)}function Zr(){}function Xr(e,t){var i=dr();t=void 0===t?null:t;var n=i.memoizedState;return null!==t&&er(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function qr(e,t){var i=dr();t=void 0===t?null:t;var n=i.memoizedState;if(null!==t&&er(t,n[1]))return n[0];if(n=e(),$s){be(!0);try{e()}finally{be(!1)}}return i.memoizedState=[n,t],n}function Qr(e,t,i){return void 0===i||0!==(1073741824&js)&&0===(261930&vd)?e.memoizedState=t:(e.memoizedState=i,e=$d(),Ws.lanes|=e,kd|=e,i)}function Jr(e,t,i,n){return qi(i,t)?i:null!==As.current?(e=Qr(e,i,n),qi(e,t)||(Pa=!0),e):0===(42&js)||0!==(1073741824&js)&&0===(261930&vd)?(Pa=!0,e.memoizedState=i):(e=$d(),Ws.lanes|=e,kd|=e,t)}function ea(e,t,i,n,o){var s=O.p;O.p=0!==s&&8>s?s:8;var r=P.T,a={};P.T=a,ha(e,!1,t,i);try{var l=o(),d=P.S;if(null!==d&&d(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=function(e,t){var i=[],n={status:"pending",value:null,reason:null,then:function(e){i.push(e)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var e=0;e<i.length;e++)(0,i[e])(t)},function(e){for(n.status="rejected",n.reason=e,e=0;e<i.length;e++)(0,i[e])(void 0)}),n}(l,n);ua(e,t,c,Yd())}else ua(e,t,n,Yd())}catch(Ur){ua(e,t,{then:function(){},status:"rejected",reason:Ur},Yd())}finally{O.p=s,null!==r&&null!==a.types&&(r.types=a.types),P.T=r}}function ta(){}function ia(e,t,i,n){if(5!==e.tag)throw Error(r(476));var o=na(e).queue;ea(e,o,t,F,null===i?ta:function(){return oa(e),i(n)})}function na(e){var t=e.memoizedState;if(null!==t)return t;var i={};return(t={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pr,lastRenderedState:F},next:null}).next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pr,lastRenderedState:i},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function oa(e){var t=na(e);null===t.next&&(t=e.alternate.memoizedState),ua(e,t.next.queue,{},Yd())}function sa(){return Eo(uh)}function ra(){return dr().memoizedState}function aa(){return dr().memoizedState}function la(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var i=Yd(),n=xs(t,e=bs(i),i);return null!==n&&(Zd(n,t,i),Cs(n,t,i)),t={cache:Go()},void(e.payload=t)}t=t.return}}function da(e,t,i){var n=Yd();i={lane:n,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},pa(e)?ga(t,i):null!==(i=Rn(e,t,i,n))&&(Zd(i,e,n),ma(i,t,n))}function ca(e,t,i){ua(e,t,i,Yd())}function ua(e,t,i,n){var o={lane:n,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(pa(e))ga(t,o);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var r=t.lastRenderedState,a=s(r,i);if(o.hasEagerState=!0,o.eagerState=a,qi(a,r))return Tn(e,t,o,0),null===md&&Nn(),!1}catch(Ur){}if(null!==(i=Rn(e,t,o,n)))return Zd(i,e,n),ma(i,t,n),!0}return!1}function ha(e,t,i,n){if(n={lane:2,revertLane:Wc(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},pa(e)){if(t)throw Error(r(479))}else null!==(t=Rn(e,i,n,2))&&Zd(t,e,2)}function pa(e){var t=e.alternate;return e===Ws||null!==t&&t===Ws}function ga(e,t){Ys=Us=!0;var i=e.pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function ma(e,t,i){if(0!==(4194048&i)){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,Pe(e,i)}}var fa={readContext:Eo,use:ur,useCallback:Js,useContext:Js,useEffect:Js,useImperativeHandle:Js,useLayoutEffect:Js,useInsertionEffect:Js,useMemo:Js,useReducer:Js,useRef:Js,useState:Js,useDebugValue:Js,useDeferredValue:Js,useTransition:Js,useSyncExternalStore:Js,useId:Js,useHostTransitionStatus:Js,useFormState:Js,useActionState:Js,useOptimistic:Js,useMemoCache:Js,useCacheRefresh:Js};fa.useEffectEvent=Js;var va={readContext:Eo,use:ur,useCallback:function(e,t){return lr().memoizedState=[e,void 0===t?null:t],e},useContext:Eo,useEffect:Hr,useImperativeHandle:function(e,t,i){i=null!==i&&void 0!==i?i.concat([e]):null,Vr(4194308,4,Yr.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Vr(4194308,4,e,t)},useInsertionEffect:function(e,t){Vr(4,2,e,t)},useMemo:function(e,t){var i=lr();t=void 0===t?null:t;var n=e();if($s){be(!0);try{e()}finally{be(!1)}}return i.memoizedState=[n,t],n},useReducer:function(e,t,i){var n=lr();if(void 0!==i){var o=i(t);if($s){be(!0);try{i(t)}finally{be(!1)}}}else o=t;return n.memoizedState=n.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},n.queue=e,e=e.dispatch=da.bind(null,Ws,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},lr().memoizedState=e},useState:function(e){var t=(e=wr(e)).queue,i=ca.bind(null,Ws,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Zr,useDeferredValue:function(e,t){return Qr(lr(),e,t)},useTransition:function(){var e=wr(!1);return e=ea.bind(null,Ws,e.queue,!0,!1),lr().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var n=Ws,o=lr();if(ho){if(void 0===i)throw Error(r(407));i=i()}else{if(i=t(),null===md)throw Error(r(349));0!==(127&vd)||yr(n,t,i)}o.memoizedState=i;var s={value:i,getSnapshot:t};return o.queue=s,Hr(xr.bind(null,n,s,e),[e]),n.flags|=2048,zr(9,{destroy:void 0},br.bind(null,n,s,i,t),null),i},useId:function(){var e=lr(),t=md.identifierPrefix;if(ho){var i=no;t="_"+t+"R_"+(i=(io&~(1<<32-xe(io)-1)).toString(32)+i),0<(i=Zs++)&&(t+="H"+i.toString(32)),t+="_"}else t="_"+t+"r_"+(i=Qs++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:sa,useFormState:Rr,useActionState:Rr,useOptimistic:function(e){var t=lr();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=ha.bind(null,Ws,!0,i),i.dispatch=t,[e,t]},useMemoCache:hr,useCacheRefresh:function(){return lr().memoizedState=la.bind(null,Ws)},useEffectEvent:function(e){var t=lr(),i={impl:e};return t.memoizedState=i,function(){if(0!==(2&gd))throw Error(r(440));return i.impl.apply(void 0,arguments)}}},ya={readContext:Eo,use:ur,useCallback:Xr,useContext:Eo,useEffect:jr,useImperativeHandle:$r,useInsertionEffect:_r,useLayoutEffect:Kr,useMemo:qr,useReducer:gr,useRef:Br,useState:function(){return gr(pr)},useDebugValue:Zr,useDeferredValue:function(e,t){return Jr(dr(),_s.memoizedState,e,t)},useTransition:function(){var e=gr(pr)[0],t=dr().memoizedState;return["boolean"===typeof e?e:cr(e),t]},useSyncExternalStore:vr,useId:ra,useHostTransitionStatus:sa,useFormState:Er,useActionState:Er,useOptimistic:function(e,t){return Mr(dr(),0,e,t)},useMemoCache:hr,useCacheRefresh:aa};ya.useEffectEvent=Wr;var ba={readContext:Eo,use:ur,useCallback:Xr,useContext:Eo,useEffect:jr,useImperativeHandle:$r,useInsertionEffect:_r,useLayoutEffect:Kr,useMemo:qr,useReducer:fr,useRef:Br,useState:function(){return fr(pr)},useDebugValue:Zr,useDeferredValue:function(e,t){var i=dr();return null===_s?Qr(i,e,t):Jr(i,_s.memoizedState,e,t)},useTransition:function(){var e=fr(pr)[0],t=dr().memoizedState;return["boolean"===typeof e?e:cr(e),t]},useSyncExternalStore:vr,useId:ra,useHostTransitionStatus:sa,useFormState:Fr,useActionState:Fr,useOptimistic:function(e,t){var i=dr();return null!==_s?Mr(i,0,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:hr,useCacheRefresh:aa};function xa(e,t,i,n){i=null===(i=i(n,t=e.memoizedState))||void 0===i?t:p({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}ba.useEffectEvent=Wr;var Ca={enqueueSetState:function(e,t,i){e=e._reactInternals;var n=Yd(),o=bs(n);o.payload=t,void 0!==i&&null!==i&&(o.callback=i),null!==(t=xs(e,o,n))&&(Zd(t,e,n),Cs(t,e,n))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var n=Yd(),o=bs(n);o.tag=1,o.payload=t,void 0!==i&&null!==i&&(o.callback=i),null!==(t=xs(e,o,n))&&(Zd(t,e,n),Cs(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Yd(),n=bs(i);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=xs(e,n,i))&&(Zd(t,e,i),Cs(t,e,i))}};function Sa(e,t,i,n,o,s,r){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,r):!t.prototype||!t.prototype.isPureReactComponent||(!Qi(i,n)||!Qi(o,s))}function wa(e,t,i,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&Ca.enqueueReplaceState(t,t.state,null)}function Ma(e,t){var i=t;if("ref"in t)for(var n in i={},t)"ref"!==n&&(i[n]=t[n]);if(e=e.defaultProps)for(var o in i===t&&(i=p({},i)),e)void 0===i[o]&&(i[o]=e[o]);return i}function ka(e){Dn(e)}function Da(e){console.error(e)}function Ia(e){Dn(e)}function Aa(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function La(e,t,i){try{(0,e.onCaughtError)(i.value,{componentStack:i.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function Na(e,t,i){return(i=bs(i)).tag=3,i.payload={element:null},i.callback=function(){Aa(e,t)},i}function Ta(e){return(e=bs(e)).tag=3,e}function Ra(e,t,i,n){var o=i.type.getDerivedStateFromError;if("function"===typeof o){var s=n.value;e.payload=function(){return o(s)},e.callback=function(){La(t,i,n)}}var r=i.stateNode;null!==r&&"function"===typeof r.componentDidCatch&&(e.callback=function(){La(t,i,n),"function"!==typeof o&&(null===zd?zd=new Set([this]):zd.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})})}var Ea=Error(r(461)),Pa=!1;function Oa(e,t,i,n){t.child=null===e?ms(t,null,i,n):gs(t,e.child,i,n)}function Fa(e,t,i,n,o){i=i.render;var s=t.ref;if("ref"in n){var r={};for(var a in n)"ref"!==a&&(r[a]=n[a])}else r=n;return Ro(t),n=tr(e,t,i,r,s,o),a=sr(),null===e||Pa?(ho&&a&&ro(t),t.flags|=1,Oa(e,t,n,o),t.child):(rr(e,t,o),sl(e,t,o))}function za(e,t,i,n,o){if(null===e){var s=i.type;return"function"!==typeof s||Vn(s)||void 0!==s.defaultProps||null!==i.compare?((e=jn(i.type,null,n,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ba(e,t,s,n,o))}if(s=e.child,!rl(e,o)){var r=s.memoizedProps;if((i=null!==(i=i.compare)?i:Qi)(r,n)&&e.ref===t.ref)return sl(e,t,o)}return t.flags|=1,(e=Gn(s,n)).ref=t.ref,e.return=t,t.child=e}function Ba(e,t,i,n,o){if(null!==e){var s=e.memoizedProps;if(Qi(s,n)&&e.ref===t.ref){if(Pa=!1,t.pendingProps=n=s,!rl(e,o))return t.lanes=e.lanes,sl(e,t,o);0!==(131072&e.flags)&&(Pa=!0)}}return Ka(e,t,i,n,o)}function Va(e,t,i,n){var o=n.children,s=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===n.mode){if(0!==(128&t.flags)){if(s=null!==s?s.baseLanes|i:i,null!==e){for(n=t.child=e.child,o=0;null!==n;)o=o|n.lanes|n.childLanes,n=n.sibling;n=o&~s}else n=0,t.child=null;return Ha(e,t,s,i,n)}if(0===(536870912&i))return n=t.lanes=536870912,Ha(e,t,null!==s?s.baseLanes|i:i,i,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Xo(0,null!==s?s.cachePool:null),null!==s?Ns(t,s):Ts(),zs(t)}else null!==s?(Xo(0,s.cachePool),Ns(t,s),Bs(),t.memoizedState=null):(null!==e&&Xo(0,null),Ts(),Bs());return Oa(e,t,o,i),t.child}function Ga(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Ha(e,t,i,n,o){var s=Zo();return s=null===s?null:{parent:Vo._currentValue,pool:s},t.memoizedState={baseLanes:i,cachePool:s},null!==e&&Xo(0,null),Ts(),zs(t),null!==e&&No(e,t,n,!0),t.childLanes=o,null}function ja(e,t){return(t=el({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Wa(e,t,i){return gs(t,e.child,null,i),(e=ja(t,t.pendingProps)).flags|=2,Vs(t),t.memoizedState=null,e}function _a(e,t){var i=t.ref;if(null===i)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof i&&"object"!==typeof i)throw Error(r(284));null!==e&&e.ref===i||(t.flags|=4194816)}}function Ka(e,t,i,n,o){return Ro(t),i=tr(e,t,i,n,void 0,o),n=sr(),null===e||Pa?(ho&&n&&ro(t),t.flags|=1,Oa(e,t,i,o),t.child):(rr(e,t,o),sl(e,t,o))}function Ua(e,t,i,n,o,s){return Ro(t),t.updateQueue=null,i=nr(t,n,i,o),ir(e),n=sr(),null===e||Pa?(ho&&n&&ro(t),t.flags|=1,Oa(e,t,i,s),t.child):(rr(e,t,s),sl(e,t,s))}function Ya(e,t,i,n,o){if(Ro(t),null===t.stateNode){var s=Fn,r=i.contextType;"object"===typeof r&&null!==r&&(s=Eo(r)),s=new i(n,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=Ca,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=n,s.state=t.memoizedState,s.refs={},vs(t),r=i.contextType,s.context="object"===typeof r&&null!==r?Eo(r):Fn,s.state=t.memoizedState,"function"===typeof(r=i.getDerivedStateFromProps)&&(xa(t,i,r,n),s.state=t.memoizedState),"function"===typeof i.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(r=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),r!==s.state&&Ca.enqueueReplaceState(s,s.state,null),ks(t,n,s,o),Ms(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),n=!0}else if(null===e){s=t.stateNode;var a=t.memoizedProps,l=Ma(i,a);s.props=l;var d=s.context,c=i.contextType;r=Fn,"object"===typeof c&&null!==c&&(r=Eo(c));var u=i.getDerivedStateFromProps;c="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate,a=t.pendingProps!==a,c||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a||d!==r)&&wa(t,s,n,r),fs=!1;var h=t.memoizedState;s.state=h,ks(t,n,s,o),Ms(),d=t.memoizedState,a||h!==d||fs?("function"===typeof u&&(xa(t,i,u,n),d=t.memoizedState),(l=fs||Sa(t,i,l,n,h,d,r))?(c||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=d),s.props=n,s.state=d,s.context=r,n=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,ys(e,t),c=Ma(i,r=t.memoizedProps),s.props=c,u=t.pendingProps,h=s.context,d=i.contextType,l=Fn,"object"===typeof d&&null!==d&&(l=Eo(d)),(d="function"===typeof(a=i.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(r!==u||h!==l)&&wa(t,s,n,l),fs=!1,h=t.memoizedState,s.state=h,ks(t,n,s,o),Ms();var p=t.memoizedState;r!==u||h!==p||fs||null!==e&&null!==e.dependencies&&To(e.dependencies)?("function"===typeof a&&(xa(t,i,a,n),p=t.memoizedState),(c=fs||Sa(t,i,c,n,h,p,l)||null!==e&&null!==e.dependencies&&To(e.dependencies))?(d||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(n,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(n,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),s.props=n,s.state=p,s.context=l,n=c):("function"!==typeof s.componentDidUpdate||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return s=n,_a(e,t),n=0!==(128&t.flags),s||n?(s=t.stateNode,i=n&&"function"!==typeof i.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&n?(t.child=gs(t,e.child,null,o),t.child=gs(t,null,i,o)):Oa(e,t,i,o),t.memoizedState=s.state,e=t.child):e=sl(e,t,o),e}function $a(e,t,i,n){return xo(),t.flags|=256,Oa(e,t,i,n),t.child}var Za={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xa(e){return{baseLanes:e,cachePool:qo()}}function qa(e,t,i){return e=null!==e?e.childLanes&~i:0,t&&(e|=Ad),e}function Qa(e,t,i){var n,o=t.pendingProps,s=!1,a=0!==(128&t.flags);if((n=a)||(n=(null===e||null!==e.memoizedState)&&0!==(2&Gs.current)),n&&(s=!0,t.flags&=-129),n=0!==(32&t.flags),t.flags&=-33,null===e){if(ho){if(s?Os(t):Bs(),(e=uo)?null!==(e=null!==(e=Tu(e,go))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==to?{id:io,overflow:no}:null,retryLane:536870912,hydrationErrors:null},(i=Kn(e)).return=t,t.child=i,co=t,uo=null):e=null,null===e)throw fo(t);return Eu(e)?t.lanes=32:t.lanes=536870912,null}var l=o.children;return o=o.fallback,s?(Bs(),l=el({mode:"hidden",children:l},s=t.mode),o=Wn(o,s,i,null),l.return=t,o.return=t,l.sibling=o,t.child=l,(o=t.child).memoizedState=Xa(i),o.childLanes=qa(e,n,i),t.memoizedState=Za,Ga(null,o)):(Os(t),Ja(t,l))}var d=e.memoizedState;if(null!==d&&null!==(l=d.dehydrated)){if(a)256&t.flags?(Os(t),t.flags&=-257,t=tl(e,t,i)):null!==t.memoizedState?(Bs(),t.child=e.child,t.flags|=128,t=null):(Bs(),l=o.fallback,s=t.mode,o=el({mode:"visible",children:o.children},s),(l=Wn(l,s,i,null)).flags|=2,o.return=t,l.return=t,o.sibling=l,t.child=o,gs(t,e.child,null,i),(o=t.child).memoizedState=Xa(i),o.childLanes=qa(e,n,i),t.memoizedState=Za,t=Ga(null,o));else if(Os(t),Eu(l)){if(n=l.nextSibling&&l.nextSibling.dataset)var c=n.dgst;n=c,(o=Error(r(419))).stack="",o.digest=n,So({value:o,source:null,stack:null}),t=tl(e,t,i)}else if(Pa||No(e,t,i,!1),n=0!==(i&e.childLanes),Pa||n){if(null!==(n=md)&&(0!==(o=Oe(n,i))&&o!==d.retryLane))throw d.retryLane=o,En(e,o),Zd(n,e,o),Ea;Ru(l)||ac(),t=tl(e,t,i)}else Ru(l)?(t.flags|=192,t.child=e.child,t=null):(e=d.treeContext,uo=Pu(l.nextSibling),co=t,ho=!0,po=null,go=!1,null!==e&&lo(t,e),(t=Ja(t,o.children)).flags|=4096);return t}return s?(Bs(),l=o.fallback,s=t.mode,c=(d=e.child).sibling,(o=Gn(d,{mode:"hidden",children:o.children})).subtreeFlags=65011712&d.subtreeFlags,null!==c?l=Gn(c,l):(l=Wn(l,s,i,null)).flags|=2,l.return=t,o.return=t,o.sibling=l,t.child=o,Ga(null,o),o=t.child,null===(l=e.child.memoizedState)?l=Xa(i):(null!==(s=l.cachePool)?(d=Vo._currentValue,s=s.parent!==d?{parent:d,pool:d}:s):s=qo(),l={baseLanes:l.baseLanes|i,cachePool:s}),o.memoizedState=l,o.childLanes=qa(e,n,i),t.memoizedState=Za,Ga(e.child,o)):(Os(t),e=(i=e.child).sibling,(i=Gn(i,{mode:"visible",children:o.children})).return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i)}function Ja(e,t){return(t=el({mode:"visible",children:t},e.mode)).return=e,e.child=t}function el(e,t){return(e=Bn(22,e,null,t)).lanes=0,e}function tl(e,t,i){return gs(t,e.child,null,i),(e=Ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function il(e,t,i){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ao(e.return,t,i)}function nl(e,t,i,n,o,s){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:o,treeForkCount:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=i,r.tailMode=o,r.treeForkCount=s)}function ol(e,t,i){var n=t.pendingProps,o=n.revealOrder,s=n.tail;n=n.children;var r=Gs.current,a=0!==(2&r);if(a?(r=1&r|2,t.flags|=128):r&=1,H(Gs,r),Oa(e,t,n,i),n=ho?Qn:0,!a&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&il(e,i,t);else if(19===e.tag)il(e,i,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(i=t.child,o=null;null!==i;)null!==(e=i.alternate)&&null===Hs(e)&&(o=i),i=i.sibling;null===(i=o)?(o=t.child,t.child=null):(o=i.sibling,i.sibling=null),nl(t,!1,o,i,s,n);break;case"backwards":case"unstable_legacy-backwards":for(i=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===Hs(e)){t.child=o;break}e=o.sibling,o.sibling=i,i=o,o=e}nl(t,!0,i,null,s,n);break;case"together":nl(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function sl(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),kd|=t.lanes,0===(i&t.childLanes)){if(null===e)return null;if(No(e,t,i,!1),0===(i&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(i=Gn(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=Gn(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function rl(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!To(e))}function al(e,t,i){if(null!==e)if(e.memoizedProps!==t.pendingProps)Pa=!0;else{if(!rl(e,i)&&0===(128&t.flags))return Pa=!1,function(e,t,i){switch(t.tag){case 3:$(t,t.stateNode.containerInfo),Do(0,Vo,e.memoizedState.cache),xo();break;case 27:case 5:X(t);break;case 4:$(t,t.stateNode.containerInfo);break;case 10:Do(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Fs(t),null;break;case 13:var n=t.memoizedState;if(null!==n)return null!==n.dehydrated?(Os(t),t.flags|=128,null):0!==(i&t.child.childLanes)?Qa(e,t,i):(Os(t),null!==(e=sl(e,t,i))?e.sibling:null);Os(t);break;case 19:var o=0!==(128&e.flags);if((n=0!==(i&t.childLanes))||(No(e,t,i,!1),n=0!==(i&t.childLanes)),o){if(n)return ol(e,t,i);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),H(Gs,Gs.current),n)break;return null;case 22:return t.lanes=0,Va(e,t,i,t.pendingProps);case 24:Do(0,Vo,e.memoizedState.cache)}return sl(e,t,i)}(e,t,i);Pa=0!==(131072&e.flags)}else Pa=!1,ho&&0!==(1048576&t.flags)&&so(t,Qn,t.index);switch(t.lanes=0,t.tag){case 16:e:{var n=t.pendingProps;if(e=os(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var o=e.$$typeof;if(o===S){t.tag=11,t=Fa(null,t,e,n,i);break e}if(o===k){t.tag=14,t=za(null,t,e,n,i);break e}}throw t=R(e)||e,Error(r(306,t,""))}Vn(e)?(n=Ma(e,n),t.tag=1,t=Ya(null,t,e,n,i)):(t.tag=0,t=Ka(null,t,e,n,i))}return t;case 0:return Ka(e,t,t.type,t.pendingProps,i);case 1:return Ya(e,t,n=t.type,o=Ma(n,t.pendingProps),i);case 3:e:{if($(t,t.stateNode.containerInfo),null===e)throw Error(r(387));n=t.pendingProps;var s=t.memoizedState;o=s.element,ys(e,t),ks(t,n,null,i);var a=t.memoizedState;if(n=a.cache,Do(0,Vo,n),n!==s.cache&&Lo(t,[Vo],i,!0),Ms(),n=a.element,s.isDehydrated){if(s={element:n,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=$a(e,t,n,i);break e}if(n!==o){So(o=$n(Error(r(424)),t)),t=$a(e,t,n,i);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(uo=Pu(e.firstChild),co=t,ho=!0,po=null,go=!0,i=ms(t,null,n,i),t.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(xo(),n===o){t=sl(e,t,i);break e}Oa(e,t,n,i)}t=t.child}return t;case 26:return _a(e,t),null===e?(i=Uu(t.type,null,t.pendingProps,null))?t.memoizedState=i:ho||(i=t.type,e=t.pendingProps,(n=vu(U.current).createElement(i))[He]=t,n[je]=e,pu(n,i,e),et(n),t.stateNode=n):t.memoizedState=Uu(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return X(t),null===e&&ho&&(n=t.stateNode=Bu(t.type,t.pendingProps,U.current),co=t,go=!0,o=uo,Iu(t.type)?(Ou=o,uo=Pu(n.firstChild)):uo=o),Oa(e,t,t.pendingProps.children,i),_a(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ho&&((o=n=uo)&&(null!==(n=function(e,t,i,n){for(;1===e.nodeType;){var o=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(n){if(!e[$e])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==o.rel||e.getAttribute("href")!==(null==o.href||""===o.href?null:o.href)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin)||e.getAttribute("title")!==(null==o.title?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==o.src?null:o.src)||e.getAttribute("type")!==(null==o.type?null:o.type)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==o.name?null:""+o.name;if("hidden"===o.type&&e.getAttribute("name")===s)return e}if(null===(e=Pu(e.nextSibling)))break}return null}(n,t.type,t.pendingProps,go))?(t.stateNode=n,co=t,uo=Pu(n.firstChild),go=!1,o=!0):o=!1),o||fo(t)),X(t),o=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,n=s.children,xu(o,s)?n=null:null!==a&&xu(o,a)&&(t.flags|=32),null!==t.memoizedState&&(o=tr(e,t,or,null,null,i),uh._currentValue=o),_a(e,t),Oa(e,t,n,i),t.child;case 6:return null===e&&ho&&((e=i=uo)&&(null!==(i=function(e,t,i){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!i)return null;if(null===(e=Pu(e.nextSibling)))return null}return e}(i,t.pendingProps,go))?(t.stateNode=i,co=t,uo=null,e=!0):e=!1),e||fo(t)),null;case 13:return Qa(e,t,i);case 4:return $(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=gs(t,null,n,i):Oa(e,t,n,i),t.child;case 11:return Fa(e,t,t.type,t.pendingProps,i);case 7:return Oa(e,t,t.pendingProps,i),t.child;case 8:case 12:return Oa(e,t,t.pendingProps.children,i),t.child;case 10:return n=t.pendingProps,Do(0,t.type,n.value),Oa(e,t,n.children,i),t.child;case 9:return o=t.type._context,n=t.pendingProps.children,Ro(t),n=n(o=Eo(o)),t.flags|=1,Oa(e,t,n,i),t.child;case 14:return za(e,t,t.type,t.pendingProps,i);case 15:return Ba(e,t,t.type,t.pendingProps,i);case 19:return ol(e,t,i);case 31:return function(e,t,i){var n=t.pendingProps,o=0!==(128&t.flags);if(t.flags&=-129,null===e){if(ho){if("hidden"===n.mode)return e=ja(t,n),t.lanes=536870912,Ga(null,e);if(Fs(t),(e=uo)?null!==(e=null!==(e=Tu(e,go))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==to?{id:io,overflow:no}:null,retryLane:536870912,hydrationErrors:null},(i=Kn(e)).return=t,t.child=i,co=t,uo=null):e=null,null===e)throw fo(t);return t.lanes=536870912,null}return ja(t,n)}var s=e.memoizedState;if(null!==s){var a=s.dehydrated;if(Fs(t),o)if(256&t.flags)t.flags&=-257,t=Wa(e,t,i);else{if(null===t.memoizedState)throw Error(r(558));t.child=e.child,t.flags|=128,t=null}else if(Pa||No(e,t,i,!1),o=0!==(i&e.childLanes),Pa||o){if(null!==(n=md)&&0!==(a=Oe(n,i))&&a!==s.retryLane)throw s.retryLane=a,En(e,a),Zd(n,e,a),Ea;ac(),t=Wa(e,t,i)}else e=s.treeContext,uo=Pu(a.nextSibling),co=t,ho=!0,po=null,go=!1,null!==e&&lo(t,e),(t=ja(t,n)).flags|=4096;return t}return(e=Gn(e.child,{mode:n.mode,children:n.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,i);case 22:return Va(e,t,i,t.pendingProps);case 24:return Ro(t),n=Eo(Vo),null===e?(null===(o=Zo())&&(o=md,s=Go(),o.pooledCache=s,s.refCount++,null!==s&&(o.pooledCacheLanes|=i),o=s),t.memoizedState={parent:n,cache:o},vs(t),Do(0,Vo,o)):(0!==(e.lanes&i)&&(ys(e,t),ks(t,null,null,i),Ms()),o=e.memoizedState,s=t.memoizedState,o.parent!==n?(o={parent:n,cache:n},t.memoizedState=o,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=o),Do(0,Vo,n)):(n=s.cache,Do(0,Vo,n),n!==o.cache&&Lo(t,[Vo],i,!0))),Oa(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function ll(e){e.flags|=4}function dl(e,t,i,n,o){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&o)===o)if(e.stateNode.complete)e.flags|=8192;else{if(!oc())throw ss=ts,Jo;e.flags|=8192}}else e.flags&=-16777217}function cl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!sh(t)){if(!oc())throw ss=ts,Jo;e.flags|=8192}}function ul(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ne():536870912,e.lanes|=t,Ld|=t)}function hl(e,t){if(!ho)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;null!==i;)null!==i.alternate&&(n=i),i=i.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function pl(e){var t=null!==e.alternate&&e.alternate.child===e.child,i=0,n=0;if(t)for(var o=e.child;null!==o;)i|=o.lanes|o.childLanes,n|=65011712&o.subtreeFlags,n|=65011712&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)i|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=n,e.childLanes=i,t}function gl(e,t,i){var n=t.pendingProps;switch(ao(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return pl(t),null;case 3:return i=t.stateNode,n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Io(Vo),Z(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(bo(t)?ll(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,Co())),pl(t),null;case 26:var o=t.type,s=t.memoizedState;return null===e?(ll(t),null!==s?(pl(t),cl(t,s)):(pl(t),dl(t,o,0,0,i))):s?s!==e.memoizedState?(ll(t),pl(t),cl(t,s)):(pl(t),t.flags&=-16777217):((e=e.memoizedProps)!==n&&ll(t),pl(t),dl(t,o,0,0,i)),null;case 27:if(q(t),i=U.current,o=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==n&&ll(t);else{if(!n){if(null===t.stateNode)throw Error(r(166));return pl(t),null}e=_.current,bo(t)?vo(t):(e=Bu(o,n,i),t.stateNode=e,ll(t))}return pl(t),null;case 5:if(q(t),o=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==n&&ll(t);else{if(!n){if(null===t.stateNode)throw Error(r(166));return pl(t),null}if(s=_.current,bo(t))vo(t);else{var a=vu(U.current);switch(s){case 1:s=a.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:s=a.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":s=a.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":s=a.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":(s=a.createElement("div")).innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s="string"===typeof n.is?a.createElement("select",{is:n.is}):a.createElement("select"),n.multiple?s.multiple=!0:n.size&&(s.size=n.size);break;default:s="string"===typeof n.is?a.createElement(o,{is:n.is}):a.createElement(o)}}s[He]=t,s[je]=n;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)s.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=s;e:switch(pu(s,o,n),o){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ll(t)}}return pl(t),dl(t,t.type,null===e||e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==n&&ll(t);else{if("string"!==typeof n&&null===t.stateNode)throw Error(r(166));if(e=U.current,bo(t)){if(e=t.stateNode,i=t.memoizedProps,n=null,null!==(o=co))switch(o.tag){case 27:case 5:n=o.memoizedProps}e[He]=t,(e=!!(e.nodeValue===i||null!==n&&!0===n.suppressHydrationWarning||cu(e.nodeValue,i)))||fo(t,!0)}else(e=vu(e).createTextNode(n))[He]=t,t.stateNode=e}return pl(t),null;case 31:if(i=t.memoizedState,null===e||null!==e.memoizedState){if(n=bo(t),null!==i){if(null===e){if(!n)throw Error(r(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(r(557));e[He]=t}else xo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;pl(t),e=!1}else i=Co(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return 256&t.flags?(Vs(t),t):(Vs(t),null);if(0!==(128&t.flags))throw Error(r(558))}return pl(t),null;case 13:if(n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(o=bo(t),null!==n&&null!==n.dehydrated){if(null===e){if(!o)throw Error(r(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(r(317));o[He]=t}else xo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;pl(t),o=!1}else o=Co(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return 256&t.flags?(Vs(t),t):(Vs(t),null)}return Vs(t),0!==(128&t.flags)?(t.lanes=i,t):(i=null!==n,e=null!==e&&null!==e.memoizedState,i&&(o=null,null!==(n=t.child).alternate&&null!==n.alternate.memoizedState&&null!==n.alternate.memoizedState.cachePool&&(o=n.alternate.memoizedState.cachePool.pool),s=null,null!==n.memoizedState&&null!==n.memoizedState.cachePool&&(s=n.memoizedState.cachePool.pool),s!==o&&(n.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),ul(t,t.updateQueue),pl(t),null);case 4:return Z(),null===e&&eu(t.stateNode.containerInfo),pl(t),null;case 10:return Io(t.type),pl(t),null;case 19:if(G(Gs),null===(n=t.memoizedState))return pl(t),null;if(o=0!==(128&t.flags),null===(s=n.rendering))if(o)hl(n,!1);else{if(0!==Md||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=Hs(e))){for(t.flags|=128,hl(n,!1),e=s.updateQueue,t.updateQueue=e,ul(t,e),t.subtreeFlags=0,e=i,i=t.child;null!==i;)Hn(i,e),i=i.sibling;return H(Gs,1&Gs.current|2),ho&&oo(t,n.treeForkCount),t.child}e=e.sibling}null!==n.tail&&le()>Od&&(t.flags|=128,o=!0,hl(n,!1),t.lanes=4194304)}else{if(!o)if(null!==(e=Hs(s))){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,ul(t,e),hl(n,!0),null===n.tail&&"hidden"===n.tailMode&&!s.alternate&&!ho)return pl(t),null}else 2*le()-n.renderingStartTime>Od&&536870912!==i&&(t.flags|=128,o=!0,hl(n,!1),t.lanes=4194304);n.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=n.last)?e.sibling=s:t.child=s,n.last=s)}return null!==n.tail?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=le(),e.sibling=null,i=Gs.current,H(Gs,o?1&i|2:1&i),ho&&oo(t,n.treeForkCount),e):(pl(t),null);case 22:case 23:return Vs(t),Rs(),n=null!==t.memoizedState,null!==e?null!==e.memoizedState!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?0!==(536870912&i)&&0===(128&t.flags)&&(pl(t),6&t.subtreeFlags&&(t.flags|=8192)):pl(t),null!==(i=t.updateQueue)&&ul(t,i.retryQueue),i=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(i=e.memoizedState.cachePool.pool),n=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(n=t.memoizedState.cachePool.pool),n!==i&&(t.flags|=2048),null!==e&&G($o),null;case 24:return i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Io(Vo),pl(t),null;case 25:case 30:return null}throw Error(r(156,t.tag))}function ml(e,t){switch(ao(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Io(Vo),Z(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return q(t),null;case 31:if(null!==t.memoizedState){if(Vs(t),null===t.alternate)throw Error(r(340));xo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Vs(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));xo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return G(Gs),null;case 4:return Z(),null;case 10:return Io(t.type),null;case 22:case 23:return Vs(t),Rs(),null!==e&&G($o),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Io(Vo),null;default:return null}}function fl(e,t){switch(ao(t),t.tag){case 3:Io(Vo),Z();break;case 26:case 27:case 5:q(t);break;case 4:Z();break;case 31:null!==t.memoizedState&&Vs(t);break;case 13:Vs(t);break;case 19:G(Gs);break;case 10:Io(t.type);break;case 22:case 23:Vs(t),Rs(),null!==e&&G($o);break;case 24:Io(Vo)}}function vl(e,t){try{var i=t.updateQueue,n=null!==i?i.lastEffect:null;if(null!==n){var o=n.next;i=o;do{if((i.tag&e)===e){n=void 0;var s=i.create,r=i.inst;n=s(),r.destroy=n}i=i.next}while(i!==o)}}catch(Ur){Mc(t,t.return,Ur)}}function yl(e,t,i){try{var n=t.updateQueue,o=null!==n?n.lastEffect:null;if(null!==o){var s=o.next;n=s;do{if((n.tag&e)===e){var r=n.inst,a=r.destroy;if(void 0!==a){r.destroy=void 0,o=t;var l=i,d=a;try{d()}catch(Ur){Mc(o,l,Ur)}}}n=n.next}while(n!==s)}}catch(Ur){Mc(t,t.return,Ur)}}function bl(e){var t=e.updateQueue;if(null!==t){var i=e.stateNode;try{Is(t,i)}catch(Ur){Mc(e,e.return,Ur)}}}function xl(e,t,i){i.props=Ma(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(Ur){Mc(e,t,Ur)}}function Cl(e,t){try{var i=e.ref;if(null!==i){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;default:n=e.stateNode}"function"===typeof i?e.refCleanup=i(n):i.current=n}}catch(Ur){Mc(e,t,Ur)}}function Sl(e,t){var i=e.ref,n=e.refCleanup;if(null!==i)if("function"===typeof n)try{n()}catch(Ur){Mc(e,t,Ur)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof i)try{i(null)}catch(o){Mc(e,t,o)}else i.current=null}function wl(e){var t=e.type,i=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&n.focus();break e;case"img":i.src?n.src=i.src:i.srcSet&&(n.srcset=i.srcSet)}}catch(Ur){Mc(e,e.return,Ur)}}function Ml(e,t,i){try{var n=e.stateNode;!function(e,t,i,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,s=null,a=null,l=null,d=null,c=null,u=null;for(g in i){var h=i[g];if(i.hasOwnProperty(g)&&null!=h)switch(g){case"checked":case"value":break;case"defaultValue":d=h;default:n.hasOwnProperty(g)||uu(e,t,g,null,n,h)}}for(var p in n){var g=n[p];if(h=i[p],n.hasOwnProperty(p)&&(null!=g||null!=h))switch(p){case"type":s=g;break;case"name":o=g;break;case"checked":c=g;break;case"defaultChecked":u=g;break;case"value":a=g;break;case"defaultValue":l=g;break;case"children":case"dangerouslySetInnerHTML":if(null!=g)throw Error(r(137,t));break;default:g!==h&&uu(e,t,p,g,n,h)}}return void yt(e,a,l,d,c,u,s,o);case"select":for(s in g=a=l=p=null,i)if(d=i[s],i.hasOwnProperty(s)&&null!=d)switch(s){case"value":break;case"multiple":g=d;default:n.hasOwnProperty(s)||uu(e,t,s,null,n,d)}for(o in n)if(s=n[o],d=i[o],n.hasOwnProperty(o)&&(null!=s||null!=d))switch(o){case"value":p=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==d&&uu(e,t,o,s,n,d)}return t=l,i=a,n=g,void(null!=p?Ct(e,!!i,p,!1):!!n!==!!i&&(null!=t?Ct(e,!!i,t,!0):Ct(e,!!i,i?[]:"",!1)));case"textarea":for(l in g=p=null,i)if(o=i[l],i.hasOwnProperty(l)&&null!=o&&!n.hasOwnProperty(l))switch(l){case"value":case"children":break;default:uu(e,t,l,null,n,o)}for(a in n)if(o=n[a],s=i[a],n.hasOwnProperty(a)&&(null!=o||null!=s))switch(a){case"value":p=o;break;case"defaultValue":g=o;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(r(91));break;default:o!==s&&uu(e,t,a,o,n,s)}return void St(e,p,g);case"option":for(var m in i)if(p=i[m],i.hasOwnProperty(m)&&null!=p&&!n.hasOwnProperty(m))if("selected"===m)e.selected=!1;else uu(e,t,m,null,n,p);for(d in n)if(p=n[d],g=i[d],n.hasOwnProperty(d)&&p!==g&&(null!=p||null!=g))if("selected"===d)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else uu(e,t,d,p,n,g);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var f in i)p=i[f],i.hasOwnProperty(f)&&null!=p&&!n.hasOwnProperty(f)&&uu(e,t,f,null,n,p);for(c in n)if(p=n[c],g=i[c],n.hasOwnProperty(c)&&p!==g&&(null!=p||null!=g))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(r(137,t));break;default:uu(e,t,c,p,n,g)}return;default:if(At(t)){for(var v in i)p=i[v],i.hasOwnProperty(v)&&void 0!==p&&!n.hasOwnProperty(v)&&hu(e,t,v,void 0,n,p);for(u in n)p=n[u],g=i[u],!n.hasOwnProperty(u)||p===g||void 0===p&&void 0===g||hu(e,t,u,p,n,g);return}}for(var y in i)p=i[y],i.hasOwnProperty(y)&&null!=p&&!n.hasOwnProperty(y)&&uu(e,t,y,null,n,p);for(h in n)p=n[h],g=i[h],!n.hasOwnProperty(h)||p===g||null==p&&null==g||uu(e,t,h,p,n,g)}(n,e.type,i,t),n[je]=t}catch(Ur){Mc(e,e.return,Ur)}}function kl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Iu(e.type)||4===e.tag}function Dl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||kl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Iu(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Il(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?(9===i.nodeType?i.body:"HTML"===i.nodeName?i.ownerDocument.body:i).insertBefore(e,t):((t=9===i.nodeType?i.body:"HTML"===i.nodeName?i.ownerDocument.body:i).appendChild(e),null!==(i=i._reactRootContainer)&&void 0!==i||null!==t.onclick||(t.onclick=Rt));else if(4!==n&&(27===n&&Iu(e.type)&&(i=e.stateNode,t=null),null!==(e=e.child)))for(Il(e,t,i),e=e.sibling;null!==e;)Il(e,t,i),e=e.sibling}function Al(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==n&&(27===n&&Iu(e.type)&&(i=e.stateNode),null!==(e=e.child)))for(Al(e,t,i),e=e.sibling;null!==e;)Al(e,t,i),e=e.sibling}function Ll(e){var t=e.stateNode,i=e.memoizedProps;try{for(var n=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);pu(t,n,i),t[He]=e,t[je]=i}catch(Ur){Mc(e,e.return,Ur)}}var Nl=!1,Tl=!1,Rl=!1,El="function"===typeof WeakSet?WeakSet:Set,Pl=null;function Ol(e,t,i){var n=i.flags;switch(i.tag){case 0:case 11:case 15:Zl(e,i),4&n&&vl(5,i);break;case 1:if(Zl(e,i),4&n)if(e=i.stateNode,null===t)try{e.componentDidMount()}catch(Ur){Mc(i,i.return,Ur)}else{var o=Ma(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(r){Mc(i,i.return,r)}}64&n&&bl(i),512&n&&Cl(i,i.return);break;case 3:if(Zl(e,i),64&n&&null!==(e=i.updateQueue)){if(t=null,null!==i.child)switch(i.child.tag){case 27:case 5:case 1:t=i.child.stateNode}try{Is(e,t)}catch(Ur){Mc(i,i.return,Ur)}}break;case 27:null===t&&4&n&&Ll(i);case 26:case 5:Zl(e,i),null===t&&4&n&&wl(i),512&n&&Cl(i,i.return);break;case 12:Zl(e,i);break;case 31:Zl(e,i),4&n&&Hl(e,i);break;case 13:Zl(e,i),4&n&&jl(e,i),64&n&&(null!==(e=i.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var i=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==i.readyState)t();else{var n=function(){t(),i.removeEventListener("DOMContentLoaded",n)};i.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}(e,i=Ac.bind(null,i))));break;case 22:if(!(n=null!==i.memoizedState||Nl)){t=null!==t&&null!==t.memoizedState||Tl,o=Nl;var s=Tl;Nl=n,(Tl=t)&&!s?ql(e,i,0!==(8772&i.subtreeFlags)):Zl(e,i),Nl=o,Tl=s}break;case 30:break;default:Zl(e,i)}}function Fl(e){var t=e.alternate;null!==t&&(e.alternate=null,Fl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ze(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var zl=null,Bl=!1;function Vl(e,t,i){for(i=i.child;null!==i;)Gl(e,t,i),i=i.sibling}function Gl(e,t,i){if(ye&&"function"===typeof ye.onCommitFiberUnmount)try{ye.onCommitFiberUnmount(ve,i)}catch(s){}switch(i.tag){case 26:Tl||Sl(i,t),Vl(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode).parentNode.removeChild(i);break;case 27:Tl||Sl(i,t);var n=zl,o=Bl;Iu(i.type)&&(zl=i.stateNode,Bl=!1),Vl(e,t,i),Vu(i.stateNode),zl=n,Bl=o;break;case 5:Tl||Sl(i,t);case 6:if(n=zl,o=Bl,zl=null,Vl(e,t,i),Bl=o,null!==(zl=n))if(Bl)try{(9===zl.nodeType?zl.body:"HTML"===zl.nodeName?zl.ownerDocument.body:zl).removeChild(i.stateNode)}catch(Ur){Mc(i,t,Ur)}else try{zl.removeChild(i.stateNode)}catch(Ur){Mc(i,t,Ur)}break;case 18:null!==zl&&(Bl?(Au(9===(e=zl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,i.stateNode),Kh(e)):Au(zl,i.stateNode));break;case 4:n=zl,o=Bl,zl=i.stateNode.containerInfo,Bl=!0,Vl(e,t,i),zl=n,Bl=o;break;case 0:case 11:case 14:case 15:yl(2,i,t),Tl||yl(4,i,t),Vl(e,t,i);break;case 1:Tl||(Sl(i,t),"function"===typeof(n=i.stateNode).componentWillUnmount&&xl(i,t,n)),Vl(e,t,i);break;case 21:Vl(e,t,i);break;case 22:Tl=(n=Tl)||null!==i.memoizedState,Vl(e,t,i),Tl=n;break;default:Vl(e,t,i)}}function Hl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Kh(e)}catch(Ur){Mc(t,t.return,Ur)}}}function jl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Kh(e)}catch(Ur){Mc(t,t.return,Ur)}}function Wl(e,t){var i=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new El),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new El),t;default:throw Error(r(435,e.tag))}}(e);t.forEach(function(t){if(!i.has(t)){i.add(t);var n=Lc.bind(null,e,t);t.then(n,n)}})}function _l(e,t){var i=t.deletions;if(null!==i)for(var n=0;n<i.length;n++){var o=i[n],s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(Iu(l.type)){zl=l.stateNode,Bl=!1;break e}break;case 5:zl=l.stateNode,Bl=!1;break e;case 3:case 4:zl=l.stateNode.containerInfo,Bl=!0;break e}l=l.return}if(null===zl)throw Error(r(160));Gl(s,a,o),zl=null,Bl=!1,null!==(s=o.alternate)&&(s.return=null),o.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Ul(t,e),t=t.sibling}var Kl=null;function Ul(e,t){var i=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:_l(t,e),Yl(e),4&n&&(yl(3,e,e.return),vl(3,e),yl(5,e,e.return));break;case 1:_l(t,e),Yl(e),512&n&&(Tl||null===i||Sl(i,i.return)),64&n&&Nl&&(null!==(e=e.updateQueue)&&(null!==(n=e.callbacks)&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===i?n:i.concat(n))));break;case 26:var o=Kl;if(_l(t,e),Yl(e),512&n&&(Tl||null===i||Sl(i,i.return)),4&n){var s=null!==i?i.memoizedState:null;if(n=e.memoizedState,null===i)if(null===n)if(null===e.stateNode){e:{n=e.type,i=e.memoizedProps,o=o.ownerDocument||o;t:switch(n){case"title":(!(s=o.getElementsByTagName("title")[0])||s[$e]||s[He]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=o.createElement(n),o.head.insertBefore(s,o.querySelector("head > title"))),pu(s,n,i),s[He]=e,et(s),n=s;break e;case"link":var a=nh("link","href",o).get(n+(i.href||""));if(a)for(var l=0;l<a.length;l++)if((s=a[l]).getAttribute("href")===(null==i.href||""===i.href?null:i.href)&&s.getAttribute("rel")===(null==i.rel?null:i.rel)&&s.getAttribute("title")===(null==i.title?null:i.title)&&s.getAttribute("crossorigin")===(null==i.crossOrigin?null:i.crossOrigin)){a.splice(l,1);break t}pu(s=o.createElement(n),n,i),o.head.appendChild(s);break;case"meta":if(a=nh("meta","content",o).get(n+(i.content||"")))for(l=0;l<a.length;l++)if((s=a[l]).getAttribute("content")===(null==i.content?null:""+i.content)&&s.getAttribute("name")===(null==i.name?null:i.name)&&s.getAttribute("property")===(null==i.property?null:i.property)&&s.getAttribute("http-equiv")===(null==i.httpEquiv?null:i.httpEquiv)&&s.getAttribute("charset")===(null==i.charSet?null:i.charSet)){a.splice(l,1);break t}pu(s=o.createElement(n),n,i),o.head.appendChild(s);break;default:throw Error(r(468,n))}s[He]=e,et(s),n=s}e.stateNode=n}else oh(o,e.type,e.stateNode);else e.stateNode=Qu(o,n,e.memoizedProps);else s!==n?(null===s?null!==i.stateNode&&(i=i.stateNode).parentNode.removeChild(i):s.count--,null===n?oh(o,e.type,e.stateNode):Qu(o,n,e.memoizedProps)):null===n&&null!==e.stateNode&&Ml(e,e.memoizedProps,i.memoizedProps)}break;case 27:_l(t,e),Yl(e),512&n&&(Tl||null===i||Sl(i,i.return)),null!==i&&4&n&&Ml(e,e.memoizedProps,i.memoizedProps);break;case 5:if(_l(t,e),Yl(e),512&n&&(Tl||null===i||Sl(i,i.return)),32&e.flags){o=e.stateNode;try{Mt(o,"")}catch(Ur){Mc(e,e.return,Ur)}}4&n&&null!=e.stateNode&&Ml(e,o=e.memoizedProps,null!==i?i.memoizedProps:o),1024&n&&(Rl=!0);break;case 6:if(_l(t,e),Yl(e),4&n){if(null===e.stateNode)throw Error(r(162));n=e.memoizedProps,i=e.stateNode;try{i.nodeValue=n}catch(Ur){Mc(e,e.return,Ur)}}break;case 3:if(ih=null,o=Kl,Kl=ju(t.containerInfo),_l(t,e),Kl=o,Yl(e),4&n&&null!==i&&i.memoizedState.isDehydrated)try{Kh(t.containerInfo)}catch(Ur){Mc(e,e.return,Ur)}Rl&&(Rl=!1,$l(e));break;case 4:n=Kl,Kl=ju(e.stateNode.containerInfo),_l(t,e),Yl(e),Kl=n;break;case 12:default:_l(t,e),Yl(e);break;case 31:case 19:_l(t,e),Yl(e),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,Wl(e,n)));break;case 13:_l(t,e),Yl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==i&&null!==i.memoizedState)&&(Ed=le()),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,Wl(e,n)));break;case 22:o=null!==e.memoizedState;var d=null!==i&&null!==i.memoizedState,c=Nl,u=Tl;if(Nl=c||o,Tl=u||d,_l(t,e),Tl=u,Nl=c,Yl(e),8192&n)e:for(t=e.stateNode,t._visibility=o?-2&t._visibility:1|t._visibility,o&&(null===i||d||Nl||Tl||Xl(e)),i=null,t=e;;){if(5===t.tag||26===t.tag){if(null===i){d=i=t;try{if(s=d.stateNode,o)"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=d.stateNode;var h=d.memoizedProps.style,p=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(Ur){Mc(d,d.return,Ur)}}}else if(6===t.tag){if(null===i){d=t;try{d.stateNode.nodeValue=o?"":d.memoizedProps}catch(Ur){Mc(d,d.return,Ur)}}}else if(18===t.tag){if(null===i){d=t;try{var g=d.stateNode;o?Lu(g,!0):Lu(d.stateNode,!1)}catch(Ur){Mc(d,d.return,Ur)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}4&n&&(null!==(n=e.updateQueue)&&(null!==(i=n.retryQueue)&&(n.retryQueue=null,Wl(e,i))));case 30:case 21:}}function Yl(e){var t=e.flags;if(2&t){try{for(var i,n=e.return;null!==n;){if(kl(n)){i=n;break}n=n.return}if(null==i)throw Error(r(160));switch(i.tag){case 27:var o=i.stateNode;Al(e,Dl(e),o);break;case 5:var s=i.stateNode;32&i.flags&&(Mt(s,""),i.flags&=-33),Al(e,Dl(e),s);break;case 3:case 4:var a=i.stateNode.containerInfo;Il(e,Dl(e),a);break;default:throw Error(r(161))}}catch(Ur){Mc(e,e.return,Ur)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function $l(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;$l(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Zl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ol(e,t.alternate,t),t=t.sibling}function Xl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:yl(4,t,t.return),Xl(t);break;case 1:Sl(t,t.return);var i=t.stateNode;"function"===typeof i.componentWillUnmount&&xl(t,t.return,i),Xl(t);break;case 27:Vu(t.stateNode);case 26:case 5:Sl(t,t.return),Xl(t);break;case 22:null===t.memoizedState&&Xl(t);break;default:Xl(t)}e=e.sibling}}function ql(e,t,i){for(i=i&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var n=t.alternate,o=e,s=t,r=s.flags;switch(s.tag){case 0:case 11:case 15:ql(o,s,i),vl(4,s);break;case 1:if(ql(o,s,i),"function"===typeof(o=(n=s).stateNode).componentDidMount)try{o.componentDidMount()}catch(Ur){Mc(n,n.return,Ur)}if(null!==(o=(n=s).updateQueue)){var a=n.stateNode;try{var l=o.shared.hiddenCallbacks;if(null!==l)for(o.shared.hiddenCallbacks=null,o=0;o<l.length;o++)Ds(l[o],a)}catch(Ur){Mc(n,n.return,Ur)}}i&&64&r&&bl(s),Cl(s,s.return);break;case 27:Ll(s);case 26:case 5:ql(o,s,i),i&&null===n&&4&r&&wl(s),Cl(s,s.return);break;case 12:ql(o,s,i);break;case 31:ql(o,s,i),i&&4&r&&Hl(o,s);break;case 13:ql(o,s,i),i&&4&r&&jl(o,s);break;case 22:null===s.memoizedState&&ql(o,s,i),Cl(s,s.return);break;case 30:break;default:ql(o,s,i)}t=t.sibling}}function Ql(e,t){var i=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(i=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==i&&(null!=e&&e.refCount++,null!=i&&Ho(i))}function Jl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ho(e))}function ed(e,t,i,n){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)td(e,t,i,n),t=t.sibling}function td(e,t,i,n){var o=t.flags;switch(t.tag){case 0:case 11:case 15:ed(e,t,i,n),2048&o&&vl(9,t);break;case 1:case 31:case 13:default:ed(e,t,i,n);break;case 3:ed(e,t,i,n),2048&o&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ho(e)));break;case 12:if(2048&o){ed(e,t,i,n),e=t.stateNode;try{var s=t.memoizedProps,r=s.id,a=s.onPostCommit;"function"===typeof a&&a(r,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(Ur){Mc(t,t.return,Ur)}}else ed(e,t,i,n);break;case 23:break;case 22:s=t.stateNode,r=t.alternate,null!==t.memoizedState?2&s._visibility?ed(e,t,i,n):nd(e,t):2&s._visibility?ed(e,t,i,n):(s._visibility|=2,id(e,t,i,n,0!==(10256&t.subtreeFlags)||!1)),2048&o&&Ql(r,t);break;case 24:ed(e,t,i,n),2048&o&&Jl(t.alternate,t)}}function id(e,t,i,n,o){for(o=o&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var s=e,r=t,a=i,l=n,d=r.flags;switch(r.tag){case 0:case 11:case 15:id(s,r,a,l,o),vl(8,r);break;case 23:break;case 22:var c=r.stateNode;null!==r.memoizedState?2&c._visibility?id(s,r,a,l,o):nd(s,r):(c._visibility|=2,id(s,r,a,l,o)),o&&2048&d&&Ql(r.alternate,r);break;case 24:id(s,r,a,l,o),o&&2048&d&&Jl(r.alternate,r);break;default:id(s,r,a,l,o)}t=t.sibling}}function nd(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var i=e,n=t,o=n.flags;switch(n.tag){case 22:nd(i,n),2048&o&&Ql(n.alternate,n);break;case 24:nd(i,n),2048&o&&Jl(n.alternate,n);break;default:nd(i,n)}t=t.sibling}}var od=8192;function sd(e,t,i){if(e.subtreeFlags&od)for(e=e.child;null!==e;)rd(e,t,i),e=e.sibling}function rd(e,t,i){switch(e.tag){case 26:sd(e,t,i),e.flags&od&&null!==e.memoizedState&&function(e,t,i,n){if("stylesheet"===i.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&i.state.loading)){if(null===i.instance){var o=Yu(n.href),s=t.querySelector($u(o));if(s)return null!==(t=s._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=ah.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=s,void et(s);s=t.ownerDocument||t,n=Zu(n),(o=Gu.get(o))&&eh(n,o),et(s=s.createElement("link"));var r=s;r._p=new Promise(function(e,t){r.onload=e,r.onerror=t}),pu(s,"link",n),i.instance=s}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&0===(3&i.state.loading)&&(e.count++,i=ah.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}(i,Kl,e.memoizedState,e.memoizedProps);break;case 5:default:sd(e,t,i);break;case 3:case 4:var n=Kl;Kl=ju(e.stateNode.containerInfo),sd(e,t,i),Kl=n;break;case 22:null===e.memoizedState&&(null!==(n=e.alternate)&&null!==n.memoizedState?(n=od,od=16777216,sd(e,t,i),od=n):sd(e,t,i))}}function ad(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function ld(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var i=0;i<t.length;i++){var n=t[i];Pl=n,ud(n,e)}ad(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)dd(e),e=e.sibling}function dd(e){switch(e.tag){case 0:case 11:case 15:ld(e),2048&e.flags&&yl(9,e,e.return);break;case 3:case 12:default:ld(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,cd(e)):ld(e)}}function cd(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var i=0;i<t.length;i++){var n=t[i];Pl=n,ud(n,e)}ad(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:yl(8,t,t.return),cd(t);break;case 22:2&(i=t.stateNode)._visibility&&(i._visibility&=-3,cd(t));break;default:cd(t)}e=e.sibling}}function ud(e,t){for(;null!==Pl;){var i=Pl;switch(i.tag){case 0:case 11:case 15:yl(8,i,t);break;case 23:case 22:if(null!==i.memoizedState&&null!==i.memoizedState.cachePool){var n=i.memoizedState.cachePool.pool;null!=n&&n.refCount++}break;case 24:Ho(i.memoizedState.cache)}if(null!==(n=i.child))n.return=i,Pl=n;else e:for(i=e;null!==Pl;){var o=(n=Pl).sibling,s=n.return;if(Fl(n),n===i){Pl=null;break e}if(null!==o){o.return=s,Pl=o;break e}Pl=s}}}var hd={getCacheForType:function(e){var t=Eo(Vo),i=t.data.get(e);return void 0===i&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return Eo(Vo).controller.signal}},pd="function"===typeof WeakMap?WeakMap:Map,gd=0,md=null,fd=null,vd=0,yd=0,bd=null,xd=!1,Cd=!1,Sd=!1,wd=0,Md=0,kd=0,Dd=0,Id=0,Ad=0,Ld=0,Nd=null,Td=null,Rd=!1,Ed=0,Pd=0,Od=1/0,Fd=null,zd=null,Bd=0,Vd=null,Gd=null,Hd=0,jd=0,Wd=null,_d=null,Kd=0,Ud=null;function Yd(){return 0!==(2&gd)&&0!==vd?vd&-vd:null!==P.T?Wc():Be()}function $d(){if(0===Ad)if(0===(536870912&vd)||ho){var e=Me;0===(3932160&(Me<<=1))&&(Me=262144),Ad=e}else Ad=536870912;return null!==(e=Es.current)&&(e.flags|=32),Ad}function Zd(e,t,i){(e!==md||2!==yd&&9!==yd)&&null===e.cancelPendingCommit||(ic(e,0),Jd(e,vd,Ad,!1)),Re(e,i),0!==(2&gd)&&e===md||(e===md&&(0===(2&gd)&&(Dd|=i),4===Md&&Jd(e,vd,Ad,!1)),Fc(e))}function Xd(e,t,i){if(0!==(6&gd))throw Error(r(327));for(var n=!i&&0===(127&t)&&0===(t&e.expiredLanes)||Ae(e,t),o=n?function(e,t){var i=gd;gd|=2;var n=sc(),o=rc();md!==e||vd!==t?(Fd=null,Od=le()+500,ic(e,t)):Cd=Ae(e,t);e:for(;;)try{if(0!==yd&&null!==fd){t=fd;var s=bd;t:switch(yd){case 1:yd=0,bd=null,pc(e,t,s,1);break;case 2:case 9:if(is(s)){yd=0,bd=null,hc(t);break}t=function(){2!==yd&&9!==yd||md!==e||(yd=7),Fc(e)},s.then(t,t);break e;case 3:yd=7;break e;case 4:yd=5;break e;case 7:is(s)?(yd=0,bd=null,hc(t)):(yd=0,bd=null,pc(e,t,s,7));break;case 5:var a=null;switch(fd.tag){case 26:a=fd.memoizedState;case 5:case 27:var l=fd;if(a?sh(a):l.stateNode.complete){yd=0,bd=null;var d=l.sibling;if(null!==d)fd=d;else{var c=l.return;null!==c?(fd=c,gc(c)):fd=null}break t}}yd=0,bd=null,pc(e,t,s,5);break;case 6:yd=0,bd=null,pc(e,t,s,6);break;case 8:tc(),Md=6;break e;default:throw Error(r(462))}}cc();break}catch(u){nc(e,u)}return ko=Mo=null,P.H=n,P.A=o,gd=i,null!==fd?0:(md=null,vd=0,Nn(),Md)}(e,t):lc(e,t,!0),s=n;;){if(0===o){Cd&&!n&&Jd(e,t,0,!1);break}if(i=e.current.alternate,!s||Qd(i)){if(2===o){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;o=Nd;var d=l.current.memoizedState.isDehydrated;if(d&&(ic(l,a).flags|=256),2!==(a=lc(l,a,!1))){if(Sd&&!d){l.errorRecoveryDisabledLanes|=s,Dd|=s,o=4;break e}s=Td,Td=o,null!==s&&(null===Td?Td=s:Td.push.apply(Td,s))}o=a}if(s=!1,2!==o)continue}}if(1===o){ic(e,0),Jd(e,t,0,!0);break}e:{switch(n=e,s=o){case 0:case 1:throw Error(r(345));case 4:if((4194048&t)!==t)break;case 6:Jd(n,t,Ad,!xd);break e;case 2:Td=null;break;case 3:case 5:break;default:throw Error(r(329))}if((62914560&t)===t&&10<(o=Ed+300-le())){if(Jd(n,t,Ad,!xd),0!==Ie(n,0,!0))break e;Hd=t,n.timeoutHandle=Su(qd.bind(null,n,i,Td,Fd,Rd,t,Ad,Dd,Ld,xd,s,"Throttled",-0,0),o)}else qd(n,i,Td,Fd,Rd,t,Ad,Dd,Ld,xd,s,null,-0,0)}break}o=lc(e,t,!1),s=!1}Fc(e)}function qd(e,t,i,n,o,s,r,a,l,d,c,u,h,p){if(e.timeoutHandle=-1,8192&(u=t.subtreeFlags)||16785408===(16785408&u)){rd(t,s,u={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Rt});var g=(62914560&s)===s?Ed-le():(4194048&s)===s?Pd-le():0;if(g=function(e,t){return e.stylesheets&&0===e.count&&dh(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var n=setTimeout(function(){if(e.stylesheets&&dh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===rh&&(rh=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,i=performance.getEntriesByType("resource"),n=0;n<i.length;n++){var o=i[n],s=o.transferSize,r=o.initiatorType,a=o.duration;if(s&&a&&gu(r)){for(r=0,a=o.responseEnd,n+=1;n<i.length;n++){var l=i[n],d=l.startTime;if(d>a)break;var c=l.transferSize,u=l.initiatorType;c&&gu(u)&&(r+=c*((l=l.responseEnd)<a?1:(a-d)/(l-d)))}if(--n,t+=8*(s+r)/(o.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var o=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&dh(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>rh?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(o)}}:null}(u,g),null!==g)return Hd=s,e.cancelPendingCommit=g(fc.bind(null,e,t,s,i,n,o,r,a,l,c,u,null,h,p)),void Jd(e,s,r,!d)}fc(e,t,s,i,n,o,r,a,l)}function Qd(e){for(var t=e;;){var i=t.tag;if((0===i||11===i||15===i)&&16384&t.flags&&(null!==(i=t.updateQueue)&&null!==(i=i.stores)))for(var n=0;n<i.length;n++){var o=i[n],s=o.getSnapshot;o=o.value;try{if(!qi(s(),o))return!1}catch(Ur){return!1}}if(i=t.child,16384&t.subtreeFlags&&null!==i)i.return=t,t=i;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jd(e,t,i,n){t&=~Id,t&=~Dd,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var o=t;0<o;){var s=31-xe(o),r=1<<s;n[s]=-1,o&=~r}0!==i&&Ee(e,i,t)}function ec(){return 0!==(6&gd)||(zc(0,!1),!1)}function tc(){if(null!==fd){if(0===yd)var e=fd.return;else ko=Mo=null,ar(e=fd),ls=null,ds=0,e=fd;for(;null!==e;)fl(e.alternate,e),e=e.return;fd=null}}function ic(e,t){var i=e.timeoutHandle;-1!==i&&(e.timeoutHandle=-1,wu(i)),null!==(i=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,i()),Hd=0,tc(),md=e,fd=i=Gn(e.current,null),vd=t,yd=0,bd=null,xd=!1,Cd=Ae(e,t),Sd=!1,Ld=Ad=Id=Dd=kd=Md=0,Td=Nd=null,Rd=!1,0!==(8&t)&&(t|=32&t);var n=e.entangledLanes;if(0!==n)for(e=e.entanglements,n&=t;0<n;){var o=31-xe(n),s=1<<o;t|=e[o],n&=~s}return wd=t,Nn(),i}function nc(e,t){Ws=null,P.H=fa,t===Qo||t===es?(t=rs(),yd=3):t===Jo?(t=rs(),yd=4):yd=t===Ea?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,bd=t,null===fd&&(Md=1,Aa(e,$n(t,e.current)))}function oc(){var e=Es.current;return null===e||((4194048&vd)===vd?null===Ps:((62914560&vd)===vd||0!==(536870912&vd))&&e===Ps)}function sc(){var e=P.H;return P.H=fa,null===e?fa:e}function rc(){var e=P.A;return P.A=hd,e}function ac(){Md=4,xd||(4194048&vd)!==vd&&null!==Es.current||(Cd=!0),0===(134217727&kd)&&0===(134217727&Dd)||null===md||Jd(md,vd,Ad,!1)}function lc(e,t,i){var n=gd;gd|=2;var o=sc(),s=rc();md===e&&vd===t||(Fd=null,ic(e,t)),t=!1;var r=Md;e:for(;;)try{if(0!==yd&&null!==fd){var a=fd,l=bd;switch(yd){case 8:tc(),r=6;break e;case 3:case 2:case 9:case 6:null===Es.current&&(t=!0);var d=yd;if(yd=0,bd=null,pc(e,a,l,d),i&&Cd){r=0;break e}break;default:d=yd,yd=0,bd=null,pc(e,a,l,d)}}dc(),r=Md;break}catch(c){nc(e,c)}return t&&e.shellSuspendCounter++,ko=Mo=null,gd=n,P.H=o,P.A=s,null===fd&&(md=null,vd=0,Nn()),r}function dc(){for(;null!==fd;)uc(fd)}function cc(){for(;null!==fd&&!re();)uc(fd)}function uc(e){var t=al(e.alternate,e,wd);e.memoizedProps=e.pendingProps,null===t?gc(e):fd=t}function hc(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=Ua(i,t,t.pendingProps,t.type,void 0,vd);break;case 11:t=Ua(i,t,t.pendingProps,t.type.render,t.ref,vd);break;case 5:ar(t);default:fl(i,t),t=al(i,t=fd=Hn(t,wd),wd)}e.memoizedProps=e.pendingProps,null===t?gc(e):fd=t}function pc(e,t,i,n){ko=Mo=null,ar(t),ls=null,ds=0;var o=t.return;try{if(function(e,t,i,n,o){if(i.flags|=32768,null!==n&&"object"===typeof n&&"function"===typeof n.then){if(null!==(t=i.alternate)&&No(t,i,o,!0),null!==(i=Es.current)){switch(i.tag){case 31:case 13:return null===Ps?ac():null===i.alternate&&0===Md&&(Md=3),i.flags&=-257,i.flags|=65536,i.lanes=o,n===ts?i.flags|=16384:(null===(t=i.updateQueue)?i.updateQueue=new Set([n]):t.add(n),kc(e,n,o)),!1;case 22:return i.flags|=65536,n===ts?i.flags|=16384:(null===(t=i.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},i.updateQueue=t):null===(i=t.retryQueue)?t.retryQueue=new Set([n]):i.add(n),kc(e,n,o)),!1}throw Error(r(435,i.tag))}return kc(e,n,o),ac(),!1}if(ho)return null!==(t=Es.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=o,n!==mo&&So($n(e=Error(r(422),{cause:n}),i))):(n!==mo&&So($n(t=Error(r(423),{cause:n}),i)),(e=e.current.alternate).flags|=65536,o&=-o,e.lanes|=o,n=$n(n,i),Ss(e,o=Na(e.stateNode,n,o)),4!==Md&&(Md=2)),!1;var s=Error(r(520),{cause:n});if(s=$n(s,i),null===Nd?Nd=[s]:Nd.push(s),4!==Md&&(Md=2),null===t)return!0;n=$n(n,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=o&-o,i.lanes|=e,Ss(i,e=Na(i.stateNode,n,e)),!1;case 1:if(t=i.type,s=i.stateNode,0===(128&i.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===zd||!zd.has(s))))return i.flags|=65536,o&=-o,i.lanes|=o,Ra(o=Ta(o),e,i,n),Ss(i,o),!1}i=i.return}while(null!==i);return!1}(e,o,t,i,vd))return Md=1,Aa(e,$n(i,e.current)),void(fd=null)}catch(Ur){if(null!==o)throw fd=o,Ur;return Md=1,Aa(e,$n(i,e.current)),void(fd=null)}32768&t.flags?(ho||1===n?e=!0:Cd||0!==(536870912&vd)?e=!1:(xd=e=!0,(2===n||9===n||3===n||6===n)&&(null!==(n=Es.current)&&13===n.tag&&(n.flags|=16384))),mc(t,e)):gc(t)}function gc(e){var t=e;do{if(0!==(32768&t.flags))return void mc(t,xd);e=t.return;var i=gl(t.alternate,t,wd);if(null!==i)return void(fd=i);if(null!==(t=t.sibling))return void(fd=t);fd=t=e}while(null!==t);0===Md&&(Md=5)}function mc(e,t){do{var i=ml(e.alternate,e);if(null!==i)return i.flags&=32767,void(fd=i);if(null!==(i=e.return)&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&null!==(e=e.sibling))return void(fd=e);fd=e=i}while(null!==e);Md=6,fd=null}function fc(e,t,i,n,o,s,a,l,d){e.cancelPendingCommit=null;do{Cc()}while(0!==Bd);if(0!==(6&gd))throw Error(r(327));if(null!==t){if(t===e.current)throw Error(r(177));if(s=t.lanes|t.childLanes,function(e,t,i,n,o,s){var r=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,d=e.hiddenUpdates;for(i=r&~i;0<i;){var c=31-xe(i),u=1<<c;a[c]=0,l[c]=-1;var h=d[c];if(null!==h)for(d[c]=null,c=0;c<h.length;c++){var p=h[c];null!==p&&(p.lane&=-536870913)}i&=~u}0!==n&&Ee(e,n,0),0!==s&&0===o&&0!==e.tag&&(e.suspendedLanes|=s&~(r&~t))}(e,i,s|=Ln,a,l,d),e===md&&(fd=md=null,vd=0),Gd=t,Vd=e,Hd=i,jd=s,Wd=o,_d=n,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,function(e,t){oe(e,t)}(he,function(){return Sc(),null})):(e.callbackNode=null,e.callbackPriority=0),n=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||n){n=P.T,P.T=null,o=O.p,O.p=2,a=gd,gd|=4;try{!function(e,t){if(e=e.containerInfo,mu=xh,on(e=nn(e))){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(i=(i=e.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(n&&0!==n.rangeCount){i=n.anchorNode;var o=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{i.nodeType,s.nodeType}catch(f){i=null;break e}var a=0,l=-1,d=-1,c=0,u=0,h=e,p=null;t:for(;;){for(var g;h!==i||0!==o&&3!==h.nodeType||(l=a+o),h!==s||0!==n&&3!==h.nodeType||(d=a+n),3===h.nodeType&&(a+=h.nodeValue.length),null!==(g=h.firstChild);)p=h,h=g;for(;;){if(h===e)break t;if(p===i&&++c===o&&(l=a),p===s&&++u===n&&(d=a),null!==(g=h.nextSibling))break;p=(h=p).parentNode}h=g}i=-1===l||-1===d?null:{start:l,end:d}}else i=null}i=i||{start:0,end:0}}else i=null;for(fu={focusedElem:e,selectionRange:i},xh=!1,Pl=t;null!==Pl;)if(e=(t=Pl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Pl=e;else for(;null!==Pl;){switch(s=(t=Pl).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(i=0;i<e.length;i++)(o=e[i]).ref.impl=o.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,i=t,o=s.memoizedProps,s=s.memoizedState,n=i.stateNode;try{var m=Ma(i.type,o);e=n.getSnapshotBeforeUpdate(m,s),n.__reactInternalSnapshotBeforeUpdate=e}catch(Ur){Mc(i,i.return,Ur)}}break;case 3:if(0!==(1024&e))if(9===(i=(e=t.stateNode.containerInfo).nodeType))Nu(e);else if(1===i)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Nu(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(r(163))}if(null!==(e=t.sibling)){e.return=t.return,Pl=e;break}Pl=t.return}}(e,t)}finally{gd=a,O.p=o,P.T=n}}Bd=1,vc(),yc(),bc()}}function vc(){if(1===Bd){Bd=0;var e=Vd,t=Gd,i=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||i){i=P.T,P.T=null;var n=O.p;O.p=2;var o=gd;gd|=4;try{Ul(t,e);var s=fu,r=nn(e.containerInfo),a=s.focusedElem,l=s.selectionRange;if(r!==a&&a&&a.ownerDocument&&tn(a.ownerDocument.documentElement,a)){if(null!==l&&on(a)){var d=l.start,c=l.end;if(void 0===c&&(c=d),"selectionStart"in a)a.selectionStart=d,a.selectionEnd=Math.min(c,a.value.length);else{var u=a.ownerDocument||document,h=u&&u.defaultView||window;if(h.getSelection){var p=h.getSelection(),g=a.textContent.length,m=Math.min(l.start,g),f=void 0===l.end?m:Math.min(l.end,g);!p.extend&&m>f&&(r=f,f=m,m=r);var v=en(a,m),y=en(a,f);if(v&&y&&(1!==p.rangeCount||p.anchorNode!==v.node||p.anchorOffset!==v.offset||p.focusNode!==y.node||p.focusOffset!==y.offset)){var b=u.createRange();b.setStart(v.node,v.offset),p.removeAllRanges(),m>f?(p.addRange(b),p.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),p.addRange(b))}}}}for(u=[],p=a;p=p.parentNode;)1===p.nodeType&&u.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<u.length;a++){var x=u[a];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}xh=!!mu,fu=mu=null}finally{gd=o,O.p=n,P.T=i}}e.current=t,Bd=2}}function yc(){if(2===Bd){Bd=0;var e=Vd,t=Gd,i=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||i){i=P.T,P.T=null;var n=O.p;O.p=2;var o=gd;gd|=4;try{Ol(e,t.alternate,t)}finally{gd=o,O.p=n,P.T=i}}Bd=3}}function bc(){if(4===Bd||3===Bd){Bd=0,ae();var e=Vd,t=Gd,i=Hd,n=_d;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Bd=5:(Bd=0,Gd=Vd=null,xc(e,e.pendingLanes));var o=e.pendingLanes;if(0===o&&(zd=null),ze(i),t=t.stateNode,ye&&"function"===typeof ye.onCommitFiberRoot)try{ye.onCommitFiberRoot(ve,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==n){t=P.T,o=O.p,O.p=2,P.T=null;try{for(var s=e.onRecoverableError,r=0;r<n.length;r++){var a=n[r];s(a.value,{componentStack:a.stack})}}finally{P.T=t,O.p=o}}0!==(3&Hd)&&Cc(),Fc(e),o=e.pendingLanes,0!==(261930&i)&&0!==(42&o)?e===Ud?Kd++:(Kd=0,Ud=e):Kd=0,zc(0,!1)}}function xc(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ho(t)))}function Cc(){return vc(),yc(),bc(),Sc()}function Sc(){if(5!==Bd)return!1;var e=Vd,t=jd;jd=0;var i=ze(Hd),n=P.T,o=O.p;try{O.p=32>i?32:i,P.T=null,i=Wd,Wd=null;var s=Vd,a=Hd;if(Bd=0,Gd=Vd=null,Hd=0,0!==(6&gd))throw Error(r(331));var l=gd;if(gd|=4,dd(s.current),td(s,s.current,a,i),gd=l,zc(0,!1),ye&&"function"===typeof ye.onPostCommitFiberRoot)try{ye.onPostCommitFiberRoot(ve,s)}catch(d){}return!0}finally{O.p=o,P.T=n,xc(e,t)}}function wc(e,t,i){t=$n(i,t),null!==(e=xs(e,t=Na(e.stateNode,t,2),2))&&(Re(e,2),Fc(e))}function Mc(e,t,i){if(3===e.tag)wc(e,e,i);else for(;null!==t;){if(3===t.tag){wc(t,e,i);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===zd||!zd.has(n))){e=$n(i,e),null!==(n=xs(t,i=Ta(2),2))&&(Ra(i,n,t,e),Re(n,2),Fc(n));break}}t=t.return}}function kc(e,t,i){var n=e.pingCache;if(null===n){n=e.pingCache=new pd;var o=new Set;n.set(t,o)}else void 0===(o=n.get(t))&&(o=new Set,n.set(t,o));o.has(i)||(Sd=!0,o.add(i),e=Dc.bind(null,e,t,i),t.then(e,e))}function Dc(e,t,i){var n=e.pingCache;null!==n&&n.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,md===e&&(vd&i)===i&&(4===Md||3===Md&&(62914560&vd)===vd&&300>le()-Ed?0===(2&gd)&&ic(e,0):Id|=i,Ld===vd&&(Ld=0)),Fc(e)}function Ic(e,t){0===t&&(t=Ne()),null!==(e=En(e,t))&&(Re(e,t),Fc(e))}function Ac(e){var t=e.memoizedState,i=0;null!==t&&(i=t.retryLane),Ic(e,i)}function Lc(e,t){var i=0;switch(e.tag){case 31:case 13:var n=e.stateNode,o=e.memoizedState;null!==o&&(i=o.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(r(314))}null!==n&&n.delete(t),Ic(e,i)}var Nc=null,Tc=null,Rc=!1,Ec=!1,Pc=!1,Oc=0;function Fc(e){e!==Tc&&null===e.next&&(null===Tc?Nc=Tc=e:Tc=Tc.next=e),Ec=!0,Rc||(Rc=!0,ku(function(){0!==(6&gd)?oe(ce,Bc):Vc()}))}function zc(e,t){if(!Pc&&Ec){Pc=!0;do{for(var i=!1,n=Nc;null!==n;){if(!t)if(0!==e){var o=n.pendingLanes;if(0===o)var s=0;else{var r=n.suspendedLanes,a=n.pingedLanes;s=(1<<31-xe(42|e)+1)-1,s=201326741&(s&=o&~(r&~a))?201326741&s|1:s?2|s:0}0!==s&&(i=!0,jc(n,s))}else s=vd,0===(3&(s=Ie(n,n===md?s:0,null!==n.cancelPendingCommit||-1!==n.timeoutHandle)))||Ae(n,s)||(i=!0,jc(n,s));n=n.next}}while(i);Pc=!1}}function Bc(){Vc()}function Vc(){Ec=Rc=!1;var e=0;0!==Oc&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==Cu&&(Cu=e,!0);return Cu=null,!1}()&&(e=Oc);for(var t=le(),i=null,n=Nc;null!==n;){var o=n.next,s=Gc(n,t);0===s?(n.next=null,null===i?Nc=o:i.next=o,null===o&&(Tc=i)):(i=n,(0!==e||0!==(3&s))&&(Ec=!0)),n=o}0!==Bd&&5!==Bd||zc(e,!1),0!==Oc&&(Oc=0)}function Gc(e,t){for(var i=e.suspendedLanes,n=e.pingedLanes,o=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var r=31-xe(s),a=1<<r,l=o[r];-1===l?0!==(a&i)&&0===(a&n)||(o[r]=Le(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(i=vd,i=Ie(e,e===(t=md)?i:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),n=e.callbackNode,0===i||e===t&&(2===yd||9===yd)||null!==e.cancelPendingCommit)return null!==n&&null!==n&&se(n),e.callbackNode=null,e.callbackPriority=0;if(0===(3&i)||Ae(e,i)){if((t=i&-i)===e.callbackPriority)return t;switch(null!==n&&se(n),ze(i)){case 2:case 8:i=ue;break;case 32:default:i=he;break;case 268435456:i=ge}return n=Hc.bind(null,e),i=oe(i,n),e.callbackPriority=t,e.callbackNode=i,t}return null!==n&&null!==n&&se(n),e.callbackPriority=2,e.callbackNode=null,2}function Hc(e,t){if(0!==Bd&&5!==Bd)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Cc()&&e.callbackNode!==i)return null;var n=vd;return 0===(n=Ie(e,e===md?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Xd(e,n,t),Gc(e,le()),null!=e.callbackNode&&e.callbackNode===i?Hc.bind(null,e):null)}function jc(e,t){if(Cc())return null;Xd(e,t,!0)}function Wc(){if(0===Oc){var e=_o;0===e&&(e=we,0===(261888&(we<<=1))&&(we=256)),Oc=e}return Oc}function _c(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Tt(""+e)}function Kc(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}for(var Uc=0;Uc<Mn.length;Uc++){var Yc=Mn[Uc];kn(Yc.toLowerCase(),"on"+(Yc[0].toUpperCase()+Yc.slice(1)))}kn(fn,"onAnimationEnd"),kn(vn,"onAnimationIteration"),kn(yn,"onAnimationStart"),kn("dblclick","onDoubleClick"),kn("focusin","onFocus"),kn("focusout","onBlur"),kn(bn,"onTransitionRun"),kn(xn,"onTransitionStart"),kn(Cn,"onTransitionCancel"),kn(Sn,"onTransitionEnd"),ot("onMouseEnter",["mouseout","mouseover"]),ot("onMouseLeave",["mouseout","mouseover"]),ot("onPointerEnter",["pointerout","pointerover"]),ot("onPointerLeave",["pointerout","pointerover"]),nt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),nt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),nt("onBeforeInput",["compositionend","keypress","textInput","paste"]),nt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),nt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),nt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $c="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($c));function Xc(e,t){t=0!==(4&t);for(var i=0;i<e.length;i++){var n=e[i],o=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var r=n.length-1;0<=r;r--){var a=n[r],l=a.instance,d=a.currentTarget;if(a=a.listener,l!==s&&o.isPropagationStopped())break e;s=a,o.currentTarget=d;try{s(o)}catch(Ur){Dn(Ur)}o.currentTarget=null,s=l}else for(r=0;r<n.length;r++){if(l=(a=n[r]).instance,d=a.currentTarget,a=a.listener,l!==s&&o.isPropagationStopped())break e;s=a,o.currentTarget=d;try{s(o)}catch(Ur){Dn(Ur)}o.currentTarget=null,s=l}}}}function qc(e,t){var i=t[_e];void 0===i&&(i=t[_e]=new Set);var n=e+"__bubble";i.has(n)||(tu(t,e,2,!1),i.add(n))}function Qc(e,t,i){var n=0;t&&(n|=4),tu(i,e,n,t)}var Jc="_reactListening"+Math.random().toString(36).slice(2);function eu(e){if(!e[Jc]){e[Jc]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Zc.has(t)||Qc(t,!1,e),Qc(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Jc]||(t[Jc]=!0,Qc("selectionchange",!1,t))}}function tu(e,t,i,n){switch(Ih(t)){case 2:var o=Ch;break;case 8:o=Sh;break;default:o=wh}i=o.bind(null,t,i,e),o=void 0,!jt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),n?void 0!==o?e.addEventListener(t,i,{capture:!0,passive:o}):e.addEventListener(t,i,!0):void 0!==o?e.addEventListener(t,i,{passive:o}):e.addEventListener(t,i,!1)}function iu(e,t,i,n,o){var s=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var r=n.tag;if(3===r||4===r){var a=n.stateNode.containerInfo;if(a===o)break;if(4===r)for(r=n.return;null!==r;){var d=r.tag;if((3===d||4===d)&&r.stateNode.containerInfo===o)return;r=r.return}for(;null!==a;){if(null===(r=Xe(a)))return;if(5===(d=r.tag)||6===d||26===d||27===d){n=s=r;continue e}a=a.parentNode}}n=n.return}Vt(function(){var n=s,o=Pt(i),r=[];e:{var a=wn.get(e);if(void 0!==a){var d=ii,c=e;switch(e){case"keypress":if(0===$t(i))break e;case"keydown":case"keyup":d=vi;break;case"focusin":c="focus",d=li;break;case"focusout":c="blur",d=li;break;case"beforeblur":case"afterblur":d=li;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=ri;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=ai;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=bi;break;case fn:case vn:case yn:d=di;break;case Sn:d=xi;break;case"scroll":case"scrollend":d=oi;break;case"wheel":d=Ci;break;case"copy":case"cut":case"paste":d=ci;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=yi;break;case"toggle":case"beforetoggle":d=Si}var u=0!==(4&t),h=!u&&("scroll"===e||"scrollend"===e),p=u?null!==a?a+"Capture":null:a;u=[];for(var g,m=n;null!==m;){var f=m;if(g=f.stateNode,5!==(f=f.tag)&&26!==f&&27!==f||null===g||null===p||null!=(f=Gt(m,p))&&u.push(nu(m,f,g)),h)break;m=m.return}0<u.length&&(a=new d(a,c,null,i,o),r.push({event:a,listeners:u}))}}if(0===(7&t)){if(d="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||i===Et||!(c=i.relatedTarget||i.fromElement)||!Xe(c)&&!c[We])&&(d||a)&&(a=o.window===o?o:(a=o.ownerDocument)?a.defaultView||a.parentWindow:window,d?(d=n,null!==(c=(c=i.relatedTarget||i.toElement)?Xe(c):null)&&(h=l(c),u=c.tag,c!==h||5!==u&&27!==u&&6!==u)&&(c=null)):(d=null,c=n),d!==c)){if(u=ri,f="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=yi,f="onPointerLeave",p="onPointerEnter",m="pointer"),h=null==d?a:Qe(d),g=null==c?a:Qe(c),(a=new u(f,m+"leave",d,i,o)).target=h,a.relatedTarget=g,f=null,Xe(o)===n&&((u=new u(p,m+"enter",c,i,o)).target=g,u.relatedTarget=h,f=u),h=f,d&&c)e:{for(u=su,m=c,g=0,f=p=d;f;f=u(f))g++;f=0;for(var v=m;v;v=u(v))f++;for(;0<g-f;)p=u(p),g--;for(;0<f-g;)m=u(m),f--;for(;g--;){if(p===m||null!==m&&p===m.alternate){u=p;break e}p=u(p),m=u(m)}u=null}else u=null;null!==d&&ru(r,a,d,u,!1),null!==c&&null!==h&&ru(r,h,c,u,!0)}if("select"===(d=(a=n?Qe(n):window).nodeName&&a.nodeName.toLowerCase())||"input"===d&&"file"===a.type)var y=Gi;else if(Pi(a))if(Hi)y=Xi;else{y=$i;var b=Yi}else!(d=a.nodeName)||"input"!==d.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?n&&At(n.elementType)&&(y=Gi):y=Zi;switch(y&&(y=y(e,n))?Oi(r,y,i,o):(b&&b(e,a,n),"focusout"===e&&n&&"number"===a.type&&null!=n.memoizedProps.value&&xt(a,"number",a.value)),b=n?Qe(n):window,e){case"focusin":(Pi(b)||"true"===b.contentEditable)&&(rn=b,an=n,ln=null);break;case"focusout":ln=an=rn=null;break;case"mousedown":dn=!0;break;case"contextmenu":case"mouseup":case"dragend":dn=!1,cn(r,i,o);break;case"selectionchange":if(sn)break;case"keydown":case"keyup":cn(r,i,o)}var x;if(Mi)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Ri?Ni(e,i)&&(C="onCompositionEnd"):"keydown"===e&&229===i.keyCode&&(C="onCompositionStart");C&&(Ii&&"ko"!==i.locale&&(Ri||"onCompositionStart"!==C?"onCompositionEnd"===C&&Ri&&(x=Yt()):(Kt="value"in(_t=o)?_t.value:_t.textContent,Ri=!0)),0<(b=ou(n,C)).length&&(C=new ui(C,e,null,i,o),r.push({event:C,listeners:b}),x?C.data=x:null!==(x=Ti(i))&&(C.data=x))),(x=Di?function(e,t){switch(e){case"compositionend":return Ti(t);case"keypress":return 32!==t.which?null:(Li=!0,Ai);case"textInput":return(e=t.data)===Ai&&Li?null:e;default:return null}}(e,i):function(e,t){if(Ri)return"compositionend"===e||!Mi&&Ni(e,t)?(e=Yt(),Ut=Kt=_t=null,Ri=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ii&&"ko"!==t.locale?null:t.data}}(e,i))&&(0<(C=ou(n,"onBeforeInput")).length&&(b=new ui("onBeforeInput","beforeinput",null,i,o),r.push({event:b,listeners:C}),b.data=x)),function(e,t,i,n,o){if("submit"===t&&i&&i.stateNode===o){var s=_c((o[je]||null).action),r=n.submitter;r&&null!==(t=(t=r[je]||null)?_c(t.formAction):r.getAttribute("formAction"))&&(s=t,r=null);var a=new ii("action","action",null,n,o);e.push({event:a,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(0!==Oc){var e=r?Kc(o,r):new FormData(o);ia(i,{pending:!0,data:e,method:o.method,action:s},null,e)}}else"function"===typeof s&&(a.preventDefault(),e=r?Kc(o,r):new FormData(o),ia(i,{pending:!0,data:e,method:o.method,action:s},s,e))},currentTarget:o}]})}}(r,e,n,i,o)}Xc(r,t)})}function nu(e,t,i){return{instance:e,listener:t,currentTarget:i}}function ou(e,t){for(var i=t+"Capture",n=[];null!==e;){var o=e,s=o.stateNode;if(5!==(o=o.tag)&&26!==o&&27!==o||null===s||(null!=(o=Gt(e,i))&&n.unshift(nu(e,o,s)),null!=(o=Gt(e,t))&&n.push(nu(e,o,s))),3===e.tag)return n;e=e.return}return[]}function su(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function ru(e,t,i,n,o){for(var s=t._reactName,r=[];null!==i&&i!==n;){var a=i,l=a.alternate,d=a.stateNode;if(a=a.tag,null!==l&&l===n)break;5!==a&&26!==a&&27!==a||null===d||(l=d,o?null!=(d=Gt(i,s))&&r.unshift(nu(i,d,l)):o||null!=(d=Gt(i,s))&&r.push(nu(i,d,l))),i=i.return}0!==r.length&&e.push({event:t,listeners:r})}var au=/\r\n?/g,lu=/\u0000|\uFFFD/g;function du(e){return("string"===typeof e?e:""+e).replace(au,"\n").replace(lu,"")}function cu(e,t){return t=du(t),du(e)===t}function uu(e,t,i,n,o,s){switch(i){case"children":"string"===typeof n?"body"===t||"textarea"===t&&""===n||Mt(e,n):("number"===typeof n||"bigint"===typeof n)&&"body"!==t&&Mt(e,""+n);break;case"className":dt(e,"class",n);break;case"tabIndex":dt(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":dt(e,i,n);break;case"style":It(e,n,s);break;case"data":if("object"!==t){dt(e,"data",n);break}case"src":case"href":if(""===n&&("a"!==t||"href"!==i)){e.removeAttribute(i);break}if(null==n||"function"===typeof n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(i);break}n=Tt(""+n),e.setAttribute(i,n);break;case"action":case"formAction":if("function"===typeof n){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===i?("input"!==t&&uu(e,t,"name",o.name,o,null),uu(e,t,"formEncType",o.formEncType,o,null),uu(e,t,"formMethod",o.formMethod,o,null),uu(e,t,"formTarget",o.formTarget,o,null)):(uu(e,t,"encType",o.encType,o,null),uu(e,t,"method",o.method,o,null),uu(e,t,"target",o.target,o,null))),null==n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(i);break}n=Tt(""+n),e.setAttribute(i,n);break;case"onClick":null!=n&&(e.onclick=Rt);break;case"onScroll":null!=n&&qc("scroll",e);break;case"onScrollEnd":null!=n&&qc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(r(61));if(null!=(i=n.__html)){if(null!=o.children)throw Error(r(60));e.innerHTML=i}}break;case"multiple":e.multiple=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"muted":e.muted=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==n||"function"===typeof n||"boolean"===typeof n||"symbol"===typeof n){e.removeAttribute("xlink:href");break}i=Tt(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(i,""+n):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":!0===n?e.setAttribute(i,""):!1!==n&&null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(i,n):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":null!=n&&"function"!==typeof n&&"symbol"!==typeof n&&!isNaN(n)&&1<=n?e.setAttribute(i,n):e.removeAttribute(i);break;case"rowSpan":case"start":null==n||"function"===typeof n||"symbol"===typeof n||isNaN(n)?e.removeAttribute(i):e.setAttribute(i,n);break;case"popover":qc("beforetoggle",e),qc("toggle",e),lt(e,"popover",n);break;case"xlinkActuate":ct(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":ct(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":ct(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":ct(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":ct(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":ct(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":ct(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":ct(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":ct(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":lt(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<i.length)||"o"!==i[0]&&"O"!==i[0]||"n"!==i[1]&&"N"!==i[1])&&lt(e,i=Lt.get(i)||i,n)}}function hu(e,t,i,n,o,s){switch(i){case"style":It(e,n,s);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(r(61));if(null!=(i=n.__html)){if(null!=o.children)throw Error(r(60));e.innerHTML=i}}break;case"children":"string"===typeof n?Mt(e,n):("number"===typeof n||"bigint"===typeof n)&&Mt(e,""+n);break;case"onScroll":null!=n&&qc("scroll",e);break;case"onScrollEnd":null!=n&&qc("scrollend",e);break;case"onClick":null!=n&&(e.onclick=Rt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:it.hasOwnProperty(i)||("o"!==i[0]||"n"!==i[1]||(o=i.endsWith("Capture"),t=i.slice(2,o?i.length-7:void 0),"function"===typeof(s=null!=(s=e[je]||null)?s[i]:null)&&e.removeEventListener(t,s,o),"function"!==typeof n)?i in e?e[i]=n:!0===n?e.setAttribute(i,""):lt(e,i,n):("function"!==typeof s&&null!==s&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,n,o)))}}function pu(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qc("error",e),qc("load",e);var n,o=!1,s=!1;for(n in i)if(i.hasOwnProperty(n)){var a=i[n];if(null!=a)switch(n){case"src":o=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:uu(e,t,n,a,i,null)}}return s&&uu(e,t,"srcSet",i.srcSet,i,null),void(o&&uu(e,t,"src",i.src,i,null));case"input":qc("invalid",e);var l=n=a=s=null,d=null,c=null;for(o in i)if(i.hasOwnProperty(o)){var u=i[o];if(null!=u)switch(o){case"name":s=u;break;case"type":a=u;break;case"checked":d=u;break;case"defaultChecked":c=u;break;case"value":n=u;break;case"defaultValue":l=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(r(137,t));break;default:uu(e,t,o,u,i,null)}}return void bt(e,n,l,d,c,a,s,!1);case"select":for(s in qc("invalid",e),o=a=n=null,i)if(i.hasOwnProperty(s)&&null!=(l=i[s]))switch(s){case"value":n=l;break;case"defaultValue":a=l;break;case"multiple":o=l;default:uu(e,t,s,l,i,null)}return t=n,i=a,e.multiple=!!o,void(null!=t?Ct(e,!!o,t,!1):null!=i&&Ct(e,!!o,i,!0));case"textarea":for(a in qc("invalid",e),n=s=o=null,i)if(i.hasOwnProperty(a)&&null!=(l=i[a]))switch(a){case"value":o=l;break;case"defaultValue":s=l;break;case"children":n=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(r(91));break;default:uu(e,t,a,l,i,null)}return void wt(e,o,s,n);case"option":for(d in i)if(i.hasOwnProperty(d)&&null!=(o=i[d]))if("selected"===d)e.selected=o&&"function"!==typeof o&&"symbol"!==typeof o;else uu(e,t,d,o,i,null);return;case"dialog":qc("beforetoggle",e),qc("toggle",e),qc("cancel",e),qc("close",e);break;case"iframe":case"object":qc("load",e);break;case"video":case"audio":for(o=0;o<$c.length;o++)qc($c[o],e);break;case"image":qc("error",e),qc("load",e);break;case"details":qc("toggle",e);break;case"embed":case"source":case"link":qc("error",e),qc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in i)if(i.hasOwnProperty(c)&&null!=(o=i[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:uu(e,t,c,o,i,null)}return;default:if(At(t)){for(u in i)i.hasOwnProperty(u)&&(void 0!==(o=i[u])&&hu(e,t,u,o,i,void 0));return}}for(l in i)i.hasOwnProperty(l)&&(null!=(o=i[l])&&uu(e,t,l,o,i,null))}function gu(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var mu=null,fu=null;function vu(e){return 9===e.nodeType?e:e.ownerDocument}function yu(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bu(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function xu(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Cu=null;var Su="function"===typeof setTimeout?setTimeout:void 0,wu="function"===typeof clearTimeout?clearTimeout:void 0,Mu="function"===typeof Promise?Promise:void 0,ku="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Mu?function(e){return Mu.resolve(null).then(e).catch(Du)}:Su;function Du(e){setTimeout(function(){throw e})}function Iu(e){return"head"===e}function Au(e,t){var i=t,n=0;do{var o=i.nextSibling;if(e.removeChild(i),o&&8===o.nodeType)if("/$"===(i=o.data)||"/&"===i){if(0===n)return e.removeChild(o),void Kh(t);n--}else if("$"===i||"$?"===i||"$~"===i||"$!"===i||"&"===i)n++;else if("html"===i)Vu(e.ownerDocument.documentElement);else if("head"===i){Vu(i=e.ownerDocument.head);for(var s=i.firstChild;s;){var r=s.nextSibling,a=s.nodeName;s[$e]||"SCRIPT"===a||"STYLE"===a||"LINK"===a&&"stylesheet"===s.rel.toLowerCase()||i.removeChild(s),s=r}}else"body"===i&&Vu(e.ownerDocument.body);i=o}while(i);Kh(t)}function Lu(e,t){var i=e;e=0;do{var n=i.nextSibling;if(1===i.nodeType?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",""===i.getAttribute("style")&&i.removeAttribute("style")):3===i.nodeType&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),n&&8===n.nodeType)if("/$"===(i=n.data)){if(0===e)break;e--}else"$"!==i&&"$?"!==i&&"$~"!==i&&"$!"!==i||e++;i=n}while(i)}function Nu(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Nu(i),Ze(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===i.rel.toLowerCase())continue}e.removeChild(i)}}function Tu(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Pu(e.nextSibling)))return null}return e}function Ru(e){return"$?"===e.data||"$~"===e.data}function Eu(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Pu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Ou=null;function Fu(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("/$"===i||"/&"===i){if(0===t)return Pu(e.nextSibling);t--}else"$"!==i&&"$!"!==i&&"$?"!==i&&"$~"!==i&&"&"!==i||t++}e=e.nextSibling}return null}function zu(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||"$!"===i||"$?"===i||"$~"===i||"&"===i){if(0===t)return e;t--}else"/$"!==i&&"/&"!==i||t++}e=e.previousSibling}return null}function Bu(e,t,i){switch(t=vu(i),e){case"html":if(!(e=t.documentElement))throw Error(r(452));return e;case"head":if(!(e=t.head))throw Error(r(453));return e;case"body":if(!(e=t.body))throw Error(r(454));return e;default:throw Error(r(451))}}function Vu(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ze(e)}var Gu=new Map,Hu=new Set;function ju(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Wu=O.d;O.d={f:function(){var e=Wu.f(),t=ec();return e||t},r:function(e){var t=qe(e);null!==t&&5===t.tag&&"form"===t.type?oa(t):Wu.r(e)},D:function(e){Wu.D(e),Ku("dns-prefetch",e,null)},C:function(e,t){Wu.C(e,t),Ku("preconnect",e,t)},L:function(e,t,i){Wu.L(e,t,i);var n=_u;if(n&&e&&t){var o='link[rel="preload"][as="'+vt(t)+'"]';"image"===t&&i&&i.imageSrcSet?(o+='[imagesrcset="'+vt(i.imageSrcSet)+'"]',"string"===typeof i.imageSizes&&(o+='[imagesizes="'+vt(i.imageSizes)+'"]')):o+='[href="'+vt(e)+'"]';var s=o;switch(t){case"style":s=Yu(e);break;case"script":s=Xu(e)}Gu.has(s)||(e=p({rel:"preload",href:"image"===t&&i&&i.imageSrcSet?void 0:e,as:t},i),Gu.set(s,e),null!==n.querySelector(o)||"style"===t&&n.querySelector($u(s))||"script"===t&&n.querySelector(qu(s))||(pu(t=n.createElement("link"),"link",e),et(t),n.head.appendChild(t)))}},m:function(e,t){Wu.m(e,t);var i=_u;if(i&&e){var n=t&&"string"===typeof t.as?t.as:"script",o='link[rel="modulepreload"][as="'+vt(n)+'"][href="'+vt(e)+'"]',s=o;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Xu(e)}if(!Gu.has(s)&&(e=p({rel:"modulepreload",href:e},t),Gu.set(s,e),null===i.querySelector(o))){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(qu(s)))return}pu(n=i.createElement("link"),"link",e),et(n),i.head.appendChild(n)}}},X:function(e,t){Wu.X(e,t);var i=_u;if(i&&e){var n=Je(i).hoistableScripts,o=Xu(e),s=n.get(o);s||((s=i.querySelector(qu(o)))||(e=p({src:e,async:!0},t),(t=Gu.get(o))&&th(e,t),et(s=i.createElement("script")),pu(s,"link",e),i.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},n.set(o,s))}},S:function(e,t,i){Wu.S(e,t,i);var n=_u;if(n&&e){var o=Je(n).hoistableStyles,s=Yu(e);t=t||"default";var r=o.get(s);if(!r){var a={loading:0,preload:null};if(r=n.querySelector($u(s)))a.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":t},i),(i=Gu.get(s))&&eh(e,i);var l=r=n.createElement("link");et(l),pu(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Ju(r,t,n)}r={type:"stylesheet",instance:r,count:1,state:a},o.set(s,r)}}},M:function(e,t){Wu.M(e,t);var i=_u;if(i&&e){var n=Je(i).hoistableScripts,o=Xu(e),s=n.get(o);s||((s=i.querySelector(qu(o)))||(e=p({src:e,async:!0,type:"module"},t),(t=Gu.get(o))&&th(e,t),et(s=i.createElement("script")),pu(s,"link",e),i.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},n.set(o,s))}}};var _u="undefined"===typeof document?null:document;function Ku(e,t,i){var n=_u;if(n&&"string"===typeof t&&t){var o=vt(t);o='link[rel="'+e+'"][href="'+o+'"]',"string"===typeof i&&(o+='[crossorigin="'+i+'"]'),Hu.has(o)||(Hu.add(o),e={rel:e,crossOrigin:i,href:t},null===n.querySelector(o)&&(pu(t=n.createElement("link"),"link",e),et(t),n.head.appendChild(t)))}}function Uu(e,t,i,n){var o,s,a,l,d=(d=U.current)?ju(d):null;if(!d)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof i.precedence&&"string"===typeof i.href?(t=Yu(i.href),(n=(i=Je(d).hoistableStyles).get(t))||(n={type:"style",instance:null,count:0,state:null},i.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===i.rel&&"string"===typeof i.href&&"string"===typeof i.precedence){e=Yu(i.href);var c=Je(d).hoistableStyles,u=c.get(e);if(u||(d=d.ownerDocument||d,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,u),(c=d.querySelector($u(e)))&&!c._p&&(u.instance=c,u.state.loading=5),Gu.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Gu.set(e,i),c||(o=d,s=e,a=i,l=u.state,o.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=o.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),pu(s,"link",a),et(s),o.head.appendChild(s))))),t&&null===n)throw Error(r(528,""));return u}if(t&&null!==n)throw Error(r(529,""));return null;case"script":return t=i.async,"string"===typeof(i=i.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Xu(i),(n=(i=Je(d).hoistableScripts).get(t))||(n={type:"script",instance:null,count:0,state:null},i.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Yu(e){return'href="'+vt(e)+'"'}function $u(e){return'link[rel="stylesheet"]['+e+"]"}function Zu(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function Xu(e){return'[src="'+vt(e)+'"]'}function qu(e){return"script[async]"+e}function Qu(e,t,i){if(t.count++,null===t.instance)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+vt(i.href)+'"]');if(n)return t.instance=n,et(n),n;var o=p({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return et(n=(e.ownerDocument||e).createElement("style")),pu(n,"style",o),Ju(n,i.precedence,e),t.instance=n;case"stylesheet":o=Yu(i.href);var s=e.querySelector($u(o));if(s)return t.state.loading|=4,t.instance=s,et(s),s;n=Zu(i),(o=Gu.get(o))&&eh(n,o),et(s=(e.ownerDocument||e).createElement("link"));var a=s;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),pu(s,"link",n),t.state.loading|=4,Ju(s,i.precedence,e),t.instance=s;case"script":return s=Xu(i.src),(o=e.querySelector(qu(s)))?(t.instance=o,et(o),o):(n=i,(o=Gu.get(s))&&th(n=p({},i),o),et(o=(e=e.ownerDocument||e).createElement("script")),pu(o,"link",n),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(r(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(n=t.instance,t.state.loading|=4,Ju(n,i.precedence,e));return t.instance}function Ju(e,t,i){for(var n=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=n.length?n[n.length-1]:null,s=o,r=0;r<n.length;r++){var a=n[r];if(a.dataset.precedence===t)s=a;else if(s!==o)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===i.nodeType?i.head:i).insertBefore(e,t.firstChild)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function th(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var ih=null;function nh(e,t,i){if(null===ih){var n=new Map,o=ih=new Map;o.set(i,n)}else(n=(o=ih).get(i))||(n=new Map,o.set(i,n));if(n.has(e))return n;for(n.set(e,null),i=i.getElementsByTagName(e),o=0;o<i.length;o++){var s=i[o];if(!(s[$e]||s[He]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var r=s.getAttribute(t)||"";r=e+r;var a=n.get(r);a?a.push(s):n.set(r,[s])}}return n}function oh(e,t,i){(e=e.ownerDocument||e).head.insertBefore(i,"title"===t?e.querySelector("head > title"):null)}function sh(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var rh=0;function ah(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)dh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var lh=null;function dh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,lh=new Map,t.forEach(ch,e),lh=null,ah.call(e))}function ch(e,t){if(!(4&t.state.loading)){var i=lh.get(e);if(i)var n=i.get(null);else{i=new Map,lh.set(e,i);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<o.length;s++){var r=o[s];"LINK"!==r.nodeName&&"not all"===r.getAttribute("media")||(i.set(r.dataset.precedence,r),n=r)}n&&i.set(null,n)}r=(o=t.instance).getAttribute("data-precedence"),(s=i.get(r)||n)===n&&i.set(null,o),i.set(r,o),this.count++,n=ah.bind(this),o.addEventListener("load",n),o.addEventListener("error",n),s?s.parentNode.insertBefore(o,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(o,e.firstChild),t.state.loading|=4}}var uh={$$typeof:C,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function hh(e,t,i,n,o,s,r,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Te(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Te(0),this.hiddenUpdates=Te(null),this.identifierPrefix=n,this.onUncaughtError=o,this.onCaughtError=s,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function ph(e,t,i,n,o,s,r,a,l,d,c,u){return e=new hh(e,t,i,r,l,d,c,u,a),t=1,!0===s&&(t|=24),s=Bn(3,null,null,t),e.current=s,s.stateNode=e,(t=Go()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:n,isDehydrated:i,cache:t},vs(s),e}function gh(e){return e?e=Fn:Fn}function mh(e,t,i,n,o,s){o=gh(o),null===n.context?n.context=o:n.pendingContext=o,(n=bs(t)).payload={element:i},null!==(s=void 0===s?null:s)&&(n.callback=s),null!==(i=xs(e,n,t))&&(Zd(i,0,t),Cs(i,e,t))}function fh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function vh(e,t){fh(e,t),(e=e.alternate)&&fh(e,t)}function yh(e){if(13===e.tag||31===e.tag){var t=En(e,67108864);null!==t&&Zd(t,0,67108864),vh(e,67108864)}}function bh(e){if(13===e.tag||31===e.tag){var t=Yd(),i=En(e,t=Fe(t));null!==i&&Zd(i,0,t),vh(e,t)}}var xh=!0;function Ch(e,t,i,n){var o=P.T;P.T=null;var s=O.p;try{O.p=2,wh(e,t,i,n)}finally{O.p=s,P.T=o}}function Sh(e,t,i,n){var o=P.T;P.T=null;var s=O.p;try{O.p=8,wh(e,t,i,n)}finally{O.p=s,P.T=o}}function wh(e,t,i,n){if(xh){var o=Mh(n);if(null===o)iu(e,t,n,kh,i),Fh(e,n);else if(function(e,t,i,n,o){switch(t){case"focusin":return Lh=zh(Lh,e,t,i,n,o),!0;case"dragenter":return Nh=zh(Nh,e,t,i,n,o),!0;case"mouseover":return Th=zh(Th,e,t,i,n,o),!0;case"pointerover":var s=o.pointerId;return Rh.set(s,zh(Rh.get(s)||null,e,t,i,n,o)),!0;case"gotpointercapture":return s=o.pointerId,Eh.set(s,zh(Eh.get(s)||null,e,t,i,n,o)),!0}return!1}(o,e,t,i,n))n.stopPropagation();else if(Fh(e,n),4&t&&-1<Oh.indexOf(e)){for(;null!==o;){var s=qe(o);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var r=De(s.pendingLanes);if(0!==r){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;r;){var l=1<<31-xe(r);a.entanglements[1]|=l,r&=~l}Fc(s),0===(6&gd)&&(Od=le()+500,zc(0,!1))}}break;case 31:case 13:null!==(a=En(s,2))&&Zd(a,0,2),ec(),vh(s,2)}if(null===(s=Mh(n))&&iu(e,t,n,kh,i),s===o)break;o=s}null!==o&&n.stopPropagation()}else iu(e,t,n,null,i)}}function Mh(e){return Dh(e=Pt(e))}var kh=null;function Dh(e){if(kh=null,null!==(e=Xe(e))){var t=l(e);if(null===t)e=null;else{var i=t.tag;if(13===i){if(null!==(e=d(t)))return e;e=null}else if(31===i){if(null!==(e=c(t)))return e;e=null}else if(3===i){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return kh=e,null}function Ih(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(de()){case ce:return 2;case ue:return 8;case he:case pe:return 32;case ge:return 268435456;default:return 32}default:return 32}}var Ah=!1,Lh=null,Nh=null,Th=null,Rh=new Map,Eh=new Map,Ph=[],Oh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fh(e,t){switch(e){case"focusin":case"focusout":Lh=null;break;case"dragenter":case"dragleave":Nh=null;break;case"mouseover":case"mouseout":Th=null;break;case"pointerover":case"pointerout":Rh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eh.delete(t.pointerId)}}function zh(e,t,i,n,o,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:i,eventSystemFlags:n,nativeEvent:s,targetContainers:[o]},null!==t&&(null!==(t=qe(t))&&yh(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Bh(e){var t=Xe(e.target);if(null!==t){var i=l(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=d(i)))return e.blockedOn=t,void Ve(e.priority,function(){bh(i)})}else if(31===t){if(null!==(t=c(i)))return e.blockedOn=t,void Ve(e.priority,function(){bh(i)})}else if(3===t&&i.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function Vh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var i=Mh(e.nativeEvent);if(null!==i)return null!==(t=qe(i))&&yh(t),e.blockedOn=i,!1;var n=new(i=e.nativeEvent).constructor(i.type,i);Et=n,i.target.dispatchEvent(n),Et=null,t.shift()}return!0}function Gh(e,t,i){Vh(e)&&i.delete(t)}function Hh(){Ah=!1,null!==Lh&&Vh(Lh)&&(Lh=null),null!==Nh&&Vh(Nh)&&(Nh=null),null!==Th&&Vh(Th)&&(Th=null),Rh.forEach(Gh),Eh.forEach(Gh)}function jh(e,t){e.blockedOn===t&&(e.blockedOn=null,Ah||(Ah=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Hh)))}var Wh=null;function _h(e){Wh!==e&&(Wh=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Wh===e&&(Wh=null);for(var t=0;t<e.length;t+=3){var i=e[t],n=e[t+1],o=e[t+2];if("function"!==typeof n){if(null===Dh(n||i))continue;break}var s=qe(i);null!==s&&(e.splice(t,3),t-=3,ia(s,{pending:!0,data:o,method:i.method,action:n},n,o))}}))}function Kh(e){function t(t){return jh(t,e)}null!==Lh&&jh(Lh,e),null!==Nh&&jh(Nh,e),null!==Th&&jh(Th,e),Rh.forEach(t),Eh.forEach(t);for(var i=0;i<Ph.length;i++){var n=Ph[i];n.blockedOn===e&&(n.blockedOn=null)}for(;0<Ph.length&&null===(i=Ph[0]).blockedOn;)Bh(i),null===i.blockedOn&&Ph.shift();if(null!=(i=(e.ownerDocument||e).$$reactFormReplay))for(n=0;n<i.length;n+=3){var o=i[n],s=i[n+1],r=o[je]||null;if("function"===typeof s)r||_h(i);else if(r){var a=null;if(s&&s.hasAttribute("formAction")){if(o=s,r=s[je]||null)a=r.formAction;else if(null!==Dh(o))continue}else a=r.action;"function"===typeof a?i[n+1]=a:(i.splice(n,3),n-=3),_h(i)}}}function Uh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return o=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==o&&(o(),o=null),n||setTimeout(i,20)}function i(){if(!n&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var n=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==o&&(o(),o=null)}}}function Yh(e){this._internalRoot=e}function $h(e){this._internalRoot=e}$h.prototype.render=Yh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));mh(t.current,Yd(),e,t,null,null)},$h.prototype.unmount=Yh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;mh(e.current,2,null,e,null,null),ec(),t[We]=null}},$h.prototype.unstable_scheduleHydration=function(e){if(e){var t=Be();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Ph.length&&0!==t&&t<Ph[i].priority;i++);Ph.splice(i,0,e),0===i&&Bh(e)}};var Zh=o.version;if("19.2.3"!==Zh)throw Error(r(527,Zh,"19.2.3"));O.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(r(188));return t!==e?null:e}for(var i=e,n=t;;){var o=i.return;if(null===o)break;var s=o.alternate;if(null===s){if(null!==(n=o.return)){i=n;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===i)return u(o),e;if(s===n)return u(o),t;s=s.sibling}throw Error(r(188))}if(i.return!==n.return)i=o,n=s;else{for(var a=!1,d=o.child;d;){if(d===i){a=!0,i=o,n=s;break}if(d===n){a=!0,n=o,i=s;break}d=d.sibling}if(!a){for(d=s.child;d;){if(d===i){a=!0,i=s,n=o;break}if(d===n){a=!0,n=s,i=o;break}d=d.sibling}if(!a)throw Error(r(189))}}if(i.alternate!==n)throw Error(r(190))}if(3!==i.tag)throw Error(r(188));return i.stateNode.current===i?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Xh={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qh.isDisabled&&qh.supportsFiber)try{ve=qh.inject(Xh),ye=qh}catch(Jh){}}t.createRoot=function(e,t){if(!a(e))throw Error(r(299));var i=!1,n="",o=ka,s=Da,l=Ia;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(i=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onUncaughtError&&(o=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=ph(e,1,!1,null,0,i,n,null,o,s,l,Uh),e[We]=t.current,eu(e),new Yh(t)},t.hydrateRoot=function(e,t,i){if(!a(e))throw Error(r(299));var n=!1,o="",s=ka,l=Da,d=Ia,c=null;return null!==i&&void 0!==i&&(!0===i.unstable_strictMode&&(n=!0),void 0!==i.identifierPrefix&&(o=i.identifierPrefix),void 0!==i.onUncaughtError&&(s=i.onUncaughtError),void 0!==i.onCaughtError&&(l=i.onCaughtError),void 0!==i.onRecoverableError&&(d=i.onRecoverableError),void 0!==i.formState&&(c=i.formState)),(t=ph(e,1,!0,t,0,n,o,c,s,l,d,Uh)).context=gh(null),i=t.current,(o=bs(n=Fe(n=Yd()))).callback=null,xs(i,o,n),i=n,t.current.lanes=i,Re(t,i),Fc(t),e[We]=t.current,eu(e),new $h(t)},t.version="19.2.3"},43(e,t,i){e.exports=i(288)},191(e,t){var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),m=Symbol.for("react.client.reference");function f(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case o:case r:case s:case c:case u:case g:return e;default:switch(e=e&&e.$$typeof){case l:case d:case p:case h:case a:return e;default:return t}}case n:return t}}}t.Hy=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===r||e===s||e===c||e===u||"object"===typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===h||e.$$typeof===l||e.$$typeof===a||e.$$typeof===d||e.$$typeof===m||void 0!==e.getModuleId)}},219(e,t,i){var n=i(763),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return n.isMemo(e)?r:a[e.$$typeof]||o}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[n.Memo]=r;var d=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,g=Object.prototype;e.exports=function e(t,i,n){if("string"!==typeof i){if(g){var o=p(i);o&&o!==g&&e(t,o,n)}var r=c(i);u&&(r=r.concat(u(i)));for(var a=l(t),m=l(i),f=0;f<r.length;++f){var v=r[f];if(!s[v]&&(!n||!n[v])&&(!m||!m[v])&&(!a||!a[v])){var y=h(i,v);try{d(t,v,y)}catch(b){}}}}return t}},288(e,t){var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),g=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,v={};function y(e,t,i){this.props=e,this.context=t,this.refs=v,this.updater=i||m}function b(){}function x(e,t,i){this.props=e,this.context=t,this.refs=v,this.updater=i||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var C=x.prototype=new b;C.constructor=x,f(C,y.prototype),C.isPureReactComponent=!0;var S=Array.isArray;function w(){}var M={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function D(e,t,n){var o=n.ref;return{$$typeof:i,type:e,key:t,ref:void 0!==o?o:null,props:n}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var A=/\/+/g;function L(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function N(e,t,o,s,r){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,d,c=!1;if(null===e)c=!0;else switch(a){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case i:case n:c=!0;break;case h:return N((c=e._init)(e._payload),t,o,s,r)}}if(c)return r=r(e),c=""===s?"."+L(e,0):s,S(r)?(o="",null!=c&&(o=c.replace(A,"$&/")+"/"),N(r,t,o,"",function(e){return e})):null!=r&&(I(r)&&(l=r,d=o+(null==r.key||e&&e.key===r.key?"":(""+r.key).replace(A,"$&/")+"/")+c,r=D(l.type,d,l.props)),t.push(r)),1;c=0;var u,p=""===s?".":s+":";if(S(e))for(var m=0;m<e.length;m++)c+=N(s=e[m],t,o,a=p+L(s,m),r);else if("function"===typeof(m=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=g&&u[g]||u["@@iterator"])?u:null))for(e=m.call(e),m=0;!(s=e.next()).done;)c+=N(s=s.value,t,o,a=p+L(s,m++),r);else if("object"===a){if("function"===typeof e.then)return N(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(w,w):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,o,s,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function T(e,t,i){if(null==e)return e;var n=[],o=0;return N(e,n,"","",function(e){return t.call(i,e,o++)}),n}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var E="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},P={map:T,forEach:function(e,t,i){T(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=p,t.Children=P,t.Component=y,t.Fragment=o,t.Profiler=r,t.PureComponent=x,t.StrictMode=s,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return M.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var n=f({},e.props),o=e.key;if(null!=t)for(s in void 0!==t.key&&(o=""+t.key),t)!k.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(n[s]=t[s]);var s=arguments.length-2;if(1===s)n.children=i;else if(1<s){for(var r=Array(s),a=0;a<s;a++)r[a]=arguments[a+2];n.children=r}return D(e.type,o,n)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,i){var n,o={},s=null;if(null!=t)for(n in void 0!==t.key&&(s=""+t.key),t)k.call(t,n)&&"key"!==n&&"__self"!==n&&"__source"!==n&&(o[n]=t[n]);var r=arguments.length-2;if(1===r)o.children=i;else if(1<r){for(var a=Array(r),l=0;l<r;l++)a[l]=arguments[l+2];o.children=a}if(e&&e.defaultProps)for(n in r=e.defaultProps)void 0===o[n]&&(o[n]=r[n]);return D(e,s,o)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.T,i={};M.T=i;try{var n=e(),o=M.S;null!==o&&o(i,n),"object"===typeof n&&null!==n&&"function"===typeof n.then&&n.then(w,E)}catch(Ur){E(Ur)}finally{null!==t&&null!==i.types&&(t.types=i.types),M.T=t}},t.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},t.use=function(e){return M.H.use(e)},t.useActionState=function(e,t,i){return M.H.useActionState(e,t,i)},t.useCallback=function(e,t){return M.H.useCallback(e,t)},t.useContext=function(e){return M.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return M.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return M.H.useEffect(e,t)},t.useEffectEvent=function(e){return M.H.useEffectEvent(e)},t.useId=function(){return M.H.useId()},t.useImperativeHandle=function(e,t,i){return M.H.useImperativeHandle(e,t,i)},t.useInsertionEffect=function(e,t){return M.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.H.useMemo(e,t)},t.useOptimistic=function(e,t){return M.H.useOptimistic(e,t)},t.useReducer=function(e,t,i){return M.H.useReducer(e,t,i)},t.useRef=function(e){return M.H.useRef(e)},t.useState=function(e){return M.H.useState(e)},t.useSyncExternalStore=function(e,t,i){return M.H.useSyncExternalStore(e,t,i)},t.useTransition=function(){return M.H.useTransition()},t.version="19.2.3"},391(e,t,i){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(4)},579(e,t,i){e.exports=i(799)},672(e,t,i){var n=i(43);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(o(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,t.createPortal=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(o(299));return function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==n?null:""+n,children:e,containerInfo:t,implementation:i}}(e,t,null,i)},t.flushSync=function(e){var t=l.T,i=r.p;try{if(l.T=null,r.p=2,e)return e()}finally{l.T=t,r.p=i,r.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,r.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&r.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var i=t.as,n=d(i,t.crossOrigin),o="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===i?r.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:n,integrity:o,fetchPriority:s}):"script"===i&&r.d.X(e,{crossOrigin:n,integrity:o,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var i=d(t.as,t.crossOrigin);r.d.M(e,{crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&r.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var i=t.as,n=d(i,t.crossOrigin);r.d.L(e,i,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var i=d(t.as,t.crossOrigin);r.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else r.d.m(e)},t.requestFormReset=function(e){r.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,i){return l.H.useFormState(e,t,i)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.3"},763(e,t,i){e.exports=i(983)},799(e,t){var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function o(e,t,n){var o=null;if(void 0!==n&&(o=""+n),void 0!==t.key&&(o=""+t.key),"key"in t)for(var s in n={},t)"key"!==s&&(n[s]=t[s]);else n=t;return t=n.ref,{$$typeof:i,type:e,key:o,ref:void 0!==t?t:null,props:n}}t.Fragment=n,t.jsx=o,t.jsxs=o},853(e,t,i){e.exports=i(896)},896(e,t){function i(e,t){var i=e.length;e.push(t);e:for(;0<i;){var n=i-1>>>1,o=e[n];if(!(0<s(o,t)))break e;e[n]=t,e[i]=o,i=n}}function n(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;e:for(var n=0,o=e.length,r=o>>>1;n<r;){var a=2*(n+1)-1,l=e[a],d=a+1,c=e[d];if(0>s(l,i))d<o&&0>s(c,l)?(e[n]=c,e[d]=i,n=d):(e[n]=l,e[a]=i,n=a);else{if(!(d<o&&0>s(c,i)))break e;e[n]=c,e[d]=i,n=d}}}return t}function s(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var d=[],c=[],u=1,h=null,p=3,g=!1,m=!1,f=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function C(e){for(var t=n(c);null!==t;){if(null===t.callback)o(c);else{if(!(t.startTime<=e))break;o(c),t.sortIndex=t.expirationTime,i(d,t)}t=n(c)}}function S(e){if(f=!1,C(e),!m)if(null!==n(d))m=!0,M||(M=!0,w());else{var t=n(c);null!==t&&R(S,t.startTime-e)}}var w,M=!1,k=-1,D=5,I=-1;function A(){return!!v||!(t.unstable_now()-I<D)}function L(){if(v=!1,M){var e=t.unstable_now();I=e;var i=!0;try{e:{m=!1,f&&(f=!1,b(k),k=-1),g=!0;var s=p;try{t:{for(C(e),h=n(d);null!==h&&!(h.expirationTime>e&&A());){var r=h.callback;if("function"===typeof r){h.callback=null,p=h.priorityLevel;var a=r(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){h.callback=a,C(e),i=!0;break t}h===n(d)&&o(d),C(e)}else o(d);h=n(d)}if(null!==h)i=!0;else{var l=n(c);null!==l&&R(S,l.startTime-e),i=!1}}break e}finally{h=null,p=s,g=!1}i=void 0}}finally{i?w():M=!1}}}if("function"===typeof x)w=function(){x(L)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,T=N.port2;N.port1.onmessage=L,w=function(){T.postMessage(null)}}else w=function(){y(L,0)};function R(e,i){k=y(function(){e(t.unstable_now())},i)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var i=p;p=t;try{return e()}finally{p=i}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=p;p=e;try{return t()}finally{p=i}},t.unstable_scheduleCallback=function(e,o,s){var r=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?r+s:r:s=r,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:u++,callback:o,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>r?(e.sortIndex=s,i(c,e),null===n(d)&&e===n(c)&&(f?(b(k),k=-1):f=!0,R(S,s-r))):(e.sortIndex=a,i(d,e),m||g||(m=!0,M||(M=!0,w()))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var i=p;p=t;try{return e.apply(this,arguments)}finally{p=i}}}},950(e,t,i){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(672)},983(e,t){var i="function"===typeof Symbol&&Symbol.for,n=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,r=i?Symbol.for("react.strict_mode"):60108,a=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,c=i?Symbol.for("react.async_mode"):60111,u=i?Symbol.for("react.concurrent_mode"):60111,h=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,g=i?Symbol.for("react.suspense_list"):60120,m=i?Symbol.for("react.memo"):60115,f=i?Symbol.for("react.lazy"):60116,v=i?Symbol.for("react.block"):60121,y=i?Symbol.for("react.fundamental"):60117,b=i?Symbol.for("react.responder"):60118,x=i?Symbol.for("react.scope"):60119;function C(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case c:case u:case s:case a:case r:case p:return e;default:switch(e=e&&e.$$typeof){case d:case h:case f:case m:case l:return e;default:return t}}case o:return t}}}function S(e){return C(e)===u}t.AsyncMode=c,t.ConcurrentMode=u,t.ContextConsumer=d,t.ContextProvider=l,t.Element=n,t.ForwardRef=h,t.Fragment=s,t.Lazy=f,t.Memo=m,t.Portal=o,t.Profiler=a,t.StrictMode=r,t.Suspense=p,t.isAsyncMode=function(e){return S(e)||C(e)===c},t.isConcurrentMode=S,t.isContextConsumer=function(e){return C(e)===d},t.isContextProvider=function(e){return C(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return C(e)===h},t.isFragment=function(e){return C(e)===s},t.isLazy=function(e){return C(e)===f},t.isMemo=function(e){return C(e)===m},t.isPortal=function(e){return C(e)===o},t.isProfiler=function(e){return C(e)===a},t.isStrictMode=function(e){return C(e)===r},t.isSuspense=function(e){return C(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===u||e===a||e===r||e===p||e===g||"object"===typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===m||e.$$typeof===l||e.$$typeof===d||e.$$typeof===h||e.$$typeof===y||e.$$typeof===b||e.$$typeof===x||e.$$typeof===v)},t.typeOf=C}},t={};function i(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,i),s.exports}i.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;i.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if("object"===typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&"function"===typeof n.then)return n}var s=Object.create(null);i.r(s);var r={};e=e||[null,t({}),t([]),t(t)];for(var a=2&o&&n;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>r[e]=()=>n[e]);return r.default=()=>n,i.d(s,r),s}})(),i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce((t,n)=>(i.f[n](e,t),t),[])),i.u=e=>"static/js/"+e+".fd2f0c4a.chunk.js",i.miniCssF=e=>{},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="my-app:";i.l=(n,o,s,r)=>{if(e[n])e[n].push(o);else{var a,l;if(void 0!==s)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+s){a=u;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",i.nc&&a.setAttribute("nonce",i.nc),a.setAttribute("data-webpack",t+s),a.src=n),e[n]=[o];var h=(t,i)=>{a.onerror=a.onload=null,clearTimeout(p);var o=e[n];if(delete e[n],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach(e=>e(i)),t)return t(i)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),i.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="/ag-grid-features/",(()=>{var e={792:0};i.f.j=(t,n)=>{var o=i.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var s=new Promise((i,n)=>o=e[t]=[i,n]);n.push(o[2]=s);var r=i.p+i.u(t),a=new Error;i.l(r,n=>{if(i.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var s=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",a.name="ChunkLoadError",a.type=s,a.request=r,o[1](a)}},"chunk-"+t,t)}};var t=(t,n)=>{var o,s,[r,a,l]=n,d=0;if(r.some(t=>0!==e[t])){for(o in a)i.o(a,o)&&(i.m[o]=a[o]);if(l)l(i)}for(t&&t(n);d<r.length;d++)s=r[d],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0},n=self.webpackChunkmy_app=self.webpackChunkmy_app||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n={};i.r(n),i.d(n,{AGGREGATION_INDEX_UNSET:()=>rh,AGGREGATION_INDEX_X_MAX:()=>Ju,AGGREGATION_INDEX_X_MIN:()=>Qu,AGGREGATION_INDEX_Y_MAX:()=>th,AGGREGATION_INDEX_Y_MIN:()=>eh,AGGREGATION_MAX_POINTS:()=>oh,AGGREGATION_MIN_RANGE:()=>sh,AGGREGATION_SPAN:()=>ih,AGGREGATION_THRESHOLD:()=>nh,AbstractModuleInstance:()=>Ra,ActionOnSet:()=>ng,AdjacencyListGraph:()=>Yg,AsyncAwaitQueue:()=>_p,BASE_FONT_SIZE:()=>Ph,BREAK_TRANSFORM_CHAIN:()=>nu,BaseProperties:()=>kh,Border:()=>sg,CARTESIAN_AXIS_TYPE:()=>zh,CARTESIAN_POSITION:()=>Fh,CallbackCache:()=>Sp,ChangeDetectableProperties:()=>Iy,ChartAxisDirection:()=>_u,ChartUpdateType:()=>Ku,CleanupRegistry:()=>Ta,Color:()=>yg,DEFAULT_ANNOTATION_HANDLE_FILL:()=>lp,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>up,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>hp,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>pp,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>gp,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>dp,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>cp,DEFAULT_CAPTION_ALIGNMENT:()=>Wh,DEFAULT_CAPTION_LAYOUT_STYLE:()=>jh,DEFAULT_FIBONACCI_STROKES:()=>sp,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL:()=>ap,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR:()=>op,DEFAULT_POLAR_SERIES_STROKE:()=>ip,DEFAULT_SHADOW_COLOUR:()=>Hh,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>np,DEFAULT_TEXTBOX_COLOR:()=>vp,DEFAULT_TEXTBOX_FILL:()=>mp,DEFAULT_TEXTBOX_STROKE:()=>fp,DEFAULT_TEXT_ANNOTATION_COLOR:()=>rp,DEFAULT_TOOLBAR_POSITION:()=>yp,Debug:()=>Cr,DebugMetrics:()=>sa,DeclaredSceneChangeDetection:()=>$y,DeclaredSceneObjectChangeDetection:()=>Zy,Deprecated:()=>Dg,DeprecatedAndRenamedTo:()=>Ig,EllipsisChar:()=>Ol,ErrorType:()=>ad,EventEmitter:()=>Oa,FONT_SIZE:()=>Eh,FONT_SIZE_RATIO:()=>Oh,IS_DARK_THEME:()=>Gh,InterpolationProperties:()=>Ah,LRUCache:()=>Fa,LineSplitter:()=>Fl,Logger:()=>jr,LonLatBBox:()=>Rh,MementoCaretaker:()=>Wu,ModuleRegistry:()=>ca,ModuleType:()=>ua,ObserveChanges:()=>og,PALETTE_ALT_DOWN_FILL:()=>Jh,PALETTE_ALT_DOWN_STROKE:()=>qh,PALETTE_ALT_NEUTRAL_FILL:()=>ep,PALETTE_ALT_NEUTRAL_STROKE:()=>tp,PALETTE_ALT_UP_FILL:()=>Qh,PALETTE_ALT_UP_STROKE:()=>Xh,PALETTE_DOWN_FILL:()=>Yh,PALETTE_DOWN_STROKE:()=>Kh,PALETTE_NEUTRAL_FILL:()=>Zh,PALETTE_NEUTRAL_STROKE:()=>$h,PALETTE_UP_FILL:()=>Uh,PALETTE_UP_STROKE:()=>_h,POLAR_AXIS_SHAPE:()=>Vh,POLAR_AXIS_TYPE:()=>Bh,PREV_NEXT_KEYS:()=>um,Padding:()=>Tm,ParallelStateMachine:()=>Gm,PolarZIndexMap:()=>Lh,PropertiesArray:()=>Dh,Property:()=>ru,ProxyOnWrite:()=>tg,ProxyProperty:()=>eg,ProxyPropertyOnWrite:()=>ig,SKIP_JS_BUILTINS:()=>Lu,ScaleAlignment:()=>Pa,SceneArrayChangeDetection:()=>Yy,SceneChangeDetection:()=>_y,SceneObjectChangeDetection:()=>Uy,SceneRefChangeDetection:()=>Ky,SeriesContentZIndexMap:()=>Th,SeriesZIndexMap:()=>Nh,SimpleCache:()=>xg,SpanJoin:()=>Sy,StateMachine:()=>Vm,StateMachineProperty:()=>Om,TRIPLE_EQ:()=>Wy,TextMeasurer:()=>Hm,TickIntervals:()=>Vf,ToolbarButtonProperties:()=>Ay,TrimEdgeGuard:()=>zl,UnknownError:()=>cd,ValidationError:()=>dd,Vec2:()=>pv,Vec4:()=>Pv,Vertex:()=>$g,WeakCache:()=>Cg,ZIndexMap:()=>bp,addEscapeEventListener:()=>nm,addFakeTransformToInstanceProperty:()=>ru,addMouseCloseListener:()=>om,addObserverToInstanceProperty:()=>du,addOverrideFocusVisibleEventListener:()=>am,addTouchCloseListener:()=>sm,addTransformToInstanceProperty:()=>lu,aggregationBucketForDatum:()=>vh,aggregationDatumMatchesIndex:()=>yh,aggregationDomain:()=>ph,aggregationIndexForXRatio:()=>fh,aggregationRangeFittingPoints:()=>hh,aggregationXRatioForDatumIndex:()=>gh,aggregationXRatioForXValue:()=>mh,and:()=>vd,angleBetween:()=>Gp,angularPadding:()=>jp,appendEllipsis:()=>jl,arcDistanceSquared:()=>Tg,areScalingEqual:()=>fy,array:()=>xd,arrayLength:()=>Nd,arrayOf:()=>_d,arrayOfDefs:()=>Kd,arraysEqual:()=>kr,assignIfNotStrictlyEqual:()=>Ru,attachDescription:()=>hd,attachListener:()=>Gr,autoSizedLabelOptionsDefs:()=>qc,barHighlightOptionsDef:()=>cc,bezier2DDistance:()=>ry,bezier2DExtrema:()=>oy,boolean:()=>Cd,borderOptionsDef:()=>Mc,boxCollides:()=>rg,boxContains:()=>ag,boxEmpty:()=>lg,boxesEqual:()=>dg,buildDateFormatter:()=>Tl,cachedTextMeasurer:()=>Wm,calcLineHeight:()=>Vl,calculatePlacement:()=>Rm,callWithContext:()=>Cp,callback:()=>Sd,callbackDefs:()=>Yd,callbackOf:()=>Ud,checkDatum:()=>cv,circularSliceArray:()=>Dr,clamp:()=>za,clampArray:()=>Yu,clipLines:()=>Qm,clipSpanX:()=>Cy,collapseSpanToPoint:()=>by,collectAggregationLevels:()=>Sh,color:()=>wd,colorStopsOrderValidator:()=>Qd,colorUnion:()=>ac,commonChartOptionsDefs:()=>Kc,commonSeriesOptionsDefs:()=>Yc,commonSeriesThemeableOptionsDefs:()=>Uc,compactAggregationIndices:()=>xh,compareDates:()=>Sg,computeExtremesAggregation:()=>wh,computeExtremesAggregationPartial:()=>Mh,constant:()=>jd,contextMenuItemsArray:()=>Gc,countFractionDigits:()=>_a,countLines:()=>Xl,createAggregationIndices:()=>bh,createButton:()=>Ly,createCanvasContext:()=>bg,createCheckbox:()=>Ny,createDeprecationWarning:()=>kg,createElement:()=>zr,createElementId:()=>Cm,createIcon:()=>Ey,createId:()=>xm,createIdsGenerator:()=>rv,createNumberFormatter:()=>ml,createSelect:()=>Ty,createSvgElement:()=>Br,createTextArea:()=>Ry,createTicks:()=>Wf,date:()=>Md,dateToNumber:()=>tv,dateTruncationForDomain:()=>sv,datesSortOrder:()=>Mg,debounce:()=>Rl,decodeIntervalValue:()=>kf,deepClone:()=>Qg,deepFreeze:()=>Eu,defaultEpoch:()=>Uf,defined:()=>kd,diffArrays:()=>Ag,distribute:()=>Nr,downloadUrl:()=>Vr,dropFirstWhile:()=>Ar,dropLastWhile:()=>Lr,durationDay:()=>of,durationHour:()=>nf,durationMinute:()=>tf,durationMonth:()=>rf,durationSecond:()=>ef,durationWeek:()=>sf,durationYear:()=>af,easeIn:()=>Fy,easeInOut:()=>By,easeInOutQuad:()=>Hy,easeInQuad:()=>Vy,easeOut:()=>zy,easeOutQuad:()=>Gy,encodedToTimestamp:()=>Nf,enterpriseRegistry:()=>da,entries:()=>fu,errorBarOptionsDefs:()=>Jc,errorBarThemeableOptionsDefs:()=>Qc,estimateTickCount:()=>ev,evaluateBezier:()=>ey,every:()=>Du,expandLegendPosition:()=>Uu,extent:()=>Rg,extractDecoratedProperties:()=>hu,extractDomain:()=>Ea,fillGradientDefaults:()=>nc,fillImageDefaults:()=>sc,fillOptionsDef:()=>lc,fillPatternDefaults:()=>oc,findMaxIndex:()=>cg,findMaxValue:()=>hg,findMinIndex:()=>ug,findMinMax:()=>$u,findMinValue:()=>pg,findRangeExtent:()=>Zu,first:()=>mu,focusCursorAtEnd:()=>kp,fontFamilyFull:()=>xc,fontOptionsDef:()=>Cc,formatNumber:()=>Vg,formatObjectValidator:()=>Wc,formatPercent:()=>zg,formatValue:()=>Fg,fromPairs:()=>Iu,generateUUID:()=>Sm,geoJson:()=>Ug,getAngleRatioRadians:()=>Hp,getAttribute:()=>qp,getDocument:()=>Er,getElementBBox:()=>Mp,getIconClassNames:()=>Ip,getLastFocus:()=>mm,getMaxInnerRectSize:()=>Lp,getMidpointsForIndices:()=>Ch,getMinOuterRectSize:()=>Np,getPath:()=>Au,getTickTimeInterval:()=>Yf,getWindow:()=>Pr,googleFont:()=>bc,gradientColorStops:()=>Jd,gradientStrict:()=>tc,greaterThan:()=>Vd,groupBy:()=>Mr,guardTextEdges:()=>Wl,hasNoModifiers:()=>lm,hasRequiredInPath:()=>$d,highlightOptionsDef:()=>pc,htmlElement:()=>Ld,inRange:()=>Ba,initRovingTabIndex:()=>hm,insertListItemsSorted:()=>wm,instanceOf:()=>Wd,interpolationOptionsDefs:()=>iu,intervalCeil:()=>vf,intervalEpoch:()=>Pf,intervalExtent:()=>xf,intervalFloor:()=>ff,intervalHierarchy:()=>Of,intervalMilliseconds:()=>Ff,intervalNext:()=>bf,intervalPrevious:()=>yf,intervalRange:()=>wf,intervalRangeCount:()=>Sf,intervalRangeNumeric:()=>Mf,intervalRangeStartIndex:()=>Tf,intervalStep:()=>Ef,intervalUnit:()=>Rf,inverseEaseOut:()=>jy,isArray:()=>Ua,isBetweenAngles:()=>zp,isBoolean:()=>Ya,isButtonClickEvent:()=>gm,isColor:()=>dl,isContinuous:()=>dv,isDate:()=>$a,isDecoratedObject:()=>cu,isDefined:()=>Ka,isDenseInterval:()=>Qf,isEmptyObject:()=>tl,isEnumKey:()=>rl,isEnumValue:()=>al,isFiniteNumber:()=>ol,isFunction:()=>qa,isGradientFill:()=>$v,isGradientFillArray:()=>Zv,isGradientOrPatternFill:()=>Jv,isHtmlElement:()=>sl,isImageFill:()=>Qv,isInputPending:()=>Dp,isInteger:()=>Ha,isKeyOf:()=>cl,isNegative:()=>Ga,isNumber:()=>nl,isNumberEqual:()=>Va,isNumberObject:()=>lv,isObject:()=>Qa,isObjectLike:()=>Ja,isObjectWithProperty:()=>Pu,isObjectWithStringProperty:()=>Ou,isPatternFill:()=>qv,isPlainObject:()=>el,isPointLabelDatum:()=>dy,isProperties:()=>Ih,isRegExp:()=>Xa,isScaleValid:()=>vy,isSegmentTruncated:()=>Yl,isString:()=>il,isStringFillArray:()=>Xv,isStringObject:()=>av,isSymbol:()=>ll,isTextTruncated:()=>Ul,isTruncated:()=>Kl,isUnitTimeCategoryScaling:()=>gy,isValidDate:()=>Za,isValidNumberFormat:()=>pl,iterate:()=>pu,joinFormatted:()=>$l,jsonApply:()=>tm,jsonDiff:()=>Xg,jsonPropertyCompare:()=>qg,jsonWalk:()=>em,kebabCase:()=>Ql,labelBoxOptionsDef:()=>kc,legendPositionValidator:()=>Ac,lessThan:()=>zd,lessThanOrEqual:()=>Bd,levenshteinDistance:()=>ql,lineDashOptionsDef:()=>dc,lineDistanceSquared:()=>Ng,lineHighlightOptionsDef:()=>uc,lineSegmentOptions:()=>fc,lineSegmentation:()=>yc,linear:()=>Oy,linearGaugeSeriesOptionsDef:()=>Gu,linearGaugeSeriesThemeableOptionsDef:()=>Vu,linearGaugeTargetOptionsDef:()=>zu,linearPoints:()=>wy,listDecoratedProperties:()=>uu,lowestGranularityForInterval:()=>iv,lowestGranularityUnitForTicks:()=>nv,lowestGranularityUnitForValue:()=>ov,makeAccessibleClickListener:()=>pm,mapValues:()=>wu,markerOptionsDefs:()=>Zc,markerStyleOptionsDefs:()=>$c,measureTextSegments:()=>_m,memo:()=>km,merge:()=>Cu,mergeArrayDefaults:()=>Su,mergeDefaults:()=>xu,modulus:()=>Wa,multiSeriesHighlightOptionsDef:()=>gc,nearestSquared:()=>Lm,nearestSquaredInContainer:()=>Nm,nextPowerOf2:()=>Xu,niceTicksDomain:()=>Jf,normalisedExtentWithMetadata:()=>Eg,normalisedTimeExtentWithMetadata:()=>Pg,normalizeAngle180:()=>Fp,normalizeAngle360:()=>Pp,normalizeAngle360FromDegrees:()=>Wp,normalizeAngle360Inclusive:()=>Op,number:()=>Dd,numberFormatValidator:()=>_c,numberMin:()=>Rd,numberRange:()=>Ed,object:()=>Id,objectsEqual:()=>yu,objectsEqualWith:()=>bu,optionsDefs:()=>md,or:()=>yd,padding:()=>wc,paddingOptions:()=>Sc,parseColor:()=>Hr,parseNumberFormat:()=>gl,partialAssign:()=>Tu,pause:()=>Kp,pick:()=>ku,placeLabels:()=>uy,positiveNumber:()=>Pd,positiveNumberNonZero:()=>Od,previousPowerOf2:()=>qu,radialGaugeSeriesOptionsDef:()=>ju,radialGaugeSeriesThemeableOptionsDef:()=>Hu,radialGaugeTargetOptionsDef:()=>Bu,range:()=>qf,rangeValidator:()=>Rc,ratio:()=>Fd,readIntegratedWrappedValue:()=>hv,required:()=>pd,rescaleSpan:()=>xy,rescaleVisibleRange:()=>zf,resetIds:()=>bm,rotatePoint:()=>Tp,roundTo:()=>ja,safeCall:()=>Pl,seriesLabelOptionsDefs:()=>Xc,setAttribute:()=>Zp,setAttributes:()=>Xp,setDocument:()=>Or,setElementBBox:()=>wp,setElementStyle:()=>Qp,setElementStyles:()=>Jp,setPath:()=>Nu,setWindow:()=>Fr,shadowOptionsDefs:()=>tu,shallowClone:()=>Jg,shapeHighlightOptionsDef:()=>hc,shapeSegmentOptions:()=>mc,shapeSegmentation:()=>vc,shapeValidator:()=>Lc,simpleMemorize:()=>Am,simpleMemorize2:()=>Im,smoothPoints:()=>Dy,solveBezier:()=>ty,sortAndUniqueDates:()=>wg,sortBasedOnArray:()=>Ir,spanRange:()=>yy,splitBezier2D:()=>iy,stepPoints:()=>ky,stopPageScrolling:()=>fm,strictObjectKeys:()=>vu,strictUnion:()=>Hd,string:()=>Ad,stringLength:()=>Td,stringifyValue:()=>Zl,strokeOptionsDef:()=>ic,textOrSegments:()=>Ec,themeOperator:()=>Xd,throttle:()=>El,tickFormat:()=>Xf,tickStep:()=>$f,toArray:()=>Sr,toDegrees:()=>Vp,toFontString:()=>Bl,toIterable:()=>gu,toPlainText:()=>ed,toRadians:()=>Bp,toTextString:()=>Gl,toolbarButtonOptionsDefs:()=>Hc,tooltipOptionsDefs:()=>eu,transformIntegratedCategoryValue:()=>uv,truncateLine:()=>Zm,typeUnion:()=>fd,undocumented:()=>gd,unguardTextEdges:()=>_l,union:()=>Gd,unionSymbol:()=>sd,unique:()=>wr,validate:()=>ud,without:()=>Mu,wrapLines:()=>$m,wrapText:()=>Ym,wrapTextOrSegments:()=>Um,wrapTextSegments:()=>Jm});var o=i(43),s=i.t(o,2),r=i(391);function a(e,t){if(null==e)return{};var i={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;i[n]=e[n]}return i}function l(e,t){if(null==e)return{};var i,n,o=a(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)i=s[n],-1===t.indexOf(i)&&{}.propertyIsEnumerable.call(e,i)&&(o[i]=e[i])}return o}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function c(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}function u(e,t,i){return(t=c(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function p(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(Object(i),!0).forEach(function(t){u(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function g(e){var t,i,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(i=g(e[t]))&&(n&&(n+=" "),n+=i)}else for(i in e)e[i]&&(n&&(n+=" "),n+=i);return n}const m=function(){for(var e,t,i=0,n="",o=arguments.length;i<o;i++)(e=arguments[i])&&(t=g(e))&&(n&&(n+=" "),n+=t);return n};function f(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const n={};for(const o in e){const s=e[o];let r="",a=!0;for(let e=0;e<s.length;e+=1){const n=s[e];n&&(r+=(!0===a?"":" ")+t(n),a=!1,i&&i[n]&&(r+=" "+i[n]))}n[o]=r}return n}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)({}).hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},v.apply(null,arguments)}var y=function(){function e(e){var t=this;this._insertTag=function(e){var i;i=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,i),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var i=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{i.insertRule(e,i.cssRules.length)}catch(n){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach(function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)}),this.tags=[],this.ctr=0},e}(),b=Math.abs,x=String.fromCharCode,C=Object.assign;function S(e){return e.trim()}function w(e,t,i){return e.replace(t,i)}function M(e,t){return e.indexOf(t)}function k(e,t){return 0|e.charCodeAt(t)}function D(e,t,i){return e.slice(t,i)}function I(e){return e.length}function A(e){return e.length}function L(e,t){return t.push(e),e}var N=1,T=1,R=0,E=0,P=0,O="";function F(e,t,i,n,o,s,r){return{value:e,root:t,parent:i,type:n,props:o,children:s,line:N,column:T,length:r,return:""}}function z(e,t){return C(F("",null,null,"",null,null,0),e,{length:-e.length},t)}function B(){return P=E>0?k(O,--E):0,T--,10===P&&(T=1,N--),P}function V(){return P=E<R?k(O,E++):0,T++,10===P&&(T=1,N++),P}function G(){return k(O,E)}function H(){return E}function j(e,t){return D(O,e,t)}function W(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function _(e){return N=T=1,R=I(O=e),E=0,[]}function K(e){return O="",e}function U(e){return S(j(E-1,Z(91===e?e+2:40===e?e+1:e)))}function Y(e){for(;(P=G())&&P<33;)V();return W(e)>2||W(P)>3?"":" "}function $(e,t){for(;--t&&V()&&!(P<48||P>102||P>57&&P<65||P>70&&P<97););return j(e,H()+(t<6&&32==G()&&32==V()))}function Z(e){for(;V();)switch(P){case e:return E;case 34:case 39:34!==e&&39!==e&&Z(P);break;case 40:41===e&&Z(e);break;case 92:V()}return E}function X(e,t){for(;V()&&e+P!==57&&(e+P!==84||47!==G()););return"/*"+j(t,E-1)+"*"+x(47===e?e:V())}function q(e){for(;!W(G());)V();return j(e,E)}var Q="-ms-",J="-moz-",ee="-webkit-",te="comm",ie="rule",ne="decl",oe="@keyframes";function se(e,t){for(var i="",n=A(e),o=0;o<n;o++)i+=t(e[o],o,e,t)||"";return i}function re(e,t,i,n){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case ne:return e.return=e.return||e.value;case te:return"";case oe:return e.return=e.value+"{"+se(e.children,n)+"}";case ie:e.value=e.props.join(",")}return I(i=se(e.children,n))?e.return=e.value+"{"+i+"}":""}function ae(e){return function(t){t.root||(t=t.return)&&e(t)}}function le(e){return K(de("",null,null,null,[""],e=_(e),0,[0],e))}function de(e,t,i,n,o,s,r,a,l){for(var d=0,c=0,u=r,h=0,p=0,g=0,m=1,f=1,v=1,y=0,b="",C=o,S=s,D=n,A=b;f;)switch(g=y,y=V()){case 40:if(108!=g&&58==k(A,u-1)){-1!=M(A+=w(U(y),"&","&\f"),"&\f")&&(v=-1);break}case 34:case 39:case 91:A+=U(y);break;case 9:case 10:case 13:case 32:A+=Y(g);break;case 92:A+=$(H()-1,7);continue;case 47:switch(G()){case 42:case 47:L(ue(X(V(),H()),t,i),l);break;default:A+="/"}break;case 123*m:a[d++]=I(A)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:f=0;case 59+c:-1==v&&(A=w(A,/\f/g,"")),p>0&&I(A)-u&&L(p>32?he(A+";",n,i,u-1):he(w(A," ","")+";",n,i,u-2),l);break;case 59:A+=";";default:if(L(D=ce(A,t,i,d,c,o,a,b,C=[],S=[],u),s),123===y)if(0===c)de(A,t,D,D,C,s,u,a,S);else switch(99===h&&110===k(A,3)?100:h){case 100:case 108:case 109:case 115:de(e,D,D,n&&L(ce(e,D,D,0,0,o,a,b,o,C=[],u),S),o,S,u,a,n?C:S);break;default:de(A,D,D,D,[""],S,0,a,S)}}d=c=p=0,m=v=1,b=A="",u=r;break;case 58:u=1+I(A),p=g;default:if(m<1)if(123==y)--m;else if(125==y&&0==m++&&125==B())continue;switch(A+=x(y),y*m){case 38:v=c>0?1:(A+="\f",-1);break;case 44:a[d++]=(I(A)-1)*v,v=1;break;case 64:45===G()&&(A+=U(V())),h=G(),c=u=I(b=A+=q(H())),y++;break;case 45:45===g&&2==I(A)&&(m=0)}}return s}function ce(e,t,i,n,o,s,r,a,l,d,c){for(var u=o-1,h=0===o?s:[""],p=A(h),g=0,m=0,f=0;g<n;++g)for(var v=0,y=D(e,u+1,u=b(m=r[g])),x=e;v<p;++v)(x=S(m>0?h[v]+" "+y:w(y,/&\f/g,h[v])))&&(l[f++]=x);return F(e,t,i,0===o?ie:a,l,d,c)}function ue(e,t,i){return F(e,t,i,te,x(P),D(e,2,-2),0)}function he(e,t,i,n){return F(e,t,i,ne,D(e,0,n),D(e,n+1,-1),n)}var pe=function(e,t,i){for(var n=0,o=0;n=o,o=G(),38===n&&12===o&&(t[i]=1),!W(o);)V();return j(e,E)},ge=function(e,t){return K(function(e,t){var i=-1,n=44;do{switch(W(n)){case 0:38===n&&12===G()&&(t[i]=1),e[i]+=pe(E-1,t,i);break;case 2:e[i]+=U(n);break;case 4:if(44===n){e[++i]=58===G()?"&\f":"",t[i]=e[i].length;break}default:e[i]+=x(n)}}while(n=V());return e}(_(e),t))},me=new WeakMap,fe=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,i=e.parent,n=e.column===i.column&&e.line===i.line;"rule"!==i.type;)if(!(i=i.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||me.get(i))&&!n){me.set(e,!0);for(var o=[],s=ge(t,o),r=i.props,a=0,l=0;a<s.length;a++)for(var d=0;d<r.length;d++,l++)e.props[l]=o[a]?s[a].replace(/&\f/g,r[d]):r[d]+" "+s[a]}}},ve=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ye(e,t){switch(function(e,t){return 45^k(e,0)?(((t<<2^k(e,0))<<2^k(e,1))<<2^k(e,2))<<2^k(e,3):0}(e,t)){case 5103:return ee+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ee+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ee+e+J+e+Q+e+e;case 6828:case 4268:return ee+e+Q+e+e;case 6165:return ee+e+Q+"flex-"+e+e;case 5187:return ee+e+w(e,/(\w+).+(:[^]+)/,ee+"box-$1$2"+Q+"flex-$1$2")+e;case 5443:return ee+e+Q+"flex-item-"+w(e,/flex-|-self/,"")+e;case 4675:return ee+e+Q+"flex-line-pack"+w(e,/align-content|flex-|-self/,"")+e;case 5548:return ee+e+Q+w(e,"shrink","negative")+e;case 5292:return ee+e+Q+w(e,"basis","preferred-size")+e;case 6060:return ee+"box-"+w(e,"-grow","")+ee+e+Q+w(e,"grow","positive")+e;case 4554:return ee+w(e,/([^-])(transform)/g,"$1"+ee+"$2")+e;case 6187:return w(w(w(e,/(zoom-|grab)/,ee+"$1"),/(image-set)/,ee+"$1"),e,"")+e;case 5495:case 3959:return w(e,/(image-set\([^]*)/,ee+"$1$`$1");case 4968:return w(w(e,/(.+:)(flex-)?(.*)/,ee+"box-pack:$3"+Q+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ee+e+e;case 4095:case 3583:case 4068:case 2532:return w(e,/(.+)-inline(.+)/,ee+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(I(e)-1-t>6)switch(k(e,t+1)){case 109:if(45!==k(e,t+4))break;case 102:return w(e,/(.+:)(.+)-([^]+)/,"$1"+ee+"$2-$3$1"+J+(108==k(e,t+3)?"$3":"$2-$3"))+e;case 115:return~M(e,"stretch")?ye(w(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==k(e,t+1))break;case 6444:switch(k(e,I(e)-3-(~M(e,"!important")&&10))){case 107:return w(e,":",":"+ee)+e;case 101:return w(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ee+(45===k(e,14)?"inline-":"")+"box$3$1"+ee+"$2$3$1"+Q+"$2box$3")+e}break;case 5936:switch(k(e,t+11)){case 114:return ee+e+Q+w(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ee+e+Q+w(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ee+e+Q+w(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ee+e+Q+e+e}return e}var be=[function(e,t,i,n){if(e.length>-1&&!e.return)switch(e.type){case ne:e.return=ye(e.value,e.length);break;case oe:return se([z(e,{value:w(e.value,"@","@"+ee)})],n);case ie:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return se([z(e,{props:[w(t,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return se([z(e,{props:[w(t,/:(plac\w+)/,":"+ee+"input-$1")]}),z(e,{props:[w(t,/:(plac\w+)/,":-moz-$1")]}),z(e,{props:[w(t,/:(plac\w+)/,Q+"input-$1")]})],n)}return""})}}],xe=function(e){var t=e.key;if("css"===t){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))})}var n,o,s=e.stylisPlugins||be,r={},a=[];n=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(e){for(var t=e.getAttribute("data-emotion").split(" "),i=1;i<t.length;i++)r[t[i]]=!0;a.push(e)});var l,d=[fe,ve],c=[re,ae(function(e){l.insert(e)})],u=function(e){var t=A(e);return function(i,n,o,s){for(var r="",a=0;a<t;a++)r+=e[a](i,n,o,s)||"";return r}}(d.concat(s,c));o=function(e,t,i,n){l=i,se(le(e?e+"{"+t.styles+"}":t.styles),u),n&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new y({key:t,container:n,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:r,registered:{},insert:o};return h.sheet.hydrate(a),h};function Ce(e,t,i){var n="";return i.split(" ").forEach(function(i){void 0!==e[i]?t.push(e[i]+";"):i&&(n+=i+" ")}),n}var Se=function(e,t,i){var n=e.key+"-"+t.name;!1===i&&void 0===e.registered[n]&&(e.registered[n]=t.styles)},we=function(e,t,i){Se(e,t,i);var n=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+n:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}};var Me={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function ke(e){var t=Object.create(null);return function(i){return void 0===t[i]&&(t[i]=e(i)),t[i]}}var De=/[A-Z]|^ms/g,Ie=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Ae=function(e){return 45===e.charCodeAt(1)},Le=function(e){return null!=e&&"boolean"!==typeof e},Ne=ke(function(e){return Ae(e)?e:e.replace(De,"-$&").toLowerCase()}),Te=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(Ie,function(e,t,i){return Ee={name:t,styles:i,next:Ee},t})}return 1===Me[e]||Ae(e)||"number"!==typeof t||0===t?t:t+"px"};function Re(e,t,i){if(null==i)return"";var n=i;if(void 0!==n.__emotion_styles)return n;switch(typeof i){case"boolean":return"";case"object":var o=i;if(1===o.anim)return Ee={name:o.name,styles:o.styles,next:Ee},o.name;var s=i;if(void 0!==s.styles){var r=s.next;if(void 0!==r)for(;void 0!==r;)Ee={name:r.name,styles:r.styles,next:Ee},r=r.next;return s.styles+";"}return function(e,t,i){var n="";if(Array.isArray(i))for(var o=0;o<i.length;o++)n+=Re(e,t,i[o])+";";else for(var s in i){var r=i[s];if("object"!==typeof r){var a=r;null!=t&&void 0!==t[a]?n+=s+"{"+t[a]+"}":Le(a)&&(n+=Ne(s)+":"+Te(s,a)+";")}else if(!Array.isArray(r)||"string"!==typeof r[0]||null!=t&&void 0!==t[r[0]]){var l=Re(e,t,r);switch(s){case"animation":case"animationName":n+=Ne(s)+":"+l+";";break;default:n+=s+"{"+l+"}"}}else for(var d=0;d<r.length;d++)Le(r[d])&&(n+=Ne(s)+":"+Te(s,r[d])+";")}return n}(e,t,i);case"function":if(void 0!==e){var a=Ee,l=i(e);return Ee=a,Re(e,t,l)}}var d=i;if(null==t)return d;var c=t[d];return void 0!==c?c:d}var Ee,Pe=/label:\s*([^\s;{]+)\s*(;|$)/g;function Oe(e,t,i){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,o="";Ee=void 0;var s=e[0];null==s||void 0===s.raw?(n=!1,o+=Re(i,t,s)):o+=s[0];for(var r=1;r<e.length;r++){if(o+=Re(i,t,e[r]),n)o+=s[r]}Pe.lastIndex=0;for(var a,l="";null!==(a=Pe.exec(o));)l+="-"+a[1];var d=function(e){for(var t,i=0,n=0,o=e.length;o>=4;++n,o-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),i=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&i)+(59797*(i>>>16)<<16);switch(o){case 3:i^=(255&e.charCodeAt(n+2))<<16;case 2:i^=(255&e.charCodeAt(n+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(n)))+(59797*(i>>>16)<<16)}return(((i=1540483477*(65535&(i^=i>>>13))+(59797*(i>>>16)<<16))^i>>>15)>>>0).toString(36)}(o)+l;return{name:d,styles:o,next:Ee}}var Fe=!!s.useInsertionEffect&&s.useInsertionEffect,ze=Fe||function(e){return e()},Be=(Fe||o.useLayoutEffect,o.createContext("undefined"!==typeof HTMLElement?xe({key:"css"}):null)),Ve=(Be.Provider,function(e){return(0,o.forwardRef)(function(t,i){var n=(0,o.useContext)(Be);return e(t,n,i)})}),Ge=o.createContext({});var He={}.hasOwnProperty,je="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",We=function(e){var t=e.cache,i=e.serialized,n=e.isStringTag;return Se(t,i,n),ze(function(){return we(t,i,n)}),null},_e=Ve(function(e,t,i){var n=e.css;"string"===typeof n&&void 0!==t.registered[n]&&(n=t.registered[n]);var s=e[je],r=[n],a="";"string"===typeof e.className?a=Ce(t.registered,r,e.className):null!=e.className&&(a=e.className+" ");var l=Oe(r,void 0,o.useContext(Ge));a+=t.key+"-"+l.name;var d={};for(var c in e)He.call(e,c)&&"css"!==c&&c!==je&&(d[c]=e[c]);return d.className=a,i&&(d.ref=i),o.createElement(o.Fragment,null,o.createElement(We,{cache:t,serialized:l,isStringTag:"string"===typeof s}),o.createElement(s,d))}),Ke=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Ue=ke(function(e){return Ke.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}),Ye=function(e){return"theme"!==e},$e=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?Ue:Ye},Ze=function(e,t,i){var n;if(t){var o=t.shouldForwardProp;n=e.__emotion_forwardProp&&o?function(t){return e.__emotion_forwardProp(t)&&o(t)}:o}return"function"!==typeof n&&i&&(n=e.__emotion_forwardProp),n},Xe=function(e){var t=e.cache,i=e.serialized,n=e.isStringTag;return Se(t,i,n),ze(function(){return we(t,i,n)}),null},qe=function e(t,i){var n,s,r=t.__emotion_real===t,a=r&&t.__emotion_base||t;void 0!==i&&(n=i.label,s=i.target);var l=Ze(t,i,r),d=l||$e(a),c=!d("as");return function(){var u=arguments,h=r&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==n&&h.push("label:"+n+";"),null==u[0]||void 0===u[0].raw)h.push.apply(h,u);else{var p=u[0];h.push(p[0]);for(var g=u.length,m=1;m<g;m++)h.push(u[m],p[m])}var f=Ve(function(e,t,i){var n=c&&e.as||a,r="",u=[],p=e;if(null==e.theme){for(var g in p={},e)p[g]=e[g];p.theme=o.useContext(Ge)}"string"===typeof e.className?r=Ce(t.registered,u,e.className):null!=e.className&&(r=e.className+" ");var m=Oe(h.concat(u),t.registered,p);r+=t.key+"-"+m.name,void 0!==s&&(r+=" "+s);var f=c&&void 0===l?$e(n):d,v={};for(var y in e)c&&"as"===y||f(y)&&(v[y]=e[y]);return v.className=r,i&&(v.ref=i),o.createElement(o.Fragment,null,o.createElement(Xe,{cache:t,serialized:m,isStringTag:"string"===typeof n}),o.createElement(n,v))});return f.displayName=void 0!==n?n:"Styled("+("string"===typeof a?a:a.displayName||a.name||"Component")+")",f.defaultProps=t.defaultProps,f.__emotion_real=f,f.__emotion_base=a,f.__emotion_styles=h,f.__emotion_forwardProp=l,Object.defineProperty(f,"toString",{value:function(){return"."+s}}),f.withComponent=function(t,n){return e(t,v({},i,n,{shouldForwardProp:Ze(f,n,!0)})).apply(void 0,h)},f}}.bind(null);function Qe(e,t){return qe(e,t)}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach(function(e){qe[e]=qe(e)});const Je=[];function et(e){return Je[0]=e,Oe(Je)}var tt=i(191);function it(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function nt(e){if(o.isValidElement(e)||(0,tt.Hy)(e)||!it(e))return e;const t={};return Object.keys(e).forEach(i=>{t[i]=nt(e[i])}),t}function ot(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const n=i.clone?p({},e):e;return it(e)&&it(t)&&Object.keys(t).forEach(s=>{o.isValidElement(t[s])||(0,tt.Hy)(t[s])?n[s]=t[s]:it(t[s])&&Object.prototype.hasOwnProperty.call(e,s)&&it(e[s])?n[s]=ot(e[s],t[s],i):i.clone?n[s]=it(t[s])?nt(t[s]):t[s]:n[s]=t[s]}),n}const st=["values","unit","step"];function rt(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:i="px",step:n=5}=e,o=l(e,st),s=(e=>{const t=Object.keys(e).map(t=>({key:t,val:e[t]}))||[];return t.sort((e,t)=>e.val-t.val),t.reduce((e,t)=>p(p({},e),{},{[t.key]:t.val}),{})})(t),r=Object.keys(s);function a(e){const n="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(n).concat(i,")")}function d(e){const o="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(o-n/100).concat(i,")")}function c(e,o){const s=r.indexOf(o);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==s&&"number"===typeof t[r[s]]?t[r[s]]:o)-n/100).concat(i,")")}return p({keys:r,values:s,up:a,down:d,between:c,only:function(e){return r.indexOf(e)+1<r.length?c(e,r[r.indexOf(e)+1]):a(e)},not:function(e){const t=r.indexOf(e);return 0===t?a(r[1]):t===r.length-1?d(r[t]):c(e,r[r.indexOf(e)+1]).replace("@media","@media not all and")},unit:i},o)}function at(e,t){if(!e.containerQueries)return t;const i=Object.keys(t).filter(e=>e.startsWith("@container")).sort((e,t)=>{var i,n;const o=/min-width:\s*([0-9.]+)/;return+((null===(i=e.match(o))||void 0===i?void 0:i[1])||0)-+((null===(n=t.match(o))||void 0===n?void 0:n[1])||0)});return i.length?i.reduce((e,i)=>{const n=t[i];return delete e[i],e[i]=n,e},p({},t)):t}const lt={borderRadius:4},dt={xs:0,sm:600,md:900,lg:1200,xl:1536},ct={keys:["xs","sm","md","lg","xl"],up:e=>"@media (min-width:".concat(dt[e],"px)")},ut={containerQueries:e=>({up:t=>{let i="number"===typeof t?t:dt[t]||t;return"number"===typeof i&&(i="".concat(i,"px")),e?"@container ".concat(e," (min-width:").concat(i,")"):"@container (min-width:".concat(i,")")}})};function ht(e,t,i){const n=e.theme||{};if(Array.isArray(t)){const e=n.breakpoints||ct;return t.reduce((n,o,s)=>(n[e.up(e.keys[s])]=i(t[s]),n),{})}if("object"===typeof t){const e=n.breakpoints||ct;return Object.keys(t).reduce((o,s)=>{if(function(e,t){return"@"===t||t.startsWith("@")&&(e.some(e=>t.startsWith("@".concat(e)))||!!t.match(/^@\d/))}(e.keys,s)){const e=function(e,t){const i=t.match(/^@([^/]+)?\/?(.+)?$/);if(!i)return null;const[,n,o]=i,s=Number.isNaN(+n)?n||0:+n;return e.containerQueries(o).up(s)}(n.containerQueries?n:ut,s);e&&(o[e]=i(t[s],s))}else if(Object.keys(e.values||dt).includes(s)){o[e.up(s)]=i(t[s],s)}else{const e=s;o[e]=t[e]}return o},{})}return i(t)}function pt(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null===(e=t.keys)||void 0===e?void 0:e.reduce((e,i)=>(e[t.up(i)]={},e),{}))||{}}function gt(e,t){return e.reduce((e,t)=>{const i=e[t];return(!i||0===Object.keys(i).length)&&delete e[t],e},t)}function mt(e){let{values:t,breakpoints:i,base:n}=e;const o=n||function(e,t){if("object"!==typeof e)return{};const i={},n=Object.keys(t);return Array.isArray(e)?n.forEach((t,n)=>{n<e.length&&(i[t]=!0)}):n.forEach(t=>{null!=e[t]&&(i[t]=!0)}),i}(t,i),s=Object.keys(o);if(0===s.length)return t;let r;return s.reduce((e,i,n)=>(Array.isArray(t)?(e[i]=null!=t[n]?t[n]:t[r],r=n):"object"===typeof t?(e[i]=null!=t[i]?t[i]:t[r],r=i):e[i]=t,e),{})}function ft(e){const t=new URL("https://mui.com/production-error/?code=".concat(e));for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return n.forEach(e=>t.searchParams.append("args[]",e)),"Minified MUI error #".concat(e,"; visit ").concat(t," for the full message.")}function vt(e){if("string"!==typeof e)throw new Error(ft(7));return e.charAt(0).toUpperCase()+e.slice(1)}function yt(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&i){const i="vars.".concat(t).split(".").reduce((e,t)=>e&&e[t]?e[t]:null,e);if(null!=i)return i}return t.split(".").reduce((e,t)=>e&&null!=e[t]?e[t]:null,e)}function bt(e,t,i){let n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i;return n="function"===typeof e?e(i):Array.isArray(e)?e[i]||o:yt(e,i)||o,t&&(n=t(n,o,e)),n}const xt=function(e){const{prop:t,cssProperty:i=e.prop,themeKey:n,transform:o}=e,s=e=>{if(null==e[t])return null;const s=e[t],r=yt(e.theme,n)||{};return ht(e,s,e=>{let n=bt(r,o,e);return e===n&&"string"===typeof e&&(n=bt(r,o,"".concat(t).concat("default"===e?"":vt(e)),e)),!1===i?n:{[i]:n}})};return s.propTypes={},s.filterProps=[t],s};const Ct=function(e,t){return t?ot(e,t,{clone:!1}):e};const St={m:"margin",p:"padding"},wt={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Mt={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},kt=function(e){const t={};return i=>(void 0===t[i]&&(t[i]=e(i)),t[i])}(e=>{if(e.length>2){if(!Mt[e])return[e];e=Mt[e]}const[t,i]=e.split(""),n=St[t],o=wt[i]||"";return Array.isArray(o)?o.map(e=>n+e):[n+o]}),Dt=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],It=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],At=[...Dt,...It];function Lt(e,t,i,n){var o;const s=null!==(o=yt(e,t,!0))&&void 0!==o?o:i;return"number"===typeof s||"string"===typeof s?e=>"string"===typeof e?e:"string"===typeof s?s.startsWith("var(")&&0===e?0:s.startsWith("var(")&&1===e?s:"calc(".concat(e," * ").concat(s,")"):s*e:Array.isArray(s)?e=>{if("string"===typeof e)return e;const t=Math.abs(e);const i=s[t];return e>=0?i:"number"===typeof i?-i:"string"===typeof i&&i.startsWith("var(")?"calc(-1 * ".concat(i,")"):"-".concat(i)}:"function"===typeof s?s:()=>{}}function Nt(e){return Lt(e,"spacing",8)}function Tt(e,t){return"string"===typeof t||null==t?t:e(t)}function Rt(e,t,i,n){if(!t.includes(i))return null;const o=function(e,t){return i=>e.reduce((e,n)=>(e[n]=Tt(t,i),e),{})}(kt(i),n);return ht(e,e[i],o)}function Et(e,t){const i=Nt(e.theme);return Object.keys(e).map(n=>Rt(e,t,n,i)).reduce(Ct,{})}function Pt(e){return Et(e,Dt)}function Ot(e){return Et(e,It)}function Ft(e){return Et(e,At)}Pt.propTypes={},Pt.filterProps=Dt,Ot.propTypes={},Ot.filterProps=It,Ft.propTypes={},Ft.filterProps=At;function zt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nt({spacing:e});if(e.mui)return e;const i=function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return(0===i.length?[1]:i).map(e=>{const i=t(e);return"number"===typeof i?"".concat(i,"px"):i}).join(" ")};return i.mui=!0,i}const Bt=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=t.reduce((e,t)=>(t.filterProps.forEach(i=>{e[i]=t}),e),{}),o=e=>Object.keys(e).reduce((t,i)=>n[i]?Ct(t,n[i](e)):t,{});return o.propTypes={},o.filterProps=t.reduce((e,t)=>e.concat(t.filterProps),[]),o};function Vt(e){return"number"!==typeof e?e:"".concat(e,"px solid")}function Gt(e,t){return xt({prop:e,themeKey:"borders",transform:t})}const Ht=Gt("border",Vt),jt=Gt("borderTop",Vt),Wt=Gt("borderRight",Vt),_t=Gt("borderBottom",Vt),Kt=Gt("borderLeft",Vt),Ut=Gt("borderColor"),Yt=Gt("borderTopColor"),$t=Gt("borderRightColor"),Zt=Gt("borderBottomColor"),Xt=Gt("borderLeftColor"),qt=Gt("outline",Vt),Qt=Gt("outlineColor"),Jt=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=Lt(e.theme,"shape.borderRadius",4),i=e=>({borderRadius:Tt(t,e)});return ht(e,e.borderRadius,i)}return null};Jt.propTypes={},Jt.filterProps=["borderRadius"];Bt(Ht,jt,Wt,_t,Kt,Ut,Yt,$t,Zt,Xt,Jt,qt,Qt);const ei=e=>{if(void 0!==e.gap&&null!==e.gap){const t=Lt(e.theme,"spacing",8),i=e=>({gap:Tt(t,e)});return ht(e,e.gap,i)}return null};ei.propTypes={},ei.filterProps=["gap"];const ti=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=Lt(e.theme,"spacing",8),i=e=>({columnGap:Tt(t,e)});return ht(e,e.columnGap,i)}return null};ti.propTypes={},ti.filterProps=["columnGap"];const ii=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=Lt(e.theme,"spacing",8),i=e=>({rowGap:Tt(t,e)});return ht(e,e.rowGap,i)}return null};ii.propTypes={},ii.filterProps=["rowGap"];Bt(ei,ti,ii,xt({prop:"gridColumn"}),xt({prop:"gridRow"}),xt({prop:"gridAutoFlow"}),xt({prop:"gridAutoColumns"}),xt({prop:"gridAutoRows"}),xt({prop:"gridTemplateColumns"}),xt({prop:"gridTemplateRows"}),xt({prop:"gridTemplateAreas"}),xt({prop:"gridArea"}));function ni(e,t){return"grey"===t?t:e}Bt(xt({prop:"color",themeKey:"palette",transform:ni}),xt({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:ni}),xt({prop:"backgroundColor",themeKey:"palette",transform:ni}));function oi(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}const si=xt({prop:"width",transform:oi}),ri=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var i,n;const o=(null===(i=e.theme)||void 0===i||null===(i=i.breakpoints)||void 0===i||null===(i=i.values)||void 0===i?void 0:i[t])||dt[t];return o?"px"!==(null===(n=e.theme)||void 0===n||null===(n=n.breakpoints)||void 0===n?void 0:n.unit)?{maxWidth:"".concat(o).concat(e.theme.breakpoints.unit)}:{maxWidth:o}:{maxWidth:oi(t)}};return ht(e,e.maxWidth,t)}return null};ri.filterProps=["maxWidth"];const ai=xt({prop:"minWidth",transform:oi}),li=xt({prop:"height",transform:oi}),di=xt({prop:"maxHeight",transform:oi}),ci=xt({prop:"minHeight",transform:oi}),ui=(xt({prop:"size",cssProperty:"width",transform:oi}),xt({prop:"size",cssProperty:"height",transform:oi}),Bt(si,ri,ai,li,di,ci,xt({prop:"boxSizing"})),{border:{themeKey:"borders",transform:Vt},borderTop:{themeKey:"borders",transform:Vt},borderRight:{themeKey:"borders",transform:Vt},borderBottom:{themeKey:"borders",transform:Vt},borderLeft:{themeKey:"borders",transform:Vt},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Vt},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Jt},color:{themeKey:"palette",transform:ni},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:ni},backgroundColor:{themeKey:"palette",transform:ni},p:{style:Ot},pt:{style:Ot},pr:{style:Ot},pb:{style:Ot},pl:{style:Ot},px:{style:Ot},py:{style:Ot},padding:{style:Ot},paddingTop:{style:Ot},paddingRight:{style:Ot},paddingBottom:{style:Ot},paddingLeft:{style:Ot},paddingX:{style:Ot},paddingY:{style:Ot},paddingInline:{style:Ot},paddingInlineStart:{style:Ot},paddingInlineEnd:{style:Ot},paddingBlock:{style:Ot},paddingBlockStart:{style:Ot},paddingBlockEnd:{style:Ot},m:{style:Pt},mt:{style:Pt},mr:{style:Pt},mb:{style:Pt},ml:{style:Pt},mx:{style:Pt},my:{style:Pt},margin:{style:Pt},marginTop:{style:Pt},marginRight:{style:Pt},marginBottom:{style:Pt},marginLeft:{style:Pt},marginX:{style:Pt},marginY:{style:Pt},marginInline:{style:Pt},marginInlineStart:{style:Pt},marginInlineEnd:{style:Pt},marginBlock:{style:Pt},marginBlockStart:{style:Pt},marginBlockEnd:{style:Pt},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:ei},rowGap:{style:ii},columnGap:{style:ti},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:oi},maxWidth:{style:ri},minWidth:{transform:oi},height:{transform:oi},maxHeight:{transform:oi},minHeight:{transform:oi},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});const hi=function(){function e(e,t,i,n){const o={[e]:t,theme:i},s=n[e];if(!s)return{[e]:t};const{cssProperty:r=e,themeKey:a,transform:l,style:d}=s;if(null==t)return null;if("typography"===a&&"inherit"===t)return{[e]:t};const c=yt(i,a)||{};if(d)return d(o);return ht(o,t,t=>{let i=bt(c,l,t);return t===i&&"string"===typeof t&&(i=bt(c,l,"".concat(e).concat("default"===t?"":vt(t)),t)),!1===r?i:{[r]:i}})}return function t(i){var n;const{sx:o,theme:s={},nested:r}=i||{};if(!o)return null;const a=null!==(n=s.unstable_sxConfig)&&void 0!==n?n:ui;function l(i){let n=i;if("function"===typeof i)n=i(s);else if("object"!==typeof i)return i;if(!n)return null;const o=pt(s.breakpoints),l=Object.keys(o);let d=o;return Object.keys(n).forEach(i=>{const o=function(e,t){return"function"===typeof e?e(t):e}(n[i],s);if(null!==o&&void 0!==o)if("object"===typeof o)if(a[i])d=Ct(d,e(i,o,s,a));else{const e=ht({theme:s},o,e=>({[i]:e}));!function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=t.reduce((e,t)=>e.concat(Object.keys(t)),[]),o=new Set(n);return t.every(e=>o.size===Object.keys(e).length)}(e,o)?d=Ct(d,e):d[i]=t({sx:o,theme:s,nested:!0})}else d=Ct(d,e(i,o,s,a))}),!r&&s.modularCssLayers?{"@layer sx":at(s,gt(l,d))}:at(s,gt(l,d))}return Array.isArray(o)?o.map(l):l(o)}}();hi.filterProps=["sx"];const pi=hi;function gi(e,t){const i=this;if(i.vars){var n;if(null===(n=i.colorSchemes)||void 0===n||!n[e]||"function"!==typeof i.getColorSchemeSelector)return{};let o=i.getColorSchemeSelector(e);return"&"===o?t:((o.includes("data-")||o.includes("."))&&(o="*:where(".concat(o.replace(/\s*&$/,""),") &")),{[o]:t})}return i.palette.mode===e?t:{}}const mi=["breakpoints","palette","spacing","shape"];const fi=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:i={},spacing:n,shape:o={}}=e,s=l(e,mi),r=rt(t),a=zt(n);let d=ot({breakpoints:r,direction:"ltr",components:{},palette:p({mode:"light"},i),spacing:a,shape:p(p({},lt),o)},s);d=function(e){const t=(e,t)=>e.replace("@media",t?"@container ".concat(t):"@container");function i(i,n){i.up=function(){return t(e.breakpoints.up(...arguments),n)},i.down=function(){return t(e.breakpoints.down(...arguments),n)},i.between=function(){return t(e.breakpoints.between(...arguments),n)},i.only=function(){return t(e.breakpoints.only(...arguments),n)},i.not=function(){const i=t(e.breakpoints.not(...arguments),n);return i.includes("not all and")?i.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):i}}const n={},o=e=>(i(n,e),n);return i(o),p(p({},e),{},{containerQueries:o})}(d),d.applyStyles=gi;for(var c=arguments.length,u=new Array(c>1?c-1:0),h=1;h<c;h++)u[h-1]=arguments[h];return d=u.reduce((e,t)=>ot(e,t),d),d.unstable_sxConfig=p(p({},ui),null===s||void 0===s?void 0:s.unstable_sxConfig),d.unstable_sx=function(e){return pi({sx:e,theme:this})},d},vi=["variants"];function yi(e){const{variants:t}=e,i=l(e,vi),n={variants:t,style:et(i),isProcessed:!0};return n.style===i||t&&t.forEach(e=>{"function"!==typeof e.style&&(e.style=et(e.style))}),n}const bi=["variants"],xi=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],Ci=fi();function Si(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}function wi(e,t){return t&&e&&"object"===typeof e&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles="@layer ".concat(t,"{").concat(String(e.styles),"}")),e}function Mi(e){return e?(t,i)=>i[e]:null}function ki(e,t,i){const n="function"===typeof t?t(e):t;if(Array.isArray(n))return n.flatMap(t=>ki(e,t,i));if(Array.isArray(null===n||void 0===n?void 0:n.variants)){let t;if(n.isProcessed)t=i?wi(n.style,i):n.style;else{const{variants:e}=n,o=l(n,bi);t=i?wi(et(o),i):o}return Di(e,n.variants,[t],i)}return null!==n&&void 0!==n&&n.isProcessed?i?wi(et(n.style),i):n.style:i?wi(et(n),i):n}function Di(e,t){let i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;e:for(let r=0;r<t.length;r+=1){const a=t[r];if("function"===typeof a.props){if(null!==i&&void 0!==i||(i=p(p(p({},e),e.ownerState),{},{ownerState:e.ownerState})),!a.props(i))continue}else for(const t in a.props){var s;if(e[t]!==a.props[t]&&(null===(s=e.ownerState)||void 0===s?void 0:s[t])!==a.props[t])continue e}"function"===typeof a.style?(null!==i&&void 0!==i||(i=p(p(p({},e),e.ownerState),{},{ownerState:e.ownerState})),n.push(o?wi(et(a.style(i)),o):a.style(i))):n.push(o?wi(et(a.style),o):a.style)}return n}function Ii(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:i=Ci,rootShouldForwardProp:n=Si,slotShouldForwardProp:o=Si}=e;function s(e){!function(e,t,i){e.theme=function(e){for(const t in e)return!1;return!0}(e.theme)?i:e.theme[t]||e.theme}(e,t,i)}return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}(e,e=>e.filter(e=>e!==pi));const{name:i,slot:r,skipVariantsResolver:a,skipSx:d,overridesResolver:c=Mi(Li(r))}=t,u=l(t,xi),h=i&&i.startsWith("Mui")||r?"components":"custom",g=void 0!==a?a:r&&"Root"!==r&&"root"!==r||!1,m=d||!1;let f=Si;"Root"===r||"root"===r?f=n:r?f=o:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(f=void 0);const v=Qe(e,p({shouldForwardProp:f,label:Ai(i,r)},u)),y=e=>{if(e.__emotion_real===e)return e;if("function"===typeof e)return function(t){return ki(t,e,t.theme.modularCssLayers?h:void 0)};if(it(e)){const t=yi(e);return function(e){return t.variants?ki(e,t,e.theme.modularCssLayers?h:void 0):e.theme.modularCssLayers?wi(t.style,h):t.style}}return e},b=function(){const t=[];for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];const a=o.map(y),l=[];if(t.push(s),i&&c&&l.push(function(e){var t;const n=null===(t=e.theme.components)||void 0===t||null===(t=t[i])||void 0===t?void 0:t.styleOverrides;if(!n)return null;const o={};for(const i in n)o[i]=ki(e,n[i],e.theme.modularCssLayers?"theme":void 0);return c(e,o)}),i&&!g&&l.push(function(e){var t;const n=e.theme,o=null===n||void 0===n||null===(t=n.components)||void 0===t||null===(t=t[i])||void 0===t?void 0:t.variants;return o?Di(e,o,[],e.theme.modularCssLayers?"theme":void 0):null}),m||l.push(pi),Array.isArray(a[0])){const e=a.shift(),i=new Array(t.length).fill(""),n=new Array(l.length).fill("");let o;o=[...i,...e,...n],o.raw=[...i,...e.raw,...n],t.unshift(o)}const d=[...t,...a,...l],u=v(...d);return e.muiName&&(u.muiName=e.muiName),u};return v.withConfig&&(b.withConfig=v.withConfig),b}}function Ai(e,t){}function Li(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}const Ni=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,i))};function Ti(e){return Ni(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)}function Ri(e){if(e.type)return e;if("#"===e.charAt(0))return Ri(function(e){e=e.slice(1);const t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g");let i=e.match(t);return i&&1===i[0].length&&(i=i.map(e=>e+e)),i?"rgb".concat(4===i.length?"a":"","(").concat(i.map((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3).join(", "),")"):""}(e));const t=e.indexOf("("),i=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(i))throw new Error(ft(9,e));let n,o=e.substring(t+1,e.length-1);if("color"===i){if(o=o.split(" "),n=o.shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(n))throw new Error(ft(10,n))}else o=o.split(",");return o=o.map(e=>parseFloat(e)),{type:i,values:o,colorSpace:n}}const Ei=(e,t)=>{try{return(e=>{const t=Ri(e);return t.values.slice(0,3).map((e,i)=>t.type.includes("hsl")&&0!==i?"".concat(e,"%"):e).join(" ")})(e)}catch(Ur){return e}};function Pi(e){const{type:t,colorSpace:i}=e;let{values:n}=e;return t.includes("rgb")?n=n.map((e,t)=>t<3?parseInt(e,10):e):t.includes("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),n=t.includes("color")?"".concat(i," ").concat(n.join(" ")):"".concat(n.join(", ")),"".concat(t,"(").concat(n,")")}function Oi(e){e=Ri(e);const{values:t}=e,i=t[0],n=t[1]/100,o=t[2]/100,s=n*Math.min(o,1-o),r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+i/30)%12;return o-s*Math.max(Math.min(t-3,9-t,1),-1)};let a="rgb";const l=[Math.round(255*r(0)),Math.round(255*r(8)),Math.round(255*r(4))];return"hsla"===e.type&&(a+="a",l.push(t[3])),Pi({type:a,values:l})}function Fi(e){let t="hsl"===(e=Ri(e)).type||"hsla"===e.type?Ri(Oi(e)).values:e.values;return t=t.map(t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function zi(e,t){return e=Ri(e),t=Ti(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,Pi(e)}function Bi(e,t,i){try{return zi(e,t)}catch(Ur){return e}}function Vi(e,t){if(e=Ri(e),t=Ti(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let i=0;i<3;i+=1)e.values[i]*=1-t;return Pi(e)}function Gi(e,t,i){try{return Vi(e,t)}catch(Ur){return e}}function Hi(e,t){if(e=Ri(e),t=Ti(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let i=0;i<3;i+=1)e.values[i]+=(255-e.values[i])*t;else if(e.type.includes("color"))for(let i=0;i<3;i+=1)e.values[i]+=(1-e.values[i])*t;return Pi(e)}function ji(e,t,i){try{return Hi(e,t)}catch(Ur){return e}}function Wi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return Fi(e)>.5?Vi(e,t):Hi(e,t)}function _i(e,t,i){try{return Wi(e,t)}catch(Ur){return e}}const Ki={black:"#000",white:"#fff"},Ui={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Yi={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},$i={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Zi={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Xi={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},qi={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Qi={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Ji=["mode","contrastThreshold","tonalOffset","colorSpace"];function en(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Ki.white,default:Ki.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const tn=en();function nn(){return{text:{primary:Ki.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Ki.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const on=nn();function sn(e,t,i,n){const o=n.light||n,s=n.dark||1.5*n;e[t]||(e.hasOwnProperty(i)?e[t]=e[i]:"light"===t?e.light=Hi(e.main,o):"dark"===t&&(e.dark=Vi(e.main,s)))}function rn(e,t,i,n,o){const s=o.light||o,r=o.dark||1.5*o;t[i]||(t.hasOwnProperty(n)?t[i]=t[n]:"light"===i?t.light="color-mix(in ".concat(e,", ").concat(t.main,", #fff ").concat((100*s).toFixed(0),"%)"):"dark"===i&&(t.dark="color-mix(in ".concat(e,", ").concat(t.main,", #000 ").concat((100*r).toFixed(0),"%)")))}function an(e){const{mode:t="light",contrastThreshold:i=3,tonalOffset:n=.2,colorSpace:o}=e,s=l(e,Ji),r=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Xi[200],light:Xi[50],dark:Xi[400]}:{main:Xi[700],light:Xi[400],dark:Xi[800]}}(t),a=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Yi[200],light:Yi[50],dark:Yi[400]}:{main:Yi[500],light:Yi[300],dark:Yi[700]}}(t),d=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:$i[500],light:$i[300],dark:$i[700]}:{main:$i[700],light:$i[400],dark:$i[800]}}(t),c=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:qi[400],light:qi[300],dark:qi[700]}:{main:qi[700],light:qi[500],dark:qi[900]}}(t),u=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Qi[400],light:Qi[300],dark:Qi[700]}:{main:Qi[800],light:Qi[500],dark:Qi[900]}}(t),h=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Zi[400],light:Zi[300],dark:Zi[700]}:{main:"#ed6c02",light:Zi[500],dark:Zi[900]}}(t);function g(e){if(o)return function(e){return"oklch(from ".concat(e," var(--__l) 0 h / var(--__a))")}(e);const t=function(e,t){const i=Fi(e),n=Fi(t);return(Math.max(i,n)+.05)/(Math.min(i,n)+.05)}(e,on.text.primary)>=i?on.text.primary:tn.text.primary;return t}const m=e=>{let{color:t,name:i,mainShade:s=500,lightShade:r=300,darkShade:a=700}=e;if(t=p({},t),!t.main&&t[s]&&(t.main=t[s]),!t.hasOwnProperty("main"))throw new Error(ft(11,i?" (".concat(i,")"):"",s));if("string"!==typeof t.main)throw new Error(ft(12,i?" (".concat(i,")"):"",JSON.stringify(t.main)));return o?(rn(o,t,"light",r,n),rn(o,t,"dark",a,n)):(sn(t,"light",r,n),sn(t,"dark",a,n)),t.contrastText||(t.contrastText=g(t.main)),t};let f;"light"===t?f=en():"dark"===t&&(f=nn());return ot(p({common:p({},Ki),mode:t,primary:m({color:r,name:"primary"}),secondary:m({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:m({color:d,name:"error"}),warning:m({color:h,name:"warning"}),info:m({color:c,name:"info"}),success:m({color:u,name:"success"}),grey:Ui,contrastThreshold:i,getContrastText:g,augmentColor:m,tonalOffset:n},f),s)}function ln(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";function t(){for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];if(!n.length)return"";const s=n[0];return"string"!==typeof s||s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?", ".concat(s):", var(--".concat(e?"".concat(e,"-"):"").concat(s).concat(t(...n.slice(1)),")")}return function(i){for(var n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];return"var(--".concat(e?"".concat(e,"-"):"").concat(i).concat(t(...o),")")}}function dn(e){const t={};return Object.entries(e).forEach(e=>{const[i,n]=e;"object"===typeof n&&(t[i]="".concat(n.fontStyle?"".concat(n.fontStyle," "):"").concat(n.fontVariant?"".concat(n.fontVariant," "):"").concat(n.fontWeight?"".concat(n.fontWeight," "):"").concat(n.fontStretch?"".concat(n.fontStretch," "):"").concat(n.fontSize||"").concat(n.lineHeight?"/".concat(n.lineHeight," "):"").concat(n.fontFamily||""))}),t}const cn=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=e;t.forEach((e,s)=>{s===t.length-1?Array.isArray(o)?o[Number(e)]=i:o&&"object"===typeof o&&(o[e]=i):o&&"object"===typeof o&&(o[e]||(o[e]=n.includes(e)?[]:{}),o=o[e])})};function un(e,t){const{prefix:i,shouldSkipGeneratingVar:n}=t||{},o={},s={},r={};return((e,t,i)=>{!function e(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object.entries(n).forEach(n=>{let[r,a]=n;(!i||i&&!i([...o,r]))&&void 0!==a&&null!==a&&("object"===typeof a&&Object.keys(a).length>0?e(a,[...o,r],Array.isArray(a)?[...s,r]:s):t([...o,r],a,s))})}(e)})(e,(e,t,a)=>{if(("string"===typeof t||"number"===typeof t)&&(!n||!n(e,t))){const n="--".concat(i?"".concat(i,"-"):"").concat(e.join("-")),l=((e,t)=>{if("number"===typeof t)return["lineHeight","fontWeight","opacity","zIndex"].some(t=>e.includes(t))||e[e.length-1].toLowerCase().includes("opacity")?t:"".concat(t,"px");return t})(e,t);Object.assign(o,{[n]:l}),cn(s,e,"var(".concat(n,")"),a),cn(r,e,"var(".concat(n,", ").concat(l,")"),a)}},e=>"vars"===e[0]),{css:o,vars:s,varsWithDefaults:r}}const hn=["colorSchemes","components","defaultColorScheme"];const pn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{getSelector:i=x,disableCssColorScheme:n,colorSchemeSelector:o,enableContrastVars:s}=t,{colorSchemes:r={},components:a,defaultColorScheme:d="light"}=e,u=l(e,hn),{vars:h,css:g,varsWithDefaults:m}=un(u,t);let f=m;const v={},{[d]:y}=r,b=l(r,[d].map(c));if(Object.entries(b||{}).forEach(e=>{let[i,n]=e;const{vars:o,css:s,varsWithDefaults:r}=un(n,t);f=ot(f,r),v[i]={css:s,vars:o}}),y){const{css:e,vars:i,varsWithDefaults:n}=un(y,t);f=ot(f,n),v[d]={css:e,vars:i}}function x(t,i){let n=o;if("class"===o&&(n=".%s"),"data"===o&&(n="[data-%s]"),null!==o&&void 0!==o&&o.startsWith("data-")&&!o.includes("%s")&&(n="[".concat(o,'="%s"]')),t){if("media"===n){var s;if(e.defaultColorScheme===t)return":root";const n=(null===(s=r[t])||void 0===s||null===(s=s.palette)||void 0===s?void 0:s.mode)||t;return{["@media (prefers-color-scheme: ".concat(n,")")]:{":root":i}}}if(n)return e.defaultColorScheme===t?":root, ".concat(n.replace("%s",String(t))):n.replace("%s",String(t))}return":root"}return{vars:f,generateThemeVars:()=>{let e=p({},h);return Object.entries(v).forEach(t=>{let[,{vars:i}]=t;e=ot(e,i)}),e},generateStyleSheets:()=>{const t=[],o=e.defaultColorScheme||"light";function a(e,i){Object.keys(i).length&&t.push("string"===typeof e?{[e]:p({},i)}:e)}a(i(void 0,p({},g)),g);const{[o]:d}=v,u=l(v,[o].map(c));if(d){var h;const{css:e}=d,t=null===(h=r[o])||void 0===h||null===(h=h.palette)||void 0===h?void 0:h.mode,s=p(!n&&t?{colorScheme:t}:{},e);a(i(o,p({},s)),s)}return Object.entries(u).forEach(e=>{var t;let[o,{css:s}]=e;const l=null===(t=r[o])||void 0===t||null===(t=t.palette)||void 0===t?void 0:t.mode,d=p(!n&&l?{colorScheme:l}:{},s);a(i(o,p({},d)),d)}),s&&t.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),t}}};function gn(e,t){return p({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const mn=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const fn={textTransform:"uppercase"},vn='"Roboto", "Helvetica", "Arial", sans-serif';function yn(e,t){const i="function"===typeof t?t(e):t,{fontFamily:n=vn,fontSize:o=14,fontWeightLight:s=300,fontWeightRegular:r=400,fontWeightMedium:a=500,fontWeightBold:d=700,htmlFontSize:c=16,allVariants:u,pxToRem:h}=i,g=l(i,mn);const m=o/14,f=h||(e=>"".concat(e/c*m,"rem")),v=(e,t,i,o,s)=>{return p(p(p({fontFamily:n,fontWeight:e,fontSize:f(t),lineHeight:i},n===vn?{letterSpacing:"".concat((r=o/t,Math.round(1e5*r)/1e5),"em")}:{}),s),u);var r},y={h1:v(s,96,1.167,-1.5),h2:v(s,60,1.2,-.5),h3:v(r,48,1.167,0),h4:v(r,34,1.235,.25),h5:v(r,24,1.334,0),h6:v(a,20,1.6,.15),subtitle1:v(r,16,1.75,.15),subtitle2:v(a,14,1.57,.1),body1:v(r,16,1.5,.15),body2:v(r,14,1.43,.15),button:v(a,14,1.75,.4,fn),caption:v(r,12,1.66,.4),overline:v(r,12,2.66,1,fn),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ot(p({htmlFontSize:c,pxToRem:f,fontFamily:n,fontSize:o,fontWeightLight:s,fontWeightRegular:r,fontWeightMedium:a,fontWeightBold:d},y),g,{clone:!1})}function bn(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const xn=["none",bn(0,2,1,-1,0,1,1,0,0,1,3,0),bn(0,3,1,-2,0,2,2,0,0,1,5,0),bn(0,3,3,-2,0,3,4,0,0,1,8,0),bn(0,2,4,-1,0,4,5,0,0,1,10,0),bn(0,3,5,-1,0,5,8,0,0,1,14,0),bn(0,3,5,-1,0,6,10,0,0,1,18,0),bn(0,4,5,-2,0,7,10,1,0,2,16,1),bn(0,5,5,-3,0,8,10,1,0,3,14,2),bn(0,5,6,-3,0,9,12,1,0,3,16,2),bn(0,6,6,-3,0,10,14,1,0,4,18,3),bn(0,6,7,-4,0,11,15,1,0,4,20,3),bn(0,7,8,-4,0,12,17,2,0,5,22,4),bn(0,7,8,-4,0,13,19,2,0,5,24,4),bn(0,7,9,-4,0,14,21,2,0,5,26,4),bn(0,8,9,-5,0,15,22,2,0,6,28,5),bn(0,8,10,-5,0,16,24,2,0,6,30,5),bn(0,8,11,-5,0,17,26,2,0,6,32,5),bn(0,9,11,-5,0,18,28,2,0,7,34,6),bn(0,9,12,-6,0,19,29,2,0,7,36,6),bn(0,10,13,-6,0,20,31,3,0,8,38,7),bn(0,10,13,-6,0,21,33,3,0,8,40,7),bn(0,10,14,-6,0,22,35,3,0,8,42,7),bn(0,11,14,-7,0,23,36,3,0,9,44,8),bn(0,11,15,-7,0,24,38,3,0,9,46,8)],Cn=["duration","easing","delay"],Sn={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},wn={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Mn(e){return"".concat(Math.round(e),"ms")}function kn(e){if(!e)return 0;const t=e/36;return Math.min(Math.round(10*(4+15*t**.25+t/5)),3e3)}function Dn(e){const t=p(p({},Sn),e.easing),i=p(p({},wn),e.duration);return p(p({getAutoHeightDuration:kn,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:o=i.standard,easing:s=t.easeInOut,delay:r=0}=n;l(n,Cn);return(Array.isArray(e)?e:[e]).map(e=>"".concat(e," ").concat("string"===typeof o?o:Mn(o)," ").concat(s," ").concat("string"===typeof r?r:Mn(r))).join(",")}},e),{},{easing:t,duration:i})}const In={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function An(e){return it(e)||"undefined"===typeof e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)}function Ln(){const e=p({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return function e(t){const i=Object.entries(t);for(let n=0;n<i.length;n++){const[o,s]=i[n];!An(s)||o.startsWith("unstable_")?delete t[o]:it(s)&&(t[o]=p({},s),e(t[o]))}}(e),"import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';\n\nconst theme = ".concat(JSON.stringify(e,null,2),";\n\ntheme.breakpoints = createBreakpoints(theme.breakpoints || {});\ntheme.transitions = createTransitions(theme.transitions || {});\n\nexport default theme;")}const Nn=["breakpoints","mixins","spacing","palette","transitions","typography","shape","colorSpace"];function Tn(e){return"number"===typeof e?"".concat((100*e).toFixed(0),"%"):"calc((".concat(e,") * 100%)")}function Rn(e){Object.assign(e,{alpha(t,i){const n=this||e;return n.colorSpace?"oklch(from ".concat(t," l c h / ").concat("string"===typeof i?"calc(".concat(i,")"):i,")"):n.vars?"rgba(".concat(t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")," / ").concat("string"===typeof i?"calc(".concat(i,")"):i,")"):zi(t,(e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let i=0;for(let n=0;n<t.length;n+=1)i+=+t[n];return i})(i))},lighten(t,i){const n=this||e;return n.colorSpace?"color-mix(in ".concat(n.colorSpace,", ").concat(t,", #fff ").concat(Tn(i),")"):Hi(t,i)},darken(t,i){const n=this||e;return n.colorSpace?"color-mix(in ".concat(n.colorSpace,", ").concat(t,", #000 ").concat(Tn(i),")"):Vi(t,i)}})}const En=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t,mixins:i={},spacing:n,palette:o={},transitions:s={},typography:r={},shape:a,colorSpace:d}=e,c=l(e,Nn);if(e.vars&&void 0===e.generateThemeVars)throw new Error(ft(20));const u=an(p(p({},o),{},{colorSpace:d})),h=fi(e);let g=ot(h,{mixins:gn(h.breakpoints,i),palette:u,shadows:xn.slice(),typography:yn(u,r),transitions:Dn(s),zIndex:p({},In)});g=ot(g,c);for(var m=arguments.length,f=new Array(m>1?m-1:0),v=1;v<m;v++)f[v-1]=arguments[v];return g=f.reduce((e,t)=>ot(e,t),g),g.unstable_sxConfig=p(p({},ui),null===c||void 0===c?void 0:c.unstable_sxConfig),g.unstable_sx=function(e){return pi({sx:e,theme:this})},g.toRuntimeSource=Ln,Rn(g),g};function Pn(e){let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,Math.round(10*t)/1e3}const On=["palette","opacity","overlays","colorSpace"],Fn=[...Array(25)].map((e,t)=>{if(0===t)return"none";const i=Pn(t);return"linear-gradient(rgba(255 255 255 / ".concat(i,"), rgba(255 255 255 / ").concat(i,"))")});function zn(e){return{inputPlaceholder:"dark"===e?.5:.42,inputUnderline:"dark"===e?.7:.42,switchTrackDisabled:"dark"===e?.2:.12,switchTrack:"dark"===e?.3:.38}}function Bn(e){return"dark"===e?Fn:[]}function Vn(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||"palette"===e[0]&&!(null===(t=e[1])||void 0===t||!t.match(/(mode|contrastThreshold|tonalOffset)/))}const Gn=e=>[...[...Array(25)].map((t,i)=>"--".concat(e?"".concat(e,"-"):"","overlays-").concat(i)),"--".concat(e?"".concat(e,"-"):"","palette-AppBar-darkBg"),"--".concat(e?"".concat(e,"-"):"","palette-AppBar-darkColor")],Hn=e=>(t,i)=>{const n=e.rootSelector||":root",o=e.colorSchemeSelector;let s=o;if("class"===o&&(s=".%s"),"data"===o&&(s="[data-%s]"),null!==o&&void 0!==o&&o.startsWith("data-")&&!o.includes("%s")&&(s="[".concat(o,'="%s"]')),e.defaultColorScheme===t){if("dark"===t){const o={};return Gn(e.cssVarPrefix).forEach(e=>{o[e]=i[e],delete i[e]}),"media"===s?{[n]:i,"@media (prefers-color-scheme: dark)":{[n]:o}}:s?{[s.replace("%s",t)]:o,["".concat(n,", ").concat(s.replace("%s",t))]:i}:{[n]:p(p({},i),o)}}if(s&&"media"!==s)return"".concat(n,", ").concat(s.replace("%s",String(t)))}else if(t){if("media"===s)return{["@media (prefers-color-scheme: ".concat(String(t),")")]:{[n]:i}};if(s)return s.replace("%s",String(t))}return n},jn=["palette"],Wn=["colorSchemes","defaultColorScheme","disableCssColorScheme","cssVarPrefix","nativeColor","shouldSkipGeneratingVar","colorSchemeSelector","rootSelector"];function _n(e,t,i){!e[t]&&i&&(e[t]=i)}function Kn(e){return"string"===typeof e&&e.startsWith("hsl")?Oi(e):e}function Un(e,t){"".concat(t,"Channel")in e||(e["".concat(t,"Channel")]=Ei(Kn(e[t]),("MUI: Can't create `palette.".concat(t,"Channel` because `palette.").concat(t,"` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()."),"To suppress this warning, you need to explicitly provide the `palette.".concat(t,'Channel` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.'))))}const Yn=e=>{try{return e()}catch(Ur){}};function $n(e,t,i,n,o){var s,r,a;if(!i)return;i=!0===i?{}:i;const d="dark"===o?"dark":"light";var c;if(!n)return void(t[o]=function(e){const{palette:t={mode:"light"},opacity:i,overlays:n,colorSpace:o}=e,s=l(e,On),r=an(p(p({},t),{},{colorSpace:o}));return p({palette:r,opacity:p(p({},zn(r.mode)),i),overlays:n||Bn(r.mode)},s)}(p(p({},i),{},{palette:p({mode:d},null===(c=i)||void 0===c?void 0:c.palette),colorSpace:e})));const u=En(p(p({},n),{},{palette:p({mode:d},null===(s=i)||void 0===s?void 0:s.palette),colorSpace:e})),{palette:h}=u,g=l(u,jn);return t[o]=p(p({},i),{},{palette:h,opacity:p(p({},zn(d)),null===(r=i)||void 0===r?void 0:r.opacity),overlays:(null===(a=i)||void 0===a?void 0:a.overlays)||Bn(d)}),g}function Zn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{colorSchemes:t={light:!0},defaultColorScheme:i,disableCssColorScheme:n=!1,cssVarPrefix:o="mui",nativeColor:s=!1,shouldSkipGeneratingVar:r=Vn,colorSchemeSelector:a=(t.light&&t.dark?"media":void 0),rootSelector:d=":root"}=e,u=l(e,Wn),h=Object.keys(t)[0],g=i||(t.light&&"light"!==h?"light":h),m=function(){return ln(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mui")}(o),{[g]:f,light:v,dark:y}=t,b=p({},l(t,[g,"light","dark"].map(c)));let x,C=f;if(("dark"===g&&!("dark"in t)||"light"===g&&!("light"in t))&&(C=!0),!C)throw new Error(ft(21,g));s&&(x="oklch");const S=$n(x,b,C,u,g);v&&!b.light&&$n(x,b,v,void 0,"light"),y&&!b.dark&&$n(x,b,y,void 0,"dark");let w=p(p({defaultColorScheme:g},S),{},{cssVarPrefix:o,colorSchemeSelector:a,rootSelector:d,getCssVar:m,colorSchemes:b,font:p(p({},dn(S.typography)),S.font),spacing:(M=u.spacing,"number"===typeof M?"".concat(M,"px"):"string"===typeof M||"function"===typeof M||Array.isArray(M)?M:"8px")});var M;Object.keys(w.colorSchemes).forEach(e=>{const t=w.colorSchemes[e].palette,i=e=>{const i=e.split("-"),n=i[1],o=i[2];return m(e,t[n][o])};function n(e,t,i){if(x){let n;return e===Bi&&(n="transparent ".concat((100*(1-i)).toFixed(0),"%")),e===Gi&&(n="#000 ".concat((100*i).toFixed(0),"%")),e===ji&&(n="#fff ".concat((100*i).toFixed(0),"%")),"color-mix(in ".concat(x,", ").concat(t,", ").concat(n,")")}return e(t,i)}var o;if("light"===t.mode&&(_n(t.common,"background","#fff"),_n(t.common,"onBackground","#000")),"dark"===t.mode&&(_n(t.common,"background","#000"),_n(t.common,"onBackground","#fff")),o=t,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"].forEach(e=>{o[e]||(o[e]={})}),"light"===t.mode){_n(t.Alert,"errorColor",n(Gi,t.error.light,.6)),_n(t.Alert,"infoColor",n(Gi,t.info.light,.6)),_n(t.Alert,"successColor",n(Gi,t.success.light,.6)),_n(t.Alert,"warningColor",n(Gi,t.warning.light,.6)),_n(t.Alert,"errorFilledBg",i("palette-error-main")),_n(t.Alert,"infoFilledBg",i("palette-info-main")),_n(t.Alert,"successFilledBg",i("palette-success-main")),_n(t.Alert,"warningFilledBg",i("palette-warning-main")),_n(t.Alert,"errorFilledColor",Yn(()=>t.getContrastText(t.error.main))),_n(t.Alert,"infoFilledColor",Yn(()=>t.getContrastText(t.info.main))),_n(t.Alert,"successFilledColor",Yn(()=>t.getContrastText(t.success.main))),_n(t.Alert,"warningFilledColor",Yn(()=>t.getContrastText(t.warning.main))),_n(t.Alert,"errorStandardBg",n(ji,t.error.light,.9)),_n(t.Alert,"infoStandardBg",n(ji,t.info.light,.9)),_n(t.Alert,"successStandardBg",n(ji,t.success.light,.9)),_n(t.Alert,"warningStandardBg",n(ji,t.warning.light,.9)),_n(t.Alert,"errorIconColor",i("palette-error-main")),_n(t.Alert,"infoIconColor",i("palette-info-main")),_n(t.Alert,"successIconColor",i("palette-success-main")),_n(t.Alert,"warningIconColor",i("palette-warning-main")),_n(t.AppBar,"defaultBg",i("palette-grey-100")),_n(t.Avatar,"defaultBg",i("palette-grey-400")),_n(t.Button,"inheritContainedBg",i("palette-grey-300")),_n(t.Button,"inheritContainedHoverBg",i("palette-grey-A100")),_n(t.Chip,"defaultBorder",i("palette-grey-400")),_n(t.Chip,"defaultAvatarColor",i("palette-grey-700")),_n(t.Chip,"defaultIconColor",i("palette-grey-700")),_n(t.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),_n(t.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),_n(t.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),_n(t.LinearProgress,"primaryBg",n(ji,t.primary.main,.62)),_n(t.LinearProgress,"secondaryBg",n(ji,t.secondary.main,.62)),_n(t.LinearProgress,"errorBg",n(ji,t.error.main,.62)),_n(t.LinearProgress,"infoBg",n(ji,t.info.main,.62)),_n(t.LinearProgress,"successBg",n(ji,t.success.main,.62)),_n(t.LinearProgress,"warningBg",n(ji,t.warning.main,.62)),_n(t.Skeleton,"bg",x?n(Bi,t.text.primary,.11):"rgba(".concat(i("palette-text-primaryChannel")," / 0.11)")),_n(t.Slider,"primaryTrack",n(ji,t.primary.main,.62)),_n(t.Slider,"secondaryTrack",n(ji,t.secondary.main,.62)),_n(t.Slider,"errorTrack",n(ji,t.error.main,.62)),_n(t.Slider,"infoTrack",n(ji,t.info.main,.62)),_n(t.Slider,"successTrack",n(ji,t.success.main,.62)),_n(t.Slider,"warningTrack",n(ji,t.warning.main,.62));const e=x?n(Gi,t.background.default,.6825):_i(t.background.default,.8);_n(t.SnackbarContent,"bg",e),_n(t.SnackbarContent,"color",Yn(()=>x?on.text.primary:t.getContrastText(e))),_n(t.SpeedDialAction,"fabHoverBg",_i(t.background.paper,.15)),_n(t.StepConnector,"border",i("palette-grey-400")),_n(t.StepContent,"border",i("palette-grey-400")),_n(t.Switch,"defaultColor",i("palette-common-white")),_n(t.Switch,"defaultDisabledColor",i("palette-grey-100")),_n(t.Switch,"primaryDisabledColor",n(ji,t.primary.main,.62)),_n(t.Switch,"secondaryDisabledColor",n(ji,t.secondary.main,.62)),_n(t.Switch,"errorDisabledColor",n(ji,t.error.main,.62)),_n(t.Switch,"infoDisabledColor",n(ji,t.info.main,.62)),_n(t.Switch,"successDisabledColor",n(ji,t.success.main,.62)),_n(t.Switch,"warningDisabledColor",n(ji,t.warning.main,.62)),_n(t.TableCell,"border",n(ji,n(Bi,t.divider,1),.88)),_n(t.Tooltip,"bg",n(Bi,t.grey[700],.92))}if("dark"===t.mode){_n(t.Alert,"errorColor",n(ji,t.error.light,.6)),_n(t.Alert,"infoColor",n(ji,t.info.light,.6)),_n(t.Alert,"successColor",n(ji,t.success.light,.6)),_n(t.Alert,"warningColor",n(ji,t.warning.light,.6)),_n(t.Alert,"errorFilledBg",i("palette-error-dark")),_n(t.Alert,"infoFilledBg",i("palette-info-dark")),_n(t.Alert,"successFilledBg",i("palette-success-dark")),_n(t.Alert,"warningFilledBg",i("palette-warning-dark")),_n(t.Alert,"errorFilledColor",Yn(()=>t.getContrastText(t.error.dark))),_n(t.Alert,"infoFilledColor",Yn(()=>t.getContrastText(t.info.dark))),_n(t.Alert,"successFilledColor",Yn(()=>t.getContrastText(t.success.dark))),_n(t.Alert,"warningFilledColor",Yn(()=>t.getContrastText(t.warning.dark))),_n(t.Alert,"errorStandardBg",n(Gi,t.error.light,.9)),_n(t.Alert,"infoStandardBg",n(Gi,t.info.light,.9)),_n(t.Alert,"successStandardBg",n(Gi,t.success.light,.9)),_n(t.Alert,"warningStandardBg",n(Gi,t.warning.light,.9)),_n(t.Alert,"errorIconColor",i("palette-error-main")),_n(t.Alert,"infoIconColor",i("palette-info-main")),_n(t.Alert,"successIconColor",i("palette-success-main")),_n(t.Alert,"warningIconColor",i("palette-warning-main")),_n(t.AppBar,"defaultBg",i("palette-grey-900")),_n(t.AppBar,"darkBg",i("palette-background-paper")),_n(t.AppBar,"darkColor",i("palette-text-primary")),_n(t.Avatar,"defaultBg",i("palette-grey-600")),_n(t.Button,"inheritContainedBg",i("palette-grey-800")),_n(t.Button,"inheritContainedHoverBg",i("palette-grey-700")),_n(t.Chip,"defaultBorder",i("palette-grey-700")),_n(t.Chip,"defaultAvatarColor",i("palette-grey-300")),_n(t.Chip,"defaultIconColor",i("palette-grey-300")),_n(t.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),_n(t.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),_n(t.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),_n(t.LinearProgress,"primaryBg",n(Gi,t.primary.main,.5)),_n(t.LinearProgress,"secondaryBg",n(Gi,t.secondary.main,.5)),_n(t.LinearProgress,"errorBg",n(Gi,t.error.main,.5)),_n(t.LinearProgress,"infoBg",n(Gi,t.info.main,.5)),_n(t.LinearProgress,"successBg",n(Gi,t.success.main,.5)),_n(t.LinearProgress,"warningBg",n(Gi,t.warning.main,.5)),_n(t.Skeleton,"bg",x?n(Bi,t.text.primary,.13):"rgba(".concat(i("palette-text-primaryChannel")," / 0.13)")),_n(t.Slider,"primaryTrack",n(Gi,t.primary.main,.5)),_n(t.Slider,"secondaryTrack",n(Gi,t.secondary.main,.5)),_n(t.Slider,"errorTrack",n(Gi,t.error.main,.5)),_n(t.Slider,"infoTrack",n(Gi,t.info.main,.5)),_n(t.Slider,"successTrack",n(Gi,t.success.main,.5)),_n(t.Slider,"warningTrack",n(Gi,t.warning.main,.5));const e=x?n(ji,t.background.default,.985):_i(t.background.default,.98);_n(t.SnackbarContent,"bg",e),_n(t.SnackbarContent,"color",Yn(()=>x?tn.text.primary:t.getContrastText(e))),_n(t.SpeedDialAction,"fabHoverBg",_i(t.background.paper,.15)),_n(t.StepConnector,"border",i("palette-grey-600")),_n(t.StepContent,"border",i("palette-grey-600")),_n(t.Switch,"defaultColor",i("palette-grey-300")),_n(t.Switch,"defaultDisabledColor",i("palette-grey-600")),_n(t.Switch,"primaryDisabledColor",n(Gi,t.primary.main,.55)),_n(t.Switch,"secondaryDisabledColor",n(Gi,t.secondary.main,.55)),_n(t.Switch,"errorDisabledColor",n(Gi,t.error.main,.55)),_n(t.Switch,"infoDisabledColor",n(Gi,t.info.main,.55)),_n(t.Switch,"successDisabledColor",n(Gi,t.success.main,.55)),_n(t.Switch,"warningDisabledColor",n(Gi,t.warning.main,.55)),_n(t.TableCell,"border",n(Gi,n(Bi,t.divider,1),.68)),_n(t.Tooltip,"bg",n(Bi,t.grey[700],.92))}Un(t.background,"default"),Un(t.background,"paper"),Un(t.common,"background"),Un(t.common,"onBackground"),Un(t,"divider"),Object.keys(t).forEach(e=>{const i=t[e];"tonalOffset"!==e&&i&&"object"===typeof i&&(i.main&&_n(t[e],"mainChannel",Ei(Kn(i.main))),i.light&&_n(t[e],"lightChannel",Ei(Kn(i.light))),i.dark&&_n(t[e],"darkChannel",Ei(Kn(i.dark))),i.contrastText&&_n(t[e],"contrastTextChannel",Ei(Kn(i.contrastText))),"text"===e&&(Un(t[e],"primary"),Un(t[e],"secondary")),"action"===e&&(i.active&&Un(t[e],"active"),i.selected&&Un(t[e],"selected")))})});for(var k=arguments.length,D=new Array(k>1?k-1:0),I=1;I<k;I++)D[I-1]=arguments[I];w=D.reduce((e,t)=>ot(e,t),w);const A={prefix:o,disableCssColorScheme:n,shouldSkipGeneratingVar:r,getSelector:Hn(w),enableContrastVars:s},{vars:L,generateThemeVars:N,generateStyleSheets:T}=pn(w,A);return w.vars=L,Object.entries(w.colorSchemes[w.defaultColorScheme]).forEach(e=>{let[t,i]=e;w[t]=i}),w.generateThemeVars=N,w.generateStyleSheets=T,w.generateSpacing=function(){return zt(u.spacing,Nt(this))},w.getColorSchemeSelector=function(e){return function(t){return"media"===e?"@media (prefers-color-scheme: ".concat(t,")"):e?e.startsWith("data-")&&!e.includes("%s")?"[".concat(e,'="').concat(t,'"] &'):"class"===e?".".concat(t," &"):"data"===e?"[data-".concat(t,"] &"):"".concat(e.replace("%s",t)," &"):"&"}}(a),w.spacing=w.generateSpacing(),w.shouldSkipGeneratingVar=r,w.unstable_sxConfig=p(p({},ui),null===u||void 0===u?void 0:u.unstable_sxConfig),w.unstable_sx=function(e){return pi({sx:e,theme:this})},w.toRuntimeSource=Ln,w}const Xn=["palette","cssVariables","colorSchemes","defaultColorScheme"];function qn(e,t,i){e.colorSchemes&&i&&(e.colorSchemes[t]=p(p({},!0!==i&&i),{},{palette:an(p(p({},!0===i?{}:i.palette),{},{mode:t}))}))}function Qn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{palette:t,cssVariables:i=!1,colorSchemes:n=(t?void 0:{light:!0}),defaultColorScheme:o=(null===t||void 0===t?void 0:t.mode)}=e,s=l(e,Xn),r=o||"light",a=null===n||void 0===n?void 0:n[r],d=p(p({},n),t?{[r]:p(p({},"boolean"!==typeof a&&a),{},{palette:t})}:void 0);for(var c=arguments.length,u=new Array(c>1?c-1:0),h=1;h<c;h++)u[h-1]=arguments[h];if(!1===i){if(!("colorSchemes"in e))return En(e,...u);let i=t;"palette"in e||d[r]&&(!0!==d[r]?i=d[r].palette:"dark"===r&&(i={mode:"dark"}));const n=En(p(p({},e),{},{palette:i}),...u);return n.defaultColorScheme=r,n.colorSchemes=d,"light"===n.palette.mode&&(n.colorSchemes.light=p(p({},!0!==d.light&&d.light),{},{palette:n.palette}),qn(n,"dark",d.dark)),"dark"===n.palette.mode&&(n.colorSchemes.dark=p(p({},!0!==d.dark&&d.dark),{},{palette:n.palette}),qn(n,"light",d.light)),n}return t||"light"in d||"light"!==r||(d.light=!0),Zn(p(p({},s),{},{colorSchemes:d,defaultColorScheme:r},"boolean"!==typeof i&&i),...u)}const Jn=Qn(),eo="$$material";const to=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e},io=e=>to(e)&&"classes"!==e,no=Ii({themeId:eo,defaultTheme:Jn,rootShouldForwardProp:io}),oo={theme:void 0};const so=function(e){let t,i;return function(n){let o=t;return void 0!==o&&n.theme===i||(oo.theme=n.theme,o=yi(e(oo)),t=o,i=n.theme),o}};function ro(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=p({},t);for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){const s=o;if("components"===s||"slots"===s)n[s]=p(p({},e[s]),n[s]);else if("componentsProps"===s||"slotProps"===s){const o=e[s],r=t[s];if(r)if(o){n[s]=p({},r);for(const e in o)if(Object.prototype.hasOwnProperty.call(o,e)){const t=e;n[s][t]=ro(o[t],r[t],i)}}else n[s]=r;else n[s]=o||{}}else"className"===s&&i&&t.className?n.className=m(null===e||void 0===e?void 0:e.className,null===t||void 0===t?void 0:t.className):"style"===s&&i&&t.style?n.style=p(p({},null===e||void 0===e?void 0:e.style),null===t||void 0===t?void 0:t.style):void 0===n[s]&&(n[s]=e[s])}return n}var ao=i(579);const lo=o.createContext(void 0);function co(e){let{props:t,name:i}=e;return function(e){const{theme:t,name:i,props:n}=e;if(!t||!t.components||!t.components[i])return n;const o=t.components[i];return o.defaultProps?ro(o.defaultProps,n,t.components.mergeClassNameAndStyle):o.styleOverrides||o.variants?n:ro(o,n,t.components.mergeClassNameAndStyle)}({props:t,name:i,theme:{components:o.useContext(lo)}})}function uo(e){return co(e)}const ho=vt;function po(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t=>{let[,i]=t;return i&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!function(e){return"string"===typeof e.main}(e))return!1;for(const i of t)if(!e.hasOwnProperty(i)||"string"!==typeof e[i])return!1;return!0}(i,e)}}const go=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=o.useContext(Ge);return t&&(i=t,0!==Object.keys(i).length)?t:e;var i},mo=fi();const fo=function(){return go(arguments.length>0&&void 0!==arguments[0]?arguments[0]:mo)};function vo(){const e=fo(Jn);return e[eo]||e}const yo=e=>e,bo=(()=>{let e=yo;return{configure(t){e=t},generate:t=>e(t),reset(){e=yo}}})(),xo={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Co(e,t){const i=xo[t];return i?"".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui","-").concat(i):"".concat(bo.generate(e),"-").concat(t)}function So(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const n={};return t.forEach(t=>{n[t]=Co(e,t,i)}),n}function wo(e){return Co("MuiPaper",e)}So("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Mo=["className","component","elevation","square","variant"],ko=no("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.variant],!i.square&&t.rounded,"elevation"===i.variant&&t["elevation".concat(i.elevation)]]}})(so(e=>{let{theme:t}=e;return{backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:e=>{let{ownerState:t}=e;return!t.square},style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:"1px solid ".concat((t.vars||t).palette.divider)}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}})),Do=o.forwardRef(function(e,t){var i;const n=uo({props:e,name:"MuiPaper"}),o=vo(),{className:s,component:r="div",elevation:a=1,square:d=!1,variant:c="elevation"}=n,u=l(n,Mo),h=p(p({},n),{},{component:r,elevation:a,square:d,variant:c}),g=(e=>{const{square:t,elevation:i,variant:n,classes:o}=e;return f({root:["root",n,!t&&"rounded","elevation"===n&&"elevation".concat(i)]},wo,o)})(h);return(0,ao.jsx)(ko,p(p({as:r,ownerState:h,className:m(g.root,s),ref:t},u),{},{style:p(p({},"elevation"===c&&p(p({"--Paper-shadow":(o.vars||o).shadows[a]},o.vars&&{"--Paper-overlay":null===(i=o.vars.overlays)||void 0===i?void 0:i[a]}),!o.vars&&"dark"===o.palette.mode&&{"--Paper-overlay":"linear-gradient(".concat(zi("#fff",Pn(a)),", ").concat(zi("#fff",Pn(a)),")")})),u.style)}))});function Io(e){return Co("MuiAppBar",e)}So("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const Ao=["className","color","enableColorOnDark","position"],Lo=(e,t)=>e?"".concat(null===e||void 0===e?void 0:e.replace(")",""),", ").concat(t,")"):t,No=no(Do,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t["position".concat(ho(i.position))],t["color".concat(ho(i.color))]]}})(so(e=>{let{theme:t}=e;return{display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit",color:"var(--AppBar-color)"}},{props:{color:"default"},style:p({"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[100],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[100])},t.applyStyles("dark",{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[900],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[900])}))},...Object.entries(t.palette).filter(po(["contrastText"])).map(e=>{var i,n;let[o]=e;return{props:{color:o},style:{"--AppBar-background":(null!==(i=t.vars)&&void 0!==i?i:t).palette[o].main,"--AppBar-color":(null!==(n=t.vars)&&void 0!==n?n:t).palette[o].contrastText}}}),{props:e=>!0===e.enableColorOnDark&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:e=>!1===e.enableColorOnDark&&!["inherit","transparent"].includes(e.color),style:p({backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"},t.applyStyles("dark",{backgroundColor:t.vars?Lo(t.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:t.vars?Lo(t.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null}))},{props:{color:"transparent"},style:p({"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"},t.applyStyles("dark",{backgroundImage:"none"}))}]}})),To=o.forwardRef(function(e,t){const i=uo({props:e,name:"MuiAppBar"}),{className:n,color:o="primary",enableColorOnDark:s=!1,position:r="fixed"}=i,a=l(i,Ao),d=p(p({},i),{},{color:o,position:r,enableColorOnDark:s}),c=(e=>{const{color:t,position:i,classes:n}=e;return f({root:["root","color".concat(ho(t)),"position".concat(ho(i))]},Io,n)})(d);return(0,ao.jsx)(No,p({square:!0,component:"header",ownerState:d,elevation:4,className:m(c.root,n,"fixed"===r&&"mui-fixed"),ref:t},a))}),Ro=To,Eo=["sx"];function Po(e){const{sx:t}=e,i=l(e,Eo),{systemProps:n,otherProps:o}=(e=>{var t,i;const n={systemProps:{},otherProps:{}},o=null!==(t=null===e||void 0===e||null===(i=e.theme)||void 0===i?void 0:i.unstable_sxConfig)&&void 0!==t?t:ui;return Object.keys(e).forEach(t=>{o[t]?n.systemProps[t]=e[t]:n.otherProps[t]=e[t]}),n})(i);let s;return s=Array.isArray(t)?[n,...t]:"function"===typeof t?function(){const e=t(...arguments);return it(e)?p(p({},n),e):n}:p(p({},n),t),p(p({},o),{},{sx:s})}const Oo=["className","component"];const Fo=So("MuiBox",["root"]),zo=Qn(),Bo=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:i,defaultClassName:n="MuiBox-root",generateClassName:s}=e,r=Qe("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(pi);return o.forwardRef(function(e,o){const a=fo(i),d=Po(e),{className:c,component:u="div"}=d,h=l(d,Oo);return(0,ao.jsx)(r,p({as:u,ref:o,className:m(c,s?s(n):n),theme:t&&a[t]||a},h))})}({themeId:eo,defaultTheme:zo,defaultClassName:Fo.root,generateClassName:bo.generate}),Vo=Bo;function Go(e){return Co("MuiToolbar",e)}So("MuiToolbar",["root","gutters","regular","dense"]);const Ho=["className","component","disableGutters","variant"],jo=no("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,!i.disableGutters&&t.gutters,t[i.variant]]}})(so(e=>{let{theme:t}=e;return{position:"relative",display:"flex",alignItems:"center",variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:t.mixins.toolbar}]}})),Wo=o.forwardRef(function(e,t){const i=uo({props:e,name:"MuiToolbar"}),{className:n,component:o="div",disableGutters:s=!1,variant:r="regular"}=i,a=l(i,Ho),d=p(p({},i),{},{component:o,disableGutters:s,variant:r}),c=(e=>{const{classes:t,disableGutters:i,variant:n}=e;return f({root:["root",!i&&"gutters",n]},Go,t)})(d);return(0,ao.jsx)(jo,p({as:o,className:m(c.root,n),ref:t,ownerState:d},a))});function _o(e){return Co("MuiTypography",e)}So("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Ko=["color"],Uo=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Yo={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},$o=Po,Zo=no("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.variant&&t[i.variant],"inherit"!==i.align&&t["align".concat(ho(i.align))],i.noWrap&&t.noWrap,i.gutterBottom&&t.gutterBottom,i.paragraph&&t.paragraph]}})(so(e=>{var t;let{theme:i}=e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(i.typography).filter(e=>{let[t,i]=e;return"inherit"!==t&&i&&"object"===typeof i}).map(e=>{let[t,i]=e;return{props:{variant:t},style:i}}),...Object.entries(i.palette).filter(po()).map(e=>{let[t]=e;return{props:{color:t},style:{color:(i.vars||i).palette[t].main}}}),...Object.entries((null===(t=i.palette)||void 0===t?void 0:t.text)||{}).filter(e=>{let[,t]=e;return"string"===typeof t}).map(e=>{let[t]=e;return{props:{color:"text".concat(ho(t))},style:{color:(i.vars||i).palette.text[t]}}}),{props:e=>{let{ownerState:t}=e;return"inherit"!==t.align},style:{textAlign:"var(--Typography-textAlign)"}},{props:e=>{let{ownerState:t}=e;return t.noWrap},style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:e=>{let{ownerState:t}=e;return t.gutterBottom},style:{marginBottom:"0.35em"}},{props:e=>{let{ownerState:t}=e;return t.paragraph},style:{marginBottom:16}}]}})),Xo={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},qo=o.forwardRef(function(e,t){const i=uo({props:e,name:"MuiTypography"}),{color:n}=i,o=l(i,Ko),s=!Yo[n],r=$o(p(p({},o),s&&{color:n})),{align:a="inherit",className:d,component:c,gutterBottom:u=!1,noWrap:h=!1,paragraph:g=!1,variant:v="body1",variantMapping:y=Xo}=r,b=l(r,Uo),x=p(p({},r),{},{align:a,color:n,className:d,component:c,gutterBottom:u,noWrap:h,paragraph:g,variant:v,variantMapping:y}),C=c||(g?"p":y[v]||Xo[v])||"span",S=(e=>{const{align:t,gutterBottom:i,noWrap:n,paragraph:o,variant:s,classes:r}=e;return f({root:["root",s,"inherit"!==e.align&&"align".concat(ho(t)),i&&"gutterBottom",n&&"noWrap",o&&"paragraph"]},_o,r)})(x);return(0,ao.jsx)(Zo,p(p({as:C,ref:t,className:m(S.root,d)},b),{},{ownerState:x,style:p(p({},"inherit"!==a&&{"--Typography-textAlign":a}),b.style)}))}),Qo=qo;function Jo(){return(0,ao.jsx)(Vo,{sx:{flexGrow:1},children:(0,ao.jsx)(Ro,{position:"static",sx:{bgcolor:"#f5b800"},children:(0,ao.jsxs)(Wo,{variant:"dense",children:[(0,ao.jsx)("span",{class:"material-symbols-outlined",style:{fontSize:"24px",marginRight:"4px",color:"#ffffff"},children:"finance_mode"}),(0,ao.jsx)(Qo,{sx:{textAlign:"left",width:"100%",fontSize:"20px",fontFamily:"Roboto Serif, serif",fontWeight:"500",color:"#ffffff",letterSpacing:"1.5px"},children:"Mango Metrics"})]})})})}function es(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=o.useRef(void 0),s=o.useCallback(e=>{const i=t.map(t=>{if(null==t)return null;if("function"===typeof t){const i=t,n=i(e);return"function"===typeof n?n:()=>{i(null)}}return t.current=e,()=>{t.current=null}});return()=>{i.forEach(e=>null===e||void 0===e?void 0:e())}},t);return o.useMemo(()=>t.every(e=>null==e)?null:e=>{n.current&&(n.current(),n.current=void 0),null!=e&&(n.current=s(e))},t)}const ts=function(e){return"string"===typeof e};const is=function(e,t,i){return void 0===e||ts(e)?t:p(p({},t),{},{ownerState:p(p({},t.ownerState),i)})};const ns=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const i={};return Object.keys(e).filter(i=>i.match(/^on[A-Z]/)&&"function"===typeof e[i]&&!t.includes(i)).forEach(t=>{i[t]=e[t]}),i};const os=function(e){if(void 0===e)return{};const t={};return Object.keys(e).filter(t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t])).forEach(i=>{t[i]=e[i]}),t};const ss=function(e){const{getSlotProps:t,additionalProps:i,externalSlotProps:n,externalForwardedProps:o,className:s}=e;if(!t){const e=m(null===i||void 0===i?void 0:i.className,s,null===o||void 0===o?void 0:o.className,null===n||void 0===n?void 0:n.className),t=p(p(p({},null===i||void 0===i?void 0:i.style),null===o||void 0===o?void 0:o.style),null===n||void 0===n?void 0:n.style),r=p(p(p({},i),o),n);return e.length>0&&(r.className=e),Object.keys(t).length>0&&(r.style=t),{props:r,internalRef:void 0}}const r=ns(p(p({},o),n)),a=os(n),l=os(o),d=t(r),c=m(null===d||void 0===d?void 0:d.className,null===i||void 0===i?void 0:i.className,s,null===o||void 0===o?void 0:o.className,null===n||void 0===n?void 0:n.className),u=p(p(p(p({},null===d||void 0===d?void 0:d.style),null===i||void 0===i?void 0:i.style),null===o||void 0===o?void 0:o.style),null===n||void 0===n?void 0:n.style),h=p(p(p(p({},d),i),l),a);return c.length>0&&(h.className=c),Object.keys(u).length>0&&(h.style=u),{props:h,internalRef:d.ref}};const rs=function(e,t,i){return"function"===typeof e?e(t,i):e},as=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];const ls=function(e){var t;const{elementType:i,externalSlotProps:n,ownerState:o,skipResolvingSlotProps:s=!1}=e,r=l(e,as),a=s?{}:rs(n,o),{props:d,internalRef:c}=ss(p(p({},r),{},{externalSlotProps:a})),u=es(c,null===a||void 0===a?void 0:a.ref,null===(t=e.additionalProps)||void 0===t?void 0:t.ref);return is(i,p(p({},d),{},{ref:u}),o)};function ds(e){return Co("MuiSvgIcon",e)}So("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const cs=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],us=no("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,"inherit"!==i.color&&t["color".concat(ho(i.color))],t["fontSize".concat(ho(i.fontSize))]]}})(so(e=>{var t,i,n,o,s,r,a,l,d,c,u,h,p,g,m;let{theme:f}=e;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:null===(t=f.transitions)||void 0===t||null===(i=t.create)||void 0===i?void 0:i.call(t,"fill",{duration:null===(n=(null!==(o=f.vars)&&void 0!==o?o:f).transitions)||void 0===n||null===(n=n.duration)||void 0===n?void 0:n.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:(null===(s=f.typography)||void 0===s||null===(r=s.pxToRem)||void 0===r?void 0:r.call(s,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:(null===(a=f.typography)||void 0===a||null===(l=a.pxToRem)||void 0===l?void 0:l.call(a,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:(null===(d=f.typography)||void 0===d||null===(c=d.pxToRem)||void 0===c?void 0:c.call(d,35))||"2.1875rem"}},...Object.entries((null!==(u=f.vars)&&void 0!==u?u:f).palette).filter(e=>{let[,t]=e;return t&&t.main}).map(e=>{var t,i;let[n]=e;return{props:{color:n},style:{color:null===(t=(null!==(i=f.vars)&&void 0!==i?i:f).palette)||void 0===t||null===(t=t[n])||void 0===t?void 0:t.main}}}),{props:{color:"action"},style:{color:null===(h=(null!==(p=f.vars)&&void 0!==p?p:f).palette)||void 0===h||null===(h=h.action)||void 0===h?void 0:h.active}},{props:{color:"disabled"},style:{color:null===(g=(null!==(m=f.vars)&&void 0!==m?m:f).palette)||void 0===g||null===(g=g.action)||void 0===g?void 0:g.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),hs=o.forwardRef(function(e,t){const i=uo({props:e,name:"MuiSvgIcon"}),{children:n,className:s,color:r="inherit",component:a="svg",fontSize:d="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:h,viewBox:g="0 0 24 24"}=i,v=l(i,cs),y=o.isValidElement(n)&&"svg"===n.type,b=p(p({},i),{},{color:r,component:a,fontSize:d,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:g,hasSvgAsChild:y}),x={};u||(x.viewBox=g);const C=(e=>{const{color:t,fontSize:i,classes:n}=e;return f({root:["root","inherit"!==t&&"color".concat(ho(t)),"fontSize".concat(ho(i))]},ds,n)})(b);return(0,ao.jsxs)(us,p(p(p(p({as:a,className:m(C.root,s),focusable:"false",color:c,"aria-hidden":!h||void 0,role:h?"img":void 0,ref:t},x),v),y&&n.props),{},{ownerState:b,children:[y?n.props.children:n,h?(0,ao.jsx)("title",{children:h}):null]}))});hs.muiName="SvgIcon";const ps=hs;const gs=function(e){function t(t,i){return(0,ao.jsx)(ps,p(p({"data-testid":void 0,ref:i},t),{},{children:e}))}return t.muiName=ps.muiName,o.memo(o.forwardRef(t))}((0,ao.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}));function ms(e){try{return e.matches(":focus-visible")}catch(Ur){0}return!1}const fs=es,vs="undefined"!==typeof window?o.useLayoutEffect:o.useEffect;const ys=function(e){const t=o.useRef(e);return vs(()=>{t.current=e}),o.useRef(function(){return(0,t.current)(...arguments)}).current},bs={};function xs(e,t){const i=o.useRef(bs);return i.current===bs&&(i.current=e(t)),i}class Cs{static create(){return new Cs}static use(){const e=xs(Cs.create).current,[t,i]=o.useState(!1);return e.shouldMount=t,e.setShouldMount=i,o.useEffect(e.mountEffect,[t]),e}constructor(){u(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&null!==this.ref.current&&(this.didMount=!0,this.mounted.resolve())}),this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=function(){let e,t;const i=new Promise((i,n)=>{e=i,t=n});return i.resolve=e,i.reject=t,i}(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.mount().then(()=>{var e;return null===(e=this.ref.current)||void 0===e?void 0:e.start(...t)})}stop(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.mount().then(()=>{var e;return null===(e=this.ref.current)||void 0===e?void 0:e.stop(...t)})}pulsate(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.mount().then(()=>{var e;return null===(e=this.ref.current)||void 0===e?void 0:e.pulsate(...t)})}}function Ss(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function ws(e,t){return ws=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ws(e,t)}const Ms=o.createContext(null);function ks(e,t){var i=Object.create(null);return e&&o.Children.map(e,function(e){return e}).forEach(function(e){i[e.key]=function(e){return t&&(0,o.isValidElement)(e)?t(e):e}(e)}),i}function Ds(e,t,i){return null!=i[t]?i[t]:e.props[t]}function Is(e,t,i){var n=ks(e.children),s=function(e,t){function i(i){return i in t?t[i]:e[i]}e=e||{},t=t||{};var n,o=Object.create(null),s=[];for(var r in e)r in t?s.length&&(o[r]=s,s=[]):s.push(r);var a={};for(var l in t){if(o[l])for(n=0;n<o[l].length;n++){var d=o[l][n];a[o[l][n]]=i(d)}a[l]=i(l)}for(n=0;n<s.length;n++)a[s[n]]=i(s[n]);return a}(t,n);return Object.keys(s).forEach(function(r){var a=s[r];if((0,o.isValidElement)(a)){var l=r in t,d=r in n,c=t[r],u=(0,o.isValidElement)(c)&&!c.props.in;!d||l&&!u?d||!l||u?d&&l&&(0,o.isValidElement)(c)&&(s[r]=(0,o.cloneElement)(a,{onExited:i.bind(null,a),in:c.props.in,exit:Ds(a,"exit",e),enter:Ds(a,"enter",e)})):s[r]=(0,o.cloneElement)(a,{in:!1}):s[r]=(0,o.cloneElement)(a,{onExited:i.bind(null,a),in:!0,exit:Ds(a,"exit",e),enter:Ds(a,"enter",e)})}}),s}var As=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Ls=function(e){var t,i;function n(t,i){var n,o=(n=e.call(this,t,i)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n));return n.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},n}i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,ws(t,i);var s=n.prototype;return s.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},s.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,t){var i,n,s=t.children,r=t.handleExited;return{children:t.firstRender?(i=e,n=r,ks(i.children,function(e){return(0,o.cloneElement)(e,{onExited:n.bind(null,e),in:!0,appear:Ds(e,"appear",i),enter:Ds(e,"enter",i),exit:Ds(e,"exit",i)})})):Is(e,s,r),firstRender:!1}},s.handleExited=function(e,t){var i=ks(this.props.children);e.key in i||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState(function(t){var i=v({},t.children);return delete i[e.key],{children:i}}))},s.render=function(){var e=this.props,t=e.component,i=e.childFactory,n=a(e,["component","childFactory"]),s=this.state.contextValue,r=As(this.state.children).map(i);return delete n.appear,delete n.enter,delete n.exit,null===t?o.createElement(Ms.Provider,{value:s},r):o.createElement(Ms.Provider,{value:s},o.createElement(t,n,r))},n}(o.Component);Ls.propTypes={},Ls.defaultProps={component:"div",childFactory:function(e){return e}};const Ns=Ls,Ts=[];class Rs{constructor(){u(this,"currentId",null),u(this,"clear",()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)}),u(this,"disposeEffect",()=>this.clear)}static create(){return new Rs}start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}}function Es(){const e=xs(Rs.create).current;var t;return t=e.disposeEffect,o.useEffect(t,Ts),e}i(219);var Ps=function(e,t){var i=arguments;if(null==t||!He.call(t,"css"))return o.createElement.apply(void 0,i);var n=i.length,s=new Array(n);s[0]=_e,s[1]=function(e,t){var i={};for(var n in t)He.call(t,n)&&(i[n]=t[n]);return i[je]=e,i}(e,t);for(var r=2;r<n;r++)s[r]=i[r];return o.createElement.apply(null,s)};!function(e){var t;t||(t=e.JSX||(e.JSX={}))}(Ps||(Ps={}));function Os(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Oe(t)}function Fs(){var e=Os.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}const zs=function(e){const{className:t,classes:i,pulsate:n=!1,rippleX:s,rippleY:r,rippleSize:a,in:l,onExited:d,timeout:c}=e,[u,h]=o.useState(!1),p=m(t,i.ripple,i.rippleVisible,n&&i.ripplePulsate),g={width:a,height:a,top:-a/2+r,left:-a/2+s},f=m(i.child,u&&i.childLeaving,n&&i.childPulsate);return l||u||h(!0),o.useEffect(()=>{if(!l&&null!=d){const e=setTimeout(d,c);return()=>{clearTimeout(e)}}},[d,l,c]),(0,ao.jsx)("span",{className:p,style:g,children:(0,ao.jsx)("span",{className:f})})};const Bs=So("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Vs=["center","classes","className"];var Gs,Hs,js,Ws;const _s=Fs(Gs||(Gs=Ss(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"]))),Ks=Fs(Hs||(Hs=Ss(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"]))),Us=Fs(js||(js=Ss(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"]))),Ys=no("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),$s=no(zs,{name:"MuiTouchRipple",slot:"Ripple"})(Ws||(Ws=Ss(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"])),Bs.rippleVisible,_s,550,e=>{let{theme:t}=e;return t.transitions.easing.easeInOut},Bs.ripplePulsate,e=>{let{theme:t}=e;return t.transitions.duration.shorter},Bs.child,Bs.childLeaving,Ks,550,e=>{let{theme:t}=e;return t.transitions.easing.easeInOut},Bs.childPulsate,Us,e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),Zs=o.forwardRef(function(e,t){const i=uo({props:e,name:"MuiTouchRipple"}),{center:n=!1,classes:s={},className:r}=i,a=l(i,Vs),[d,c]=o.useState([]),u=o.useRef(0),h=o.useRef(null);o.useEffect(()=>{h.current&&(h.current(),h.current=null)},[d]);const g=o.useRef(!1),f=Es(),v=o.useRef(null),y=o.useRef(null),b=o.useCallback(e=>{const{pulsate:t,rippleX:i,rippleY:n,rippleSize:o,cb:r}=e;c(e=>[...e,(0,ao.jsx)($s,{classes:{ripple:m(s.ripple,Bs.ripple),rippleVisible:m(s.rippleVisible,Bs.rippleVisible),ripplePulsate:m(s.ripplePulsate,Bs.ripplePulsate),child:m(s.child,Bs.child),childLeaving:m(s.childLeaving,Bs.childLeaving),childPulsate:m(s.childPulsate,Bs.childPulsate)},timeout:550,pulsate:t,rippleX:i,rippleY:n,rippleSize:o},u.current)]),u.current+=1,h.current=r},[s]),x=o.useCallback(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:o=!1,center:s=n||t.pulsate,fakeElement:r=!1}=t;if("mousedown"===(null===e||void 0===e?void 0:e.type)&&g.current)return void(g.current=!1);"touchstart"===(null===e||void 0===e?void 0:e.type)&&(g.current=!0);const a=r?null:y.current,l=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let d,c,u;if(s||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)d=Math.round(l.width/2),c=Math.round(l.height/2);else{const{clientX:t,clientY:i}=e.touches&&e.touches.length>0?e.touches[0]:e;d=Math.round(t-l.left),c=Math.round(i-l.top)}if(s)u=Math.sqrt((2*l.width**2+l.height**2)/3),u%2===0&&(u+=1);else{const e=2*Math.max(Math.abs((a?a.clientWidth:0)-d),d)+2,t=2*Math.max(Math.abs((a?a.clientHeight:0)-c),c)+2;u=Math.sqrt(e**2+t**2)}null!==e&&void 0!==e&&e.touches?null===v.current&&(v.current=()=>{b({pulsate:o,rippleX:d,rippleY:c,rippleSize:u,cb:i})},f.start(80,()=>{v.current&&(v.current(),v.current=null)})):b({pulsate:o,rippleX:d,rippleY:c,rippleSize:u,cb:i})},[n,b,f]),C=o.useCallback(()=>{x({},{pulsate:!0})},[x]),S=o.useCallback((e,t)=>{if(f.clear(),"touchend"===(null===e||void 0===e?void 0:e.type)&&v.current)return v.current(),v.current=null,void f.start(0,()=>{S(e,t)});v.current=null,c(e=>e.length>0?e.slice(1):e),h.current=t},[f]);return o.useImperativeHandle(t,()=>({pulsate:C,start:x,stop:S}),[C,x,S]),(0,ao.jsx)(Ys,p(p({className:m(Bs.root,s.root,r),ref:y},a),{},{children:(0,ao.jsx)(Ns,{component:null,exit:!0,children:d})}))}),Xs=Zs;function qs(e){return Co("MuiButtonBase",e)}const Qs=So("MuiButtonBase",["root","disabled","focusVisible"]),Js=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],er=no("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(Qs.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}});function tr(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ys(o=>(i&&i(o),n||e[t](o),!0))}const ir=o.forwardRef(function(e,t){const i=uo({props:e,name:"MuiButtonBase"}),{action:n,centerRipple:s=!1,children:r,className:a,component:d="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:h=!1,focusRipple:g=!1,focusVisibleClassName:v,LinkComponent:y="a",onBlur:b,onClick:x,onContextMenu:C,onDragLeave:S,onFocus:w,onFocusVisible:M,onKeyDown:k,onKeyUp:D,onMouseDown:I,onMouseLeave:A,onMouseUp:L,onTouchEnd:N,onTouchMove:T,onTouchStart:R,tabIndex:E=0,TouchRippleProps:P,touchRippleRef:O,type:F}=i,z=l(i,Js),B=o.useRef(null),V=Cs.use(),G=fs(V.ref,O),[H,j]=o.useState(!1);c&&H&&j(!1),o.useImperativeHandle(n,()=>({focusVisible:()=>{j(!0),B.current.focus()}}),[]);const W=V.shouldMount&&!u&&!c;o.useEffect(()=>{H&&g&&!u&&V.pulsate()},[u,g,H,V]);const _=tr(V,"start",I,h),K=tr(V,"stop",C,h),U=tr(V,"stop",S,h),Y=tr(V,"stop",L,h),$=tr(V,"stop",e=>{H&&e.preventDefault(),A&&A(e)},h),Z=tr(V,"start",R,h),X=tr(V,"stop",N,h),q=tr(V,"stop",T,h),Q=tr(V,"stop",e=>{ms(e.target)||j(!1),b&&b(e)},!1),J=ys(e=>{B.current||(B.current=e.currentTarget),ms(e.target)&&(j(!0),M&&M(e)),w&&w(e)}),ee=()=>{const e=B.current;return d&&"button"!==d&&!("A"===e.tagName&&e.href)},te=ys(e=>{g&&!e.repeat&&H&&" "===e.key&&V.stop(e,()=>{V.start(e)}),e.target===e.currentTarget&&ee()&&" "===e.key&&e.preventDefault(),k&&k(e),e.target===e.currentTarget&&ee()&&"Enter"===e.key&&!c&&(e.preventDefault(),x&&x(e))}),ie=ys(e=>{g&&" "===e.key&&H&&!e.defaultPrevented&&V.stop(e,()=>{V.pulsate(e)}),D&&D(e),x&&e.target===e.currentTarget&&ee()&&" "===e.key&&!e.defaultPrevented&&x(e)});let ne=d;"button"===ne&&(z.href||z.to)&&(ne=y);const oe={};if("button"===ne){const e=!!z.formAction;oe.type=void 0!==F||e?F:"button",oe.disabled=c}else z.href||z.to||(oe.role="button"),c&&(oe["aria-disabled"]=c);const se=fs(t,B),re=p(p({},i),{},{centerRipple:s,component:d,disabled:c,disableRipple:u,disableTouchRipple:h,focusRipple:g,tabIndex:E,focusVisible:H}),ae=(e=>{const{disabled:t,focusVisible:i,focusVisibleClassName:n,classes:o}=e,s=f({root:["root",t&&"disabled",i&&"focusVisible"]},qs,o);return i&&n&&(s.root+=" ".concat(n)),s})(re);return(0,ao.jsxs)(er,p(p(p({as:ne,className:m(ae.root,a),ownerState:re,onBlur:Q,onClick:x,onContextMenu:K,onFocus:J,onKeyDown:te,onKeyUp:ie,onMouseDown:_,onMouseLeave:$,onMouseUp:Y,onDragLeave:U,onTouchEnd:X,onTouchMove:q,onTouchStart:Z,ref:se,tabIndex:c?-1:E,type:F},oe),z),{},{children:[r,W?(0,ao.jsx)(Xs,p({ref:G,center:s},P)):null]}))}),nr=["slots","slotProps"],or=no(ir,{name:"MuiBreadcrumbCollapsed"})(so(e=>{let{theme:t}=e;return p(p({display:"flex",marginLeft:"calc(".concat(t.spacing(1)," * 0.5)"),marginRight:"calc(".concat(t.spacing(1)," * 0.5)")},"light"===t.palette.mode?{backgroundColor:t.palette.grey[100],color:t.palette.grey[700]}:{backgroundColor:t.palette.grey[700],color:t.palette.grey[100]}),{},{borderRadius:2,"&:hover, &:focus":p({},"light"===t.palette.mode?{backgroundColor:t.palette.grey[200]}:{backgroundColor:t.palette.grey[600]}),"&:active":p({boxShadow:t.shadows[0]},"light"===t.palette.mode?{backgroundColor:Wi(t.palette.grey[200],.12)}:{backgroundColor:Wi(t.palette.grey[600],.12)})})})),sr=no(gs)({width:24,height:16});const rr=function(e){const{slots:t={},slotProps:i={}}=e,n=l(e,nr),o=e;return(0,ao.jsx)("li",{children:(0,ao.jsx)(or,p(p({focusRipple:!0},n),{},{ownerState:o,children:(0,ao.jsx)(sr,p({as:t.CollapsedIcon,ownerState:o},i.collapsedIcon))}))})};function ar(e){return Co("MuiBreadcrumbs",e)}const lr=So("MuiBreadcrumbs",["root","ol","li","separator"]),dr=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],cr=no(Qo,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,t)=>[{["& .".concat(lr.li)]:t.li},t.root]})({}),ur=no("ol",{name:"MuiBreadcrumbs",slot:"Ol"})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),hr=no("li",{name:"MuiBreadcrumbs",slot:"Separator"})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function pr(e,t,i,n){return e.reduce((o,s,r)=>(r<e.length-1?o=o.concat(s,(0,ao.jsx)(hr,{"aria-hidden":!0,className:t,ownerState:n,children:i},"separator-".concat(r))):o.push(s),o),[])}const gr=o.forwardRef(function(e,t){const i=uo({props:e,name:"MuiBreadcrumbs"}),{children:n,className:s,component:r="nav",slots:a={},slotProps:d={},expandText:c="Show path",itemsAfterCollapse:u=1,itemsBeforeCollapse:h=1,maxItems:g=8,separator:v="/"}=i,y=l(i,dr),[b,x]=o.useState(!1),C=p(p({},i),{},{component:r,expanded:b,expandText:c,itemsAfterCollapse:u,itemsBeforeCollapse:h,maxItems:g,separator:v}),S=(e=>{const{classes:t}=e;return f({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},ar,t)})(C),w=ls({elementType:a.CollapsedIcon,externalSlotProps:d.collapsedIcon,ownerState:C}),M=o.useRef(null),k=o.Children.toArray(n).filter(e=>o.isValidElement(e)).map((e,t)=>(0,ao.jsx)("li",{className:S.li,children:e},"child-".concat(t)));return(0,ao.jsx)(cr,p(p({ref:t,component:r,color:"textSecondary",className:m(S.root,s),ownerState:C},y),{},{children:(0,ao.jsx)(ur,{className:S.ol,ref:M,ownerState:C,children:pr(b||g&&k.length<=g?k:(e=>h+u>=e.length?e:[...e.slice(0,h),(0,ao.jsx)(rr,{"aria-label":c,slots:{CollapsedIcon:a.CollapsedIcon},slotProps:{collapsedIcon:w},onClick:()=>{x(!0);const e=M.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-u,e.length)])(k),S.separator,v,C)})}))});const mr=["type"],fr=["text","fontSize","fontStyle","fontWeight","fontFamily"];var vr=Object.defineProperty,yr=Object.getOwnPropertyDescriptor,br=(e,t)=>{for(var i in t)vr(e,i,{get:t[i],enumerable:!0})},xr=(e,t,i,n)=>{for(var o,s=n>1?void 0:n?yr(t,i):t,r=e.length-1;r>=0;r--)(o=e[r])&&(s=(n?o(t,i,s):o(s))||s);return n&&s&&vr(t,i,s),s},Cr={};function Sr(e){return void 0===e?[]:Array.isArray(e)?e:[e]}function wr(e){return Array.from(new Set(e))}function Mr(e,t){return e.reduce((e,i)=>{var n;const o=t(i);return null!==(n=e[o])&&void 0!==n||(e[o]=[]),e[o].push(i),e},{})}function kr(e,t){if(null==e||null==t||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(Array.isArray(e[i])&&Array.isArray(t[i])){if(!kr(e[i],t[i]))return!1}else if(e[i]!==t[i])return!1;return!0}function Dr(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===e.length)return[];const n=[];for(let o=0;o<t;o++)n.push(e.at((o+i)%e.length));return n}function Ir(e,t){const i=new Map;for(const[n,o]of t.entries())i.set(o,n);return e.sort((e,t)=>{var n,o;return(null!==(n=i.get(e))&&void 0!==n?n:1/0)-(null!==(o=i.get(t))&&void 0!==o?o:1/0)})}function Ar(e,t){let i=0;for(;i<e.length&&t(e[i]);)i+=1;const n=i;0!==n&&e.splice(0,n)}function Lr(e,t){let i=e.length-1;for(;i>=0&&t(e[i]);)i-=1;const n=e.length-1-i;0!==n&&e.splice(e.length-n,n)}function Nr(e,t,i){const n=[e],o=Math.round((t-e)/(i-1));if(o>0)for(let s=e+o;s<t;s+=o){if(n.push(s)>=i-1)break}return n.push(t),n}br(Cr,{Time:()=>oa,check:()=>ia,create:()=>ta,inDevelopmentMode:()=>na});var Tr,Rr={};function Er(e){var t;return e?null===(t=Rr.document)||void 0===t?void 0:t[e]:Rr.document}function Pr(e){var t;return e?null===(t=Rr.window)||void 0===t?void 0:t[e]:Rr.window}function Or(e){Rr.document=e}function Fr(e){Rr.window=e}function zr(e,t,i){const n=Er().createElement(e);if("object"===typeof t&&(i=t,t=void 0),t)for(const o of t.split(" "))n.classList.add(o);return i&&Object.assign(n.style,i),n}function Br(e){return Er().createElementNS("http://www.w3.org/2000/svg",e)}function Vr(e,t){const i=Er("body"),n=zr("a",{display:"none"});n.href=e,n.download=t,i.appendChild(n),n.click(),setTimeout(()=>n.remove())}function Gr(e,t,i,n){return e.addEventListener(t,i,n),()=>e.removeEventListener(t,i,n)}function Hr(e){if(null==Tr){const e=Pr("Option");Tr=(new e).style}Tr.color=e;const t=Tr.color||null;return Tr.color="",t}"undefined"!==typeof globalThis.window&&(Rr.window=globalThis.window),"undefined"!==typeof document?Rr.document=document:"undefined"!==typeof globalThis.global&&(Rr.document=globalThis.document);var jr={};br(jr,{error:()=>Ur,errorOnce:()=>Xr,log:()=>_r,logGroup:()=>Qr,reset:()=>qr,table:()=>Yr,warn:()=>Kr,warnOnce:()=>Zr});var Wr=new Set;function _r(){console.log(...arguments)}function Kr(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];console.warn("AG Charts - ".concat(e),...i)}function Ur(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];"object"===typeof e?console.error("AG Charts error",e,...i):console.error("AG Charts - ".concat(e),...i)}function Yr(){console.table(...arguments)}function $r(e,t,i){let n;n=e instanceof Error?e.message:"string"===typeof e?e:"object"===typeof e?JSON.stringify(e):String(e);const o="".concat(t,": ").concat(n);Wr.has(o)||(i(e),Wr.add(o))}function Zr(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];$r(e,"Logger.warn",e=>Kr(e,...i))}function Xr(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];$r(e,"Logger.error",e=>Ur(e,...i))}function qr(){Wr.clear()}function Qr(e,t){console.groupCollapsed(e);try{return t()}finally{console.groupEnd()}}var Jr=2e3,ea=Date.now();function ta(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Object.assign(function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];ia(...t)&&("function"===typeof i[0]&&(i=Sr(i[0]())),function(){const e=Date.now()-ea;if(e>Jr){const t=(Math.floor(e/100)/10).toFixed(1);_r("**** ".concat(t,"s since last log message ****"))}ea=Date.now()}(),_r(...i))},{check:()=>ia(...t),group:(e,i)=>ia(...t)?Qr(e,i):i()})}function ia(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];0===t.length&&t.push(!0);return Sr(Pr("agChartsDebug")).some(e=>t.includes(e))}function na(e){if(ia("dev"))return e()}function oa(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{logResult:i=!0,logStack:n=!1,logArgs:o=!1,logData:s}=t;return function(t,r,a){const l=a.value;a.value=function(){const t=performance.now();for(var r=arguments.length,a=new Array(r),d=0;d<r;d++)a[d]=arguments[d];const c=l.apply(this,a),u={duration:performance.now()-t};return i&&(u.result=c),o&&(u.args=a),n&&(u.stack=new Error("Stack trace for timing debug").stack),s&&(u.logData=s(this)),_r(e,u),c}}}var sa={};br(sa,{flush:()=>la,record:()=>aa});var ra=new Map;function aa(e,t){ia("scene:stats:verbose")&&ra.set(e,t)}function la(){const e=Object.fromEntries(ra);return ra.clear(),e}var da={},ca={};br(ca,{RegistryMode:()=>ha,getAxisModule:()=>Sa,getChartModule:()=>wa,getPresetModule:()=>Ma,getSeriesModule:()=>ka,hasModule:()=>ba,isEnterprise:()=>Ia,isIntegrated:()=>Aa,isModuleType:()=>Na,isUmd:()=>La,listModules:()=>xa,listModulesByType:()=>Ca,register:()=>fa,registerModules:()=>va,reset:()=>ya,setRegistryMode:()=>Da});var ua=(e=>(e.Chart="chart",e.Axis="axis",e.Series="series",e.Plugin="plugin",e.AxisPlugin="axis:plugin",e.SeriesPlugin="series:plugin",e.Preset="preset",e))(ua||{}),ha=(e=>(e.Enterprise="enterprise",e.Integrated="integrated",e.UMD="umd",e))(ha||{}),pa=new Set,ga=new Map;function ma(e){if(ga.set(e.name,e),e.dependencies)for(const t of e.dependencies)fa(t)}function fa(e){const t=ga.get(e.name);if(t){if(t.version!==e.version)throw new Error(["AG Charts - Module '".concat(e.name,"' already registered with different version:"),"".concat(t.version," vs ").concat(e.version),"","Check your package.json for conflicting dependencies - depending on your package manager","one of these commands may help:","- npm ls ag-charts-community","- yarn why ag-charts-community"].join("\n"));!t.enterprise&&e.enterprise&&ma(e)}else ma(e)}function va(e){for(const t of e.flat())fa(t)}function ya(){pa.clear(),ga.clear()}function ba(e){return ga.has(e)}function*xa(){for(const e of ga.values())yield e}function*Ca(e){for(const t of ga.values())Na(e,t)&&(yield t)}function Sa(e){const t=ga.get(e);if(Na("axis",t))return t}function wa(e){const t=ga.get(e);if(Na("chart",t))return t;throw new Error("AG Charts - Unknown chart type; Check options are correctly structured and series types are specified")}function Ma(e){const t=ga.get(e);if(Na("preset",t))return t}function ka(e){const t=ga.get(e);if(Na("series",t))return t}function Da(e){pa.add(e)}function Ia(){return pa.has("enterprise")}function Aa(){return pa.has("integrated")}function La(){return pa.has("umd")}function Na(e,t){return(null===t||void 0===t?void 0:t.type)===e}var Ta=class{constructor(){this.callbacks=new Set}flush(){for(const e of this.callbacks)e();this.callbacks.clear()}merge(e){for(const t of e.callbacks)this.callbacks.add(t)}register(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const n of t)n&&this.callbacks.add(n)}},Ra=class{constructor(){this.cleanup=new Ta}destroy(){this.cleanup.flush()}};function Ea(e){return e.domain}var Pa=(e=>(e[e.Leading=0]="Leading",e[e.Trailing=1]="Trailing",e[e.Interpolate=2]="Interpolate",e))(Pa||{}),Oa=class{constructor(){this.events=new Map}on(e,t){var i;return this.events.has(e)||this.events.set(e,new Set),null===(i=this.events.get(e))||void 0===i||i.add(t),()=>this.off(e,t)}off(e,t){const i=this.events.get(e);i&&(i.delete(t),0===i.size&&this.events.delete(e))}emit(e,t){const i=this.events.get(e);if(i)for(const n of i)n(t)}clear(e){e?this.events.delete(e):this.events.clear()}},Fa=class{constructor(e){if(this.maxCacheSize=e,this.store=new Map,e<=0)throw new Error("LRUCache size must be greater than 0")}get(e){if(!this.store.has(e))return;const t=this.store.get(e);return this.store.delete(e),this.store.set(e,t),t}has(e){return this.store.has(e)}set(e,t){return this.store.set(e,t),this.store.size>this.maxCacheSize&&this.store.delete(this.store.keys().next().value),t}clear(){this.store.clear()}};function za(e,t,i){return Math.min(i,Math.max(e,t))}function Ba(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-10;return e>=t[0]-i&&e<=t[1]+i}function Va(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-10;return e===t||Math.abs(e-t)<i}function Ga(e){return-1===Math.sign(e)||Object.is(e,-0)}function Ha(e){return e%1===0}function ja(e){const t=10**(arguments.length>1&&void 0!==arguments[1]?arguments[1]:2);return Math.round(e*t)/t}function Wa(e,t){return Math.floor(e%t+(e<0?Math.abs(t):0))}function _a(e){var t,i;if(Math.floor(e)===e)return 0;let n=String(e),o=0;if(e<1e-6||e>=1e21){let e;[n,e]=n.split("e"),null!=e&&(o=Number(e))}const s=null!==(t=null===(i=n.split(".")[1])||void 0===i?void 0:i.length)&&void 0!==t?t:0;return Math.max(s-o,0)}function Ka(e){return null!=e}function Ua(e){return Array.isArray(e)}function Ya(e){return"boolean"===typeof e}function $a(e){return e instanceof Date}function Za(e){return $a(e)&&!Number.isNaN(Number(e))}function Xa(e){return e instanceof RegExp}function qa(e){return"function"===typeof e}function Qa(e){return"object"===typeof e&&null!==e&&!Ua(e)}function Ja(e){return Ua(e)||el(e)}function el(e){var t;return"object"===typeof e&&null!==e&&"Object"===(null===(t=e.constructor)||void 0===t?void 0:t.name)}function tl(e){if("object"!==typeof e||null===e)return!1;for(const t in e)return!1;return!0}function il(e){return"string"===typeof e}function nl(e){return"number"===typeof e}function ol(e){return Number.isFinite(e)}function sl(e){return"undefined"!==typeof globalThis.window&&e instanceof HTMLElement}function rl(e,t){return il(t)&&Object.keys(e).includes(t)}function al(e,t){return Object.values(e).includes(t)}function ll(e){return"symbol"===typeof e}function dl(e){return il(e)&&("none"===e||null!=Hr(e))}function cl(e,t){return e in t}var ul=/^(?:(.)?([<>=^]))?([+\-( ])?([$\u20ac\xa3\xa5\u20a3\u20b9#])?(0)?(\d+)?(,)?(?:\.(\d+))?(~)?([%a-z])?$/i,hl=/^((?:[^#]|#[^{])*)#{([^}]+)}(.*)$/;function pl(e){if(!il(e))return!1;const t=hl.exec(e);return ul.test(t?t[2]:e)}function gl(e){let t,i;const n=hl.exec(e);n&&([,t,e,i]=n);const o=ul.exec(e);if(!o)return void jr.warnOnce("The number formatter is invalid: ".concat(e));const[,s,r,a,l,d,c,u,h,p,g]=o;return{fill:s,align:r,sign:a,symbol:l,zero:d,width:Number.parseInt(c),comma:u,precision:Number.parseInt(h),trim:Boolean(p),type:g,prefix:t,suffix:i}}function ml(e){const t="string"===typeof e?gl(e):e;if(null==t)return;const{fill:i,align:n,sign:o="-",symbol:s,zero:r,width:a,comma:l,type:d,prefix:c="",suffix:u="",precision:h}=t;let{trim:p}=t;const g=null==h||Number.isNaN(h);let m;if(d)if(d in vl&&d in fl)m=g?fl[d]:vl[d];else if(d in vl)m=vl[d];else{if(!(d in fl))throw new Error("The number formatter type is invalid: ".concat(d));m=fl[d]}else m=vl.g,p=!0;const f=d?6:12;let v;g||(v=h);let y=n,b=i;return r&&(null!==b&&void 0!==b||(b="0"),null!==y&&void 0!==y||(y="=")),(e,t)=>{var i;let n;n=null!=v?v:"f"===d||"%"===d?null!==t&&void 0!==t?t:f:d?f:null!==t&&void 0!==t?t:f;let r=m(e,n);p&&(r=function(e){if(!e.endsWith("0")||!e.includes("."))return e;let t=e.length-1;for(;t>0;){if("0"!=e[t]){if("."==e[t]){t-=1;break}break}t-=1}return e.substring(0,t+1)}(r)),l&&(r=function(e,t){let i=e.indexOf(".");i<0&&(i=e.length);const n=e.substring(0,i).split(""),o=e.substring(i);for(let s=n.length-3;s>0;s-=3)n.splice(s,0,t);return"".concat(n.join("")).concat(o)}(r,l));const h=function(e,t){if("#"===e)switch(t){case"b":return"0b";case"o":return"0o";case"x":return"0x";case"X":return"0X";default:return""}return null!==e&&void 0!==e?e:""}(s,d),g=null!==(i=null===h||void 0===h?void 0:h.length)&&void 0!==i?i:0;h&&(r="".concat(h).concat(r)),"s"===d&&(r="".concat(r).concat(function(e){return xl[wl(e)]}(e))),"%"!==d&&"p"!==d||(r="".concat(r,"%"));const{value:x,prefixLength:C}=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("("===i)return e>=0?{value:t,prefixLength:0}:{value:"(".concat(t,")"),prefixLength:1};let n="";e<0?n=Cl:"+"===i?n="+":" "===i&&(n=" ");return{value:"".concat(n).concat(t),prefixLength:n.length}}(e,r,o),S=C+g;let w=x;return null==a||Number.isNaN(a)||(w=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:">",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const s=t-e.length;if(s<=0)return e;const r=i.repeat(s);if("="===n){const t=Math.min(Math.max(o,0),e.length),i=e.slice(0,t),n=e.slice(t);return"".concat(i).concat(r).concat(n)}if(">"===n||!n)return r+e;if("<"===n)return"".concat(e).concat(r);if("^"===n){const t=Math.ceil(s/2),n=Math.floor(s/2);return"".concat(i.repeat(t)).concat(e).concat(i.repeat(n))}return r+e}(w,a,null!==b&&void 0!==b?b:" ",y,S)),w="".concat(c).concat(w).concat(u),w}}var fl={b:e=>Sl(e).toString(2),c:e=>String.fromCodePoint(e),d:e=>Math.round(Math.abs(e)).toFixed(0),o:e=>Sl(e).toString(8),x:e=>Sl(e).toString(16),X:e=>fl.x(e).toUpperCase(),n:e=>fl.d(e),"%":e=>"".concat(Sl(100*e).toFixed(0))},vl={e:(e,t)=>Math.abs(e).toExponential(t),E:(e,t)=>vl.e(e,t).toUpperCase(),f:(e,t)=>Math.abs(e).toFixed(t),F:(e,t)=>vl.f(e,t).toUpperCase(),g:(e,t)=>{if(0===e)return"0";const i=Math.abs(e),n=Math.floor(Math.log10(i));return n>=-4&&n<t?i.toFixed(t-1-n):i.toExponential(t-1)},G:(e,t)=>vl.g(e,t).toUpperCase(),n:(e,t)=>vl.g(e,t),p:(e,t)=>vl.r(100*e,t),r:(e,t)=>{if(0===e)return"0";const i=Math.abs(e),n=Math.floor(Math.log10(i))-(t-1);if(n<=0)return i.toFixed(-n);const o=10**n;return(Math.round(i/o)*o).toFixed()},s:(e,t)=>{const i=wl(e);return vl.r(e/10**i,t)},"%":(e,t)=>vl.f(100*e,t)},yl=-24,bl=24,xl={[yl]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xb5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[bl]:"Y"},Cl="\u2212";function Sl(e){return Math.floor(Math.abs(e))}function wl(e){return za(yl,e?3*Math.floor(Math.log10(Math.abs(e))/3):0,bl)}var Ml={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function kl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date(e.getFullYear(),0,1);const i=e.getTimezoneOffset()-t.getTimezoneOffset(),n=e.getTime()-t.getTime()+6e4*i;return Math.floor(n/864e5)}function Dl(e,t){const i=(t-new Date(e.getFullYear(),0,1).getDay()+7)%7,n=new Date(e.getFullYear(),0,i+1);return n<=e?Math.floor(kl(e,n)/7)+1:0}function Il(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.getFullYear();const i=new Date(t,0,1).getDay(),n=new Date(t,0,(4-i+7)%7-3+1);return n<=e?Math.floor(kl(e,n)/7)+1:Il(e,t-1)}var Al={a:e=>Ml.shortDays[e.getDay()],A:e=>Ml.days[e.getDay()],b:e=>Ml.shortMonths[e.getMonth()],B:e=>Ml.months[e.getMonth()],c:"%x, %X",d:(e,t)=>Nl(e.getDate(),2,null!==t&&void 0!==t?t:"0"),e:"%_d",f:(e,t)=>Nl(1e3*e.getMilliseconds(),6,null!==t&&void 0!==t?t:"0"),H:(e,t)=>Nl(e.getHours(),2,null!==t&&void 0!==t?t:"0"),I:(e,t)=>{const i=e.getHours()%12;return 0===i?"12":Nl(i,2,null!==t&&void 0!==t?t:"0")},j:(e,t)=>Nl(kl(e)+1,3,null!==t&&void 0!==t?t:"0"),m:(e,t)=>Nl(e.getMonth()+1,2,null!==t&&void 0!==t?t:"0"),M:(e,t)=>Nl(e.getMinutes(),2,null!==t&&void 0!==t?t:"0"),L:(e,t)=>Nl(e.getMilliseconds(),3,null!==t&&void 0!==t?t:"0"),p:e=>e.getHours()<12?"AM":"PM",Q:e=>String(e.getTime()),s:e=>String(Math.floor(e.getTime()/1e3)),S:(e,t)=>Nl(e.getSeconds(),2,null!==t&&void 0!==t?t:"0"),u:e=>{let t=e.getDay();return t<1&&(t+=7),String(t%7)},U:(e,t)=>Nl(Dl(e,0),2,null!==t&&void 0!==t?t:"0"),V:(e,t)=>Nl(Il(e),2,null!==t&&void 0!==t?t:"0"),w:(e,t)=>Nl(e.getDay(),2,null!==t&&void 0!==t?t:"0"),W:(e,t)=>Nl(Dl(e,1),2,null!==t&&void 0!==t?t:"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(e,t)=>Nl(e.getFullYear()%100,2,null!==t&&void 0!==t?t:"0"),Y:(e,t)=>Nl(e.getFullYear(),4,null!==t&&void 0!==t?t:"0"),Z:e=>function(e){const t=e.getTimezoneOffset(),i=Math.abs(t);return"".concat(t>0?"-":"+").concat(Nl(Math.floor(i/60),2,"0")).concat(Nl(Math.floor(i%60),2,"0"))}(e),"%":()=>"%"},Ll={_:" ",0:"0","-":""};function Nl(e,t,i){const n=String(Math.floor(e));return n.length>=t?n:"".concat(i.repeat(t-n.length)).concat(n)}function Tl(e){const t=[];for(;e.length>0;){let i=e.indexOf("%");if(0!==i){const n=i>0?e.substring(0,i):e;t.push(n)}if(i<0)break;const n=e[i+1],o=Ll[n];null!=o&&i++;const s=e[i+1],r=Al[s];if("function"===typeof r)t.push([r,o]);else if("string"===typeof r){const e=Tl(r);t.push([e,o])}else t.push("".concat(null!==o&&void 0!==o?o:"").concat(s));e=e.substring(i+2)}return e=>{const i="number"===typeof e?new Date(e):e;return t.map(e=>"string"===typeof e?e:e[0](i,e[1])).join("")}}function Rl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;const{leading:n=!1,trailing:o=!0,maxWait:s=1/0}=null!==i&&void 0!==i?i:{};let r,a;if(s<t)throw new Error("Value of maxWait cannot be lower than waitMs.");return Object.assign(function(){for(var i=arguments.length,l=new Array(i),d=0;d<i;d++)l[d]=arguments[d];if(n&&!a)return a=Date.now(),r=setTimeout(()=>a=null,t),void e(...l);let c=t;if(s!==1/0&&a){const e=Date.now()-a;t>s-e&&(c=s-e)}clearTimeout(r),null!==a&&void 0!==a||(a=Date.now()),r=setTimeout(()=>{a=null,o&&e(...l)},c)},{cancel(){clearTimeout(r),a=null}})}function El(e,t,i){const{leading:n=!0,trailing:o=!0}=null!==i&&void 0!==i?i:{};let s,r,a=!1;function l(){o&&r?(s=setTimeout(l,t),e(...r)):a=!1,r=null}return Object.assign(function(){for(var i=arguments.length,o=new Array(i),d=0;d<i;d++)o[d]=arguments[d];a?r=o:(a=!0,s=setTimeout(l,t),n?e(...o):r=o)},{cancel(){clearTimeout(s),a=!1,r=null}})}function Pl(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{return e(...t)}catch(n){const e=i?" `".concat(i,"`"):"";Zr("Uncaught exception in user callback".concat(e),n)}}var Ol="\u2026",Fl=/\r?\n/g,zl="\u200b";function Bl(e){let{fontSize:t,fontStyle:i,fontWeight:n,fontFamily:o}=e,s="";return i&&"normal"!==i&&(s+="".concat(i," ")),n&&"normal"!==n&&400!==n&&(s+="".concat(n," ")),s+="".concat(t,"px"),s+=" ".concat(o),s}function Vl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.15;return Math.round(e*t)}function Gl(e){return String(null!==e&&void 0!==e?e:"")}var Hl=/[\s.,;:-]{1,5}$/;function jl(e){return e.replace(Hl,"")+Ol}function Wl(e){return zl+e+zl}function _l(e){return e.replaceAll(zl,"")}function Kl(e){return Ua(e)?Yl(e.at(-1)):Ul(Gl(e))}function Ul(e){return e.endsWith(Ol)}function Yl(e){return Gl(null===e||void 0===e?void 0:e.text).endsWith(Ol)}function $l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"and",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:String,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;if(0===e.length)return"";if(1===e.length)return i(e[0]);const o=(e=e.map(i)).pop();if(e.length>=n){const i=e.length-(n-1);return"".concat(e.slice(0,n-1).join(", "),", and ").concat(i," more ").concat(t," ").concat(o)}return"".concat(e.join(", ")," ").concat(t," ").concat(o)}function Zl(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;if("number"===typeof e){if(Number.isNaN(e))return"NaN";if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity"}const n=null!==(t=JSON.stringify(e))&&void 0!==t?t:typeof e;return n.length>i?"".concat(n.slice(0,i),"... (+").concat(n.length-i," characters)"):n}function Xl(e){let t=1;for(let i=0;i<e.length;i++)10===e.codePointAt(i)&&t++;return t}function ql(e,t){if(e===t)return 0;const[i,n]=e.length<t.length?[e,t]:[t,e],o=i.length,s=n.length;let r=new Array(o+1).fill(0).map((e,t)=>t),a=new Array(o+1);for(let l=1;l<=s;l++){a[0]=l;for(let e=1;e<=o;e++){const t=n[l-1]===i[e-1]?0:1;a[e]=Math.min(r[e]+1,a[e-1]+1,r[e-1]+t)}[r,a]=[a,r]}return r[o]}function Ql(e){return e.replaceAll(Jl,(e,t)=>(t>0?"-":"")+e.toLowerCase())}var Jl=/[A-Z]+(?![a-z])|[A-Z]/g;function ed(e){return null==e?arguments.length>1&&void 0!==arguments[1]?arguments[1]:"":Ua(e)?e.map(e=>Gl(e.text)).join(""):il(e)?e:String(e)}var td=Symbol("description"),id=Symbol("required"),nd=Symbol("marked"),od=Symbol("undocumented"),sd=Symbol("union"),rd=[["placement","position"],["padding","spacing","gap"],["color","fill","stroke"],["whisker","wick"],["nodeClick","seriesNodeClick"],["nodeDoubleClick","seriesNodeDoubleClick"],["src","url"]].reduce((e,t)=>{for(const i of t)e.set(i.toLowerCase(),new Set(t.filter(e=>e!==i)));return e},new Map),ad=(e=>(e.Invalid="invalid",e.Required="required",e.Unknown="unknown",e))(ad||{});function ld(e,t){return ol(t)?"".concat(e,"[").concat(t,"]"):e?"".concat(e,".").concat(t):t}var dd=class{constructor(e,t,i,n,o){this.type=e,this.description=t,this.value=i,this.path=n,this.key=o}setUnionType(e,t){if(this.path.startsWith(t)){const i=this.path.slice(t.length);this.altPath="".concat(t,"[type=").concat(e,"]").concat(i)}}getPrefix(){const{altPath:e=this.path,key:t}=this;return e||t?"Option `".concat(t?ld(e,t):e,"`"):"Value"}toString(){const{description:e="unknown",type:t,value:i}=this;return"required"===t&&null==i?"".concat(this.getPrefix()," is required and has not been provided; expecting ").concat(e,", ignoring."):"".concat(this.getPrefix()," cannot be set to `").concat(Zl(i,50),"`; expecting ").concat(e,", ignoring.")}},cd=class extends dd{constructor(e,t,i,n){super("unknown",void 0,t,i,n),this.suggestions=e,this.key=n}getPrefix(){var e;return"Unknown option `".concat(ld(null!==(e=this.altPath)&&void 0!==e?e:this.path,this.key),"`")}getPostfix(){const e=$l(function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=e.toLowerCase(),o=rd.get(n);return t.filter(e=>{const t=e.toLowerCase();return!0===(null===o||void 0===o?void 0:o.has(e))||t.includes(n)||ql(n,t)<=i})}(this.key,this.suggestions),"or",e=>"`".concat(e,"`"));return e?"; Did you mean ".concat(e,"? Ignoring."):", ignoring."}toString(){return"".concat(this.getPrefix()).concat(this.getPostfix())}};function ud(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!Qa(e))return{cleared:null,invalid:[new dd("required","an object",e,i)]};const n={},o=[],s=new Set(Object.keys(e)),r=[];if(sd in t){const s=Object.keys(t),r=t[sd];if(null!=e.type&&s.includes(e.type)||null==e.type&&null!=r){const{type:s=r}=e,a=ud(l(e,mr),t[s],i);Object.assign(n,{type:s},a.cleared);for(const e of a.invalid)e.setUnionType(s,i);o.push(...a.invalid)}else{const t=$l(s,"or",e=>"'".concat(e,"'"));o.push(new dd("required","a keyword such as ".concat(t),e.type,i,"type"))}return{cleared:n,invalid:o}}for(const a of Object.keys(t)){const l=t[a],d=l[id],c=e[a];if(s.delete(a),void 0===c&&(l[od]||r.push(a),!d))continue;const u=ld(i,a);if(qa(l)){const t=l(c,{options:e,path:u});if("object"===typeof t){if(o.push(...t.invalid),t.valid){n[a]=t.cleared;continue}if($d(t.invalid,u))continue}else if(t){n[a]=c;continue}o.push(new dd(d?"required":"invalid",l[td],c,i,a))}else{const e=ud(c,l,u);null!=e.cleared&&(n[a]=e.cleared),o.push(...e.invalid)}}for(const a of s){const t=e[a];void 0!==t&&o.push(new cd(r,t,i,a))}return{cleared:n,invalid:o}}function hd(e,t){if(qa(e)){let i=function(t,i){return e(t,i)};return i[td]=t,i}return p(p({},e),{},{[td]:t})}function pd(e){return Object.assign(qa(e)?(t,i)=>e(t,i):md(e),{[id]:!0,[td]:e[td]})}function gd(e){return Object.assign(qa(e)?(t,i)=>e(t,i):md(e),{[od]:!0,[td]:e[td]})}var md=function(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return hd((i,n)=>{const o=ud(i,e,n.path),s=!$d(o.invalid,n.path);return{valid:s,cleared:s||!t?o.cleared:null,invalid:o.invalid}},arguments.length>1&&void 0!==arguments[1]?arguments[1]:"an object")},fd=(e,t,i)=>p(p({},e),{},{[td]:t,[sd]:i}),vd=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return hd((e,i)=>{const n=[];for(const o of t){const t=o(e,i);if("object"===typeof t){if(n.push(...t.invalid),!t.valid)return{valid:!1,cleared:e,invalid:n};e=t.cleared}else if(!t)return!1}return{valid:!0,cleared:e,invalid:n}},$l(t.filter(e=>!e[od]).map(e=>e[td]).filter(Ka),"and"))},yd=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return hd((e,i)=>{for(const n of t){const t=n(e,i);if("object"===typeof t?t.valid:t)return t}return!1},$l(t.filter(e=>!e[od]).map(e=>e[td]).filter(Ka),"or"))},bd=e=>ol(e)||Za(e),xd=hd(Ua,"an array"),Cd=hd(Ya,"a boolean"),Sd=hd(qa,"a function"),wd=hd(dl,"a color string"),Md=hd(e=>$a(e)||(ol(e)||il(e))&&Za(new Date(e)),"a date"),kd=hd(Ka,"a defined value"),Dd=hd(ol,"a number"),Id=hd(Qa,"an object"),Ad=hd(il,"a string"),Ld=hd(e=>"undefined"===typeof HTMLElement||e instanceof HTMLElement,"an html element"),Nd=function(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;return t=i===1/0?"an array of at least ".concat(e," items"):e===i?"an array of exactly ".concat(e," items"):0===e?"an array of no more than ".concat(i," items"):"an array of at least ".concat(e," and no more than ").concat(i," items"),hd(t=>Ua(t)&&t.length>=e&&t.length<=i,t)},Td=function(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;return t=i===1/0?"a string of at least ".concat(e," characters"):e===i?"an string of exactly ".concat(e," characters"):0===e?"an string of no more than ".concat(i," characters"):"an string of at least ".concat(e," and no more than ").concat(i," characters"),hd(t=>il(t)&&t.length>=e&&t.length<=i,t)},Rd=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return hd(i=>ol(i)&&(i>e||t&&i===e),"a number greater than ".concat(t?"or equal to ":"").concat(e))},Ed=(e,t)=>hd(i=>ol(i)&&i>=e&&i<=t,"a number between ".concat(e," and ").concat(t," inclusive")),Pd=Rd(0),Od=Rd(0,!1),Fd=Ed(0,1),zd=e=>hd((t,i)=>{let{options:n}=i;return!bd(t)||!bd(n[e])||t<n[e]},"the value to be less than `".concat(e,"`")),Bd=e=>hd((t,i)=>{let{options:n}=i;return!bd(t)||!bd(n[e])||t<=n[e]},"the value to be less than or equal to `".concat(e,"`")),Vd=e=>hd((t,i)=>{let{options:n}=i;return!bd(t)||!bd(n[e])||t>n[e]},"the value to be greater than `".concat(e,"`"));function Gd(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];Qa(t[0])&&(t=Object.values(t[0]));const n=$l(t,"or",e=>"'".concat(e,"'"));return hd(e=>t.includes(e),"a keyword such as ".concat(n))}function Hd(){return Gd}var jd=e=>hd(t=>e===t,"the value ".concat(JSON.stringify(e))),Wd=(e,t)=>hd(t=>t instanceof e,null!==t&&void 0!==t?t:"an instance of ".concat(e.name)),_d=function(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return hd((t,n)=>{if(!Ua(t))return!1;let o=i;const s=[],r=[],a=e=>{o=i?o&&e:o||e};if(0===t.length)return{valid:!0,cleared:s,invalid:r};for(let i=0;i<t.length;i++){const o=t[i],l=e(o,{options:o,path:"".concat(n.path,"[").concat(i,"]")});"object"===typeof l?(a(l.valid),r.push(...l.invalid),null!=l.cleared&&s.push(l.cleared)):(a(l),l&&s.push(o))}return{valid:o,cleared:o||!i?s:null,invalid:r}},null!==t&&void 0!==t?t:"".concat(e[td]," array"))},Kd=function(e){return hd((t,i)=>{if(!Ua(t))return!1;const n=[],o=[];for(let s=0;s<t.length;s++){const r="".concat(i.path,"[").concat(s,"]"),a=ud(t[s],e,r);$d(a.invalid,r)||n.push(a.cleared),o.push(...a.invalid)}return{valid:!0,cleared:n,invalid:o}},arguments.length>1&&void 0!==arguments[1]?arguments[1]:"an object array")},Ud=(e,t)=>hd((i,n)=>{if(!qa(i))return!1;if(nd in i)return!0;const o=null!==t&&void 0!==t?t:e[td];return{valid:!0,cleared:Object.assign(function(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];const a=Pl(i,s);if(null==a)return;const l=e(a,{options:a,path:""});if("object"===typeof l){if(Zd(l,n,o,a),l.valid)return l.cleared}else{if(l)return a;Zr("Callback `".concat(n.path,"` returned an invalid value `").concat(Zl(a,50),"`; expecting ").concat(o,", ignoring."))}},{[nd]:!0}),invalid:[]}},"a function"),Yd=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"an object";return hd((i,n)=>{if(!qa(i))return!1;if(nd in i)return!0;const o=t,s=Object.assign(function(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];const a=Pl(i,s,n.path);if(null==a)return;const l=ud(a,e);return Zd(l,n,o,a),l.cleared},{[nd]:!0});return{valid:!0,cleared:s,invalid:[]}},"a function")};function $d(e,t){return e.some(e=>"required"===e.type&&e.path===t)}function Zd(e,t,i,n){if(0!==e.invalid.length){if(Ua(n)){var o,s;const r=null!==(o=null!==i&&void 0!==i?i:null===(s=e.invalid[0])||void 0===s?void 0:s.description)&&void 0!==o?o:"a valid value";return Zr("Callback `".concat(t.path,"` returned an invalid value `").concat(Zl(n,50),"`; expecting ").concat(r,", ignoring."))}for(const n of e.invalid){if(n instanceof cd)return Zr("Callback `".concat(t.path,"` returned an unknown property `").concat(ld(n.path,n.key),"`").concat(n.getPostfix()));const e=Zl(n.value,50);Zr(n.key?"Callback `".concat(t.path,"` returned an invalid property `").concat(ld(n.path,n.key),"`: `").concat(e,"`; expecting ").concat(n.description,", ignoring."):"Callback `".concat(t.path,"` returned an invalid value `").concat(e,"`; expecting ").concat(null!==i&&void 0!==i?i:n.description,", ignoring."))}}}var Xd=e=>{if(!Qa(e))return!1;const t=Object.keys(e);return 1===t.length&&t[0].startsWith("$")},qd=md({color:wd,stop:Fd},""),Qd=hd(e=>{let t=-1/0;for(const i of e)if(null!=(null===i||void 0===i?void 0:i.stop)){if(i.stop<t)return!1;t=i.stop}return!0},"color stops to be defined in ascending order"),Jd=vd(Nd(2),_d(qd),Qd),ec=Gd("axis","item","series"),tc=md({type:pd(jd("gradient")),colorStops:pd(Jd),rotation:Dd,gradient:gd(Gd("linear","radial","conic")),bounds:gd(ec),reverse:gd(Cd),colorSpace:gd(Gd("rgb","oklch"))},"a gradient object with color stops"),ic={stroke:wd,strokeWidth:Pd,strokeOpacity:Fd},nc=md({type:pd(jd("gradient")),gradient:pd(Gd("linear","radial","conic")),bounds:pd(ec),colorStops:pd(yd(Jd,vd(Nd(2),_d(wd)))),rotation:pd(Dd),reverse:pd(Cd),colorSpace:pd(Gd("rgb","oklch"))}),oc=md({type:pd(jd("pattern")),pattern:pd(Gd("vertical-lines","horizontal-lines","forward-slanted-lines","backward-slanted-lines","circles","squares","triangles","diamonds","stars","hearts","crosses")),path:Td(2),width:pd(Pd),height:pd(Pd),fill:pd(wd),fillOpacity:pd(Fd),backgroundFill:pd(wd),backgroundFillOpacity:pd(Fd),padding:pd(Pd),rotation:pd(Dd),scale:pd(Pd),stroke:pd(wd),strokeWidth:pd(Pd),strokeOpacity:pd(Fd)}),sc=md({type:pd(jd("image")),url:Ad,width:Pd,height:Pd,rotation:pd(Dd),backgroundFill:pd(wd),backgroundFillOpacity:Fd,fit:pd(Gd("stretch","contain","cover")),repeat:pd(Gd("repeat","repeat-x","repeat-y","no-repeat"))}),rc=fd({gradient:{colorStops:Jd,rotation:Dd,gradient:gd(Gd("linear","radial","conic")),bounds:gd(ec),reverse:gd(Cd),colorSpace:gd(Gd("rgb","oklch"))},pattern:p(p({pattern:Gd("vertical-lines","horizontal-lines","forward-slanted-lines","backward-slanted-lines","circles","squares","triangles","diamonds","stars","hearts","crosses"),path:Td(2),width:Pd,height:Pd,rotation:Dd,scale:Pd,fill:wd,fillOpacity:Fd,backgroundFill:wd,backgroundFillOpacity:Fd},ic),{},{padding:gd(Pd)}),image:{url:pd(Ad),backgroundFill:wd,backgroundFillOpacity:Fd,width:Pd,height:Pd,fit:Gd("stretch","contain","cover","none"),repeat:Gd("repeat","repeat-x","repeat-y","no-repeat"),rotation:Dd}},"a color object"),ac=yd(wd,md(rc,"a color object")),lc={fill:ac,fillOpacity:Fd};lc.fillGradientDefaults=gd(nc),lc.fillPatternDefaults=gd(oc),lc.fillImageDefaults=gd(sc);var dc={lineDash:_d(Pd),lineDashOffset:Dd},cc=p(p(p(p({},lc),ic),dc),{},{opacity:Fd,cornerRadius:Pd}),uc=p(p(p({},ic),dc),{},{opacity:Fd}),hc=p(p(p(p({},lc),ic),dc),{},{opacity:Fd});function pc(e){return{enabled:Cd,range:Gd("tooltip","node"),highlightedItem:e,unhighlightedItem:e}}function gc(e,t){return{enabled:Cd,range:Gd("tooltip","node"),highlightedItem:e,unhighlightedItem:e,highlightedSeries:t,unhighlightedSeries:t,bringToFront:Cd}}var mc=p(p(p({start:kd,stop:kd},ic),lc),dc),fc=p(p({start:kd,stop:kd},ic),dc),vc=md({enabled:Cd,key:pd(Gd("x","y")),segments:Kd(mc,"path segments array")},"a segmentation object",!0),yc=md({enabled:Cd,key:pd(Gd("x","y")),segments:Kd(fc,"path segments array")},"a segmentation object",!0),bc=md({googleFont:Ad},"google font"),xc=yd(Ad,Xd,bc,_d(yd(Ad,bc))),Cc={color:wd,fontFamily:xc,fontSize:Pd,fontStyle:Gd("normal","italic","oblique"),fontWeight:yd(Pd,Gd("normal","bold","bolder","lighter"))},Sc=md({top:Dd,right:Dd,bottom:Dd,left:Dd},"padding object"),wc=yd(Dd,Sc),Mc={enabled:Cd,stroke:wd,strokeWidth:Pd,strokeOpacity:Fd},kc=p({border:p({},Mc),cornerRadius:Dd,padding:wc},lc);var Dc=["top","top-right","top-left","bottom","bottom-right","bottom-left","right","right-top","right-bottom","left","left-top","left-bottom"],Ic={floating:Cd,placement:Gd(...Dc),xOffset:Dd,yOffset:Dd},Ac=hd((e,t)=>{let i;if("string"===typeof e){Dc.includes(e)?i=!0:(i={valid:!1,invalid:[],cleared:null},i.invalid.push(new dd("invalid",'a legend placement string: ["'.concat(Dc.join('", "'),'"]'),e,t.path)))}else{const{cleared:t,invalid:n}=ud(e,Ic);i={valid:0===n.length,cleared:t,invalid:n}}return i},"a legend position object or placement string"),Lc=yd(Gd("circle","cross","diamond","heart","plus","pin","square","star","triangle"),Sd),Nc=Gd("never","always","hyphenate","on-space"),Tc=Gd("top","right","bottom","left","top-right","bottom-right","bottom-left","top-left","center"),Rc=yd(Pd,Gd("exact","nearest")),Ec=yd(Ad,Dd,Md,Kd(p({text:pd(Ad)},Cc),"text segments array")),Pc=p({enabled:Cd,text:Ec,textAlign:Gd("left","center","right"),wrapping:Gd("never","always","hyphenate","on-space"),spacing:Pd,maxWidth:Pd,maxHeight:Pd},Cc);Pc.padding=gd(Pd);var Oc={enabled:Cd,text:Ec,renderer:Ud(yd(Ad,Ld))},Fc=["defaults","download","zoom-to-cursor","pan-to-cursor","reset-zoom","toggle-series-visibility","toggle-other-series","separator"],zc={type:Gd("action","separator"),showOn:Gd("always","series-area","series-node","legend-item"),label:pd(Ad),enabled:Cd,action:Sd,items:(e,t)=>Gc(e,t)};zc.iconUrl=gd(Ad);var Bc=md(zc),Vc=hd((e,t)=>{let i;if("string"===typeof e){Fc.includes(e)?i=!0:(i={valid:!1,invalid:[],cleared:null},i.invalid.push(new dd("invalid",'a context menu item string alias: ["'.concat(Fc.join('", "'),'"]'),e,t.path)))}else i=Bc(e,t);return i},"a context menu item object or string alias: [".concat(Fc.join(", "),"]")),Gc=_d(Vc,"a menu items array",!1),Hc={label:Ad,ariaLabel:Ad,tooltip:Ad,icon:Gd("align-center","align-left","align-right","arrow-drawing","arrow-down-drawing","arrow-up-drawing","callout-annotation","candlestick-series","close","comment-annotation","date-range-drawing","date-price-range-drawing","delete","disjoint-channel-drawing","drag-handle","fill-color","line-style-solid","line-style-dashed","line-style-dotted","high-low-series","hlc-series","hollow-candlestick-series","horizontal-line-drawing","line-color","line-series","line-with-markers-series","locked","measurer-drawing","note-annotation","ohlc-series","pan-end","pan-left","pan-right","pan-start","parallel-channel-drawing","position-bottom","position-center","position-top","price-label-annotation","price-range-drawing","reset","settings","step-line-series","text-annotation","trend-line-drawing","fibonacci-retracement-drawing","fibonacci-retracement-trend-based-drawing","unlocked","vertical-line-drawing","zoom-in","zoom-out")},jc=yd(Ad,Ud(Ec)),Wc=md({x:jc,y:jc,angle:jc,radius:jc,size:jc,color:jc,label:jc,secondaryLabel:jc,sectorLabel:jc,calloutLabel:jc,legendItem:jc}),_c=hd(pl,"a valid number format string"),Kc={width:Pd,height:Pd,minWidth:Pd,minHeight:Pd,suppressFieldDotNotation:Cd,title:Pc,subtitle:Pc,footnote:Pc,padding:{top:Pd,right:Pd,bottom:Pd,left:Pd},seriesArea:{border:Mc,clip:Cd,cornerRadius:Dd,padding:wc},legend:{enabled:Cd,position:Ac,orientation:Gd("horizontal","vertical"),maxWidth:Pd,maxHeight:Pd,spacing:Pd,border:Mc,cornerRadius:Dd,padding:wc,fill:ac,fillOpacity:Fd,preventHidingAll:Cd,reverseOrder:Cd,toggleSeries:Cd,item:{marker:{size:Pd,shape:Lc,padding:Pd,strokeWidth:Pd},line:{length:Pd,strokeWidth:Pd},label:p({maxLength:Pd,formatter:Sd},Cc),maxWidth:Pd,paddingX:Pd,paddingY:Pd,showSeriesStroke:Cd},pagination:{marker:{size:Pd,shape:Lc,padding:Pd},activeStyle:p(p({},lc),ic),inactiveStyle:p(p({},lc),ic),highlightStyle:p(p({},lc),ic),label:Cc},listeners:{legendItemClick:Sd,legendItemDoubleClick:Sd}},gradientLegend:{enabled:Cd,position:Ac,spacing:Pd,reverseOrder:Cd,border:Mc,cornerRadius:Dd,padding:wc,fill:ac,fillOpacity:Fd,gradient:{preferredLength:Pd,thickness:Pd},scale:{label:p(p({},Cc),{},{minSpacing:Pd,format:_c,formatter:Sd}),padding:Pd,interval:{step:Dd,values:xd,minSpacing:vd(Pd,zd("maxSpacing")),maxSpacing:vd(Pd,Vd("minSpacing"))}}},listeners:{seriesNodeClick:Sd,seriesNodeDoubleClick:Sd,seriesVisibilityChange:Sd,click:Sd,doubleClick:Sd,annotations:Sd,zoom:Sd},loadGoogleFonts:Cd,highlight:{drawingMode:Gd("overlay","cutout"),range:Gd("tooltip","node")},overlays:{loading:Oc,noData:Oc,noVisibleSeries:Oc,unsupportedBrowser:Oc},tooltip:{enabled:Cd,showArrow:Cd,pagination:Cd,delay:Pd,range:Rc,wrapping:Nc,mode:Gd("single","shared","compact"),position:{anchorTo:Gd("pointer","node","chart"),placement:yd(Tc,_d(Tc)),xOffset:Dd,yOffset:Dd}},animation:kd,contextMenu:kd,context:()=>!0,dataSource:{getData:Sd},keyboard:{enabled:Cd,tabIndex:Dd},touch:{dragAction:Gd("none","drag","hover")},ranges:{enabled:Cd,buttons:Kd(p(p({},Hc),{},{value:yd(Dd,vd(_d(yd(Dd,Md)),Nd(2,2)),Sd)}),"range button options array")},locale:{localeText:Id,getLocaleText:Ud(Ad)},background:{visible:Cd,fill:wd,image:{url:pd(Ad),top:Dd,right:Dd,bottom:Dd,left:Dd,width:Pd,height:Pd,opacity:Fd}},styleNonce:Ad,sync:kd,zoom:kd,formatter:yd(Ud(Ec),Wc)};Kc.flashOnUpdate=gd(kd),Kc.dataSource.requestThrottle=gd(Pd),Kc.dataSource.updateThrottle=gd(Pd),Kc.dataSource.updateDuringInteraction=gd(Cd),Kc.statusBar=gd(kd),Kc.foreground=gd(p({visible:Cd,text:Ad,image:{url:Ad,top:Dd,right:Dd,bottom:Dd,left:Dd,width:Pd,height:Pd,opacity:Fd}},lc)),Kc.overrideDevicePixelRatio=gd(Dd),Kc.sync.domainMode=gd(Gd("direction","position","key"));var Uc={cursor:Ad,context:()=>!0,showInLegend:Cd,nodeClickRange:Rc,listeners:{seriesNodeClick:Sd,seriesNodeDoubleClick:Sd},highlight:pc(hc)},Yc=p(p({},Uc),{},{id:Ad,visible:Cd,context:()=>!0,data:xd});Yc.seriesGrouping=gd(kd);var $c=p(p(p({shape:Lc,size:Pd},lc),ic),dc),Zc=p({enabled:Cd,itemStyler:Yd(p(p(p(p({},lc),ic),dc),{},{shape:Lc,size:Pd}))},$c),Xc=p(p({enabled:Cd,formatter:Ud(Ec),format:_c,itemStyler:Yd(p(p({enabled:Cd},kc),Cc))},kc),Cc),qc=p(p({},Xc),{},{lineHeight:Pd,minimumFontSize:Pd,wrapping:Nc,overflowStrategy:Gd("ellipsis","hide")}),Qc=p(p({visible:Cd,cap:p(p({visible:Cd,length:Pd,lengthRatio:Fd},ic),dc)},ic),dc),Jc=p(p({},Qc),{},{xLowerKey:Ad,xUpperKey:Ad,yLowerKey:Ad,yUpperKey:Ad,xLowerName:Ad,xUpperName:Ad,yLowerName:Ad,yUpperName:Ad,itemStyler:Yd(p(p(p({visible:Cd},ic),dc),{},{cap:p(p({visible:Cd,length:Pd,lengthRatio:Fd},ic),dc)}))}),eu={enabled:Cd,showArrow:Cd,range:Rc,renderer:Ud(yd(Ad,Dd,Md,md({heading:Ad,title:Ad,symbol:{marker:p(p({enabled:Cd,shape:Lc},lc),{},{stroke:wd,strokeOpacity:Fd,strokeWidth:Pd},dc),line:p({enabled:Cd,stroke:wd,strokeWidth:Pd,strokeOpacity:Fd},dc)},data:Kd({label:pd(Ad),value:pd(yd(Ad,Dd,Md))})},"tooltip renderer result object"))),position:{anchorTo:Gd("node","pointer","chart"),placement:yd(Tc,_d(Tc)),xOffset:Dd,yOffset:Dd},interaction:{enabled:Cd}},tu={enabled:Cd,xOffset:Dd,yOffset:Dd,blur:Pd,color:wd},iu=fd({linear:{},smooth:{tension:Fd},step:{position:Gd("start","middle","end")}},"interpolation line options"),nu=Symbol("BREAK"),ou="__decorator_config",su="__decorator_accessors";function ru(e,t){au(e,t).optional=!0}function au(e,t){if(null==Object.getOwnPropertyDescriptor(e,ou)&&Object.defineProperty(e,ou,{value:{}}),null==Object.getOwnPropertyDescriptor(e,su)){var i,n;const t=null===(i=Object.getPrototypeOf(e))||void 0===i?void 0:i[su],o=null!==(n=null===t||void 0===t?void 0:t.slice())&&void 0!==n?n:[];Object.defineProperty(e,su,{value:o})}const o=e[ou],s=t.toString();if(null!=o[s])return o[s];o[s]={setters:[],getters:[],observers:[]};const r=Object.getOwnPropertyDescriptor(e,t);let a=null===r||void 0===r?void 0:r.get,l=null===r||void 0===r?void 0:r.set;if(null==a||null==l){const i=e[su];let n=i.indexOf(t);-1===n&&(n=i.push(t)-1),null!==a&&void 0!==a||(a=function(){let e=this.__accessors;return null==e&&(e=i.slice().fill(void 0),Object.defineProperty(this,"__accessors",{value:e})),e[n]}),null!==l&&void 0!==l||(l=function(e){let t=this.__accessors;null==t&&(t=i.slice().fill(void 0),Object.defineProperty(this,"__accessors",{value:t})),t[n]=e})}return Object.defineProperty(e,t,{set:function(e){const{setters:i,observers:n}=o[s];let r;i.some(e=>e.length>2)&&(r=a.call(this));for(const o of i)if((e=o(this,t,e,r))===nu)return;l.call(this,e);for(const t of n)t(this,e,r)},get:function(){let e=a.call(this);for(const i of o[s].getters)if(e=i(this,t,e),e===nu)return;return e},enumerable:!0,configurable:!1}),o[s]}function lu(e,t,i){return(n,o)=>{const s=au(n,o);s.setters.push(e),t&&s.getters.unshift(t),i&&Object.assign(s,i)}}function du(e){return(t,i)=>{au(t,i).observers.push(e)}}function cu(e){return void 0!==e&&ou in e}function uu(e){const t=new Set;for(;cu(e);){var i;t.add(null===(i=e)||void 0===i?void 0:i[ou]),e=Object.getPrototypeOf(e)}return Array.from(t).flatMap(e=>Object.keys(e))}function hu(e){return uu(e).reduce((t,i)=>{var n;return t[String(i)]=null!==(n=e[i])&&void 0!==n?n:null,t},{})}function*pu(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const n of t)null!=n&&(n[Symbol.iterator]?yield*n:yield n)}function gu(e){return null!=e&&"object"===typeof e&&Symbol.iterator in e?e:[e]}function mu(e){for(const t of e)return t;throw new Error("AG Charts - no first() value found")}function*fu(e){const t=[void 0,void 0];for(const i of Object.keys(e))t[0]=i,t[1]=e[i],yield t}function vu(e){return Object.keys(e)}function yu(e,t){return Array.isArray(e)?!!Array.isArray(t)&&(e.length===t.length&&e.every((e,i)=>yu(e,t[i]))):el(e)?!!el(t)&&bu(e,t,yu):e===t}function bu(e,t,i){if(Object.is(e,t))return!0;for(const n of Object.keys(t))if(!(n in e))return!1;for(const n of Object.keys(e)){if(!(n in t))return!1;if(!i(e[n],t[n]))return!1}return!0}function xu(){const e={};for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];for(const s of i){if(!Qa(s))continue;const t=cu(s)?uu(s):Object.keys(s);for(const i of t){var o;if(el(e[i])&&el(s[i]))e[i]=xu(e[i],s[i]);else null!==(o=e[i])&&void 0!==o||(e[i]=s[i])}}return e}function Cu(){const e={};for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];for(const s of i){if(!Qa(s))continue;const t=cu(s)?uu(s):Object.keys(s);for(const i of t)if(el(e[i])&&el(s[i]))e[i]=Cu(e[i],s[i]);else if(!(i in e)){var o;null!==(o=e[i])&&void 0!==o||(e[i]=s[i])}}return e}function Su(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return i&&Ua(e)?e.map(e=>xu(e,...i)):e}function wu(e,t){const i={};for(const[n,o]of fu(e))i[n]=t(o,n,e);return i}function Mu(e,t){const i=p({},e);for(const n of t)delete i[n];return i}function ku(e,t){if(null==e)return;const i={};for(const n of t)Object.hasOwn(e,n)&&(i[n]=e[n]);return i}function Du(e,t){if(null==e)return!0;for(const[i,n]of fu(e))if(!t(i,n))return!1;return!0}function Iu(e){const t={};if(null==e)return t;for(const[i,n]of e)t[i]=n;return t}function Au(e,t){return(Ua(t)?t:t.split(".")).reduce((e,t)=>e[t],e)}var Lu=new Set(["__proto__","constructor","prototype"]);function Nu(e,t,i){const n=Ua(t)?t.slice():t.split("."),o=n.pop();if(n.some(e=>Lu.has(e)))return;const s=n.reduce((e,t)=>e[t],e);return s[o]=i,s[o]}function Tu(e,t,i){if(void 0===i)return t;for(const n of e){const e=i[n];void 0!==e&&(t[n]=e)}return t}function Ru(e,t,i){const n=null!==i&&void 0!==i?i:Object.keys(t);for(let o=0,s=n.length;o<s;o++){const i=n[o],s=t[i];e[i]!==s&&(e[i]=s)}return e}function Eu(e){if(null==e||"object"!==typeof e||!el(e))return e;Object.freeze(e);for(const t of Object.getOwnPropertyNames(e)){const i=e[t];null===i||"object"!==typeof i&&"function"!==typeof i||Object.isFrozen(i)||Eu(i)}return e}function Pu(e,t){return el(e)&&t in e}function Ou(e,t){return Pu(e,t)&&"string"===typeof e[t]}var Fu={fills:vd(Nd(2),_d(md({color:wd,stop:Dd},"")),Qd),fillMode:Gd("continuous","discrete")},zu=p(p(p({value:pd(Dd),text:Ad,shape:yd(Gd("circle","cross","diamond","heart","plus","pin","square","star","triangle","line"),Sd),placement:Gd("before","after","middle"),spacing:Pd,size:Pd,rotation:Dd},lc),ic),dc),Bu=p(p(p({value:pd(Dd),text:Ad,shape:yd(Gd("circle","cross","diamond","heart","plus","pin","square","star","triangle","line"),Sd),placement:Gd("inside","outside","middle"),spacing:Pd,size:Pd,rotation:Dd,label:p(p({},Xc),{},{spacing:Pd})},lc),ic),dc),Vu=p(p({},Mu(Uc,["listeners"])),{},{direction:Gd("horizontal","vertical"),cornerMode:Gd("container","item"),cornerRadius:Pd,thickness:Pd,segmentation:{enabled:Cd,spacing:Pd,interval:{values:_d(Dd),step:Dd,count:Dd}},bar:p(p(p(p({enabled:Cd,thickness:Pd,thicknessRatio:Fd},Fu),lc),ic),dc),label:p(p({},qc),{},{text:Ad,spacing:Pd,avoidCollisions:Cd,placement:Gd("inside-start","outside-start","inside-end","outside-end","inside-center","bar-inside","bar-inside-end","bar-outside-end","bar-end")}),tooltip:eu}),Gu=p(p(p({},Mu(Yc,["listeners"])),Vu),{},{type:pd(jd("linear-gauge")),value:pd(Dd),scale:p(p(p(p({min:vd(Dd,zd("max")),max:vd(Dd,Vd("min")),label:p({enabled:Cd,formatter:Sd,rotation:Dd,spacing:Pd,minSpacing:Pd,placement:Gd("before","after"),avoidCollisions:Cd,format:_c},Cc),interval:{values:_d(Dd),step:Dd}},Fu),lc),ic),dc),targets:Kd(zu,"target options array")});Gu.margin=gd(Dd),Gu.defaultColorRange=gd(_d(wd)),Gu.defaultTarget=gd(p(p({},zu),{},{value:Dd,label:p(p({},Xc),{},{spacing:Dd})})),Gu.defaultScale=gd(Gu.scale),Gu.scale.defaultFill=gd(wd);var Hu=p(p({},Mu(Uc,["listeners"])),{},{outerRadius:Pd,innerRadius:Pd,outerRadiusRatio:Fd,innerRadiusRatio:Fd,startAngle:Dd,endAngle:Dd,spacing:Pd,cornerMode:Gd("container","item"),cornerRadius:Pd,scale:p(p(p(p({min:vd(Dd,zd("max")),max:vd(Dd,Vd("min")),label:p({enabled:Cd,formatter:Sd,rotation:Dd,spacing:Pd,minSpacing:Pd,avoidCollisions:Cd,format:_c},Cc),interval:{values:_d(Dd),step:Dd}},Fu),lc),ic),dc),segmentation:{enabled:Cd,spacing:Pd,interval:{values:_d(Dd),step:Dd,count:Dd}},bar:p(p(p(p({enabled:Cd},Fu),lc),ic),dc),needle:p(p(p({enabled:Cd,spacing:Pd,radiusRatio:Fd},lc),ic),dc),label:p({text:Ad,spacing:Pd},qc),secondaryLabel:p({text:Ad},qc),tooltip:eu}),ju=p(p(p({},Mu(Yc,["listeners"])),Hu),{},{type:pd(jd("radial-gauge")),value:pd(Dd),targets:Kd(Bu,"target options array")});ju.defaultColorRange=gd(_d(wd)),ju.defaultTarget=gd(p(p({},Bu),{},{value:Dd,label:p(p({},Xc),{},{spacing:Dd})})),ju.scale.defaultFill=gd(wd);var Wu=class e{constructor(e){this.version=e.split("-")[0]}save(){const e={version:this.version};for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];for(const o of Object.values(i))e[o.mementoOriginatorKey]=this.encode(o,o.createMemento());return e}restore(e){if("object"===typeof e)if(null!=e)if("version"in e&&"string"===typeof e.version){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(const t of i){const i=this.decode(t,e[t.mementoOriginatorKey]),n=[];if(!t.guardMemento(i,n)){const e=n.length>0?"\n\n".concat(n.join("\n\n"),"\n\n"):"";return void jr.warnOnce("Could not restore [".concat(t.mementoOriginatorKey,"] data, value was invalid, ignoring.").concat(e),i)}t.restoreMemento(this.version,e.version,i)}}else jr.warnOnce("Could not restore data, missing [version] string in object, ignoring.");else jr.warnOnce("Could not restore data of type [null], expecting an object, ignoring.");else jr.warnOnce("Could not restore data of type [".concat(typeof e,"], expecting an object, ignoring."))}encode(t,i){try{return JSON.parse(JSON.stringify(i,e.encodeTypes))}catch(n){throw new Error("Failed to encode [".concat(t.mementoOriginatorKey,"] value [").concat(n,"]."),{cause:n})}}decode(t,i){if(null==i)return i;try{return JSON.parse(JSON.stringify(i),e.decodeTypes)}catch(n){throw new Error("Failed to decode [".concat(t.mementoOriginatorKey,"] value [").concat(n,"]."),{cause:n})}}static encodeTypes(e,t){return $a(this[e])?{__type:"date",value:this[e].toISOString()}:t}static decodeTypes(e,t){return Qa(this[e])&&"__type"in this[e]&&"date"===this[e].__type?new Date(this[e].value):t}},_u=(e=>(e.X="x",e.Y="y",e.Angle="angle",e.Radius="radius",e))(_u||{}),Ku=(e=>(e[e.FULL=0]="FULL",e[e.UPDATE_DATA=1]="UPDATE_DATA",e[e.PROCESS_DATA=2]="PROCESS_DATA",e[e.PROCESS_DOMAIN=3]="PROCESS_DOMAIN",e[e.PERFORM_LAYOUT=4]="PERFORM_LAYOUT",e[e.SERIES_UPDATE=5]="SERIES_UPDATE",e[e.PRE_SCENE_RENDER=6]="PRE_SCENE_RENDER",e[e.SCENE_RENDER=7]="SCENE_RENDER",e[e.NONE=8]="NONE",e))(Ku||{});function Uu(e){const{placement:t="bottom",floating:i=!1,xOffset:n=0,yOffset:o=0}="string"===typeof e?{placement:e,floating:!1}:e;return{placement:t,floating:i,xOffset:n,yOffset:o}}function Yu(e,t){const[i,n]=$u(t);return za(i,e,n)}function $u(e){if(0===e.length)return[];const t=[1/0,-1/0];for(const i of e)i<t[0]&&(t[0]=i),i>t[1]&&(t[1]=i);return t}function Zu(e){const[t,i]=$u(e);return i-t}function Xu(e){return(e=Math.trunc(e))<=0?1:1===e?2:1<<32-Math.clz32(e-1)}function qu(e){return(e=Math.trunc(e))<=0?0:1===e?1:1<<31-Math.clz32(e)}var Qu=0,Ju=1,eh=2,th=3,ih=4,nh=1e3,oh=10,sh=64,rh=4294967295,ah=3,lh=20,dh=100;function ch(e,t,i,n,o,s,r,a){let l=0;for(;l<dh&&null==e[n]&&n<o;)n+=1,l+=1;for(;l<dh&&null==e[o]&&o>n;)o-=1,l+=1;if(l>=dh||n>=o)return s;const d=Number.isFinite(t)?mh(e[o],t,i,a)-mh(e[n],t,i,a):gh(o,e.length)-gh(n,e.length);if(0===d||!Number.isFinite(d))return s;const c=Math.abs(d)/(o-n);let u;if(u=r<ah||!(r>lh)&&c<=s,s=Math.min(s,c),!u)return s;const h=Math.floor((n+o)/2),p=ch(e,t,i,n,h,s,r+1,a),g=ch(e,t,i,h+1,o,s,r+1,a);return Math.min(p,g,s)}function uh(e,t,i,n){return ch(e,t,i,0,e.length-1,1/(e.length-1),0,n)}function hh(e,t,i,n){if(Number.isFinite(t)){var o;const s=null===n||void 0===n?void 0:n.smallestKeyInterval,r=null===(o=null===n||void 0===n?void 0:n.xNeedsValueOf)||void 0===o||o,a=null==s?uh(e,t,i,r):s/(i-t);return Xu(Math.trunc(1/a))>>3}{let t=Math.ceil(Math.log2(e.length))-1;return t=Math.min(Math.max(t,0),24),Math.trunc(2**t)}}function ph(e,t){const{domain:i,sortMetadata:n}=t;switch(e){case"category":return[Number.NaN,Number.NaN];case"number":case"time":case"ordinal-time":case"unit-time":{if(0===i.length)return[1/0,-1/0];if(1===(null===n||void 0===n?void 0:n.sortOrder))return[Number(i[0]),Number(i.at(-1))];if(-1===(null===n||void 0===n?void 0:n.sortOrder))return[Number(i.at(-1)),Number(i[0])];let e=1/0,t=-1/0;for(const n of i){const i=Number(n);e=Math.min(e,i),t=Math.max(t,i)}return[e,t]}case"color":case"log":case"mercator":return[0,0]}}function gh(e,t){return e/t}function mh(e,t,i,n){return n?(e.valueOf()-t)/(i-t):(e-t)/(i-t)}function fh(e,t){return Math.trunc(Math.min(Math.floor(e*t),t-1)*ih)}function vh(e,t,i,n,o){let{xNeedsValueOf:s=!0,xValuesLength:r}=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e[o];if(null==a)return-1;const l=null!==r&&void 0!==r?r:e.length;return fh(Number.isFinite(t)?mh(a,t,i,s):gh(o,l),n)}function yh(e,t,i,n){for(const o of n)if(i===e[t+o])return!0;return!1}function bh(e,t,i,n,o,s){let{positive:r,split:a=!1,xNeedsValueOf:l=!0,yNeedsValueOf:d=!0,reuseIndexData:c,reuseValueData:u,reuseNegativeIndexData:h,reuseNegativeValueData:p}=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};const g=Number.NaN,m=s*ih,f=(null===c||void 0===c?void 0:c.length)===m?c:new Uint32Array(m),v=(null===u||void 0===u?void 0:u.length)===m?u:new Float64Array(m);let y,b;a&&(y=h&&h.length===m?h:new Uint32Array(m),b=p&&p.length===m?p:new Float64Array(m));const x=Number.isFinite(n)&&Number.isFinite(o),C=e.length;x&&(v.fill(g),f.fill(rh),a&&(b.fill(g),y.fill(rh)));const S=x?s/(o-n):s*(1/C);let w=-1,M=-1,k=g,D=-1,I=g,A=-1,L=g,N=-1,T=g,R=-1,E=-1,P=g,O=-1,F=g,z=-1,B=g,V=-1,G=g;const H=e.length,j=t===i;for(let W=0;W<H;W++){const o=e[W];if(null==o)continue;const c=t[W],u=j?c:i[W];let h,p;d?(h=null==c?g:c.valueOf(),p=null==u?g:u.valueOf()):(h=null!==c&&void 0!==c?c:g,p=null!==u&&void 0!==u?u:g);let m,C=!0;if(a)C=h>=0;else if(null!=r&&h>=0!==r)continue;m=x?l?(o.valueOf()-n)*S:(o-n)*S:W*S;const H=Math.floor(m),_=(H<s?H:s-1)<<2;if(C){_!==w&&(-1!==w&&(f[w]=M,f[w+1]=D,f[w+2]=A,f[w+3]=N,v[w]=k,v[w+1]=I,v[w+2]=L,v[w+3]=T),w=_,M=-1,k=g,D=-1,I=g,A=-1,L=g,N=-1,T=g);const e=p===p,t=h===h;-1===M?(M=W,k=m,D=W,I=m,e&&(A=W,L=p),t&&(N=W,T=h)):(m<k&&(M=W,k=m),m>I&&(D=W,I=m),e&&p<L&&(A=W,L=p),t&&h>T&&(N=W,T=h))}else{_!==R&&(-1!==R&&(y[R]=E,y[R+1]=O,y[R+2]=z,y[R+3]=V,b[R]=P,b[R+1]=F,b[R+2]=B,b[R+3]=G),R=_,E=-1,P=g,O=-1,F=g,z=-1,B=g,V=-1,G=g);const e=p===p,t=h===h;-1===E?(E=W,P=m,O=W,F=m,e&&(z=W,B=p),t&&(V=W,G=h)):(m<P&&(E=W,P=m),m>F&&(O=W,F=m),e&&p<B&&(z=W,B=p),t&&h>G&&(V=W,G=h))}}return-1!==w&&(f[w]=M,f[w+1]=D,f[w+2]=A,f[w+3]=N,v[w]=k,v[w+1]=I,v[w+2]=L,v[w+3]=T),a&&-1!==R&&(y[R]=E,y[R+1]=O,y[R+2]=z,y[R+3]=V,b[R]=P,b[R+1]=F,b[R+2]=B,b[R+3]=G),{indexData:f,valueData:v,negativeIndexData:y,negativeValueData:b}}function xh(e,t,i){let{inPlace:n=!1,midpointData:o,reuseIndexData:s,reuseValueData:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=Math.trunc(i/2),l=a*ih;let d,c;d=n?e:s&&s.length===l?s:new Uint32Array(l),c=n?t:r&&r.length===l?r:new Float64Array(l);const u=null!==o&&void 0!==o?o:new Uint32Array(a);for(let h=0;h<a;h+=1){const i=Math.trunc(h*ih),n=Math.trunc(2*i),o=Math.trunc(n+ih),s=e[o+Qu]===rh,r=s||t[n+Qu]<t[o+Qu]?n:o,a=e[r+Qu];d[i+Qu]=a,c[i+Qu]=t[r+Qu];const l=s||t[n+Ju]>t[o+Ju]?n:o,p=e[l+Ju];d[i+Ju]=p,c[i+Ju]=t[l+Ju],u[h]=a+p>>1;const g=s||t[n+eh]<t[o+eh]?n:o;d[i+eh]=e[g+eh],c[i+eh]=t[g+eh];const m=s||t[n+th]>t[o+th]?n:o;d[i+th]=e[m+th],c[i+th]=t[m+th]}return{maxRange:a,indexData:d,valueData:c,midpointData:u}}function Ch(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qu,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ju,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;const r=i&&i.length===e?i:new Uint32Array(e);for(let a=0,l=0;a<e;a+=1,l+=ih){const e=t[l+n],i=t[l+o];r[a]=e===s?s:e+i>>1}return r}function Sh(e,t){let{collectLevel:i,shouldContinue:n,minRange:o=sh,compactInPlace:s=!1}=t,r=e,a=i(r);const l=[a];for(;r.maxRange>o&&n(a,r);){const e=xh(r.indexData,r.valueData,r.maxRange,{inPlace:s});r={maxRange:e.maxRange,indexData:e.indexData,valueData:e.valueData,midpointData:e.midpointData},a=i(r),l.push(a)}return l.reverse(),l}function wh(e,t,i,n,o){if(t.length<nh)return;const[s,r]=e,{smallestKeyInterval:a,xNeedsValueOf:l,yNeedsValueOf:d,existingFilters:c}=o;let u=hh(t,s,r,{smallestKeyInterval:a,xNeedsValueOf:l});const h=null===c||void 0===c?void 0:c.find(e=>e.maxRange===u);let{indexData:p,valueData:g}=bh(t,i,n,s,r,u,{xNeedsValueOf:l,yNeedsValueOf:d,reuseIndexData:null===h||void 0===h?void 0:h.indexData,reuseValueData:null===h||void 0===h?void 0:h.valueData}),m=Ch(u,p,null===h||void 0===h?void 0:h.midpointIndices);const f=[{maxRange:u,indexData:p,valueData:g,midpointIndices:m}];for(;u>sh;){var v;const e=u,t=Math.trunc(e/2),i=null===c||void 0===c?void 0:c.find(e=>e.maxRange===t),n=xh(p,g,e,{reuseIndexData:null===i||void 0===i?void 0:i.indexData,reuseValueData:null===i||void 0===i?void 0:i.valueData});u=n.maxRange,p=n.indexData,g=n.valueData,m=null!==(v=n.midpointData)&&void 0!==v?v:Ch(u,p,null===i||void 0===i?void 0:i.midpointIndices),f.push({maxRange:u,indexData:p,valueData:g,midpointIndices:m})}return f.reverse(),f}function Mh(e,t,i,n,o){if(t.length<nh)return;const[s,r]=e,{smallestKeyInterval:a,targetRange:l,xNeedsValueOf:d,yNeedsValueOf:c,existingFilters:u}=o,h=hh(t,s,r,{smallestKeyInterval:a,xNeedsValueOf:d}),p=Math.min(h,Xu(Math.max(l,sh))),g=null===u||void 0===u?void 0:u.find(e=>e.maxRange===p),{indexData:m,valueData:f}=bh(t,i,n,s,r,p,{xNeedsValueOf:d,yNeedsValueOf:c,reuseIndexData:null===g||void 0===g?void 0:g.indexData,reuseValueData:null===g||void 0===g?void 0:g.valueData}),v=Ch(p,m,null===g||void 0===g?void 0:g.midpointIndices);return{immediate:[{maxRange:p,indexData:m,valueData:f,midpointIndices:v}],computeRemaining:function(){var e;const o=wh([s,r],t,i,n,{smallestKeyInterval:a,xNeedsValueOf:d,yNeedsValueOf:c,existingFilters:u});return null!==(e=null===o||void 0===o?void 0:o.filter(e=>e.maxRange!==p))&&void 0!==e?e:[]}}}var kh=class{handleUnknownProperties(e,t){}set(e){const{className:t=this.constructor.name}=this.constructor;if(null==e)return this.clear(),this;if("object"!==typeof e)return jr.warn("unable to set ".concat(t," - expecting a properties object")),this;const i=new Set(Object.keys(e));for(const o of uu(this))if(i.has(o)){const t=e[o],s=this;if(Ih(s[o]))if(s[o]instanceof Dh){const e=s[o].reset(t);null==e?jr.warn("unable to set [".concat(String(o),"] - expecting a properties array")):s[o]=e}else s[o].set(t);else if(el(t)){var n;s[o]=Cu(t,null!==(n=s[o])&&void 0!==n?n:{})}else s[o]=t;i.delete(o)}this.handleUnknownProperties(i,e);for(const o of i)jr.warn("unable to set [".concat(String(o),"] in ").concat(t," - property is unknown"));return this}clear(){for(const e of uu(this)){const t=this[e];Ih(t)?t.clear():this[e]=void 0}return this}toJson(){return uu(this).reduce((e,t)=>{const i=this[t];return e[String(t)]=Ih(i)?i.toJson():i,e},{})}},Dh=class e extends Array{constructor(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];super(i.length);const o=(e=>{var t;return Boolean(null===e||void 0===e||null===(t=e.prototype)||void 0===t||null===(t=t.constructor)||void 0===t?void 0:t.name)})(e)?t=>(new e).set(t):e;Object.defineProperty(this,"itemFactory",{value:o,enumerable:!1,configurable:!1}),this.set(i)}set(e){if(Ua(e)){this.length=e.length;for(let t=0;t<e.length;t++)this[t]=this.itemFactory(e[t])}return this}reset(t){if(Array.isArray(t))return new e(this.itemFactory,...t)}toJson(){return this.map(e=>{var t,i;return null!==(t=null===e||void 0===e||null===(i=e.toJson)||void 0===i?void 0:i.call(e))&&void 0!==t?t:e})}};function Ih(e){return e instanceof kh||e instanceof Dh}var Ah=class extends kh{constructor(){super(...arguments),this.type="linear",this.tension=1,this.position="end"}};xr([ru],Ah.prototype,"type",2),xr([ru],Ah.prototype,"tension",2),xr([ru],Ah.prototype,"position",2);var Lh=(e=>(e[e.BACKGROUND=0]="BACKGROUND",e[e.FOREGROUND=1]="FOREGROUND",e[e.HIGHLIGHT=2]="HIGHLIGHT",e[e.LABEL=3]="LABEL",e))(Lh||{}),Nh=(e=>(e[e.BACKGROUND=0]="BACKGROUND",e[e.ANY_CONTENT=1]="ANY_CONTENT",e))(Nh||{}),Th=(e=>(e[e.FOREGROUND=0]="FOREGROUND",e[e.HIGHLIGHT=1]="HIGHLIGHT",e[e.LABEL=2]="LABEL",e))(Th||{}),Rh=class e{constructor(e,t,i,n){this.lon0=e,this.lat0=t,this.lon1=i,this.lat1=n}extend(e,t,i,n){return this.lon0=Math.min(this.lon0,e),this.lat0=Math.min(this.lat0,t),this.lon1=Math.max(this.lon1,i),this.lat1=Math.max(this.lat1,n),this}merge(e){return this.extend(e.lon0,e.lat0,e.lon1,e.lat1)}static extend(t,i,n,o,s){return t?t.extend(i,n,o,s):new e(i,n,o,s)}},Eh=(e=>(e[e.SMALLEST=8]="SMALLEST",e[e.SMALLER=10]="SMALLER",e[e.SMALL=12]="SMALL",e[e.MEDIUM=13]="MEDIUM",e[e.LARGE=14]="LARGE",e[e.LARGEST=17]="LARGEST",e))(Eh||{}),Ph=12,Oh={SMALLEST:8/Ph,SMALLER:10/Ph,SMALL:12/Ph,MEDIUM:13/Ph,LARGE:14/Ph,LARGEST:17/Ph},Fh=(e=>(e.TOP="top",e.TOP_RIGHT="top-right",e.TOP_LEFT="top-left",e.RIGHT="right",e.RIGHT_TOP="right-top",e.RIGHT_BOTTOM="right-bottom",e.BOTTOM="bottom",e.BOTTOM_RIGHT="bottom-right",e.BOTTOM_LEFT="bottom-left",e.LEFT="left",e.LEFT_TOP="left-top",e.LEFT_BOTTOM="left-bottom",e))(Fh||{}),zh=(e=>(e.CATEGORY="category",e.GROUPED_CATEGORY="grouped-category",e.ORDINAL_TIME="ordinal-time",e.UNIT_TIME="unit-time",e.TIME="time",e.NUMBER="number",e.LOG="log",e))(zh||{}),Bh=(e=>(e.ANGLE_CATEGORY="angle-category",e.ANGLE_NUMBER="angle-number",e.RADIUS_CATEGORY="radius-category",e.RADIUS_NUMBER="radius-number",e))(Bh||{}),Vh=(e=>(e.CIRCLE="circle",e.POLYGON="polygon",e))(Vh||{}),Gh=Symbol("is-dark-theme"),Hh=Symbol("default-shadow-colour"),jh=Symbol("default-caption-layout-style"),Wh=Symbol("default-caption-alignment"),_h=Symbol("palette-up-stroke"),Kh=Symbol("palette-down-stroke"),Uh=Symbol("palette-up-fill"),Yh=Symbol("palette-down-fill"),$h=Symbol("palette-neutral-stroke"),Zh=Symbol("palette-neutral-fill"),Xh=Symbol("palette-alt-up-stroke"),qh=Symbol("palette-alt-down-stroke"),Qh=Symbol("palette-alt-up-fill"),Jh=Symbol("palette-alt-down-fill"),ep=Symbol("palette-gray-fill"),tp=Symbol("palette-gray-stroke"),ip=Symbol("default-polar-series-stroke"),np=Symbol("default-sparkline-crosshair-stroke"),op=Symbol("default-financial-charts-annotation-stroke"),sp=Symbol("default-hierarchy-strokes"),rp=Symbol("default-text-annotation-color"),ap=Symbol("default-financial-charts-annotation-background-fill"),lp=Symbol("default-annotation-handle-fill"),dp=Symbol("default-annotation-statistics-fill"),cp=Symbol("default-annotation-statistics-stroke"),up=Symbol("default-annotation-statistics-color"),hp=Symbol("default-annotation-statistics-divider-stroke"),pp=Symbol("default-annotation-statistics-fill"),gp=Symbol("default-annotation-statistics-stroke"),mp=Symbol("default-textbox-fill"),fp=Symbol("default-textbox-stroke"),vp=Symbol("default-textbox-color"),yp=Symbol("default-toolbar-position"),bp=(e=>(e[e.CHART_BACKGROUND=0]="CHART_BACKGROUND",e[e.AXIS_BAND_HIGHLIGHT=1]="AXIS_BAND_HIGHLIGHT",e[e.AXIS_GRID=2]="AXIS_GRID",e[e.AXIS=3]="AXIS",e[e.SERIES_AREA_CONTAINER=4]="SERIES_AREA_CONTAINER",e[e.ZOOM_SELECTION=5]="ZOOM_SELECTION",e[e.SERIES_CROSSLINE_RANGE=6]="SERIES_CROSSLINE_RANGE",e[e.SERIES_LAYER=7]="SERIES_LAYER",e[e.AXIS_FOREGROUND=8]="AXIS_FOREGROUND",e[e.SERIES_CROSSHAIR=9]="SERIES_CROSSHAIR",e[e.SERIES_CROSSLINE_LINE=10]="SERIES_CROSSLINE_LINE",e[e.SERIES_ANNOTATION=11]="SERIES_ANNOTATION",e[e.CHART_ANNOTATION=12]="CHART_ANNOTATION",e[e.CHART_ANNOTATION_FOCUSED=13]="CHART_ANNOTATION_FOCUSED",e[e.STATUS_BAR=14]="STATUS_BAR",e[e.SERIES_LABEL=15]="SERIES_LABEL",e[e.LEGEND=16]="LEGEND",e[e.NAVIGATOR=17]="NAVIGATOR",e[e.FOREGROUND=18]="FOREGROUND",e))(bp||{});function xp(e,t){return!(null==e||!function(e){return"context"in e}(e)||null==t||"object"!==typeof t||void 0!==t.context)&&(t.context=e.context,!0)}function Cp(e,t,i){if(Array.isArray(e)){for(const n of e)if(xp(n,i))break}else xp(e,i);return t(i)}var Sp=class{constructor(){this.cache=new WeakMap}call(e,t,i){let n,o=this.cache.get(t);try{n=JSON.stringify(i)}catch(s){return this.invoke(e,t,o,void 0,i)}return null==o&&(o=new Map,this.cache.set(t,o)),o.has(n)?o.get(n):this.invoke(e,t,o,n,i)}invoke(e,t,i,n,o){try{const s=Cp(e,t,o);return i&&null!=n&&i.set(n,s),s}catch(s){return void jr.warnOnce("User callback errored, ignoring",s)}}invalidateCache(){this.cache=new WeakMap}};function wp(e,t){if(!e)return;const{x:i,y:n,width:o,height:s}=function(e){let{x:t,y:i,width:n,height:o}=e;if((null==n||n>0)&&(null==o||o>0))return e;null!=t&&null!=n&&n<0&&(n=-n,t-=n);null!=i&&null!=o&&o<0&&(o=-o,i-=o);return{x:t,y:i,width:n,height:o}}(t);Ap(e.style,"width",o),Ap(e.style,"height",s),Ap(e.style,"left",i),Ap(e.style,"top",n)}function Mp(e){const t=Number.parseFloat(e.style.width),i=Number.parseFloat(e.style.height),n=Number.parseFloat(e.style.left),o=Number.parseFloat(e.style.top),s=Number.isFinite(t)?t:e.offsetWidth,r=Number.isFinite(i)?i:e.offsetHeight;return{x:Number.isFinite(n)?n:e.offsetLeft,y:Number.isFinite(o)?o:e.offsetTop,width:s,height:r}}function kp(e){var t;if(e.focus({preventScroll:!0}),null==(null===(t=e.lastChild)||void 0===t?void 0:t.textContent))return;const i=Er().createRange();i.setStart(e.lastChild,e.lastChild.textContent.length),i.setEnd(e.lastChild,e.lastChild.textContent.length);const n=Pr().getSelection();null===n||void 0===n||n.removeAllRanges(),null===n||void 0===n||n.addRange(i)}function Dp(){const e=Pr("navigator");if("scheduling"in e){const t=e.scheduling;if("isInputPending"in t)return t.isInputPending({includeContinuous:!0})}return!1}function Ip(e){return"ag-charts-icon ag-charts-icon-".concat(e)}function Ap(e,t,i){null==i?e.removeProperty(t):e.setProperty(t,"".concat(i,"px"))}function Lp(e,t){const i=t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,o=e%180*(Math.PI/180),s=Math.abs(Math.sin(o)),r=Math.abs(Math.cos(o));if(0===s)return{width:i,height:n};if(0===r)return{width:n,height:i};if(!Number.isFinite(n)){const e=r/s,t=i/(r+e*s);return{width:t,height:e*t}}const a=r*r-s*s;if(0===a){const e=Math.min(i,n)/Math.SQRT2;return{width:e,height:e}}return{width:Math.abs((i*r-n*s)/a),height:Math.abs((n*r-i*s)/a)}}function Np(e,t){const i=t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,o=e%180*(Math.PI/180),s=Math.abs(Math.sin(o)),r=Math.abs(Math.cos(o));return 0===s?{width:i,height:n}:0===r?{width:n,height:i}:{width:i*r+n*s,height:i*s+n*r}}function Tp(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const s=Math.cos(i),r=Math.sin(i),a=e-n,l=t-o;return{x:n+a*s-l*r,y:o+a*r+l*s}}var Rp=2*Math.PI,Ep=Math.PI/2;function Pp(e){return e%=Rp,e+=Rp,e%=Rp}function Op(e){return e%=Rp,(e+=Rp)!==Rp&&(e%=Rp),e}function Fp(e){return(e%=Rp)<-Math.PI?e+=Rp:e>=Math.PI&&(e-=Rp),e}function zp(e,t,i){const n=Pp(e),o=Pp(t),s=Pp(i);return o<s?o<=n&&n<=s:o>s?o<=n||n<=s:t!==i}function Bp(e){return e/180*Math.PI}function Vp(e){return e/Math.PI*180}function Gp(e,t){return e=Pp(e),(t=Pp(t))-e+(e>t?Rp:0)}function Hp(e){const t=Pp(e);return t<=Ep?t/Ep:t<=Math.PI?(Math.PI-t)/Ep:t<=1.5*Math.PI?(t-Math.PI)/Ep:(Rp-t)/Ep}function jp(e,t,i){const n=Hp(i);return e*n+t*Math.abs(1-n)}function Wp(e){return e?Pp(Bp(e)):0}var _p=class{constructor(){this.queue=[]}waitForCompletion(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;const t=this.queue;return new Promise(function(i){function n(){clearTimeout(o),i(!0)}const o=setTimeout(function(){const e=t.indexOf(n);e<0||(t.splice(e,1),i(!1))},e);t.push(n)})}notify(){for(const e of this.queue.splice(0))e()}};function Kp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(t){setTimeout(t,e)})}function Up(e){return"true"===e}function Yp(e){return e}var $p={role:Yp,"aria-checked":Up,"aria-controls":Yp,"aria-describedby":Yp,"aria-disabled":Up,"aria-expanded":Up,"aria-haspopup":Yp,"aria-hidden":Up,"aria-label":Yp,"aria-labelledby":Yp,"aria-live":Yp,"aria-orientation":Yp,"aria-selected":Up,"data-focus-override":Up,"data-focus-visible-override":Up,"data-preventdefault":Up,class:Yp,for:Yp,id:Yp,tabindex:function(e){return Number(e)},title:Yp,placeholder:Yp};function Zp(e,t,i){null==i||""===i||""===i?null===e||void 0===e||e.removeAttribute(t):null===e||void 0===e||e.setAttribute(t,i.toString())}function Xp(e,t){if(null!=t)for(const[i,n]of fu(t))"class"!==i&&Zp(e,i,n)}function qp(e,t,i){var n,o;if(!(e instanceof HTMLElement))return;const s=e.getAttribute(t);return null===s?i:null!==(n=null===(o=$p[t])||void 0===o?void 0:o.call($p,s))&&void 0!==n?n:void 0}function Qp(e,t,i){null!=e&&(null==i?e.style.removeProperty(t):e.style.setProperty(t,i.toString()))}function Jp(e,t){for(const[i,n]of fu(t))Qp(e,i,n)}function eg(e,t){const i=Array.isArray(e)?e:e.split(".");if(1===i.length){const[e]=i;return lu((t,i,n)=>t[e]=n,t=>t[e],t)}return lu((e,t,n)=>Nu(e,i,n),e=>Au(e,i),t)}function tg(e){return lu((t,i,n)=>t[e]=n)}function ig(e,t){return lu((i,n,o)=>i[e][null!==t&&void 0!==t?t:n]=o)}function ng(e){const{newValue:t,oldValue:i,changeValue:n}=e;return lu((e,o,s,r)=>(s!==r&&(void 0!==r&&(null===i||void 0===i||i.call(e,r)),void 0!==s&&(null===t||void 0===t||t.call(e,s)),null===n||void 0===n||n.call(e,s,r)),s))}function og(e){return du(e)}var sg=class extends kh{constructor(e){super(),this.node=e,this.enabled=!1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=1}};function rg(e,t,i,n,o){return t<e.x+e.width&&t+n>e.x&&i<e.y+e.height&&i+o>e.y}function ag(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return t>=e.x&&t+n<=e.x+e.width&&i>=e.y&&i+o<=e.y+e.height}function lg(e){return null==e||0===e.height||0===e.width||Number.isNaN(e.height)||Number.isNaN(e.width)}function dg(e,t){return e===t||null!=e&&null!=t&&(e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height)}function cg(e,t,i){if(e>t)return;let n;for(;t>=e;){const o=Math.floor((t+e)/2);i(o)?(n=o,e=o+1):t=o-1}return n}function ug(e,t,i){if(e>t)return;let n;for(;t>=e;){const o=Math.floor((t+e)/2);i(o)?(n=o,t=o-1):e=o+1}return n}function hg(e,t,i){if(e>t)return;let n;for(;t>=e;){const o=Math.floor((t+e)/2),s=i(o);null==s?t=o-1:(n=s,e=o+1)}return n}function pg(e,t,i){if(e>t)return;let n;for(;t>=e;){const o=Math.floor((t+e)/2),s=i(o);null==s?e=o+1:(n=s,t=o-1)}return n}xr([ng({changeValue(e){this.node.strokeWidth=e?this.strokeWidth:0}}),ru],sg.prototype,"enabled",2),xr([ig("node","stroke"),ru],sg.prototype,"stroke",2),xr([ig("node","strokeOpacity"),ru],sg.prototype,"strokeOpacity",2),xr([ng({changeValue(e){this.enabled?this.node.strokeWidth=e:this.node.strokeWidth=0}}),ru],sg.prototype,"strokeWidth",2);var gg=(e,t,i)=>e*(1-i)+t*i,mg=e=>{const t=e<0?-1:1,i=Math.abs(e);return i<=.04045?e/12.92:t*((i+.055)/1.055)**2.4},fg=e=>{const t=e<0?-1:1,i=Math.abs(e);return i>.0031308?t*(1.055*i**(1/2.4)-.055):12.92*e},vg=class e{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.r=za(0,e||0,1),this.g=za(0,t||0,1),this.b=za(0,i||0,1),this.a=za(0,n||0,1)}static validColorString(t){return t.includes("#")?!!e.parseHex(t):t.includes("rgb")?!!e.stringToRgba(t):e.nameToHex.has(t.toLowerCase())}static fromString(t){if(t.includes("#"))return e.fromHexString(t);const i=e.nameToHex.get(t.toLowerCase());if(i)return e.fromHexString(i);if(t.includes("rgb"))return e.fromRgbaString(t);throw new Error("Invalid color string: '".concat(t,"'"))}static parseHex(e){var t;let i;switch((e=e.replaceAll(" ","").slice(1)).length){case 6:case 8:i=[];for(let t=0;t<e.length;t+=2)i.push(Number.parseInt("".concat(e[t]).concat(e[t+1]),16));break;case 3:case 4:i=e.split("").map(e=>Number.parseInt(e,16)).map(e=>e+16*e)}if((null===(t=i)||void 0===t?void 0:t.length)>=3&&i.every(e=>e>=0))return 3===i.length&&i.push(255),i}static fromHexString(t){const i=e.parseHex(t);if(i){const[t,n,o,s]=i;return new e(t/255,n/255,o/255,s/255)}throw new Error("Malformed hexadecimal color string: '".concat(t,"'"))}static stringToRgba(e){let t=-1,i=-1;for(let s=0;s<e.length;s++){const n=e[s];if(-1===t&&"("===n)t=s;else if(")"===n){i=s;break}}if(-1===t||-1===i)return;const n=e.substring(t+1,i).split(","),o=[];for(let s=0;s<n.length;s++){const e=n[s];let t=Number.parseFloat(e);if(!Number.isFinite(t))return;e.includes("%")?(t=za(0,t,100),t/=100):3===s?t=za(0,t,1):(t=za(0,t,255),t/=255),o.push(t)}return o}static fromRgbaString(t){const i=e.stringToRgba(t);if(i){if(3===i.length)return new e(i[0],i[1],i[2]);if(4===i.length)return new e(i[0],i[1],i[2],i[3])}throw new Error("Malformed rgb/rgba color string: '".concat(t,"'"))}static fromArray(t){if(4===t.length)return new e(t[0],t[1],t[2],t[3]);if(3===t.length)return new e(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(t,i,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const s=e.HSBtoRGB(t,i,n);return new e(s[0],s[1],s[2],o)}static fromHSL(t,i,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const s=e.HSLtoRGB(t,i,n);return new e(s[0],s[1],s[2],o)}static fromOKLCH(t,i,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const s=e.OKLCHtoRGB(t,i,n);return new e(s[0],s[1],s[2],o)}static padHex(e){return 1===e.length?"0"+e:e}toHexString(){let t="#"+e.padHex(Math.round(255*this.r).toString(16))+e.padHex(Math.round(255*this.g).toString(16))+e.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(t+=e.padHex(Math.round(255*this.a).toString(16))),t}toRgbaString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;const t=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],i=Math.pow(10,e);return 1!==this.a?(t.push(Math.round(this.a*i)/i),"rgba(".concat(t.join(", "),")")):"rgb(".concat(t.join(", "),")")}toString(){return 1===this.a?this.toHexString():this.toRgbaString()}toHSB(){return e.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(e,t,i){const n=mg(e),o=mg(t),s=mg(i),r=Math.cbrt(.4122214708*n+.5363325363*o+.0514459929*s),a=Math.cbrt(.2119034982*n+.6806995451*o+.1073969566*s),l=Math.cbrt(.0883024619*n+.2817188376*o+.6299787005*s),d=.2104542553*r+.793617785*a-.0040720468*l,c=1.9779984951*r-2.428592205*a+.4505937099*l,u=.0259040371*r+.7827717662*a-.808675766*l,h=180*Math.atan2(u,c)/Math.PI;return[d,Math.hypot(c,u),h>=0?h:h+360]}static OKLCHtoRGB(e,t,i){const n=e,o=t*Math.cos(i*Math.PI/180),s=t*Math.sin(i*Math.PI/180),r=(n+.3963377774*o+.2158037573*s)**3,a=(n-.1055613458*o-.0638541728*s)**3,l=(n-.0894841775*o-1.291485548*s)**3,d=-1.2684380046*r+2.6097574011*a-.3413193965*l,c=-.0041960863*r-.7034186147*a+1.707614701*l;return[fg(4.0767416621*r-3.3077115913*a+.2309699292*l),fg(d),fg(c)]}static RGBtoHSL(e,t,i){const n=Math.min(e,t,i),o=Math.max(e,t,i),s=(o+n)/2;let r,a;if(o===n)r=0,a=0;else{const l=o-n;a=s>.5?l/(2-o-n):l/(o+n),r=o===e?(t-i)/l+(t<i?6:0):o===t?(i-e)/l+2:(e-t)/l+4,r*=60}return[r,a,s]}static HSLtoRGB(e,t,i){if(0===t)return[i,i,i];const n=i<.5?i*(1+t):i+t-i*t,o=2*i-n;function s(e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?o+6*(n-o)*e:e<.5?n:e<2/3?o+(n-o)*(2/3-e)*6:o}return[s((e=(e%360+360)%360)/360+1/3),s(e/360),s(e/360-1/3)]}static RGBtoHSB(e,t,i){const n=Math.min(e,t,i),o=Math.max(e,t,i);let s=0;if(n!==o){const r=o-n,a=(o-e)/r,l=(o-t)/r,d=(o-i)/r;s=e===o?d-l:t===o?2+a-d:4+l-a,s/=6,s<0&&(s+=1)}return[360*s,0===o?0:(o-n)/o,o]}static HSBtoRGB(e,t,i){e=(e%360+360)%360/360;let n=0,o=0,s=0;if(0===t)n=o=s=i;else{const r=6*(e-Math.floor(e)),a=r-Math.floor(r),l=i*(1-t),d=i*(1-t*a),c=i*(1-t*(1-a));switch(Math.trunc(r)){case 0:n=i,o=c,s=l;break;case 1:n=d,o=i,s=l;break;case 2:n=l,o=i,s=c;break;case 3:n=l,o=d,s=i;break;case 4:n=c,o=l,s=i;break;case 5:n=i,o=l,s=d}}return[n,o,s]}static mix(t,i,n){return new e(gg(t.r,i.r,n),gg(t.g,i.g,n),gg(t.b,i.b,n),gg(t.a,i.a,n))}static lighten(t,i){const n=e.RGBtoOKLCH(t.r,t.g,t.b);return e.fromOKLCH(za(0,n[0]+i,1),n[1],n[2])}static darken(t,i){const n=e.RGBtoOKLCH(t.r,t.g,t.b);return e.fromOKLCH(za(0,n[0]-i,1),n[1],n[2])}static interpolate(t,i){const n=1/(t.length-1),o=t.map(t=>e.RGBtoOKLCH(t.r,t.g,t.b));return Array.from({length:i},(s,r)=>{const a=r/(i-1),l=t.length<=2?0:Math.min(Math.floor(a*(t.length-1)),t.length-2),d=(a-l*n)/n,c=o[l],u=o[l+1];return e.fromOKLCH(gg(c[0],u[0],d),gg(c[1],u[1],d),gg(c[2],u[2],d))})}};vg.nameToHex=new Map([["aliceblue","#F0F8FF"],["antiquewhite","#FAEBD7"],["aqua","#00FFFF"],["aquamarine","#7FFFD4"],["azure","#F0FFFF"],["beige","#F5F5DC"],["bisque","#FFE4C4"],["black","#000000"],["blanchedalmond","#FFEBCD"],["blue","#0000FF"],["blueviolet","#8A2BE2"],["brown","#A52A2A"],["burlywood","#DEB887"],["cadetblue","#5F9EA0"],["chartreuse","#7FFF00"],["chocolate","#D2691E"],["coral","#FF7F50"],["cornflowerblue","#6495ED"],["cornsilk","#FFF8DC"],["crimson","#DC143C"],["cyan","#00FFFF"],["darkblue","#00008B"],["darkcyan","#008B8B"],["darkgoldenrod","#B8860B"],["darkgray","#A9A9A9"],["darkgreen","#006400"],["darkgrey","#A9A9A9"],["darkkhaki","#BDB76B"],["darkmagenta","#8B008B"],["darkolivegreen","#556B2F"],["darkorange","#FF8C00"],["darkorchid","#9932CC"],["darkred","#8B0000"],["darksalmon","#E9967A"],["darkseagreen","#8FBC8F"],["darkslateblue","#483D8B"],["darkslategray","#2F4F4F"],["darkslategrey","#2F4F4F"],["darkturquoise","#00CED1"],["darkviolet","#9400D3"],["deeppink","#FF1493"],["deepskyblue","#00BFFF"],["dimgray","#696969"],["dimgrey","#696969"],["dodgerblue","#1E90FF"],["firebrick","#B22222"],["floralwhite","#FFFAF0"],["forestgreen","#228B22"],["fuchsia","#FF00FF"],["gainsboro","#DCDCDC"],["ghostwhite","#F8F8FF"],["gold","#FFD700"],["goldenrod","#DAA520"],["gray","#808080"],["green","#008000"],["greenyellow","#ADFF2F"],["grey","#808080"],["honeydew","#F0FFF0"],["hotpink","#FF69B4"],["indianred","#CD5C5C"],["indigo","#4B0082"],["ivory","#FFFFF0"],["khaki","#F0E68C"],["lavender","#E6E6FA"],["lavenderblush","#FFF0F5"],["lawngreen","#7CFC00"],["lemonchiffon","#FFFACD"],["lightblue","#ADD8E6"],["lightcoral","#F08080"],["lightcyan","#E0FFFF"],["lightgoldenrodyellow","#FAFAD2"],["lightgray","#D3D3D3"],["lightgreen","#90EE90"],["lightgrey","#D3D3D3"],["lightpink","#FFB6C1"],["lightsalmon","#FFA07A"],["lightseagreen","#20B2AA"],["lightskyblue","#87CEFA"],["lightslategray","#778899"],["lightslategrey","#778899"],["lightsteelblue","#B0C4DE"],["lightyellow","#FFFFE0"],["lime","#00FF00"],["limegreen","#32CD32"],["linen","#FAF0E6"],["magenta","#FF00FF"],["maroon","#800000"],["mediumaquamarine","#66CDAA"],["mediumblue","#0000CD"],["mediumorchid","#BA55D3"],["mediumpurple","#9370DB"],["mediumseagreen","#3CB371"],["mediumslateblue","#7B68EE"],["mediumspringgreen","#00FA9A"],["mediumturquoise","#48D1CC"],["mediumvioletred","#C71585"],["midnightblue","#191970"],["mintcream","#F5FFFA"],["mistyrose","#FFE4E1"],["moccasin","#FFE4B5"],["navajowhite","#FFDEAD"],["navy","#000080"],["oldlace","#FDF5E6"],["olive","#808000"],["olivedrab","#6B8E23"],["orange","#FFA500"],["orangered","#FF4500"],["orchid","#DA70D6"],["palegoldenrod","#EEE8AA"],["palegreen","#98FB98"],["paleturquoise","#AFEEEE"],["palevioletred","#DB7093"],["papayawhip","#FFEFD5"],["peachpuff","#FFDAB9"],["peru","#CD853F"],["pink","#FFC0CB"],["plum","#DDA0DD"],["powderblue","#B0E0E6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#FF0000"],["rosybrown","#BC8F8F"],["royalblue","#4169E1"],["saddlebrown","#8B4513"],["salmon","#FA8072"],["sandybrown","#F4A460"],["seagreen","#2E8B57"],["seashell","#FFF5EE"],["sienna","#A0522D"],["silver","#C0C0C0"],["skyblue","#87CEEB"],["slateblue","#6A5ACD"],["slategray","#708090"],["slategrey","#708090"],["snow","#FFFAFA"],["springgreen","#00FF7F"],["steelblue","#4682B4"],["tan","#D2B48C"],["teal","#008080"],["thistle","#D8BFD8"],["tomato","#FF6347"],["transparent","#00000000"],["turquoise","#40E0D0"],["violet","#EE82EE"],["wheat","#F5DEB3"],["white","#FFFFFF"],["whitesmoke","#F5F5F5"],["yellow","#FFFF00"],["yellowgreen","#9ACD32"]]);var yg=vg;function bg(){return new OffscreenCanvas(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0).getContext("2d")}var xg=class{constructor(e){this.getter=e}get(){var e;return null!==(e=this.result)&&void 0!==e||(this.result=this.getter()),this.result}clear(){this.result=void 0}},Cg=class{constructor(e){this.getter=e}get(){var e;let t=null===(e=this.result)||void 0===e?void 0:e.deref();return t||(t=this.getter(),this.result=new WeakRef(t),t)}clear(){this.result=void 0}};function Sg(e,t){return e.valueOf()-t.valueOf()}function wg(e){const t=e.slice().sort(Sg);return null==Mg(t)?function(e){let t=Number.NaN;const i=[];for(const n of e){const e=n.valueOf();t!==e&&i.push(n),t=e}return i}(t):t}function Mg(e){if(0===e.length)return 1;const t=Number(e.at(-1))>Number(e[0])?1:-1;let i=-1/0*t;for(const n of e){const e=n.valueOf();if(Math.sign(e-i)!==t)return;i=e}return t}function kg(){return(e,t)=>{const i=["Property [".concat(e,"] is deprecated."),t].filter(Boolean).join(" ");jr.warnOnce(i)}}function Dg(e,t){const i=kg(),n=null===t||void 0===t?void 0:t.default;return lu((t,o,s)=>(s!==n&&i(o.toString(),e),s))}function Ig(e,t){const i=kg();return lu((n,o,s)=>(s!==n[e]&&(i(o.toString(),"Use [".concat(e,"] instead.")),Nu(n,e,t?t(s):s)),nu),(t,n)=>(i(n.toString(),"Use [".concat(e,"] instead.")),Au(t,e)))}function Ag(e,t){const i=Math.max(e.length,t.length),n=new Set,o=new Set;for(let s=0;s<i;s++){const i=e[s],r=t[s];i!==r&&(o.has(r)?o.delete(r):r&&n.add(r),n.has(i)?n.delete(i):i&&o.add(i))}return{changed:n.size>0||o.size>0,added:n,removed:o}}function Lg(e,t,i,n){const o=e-i,s=t-n;return o*o+s*s}function Ng(e,t,i,n,o,s,r){if(i===o&&n===s)return Math.min(r,Lg(e,t,i,n));const a=o-i,l=s-n,d=Math.max(0,Math.min(1,((e-i)*a+(t-n)*l)/(a*a+l*l))),c=i+d*a,u=n+d*l;return Math.min(r,Lg(e,t,c,u))}function Tg(e,t,i,n,o,s,r,a,l){a&&([r,s]=[s,r]);if(!zp(Math.atan2(t-n,e-i),s,r)){const r=i+Math.cos(s)*o,a=n+Math.sin(s)*o,d=i+Math.cos(s)*o,c=n+Math.sin(s)*o;return Math.min(l,Lg(e,t,r,a),Lg(e,t,d,c))}const d=o-Math.sqrt(Lg(e,t,i,n));return Math.min(l,d*d)}function Rg(e,t){if(0===e.length)return null;if(void 0!==t){const i=e.at(0),n=e.at(-1),o=i instanceof Date?i.getTime():i,s=n instanceof Date?n.getTime():n;if("number"===typeof o&&"number"===typeof s)return 1===t?[o,s]:[s,o]}let i=1/0,n=-1/0;for(const s of e){const e=s instanceof Date?s.getTime():s;"number"===typeof e&&(e<i&&(i=e),e>n&&(n=e))}const o=[i,n];return o.every(Number.isFinite)?o:null}function Eg(e,t,i,n,o,s,r){let a=!1;const l=Rg(e,r),d=l&&s?[s(l[0]),s(l[1])]:l;if(null==d){let e;return null!=t&&null!=i&&t<=i?e=[t,i]:null!=n&&null!=o&&n<=o&&(e=[n,o]),{extent:null!==e&&void 0!==e?e:[],clipped:!1}}let[c,u]=d;return null!=t?(a||(a=t>c),c=t):null!=n&&n<c&&(c=n),null!=i?(a||(a=i<u),u=i):null!=o&&o>u&&(u=o),c>u?{extent:[],clipped:!1}:{extent:[c,u],clipped:a}}function Pg(e,t,i,n,o){var s;const{extent:r,clipped:a}=Eg(e.domain,nl(t)?new Date(t):t,nl(i)?new Date(i):i,nl(n)?new Date(n):n,nl(o)?new Date(o):o,e=>new Date(e),null===(s=e.sortMetadata)||void 0===s?void 0:s.sortOrder);return{extent:r.map(e=>new Date(e)),clipped:a}}var Og=new Intl.NumberFormat("en-US",{style:"percent"});function Fg(e){return"number"===typeof e?Vg(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:2):"string"===typeof e?e:String(null!==e&&void 0!==e?e:"")}function zg(e){return Og.format(e)}var Bg=(new Map).set(2,new Intl.NumberFormat("en-US",{maximumFractionDigits:2,useGrouping:!1}));function Vg(e,t){let i=Bg.get(t);return i||(i=new Intl.NumberFormat("en-US",{maximumFractionDigits:t,useGrouping:!1}),Bg.set(t,i)),i.format(e)}function Gg(e){return Array.isArray(e)&&e.length>=2&&e.every(ol)}function Hg(e){return Array.isArray(e)&&e.length>=2&&e.every(Gg)}function jg(e){const t=e[0],i=e.at(-1);return void 0!==i&&(Va(t[0],i[0],.001)&&Va(t[1],i[1],.001))}function Wg(e){return Array.isArray(e)&&e.every(Hg)&&e.every(jg)}function _g(e){if(null===e)return!0;if(!Qa(e)||null==e.type)return!1;const{type:t,coordinates:i}=e;switch(t){case"GeometryCollection":return Array.isArray(e.geometries)&&e.geometries.every(_g);case"MultiPolygon":return Array.isArray(i)&&i.every(Wg);case"Polygon":return Wg(i);case"MultiLineString":return Array.isArray(i)&&i.every(Hg);case"LineString":case"MultiPoint":return Hg(i);case"Point":return Gg(i);default:return!1}}function Kg(e){return Qa(e)&&"Feature"===e.type&&_g(e.geometry)}var Ug=hd(function(e){return Qa(e)&&"FeatureCollection"===e.type&&Array.isArray(e.features)&&e.features.every(Kg)},"a GeoJSON object"),Yg=class{constructor(e,t,i){this._vertexCount=0,this._edgeCount=0,this.pendingProcessingEdgesFrom=[],this.pendingProcessingEdgesTo=[],this.cachedNeighboursEdge=e,this.processedEdge=t,this.singleValueEdges=i}clear(){var e;this._vertexCount=0,this._edgeCount=0,this.pendingProcessingEdgesFrom=[],this.pendingProcessingEdgesTo=[],null===(e=this.singleValueEdges)||void 0===e||e.clear()}getVertexCount(){return this._vertexCount}getEdgeCount(){return this._edgeCount}addVertex(e){const t=new $g(e);return this._vertexCount++,t}addEdge(e,t,i){i===this.cachedNeighboursEdge?e.updateCachedNeighbours().set(t.value,t):i===this.processedEdge&&(this.pendingProcessingEdgesFrom.push(e),this.pendingProcessingEdgesTo.push(t));const{edges:n}=e,o=n.get(i);if(o){if(!o.includes(t)){var s;null!==(s=this.singleValueEdges)&&void 0!==s&&s.has(i)?n.set(i,[t]):(o.push(t),this._edgeCount++)}}else n.set(i,[t]),this._edgeCount++}removeVertex(e){this._vertexCount--;const t=e.edges;if(t){for(const[,e]of t)this._vertexCount-=e.length;e.clear()}}removeEdge(e,t,i){const n=e.edges.get(i);if(!n)return;const o=n.indexOf(t);var s;-1!==o&&(n.splice(o,1),0===n.length&&e.edges.delete(i),this._edgeCount--,i===this.cachedNeighboursEdge&&(null===(s=e.readCachedNeighbours())||void 0===s||s.delete(t.value)))}removeEdges(e,t){e.edges.delete(t)}getVertexValue(e){return e.value}*neighbours(e){for(const[,t]of e.edges)for(const e of t)yield e}*neighboursAndEdges(e){for(const[t,i]of e.edges)for(const e of i)yield[e,t]}neighboursWithEdgeValue(e,t){return e.edges.get(t)}findNeighbour(e,t){var i;return null===(i=e.edges.get(t))||void 0===i?void 0:i[0]}findNeighbourValue(e,t){const i=this.findNeighbour(e,t);if(i)return this.getVertexValue(i)}findNeighbourWithValue(e,t,i){const n=null==i?this.neighbours(e):this.neighboursWithEdgeValue(e,i);if(n)for(const o of n)if(this.getVertexValue(o)===t)return o}findVertexAlongEdge(e,t,i){if(i===this.cachedNeighboursEdge){let i;for(const o of t){var n;if(i=null===(n=(null!==i&&void 0!==i?i:e).readCachedNeighbours())||void 0===n?void 0:n.get(o),!i)return}return i}if(0===t.length)return;let o=e;for(const s of t){const e=o?this.neighboursWithEdgeValue(o,i):void 0;if(!e)return;o=e.find(e=>e.value===s)}return o}adjacent(e,t){for(const[,i]of e.edges)if(i.includes(t))return!0;return!1}},$g=class{constructor(e){this.value=e,this.edges=new Map}readCachedNeighbours(){return this._cachedNeighbours}updateCachedNeighbours(){var e;return null!==(e=this._cachedNeighbours)&&void 0!==e||(this._cachedNeighbours=new Map),this._cachedNeighbours}clear(){var e;this.edges.clear(),null===(e=this._cachedNeighbours)||void 0===e||e.clear()}},Zg="class-instance";function Xg(e,t,i){if(Ua(t)){if(!Ua(e)||e.length!==t.length||t.some((t,n)=>null!=Xg(e[n],t,i)))return t}else{if(el(t)){if(!el(e))return t;const n={},o=new Set([...Object.keys(e),...Object.keys(t)]);for(const s of o)if(e[s]!==t[s])if(null!==i&&void 0!==i&&i.has(s))n[s]=t[s];else if(typeof e[s]===typeof t[s]){const o=Xg(e[s],t[s],i);null!==o&&(n[s]=o)}else n[s]=t[s];return Object.keys(n).length?n:null}if(e!==t)return t}return null}function qg(e,t){for(const i of Object.keys(e))if(e[i]!==(null===t||void 0===t?void 0:t[i]))return!1;return!0}function Qg(e,t){return Ua(e)?function(e,t){const i=[],n=null===t||void 0===t?void 0:t.seen;for(const o of e)"object"===typeof o&&null!==n&&void 0!==n&&n.includes(o)?jr.warn("cycle detected in array",o):(null===n||void 0===n||n.push(o),i.push(Qg(o,t)),null===n||void 0===n||n.pop());return i}(e,t):el(e)?function(e,t){const i={};for(const s of Object.keys(e)){var n,o;null!==t&&void 0!==t&&null!==(n=t.assign)&&void 0!==n&&n.has(s)?i[s]=e[s]:null!==t&&void 0!==t&&null!==(o=t.shallow)&&void 0!==o&&o.has(s)?i[s]=Jg(e[s]):i[s]=Qg(e[s],t)}return i}(e,t):e instanceof Map?new Map(Qg(Array.from(e))):Jg(e)}function Jg(e){return Ua(e)?e.slice(0):el(e)?p({},e):$a(e)?new Date(e):Xa(e)?new RegExp(e.source,e.flags):e}function em(e,t,i,n,o,s){if(Ua(e)){s=t(e,n,o,s);let r=0;for(const a of e)s=em(a,t,i,null===n||void 0===n?void 0:n[r],o,s),r++}else if(el(e)){s=t(e,n,o,s);for(const r of Object.keys(e)){if(null!==i&&void 0!==i&&i.has(r))continue;s=em(e[r],t,i,null===n||void 0===n?void 0:n[r],o,s)}}return s}function tm(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{path:n,matcherPath:o=(null===n||void 0===n?void 0:n.replace(/(\[[0-9+]+])/i,"[]")),skip:s=[]}=i;if(null==e)throw new Error("AG Charts - target is uninitialised: ".concat(null!==n&&void 0!==n?n:"<root>"));if(null==t)return e;if(Ih(e))return e.set(t);const r=e,a=im(e);for(const d of Object.keys(t)){if(Lu.has(d))continue;const c="".concat(o?o+".":"").concat(d);if(s.includes(c))continue;const u=t[d],h="".concat(n?n+".":"").concat(d),g=r.constructor,m=r[d];try{const t=im(m),n=im(u);if(a===Zg&&!(d in e)&&"context"!==d){if(void 0===u)continue;jr.warn("unable to set [".concat(h,"] in ").concat(null===g||void 0===g?void 0:g.name," - property is unknown"));continue}if(null!=t&&null!=n&&n!==t&&(t!==Zg||"object"!==n)){jr.warn("unable to set [".concat(h,"] in ").concat(null===g||void 0===g?void 0:g.name," - can't apply type of [").concat(n,"], allowed types are: [").concat(t,"]"));continue}if(Ih(m))void 0===u?m.clear():m.set(u);else if("object"===n&&"context"!==d){if(!(d in r)){jr.warn("unable to set [".concat(h,"] in ").concat(null===g||void 0===g?void 0:g.name," - property is unknown"));continue}null==m?r[d]=u:tm(m,u,p(p({},i),{},{path:h,matcherPath:c}))}else r[d]=u}catch(l){jr.warn("unable to set [".concat(h,"] in [").concat(null===g||void 0===g?void 0:g.name,"]; nested error is: ").concat(l.message))}}return e}function im(e){return null==e?null:sl(e)||$a(e)?"primitive":Ua(e)?"array":Qa(e)?el(e)?"object":Zg:qa(e)?"function":"primitive"}function nm(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["Escape"];return Gr(e,"keydown",e=>{dm(e,...i)&&t(e)})}function om(e,t){const i=Gr(Pr(),"mousedown",n=>{[0,2].includes(n.button)&&!rm(e,n)&&(t(),i())});return i}function sm(e,t){const i=Gr(Pr(),"touchstart",n=>{Array.from(n.targetTouches).some(t=>!rm(e,t))&&(t(),i())});return i}function rm(e,t){return t.target instanceof Element&&null!=t.target.shadowRoot||t.target instanceof Node&&e.contains(t.target)}function am(e,t,i){const n=e=>{for(const i of t)Zp(i,"data-focus-visible-override",e)};return n(i),Gr(e,"keydown",()=>n(!0),{once:!0})}function lm(e){return!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)}function dm(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return lm(e)&&i.includes(e.key)}function cm(e,t,i){return Gr(e,"keydown",e=>{dm(e,i)&&t.focus()})}var um={horizontal:{nextKey:"ArrowRight",prevKey:"ArrowLeft"},vertical:{nextKey:"ArrowDown",prevKey:"ArrowUp"}};function hm(e){const{orientation:t,buttons:i,wrapAround:n=!1,onEscape:o,onFocus:s,onBlur:r}=e,{nextKey:a,prevKey:l}=um[t],d=e=>{if(e.target&&"tabIndex"in e.target){for(const e of i)e.tabIndex=-1;e.target.tabIndex=0}},[c,u]=n?[i.length,i.length]:[0,1/0],h=new Ta;for(let p=0;p<i.length;p++){const e=i[(c+p-1)%u],t=i[p],n=i[(c+p+1)%u];h.register(Gr(t,"focus",d),s&&Gr(t,"focus",s),r&&Gr(t,"blur",r),o&&nm(t,o),e&&cm(t,e,l),n&&cm(t,n,a),Gr(t,"keydown",e=>{dm(e,a,l)&&e.preventDefault()})),t.tabIndex=0===p?0:-1}return h}function pm(e,t){return i=>{if("true"===e.ariaDisabled)return i.preventDefault();t(i)}}function gm(e){return"button"in e?0===e.button:lm(e)&&("Space"===e.code||"Enter"===e.key)}function mm(e){if((null===e||void 0===e?void 0:e.target)instanceof HTMLElement&&"tabindex"in e.target.attributes)return e.target}function fm(e){return Gr(e,"keydown",e=>{if(e.defaultPrevented)return;qp(e.target,"data-preventdefault",!0)&&dm(e,"ArrowRight","ArrowLeft","ArrowDown","ArrowUp")&&e.preventDefault()})}var vm=new Map,ym=1;function bm(){vm.clear(),ym=1}function xm(e){var t;const i=e.constructor;let n=Object.hasOwn(i,"className")?i.className:i.name;Cr.inDevelopmentMode(()=>{if(!n)throw new Error("The ".concat(String(i)," is missing the 'className' property."))}),null!==n&&void 0!==n||(n="Unknown");const o=(null!==(t=vm.get(n))&&void 0!==t?t:0)+1;return vm.set(n,o),"".concat(n,"-").concat(o)}function Cm(){return"ag-charts-".concat(ym++)}function Sm(){var e,t,i;return null!==(e=null===(t=(i=crypto).randomUUID)||void 0===t?void 0:t.call(i))&&void 0!==e?e:function(){const e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=15&e[6]|64,e[8]=63&e[8]|128;let t="";for(let i=0;i<e.length;i++)4!==i&&6!==i&&8!==i&&10!==i||(t+="-"),t+=e[i].toString(16).padStart(2,"0");return t}()}function wm(e,t,i){let n=e,o=n;for(const s of t)if(null==n||i(n.value,s)>0)n={value:s,next:n},o=n;else{for(;null!=o.next&&i(o.next.value,s)<=0;)o=o.next;o.next={value:s,next:o.next}}return n}var Mm=new WeakMap;function km(e,t){var i,n;const o=JSON.stringify(e,null,0);var s;(Mm.has(t)||Mm.set(t,new Map),null!==(i=Mm.get(t))&&void 0!==i&&i.has(o))||(null===(s=Mm.get(t))||void 0===s||s.set(o,t(e)));return null===(n=Mm.get(t))||void 0===n?void 0:n.get(o)}var Dm=class{constructor(){this.weak=new WeakMap,this.strong=new Map,this.set=!1,this.value=void 0}};function Im(e,t){let i=new Dm;const n=function(){let n=i;for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];for(const e of s){const t="object"===typeof e||"symbol"===typeof e?n.weak:n.strong;let i=t.get(e);null==i&&(i=new Dm,t.set(e,i)),n=i}if(n.set)return null===t||void 0===t||t("hit",e,s),n.value;{const i=e(...s);return n.set=!0,n.value=i,null===t||void 0===t||t("miss",e,s),i}};return n.reset=()=>{i=new Dm},n}function Am(e,t){const i=new Map,n={},o=new WeakMap;return function(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];const l=0===r.length?[n]:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map(e=>"object"===typeof e||"symbol"===typeof e?e:(i.has(e)||i.set(e,{v:e}),i.get(e)))}(...r);let d=o;for(const e of l.slice(0,-1))d.has(e)||d.set(e,new WeakMap),d=d.get(e);const c=l.at(-1);let u=d.get(c);return u?null===t||void 0===t||t("hit",e,r):(u=e(...r),d.set(c,u),null===t||void 0===t||t("miss",e,r)),u}}function Lm(e,t,i){const n={nearest:void 0,distanceSquared:arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0};for(const o of i){const i=o.distanceSquared(e,t);if(0===i)return{nearest:o,distanceSquared:0};i<n.distanceSquared&&(n.nearest=o,n.distanceSquared=i)}return n}function Nm(e,t,i){var n,o;let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const{x:r=e,y:a=t}=null!==(n=null===(o=i.transformPoint)||void 0===o?void 0:o.call(i,e,t))&&void 0!==n?n:{},l={nearest:void 0,distanceSquared:s};for(const d of i.children){const{nearest:e,distanceSquared:t}=d.nearestSquared(r,a,l.distanceSquared);if(0===t)return{nearest:e,distanceSquared:t};t<l.distanceSquared&&(l.nearest=e,l.distanceSquared=t)}return l}var Tm=class extends kh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t;super(),this.top=e,this.right=t,this.bottom=i,this.left=n}};function Rm(e,t,i,n){let{top:o,right:s,bottom:r,left:a,width:l,height:d}=n;return null!=a?null!=l?s=i.width-a+l:null!=s&&(l=i.width-a-s):null!=s&&null!=l&&(a=i.width-s-l),null!=o?null!=d?r=i.height-o-d:null!=r&&(d=i.height-r-o):null!=r&&null!=d&&(o=i.height-r-d),null==l?null==d?(d=t,l=e):l=Math.ceil(e*d/t):null!==d&&void 0!==d||(d=Math.ceil(t*l/e)),null==a&&(a=null==s?Math.floor((i.width-l)/2):i.width-s-l),null==o&&(o=null==r?Math.floor((i.height-d)/2):i.height-d-r),{x:a,y:o,width:l,height:d}}xr([ru],Tm.prototype,"top",2),xr([ru],Tm.prototype,"right",2),xr([ru],Tm.prototype,"bottom",2),xr([ru],Tm.prototype,"left",2);var Em="color: green",Pm="color: grey";function Om(){return du(()=>{})}function Fm(e,t){const i=uu(t);if(0===i.length)return;const n=hu(e);for(const o of i)o in n&&(t[o]=n[o])}var zm=class{transitionRoot(e,t){this.parent?this.parent.transitionRoot(e,t):this.transition(e,t)}},Bm=class e extends zm{constructor(e,t,i){super(),this.defaultState=e,this.states=t,this.enterEach=i,this.debug=Cr.create(!0,"animation"),this.state=e,this.debug("%c".concat(this.constructor.name," | init -> ").concat(e),Em)}transition(t,i){var n;if(!this.transitionChild(t,i)||this.state===e.child||this.state===e.parent)return;const o=this.state,s=this.states[this.state];let r=s[t];const a="%c".concat(this.constructor.name," | ").concat(this.state," -> ").concat(t," ->");if(Array.isArray(r))r=r.find(e=>{if(!e.guard)return!0;const t=e.guard(i);return t||this.debug("".concat(a," (guarded)"),e.target,Pm),t});else if("object"===typeof r&&!(r instanceof e)&&r.guard&&!r.guard(i))return void this.debug("".concat(a," (guarded)"),r.target,Pm);if(!r)return void this.debug("".concat(a," ").concat(this.state),Pm);const l=this.getDestinationState(r),d=l===this.state?void 0:s.onExit;if(this.debug("".concat(a," ").concat(l),Em),this.state=l,"function"===typeof r)r(i);else if("object"===typeof r&&!(r instanceof e)){var c,u;null===(c=(u=r).action)||void 0===c||c.call(u,i)}var h,p;(null===d||void 0===d||d(),null===(n=this.enterEach)||void 0===n||n.call(this,o,l),l!==o&&l!==e.child&&l!==e.parent)&&(null===(h=(p=this.states[l]).onEnter)||void 0===h||h.call(p,o,i))}transitionAsync(e,t){setTimeout(()=>{this.transition(e,t)},0)}is(t){return this.state===e.child&&this.childState?this.childState.is(t):this.state===t}resetHierarchy(){this.debug("%c".concat(this.constructor.name," | ").concat(this.state," -> [resetHierarchy] -> ").concat(this.defaultState),"color: green"),this.state=this.defaultState}transitionChild(t,i){var n,o;return this.state!==e.child||!this.childState||(Fm(this,this.childState),this.childState.transition(t,i),!this.childState.is(e.parent)||(this.debug("%c".concat(this.constructor.name," | ").concat(this.state," -> ").concat(t," -> ").concat(this.defaultState),Em),this.state=this.defaultState,null===(n=(o=this.states[this.state]).onEnter)||void 0===n||n.call(o),this.childState.resetHierarchy(),!1))}getDestinationState(t){let i=this.state;return"string"===typeof t?i=t:t instanceof e?(this.childState=t,this.childState.parent=this,i=e.child):"object"===typeof t&&(t.target instanceof e?(this.childState=t.target,this.childState.parent=this,i=e.child):null!=t.target&&(i=t.target)),i}};Bm.child="__child",Bm.parent="__parent";var Vm=Bm,Gm=class extends zm{constructor(){super();for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.stateMachines=t;for(const n of t)n.parent=this}transition(e,t){for(const i of this.stateMachines)Fm(this,i),i.transition(e,t)}transitionAsync(e,t){for(const i of this.stateMachines)Fm(this,i),i.transitionAsync(e,t)}},Hm=class{constructor(e,t){this.ctx=e,this.measureTextCached=t,this.baselineMap=new Map,this.charMap=new Map,this.lineHeightCache=null}baselineDistance(e){if("alphabetic"===e)return 0;if(this.baselineMap.has(e))return this.baselineMap.get(e);this.ctx.textBaseline=e;const{alphabeticBaseline:t}=this.ctx.measureText("");return this.baselineMap.set(e,t),this.ctx.textBaseline="alphabetic",t}lineHeight(){var e;return null!==(e=this.lineHeightCache)&&void 0!==e||(this.lineHeightCache=this.measureText("").height),this.lineHeightCache}measureText(e){var t,i;const n=null!==(t=null===(i=this.measureTextCached)||void 0===i?void 0:i.call(this,e))&&void 0!==t?t:this.ctx.measureText(e),{width:o,fontBoundingBoxAscent:s=n.emHeightAscent,fontBoundingBoxDescent:r=n.emHeightDescent}=n;return{width:o,height:s+r,ascent:s,descent:r}}measureLines(e){const t="string"===typeof e?e.split(Fl):e;let i=0,n=0;const o=t.map(e=>{const t=this.measureText(e);return i<t.width&&(i=t.width),n+=t.height,p({text:e},t)});return{width:i,height:n,lineMetrics:o}}textWidth(e,t){var i;if(t){let t=0;for(let i=0;i<e.length;i++)t+=this.textWidth(e.charAt(i));return t}return e.length>1?this.ctx.measureText(e).width:null!==(i=this.charMap.get(e))&&void 0!==i?i:this.charWidth(e)}charWidth(e){const{width:t}=this.ctx.measureText(e);return this.charMap.set(e,t),t}},jm=new Fa(50);function Wm(e){"object"===typeof e&&(e=Bl(e));let t=jm.get(e);if(t)return t;const i=new Fa(1e4),n=bg();return n.font=e,t=new Hm(n,e=>{let t=i.get(e);return t||(t=n.measureText(e),i.set(e,t),t)}),jm.set(e,t),t}function _m(e,t){let i={segments:[],width:0,height:0,ascent:0,descent:0};const n=[i];for(const r of e){const{text:e,fontSize:o=t.fontSize,fontStyle:s=t.fontStyle,fontWeight:a=t.fontWeight,fontFamily:d=t.fontFamily}=r,c=l(r,fr),u={fontSize:o,fontStyle:s,fontWeight:a,fontFamily:d},h=Wm(u),g=Gl(e).split(Fl);for(let t=0;t<g.length;t++){const e=g[t],o=h.measureText(e);t>0&&(i={segments:[],width:0,height:0,ascent:0,descent:0},n.push(i)),e&&(i.width+=o.width,i.ascent=Math.max(i.ascent,o.ascent),i.descent=Math.max(i.descent,o.descent),i.height=Math.max(i.height,i.ascent+i.descent),i.segments.push(p(p(p({},u),c),{},{text:e,textMetrics:o})))}}let o=0,s=0;for(const r of n)o=Math.max(o,r.width),s+=r.height;return{width:o,height:s,lineMetrics:n}}function Km(e,t){return"hide"===t.overflow&&e.some(Ul)}function Um(e,t){return Ua(e)?Jm(e,t):$m(Gl(e),t).join("\n")}function Ym(e,t){return $m(e,t).join("\n")}function $m(e,t){return Xm(e,t)}function Zm(e,t,i,n){const o=t.textWidth(Ol);let s=0,r=0;for(;r<e.length;r++){const n=t.textWidth(e.charAt(r));if(s+n>i)break;s+=n}if(e.length===r&&(!n||s+o<=i))return n?jl(e):e;for(e=e.slice(0,r).trimEnd();e.length&&t.textWidth(e)+o>i;)e=e.slice(0,-1).trimEnd();return jl(e)}function Xm(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=e.split(Fl),o=Wm(t.font),s=[];if("never"===t.textWrap){for(const e of n){const n=Zm(e.trimEnd(),o,Math.max(0,t.maxWidth-i));if(!n)break;s.push(n),i=0}return Km(s,t)?[]:s}const r="hyphenate"===t.textWrap,a=null==t.textWrap||"on-space"===t.textWrap;for(const d of n){let e=d.trimEnd();if(""===e){s.push(e);continue}let n=0,l=0,c=0;for(s.length||(l=i);n<e.length;){const d=e.charAt(n);if(" "===d&&(c=n),l+=o.textWidth(d),l>t.maxWidth){if(0===n){e="";break}let d=o.textWidth(e.slice(0,n+1));if(s.length||(d+=i),d<=t.maxWidth){l=d,n++;continue}if(c){const i=qm(e,c+1),r=o.textWidth(i);if(r<=t.maxWidth){s.push(e.slice(0,c).trimEnd()),e=e.slice(c).trimStart(),n=0,l=0,c=0;continue}a&&r>t.maxWidth&&s.push(e.slice(0,c).trimEnd(),Zm(e.slice(c).trimStart(),o,t.maxWidth,!0))}else if(a){const i=Zm(e,o,t.maxWidth,!0);i&&s.push(i)}if(a){e="";break}const u=r?"-":"";let h=e.slice(0,n).trim();for(;h.length&&o.textWidth(h+u)>t.maxWidth;)h=h.slice(0,-1).trimEnd();if(!h||h===zl){e="";break}s.push(h+u),e=e.slice(h.length).trimStart(),n=-1,l=0,c=0}n++}e&&s.push(e)}!function(e,t,i){if(!1===i.avoidOrphans||e.length<2)return;const{length:n}=e,o=e[n-1],s=e[n-2];if(s.length<o.length)return;const r=s.lastIndexOf(" ");if(-1===r||r===s.indexOf(" ")||o.includes(" "))return;const a=s.slice(r+1);t.textWidth(o+a)<=i.maxWidth&&(e[n-2]=s.slice(0,r),e[n-1]=a+" "+o)}(s,o,t);const l=Qm(s,o,t);return Km(l,t)?[]:l}function qm(e,t){const i=e.indexOf(" ",t);return-1===i?e.slice(t):e.slice(t,i)}function Qm(e,t,i){if(!ol(i.maxHeight))return e;const{height:n,lineMetrics:o}=t.measureLines(e);if(n<=i.maxHeight)return e;for(let s=0,r=0;s<o.length;s++)if(r+=o[s].height,r>i.maxHeight){if("hide"===i.overflow||0===s)return[];const n=e.slice(0,s),o=n.pop();return n.concat(Ul(o)?o:Zm(o,t,i.maxWidth,!0))}return e}function Jm(e,t){const{maxHeight:i=1/0}=t,n=[];let o=0,s=0;function r(){const e=n.pop();if(!e)return;const i=Wm(e),o=Zm(e.text,i,t.maxWidth,!0),s=i.measureText(o);n.push(p(p({},e),{},{text:o,textMetrics:s}))}for(const{width:a,height:l,segments:d}of _m(e,t.font).lineMetrics){if(s+l>i){n.length&&r();break}if(o+a<=t.maxWidth)o+=a,s+=l,n.push(...d);else for(const e of d){if(o+e.textMetrics.width<=t.maxWidth){o+=e.textMetrics.width,n.push(e);continue}const a=Wm(e),l=Wl(e.text),d=p(p({},t),{},{font:e,maxHeight:i-s});let c=Xm(l,p(p({},d),{},{overflow:"hide"}),o);if(0===c.length)if("never"===t.textWrap)c=Xm(l,d,o);else{c=Xm(l,d);const e=n.at(-1);e&&(e.text+="\n",o=0)}if(0===c.length){r();break}const u=c.findIndex(Ul);-1!==u&&(c=c.slice(0,u+1));const h=c.at(-1);for(const t of c){const i=_l(t),r=a.measureText(i),l=p(p({},e),{},{text:i,textMetrics:r});t===h?o+=r.width:(l.text+="\n",o=0),s+=r.height,n.push(l)}if(-1!==u)break}}return n}Wm.clear=()=>jm.clear();var ef=1e3,tf=60*ef,nf=60*tf,of=24*nf,sf=7*of,rf=30*of,af=365*of,lf=(new Date).getTimezoneOffset()*tf,df={millisecond:{milliseconds:1,hierarchy:"day",encode:e=>e.getTime(),decode:e=>new Date(e)},second:{milliseconds:ef,hierarchy:"day",encode(e,t){const i=t?0:lf;return Math.floor((e.getTime()-i)/ef)},decode:(e,t)=>new Date((t?0:lf)+e*ef)},minute:{milliseconds:tf,hierarchy:"day",encode(e,t){const i=t?0:lf;return Math.floor((e.getTime()-i)/tf)},decode:(e,t)=>new Date((t?0:lf)+e*tf)},hour:{milliseconds:nf,hierarchy:"day",encode(e,t){const i=t?0:lf;return Math.floor((e.getTime()-i)/nf)},decode:(e,t)=>new Date((t?0:lf)+e*nf)},day:{milliseconds:of,hierarchy:"month",encode(e,t){const i=t?0:e.getTimezoneOffset()*tf;return Math.floor((e.getTime()-i)/of)},decode(e,t){let i;return t?(i=new Date(0),i.setUTCDate(i.getUTCDate()+e),i.setUTCHours(0,0,0,0)):(i=new Date(1970,0,1),i.setDate(i.getDate()+e)),i}},month:{milliseconds:rf,hierarchy:"year",encode:(e,t)=>t?12*e.getUTCFullYear()+e.getUTCMonth():12*e.getFullYear()+e.getMonth(),decode(e,t){if(t){const t=Math.floor(e/12),i=e-12*t;return new Date(Date.UTC(t,i,1))}{const t=Math.floor(e/12);return new Date(t,e-12*t,1)}}},year:{milliseconds:af,hierarchy:void 0,encode:(e,t)=>t?e.getUTCFullYear():e.getFullYear(),decode(e,t){let i;return t?(i=new Date,i.setUTCFullYear(e),i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)):i=new Date(e,0,1,0,0,0,0),i}}};function cf(e){var t,i;return"string"===typeof e?{unit:e,step:1,epoch:void 0,utc:!1}:{unit:e.unit,step:null!==(t=e.step)&&void 0!==t?t:1,epoch:e.epoch,utc:null!==(i=e.utc)&&void 0!==i&&i}}function uf(e,t,i,n){if(null==i)return 0;const o=df[e];return Math.floor(o.encode(new Date(i),n))%t}function hf(e,t,i,n,o){const s=df[t];return Math.floor((s.encode(new Date(e),n)-o)/i)}function pf(e,t,i,n,o){return df[t].decode(e*i+o,n)}function gf(e,t,i,n,o){return pf(hf(new Date(e),t,i,n,o),t,i,n,o)}function mf(e,t,i,n,o){return pf(hf(new Date(Number(e)-1),t,i,n,o)+1,t,i,n,o)}function ff(e,t){const{unit:i,step:n,epoch:o,utc:s}=cf(e);return gf(t,i,n,s,uf(i,n,o,s))}function vf(e,t){const{unit:i,step:n,epoch:o,utc:s}=cf(e);return mf(t,i,n,s,uf(i,n,o,s))}function yf(e,t){const{unit:i,step:n,epoch:o,utc:s}=cf(e),r=uf(i,n,o,s);return pf(hf(mf(t,i,n,s,r),i,n,s,r)-1,i,n,s,r)}function bf(e,t){const{unit:i,step:n,epoch:o,utc:s}=cf(e),r=uf(i,n,o,s);return pf(hf(gf(t,i,n,s,r),i,n,s,r)+1,i,n,s,r)}function xf(e,t,i){if(e.valueOf()>t.valueOf()&&([e,t]=[t,e],null!=i&&(i=[1-i[1],1-i[0]])),null!=i){const n=t.valueOf()-e.valueOf(),o=e.valueOf();e=new Date(o+i[0]*n),t=new Date(o+i[1]*n)}return[new Date(e),new Date(t)]}function Cf(e,t,i){let{extend:n=!1,visibleRange:o=[0,1],limit:s,defaultAlignment:r="start"}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=cf(e),{unit:l,step:d,utc:c}=a;let u;u=null!=a.epoch?a.epoch:"interval"===r?void 0:t.valueOf()>i.valueOf()?i:t;const h=uf(a.unit,a.step,u,a.utc);let[p,g]=xf(t,i,o);p=n?gf(p,l,d,c,h):mf(p,l,d,c,h),g=n?mf(g,l,d,c,h):gf(g,l,d,c,h);const m=hf(p,l,d,c,h);let f=hf(g,l,d,c,h);return null!=s&&f-m>s&&(f=m+s),{range:[m,f],unit:l,step:d,utc:c,offset:h}}function Sf(e,t,i,n){const{range:[o,s]}=Cf(e,t,i,n);return Math.abs(s-o)}function wf(e,t,i,n){const{range:[o,s],unit:r,step:a,utc:l,offset:d}=Cf(e,t,i,n),c=[];for(let u=o;u<=s;u+=1){const e=pf(u,r,a,l,d);c.push(e)}return c}function Mf(e,t,i,n){const{range:[o,s],unit:r,step:a,utc:l,offset:d}=Cf(e,t,i,n),c=Math.max(0,s-o+1),u=new Array(c);for(let h=0;h<c;h++)u[h]=o+h;return{encodedValues:u,encodingParams:{unit:r,step:a,utc:l,offset:d}}}function kf(e,t){return pf(e,t.unit,t.step,t.utc,t.offset)}var Df=6e4*(new Date).getTimezoneOffset(),If=1e3,Af=6e4,Lf=36e5;function Nf(e,t){const{unit:i,step:n,utc:o,offset:s}=t,r=e*n+s;switch(i){case"millisecond":return r;case"second":return(o?0:Df)+r*If;case"minute":return(o?0:Df)+r*Af;case"hour":return(o?0:Df)+r*Lf;default:return df[i].decode(r,o).valueOf()}}function Tf(e,t,i){let{extend:n,visibleRange:o,limit:s,defaultAlignment:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{range:[a]}=Cf(e,t,i,{extend:n,visibleRange:o,limit:s,defaultAlignment:r}),{range:[l]}=Cf(e,t,i,{extend:n,limit:s,defaultAlignment:r});return a-l}function Rf(e){return"string"===typeof e?e:e.unit}function Ef(e){var t;return"string"===typeof e?1:null!==(t=e.step)&&void 0!==t?t:1}function Pf(e){return"string"===typeof e?void 0:e.epoch}function Of(e){return df[Rf(e)].hierarchy}function Ff(e){return Ef(e)*df[Rf(e)].milliseconds}function zf(e,t,i){let[n,o]=t,[s,r]=i;const a=r-s,l=o-n;return[(n+l*e[0]-s)/a,(n+l*e[1]-s)/a]}var Bf=(e,t)=>({duration:Ff(e)*t,timeInterval:e,step:t}),Vf=[Bf({unit:"second"},1),Bf({unit:"second"},5),Bf({unit:"second"},15),Bf({unit:"second"},30),Bf({unit:"minute"},1),Bf({unit:"minute"},5),Bf({unit:"minute"},15),Bf({unit:"minute"},30),Bf({unit:"hour"},1),Bf({unit:"hour"},3),Bf({unit:"hour"},6),Bf({unit:"hour"},12),Bf({unit:"day"},1),Bf({unit:"day"},2),Bf({unit:"day",step:7},1),Bf({unit:"day",step:7},2),Bf({unit:"day",step:7},3),Bf({unit:"month"},1),Bf({unit:"month"},2),Bf({unit:"month"},3),Bf({unit:"month"},4),Bf({unit:"month"},6),Bf({unit:"year"},1)],Gf=[1,2,5,10];function Hf(e,t){return Math.abs(Math.round(e)-e)<t}function jf(e,t,i){return Math.abs(t-e)>=i?Math.abs(t-e)/i+1:1}function Wf(e,t,i,n,o,s){if(e===t)return{ticks:[e],count:1,firstTickIndex:0};if(i<2)return{ticks:[e,t],count:2,firstTickIndex:0};const r=$f(e,t,i,n,o);if(!Number.isFinite(r))return{ticks:[],count:0,firstTickIndex:void 0};let a=e,l=t;Hf(a/r,1e-12)||(a=Math.ceil(a/r)*r),Hf(l/r,1e-12)||(l=Math.floor(l/r)*r),null!=s&&(s=zf(s,[e,t],[a,l]));const{ticks:d}=qf(a,l,r,s),c=d.at(0);return{ticks:d,count:jf(a,l,r),firstTickIndex:null==c?void 0:Math.round((c-a)/r)}}var _f=Math.floor(2*sf/rf*10)/10;function Kf(e){let{timeInterval:t,step:i}=e;const n=Ff(t)*i,o=Of(t),s=o?Ff(o):void 0;return n<=(null!==s&&void 0!==s?s:1/0)*_f}function Uf(e,t){let{weekStart:i}=t;if("day"===e.unit&&7===e.step)return i}function Yf(e,t,i,n,o,s){let{weekStart:r,primaryOnly:a=!1,targetInterval:l}=s;if(i<=0)return;const d=null!==l&&void 0!==l?l:Math.abs(t-e)/Math.max(i,1),c=Vf.findLast(e=>(!a||Kf(e))&&d>e.duration),u=Vf.find(e=>(!a||Kf(e))&&d<=e.duration);if(null==c){return{unit:"millisecond",step:Math.max($f(e,t,i,n,o),1)}}if(null==u){return{unit:"year",step:null==l?$f(e/af,t/af,i,n,o):1}}const{timeInterval:h,step:p}=d-c.duration<u.duration-d?c:u;return{unit:h.unit,step:Ef(h)*p,epoch:Uf(h,{weekStart:r})}}function $f(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;if(e===t)return za(1,n,o);if(i<1)return Number.NaN;const s=Math.abs(t-e),r=10**Math.floor(Math.log10(s/i));let a=Number.NaN,l=1/0,d=!1;for(const c of Gf){const e=Math.ceil(s/(c*r)),t=e>=n&&e<=o;if(d&&!t)continue;const u=Math.abs(e-i);(l>u||d!==t)&&(d||(d=t),l=u,a=c)}return a*r}function Zf(e){for(let t=e.length-1;t>=0;t-=1)if("0"!==e[t])return t+1;return 0}function Xf(e,t){const i=gl(null!==t&&void 0!==t?t:",f");if(null==i)return;(null==i.precision||Number.isNaN(i.precision))&&(!i.type||"eEFgGnprs".includes(i.type)?i.precision=Math.max(...e.map(e=>{if(!Number.isFinite(e))return 0;const[t,n]=e.toExponential((i.type?6:12)-1).split(/[.e]/g);return("1"!==t&&"-1"!==t?1:0)+Zf(n)+1})):"f%".includes(i.type)&&(i.precision=Math.max(...e.map(e=>{if(!Number.isFinite(e)||0===e)return 0;const t=Math.floor(Math.log10(Math.abs(e))),n=i.type?6:12,o=Zf(e.toExponential(n-1).split(/[.e]/g)[1]);return Math.max(0,o-t)}))));const n=ml(i);return e=>n(Number(e))}function qf(e,t,i,n){if(!Number.isFinite(i)||i<=0)return{ticks:[],count:0,firstTickIndex:void 0};if(e===t)return{ticks:[e],count:1,firstTickIndex:0};const o=10**_a(i),s=Math.min(e,t),r=Math.max(e,t);let a,l;if(null==n||0===n[0]&&1===n[1])a=s,l=r;else{const i=t-e,o=e+i*n[0],s=t-i*(1-n[1]);a=Math.min(o,s),l=Math.max(o,s)}a=Math.floor(a*o)/o,l=Math.ceil(l*o)/o;const d=[];for(let u=0;;u+=1){const e=Math.round((s+i*u)*o)/o;if(e>r)break;e>=a&&e<=l&&d.push(e)}const c=d.at(0);return{ticks:d,count:jf(s,r,i),firstTickIndex:null==c?void 0:Math.round((c-s)/i)}}function Qf(e,t){return e>=t&&(jr.warnOnce("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0)}function Jf(e,t){const i=Math.abs(t-e),n=10**Math.floor(Math.log10(i));let o=1/0,s=[e,t];for(const r of Gf){const a=r*n,l=Math.floor(e/a)*a,d=Math.ceil(t/a)*a,c=1-i/Math.abs(d-l);o>c&&(o=c,s=[l,d])}return s}function ev(e,t,i,n,o,s){if(e<=0)return{minTickCount:0,maxTickCount:0,tickCount:0};s=Math.max(s,e/(o+1)),null!==i&&void 0!==i||(i=s),null!==n&&void 0!==n||(n=e),i>n&&(i===s?i=n:n=i),i=Math.max(i,1);const r=Math.max(1,Math.floor(e/(t*i))),a=Math.min(r,Math.ceil(e/(t*n)));return{minTickCount:a,maxTickCount:r,tickCount:za(a,Math.floor(o/t),r)}}function tv(e){return e instanceof Date?e.getTime():e}function iv(e){return e<ef?"millisecond":e<tf?"second":e<nf?"minute":e<23*nf?"hour":e<28*of?"day":e<af?"month":"year"}function nv(e){if(0===e.length)return"millisecond";if(1===e.length)return ov(e[0]);let t=1/0;for(let i=1;i<e.length;i++)t=Math.min(t,Math.abs(e[i].valueOf()-e[i-1].valueOf()));return iv(t)}function ov(e){return ff("second",e)<e?"millisecond":ff("minute",e)<e?"second":ff("hour",e)<e?"minute":ff("day",e)<e?"hour":ff("month",e)<e?"day":ff("year",e)<e?"month":"year"}function sv(e){const[t,i]=0===e.length?[0,0]:$u([e[0].valueOf(),e.at(-1).valueOf()]);if(new Date(t).getFullYear()!==new Date(i).getFullYear())return;if(new Date(t).getMonth()!==new Date(i).getMonth())return"year";return new Date(t).getDate()!==new Date(i).getDate()?"month":"day"}function rv(){const e=new Map;return t=>{const i=e.get(t);return i?(e.set(t,i+1),"".concat(t,"_").concat(i)):(e.set(t,1),t)}}function av(e){return null!=e&&Object.hasOwn(e,"toString")&&il(e.toString())}function lv(e){return null!=e&&Object.hasOwn(e,"valueOf")&&ol(e.valueOf())}function dv(e){return ol(e)||Za(e)||lv(e)}function cv(e,t){return null!=e&&(!t||dv(e))}function uv(e){return av(e)&&Object.hasOwn(e,"id")?e.id:e}function hv(e){return av(e)&&Object.hasOwn(e,"value")?e.value:e}var pv={};function gv(e,t){return"number"===typeof t?{x:e.x+t,y:e.y+t}:{x:e.x+t.x,y:e.y+t.y}}function mv(e,t){return"number"===typeof t?{x:e.x-t,y:e.y-t}:{x:e.x-t.x,y:e.y-t.y}}function fv(e,t){return"number"===typeof t?{x:e.x*t,y:e.y*t}:{x:e.x*t.x,y:e.y*t.y}}function vv(e){return Math.hypot(e.x,e.y)}function yv(e){return e.x*e.x+e.y*e.y}function bv(e,t){return vv(mv(e,t))}function xv(e,t){return yv(mv(e,t))}function Cv(e){const t=vv(e);return{x:e.x/t,y:e.y/t}}function Sv(e,t){return null==t?Math.atan2(e.y,e.x):Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x)}function wv(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};const n=vv(e);return{x:i.x+n*Math.cos(t),y:i.y+n*Math.sin(t)}}function Mv(e,t,i){const n=t.x-e.x;return(null==i?t.y-e.y:i-t.y-(i-e.y))/n}function kv(e,t,i){return(null==i?e.y:i-e.y)-t*e.x}function Dv(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;return{x:e===1/0?1/0:(i-t)/e,y:null==n?i:n-i}}function Iv(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;const o=e===1/0?1/0:e*i+t;return{x:i,y:null==n?o:n-o}}function Av(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return{x:ja(e.x,t),y:ja(e.y,t)}}function Lv(e,t){return e.x===t.x&&e.y===t.y}function Nv(e,t){if("number"===typeof e)return{x:e,y:t};if("currentX"in e)return{x:e.currentX,y:e.currentY};if("offsetWidth"in e)return{x:e.offsetWidth,y:e.offsetHeight};if("width"in e)return[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y+e.height}];if("x1"in e)return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2}];throw new Error("Values can not be converted into a vector: [".concat(JSON.stringify(e),"] [").concat(t,"]"))}function Tv(e,t){return e.x=t.x,e.y=t.y,e}function Rv(e){var t,i;return{x:null!==(t=null===e||void 0===e?void 0:e.x)&&void 0!==t?t:0,y:null!==(i=null===e||void 0===e?void 0:e.y)&&void 0!==i?i:0}}function Ev(){return{x:0,y:0}}br(pv,{add:()=>gv,angle:()=>Sv,apply:()=>Tv,distance:()=>bv,distanceSquared:()=>xv,equal:()=>Lv,from:()=>Nv,gradient:()=>Mv,intercept:()=>kv,intersectAtX:()=>Iv,intersectAtY:()=>Dv,length:()=>vv,lengthSquared:()=>yv,multiply:()=>fv,normalized:()=>Cv,origin:()=>Ev,required:()=>Rv,rotate:()=>wv,round:()=>Av,sub:()=>mv});var Pv={};function Ov(e){return{x:e.x1,y:e.y1}}function Fv(e){return{x:e.x2,y:e.y2}}function zv(e){return{x:(e.x1+e.x2)/2,y:Math.min(e.y1,e.y2)}}function Bv(e){return{x:(e.x1+e.x2)/2,y:(e.y1+e.y2)/2}}function Vv(e){return{x:(e.x1+e.x2)/2,y:Math.max(e.y1,e.y2)}}function Gv(e){return Math.abs(e.x2-e.x1)}function Hv(e){return Math.abs(e.y2-e.y1)}function jv(e){return{x1:Math.round(e.x1),y1:Math.round(e.y1),x2:Math.round(e.x2),y2:Math.round(e.y2)}}function Wv(e){return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}}function _v(e,t){const i=Kv(e),n=Kv(t);return i.x1<=n.x2&&i.x2>=n.x1&&i.y1<=n.y2&&i.y2>=n.y1}function Kv(e){return{x1:Math.min(e.x1,e.x2),x2:Math.max(e.x1,e.x2),y1:Math.min(e.y1,e.y2),y2:Math.max(e.y1,e.y2)}}function Uv(e,t,i,n){if("number"===typeof e)return{x1:e,y1:t,x2:i,y2:n};if("width"in e)return Kv({x1:e.x,y1:e.y,x2:e.x+e.width,y2:e.y+e.height});throw new Error("Values can not be converted into a vector4: [".concat(JSON.stringify(e),"] [").concat(t,"] [").concat(i,"] [").concat(n,"]"))}function Yv(){return{x1:0,y1:0,x2:0,y2:0}}function $v(e){return Qa(e)&&"gradient"==e.type}function Zv(e){return Ua(e)&&e.every($v)}function Xv(e){return Ua(e)&&e.every(e=>"string"===typeof e)}function qv(e){return null!==e&&Qa(e)&&"pattern"==e.type}function Qv(e){return null!==e&&Qa(e)&&"image"==e.type}function Jv(e){return $v(e)||qv(e)}function ey(e,t,i,n,o){return(1-o)**3*e+3*(1-o)**2*o*t+3*(1-o)*o**2*i+o**3*n}function ty(e,t,i,n,o){if(o<=Math.min(e,n))return e<n?0:1;if(o>=Math.max(e,n))return e<n?1:0;let s=0,r=1,a=Number.NaN;for(let l=0;l<12;l+=1){a=(s+r)/2;ey(e,t,i,n,a)<o?s=a:r=a}return a}function iy(e,t,i,n,o,s,r,a,l){const d=(1-l)*e+l*i,c=(1-l)*t+l*n,u=(1-l)*i+l*o,h=(1-l)*n+l*s,p=(1-l)*o+l*r,g=(1-l)*s+l*a,m=(1-l)*d+l*u,f=(1-l)*c+l*h,v=(1-l)*u+l*p,y=(1-l)*h+l*g,b=(1-l)*m+l*v,x=(1-l)*f+l*y;return[[{x:e,y:t},{x:d,y:c},{x:m,y:f},{x:b,y:x}],[{x:b,y:x},{x:v,y:y},{x:p,y:g},{x:r,y:a}]]}function ny(e,t,i,n){const o=3*t-e-3*i+n,s=2*(e-2*t+i),r=-e+t;if(0===o){if(0!==s){const e=-r/s;if(e>0&&e<1)return[e]}return[]}const a=s*s-4*o*r;if(a>=0){const e=Math.sqrt(a);return[(-s+e)/(2*o),(-s-e)/(2*o)].filter(e=>e>0&&e<1)}return[]}function oy(e,t,i,n,o,s,r,a){return[...ny(e,i,o,r),...ny(t,n,s,a)]}function sy(e,t,i){const n=ey(e[0].x,e[1].x,e[2].x,e[3].x,.5),o=ey(e[0].y,e[1].y,e[2].y,e[3].y,.5);return{points:e,distance:Math.hypot(n-t,o-i),minDistance:Math.min(Math.hypot(e[0].x-t,e[0].y-i),Math.hypot(e[1].x-t,e[1].y-i),Math.hypot(e[2].x-t,e[2].y-i),Math.hypot(e[3].x-t,e[3].y-i))}}function ry(e,t,i,n,o,s,r,a,l,d){var c,u;let h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1;let p,g={value:sy([{x:e,y:t},{x:i,y:n},{x:o,y:s},{x:r,y:a}],l,d),next:null};for(;null!=g;){const{points:e,distance:t,minDistance:i}=g.value;if(g=g.next,(null==p||t<p.distance)&&(p={distance:t,minDistance:i}),null!=p&&p.distance-i<=h)continue;const[n,o]=iy(e[0].x,e[0].y,e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y,.5);g=wm(g,[sy(n,l,d),sy(o,l,d)].sort(ay),ay)}return null!==(c=null===(u=p)||void 0===u?void 0:u.distance)&&void 0!==c?c:1/0}br(Pv,{bottomCenter:()=>Vv,center:()=>Bv,clone:()=>Wv,collides:()=>_v,end:()=>Fv,from:()=>Uv,height:()=>Hv,normalise:()=>Kv,origin:()=>Yv,round:()=>jv,start:()=>Ov,topCenter:()=>zv,width:()=>Gv});var ay=(e,t)=>t.minDistance-e.minDistance;function ly(e,t,i,n,o){let{point:s,anchor:r}=e;if(0===s.size)return!1;let a=s.x,l=s.y;null!=r&&(a-=(r.x-.5)*s.size,l-=(r.y-.5)*s.size);let d=a;a<t?d=t:a>t+n&&(d=t+n);let c=l;l<i?c=i:l>i+o&&(c=i+o);const u=a-d,h=l-c;return Math.hypot(u,h)<=s.size/2}function dy(e){return null!=e&&"object"===typeof e.point&&"object"===typeof e.label}var cy={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0},"top-left":{x:-1,y:-1},"top-right":{x:1,y:-1},"bottom-left":{x:-1,y:1},"bottom-right":{x:1,y:1}};function uy(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;const n=new Map,o=[],s=new Map(Array.from(e.entries(),e=>{let[t,i]=e;return[t,i.toSorted((e,t)=>t.point.size-e.point.size)]})),r=[...s.values()].flat();for(const[l,d]of s.entries()){var a;const e=[];if(null!==(a=d[0])&&void 0!==a&&a.label){for(let n=0,s=d.length;n<s;n++){const s=d[n],{point:a,label:l,anchor:c}=s,{text:u,width:h,height:p}=l,g=a.size/2;let m=0,f=0;if(g>0&&null!=s.placement){const e=cy[s.placement];m=(h/2+g+i)*e.x,f=(p/2+g+i)*e.y}let v=a.x-h/2+m,y=a.y-p/2+f;if(c&&(v-=(c.x-.5)*a.size,y-=(c.y-.5)*a.size),ag(t,v,y,h,p)&&!r.some(e=>ly(e,v,y,h,p))&&!o.some(e=>rg(e,v,y,h,p))){const t={index:n,text:u,x:v,y:y,width:h,height:p,datum:s};e.push(t),o.push(t)}}n.set(l,e)}}return n}function hy(e){return"continuous"===e.type||"log"===e.type}function py(e){return"category"===e.type}function gy(e){return"variant"in e&&"unit-time"===e.variant}function my(e){return!("variant"in e)}function fy(e,t){return void 0===e||void 0===t?void 0!==e||void 0!==t:hy(e)&&hy(t)?e.type===t.type&&kr(e.domain,t.domain)&&kr(e.range,t.range):!(!py(e)||!py(t))&&(gy(e)&&gy(t)?e.firstBandTime===t.firstBandTime&&e.lastBandTime===t.lastBandTime&&e.bandCount===t.bandCount&&e.intervalMs===t.intervalMs&&e.inset===t.inset&&e.step===t.step:!(!my(e)||!my(t))&&(e.inset===t.inset&&e.step===t.step&&kr(e.domain,t.domain)))}function vy(e){return null!=e&&("category"===e.type?gy(e)?Number.isFinite(e.firstBandTime)&&Number.isFinite(e.lastBandTime)&&Number.isFinite(e.bandCount)&&e.bandCount>0:e.domain.every(e=>null!=e):e.domain.every(e=>Number.isFinite(e)||e instanceof Date)&&e.range.every(e=>Number.isFinite(e)))}function yy(e){switch(e.type){case"linear":case"step":case"multi-line":return[{x:e.x0,y:e.y0},{x:e.x1,y:e.y1}];case"cubic":return[{x:e.cp0x,y:e.cp0y},{x:e.cp3x,y:e.cp3y}]}}function by(e,t){const{x:i,y:n}=t;switch(e.type){case"linear":return{type:"linear",moveTo:e.moveTo,x0:i,y0:n,x1:i,y1:n};case"step":return{type:"step",moveTo:e.moveTo,x0:i,y0:n,x1:i,y1:n,stepX:i};case"cubic":return{type:"cubic",moveTo:e.moveTo,cp0x:i,cp0y:n,cp1x:i,cp1y:n,cp2x:i,cp2y:n,cp3x:i,cp3y:n};case"multi-line":return{type:"multi-line",moveTo:e.moveTo,x0:i,y0:n,x1:i,y1:n,midPoints:e.midPoints.map(()=>({x:i,y:n}))}}}function xy(e,t,i){const[n,o]=yy(e),s=o.x===n.x?0:(i.x-t.x)/(o.x-n.x),r=o.y===n.y?0:(i.y-t.y)/(o.y-n.y);switch(e.type){case"linear":return{type:"linear",moveTo:e.moveTo,x0:t.x,y0:t.y,x1:i.x,y1:i.y};case"cubic":return{type:"cubic",moveTo:e.moveTo,cp0x:t.x,cp0y:t.y,cp1x:i.x-(e.cp2x-n.x)*s,cp1y:i.y-(e.cp2y-n.y)*r,cp2x:i.x-(e.cp1x-n.x)*s,cp2y:i.y-(e.cp1y-n.y)*r,cp3x:i.x,cp3y:i.y};case"step":return{type:"step",moveTo:e.moveTo,x0:t.x,y0:t.y,x1:i.x,y1:i.y,stepX:i.x-(e.stepX-n.x)*s};case"multi-line":return{type:"multi-line",moveTo:e.moveTo,x0:t.x,y0:t.y,x1:i.x,y1:i.y,midPoints:e.midPoints.map(e=>({x:t.x+(e.x-n.x)*s,y:t.y+(e.y-n.y)*r}))}}}function Cy(e,t,i){const{moveTo:n}=e,[o,s]=function(e){const t=yy(e);return t[0].x>t[1].x&&t.reverse(),t}(e),{x:r,y:a}=o,{x:l,y:d}=s;if(i<r)return xy(e,o,o);if(t>l)return xy(e,s,s);switch(e.type){case"linear":{const e=a===d?void 0:(d-a)/(l-r);return{type:"linear",moveTo:n,x0:t,y0:null==e?a:e*(t-r)+a,x1:i,y1:null==e?a:e*(i-r)+a}}case"step":if(i<=e.stepX){const o=e.y0;return{type:"step",moveTo:n,x0:t,y0:o,x1:i,y1:o,stepX:i}}if(t>=e.stepX){const o=e.y1;return{type:"step",moveTo:n,x0:t,y0:o,x1:i,y1:o,stepX:t}}{const{y0:o,y1:s,stepX:r}=e;return{type:"step",moveTo:n,x0:t,y0:o,x1:i,y1:s,stepX:r}}case"cubic":{const o=ty(e.cp0x,e.cp1x,e.cp2x,e.cp3x,t);let[s,r]=iy(e.cp0x,e.cp0y,e.cp1x,e.cp1y,e.cp2x,e.cp2y,e.cp3x,e.cp3y,o);const a=ty(r[0].x,r[1].x,r[2].x,r[3].x,i);return[r,s]=iy(r[0].x,r[0].y,r[1].x,r[1].y,r[2].x,r[2].y,r[3].x,r[3].y,a),{type:"cubic",moveTo:n,cp0x:r[0].x,cp0y:r[0].y,cp1x:r[1].x,cp1y:r[1].y,cp2x:r[2].x,cp2y:r[2].y,cp3x:r[3].x,cp3y:r[3].y}}case"multi-line":{var c,u,h,p;const{midPoints:o}=e,s=o.findLastIndex(e=>e.x<=t);let g=o.findIndex(e=>e.x>=i);-1===g&&(g=o.length);const m=s>=0?o[s]:void 0,f=null!==(c=null===m||void 0===m?void 0:m.x)&&void 0!==c?c:r,v=null!==(u=null===m||void 0===m?void 0:m.y)&&void 0!==u?u:a,y=g<o.length?o[g]:void 0,b=null!==(h=null===y||void 0===y?void 0:y.x)&&void 0!==h?h:l,x=null!==(p=null===y||void 0===y?void 0:y.y)&&void 0!==p?p:d,C=v===x?void 0:(x-v)/(b-f);return{type:"multi-line",moveTo:n,x0:t,y0:null==C?v:C*(f-r)+v,x1:i,y1:null==C?v:C*(b-r)+v,midPoints:o.slice(Math.max(s,0),g)}}}}var Sy=(e=>(e[e.MoveTo=0]="MoveTo",e[e.LineTo=1]="LineTo",e[e.Skip=2]="Skip",e))(Sy||{});function wy(e){const t=[];let i=0,n=Number.NaN,o=Number.NaN;for(const{x:s,y:r}of e){if(i>0){const e=1===i;t.push({type:"linear",moveTo:e,x0:n,y0:o,x1:s,y1:r})}i+=1,n=s,o=r}return t}var My={start:0,middle:.5,end:1};function ky(e,t){const i=[];let n=0,o=Number.NaN,s=Number.NaN;const r="number"===typeof t?t:My[t];for(const{x:a,y:l}of e){if(n>0){const e=1===n,t=o+(a-o)*r;i.push({type:"step",moveTo:e,x0:o,y0:s,x1:a,y1:l,stepX:t})}n+=1,o=a,s=l}return i}function Dy(e,t){const i=Array.isArray(e)?e:Array.from(e);if(i.length<=1)return[];const n=.05,o=i.map((e,t)=>{const o=0===t?e:i[t-1],s=t===i.length-1?e:i[t+1],r=0===t||t===i.length-1;if(Math.sign(o.y-e.y)===Math.sign(s.y-e.y))return 0;if(!r){const t=Math.abs(o.y-s.y),i=Math.abs(e.y-o.y)/t,r=Math.abs(e.y-s.y)/t;if(i<=n||1-i<=n||r<=n||1-r<=n)return 0}return(s.y-o.y)/(s.x-o.x)});0===o[1]&&(o[0]*=2),0===o.at(-2)&&(o[o.length-1]*=2);const s=[];for(let r=1;r<i.length;r+=1){const e=i[r-1],n=o[r-1],a=i[r],l=o[r],d=a.x-e.x,c=a.y-e.y;let u=d*t/3,h=d*n*t/3,p=d*t/3,g=d*l*t/3;0===l&&Math.abs(h)>Math.abs(c)&&(u*=Math.abs(c/h),h=Math.sign(h)*Math.abs(c)),0===n&&Math.abs(g)>Math.abs(c)&&(p*=Math.abs(c/g),g=Math.sign(g)*Math.abs(c)),s.push({type:"cubic",moveTo:1===r,cp0x:e.x,cp0y:e.y,cp1x:e.x+u,cp1y:e.y+h,cp2x:a.x-p,cp2y:a.y-g,cp3x:a.x,cp3y:a.y})}return s}var Iy=class extends kh{constructor(){super(...arguments),this._dirty=!0}markDirty(){this._dirty=!0}markClean(e){this._dirty=!1}isDirty(){return this._dirty}onChangeDetection(e){this.markDirty()}},Ay=class extends kh{};function Ly(e,t){const i=zr("button",Py("ag-charts-input ag-charts-button",t));return void 0===e.label?(i.append(Ey(e.icon)),i.ariaLabel=e.altText):i.append(e.label),i.addEventListener("click",e.onPress),Xp(i,t),i}function Ny(e,t){const i=zr("input",Py("ag-charts-input ag-charts-checkbox",t));return i.type="checkbox",i.checked=e.checked,i.addEventListener("change",t=>e.onChange(i.checked,t)),i.addEventListener("keydown",e=>{gm(e)&&(e.preventDefault(),i.click())}),Xp(i,t),i}function Ty(e,t){const i=zr("select",Py("ag-charts-input ag-charts-select",t));return i.append(...e.options.map(e=>{const t=zr("option");return t.value=e.value,t.textContent=e.label,t})),Zp(i,"data-preventdefault",!1),i.value=e.value,i.addEventListener("change",t=>e.onChange(i.value,t)),Xp(i,t),i}function Ry(e,t){const i=zr("textarea",Py("ag-charts-input ag-charts-textarea",t));return i.value=e.value,i.addEventListener("input",t=>e.onChange(i.value,t)),Xp(i,t),Zp(i,"data-preventdefault",!1),i}function Ey(e){const t=zr("span","ag-charts-icon ag-charts-icon-".concat(e));return Zp(t,"aria-hidden",!0),t}function Py(e,t){return null==t?e:"".concat(e," ").concat(t.class)}xr([ru],Ay.prototype,"icon",2),xr([ru],Ay.prototype,"label",2),xr([ru],Ay.prototype,"ariaLabel",2),xr([ru],Ay.prototype,"tooltip",2);var Oy=e=>e,Fy=e=>1-Math.cos(e*Math.PI/2),zy=e=>Math.sin(e*Math.PI/2),By=e=>-(Math.cos(e*Math.PI)-1)/2,Vy=e=>e*e,Gy=e=>1-(1-e)**2,Hy=e=>e<.5?2*e*e:1-(-2*e+2)**2/2,jy=e=>2*Math.asin(e)/Math.PI,Wy=(e,t)=>e===t;function _y(e){return function(t,i){const n="__".concat(i);t[i]||Xy(t,i,n,e)}}function Ky(e){return _y(e)}function Uy(e){return _y(e)}function Yy(e){return(null!==e&&void 0!==e?e:{}).equals=kr,_y(e)}function $y(e){return function(t,i){const n="__".concat(i);t[i]||Xy(t,i,n,e)}}function Zy(e){return function(t,i){const n="__".concat(i);t[i]||Xy(t,i,n,e)}}function Xy(e,t,i,n){const{changeCb:o,convertor:s,checkDirtyOnAssignment:r=!1}=null!==n&&void 0!==n?n:{},a={changeCb:o,checkDirtyOnAssignment:r,convertor:s},l=function(e,t,i){const{checkDirtyOnAssignment:n}=i;if(n){let i=function(i){const n=t.call(this,i);return!0===(null===i||void 0===i?void 0:i._dirty)&&this.markDirty(e),n};return i}return t}(i,function(e,t){const{changeCb:i}=t;if(i){let t=function(t){const i=e.call(this,t);return i!==qy&&n.call(this,this),i};const n=i;return t}return e}(function(e,t){const{convertor:i}=t;if(i){let t=function(t){e.call(this,n(t))};const n=i;return t}return e}(function(e,t){const{equals:i=Wy}=t;function n(t){const n=this[e];return i(t,n)?qy:(this[e]=t,this.onChangeDetection(e),t)}return n}(i,a),a),a),a);Object.defineProperty(e,t,{set:l,get:function(){return this[i]},enumerable:!0,configurable:!0})}var qy=Symbol("no-change");const Qy=["start"],Jy=["color","textMetrics"],eb=["min","max","processor"],tb=["onlyPositive","processor"],ib=["type","idsMap","scopes","data"],nb=["type","idsMap","scopes","data"],ob=["props"],sb=["props"],rb=["props"],ab=["phase","start","finish","delay","duration"],lb=["phase","start","finish","delay","duration"],db=["type","data","listeners","seriesGrouping","showInMiniChart"],cb=["fills","strokes","sequentialColors"],ub=["stacked","grouped"],hb=["pool"],pb=["document","window","styleContainer"],gb=["start","stop"],mb=["stop","start"],fb=["clipRect","fill","stroke"],vb=["clipRect"],yb=["clipFocusBox","categoryKey"],bb=["pathsPerSeries","pathsZIndexSubOrderOffset","datumSelectionGarbageCollection","animationAlwaysUpdateSelections","segmentedDataNodes","animationResetFns","propertyKeys","propertyNames"],xb=["categoryKey","pickModes","canHaveAxes","animationResetFns"],Cb=["background","container","height","listeners","locale","minHeight","minWidth","overrideDevicePixelRatio","padding","width","theme","data","crosshair","axis","min","max","tooltip","context","styleNonce"];var Sb=Object.defineProperty,wb=Object.getOwnPropertyDescriptor,Mb=Object.getOwnPropertyNames,kb=Object.prototype.hasOwnProperty,Db=(e,t)=>{for(var i in t)Sb(e,i,{get:t[i],enumerable:!0})},Ib=(e,t,i,n)=>{if(t&&"object"===typeof t||"function"===typeof t)for(let o of Mb(t))kb.call(e,o)||o===i||Sb(e,o,{get:()=>t[o],enumerable:!(n=wb(t,o))||n.enumerable});return e},Ab=(e,t,i,n)=>{for(var o,s=n>1?void 0:n?wb(t,i):t,r=e.length-1;r>=0;r--)(o=e[r])&&(s=(n?o(t,i,s):o(s))||s);return n&&s&&Sb(t,i,s),s},Lb={ariaInitSeriesArea:"interactive chart",ariaAnnounceHoverDatum:"${datum}",ariaAnnounceChart:"chart, ${seriesCount}[number] series",ariaAnnounceStandaloneChart:"chart, ${caption}",ariaAnnounceHierarchyChart:"hierarchy chart, ${caption}",ariaAnnounceGaugeChart:"gauge chart, ${caption}",ariaAnnounceHierarchyDatum:"level ${level}[number], ${count}[number] children, ${description}",ariaAnnounceFlowProportionLink:"link ${index} of ${count}, from ${from} to ${to}, ${sizeName} ${size}",ariaAnnounceFlowProportionNode:"node ${index} of ${count}, ${description}",ariaDescriptionLegendItem:"Press Space or Enter to toggle visibility",ariaLabelAddHorizontalLine:"Add Horizontal Line",ariaLabelAnnotationsToolbar:"Annotations",ariaLabelAnnotationOptionsToolbar:"Annotation Options",ariaLabelAnnotationSettingsDialog:"Annotation Settings",ariaLabelColor:"Color",ariaLabelColorPicker:"Color picker",ariaLabelColorPickerAlpha:"Transparency",ariaLabelColorPickerHue:"Hue",ariaLabelColorPickerMultiColor:"Multi Color",ariaLabelColorPickerPalette:"Palette",ariaLabelFinancialCharts:"Financial Charts",ariaLabelGaugeTarget:"Target",ariaLabelGaugeValue:"Value",ariaLabelLegend:"Legend",ariaLabelLegendPagination:"Legend Pagination",ariaLabelLegendPagePrevious:"Previous Legend Page",ariaLabelLegendPageNext:"Next Legend Page",ariaLabelLegendItem:"${label}, Legend item ${index}[number] of ${count}[number]",ariaLabelLegendItemUnknown:"Unknown legend item",ariaLabelNavigator:"Navigator",ariaLabelNavigatorRange:"Range",ariaLabelNavigatorMinimum:"Minimum",ariaLabelNavigatorMaximum:"Maximum",ariaLabelRangesToolbar:"Ranges",ariaLabelSettingsTabBar:"Settings",ariaLabelZoomToolbar:"Zoom",ariaRoleDescription2DSlider:"2D slider",ariaValueColorPalette:"s ${s}[percent0to2dp], v ${v}[percent0to2dp]",ariaValueColorPaletteFirstV:"v ${v}[percent0to2dp], s ${s}[percent0to2dp]",ariaValuePanRange:"${min}[percent0to2dp] to ${max}[percent0to2dp]",iconAltTextLineStyleSolid:"Solid",iconAltTextLineStyleDashed:"Long-dashed",iconAltTextLineStyleDotted:"Short-dashed",iconAltTextPositionTop:"Top",iconAltTextPositionCenter:"Center",iconAltTextPositionBottom:"Bottom",iconAltTextAlignLeft:"Left",iconAltTextAlignCenter:"Center",iconAltTextAlignRight:"Right",iconAltTextClose:"Close",overlayLoadingData:"Loading data...",overlayNoData:"No data to display",overlayNoVisibleSeries:"No visible series",overlayUnsupportedBrowser:"Incompatible browser version. Please upgrade your browser.",seriesHistogramTooltipFrequency:"Frequency",seriesHistogramTooltipSum:"${yName} (sum)",seriesHistogramTooltipCount:"${yName} (count)",seriesHistogramTooltipMean:"${yName} (mean)",toolbarSeriesTypeDropdown:"Chart Type",toolbarSeriesTypeOHLC:"OHLC",toolbarSeriesTypeHLC:"HLC",toolbarSeriesTypeHighLow:"High Low",toolbarSeriesTypeCandles:"Candles",toolbarSeriesTypeHollowCandles:"Hollow Candles",toolbarSeriesTypeLine:"Line",toolbarSeriesTypeLineWithMarkers:"Line with Markers",toolbarSeriesTypeStepLine:"Step Line",toolbarAnnotationsTrendLine:"Trend Line",toolbarAnnotationsFibonacciRetracement:"Fib Retracement",toolbarAnnotationsFibonacciRetracementTrendBased:"Fib Trend Based",toolbarAnnotationsHorizontalLine:"Horizontal Line",toolbarAnnotationsVerticalLine:"Vertical Line",toolbarAnnotationsParallelChannel:"Parallel Channel",toolbarAnnotationsDisjointChannel:"Disjoint Channel",toolbarAnnotationsClearAll:"Clear All",toolbarAnnotationsFillColor:"Fill Color",toolbarAnnotationsLineColor:"Line Color",toolbarAnnotationsLineStyle:"Line Style",toolbarAnnotationsLineStrokeWidth:"Line Stroke Width",toolbarAnnotationsSettings:"Settings",toolbarAnnotationsTextColor:"Text Color",toolbarAnnotationsTextSize:"Text Size",toolbarAnnotationsLock:"Lock",toolbarAnnotationsUnlock:"Unlock",toolbarAnnotationsDelete:"Delete",toolbarAnnotationsDragHandle:"Drag Toolbar",toolbarAnnotationsLineAnnotations:"Trend Lines",toolbarAnnotationsFibonacciAnnotations:"Fibonacci",toolbarAnnotationsTextAnnotations:"Text Annotations",toolbarAnnotationsShapeAnnotations:"Arrows",toolbarAnnotationsMeasurerAnnotations:"Measurers",toolbarAnnotationsCallout:"Callout",toolbarAnnotationsComment:"Comment",toolbarAnnotationsNote:"Note",toolbarAnnotationsText:"Text",toolbarAnnotationsArrow:"Arrow",toolbarAnnotationsArrowUp:"Arrow Up",toolbarAnnotationsArrowDown:"Arrow Down",toolbarAnnotationsDateRange:"Date Range",toolbarAnnotationsPriceRange:"Price Range",toolbarAnnotationsDatePriceRange:"Date and Price",toolbarAnnotationsQuickDatePriceRange:"Measure",toolbarRange1Month:"1M",toolbarRange1MonthAria:"1 month",toolbarRange3Months:"3M",toolbarRange3MonthsAria:"3 months",toolbarRange6Months:"6M",toolbarRange6MonthsAria:"6 months",toolbarRangeYearToDate:"YTD",toolbarRangeYearToDateAria:"Year to date",toolbarRange1Year:"1Y",toolbarRange1YearAria:"1 year",toolbarRangeAll:"All",toolbarRangeAllAria:"All",toolbarZoomZoomOut:"Zoom out",toolbarZoomZoomIn:"Zoom in",toolbarZoomPanLeft:"Pan left",toolbarZoomPanRight:"Pan right",toolbarZoomPanStart:"Pan to the start",toolbarZoomPanEnd:"Pan to the end",toolbarZoomReset:"Reset the zoom",contextMenuDownload:"Download",contextMenuToggleSeriesVisibility:"Toggle Visibility",contextMenuToggleOtherSeries:"Toggle Other Series",contextMenuZoomToCursor:"Zoom to here",contextMenuPanToCursor:"Pan to here",contextMenuResetZoom:"Reset zoom",dialogHeaderChannel:"Channel",dialogHeaderLine:"Line",dialogHeaderFibonacciRange:"Fib Retracement",dialogHeaderDateRange:"Date Range",dialogHeaderPriceRange:"Price Range",dialogHeaderDatePriceRange:"Date and Price",dialogHeaderText:"Text",dialogInputAlign:"Align",dialogInputColorPicker:"Color",dialogInputColorPickerAltText:"Text Color",dialogInputFillColorPicker:"Fill",dialogInputFillColorPickerAltText:"Fill Color",dialogInputExtendChannelStart:"Extend channel start",dialogInputExtendChannelEnd:"Extend channel end",dialogInputExtendLineStart:"Extend line start",dialogInputExtendLineEnd:"Extend line end",dialogInputExtendAbove:"Extend above",dialogInputExtendBelow:"Extend below",dialogInputExtendLeft:"Extend left",dialogInputExtendRight:"Extend right",dialogInputReverse:"Reverse",dialogInputShowFill:"Show Fill",dialogInputFontSize:"Size",dialogInputFontSizeAltText:"Font Size",dialogInputLineStyle:"Dash",dialogInputPosition:"Position",dialogInputStrokeWidth:"Weight",dialogInputStrokeWidthAltText:"Line Weight",dialogInputFibonacciBands:"Bands",dialogInputFibonacciBandsAltText:"Fibonacci Bands",inputTextareaPlaceholder:"Add Text",measurerDateRangeBars:"${value}[number] bars",measurerPriceRangeValue:"${value}[number]",measurerPriceRangePercent:"${value}[percent]",measurerVolume:"Vol ${value}",tooltipPaginationStatus:"${index}[number] of ${count}[number]"};var Nb=Symbol("interpolate"),Tb=e=>null!=e[Nb],Rb=class e{constructor(e,t,i,n){this.x=e,this.y=t,this.width=i,this.height=n}static fromObject(t){let{x:i,y:n,width:o,height:s}=t;return new e(i,n,o,s)}static merge(t){let i=1/0,n=1/0,o=-1/0,s=-1/0;for(const e of t)e.x<i&&(i=e.x),e.y<n&&(n=e.y),Ob(e.x,e.width)>o&&(o=Ob(e.x,e.width)),Ob(e.y,e.height)>s&&(s=Ob(e.y,e.height));return new e(i,n,o-i,s-n)}static nearestBox(e,t,i){return Lm(e,t,i)}toDOMRect(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.y,left:this.x,right:Ob(this.x,this.width),bottom:Ob(this.y,this.height),toJSON:()=>({})}}clone(){const{x:t,y:i,width:n,height:o}=this;return new e(t,i,n,o)}equals(e){return dg(this,e)}containsPoint(e,t){return ag(this,e,t)}intersection(t){const i=Math.max(this.x,t.x),n=Math.max(this.y,t.y),o=Math.min(Ob(this.x,this.width),Ob(t.x,t.width)),s=Math.min(Ob(this.y,this.height),Ob(t.y,t.height));if(!(i>o||n>s))return new e(i,n,o-i,s-n)}collidesBBox(e){return this.x<Ob(e.x,e.width)&&Ob(this.x,this.width)>e.x&&this.y<Ob(e.y,e.height)&&Ob(this.y,this.height)>e.y}computeCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)&&Number.isFinite(this.width)&&Number.isFinite(this.height)}distanceSquared(e,t){if(this.containsPoint(e,t))return 0;const i=e-za(this.x,e,Ob(this.x,this.width)),n=t-za(this.y,t,Ob(this.y,this.height));return i*i+n*n}shrink(e,t){if("number"===typeof e)this.applyMargin(e,t);else for(const i of Object.keys(e)){const t=e[i];"number"===typeof t&&this.applyMargin(t,i)}return this.width<0&&(this.width=0),this.height<0&&(this.height=0),this}grow(e,t){if("number"===typeof e)this.applyMargin(-e,t);else for(const i of Object.keys(e)){const t=e[i];"number"===typeof t&&this.applyMargin(-t,i)}return this}applyMargin(e,t){switch(t){case"top":this.y+=e;case"bottom":this.height-=e;break;case"left":this.x+=e;case"right":this.width-=e;break;case"vertical":this.y+=e,this.height-=2*e;break;case"horizontal":this.x+=e,this.width-=2*e;break;case void 0:this.x+=e,this.y+=e,this.width-=2*e,this.height-=2*e}}translate(e,t){return this.x+=e,this.y+=t,this}[Nb](t,i){return new e(this.x*(1-i)+t.x*i,this.y*(1-i)+t.y*i,this.width*(1-i)+t.width*i,this.height*(1-i)+t.height*i)}};Rb.zero=Object.freeze(new Rb(0,0,0,0)),Rb.NaN=Object.freeze(new Rb(Number.NaN,Number.NaN,Number.NaN,Number.NaN));var Eb,Pb=Rb;function Ob(e,t){return e===-1/0&&t===1/0?1/0:e+t}function Fb(e){let{context:t,pixelRatio:i,width:n,height:o}=e;t.save();try{t.resetTransform(),t.clearRect(0,0,Math.ceil(n*i),Math.ceil(o*i))}finally{t.restore()}}function zb(e){if(Cr.check("canvas")){const t=e.save.bind(e),i=e.restore.bind(e);let n=0;Object.assign(e,{save(){t(),n++},restore(){if(0===n)throw new Error("AG Charts - Unable to restore() past depth 0");i(),n--},verifyDepthZero(){if(0!==n)throw new Error("AG Charts - Save/restore depth is non-zero: ".concat(n))}})}}function Bb(e,t,i){return[Math.floor(e*i),Math.floor(t*i)]}var Vb=class{constructor(e){const{width:t,height:i,pixelRatio:n,willReadFrequently:o=!1}=e;this.width=t,this.height=i,this.pixelRatio=n;const[s,r]=Bb(t,i,n);this.canvas=new OffscreenCanvas(s,r),this.context=this.canvas.getContext("2d",{willReadFrequently:o}),this.context.setTransform(n,0,0,n,0,0),zb(this.context)}drawImage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.drawImage(this.canvas,t,i)}transferToImageBitmap(){return this.canvas.width<1||this.canvas.height<1?(null!==Eb&&void 0!==Eb||(Eb=new OffscreenCanvas(1,1)),Eb).transferToImageBitmap():this.canvas.transferToImageBitmap()}resize(e,t,i){if(!(e>0&&t>0))return;const{canvas:n,context:o}=this;if(e!==this.width||t!==this.height||i!==this.pixelRatio){const[o,s]=Bb(e,t,i);n.width=o,n.height=s}o.setTransform(i,0,0,i,0,0),this.width=e,this.height=t,this.pixelRatio=i}clear(){Fb(this)}destroy(){this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0),this.canvas=null,this.context=null,Object.freeze(this)}},Gb=(e,t)=>Math.sign(e-t);function Hb(e,t){if("number"===typeof e&&"number"===typeof t)return Gb(e,t);const i="number"===typeof e?[e]:e,n="number"===typeof t?[t]:t,o=Math.min(i.length,n.length);for(let s=0;s<o;s+=1){const e=Gb(i[s],n[s]);if(0!==e)return e}return Gb(i.length,n.length)}var jb=(e=>(e[e.All=0]="All",e[e.None=1]="None",e))(jb||{}),Wb=class e{constructor(t){var i,n,o;this.serialNumber=e._nextSerialNumber++,this.childNodeCounts={groups:0,nonGroups:0,thisComplexity:0,complexity:0},this.id=xm(this),this.name=void 0,this.transitionOut=void 0,this.pointerEvents=0,this._datum=void 0,this._previousDatum=void 0,this.scene=void 0,this._debugDirtyProperties=void 0,this.parentNode=void 0,this.cachedBBox=void 0,this.isContainerNode=!1,this.visible=!0,this.zIndex=0,this.batchLevel=0,this.batchDirty=!1,this.name=null===t||void 0===t?void 0:t.name,this.tag=null!==(i=null===t||void 0===t?void 0:t.tag)&&void 0!==i?i:Number.NaN,this.zIndex=null!==(n=null===t||void 0===t?void 0:t.zIndex)&&void 0!==n?n:0,this.scene=null===t||void 0===t?void 0:t.scene,(null!==(o=null===t||void 0===t?void 0:t.debugDirty)&&void 0!==o?o:e._debugEnabled)&&(this._debugDirtyProperties=new Map([["__first__",[]]]))}static toSVG(e,t,i){var n,o;const s=null===e||void 0===e?void 0:e.toSVG();if(null==s||!s.elements.length&&(null===(n=s.defs)||void 0===n||!n.length))return;const r=Br("svg");if(r.setAttribute("width",String(t)),r.setAttribute("height",String(i)),r.setAttribute("viewBox","0 0 ".concat(t," ").concat(i)),r.setAttribute("overflow","visible"),null!==(o=s.defs)&&void 0!==o&&o.length){const e=Br("defs");e.append(...s.defs),r.append(e)}return r.append(...s.elements),r.outerHTML}static*extractBBoxes(e,t){for(const i of e)if(!t||i.visible&&!i.transitionOut){const e=i.getBBox();e&&(yield e)}}get datum(){return this._datum}set datum(e){this._datum!==e&&(this._previousDatum=this._datum,this._datum=e)}get previousDatum(){return this._previousDatum}get layerManager(){var e;return null===(e=this.scene)||void 0===e?void 0:e.layersManager}get imageLoader(){var e;return null===(e=this.scene)||void 0===e?void 0:e.imageLoader}closestDatum(){for(const{datum:e}of this.traverseUp(!0))if(null!=e)return e}preRender(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.childNodeCounts.groups=0,this.childNodeCounts.nonGroups=1,this.childNodeCounts.complexity=t,this.childNodeCounts.thisComplexity=t,this.batchLevel>0||this.batchDirty)throw new Error("AG Charts - illegal rendering state; batched update in progress");return this.childNodeCounts}isolatedRender(e){e.ctx.save();try{this.render(e)}catch(i){var t;const e=null!==(t=i.errorCount)&&void 0!==t?t:1;if(e>=5)throw i.errorCount=e,i;jr.warnOnce("Error during rendering",i,i.stack)}finally{e.ctx.restore()}}render(e){const{stats:t}=e;if(this.debugDirtyProperties(),e.debugNodeSearch){var i;const t=null!==(i=this.name)&&void 0!==i?i:this.id;var n;if(e.debugNodeSearch.some(e=>"string"===typeof e?e===t:e.test(t)))e.debugNodes[null!==(n=this.name)&&void 0!==n?n:this.id]=this}t&&(t.nodesRendered++,t.opsPerformed+=this.childNodeCounts.thisComplexity)}setScene(e){this.scene=e}*traverseUp(e){e&&(yield this);let t=this.parentNode;for(;t;)yield t,t=t.parentNode}isRoot(){return!this.parentNode}removeChild(e){var t,i;throw new Error("AG Charts - internal error, unknown child node ".concat(null!==(t=e.name)&&void 0!==t?t:e.id," in $").concat(null!==(i=this.name)&&void 0!==i?i:this.id))}remove(){var e;null===(e=this.parentNode)||void 0===e||e.removeChild(this)}destroy(){this.parentNode&&this.remove()}batchedUpdate(e){this.batchLevel++,e(),this.batchLevel--,0===this.batchLevel&&this.batchDirty&&(this.markDirty(),this.batchDirty=!1)}setProperties(e){return this.batchLevel++,Ru(this,e),this.batchLevel--,0===this.batchLevel&&this.batchDirty&&(this.markDirty(),this.batchDirty=!1),this}setPropertiesWithKeys(e,t){return this.batchLevel++,Ru(this,e,t),this.batchLevel--,0===this.batchLevel&&this.batchDirty&&(this.markDirty(),this.batchDirty=!1),this}containsPoint(e,t){return!1}pickNode(e,t){if(this.containsPoint(e,t))return this}pickNodes(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.containsPoint(e,t)&&i.push(this),i}getBBox(){var e;return null!==(e=this.cachedBBox)&&void 0!==e||(this.cachedBBox=Object.freeze(this.computeBBox())),this.cachedBBox}computeBBox(){}onChangeDetection(e){this.markDirty(e)}markDirtyChildrenOrder(){this.cachedBBox=void 0}markDirty(e){var t;this.batchLevel>0?this.batchDirty=!0:(null!=e&&this._debugDirtyProperties&&this.markDebugProperties(e),this.cachedBBox=void 0,null===(t=this.parentNode)||void 0===t||t.markDirty())}markDebugProperties(e){var t,i,n,o,s;const r=null!==(t=null===(i=this._debugDirtyProperties)||void 0===i?void 0:i.get(e))&&void 0!==t?t:[],a=null!==(n=null===(o=new Error("Stack trace for property change tracking").stack)||void 0===o?void 0:o.split("\n").filter(e=>"Error"!==e&&!e.includes(".markDebugProperties")&&!e.includes(".markDirty")&&!e.includes("Object.assign ")&&!e.includes("".concat(this.constructor.name,"."))))&&void 0!==n?n:"unknown";r.push(a[0].replace(" at ","").trim()),null===(s=this._debugDirtyProperties)||void 0===s||s.set(e,r)}debugDirtyProperties(){if(null!=this._debugDirtyProperties){if(!this._debugDirtyProperties.has("__first__"))for(const[e,t]of this._debugDirtyProperties.entries())t.length>1&&jr.logGroup("Property changed multiple times before render: ".concat(this.constructor.name,".").concat(e," (").concat(t.length,"x)"),()=>{for(const e of t)jr.log(e)});this._debugDirtyProperties.clear()}}static handleNodeZIndexChange(e){e.onZIndexChange()}onZIndexChange(){var e;null===(e=this.parentNode)||void 0===e||e.markDirtyChildrenOrder()}toSVG(){}};Wb.className="AbstractNode",Wb._nextSerialNumber=0,Wb._debugEnabled=!1,Ab([$y()],Wb.prototype,"visible",2),Ab([$y({equals:yu,changeCb:Wb.handleNodeZIndexChange})],Wb.prototype,"zIndex",2);var _b=Wb,Kb=class{ticks(e,t,i){}niceDomain(e){return arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.domain}get bandwidth(){}get step(){}get inset(){}},Ub=(e,t)=>{const i=Symbol(String(t));e[i]=void 0,Object.defineProperty(e,t,{get(){return this[i]},set(e){this[i]!==e&&(this[i]=e,this.invalid=!0)},enumerable:!0,configurable:!1})};function Yb(e,t,i){if(null==i||0===i[0]&&1===i[1])return;const n=za(0,Math.floor(i[0]*e.length),e.length),o=za(0,Math.ceil(i[1]*e.length),e.length);return[t?e.length-o:n,t?e.length-n:o]}function $b(e,t,i){const n=Yb(e,t,i);if(null==n)return{ticks:e,count:e.length,firstTickIndex:0};const[o,s]=n;return{ticks:e.slice(o,s),count:e.length,firstTickIndex:o}}function Zb(e){const t=hv(e.at(0)),i=hv(e.at(-1));return void 0!=t&&void 0!=i?[t,i]:[void 0,void 0]}var Xb=e=>{const t=yg.fromString(e),[i,n,o]=yg.RGBtoOKLCH(t.r,t.g,t.b);return{l:i,c:n,h:o,a:t.a}},qb=1e-6,Qb=e=>e.c<qb||e.l<qb||e.l>1-qb,Jb=class extends Kb{constructor(){super(...arguments),this.type="color",this.defaultTickCount=0,this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(Xb)}update(){const{domain:e,range:t}=this;e.length<2&&(jr.warnOnce("`colorDomain` should have at least 2 values."),0===e.length?e.push(0,1):1===e.length&&e.push(e[0]+1));for(let i=1;i<e.length;i++){if(e[i-1]>e[i]){jr.warnOnce("`colorDomain` values should be supplied in ascending order."),e.sort((e,t)=>e-t);break}}if(t.length<e.length)for(let i=t.length;i<e.length;i++)t.push(t.length>0?t[0]:"black");this.parsedRange=this.range.map(Xb)}normalizeDomains(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return{domain:t.map(e=>e.domain).flat(),animatable:!0}}toDomain(){}convert(e){this.refresh();const{domain:t,range:i,parsedRange:n}=this,o=t[0],s=t.at(-1),r=i[0],a=i.at(-1);if(e<=o)return r;if(e>=s)return a;let l,d;if(2===t.length){const t=(e-o)/(s-o),n=1/(i.length-1);l=i.length<=2?0:Math.min(Math.floor(t*(i.length-1)),i.length-2),d=(t-l*n)/n}else{for(l=0;l<t.length-2&&!(e<t[l+1]);l++);const i=t[l];d=(e-i)/(t[l+1]-i)}return((e,t,i)=>{let n;if(i=za(0,i,1),Qb(e))n=t.h;else if(Qb(t))n=e.h;else{const o=e.h;let s=t.h;const r=t.h-e.h;r>180?s-=360:r<-180&&(s+=360),n=o*(1-i)+s*i}const o=e.c*(1-i)+t.c*i,s=e.l*(1-i)+t.l*i,r=e.a*(1-i)+t.a*i;return yg.fromOKLCH(s,o,n,r)})(n[l],n[l+1],d).toRgbaString()}invert(){}getDomainMinMax(){return Zb(this.domain)}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&jr.warnOnce("Expected update to not invalidate scale"))}};Ab([Ub],Jb.prototype,"domain",2),Ab([Ub],Jb.prototype,"range",2);var ex=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;this.colorSpace=e,this.stops=t,this.bbox=i,this._cache=void 0}createGradient(e,t,i){var n;const o=null!==(n=this.bbox)&&void 0!==n?n:t;if(!o.isFinite())return;if(null!=this._cache&&this._cache.ctx===e&&this._cache.bbox.equals(o))return this._cache.gradient;const{stops:s,colorSpace:r}=this;if(0===s.length)return;if(1===s.length)return s[0].color;let a=this.createCanvasGradient(e,o,i);if(null==a)return;const l="oklch"===r;let d=s[0];a.addColorStop(d.stop,d.color);for(let u=1;u<s.length;u+=1){const e=s[u];if(l){const t=new Jb;t.domain=[d.stop,e.stop],t.range=[d.color,e.color];for(let i=d.stop+.05;i<e.stop;i+=.05){var c;a.addColorStop(i,null!==(c=t.convert(i))&&void 0!==c?c:"transparent")}}a.addColorStop(e.stop,e.color),d=e}return"createPattern"in a&&(a=a.createPattern()),this._cache={ctx:e,bbox:o,gradient:a},a}toSvg(e){var t;const i=null!==(t=this.bbox)&&void 0!==t?t:e,n=this.createSvgGradient(i);for(const{stop:o,color:s}of this.stops){const e=Br("stop");e.setAttribute("offset","".concat(o)),e.setAttribute("stop-color","".concat(s)),n.appendChild(e)}return n}},tx=class extends ex{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(e,t,arguments.length>3?arguments[3]:void 0),this.angle=i}createCanvasGradient(e,t,i){var n,o;const{angle:s}=this,r=Wp(s+-90),a=null!==(n=null===i||void 0===i?void 0:i.centerX)&&void 0!==n?n:t.x+.5*t.width,l=null!==(o=null===i||void 0===i?void 0:i.centerY)&&void 0!==o?o:t.y+.5*t.height;return e.createConicGradient(r,a,l)}createSvgGradient(e){return Br("linearGradient")}},ix=class extends ex{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(e,t,arguments.length>3?arguments[3]:void 0),this.angle=i}getGradientPoints(e){const{angle:t}=this,i=Wp(t+90),n=Math.cos(i),o=Math.sin(i),s=e.width,r=e.height,a=e.x+.5*s,l=e.y+.5*r,d=Math.hypot(r,s)/2,c=Math.atan2(r,s);let u;u=i<Math.PI/2?i:i<Math.PI?Math.PI-i:i<1.5*Math.PI?i-Math.PI:2*Math.PI-i;const h=d*Math.abs(Math.cos(u-c));return{x0:a+n*h,y0:l+o*h,x1:a-n*h,y1:l-o*h}}createCanvasGradient(e,t){const{x0:i,y0:n,x1:o,y1:s}=this.getGradientPoints(t);if(!(Number.isNaN(i)||Number.isNaN(n)||Number.isNaN(o)||Number.isNaN(s)))return e.createLinearGradient(i,n,o,s)}createSvgGradient(e){const{x0:t,y0:i,x1:n,y1:o}=this.getGradientPoints(e),s=Br("linearGradient");return s.setAttribute("x1",String(t)),s.setAttribute("y1",String(i)),s.setAttribute("x2",String(n)),s.setAttribute("y2",String(o)),s.setAttribute("gradientUnits","userSpaceOnUse"),s}},nx=class extends ex{constructor(e,t,i){super(e,t,i)}createCanvasGradient(e,t,i){var n,o,s,r;const a=null!==(n=null===i||void 0===i?void 0:i.centerX)&&void 0!==n?n:t.x+.5*t.width,l=null!==(o=null===i||void 0===i?void 0:i.centerY)&&void 0!==o?o:t.y+.5*t.height,d=null!==(s=null===i||void 0===i?void 0:i.innerRadius)&&void 0!==s?s:0,c=null!==(r=null===i||void 0===i?void 0:i.outerRadius)&&void 0!==r?r:Math.hypot(.5*t.width,.5*t.height)/Math.SQRT2;return e.createRadialGradient(a,l,d,a,l,c)}createSvgGradient(e){const t=e.x+.5*e.width,i=e.y+.5*e.height,n=Br("radialGradient");return n.setAttribute("cx",String(t)),n.setAttribute("cy",String(i)),n.setAttribute("r",String(Math.hypot(.5*e.width,.5*e.height)/Math.SQRT2)),n.setAttribute("gradientUnits","userSpaceOnUse"),n}},ox=class extends kh{constructor(){super(...arguments),this.color="black"}};function sx(e){return e.flatMap((t,i)=>{var n;const{stop:o}=t,s=null===(n=e.at(i+1))||void 0===n?void 0:n.color;return null==s?[t]:[t,{stop:o,color:s}]})}function rx(e,t,i){var n;let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"continuous";const s=e.map(e=>"string"===typeof e?{color:e}:e);if(0===s.length)return function(e,t){const i="discrete"===t?1:0,n=e.map((e,t,n)=>{let{length:o}=n;return{stop:(t+i)/(o-1+i),color:e}});return"discrete"===t?sx(n):n}(t,o);if(!function(e){let t;for(const i of e)if(null!=(null===i||void 0===i?void 0:i.stop)){if(null!=t&&i.stop<t)return!1;t=i.stop}return!0}(s))return jr.warnOnce("[fills] must have the stops defined in ascending order"),[];const r=Math.min(...i),a=Math.max(...i),l="discrete"===o,d=new Float64Array(s.length);let c=0,u=-1;for(let y=0;y<s.length;y+=1){const e=s[y];if(y>=u){u=s.length-1;for(let e=y+1;e<s.length;e+=1){var h;if(null!=(null===(h=s[e])||void 0===h?void 0:h.stop)){u=e;break}}}let t=null===e||void 0===e?void 0:e.stop;if(null==t){var p,g;const e=null===(p=s[c])||void 0===p?void 0:p.stop,i=null===(g=s[u])||void 0===g?void 0:g.stop,n=null!==e&&void 0!==e?e:r,o=l&&null==e?1:0;t=n+((null!==i&&void 0!==i?i:a)-n)*(y-c+o)/(u-c+o)}else c=y;d[y]=Math.max(0,Math.min(1,(t-r)/(a-r)))}let m,f=null===(n=s.find(e=>null!=e.color))||void 0===n?void 0:n.color;const v=s.map((e,i)=>{let n=null===e||void 0===e?void 0:e.color;const o=d[i];return null!=n?f=n:null==f?(null==m&&(m=new Jb,m.domain=[0,1],m.range=t),n=m.convert(o)):n=f,{stop:o,color:n}});return"discrete"===o?sx(v):v}Ab([ru],ox.prototype,"stop",2),Ab([ru],ox.prototype,"color",2);var ax=class{constructor(e,t){var i,n,o,s,r;this.imageLoader=e,this._cache=void 0,this.url=t.url,this.backgroundFill=null!==(i=t.backgroundFill)&&void 0!==i?i:"black",this.backgroundFillOpacity=null!==(n=t.backgroundFillOpacity)&&void 0!==n?n:1,this.repeat=null!==(o=t.repeat)&&void 0!==o?o:"no-repeat",this.width=t.width,this.height=t.height,this.fit=null!==(s=t.fit)&&void 0!==s?s:"stretch",this.rotation=null!==(r=t.rotation)&&void 0!==r?r:0}createCanvasImage(e,t,i,n){if(!t)return null;const[o,s]=this.getSize(t.width,t.height,i,n);return o<1||s<1?(jr.warnOnce("Image fill is too small to render, ignoring."),null):e.createPattern(t,this.repeat)}getSize(e,t,i,n){const{fit:o}=this;let s=e,r=t,a=1;const l=i/n,d=e/t;return"stretch"===o||0===e||0===t?(s=i,r=n):"contain"===o?a=d>l?i/e:n/t:"cover"===o&&(a=d>l?n/t:i/e),[Math.max(1,s*a),Math.max(1,r*a)]}setImageTransform(e,t){var i;if("string"===typeof e)return;const{url:n,rotation:o,width:s,height:r}=this,a=null===(i=this.imageLoader)||void 0===i?void 0:i.loadImage(n);if(!a)return;const l=Wp(o),d=Math.cos(l),c=Math.sin(l),[u,h]=this.getSize(a.width,a.height,null!==s&&void 0!==s?s:t.width,null!==r&&void 0!==r?r:t.height),p=u/a.width,g=h/a.height,m=t.x+t.width/2,f=t.y+t.height/2,v=(d*u-c*h)/2,y=(c*u+d*h)/2;null===e||void 0===e||e.setTransform(new DOMMatrix([d*p,c*g,-c*p,d*g,m-v,f-y]))}createPattern(e,t,i,n){var o,s,r;const a=null!==(o=this.width)&&void 0!==o?o:t,l=null!==(s=this.height)&&void 0!==s?s:i,d=this._cache;if(null!=d&&d.ctx===e&&d.width===a&&d.height===l)return d.pattern;const c=null===(r=this.imageLoader)||void 0===r?void 0:r.loadImage(this.url,n),u=this.createCanvasImage(e,c,a,l);return null!=u?(this._cache={ctx:e,pattern:u,width:a,height:l},u):void 0}toSvg(e,t){const{url:i,rotation:n,backgroundFill:o,backgroundFillOpacity:s}=this,{x:r,y:a,width:l,height:d}=e,c=Br("pattern");c.setAttribute("viewBox","0 0 ".concat(l," ").concat(d)),c.setAttribute("x",String(r)),c.setAttribute("y",String(a)),c.setAttribute("width",String(l)),c.setAttribute("height",String(d)),c.setAttribute("patternUnits","userSpaceOnUse");const u=Br("rect");u.setAttribute("x","0"),u.setAttribute("y","0"),u.setAttribute("width",String(l)),u.setAttribute("height",String(d)),u.setAttribute("fill",o),u.setAttribute("fill-opacity",String(s)),c.appendChild(u);const h=Br("image");return h.setAttribute("href",i),h.setAttribute("x","0"),h.setAttribute("y","0"),h.setAttribute("width",String(l)),h.setAttribute("height",String(d)),h.setAttribute("preserveAspectRatio","none"),h.setAttribute("transform","scale(".concat(1/t,") rotate(").concat(n,", ").concat(l/2,", ").concat(d/2,")")),c.appendChild(h),c}},lx=/^[\t\n\f\r ]*([achlmqstvz])[\t\n\f\r ]*/i,dx=/^[+-]?((\d*\.\d+)|(\d+\.)|(\d+))(e[+-]?\d+)?/i,cx=/[\t\n\f\r ]*,?[\t\n\f\r ]*/,ux=/^[01]/,hx={z:[],h:[dx],v:[dx],m:[dx,dx],l:[dx,dx],t:[dx,dx],s:[dx,dx,dx,dx],q:[dx,dx,dx,dx],c:[dx,dx,dx,dx,dx,dx],a:[dx,dx,dx,ux,ux,dx,dx]};function px(e,t,i){const n=hx[e.toLocaleLowerCase()],o={command:e,params:[]};for(const s of n){const n=t.slice(i),r=s.exec(n);if(null==r)return 1===o.params.length?[i,o]:void jr.warnOnce("Invalid SVG path, error at index ".concat(i,": No path segment parameters for command [").concat(e,"]"));{o.params.push(Number.parseFloat(r[0])),i+=r[0].length;const e=cx.exec(n.slice(r[0].length));null!=e&&(i+=e[0].length)}}return[i,o]}function gx(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e-6;if(Math.abs(e)<o)return function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;if(Math.abs(e)<n)return function(e,t){const i=-t/e;return 0!==e&&i>=0&&i<=1?[i]:[]}(t,i);const o=t*t-4*e*i,s=[];if(Math.abs(o)<n){const i=-t/(2*e);i>=0&&i<=1&&s.push(i)}else if(o>0){const i=Math.sqrt(o),n=(-t-i)/(2*e),r=(-t+i)/(2*e);n>=0&&n<=1&&s.push(n),r>=0&&r<=1&&s.push(r)}return s}(t,i,n,o);const s=t/e,r=i/e,a=(3*r-s*s)/9,l=(9*s*r-27*(n/e)-2*s*s*s)/54,d=a*a*a+l*l,c=1/3,u=[];if(d>=0){const e=Math.sqrt(d),t=Math.sign(l+e)*Math.pow(Math.abs(l+e),c),i=Math.sign(l-e)*Math.pow(Math.abs(l-e),c),n=Math.abs(Math.sqrt(3)*(t-i)/2),r=-c*s+(t+i);if(r>=0&&r<=1&&u.push(r),Math.abs(n)<o){const e=-c*s-(t+i)/2;e>=0&&e<=1&&u.push(e)}}else{const e=Math.acos(l/Math.sqrt(-a*a*a)),t=c*s,i=2*Math.sqrt(-a),n=i*Math.cos(c*e)-t,o=i*Math.cos(c*(e+2*Math.PI))-t,r=i*Math.cos(c*(e+4*Math.PI))-t;n>=0&&n<=1&&u.push(n),o>=0&&o<=1&&u.push(o),r>=0&&r<=1&&u.push(r)}return u}function mx(e,t,i,n,o,s,r,a){const l=(i-e)*(a-s)-(n-t)*(r-o);if(0===l)return 0;const d=((r-o)*(t-s)-(e-o)*(a-s))/l,c=((i-e)*(t-s)-(n-t)*(e-o))/l;return d>=0&&d<=1&&c>=0&&c<=1?1:0}function fx(e,t,i,n,o,s,r,a,l,d,c,u){let h=0;const p=d-u,g=c-l,m=l*(u-d)-d*(c-l),f=vx(e,i,o,r),v=vx(t,n,s,a),y=gx(p*f[0]+g*v[0],p*f[1]+g*v[1],p*f[2]+g*v[2],p*f[3]+g*v[3]+m);for(const b of y){const e=b*b,t=b*e,i=f[0]*t+f[1]*e+f[2]*b+f[3],n=v[0]*t+v[1]*e+v[2]*b+v[3];let o;o=l===c?(n-d)/(u-d):(i-l)/(c-l),o>=0&&o<=1&&h++}return h}function vx(e,t,i,n){return[3*t-e-3*i+n,3*e-6*t+3*i,-3*e+3*t,e]}var yx=class{constructor(){this.path2d=new Path2D,this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this.commandsLength=0,this.paramsLength=0,this.cx=Number.NaN,this.cy=Number.NaN,this.sx=Number.NaN,this.sy=Number.NaN,this.openedPath=!1,this.closedPath=!1}isEmpty(){return 0===this.commandsLength}isDirty(){return this.closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commandsLength||this.previousParams.length!==this.paramsLength||this.previousCommands.toString()!==this.commands.slice(0,this.commandsLength).toString()||this.previousParams.toString()!==this.params.slice(0,this.paramsLength).toString()}getPath2D(){return this.path2d}moveTo(e,t){this.openedPath=!0,this.sx=e,this.sy=t,this.cx=e,this.cy=t,this.path2d.moveTo(e,t),this.commands[this.commandsLength++]=0,this.params[this.paramsLength++]=e,this.params[this.paramsLength++]=t}lineTo(e,t){this.openedPath?(this.cx=e,this.cy=t,this.path2d.lineTo(e,t),this.commands[this.commandsLength++]=1,this.params[this.paramsLength++]=e,this.params[this.paramsLength++]=t):this.moveTo(e,t)}cubicCurveTo(e,t,i,n,o,s){this.openedPath||this.moveTo(e,t),this.path2d.bezierCurveTo(e,t,i,n,o,s),this.commands[this.commandsLength++]=2,this.params[this.paramsLength++]=e,this.params[this.paramsLength++]=t,this.params[this.paramsLength++]=i,this.params[this.paramsLength++]=n,this.params[this.paramsLength++]=o,this.params[this.paramsLength++]=s}closePath(){this.openedPath&&(this.cx=this.sx,this.cy=this.sy,this.sx=Number.NaN,this.sy=Number.NaN,this.path2d.closePath(),this.commands[this.commandsLength++]=3,this.openedPath=!1,this.closedPath=!0)}rect(e,t,i,n){this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+n),this.lineTo(e,t+n),this.closePath()}roundRect(e,t,i,n,o){o=Math.min(o,i/2,n/2),this.moveTo(e,t+o),this.arc(e+o,t+o,o,Math.PI,1.5*Math.PI),this.lineTo(e+o,t),this.lineTo(e+i-o,t),this.arc(e+i-o,t+o,o,1.5*Math.PI,2*Math.PI),this.lineTo(e+i,t+o),this.lineTo(e+i,t+n-o),this.arc(e+i-o,t+n-o,o,0,Math.PI/2),this.lineTo(e+i-o,t+n),this.lineTo(e+o,t+n),this.arc(e+ +o,t+n-o,o,Math.PI/2,Math.PI),this.lineTo(e,t+n-o),this.closePath()}ellipse(e,t,i,n,o,s,r){let a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=i,d=n/i,c=Math.cos(o),u=Math.sin(o),h=-d*u,p=d*c,g=l*Math.cos(s),m=l*Math.sin(s),f=e+c*g+h*m,v=t+u*g+p*m,y=(f-this.cx)**2+(v-this.cy)**2;this.openedPath?y>1e-6&&this.lineTo(f,v):this.moveTo(f,v);let b=a?-Pp(s-r):Pp(r-s);Math.abs(Math.abs(r-s)-2*Math.PI)<1e-6&&b<2*Math.PI&&(b+=2*Math.PI*(a?-1:1));const x=Math.max(Math.ceil(Math.abs(b)/(Math.PI/2)),1),C=b/x,S=4/3*Math.tan(C/4);for(let w=0;w<x;w+=1){const i=s+C*(w+0),n=s+C*(w+1),o=l*Math.sin(i),r=l*Math.cos(i),a=l*Math.sin(n),d=l*Math.cos(n),g=r-S*o,m=o+S*r,f=d+S*a,v=a-S*d,y=d,b=a;this.cubicCurveTo(e+c*g+h*m,t+u*g+p*m,e+c*f+h*v,t+u*f+p*v,e+c*y+h*b,t+u*y+p*b)}}arc(e,t,i,n,o,s){this.ellipse(e,t,i,i,0,n,o,s)}appendSvg(e){const t=function(e){if(!e)return;const t=[];let i,n=0;for(;n<e.length;){const o=lx.exec(e.slice(n));let s;if(null==o){if(!i)return void jr.warnOnce("Invalid SVG path, error at index ".concat(n,": Missing command."));s=i}else s=o[1],n+=o[0].length;const r=px(s,e,n);if(!r)return;n=r[0],i=s,t.push(r[1])}return t}(e);if(null==t)return!1;let i,n,o=0,s=0,r=0,a=0;for(const{command:l,params:d}of t){null!==i&&void 0!==i||(i=d[0]),null!==n&&void 0!==n||(n=d[1]);const e=l===l.toLowerCase(),t=e?i:0,c=e?n:0;switch(l.toLowerCase()){case"m":this.moveTo(t+d[0],c+d[1]),i=t+d[0],n=c+d[1],o=i,s=n;break;case"c":this.cubicCurveTo(t+d[0],c+d[1],t+d[2],c+d[3],t+d[4],c+d[5]),r=t+d[2],a=c+d[3],i=t+d[4],n=c+d[5];break;case"s":this.cubicCurveTo(i+i-r,n+n-a,t+d[0],c+d[1],t+d[2],c+d[3]),r=t+d[0],a=c+d[1],i=t+d[2],n=c+d[3];break;case"q":this.cubicCurveTo((t+2*d[0])/3,(c+2*d[1])/3,(2*d[0]+d[2])/3,(2*d[1]+d[3])/3,d[2],d[3]),r=d[0],a=d[1],i=d[2],n=d[3];break;case"t":this.cubicCurveTo((i+2*(i+i-r))/3,(n+2*(n+n-a))/3,(2*(i+i-r)+d[0])/3,(2*(n+n-a)+d[1])/3,d[0],d[1]),r=i+i-r,a=n+n-a,i=d[0],n=d[1];break;case"a":this.svgEllipse(i,n,d[0],d[1],d[2]*Math.PI/180,d[3],d[4],t+d[5],c+d[6]),i=t+d[5],n=c+d[6];break;case"h":this.lineTo(t+d[0],n),i=t+d[0];break;case"l":this.lineTo(t+d[0],c+d[1]),i=t+d[0],n=c+d[1];break;case"v":this.lineTo(i,c+d[0]),n=c+d[0];break;case"z":this.closePath(),i=o,n=s;break;default:throw new Error("Could not translate command '".concat(l,"' with '").concat(d.join(" "),"'"))}}return!0}svgEllipse(e,t,i,n,o,s,r,a,l){i=Math.abs(i),n=Math.abs(n);const d=(e-a)/2,c=(t-l)/2,u=Math.sin(o),h=Math.cos(o),p=h*d+u*c,g=-u*d+h*c,m=p/i,f=g/n;let v=m*m+f*f,y=(e+a)/2,b=(t+l)/2,x=0,C=0;v>=1?(v=Math.sqrt(v),i*=v,n*=v):(v=Math.sqrt(1/v-1),s===r&&(v=-v),x=v*i*f,C=-v*n*m,y+=h*x-u*C,b+=u*x+h*C);const S=Math.atan2((g-C)/n,(p-x)/i),w=S+(Math.atan2((-g-C)/n,(-p-x)/i)-S),M=!!(1-r);this.ellipse(y,b,i,n,o,S,w,M)}clear(e){e?(this.previousCommands=this.commands.slice(0,this.commandsLength),this.previousParams=this.params.slice(0,this.paramsLength),this.previousClosedPath=this.closedPath,this.commands=[],this.params=[],this.commandsLength=0,this.paramsLength=0):(this.commandsLength=0,this.paramsLength=0),this.path2d=new Path2D,this.openedPath=!1,this.closedPath=!1}isPointInPath(e,t){const i=this.commands,n=this.params,o=this.commandsLength,s=-1e4,r=-1e4;let a=Number.NaN,l=Number.NaN,d=0,c=0,u=0;for(let h=0,p=0;h<o;h++)switch(i[h]){case 0:u+=mx(a,l,d,c,s,r,e,t),d=n[p++],a=d,c=n[p++],l=c;break;case 1:u+=mx(d,c,n[p++],n[p++],s,r,e,t),d=n[p-2],c=n[p-1];break;case 2:u+=fx(d,c,n[p++],n[p++],n[p++],n[p++],n[p++],n[p++],s,r,e,t),d=n[p-2],c=n[p-1];break;case 3:u+=mx(a,l,d,c,s,r,e,t)}return u%2===1}distanceSquared(e,t){let i=1/0;const n=this.commands,o=this.params,s=this.commandsLength;let r=Number.NaN,a=Number.NaN,l=0,d=0;for(let c=0,u=0;c<s;c++)switch(n[c]){case 0:l=r=o[u++],d=a=o[u++];break;case 1:{const n=l,s=d;l=o[u++],d=o[u++],i=Ng(e,t,n,s,l,d,i);break}case 2:{const n=l,s=d,r=o[u++],a=o[u++],c=o[u++],h=o[u++];l=o[u++],d=o[u++],i=ry(n,s,r,a,c,h,l,d,e,t)**2;break}case 3:i=Ng(e,t,l,d,r,a,i)}return i}toSVG(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(e,t)=>({x:e,y:t});const t=[],{commands:i,params:n}=this,o=(i,o)=>{t.push(i);for(let r=0;r<o;r+=2){const{x:i,y:o}=e(n[s++],n[s++]);t.push(i,o)}};let s=0;for(let r=0;r<this.commandsLength;r++){switch(i[r]){case 0:o("M",2);break;case 1:o("L",2);break;case 2:o("C",6);break;case 3:o("Z",0)}}return t.join(" ")}computeBBox(){const{commands:e,params:t}=this;let[i,n,o,s]=[1/0,1/0,-1/0,-1/0],[r,a]=[Number.NaN,Number.NaN],[l,d]=[Number.NaN,Number.NaN];const c=(e,t)=>{i=Math.min(t,i),n=Math.min(e,n),o=Math.max(e,o),s=Math.max(t,s),r=e,a=t};let u=0;for(let h=0;h<this.commandsLength;h++){switch(e[h]){case 0:c(t[u++],t[u++]),l=r,d=a;break;case 1:c(t[u++],t[u++]);break;case 2:{const e=r,i=a,n=t[u++],o=t[u++],s=t[u++],l=t[u++],d=t[u++],h=t[u++],p=oy(e,i,n,o,s,l,d,h);for(const t of p){c(ey(e,n,s,d,t),ey(i,o,l,h,t))}c(d,h);break}case 3:c(l,d),l=Number.NaN,d=Number.NaN}}return new Pb(n,i,o-n,s-i)}};function bx(e,t,i){const n=Math.round(t*e)/e;return null==i?n:0===i?0:i<1?Math.ceil(i*e)/e:Math.round((i+t)*e)/e-n}function xx(e,t){return Math.floor(t*e)/e}function Cx(e,t,i){const{width:n,height:o,padding:s,strokeWidth:r}=t,a=n/2,l=o/2,d=Math.max(1,n-s-r/2),c=Math.max(1,o-s-r/2);let u=!1;for(const[h,p]of i){const t=a+(h-.5)*d,i=l+(p-.5)*c;u?e.lineTo(t,i):e.moveTo(t,i),u=!0}e.closePath()}var Sx={circles(e,t){let{width:i,strokeWidth:n,padding:o}=t;const s=i/2,r=Math.max(1,s-o-n/2);e.arc(s,s,r,0,2*Math.PI)},squares(e,t){let{width:i,height:n,pixelRatio:o,padding:s,strokeWidth:r}=t;const a=s+r/2;e.moveTo(bx(o,a),bx(o,a)),e.lineTo(bx(o,i-a),bx(o,a)),e.lineTo(bx(o,i-a),bx(o,n-a)),e.lineTo(bx(o,a),bx(o,n-a)),e.closePath()},triangles(e,t){Cx(e,t,[[.5,0],[1,1],[0,1]])},diamonds(e,t){Cx(e,t,[[.5,0],[1,.5],[.5,1],[0,.5]])},stars(e,t){let{width:i,height:n,padding:o}=t;const s=Math.max(1,(i-o)/2),r=s/2,a=Math.PI/2;for(let l=0;l<10;l++){const t=l%2===0?s:r,o=l*Math.PI/5-a,d=i/2+Math.cos(o)*t,c=n/2+Math.sin(o)*t;e.lineTo(d,c)}e.closePath()},hearts(e,t){let{width:i,height:n,padding:o}=t;const s=Math.max(1,i/4-o/2),r=i/2,a=n/2+s/2;e.arc(r-s,a-s,s,Bp(130),Bp(330)),e.arc(r+s,a-s,s,Bp(220),Bp(50)),e.lineTo(r,a+s),e.closePath()},crosses(e,t){Cx(e,t,[[.25,0],[.5,.25],[.75,0],[1,.25],[.75,.5],[1,.75],[.75,1],[.5,.75],[.25,1],[0,.75],[.25,.5],[0,.25]])},"vertical-lines"(e,t){let{width:i,height:n,pixelRatio:o,strokeWidth:s}=t;const r=bx(o,i/2)-s%2/2;e.moveTo(r,0),e.lineTo(r,n)},"horizontal-lines"(e,t){let{width:i,height:n,pixelRatio:o,strokeWidth:s}=t;const r=bx(o,n/2)-s%2/2;e.moveTo(0,r),e.lineTo(i,r)},"forward-slanted-lines"(e,t){let{width:i,height:n,strokeWidth:o}=t;const s=Math.atan2(n,i),r=o*Math.cos(s),a=o*Math.sin(s);e.moveTo(-r,a),e.lineTo(r,-a),e.moveTo(-r,n+a),e.lineTo(i+r,-a),e.moveTo(i-r,n+a),e.lineTo(i+r,n-a)},"backward-slanted-lines"(e,t){let{width:i,height:n,strokeWidth:o}=t;const s=Math.atan2(n,i),r=o*Math.cos(s),a=o*Math.sin(s);e.moveTo(i-r,-a),e.lineTo(i+r,a),e.moveTo(-r,-a),e.lineTo(i+r,n+a),e.moveTo(-r,n-a),e.lineTo(r,n+a)}},wx=class{constructor(e){var t,i,n,o,s,r,a,l,d,c,u,h,p;this._cache=void 0,this.width=Math.max(null!==(t=null===e||void 0===e?void 0:e.width)&&void 0!==t?t:10,1),this.height=Math.max(null!==(i=null===e||void 0===e?void 0:e.height)&&void 0!==i?i:10,1),this.fill=null!==(n=e.fill)&&void 0!==n?n:"none",this.fillOpacity=null!==(o=e.fillOpacity)&&void 0!==o?o:1,this.backgroundFill=null!==(s=e.backgroundFill)&&void 0!==s?s:"none",this.backgroundFillOpacity=null!==(r=e.backgroundFillOpacity)&&void 0!==r?r:1,this.stroke=null!==(a=e.stroke)&&void 0!==a?a:"black",this.strokeOpacity=null!==(l=e.strokeOpacity)&&void 0!==l?l:1,this.strokeWidth=null!==(d=e.strokeWidth)&&void 0!==d?d:1,this.padding=null!==(c=e.padding)&&void 0!==c?c:1,this.pattern=null!==(u=e.pattern)&&void 0!==u?u:"forward-slanted-lines",this.rotation=null!==(h=e.rotation)&&void 0!==h?h:0,this.scale=null!==(p=e.scale)&&void 0!==p?p:1,this.path=e.path}getPath(e){const{pattern:t,width:i,height:n,padding:o,strokeWidth:s,path:r}=this,a=new yx;let l=null!=Sx[t];return r&&l&&(l=!a.appendSvg(r)),l&&Sx[t](a,{width:i,height:n,pixelRatio:e,strokeWidth:s,padding:o}),a}renderStroke(e,t){const{stroke:i,strokeWidth:n,strokeOpacity:o}=this;n&&(t.strokeStyle=i,t.lineWidth=n,t.globalAlpha=o,t.stroke(e))}renderFill(e,t){const{fill:i,fillOpacity:n}=this;"none"!==i&&(t.fillStyle=i,t.globalAlpha=n,t.fill(e))}createCanvasPattern(e,t){const{width:i,height:n,scale:o,backgroundFill:s,backgroundFillOpacity:r}=this;if(i*o<1||n*o<1)return jr.warnOnce("Pattern fill is too small to render, ignoring."),null;const a=new Vb({width:i,height:n,pixelRatio:t*o}),l=a.context;"none"!==s&&(l.fillStyle=s,l.globalAlpha=r,l.fillRect(0,0,i,n));const d=this.getPath(t).getPath2D();this.renderFill(d,l),this.renderStroke(d,l);const c=e.createPattern(a.canvas,"repeat");return this.setPatternTransform(c,t),a.destroy(),c}setPatternTransform(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(null==e)return;const o=Wp(this.rotation),s=1/t,r=Math.cos(o)*s,a=Math.sin(o)*s;e.setTransform(new DOMMatrix([r,a,-a,r,i,n]))}createPattern(e,t){if(null!=this._cache&&this._cache.ctx===e&&this._cache.pixelRatio===t)return this._cache.pattern;const i=this.createCanvasPattern(e,t);return null!=i?(this._cache={ctx:e,pattern:i,pixelRatio:t},i):void 0}toSvg(){const{width:e,height:t,fill:i,fillOpacity:n,backgroundFill:o,backgroundFillOpacity:s,stroke:r,strokeWidth:a,strokeOpacity:l,rotation:d,scale:c}=this,u=Br("pattern");u.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),u.setAttribute("width",String(e)),u.setAttribute("height",String(t)),u.setAttribute("patternUnits","userSpaceOnUse");const h=Br("rect");h.setAttribute("x","0"),h.setAttribute("y","0"),h.setAttribute("width",String(e)),h.setAttribute("height",String(t)),h.setAttribute("fill",o),h.setAttribute("fill-opacity",String(s)),u.appendChild(h);const p=Br("path");return p.setAttribute("fill",i),p.setAttribute("fill-opacity",String(n)),p.setAttribute("stroke-opacity",String(l)),p.setAttribute("stroke",r),p.setAttribute("stroke-width",String(a)),p.setAttribute("transform","rotate(".concat(d,") scale(").concat(c,")")),p.setAttribute("d",this.getPath(1).toSVG()),u.appendChild(p),u}};function Mx(e,t){const{fontStyle:i,fontWeight:n,fontSize:o,fontFamily:s}=t;i&&e.setAttribute("font-style",i),n&&e.setAttribute("font-weight",String(n)),null!=o&&e.setAttribute("font-size",String(o)),s&&e.setAttribute("font-family",s)}var kx=class extends _b{constructor(){super(...arguments),this.drawingMode="overlay",this.fillOpacity=1,this.strokeOpacity=1,this.fill="black",this.strokeWidth=0,this.lineDashOffset=0,this.opacity=1}getGradient(e){if($v(e))return this.createGradient(e)}createGradient(e){const{colorSpace:t="rgb",gradient:i="linear",colorStops:n,rotation:o=0,reverse:s=!1}=e;if(null==n)return;let r=rx(n,["black"],[0,1]);switch(s&&(r=r.map(e=>({color:e.color,stop:1-e.stop})).reverse()),i){case"linear":return new ix(t,r,o);case"radial":return new nx(t,r);case"conic":return new tx(t,r,o)}}getPattern(e){if(qv(e))return this.createPattern(e)}createPattern(e){return new wx(e)}getImage(e){if(Qv(e))return this.createImage(e)}createImage(e){return new ax(this.imageLoader,e)}onFillChange(){var e;if("object"===typeof this.fill&&yu(null!==(e=this._cachedFill)&&void 0!==e?e:{},this.fill))return;this.fillGradient=this.getGradient(this.fill),this.fillPattern=this.getPattern(this.fill),this.fillImage=this.getImage(this.fill),this._cachedFill=this.fill}onStrokeChange(){this.strokeGradient=this.getGradient(this.stroke)}align(e,t){var i,n;return bx(null!==(i=null===(n=this.layerManager)||void 0===n||null===(n=n.canvas)||void 0===n?void 0:n.pixelRatio)&&void 0!==i?i:1,e,t)}markDirty(e){super.markDirty(e),this.cachedDefaultGradientFillBBox=void 0}fillStroke(e,t){"cutout"===this.__drawingMode&&(e.globalCompositeOperation="destination-out",this.executeFill(e,t),this.executeStroke(e,t),e.globalCompositeOperation="source-over"),this.renderFill(e,t),this.renderStroke(e,t)}renderFill(e,t){const{__fill:i,__fillOpacity:n=1,fillImage:o}=this;if(null!=i&&"none"!==i&&n>0){var s;const i=e.globalAlpha;o&&(e.globalAlpha=o.backgroundFillOpacity,e.fillStyle=o.backgroundFill,this.executeFill(e,t),e.globalAlpha=i),this.applyFillAndAlpha(e),this.applyShadow(e),this.executeFill(e,t),e.globalAlpha=i,null!==(s=this.fillShadow)&&void 0!==s&&s.enabled&&(e.shadowColor="rgba(0, 0, 0, 0)")}}executeFill(e,t){t?e.fill(t):e.fill()}applyFillAndAlpha(e){const{__fill:t,fillGradient:i,fillPattern:n,fillImage:o,__fillOpacity:s=1,__opacity:r=1}=this,a=r*s;if(1!==a&&(e.globalAlpha*=a),i){var l,d;const{fillBBox:t=(null!==(l=this.getDefaultGradientFillBBox())&&void 0!==l?l:this.getBBox()),fillParams:n}=this;e.fillStyle=null!==(d=i.createGradient(e,t,n))&&void 0!==d?d:"black"}else if(n){var c,u;const{x:t,y:i}=this.getBBox(),o=null!==(c=null===(u=this.layerManager)||void 0===u||null===(u=u.canvas)||void 0===u?void 0:u.pixelRatio)&&void 0!==c?c:1,s=n.createPattern(e,o);n.setPatternTransform(s,o,t,i),s?e.fillStyle=s:(e.fillStyle=n.fill,e.globalAlpha*=n.fillOpacity)}else if(o){const t=this.getBBox(),i=o.createPattern(e,t.width,t.height,this);o.setImageTransform(i,t),e.fillStyle=null!==i&&void 0!==i?i:"transparent"}else e.fillStyle="string"===typeof t?t:"black"}applyStrokeAndAlpha(e){var t,i;const{__stroke:n,__strokeOpacity:o=1,strokeGradient:s,__opacity:r=1}=this;e.strokeStyle=null!==(t=null!==(i=null===s||void 0===s?void 0:s.createGradient(e,this.getBBox()))&&void 0!==i?i:"string"===typeof n?n:void 0)&&void 0!==t?t:"black";const a=r*o;1!==a&&(e.globalAlpha*=a)}applyShadow(e){var t,i;const n=null!==(t=null===(i=this.layerManager)||void 0===i?void 0:i.canvas.pixelRatio)&&void 0!==t?t:1,{__fillShadow:o}=this;null!==o&&void 0!==o&&o.enabled&&(e.shadowColor=o.color,e.shadowOffsetX=o.xOffset*n,e.shadowOffsetY=o.yOffset*n,e.shadowBlur=o.blur*n)}renderStroke(e,t){const{__stroke:i,__strokeWidth:n=0,__strokeOpacity:o=1,__lineDash:s,__lineDashOffset:r,__lineCap:a,__lineJoin:l,__miterLimit:d}=this;if(null!=i&&"none"!==i&&n>0&&o>0){const{globalAlpha:i}=e;this.applyStrokeAndAlpha(e),e.lineWidth=n,s&&e.setLineDash(s),r&&(e.lineDashOffset=r),a&&(e.lineCap=a),l&&(e.lineJoin=l),null!=d&&(e.miterLimit=d),this.executeStroke(e,t),e.globalAlpha=i}}executeStroke(e,t){t?e.stroke(t):e.stroke()}getDefaultGradientFillBBox(){var e;return null!==(e=this.cachedDefaultGradientFillBBox)&&void 0!==e||(this.cachedDefaultGradientFillBBox=Object.freeze(this.computeDefaultGradientFillBBox())),this.cachedDefaultGradientFillBBox}computeDefaultGradientFillBBox(){}containsPoint(e,t){return this.isPointInPath(e,t)}applySvgFillAttributes(e,t){const{fill:i,fillOpacity:n}=this;if("string"===typeof i)e.setAttribute("fill",i);else if($v(i)&&this.fillGradient){var o;null!==t&&void 0!==t||(t=[]);const i=this.fillGradient.toSvg(null!==(o=this.fillBBox)&&void 0!==o?o:this.getBBox()),n=Sm();i.setAttribute("id",n),t.push(i),e.setAttribute("fill","url(#".concat(n,")"))}else if(qv(i)&&this.fillPattern){null!==t&&void 0!==t||(t=[]);const i=this.fillPattern.toSvg(),n=Sm();i.setAttribute("id",n),t.push(i),e.setAttribute("fill","url(#".concat(n,")"))}else if(Qv(i)&&this.fillImage){var s,r;null!==t&&void 0!==t||(t=[]);const i=null!==(s=null===(r=this.layerManager)||void 0===r||null===(r=r.canvas)||void 0===r?void 0:r.pixelRatio)&&void 0!==s?s:1,n=this.fillImage.toSvg(this.getBBox(),i),o=Sm();n.setAttribute("id",o),t.push(n),e.setAttribute("fill","url(#".concat(o,")"))}else e.setAttribute("fill","none");return e.setAttribute("fill-opacity",String(n)),t}applySvgStrokeAttributes(e){const{stroke:t,strokeOpacity:i,strokeWidth:n,lineDash:o,lineDashOffset:s}=this;!function(e,t){const{stroke:i,strokeWidth:n,strokeOpacity:o}=t;i&&e.setAttribute("stroke",i),null!=n&&e.setAttribute("stroke-width",String(n)),null!=o&&e.setAttribute("stroke-opacity",String(o))}(e,{stroke:il(t)?t:void 0,strokeOpacity:i,strokeWidth:n}),function(e,t){const{lineDash:i,lineDashOffset:n}=t;if(null!==i&&void 0!==i&&i.some(e=>0!==e)){const t=i.length%2===1?[...i,...i]:i;e.setAttribute("stroke-dasharray",t.join(" ")),null!=n&&e.setAttribute("stroke-dashoffset",String(n))}}(e,{lineDash:o,lineDashOffset:s})}static handleFillChange(e){e.onFillChange()}static handleStrokeChange(e){e.onStrokeChange()}setStyleProperties(e,t,i){var n,o,s,r,a;const l=null!==(n=null===e||void 0===e?void 0:e.opacity)&&void 0!==n?n:1,d=null===e||void 0===e?void 0:e.fill,c=(null!==(o=null===e||void 0===e?void 0:e.fillOpacity)&&void 0!==o?o:1)*l,u=(null!==(s=null===e||void 0===e?void 0:e.strokeOpacity)&&void 0!==s?s:1)*l,h=null!==(r=null===e||void 0===e?void 0:e.strokeWidth)&&void 0!==r?r:0,p=null!==(a=null===e||void 0===e?void 0:e.lineDashOffset)&&void 0!==a?a:0;let g=!1;this.__fillOpacity!==c&&(this.__fillOpacity=c,g=!0),this.__strokeOpacity!==u&&(this.__strokeOpacity=u,g=!0),this.__strokeWidth!==h&&(this.__strokeWidth=h,g=!0),this.__lineDashOffset!==p&&(this.__lineDashOffset=p,g=!0),this.__lineDash!==(null===e||void 0===e?void 0:e.lineDash)&&(this.__lineDash=null===e||void 0===e?void 0:e.lineDash,g=!0),this.setFillProperties(d,t,i),d!==this.fill&&(this.fill=d),(null===e||void 0===e?void 0:e.stroke)!==this.stroke&&(this.stroke=null===e||void 0===e?void 0:e.stroke),g&&this.markDirty()}setFillProperties(e,t,i){const n=null!=t&&$v(e)&&null!=e.bounds&&"item"!==e.bounds?t[e.bounds]:void 0;let o=!1;this.__fillBBox!==n&&(this.__fillBBox=n,o=!0),this.__fillParams!==i&&(this.__fillParams=i,o=!0),o&&(this.onFillChange(),this.markDirty())}};Ab([$y()],kx.prototype,"drawingMode",2),Ab([$y()],kx.prototype,"fillOpacity",2),Ab([$y()],kx.prototype,"strokeOpacity",2),Ab([Zy({equals:yu,changeCb:kx.handleFillChange})],kx.prototype,"fill",2),Ab([Uy({equals:yu,changeCb:kx.handleStrokeChange})],kx.prototype,"stroke",2),Ab([$y()],kx.prototype,"strokeWidth",2),Ab([Yy()],kx.prototype,"lineDash",2),Ab([$y()],kx.prototype,"lineDashOffset",2),Ab([$y()],kx.prototype,"lineCap",2),Ab([$y()],kx.prototype,"lineJoin",2),Ab([$y()],kx.prototype,"miterLimit",2),Ab([$y({convertor:e=>za(0,null!==e&&void 0!==e?e:1,1)})],kx.prototype,"opacity",2),Ab([Uy({equals:Wy,checkDirtyOnAssignment:!0})],kx.prototype,"fillShadow",2),Ab([Zy({equals:dg,changeCb:e=>e.onFillChange()})],kx.prototype,"fillBBox",2),Ab([Zy({equals:yu,changeCb:e=>e.onFillChange()})],kx.prototype,"fillParams",2);var Dx=kx,Ix=[1,0,0,1,0,0],Ax=class e{get e(){return[...this.elements]}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ix;this.elements=[...e]}setElements(e){const t=this.elements;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],this}get identity(){const e=this.elements;return Va(e[0],1)&&Va(e[1],0)&&Va(e[2],0)&&Va(e[3],1)&&Va(e[4],0)&&Va(e[5],0)}AxB(e,t,i){const n=e[0]*t[0]+e[2]*t[1],o=e[1]*t[0]+e[3]*t[1],s=e[0]*t[2]+e[2]*t[3],r=e[1]*t[2]+e[3]*t[3],a=e[0]*t[4]+e[2]*t[5]+e[4],l=e[1]*t[4]+e[3]*t[5]+e[5];(i=null!==i&&void 0!==i?i:e)[0]=n,i[1]=o,i[2]=s,i[3]=r,i[4]=a,i[5]=l}multiplySelf(e){return this.AxB(this.elements,e.elements),this}multiply(t){const i=[Number.NaN,Number.NaN,Number.NaN,Number.NaN,Number.NaN,Number.NaN];return t instanceof e?this.AxB(this.elements,t.elements,i):this.AxB(this.elements,[t.a,t.b,t.c,t.d,t.e,t.f],i),new e(i)}preMultiplySelf(e){return this.AxB(e.elements,this.elements,this.elements),this}inverse(){const t=this.elements;let i=t[0],n=t[1],o=t[2],s=t[3];const r=t[4],a=t[5],l=1/(i*s-n*o);return i*=l,n*=l,o*=l,s*=l,new e([s,-n,-o,i,o*a-s*r,n*r-i*a])}invertSelf(){const e=this.elements;let t=e[0],i=e[1],n=e[2],o=e[3];const s=e[4],r=e[5],a=1/(t*o-i*n);return t*=a,i*=a,n*=a,o*=a,e[0]=o,e[1]=-i,e[2]=-n,e[3]=t,e[4]=n*r-o*s,e[5]=i*s-t*r,this}transformPoint(e,t){const i=this.elements;return{x:e*i[0]+t*i[2]+i[4],y:e*i[1]+t*i[3]+i[5]}}transformBBox(e,t){const i=this.elements,n=i[0],o=i[1],s=i[2],r=i[3],a=.5*e.width,l=.5*e.height,d=e.x+a,c=e.y+l,u=Math.abs(a*n)+Math.abs(l*s),h=Math.abs(a*o)+Math.abs(l*r);return null!==t&&void 0!==t||(t=new Pb(0,0,0,0)),t.x=d*n+c*s+i[4]-u,t.y=d*o+c*r+i[5]-h,t.width=u+u,t.height=h+h,t}toContext(e){if(this.identity)return;const t=this.elements;e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}static updateTransformMatrix(e,t,i,n,o,s,r){const a=t,l=i;let d,c;var u,h;1===a&&1===l?(d=0,c=0):(d=null!==(u=null===r||void 0===r?void 0:r.scalingCenterX)&&void 0!==u?u:0,c=null!==(h=null===r||void 0===r?void 0:r.scalingCenterY)&&void 0!==h?h:0);const p=n,g=Math.cos(p),m=Math.sin(p);let f,v;var y,b;0===p?(f=0,v=0):(f=null!==(y=null===r||void 0===r?void 0:r.rotationCenterX)&&void 0!==y?y:0,v=null!==(b=null===r||void 0===r?void 0:r.rotationCenterY)&&void 0!==b?b:0);const x=o,C=s,S=d*(1-a)-f,w=c*(1-l)-v;return e.setElements([g*a,m*a,-m*l,g*l,g*S-m*w+f+x,m*S+g*w+v+C]),e}};function Lx(e){return Tx(e.constructor)}var Nx=Symbol("isMatrixTransform");function Tx(e){return!0===e[Nx]}function Rx(e){var t;const i=e;if(Tx(e))return e;const n=Symbol("matrix_combined_transform");class o extends i{constructor(){super(...arguments),this[t]=new Ax,this._dirtyTransform=!0}onChangeDetection(e){super.onChangeDetection(e),this._dirtyTransform=!0,this.batchLevel>0||this.markDirty("transform")}updateMatrix(e){}computeTransformMatrix(){this._dirtyTransform&&(this[n].setElements(Ix),this.updateMatrix(this[n]),this._dirtyTransform=!1)}toParent(e){return this.computeTransformMatrix(),this[n].identity?e.clone():this[n].transformBBox(e)}toParentPoint(e,t){return this.computeTransformMatrix(),this[n].identity?{x:e,y:t}:this[n].transformPoint(e,t)}fromParent(e){return this.computeTransformMatrix(),this[n].identity?e.clone():this[n].inverse().transformBBox(e)}fromParentPoint(e,t){return this.computeTransformMatrix(),this[n].identity?{x:e,y:t}:this[n].inverse().transformPoint(e,t)}computeBBox(){const e=super.computeBBox();return e?this.toParent(e):e}computeBBoxWithoutTransforms(){return super.computeBBox()}pickNode(e,t){return({x:e,y:t}=this.fromParentPoint(e,t)),super.pickNode(e,t)}pickNodes(e,t,i){return({x:e,y:t}=this.fromParentPoint(e,t)),super.pickNodes(e,t,i)}render(e){this.computeTransformMatrix();const{ctx:t}=e,i=this[n];let o=!1;try{i.identity||(t.save(),o=!0,i.toContext(t)),super.render(e)}finally{o&&t.restore()}}toSVG(){this.computeTransformMatrix();const e=super.toSVG(),t=this[n];if(t.identity||null==e)return e;const i=Br("g");i.append(...e.elements);const[o,s,r,a,l,d]=t.e;return i.setAttribute("transform","matrix(".concat(o," ").concat(s," ").concat(r," ").concat(a," ").concat(l," ").concat(d,")")),{elements:[i],defs:e.defs}}}return t=n,o[Nx]=!0,o}function Ex(e){var t;const i=e,n=Symbol("matrix_rotation");class o extends(Rx(i)){constructor(){super(...arguments),this[t]=new Ax,this.rotationCenterX=0,this.rotationCenterY=0,this.rotation=0}updateMatrix(e){super.updateMatrix(e);const{rotation:t,rotationCenterX:i,rotationCenterY:o}=this;0!==t&&(Ax.updateTransformMatrix(this[n],1,1,t,0,0,{rotationCenterX:i,rotationCenterY:o}),e.multiplySelf(this[n]))}}return t=n,Ab([_y()],o.prototype,"rotationCenterX",2),Ab([_y()],o.prototype,"rotationCenterY",2),Ab([_y()],o.prototype,"rotation",2),o}function Px(e){return"scalingX"in e&&"scalingY"in e&&"scalingCenterX"in e&&"scalingCenterY"in e}function Ox(e){var t;const i=e,n=Symbol("matrix_scale");class o extends(Rx(i)){constructor(){super(...arguments),this[t]=new Ax,this.scalingX=1,this.scalingY=1,this.scalingCenterX=0,this.scalingCenterY=0}updateMatrix(e){super.updateMatrix(e);const{scalingX:t,scalingY:i,scalingCenterX:o,scalingCenterY:s}=this;1===t&&1===i||(Ax.updateTransformMatrix(this[n],t,i,0,0,0,{scalingCenterX:o,scalingCenterY:s}),e.multiplySelf(this[n]))}resetScalingProperties(e,t,i,n){this.__scalingX=e,this.__scalingY=t,this.__scalingCenterX=i,this.__scalingCenterY=n,this.onChangeDetection("scaling")}}return t=n,Ab([_y()],o.prototype,"scalingX",2),Ab([_y()],o.prototype,"scalingY",2),Ab([_y()],o.prototype,"scalingCenterX",2),Ab([_y()],o.prototype,"scalingCenterY",2),o}function Fx(e){var t;const i=e,n=Symbol("matrix_translation");class o extends(Rx(i)){constructor(){super(...arguments),this[t]=new Ax,this.translationX=0,this.translationY=0}updateMatrix(e){super.updateMatrix(e);const{translationX:t,translationY:i}=this;0===t&&0===i||(Ax.updateTransformMatrix(this[n],1,1,0,t,i),e.multiplySelf(this[n]))}}return t=n,Ab([_y()],o.prototype,"translationX",2),Ab([_y()],o.prototype,"translationY",2),o}var zx,Bx=class{static fromCanvas(e,t){const i=[];for(const n of e.traverseUp())Lx(n)&&i.unshift(n);for(const n of i)t=n.fromParent(t);return Lx(e)&&(t=e.fromParent(t)),t}static toCanvas(e,t){null==t?t=e.getBBox():Lx(e)&&(t=e.toParent(t));for(const i of e.traverseUp())Lx(i)&&(t=i.toParent(t));return t}static fromCanvasPoint(e,t,i){const n=[];for(const o of e.traverseUp())Lx(o)&&n.unshift(o);for(const o of n)({x:t,y:i}=o.fromParentPoint(t,i));return Lx(e)&&({x:t,y:i}=e.fromParentPoint(t,i)),{x:t,y:i}}static toCanvasPoint(e,t,i){Lx(e)&&({x:t,y:i}=e.toParentPoint(t,i));for(const n of e.traverseUp())Lx(n)&&({x:t,y:i}=n.toParentPoint(t,i));return{x:t,y:i}}},Vx=class e extends _b{constructor(e){super(e),this.childNodes=new Set,this.dirty=!1,this.dirtyZIndex=!1,this.clipRect=void 0,this.opacity=1,this.layer=void 0,this.image=void 0,this._lastWidth=Number.NaN,this._lastHeight=Number.NaN,this._lastDevicePixelRatio=Number.NaN,this.isContainerNode=!0,this.renderToOffscreenCanvas=!0===(null===e||void 0===e?void 0:e.renderToOffscreenCanvas),this.optimizeForInfrequentRedraws=!0===(null===e||void 0===e?void 0:e.optimizeForInfrequentRedraws)}static is(t){return t instanceof e}static computeChildrenBBox(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Pb.merge(_b.extractBBoxes(e,t))}static compareChildren(e,t){return Hb(e.__zIndex,t.__zIndex)||e.serialNumber-t.serialNumber}containsPoint(e,t){return!0}computeBBox(){return e.computeChildrenBBox(this.children())}computeSafeClippingBBox(e){const t=this.computeBBox();if(!0!==(null===t||void 0===t?void 0:t.isFinite()))return;let i=0;for(const c of this.descendants())c instanceof Dx&&(i=Math.max(i,c.strokeWidth));const n=Math.max(1,i/2*4),{x:o,y:s}=Bx.toCanvasPoint(this,0,0),r=xx(e,o+t.x-n)-o,a=xx(e,s+t.y-n)-s,l=Math.ceil(t.x+t.width-r+n),d=Math.ceil(t.y+t.height-a+n);return new Pb(r,a,l,d)}prepareSharedCanvas(e,t,i){return null==zx||zx.pixelRatio!==i?zx=new Vb({width:e,height:t,pixelRatio:i}):zx.resize(e,t,i),zx}setScene(e){const t=this.scene;super.setScene(e),this.layer&&t&&t!==e&&(t.layersManager.removeLayer(this.layer),this.layer=void 0);for(const i of this.children())i.setScene(e)}markDirty(e){this.dirty=!0,super.markDirty(e)}markDirtyChildrenOrder(){super.markDirtyChildrenOrder(),this.dirtyZIndex=!0,this.markDirty()}append(e){for(const t of gu(e))t.remove(),this.childNodes.add(t),t.parentNode=this,t.setScene(this.scene);this.markDirtyChildrenOrder(),this.markDirty()}appendChild(e){return this.append(e),e}removeChild(e){var t,i,n;if(null===(t=this.childNodes)||void 0===t||!t.delete(e))throw new Error("AG Charts - internal error, unknown child node ".concat(null!==(i=e.name)&&void 0!==i?i:e.id," in $").concat(null!==(n=this.name)&&void 0!==n?n:this.id));e.parentNode=void 0,e.setScene(),this.markDirtyChildrenOrder(),this.markDirty()}clear(){var e;for(const t of this.children())delete t.parentNode,t.setScene();null===(e=this.childNodes)||void 0===e||e.clear(),this.markDirty()}pickNode(e,t){if(this.visible&&1!==this.pointerEvents&&this.containsPoint(e,t))if(null!=this.childNodes&&0!==this.childNodes.size){const i=[...this.children()];for(let n=i.length-1;n>=0;n--){const o=i[n].pickNode(e,t);if(null!=o)return o}}else if(!this.isContainerNode)return this}pickNodes(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!this.visible||1===this.pointerEvents||!this.containsPoint(e,t))return i;this.isContainerNode||i.push(this);for(const n of this.children())n.pickNodes(e,t,i);return i}isDirty(e){const{width:t,height:i,devicePixelRatio:n}=e,{dirty:o,layer:s}=this,r=null!=s&&(this._lastWidth!==t||this._lastHeight!==i),a=this._lastDevicePixelRatio!==n;return this._lastWidth=t,this._lastHeight=i,this._lastDevicePixelRatio=n,o||r||a}preRender(e){let t;if(this.dirty){t=super.preRender(e,0);for(const i of this.children()){const n=i.preRender(e);t.groups+=n.groups,t.nonGroups+=n.nonGroups,t.complexity+=n.complexity}t.groups+=1,t.nonGroups-=1}else t=this.childNodeCounts;var i,n;if(this.renderToOffscreenCanvas&&!this.optimizeForInfrequentRedraws&&t.nonGroups>0&&this.getVisibility())null!==(i=this.layer)&&void 0!==i||(this.layer=null===(n=this.layerManager)||void 0===n?void 0:n.addLayer({name:this.name}));else if(null!=this.layer){var o;null===(o=this.layerManager)||void 0===o||o.removeLayer(this.layer),this.layer=void 0}return t}render(e){var t=this;const{layer:i,renderToOffscreenCanvas:n}=this,o=p({},e),s=this.isDirty(e);if(this.dirty=!1,!n)return this.renderInContext(o),void super.render(o);const{ctx:r,stats:a,devicePixelRatio:l}=e;let{image:d}=this;if(s){var c;null===(c=d)||void 0===c||c.bitmap.close(),d=void 0;const e=i?void 0:this.computeSafeClippingBBox(l),n=function(e){const i=e.context;o.ctx=i,e.clear(),i.save();try{for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];i.setTransform(...s),i.globalAlpha=1,t.renderInContext(o)}finally{var a;i.restore(),null===(a=i.verifyDepthZero)||void 0===a||a.call(i)}};if(i)n(i,r.getTransform());else if(e){const{x:t,y:i,width:o,height:s}=e,r=Math.floor(o*l),a=Math.floor(s*l);if(r>0&&a>0){const e=this.prepareSharedCanvas(o,s,l);n(e,l,0,0,l,-t*l,-i*l),d={bitmap:e.transferToImageBitmap(),x:t,y:i,width:o,height:s}}}this.image=d,a&&a.layersRendered++}else a&&a.layersSkipped++;const{globalAlpha:u}=r;if(r.globalAlpha=u*this.opacity,i){r.save();try{r.resetTransform(),i.drawImage(r)}finally{r.restore()}}else if(d){const{bitmap:e,x:t,y:i,width:n,height:o}=d;r.drawImage(e,0,0,n*l,o*l,t,i,n,o)}r.globalAlpha=u,super.render(o)}applyClip(e,t){const{x:i,y:n,width:o,height:s}=t;e.beginPath(),e.rect(i,n,o,s),e.clip()}renderInContext(t){const{ctx:i,stats:n}=t;this.dirtyZIndex&&(this.sortChildren(e.compareChildren),this.dirtyZIndex=!1),i.save();try{i.globalAlpha*=this.opacity,null!=this.clipRect&&(this.applyClip(i,this.clipRect),t.clipBBox=Bx.toCanvas(this,this.clipRect));for(const e of this.children())e.visible?e.isolatedRender(t):n&&(n.nodesSkipped+=e.childNodeCounts.nonGroups+e.childNodeCounts.groups,n.opsSkipped+=e.childNodeCounts.complexity)}finally{i.restore()}}sortChildren(e){if(!this.childNodes)return;const t=[...this.childNodes].sort(e);this.childNodes.clear();for(const i of t)this.childNodes.add(i)}*children(){yield*this.childNodes}*excludeChildren(e){for(const t of this.children())(e.instance&&!(t instanceof e.instance)||e.name&&t.name!==e.name)&&(yield t)}*descendants(){for(const t of this.children())yield t,t instanceof e&&(yield*t.descendants())}setClipRect(e){this.clipRect=e?Bx.fromCanvas(this,e):void 0}setClipRectCanvasSpace(e){this.clipRect=e}getVisibility(){for(const e of this.traverseUp(!0))if(!e.visible)return!1;return!0}toSVG(){if(!this.visible)return;const e=[],t=[];for(const i of this.children()){const n=i.toSVG();null!=n&&(t.push(...n.elements),null!=n.defs&&e.push(...n.defs))}return{elements:t,defs:e}}};Vx.className="Group",Ab([_y({convertor:e=>za(0,e,1)})],Vx.prototype,"opacity",2);var Gx=Vx,Hx=class extends(Ox(Gx)){},jx=(Ex(Gx),class extends(Fx(Gx)){}),Wx=class extends(Ex(Fx(Gx))){},_x=class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(e){return new Promise((t,i)=>{this.acquireQueue.push([e,t,i]),this.available&&this.dispatchNext().catch(i)})}async acquireImmediately(e){return!!this.available&&(await this.acquire(e),!0)}async waitForClearAcquireQueue(){return this.acquire(()=>Promise.resolve(void 0))}async dispatchNext(){var e;this.available=!1;let[t,i,n]=null!==(e=this.acquireQueue.shift())&&void 0!==e?e:[];for(;t;){var o;try{var s;await t(),null===(s=i)||void 0===s||s()}catch(Ur){var r;null===(r=n)||void 0===r||r(Ur)}[t,i,n]=null!==(o=this.acquireQueue.shift())&&void 0!==o?o:[]}this.available=!0}},Kx=class{constructor(){this.eventListeners=new Map}addEventListener(e,t){if("function"!==typeof t)throw new TypeError("AG Charts - listener must be a Function");const i=this.eventListeners.get(e);i?i.add(t):this.eventListeners.set(e,new Set([t]))}removeEventListener(e,t){const i=this.eventListeners.get(e);null!=i&&(i.delete(t),0===i.size&&this.eventListeners.delete(e))}hasEventListener(e){return this.eventListeners.has(e)}clearEventListeners(){this.eventListeners.clear()}fireEvent(e){const t=this.eventListeners.get(e.type);if(t)for(const i of t)i(e)}};function Ux(e){return Yx(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0!==t)return setTimeout(e,t);queueMicrotask(e)},e,function(e){clearTimeout(e)})}function Yx(e,t,i){let n,o,s,r=0,a=!1;function l(){return a}function d(){var t;a=!1,s=void 0,null===(t=o)||void 0===t||t(),o=void 0,n=void 0,r>0&&(s=e(c))}function c(){const e=r;r=0,a=!0;const i=t({count:e});i?i.then(d,d):d()}function u(e){o=e}return{schedule:function(t){0!==r||l()||(s=e(c,t)),r++},cancel:function(){null!=s&&i&&(i(s),s=void 0,r=0)},waitForCompletion:async function(){if(l())for(null!==n&&void 0!==n||(n=new Promise(u));l();)await n}}}var $x=["blur","change","contextmenu","focus","keydown","keyup","click","dblclick","mouseenter","mousemove","mouseleave","wheel","touchstart","touchmove","touchend","touchcancel"];function Zx(e,t,i){const{offsetX:n,offsetY:o,clientX:s,clientY:r}=t,{currentX:a,currentY:l}=Qx.calcCurrentXY(i,t);return{type:e,device:"mouse",offsetX:n,offsetY:o,clientX:s,clientY:r,currentX:a,currentY:l,sourceEvent:t}}function Xx(e,t,i){return{type:e,sourceEvent:t}}var qx={blur:e=>({type:"blur",sourceEvent:e}),change:e=>({type:"change",sourceEvent:e}),contextmenu:(e,t)=>Zx("contextmenu",e,t),focus:e=>({type:"focus",sourceEvent:e}),keydown:e=>({type:"keydown",sourceEvent:e}),keyup:e=>({type:"keyup",sourceEvent:e}),click:(e,t)=>Zx("click",e,t),dblclick:(e,t)=>Zx("dblclick",e,t),mouseenter:(e,t)=>Zx("mouseenter",e,t),mousemove:(e,t)=>Zx("mousemove",e,t),mouseleave:(e,t)=>Zx("mouseleave",e,t),wheel:e=>{const{offsetX:t,offsetY:i,clientX:n,clientY:o}=e,s=0===e.deltaMode?.01:1;return{type:"wheel",offsetX:t,offsetY:i,clientX:n,clientY:o,deltaX:e.deltaX*s,deltaY:e.deltaY*s,sourceEvent:e}},touchstart:(e,t)=>Xx("touchstart",e),touchmove:(e,t)=>Xx("touchmove",e),touchend:(e,t)=>Xx("touchend",e),touchcancel:(e,t)=>Xx("touchcancel",e)},Qx=class{static alloc(e,t,i){return qx[e](t,i)}static isHTMLEvent(e){return $x.includes(e)}static calcCurrentXY(e,t){const i=e.getBoundingClientRect();return{currentX:t.clientX-i.x,currentY:t.clientY-i.y}}},Jx=class{constructor(){this.widgetListeners={},this.sourceListeners={}}initSourceHandler(e,t){var i;null!==(i=this.sourceListeners)&&void 0!==i||(this.sourceListeners={}),this.sourceListeners[e]=t}lazyGetWidgetListeners(e,t){var i,n,o,s;if(!(e in(null!==(i=this.sourceListeners)&&void 0!==i?i:{}))){const i=i=>{const n=Qx.alloc(e,i,t.getElement());this.dispatch(e,t,n)},n={};e.startsWith("touch")&&(n.passive=!1),this.initSourceHandler(e,i),t.getElement().addEventListener(e,i,n)}return null!==(n=this.widgetListeners)&&void 0!==n||(this.widgetListeners={}),null!==(o=(s=this.widgetListeners)[e])&&void 0!==o||(s[e]=[]),this.widgetListeners[e]}add(e,t,i){this.lazyGetWidgetListeners(e,t).push(i)}remove(e,t,i){const n=this.lazyGetWidgetListeners(e,t),o=n.indexOf(i);o>-1&&n.splice(o,1)}destroy(e){if(this.widgetListeners=void 0,this.sourceListeners){for(const[t,i]of fu(this.sourceListeners))e.getElement().removeEventListener(t,i);this.sourceListeners=void 0}}dispatch(e,t,i){for(const s of null!==(n=null===(o=this.widgetListeners)||void 0===o?void 0:o[e])&&void 0!==n?n:[]){var n,o;s(i,t)}}},eC=class{constructor(e,t,i,n){this.glob=e,this.self=t,this.window=Pr(),this.cleanup=new Ta,this.mousegeneral=e=>{e.stopPropagation(),e.stopImmediatePropagation()},this.mousemove=e=>{var t;e.stopPropagation(),e.stopImmediatePropagation(),null===(t=this.glob.globalMouseDragCallbacks)||void 0===t||t.mousemove(e)},this.mouseup=e=>{var t;0===e.button&&(e.stopPropagation(),e.stopImmediatePropagation(),null===(t=this.glob.globalMouseDragCallbacks)||void 0===t||t.mouseup(e),this.destroy())};const{window:o,mousegeneral:s,mousemove:r,mouseup:a}=this;this.cleanup.register(Gr(o,"mousedown",s,{capture:!0}),Gr(o,"mouseenter",s,{capture:!0}),Gr(o,"mouseleave",s,{capture:!0}),Gr(o,"mouseout",s,{capture:!0}),Gr(o,"mouseover",s,{capture:!0}),Gr(o,"mousemove",r,{capture:!0}),Gr(o,"mouseup",a,{capture:!0})),t.mouseDragger=this,e.globalMouseDragCallbacks=i,e.globalMouseDragCallbacks.mousedown(n),n.stopPropagation(),n.stopImmediatePropagation()}destroy(){this.cleanup.flush(),this.glob.globalMouseDragCallbacks=void 0,this.self.mouseDragger=void 0}};var tC=!1,iC=class{constructor(e,t,i,n,o){this.glob=e,this.self=t,this.initialTouch=n,this.target=o,this.cleanup=new Ta,this.longTapInterrupted=!1,this.longtap=()=>{const{target:e,initialTouch:t}=this;if(!this.longTapInterrupted){const i=new Ta;e.dispatchEvent(new TouchEvent("touchcancel",{touches:[t],bubbles:!0})),tC=!0;const n=e=>e.preventDefault(),o=e=>{tC=!1,e.preventDefault(),i.flush()};i.register(Gr(e,"touchmove",n,{passive:!1}),Gr(e,"touchend",o,{passive:!1}),Gr(e,"touchcancel",o,{passive:!1}));const{clientX:s,clientY:r}=t,a=new PointerEvent("contextmenu",{bubbles:!0,cancelable:!0,view:Pr(),clientX:s,clientY:r,pointerType:"touch"});e.dispatchEvent(a)}},this.touchmove=e=>{const{glob:t,self:i,initialTouch:n}=this,o=this.findInitialFinger(e.targetTouches);var s;null!=o&&(this.longTapInterrupted=this.longTapInterrupted||function(e,t){const i=e.clientX-t.clientX,n=e.clientY-t.clientY;return i*i+n*n}(n,o)>100,i.dragTouchEnabled&&(null===(s=t.globalTouchDragCallbacks)||void 0===s||s.touchmove(e,o)))},this.touchend=e=>{this.longTapInterrupted=!0;const t=this.findInitialFinger(e.changedTouches,e.touches);var i;null!=t&&(null===(i=this.glob.globalTouchDragCallbacks)||void 0===i||i.touchend(e,t));this.destroy()},this.longtapTimer=setTimeout(this.longtap,500);const{touchmove:s,touchend:r}=this;this.cleanup.register(Gr(o,"touchmove",s,{passive:!1}),Gr(o,"touchstart",r,{passive:!1}),Gr(o,"touchend",r,{passive:!1}),Gr(o,"touchcancel",r,{passive:!1})),t.touchDragger=this,e.globalTouchDragCallbacks=i}destroy(){clearTimeout(this.longtapTimer),this.cleanup.flush(),this.glob.globalTouchDragCallbacks=void 0,this.self.touchDragger=void 0}findInitialFinger(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=t.flatMap(e=>Array.from(e));return Array.from(n).find(e=>e.identifier===this.initialTouch.identifier)}};function nC(e,t,i,n){const{currentX:o,currentY:s}=Qx.calcCurrentXY(e.getElement(),n),r=n.pageX-i.pageX,a=n.pageY-i.pageY;return{type:t,device:"mouse",offsetX:i.offsetX+r,offsetY:i.offsetY+a,clientX:n.clientX,clientY:n.clientY,currentX:o,currentY:s,originDeltaX:r,originDeltaY:a,sourceEvent:n}}function oC(e,t,i,n,o){const{currentX:s,currentY:r}=Qx.calcCurrentXY(e.getElement(),o),a=o.pageX-i.pageX,l=o.pageY-i.pageY;return{type:t,device:"touch",offsetX:i.offsetX+a,offsetY:i.offsetY+l,clientX:o.clientX,clientY:o.clientY,currentX:s,currentY:r,originDeltaX:a,originDeltaY:l,sourceEvent:n}}var sC={},rC=class{constructor(e){this.dispatchCallback=e,this.dragTouchEnabled=!0}destroy(){var e,t,i,n;null===(e=this.dragTriggerRemover)||void 0===e||e.call(this),this.dragTriggerRemover=void 0,null===(t=this.listeners)||void 0===t||t.clear(),null===(i=this.mouseDragger)||void 0===i||i.destroy(),null===(n=this.touchDragger)||void 0===n||n.destroy()}getListenerSet(e){var t;null!==(t=this.listeners)&&void 0!==t||(this.listeners=new Map);let i=this.listeners.get(e);return void 0===i&&(i=new Set,this.listeners.set(e,i)),i}add(e,t,i){switch(this.getListenerSet(e).add(i),e){case"drag-start":case"drag-move":case"drag-end":this.registerDragTrigger(t)}}remove(e,t,i){this.getListenerSet(e).delete(i)}registerDragTrigger(e){if(null==this.dragTriggerRemover){const t=e.getElement(),i=new Ta;i.register(Gr(t,"mousedown",t=>this.triggerMouseDrag(e,t)),Gr(t,"touchstart",t=>this.triggerTouchDrag(e,t),{passive:!1})),this.dragTriggerRemover=()=>i.flush()}}triggerMouseDrag(e,t){0===t.button&&this.startMouseDrag(e,t)}startMouseDrag(e,t){const i={pageX:Number.NaN,pageY:Number.NaN,offsetX:Number.NaN,offsetY:Number.NaN};Tu(["pageX","pageY","offsetX","offsetY"],i,t);const n={mousedown:t=>{const n=nC(e,"drag-start",i,t);this.dispatch("drag-start",e,n)},mousemove:t=>{const n=nC(e,"drag-move",i,t);this.dispatch("drag-move",e,n)},mouseup:t=>{const n=nC(e,"drag-end",i,t);this.dispatch("drag-end",e,n),this.endDrag(e,n)}};this.mouseDragger=function(e,t,i,n){if(null==e.globalMouseDragCallbacks)return new eC(e,t,i,n)}(sC,this,n,t)}endDrag(e,t){let{sourceEvent:i,clientX:n,clientY:o}=t;const s=e.getElement();var r;ag(s.getBoundingClientRect(),n,o)||(s.dispatchEvent(new MouseEvent("mouseleave",i)),null===(r=i.target)||void 0===r||r.dispatchEvent(new MouseEvent("mouseenter",i)))}triggerTouchDrag(e,t){const i=t.targetTouches[0];1===t.targetTouches.length&&null!=i&&this.startOneFingerTouch(e,t,i)}startOneFingerTouch(e,t,i){const n=p({pageX:Number.NaN,pageY:Number.NaN},function(e,t){let{pageX:i,pageY:n}=t;const{x:o,y:s}=e.getElement().getBoundingClientRect();return{offsetX:i-o,offsetY:n-s}}(e,i));Tu(["pageX","pageY"],n,i);const o={touchmove:(t,i)=>{const o=oC(e,"drag-move",n,t,i);this.dispatch("drag-move",e,o)},touchend:(t,i)=>{const o=oC(e,"drag-end",n,t,i);this.dispatch("drag-end",e,o)}},s=e.getElement();this.touchDragger=function(e,t,i,n,o){if(null==e.globalTouchDragCallbacks&&!tC)return new iC(e,t,i,n,o)}(sC,this,o,i,s);const r=oC(e,"drag-start",n,t,i);this.dispatch("drag-start",e,r)}dispatch(e,t,i){for(const n of this.getListenerSet(e))n(i,t);this.dispatchCallback(e,i)}},aC=class{constructor(e){this.elem=e}setBounds(e){var t;wp(null!==(t=this.elemContainer)&&void 0!==t?t:this.elem,e)}getBounds(){var e;return Mp(null!==(e=this.elemContainer)&&void 0!==e?e:this.elem)}static setElementContainer(e,t){wp(t,e.getBounds()),Jp(e.elem,{width:"100%",height:"100%"}),e.elem.remove(),e.elemContainer=t,e.elemContainer.replaceChildren(e.elem)}},lC=class extends aC{constructor(){super(...arguments),this.index=Number.NaN,this.children=[]}set id(e){Zp(this.elem,"id",e)}get id(){return qp(this.elem,"id")}getElement(){return this.elem}getBoundingClientRect(){return this.elem.getBoundingClientRect()}get clientWidth(){return this.elem.clientWidth}get clientHeight(){return this.elem.clientHeight}destroy(){var e,t,i;null===(e=this.destroyListener)||void 0===e||e.call(this),this.destroyListener=void 0,this.remove();for(const n of this.children)n.parent=void 0,n.destroy();this.children.length=0,this.destructor(),this.remove(),null===(t=this.internalListener)||void 0===t||t.destroy(),null===(i=this.htmlListener)||void 0===i||i.destroy(this)}remove(){var e;this.elem.remove(),null===(e=this.elemContainer)||void 0===e||e.remove()}setHidden(e){Qp(this.elem,"display",e?"none":void 0)}isHidden(){var e,t;return"none"===(null===(e=Pr())||void 0===e||null===(t=e.getComputedStyle)||void 0===t?void 0:t.call(e,this.elem).display)}setCursor(e){Qp(this.elem,"cursor",e)}setTextContent(e){this.elem.textContent=null!==e&&void 0!==e?e:null}setAriaDescribedBy(e){Zp(this.elem,"aria-describedby",e)}setAriaHidden(e){Zp(this.elem,"aria-hidden",e)}setAriaLabel(e){Zp(this.elem,"aria-label",e)}setAriaExpanded(e){Zp(this.elem,"aria-expanded",e)}setAriaControls(e){Zp(this.elem,"aria-controls",e)}setAriaHasPopup(e){Zp(this.elem,"aria-haspopup",e)}setInnerHTML(e){this.elem.innerHTML=e}setPointerEvents(e){Qp(this.elem,"pointer-events",e)}setCSSVariable(e,t){this.elem.style.setProperty(e,t)}isDisabled(){return qp(this.elem,"aria-disabled",!1)}hasPopup(){const e=qp(this.elem,"aria-haspopup");return void 0!==e&&"false"!==e}parseFloat(e){return""===e?0:Number.parseFloat(e)}cssLeft(){return this.parseFloat(this.elem.style.left)}cssTop(){return this.parseFloat(this.elem.style.top)}cssWidth(){return this.parseFloat(this.elem.style.width)}cssHeight(){return this.parseFloat(this.elem.style.height)}focus(e){this.elem.focus(e)}setFocusOverride(e){Zp(this.elem,"data-focus-override",e)}setPreventsDefault(e){Zp(this.elem,"data-preventdefault",e)}setTabIndex(e){Zp(this.elem,"tabindex",e)}addChild(e){this.addChildToDOM(e,this.getBefore(e)),this.children.push(e),e.index=this.children.length-1,e.parent=this,this.onChildAdded(e)}removeChild(e){const t=this.children.indexOf(e);this.children.splice(t,1),this.removeChildFromDOM(e),this.onChildRemoved(e)}moveChild(e,t){e.domIndex!==t&&(e.domIndex=t,this.removeChildFromDOM(e),this.addChildToDOM(e,this.getBefore(e)))}addClass(){this.elem.classList.add(...arguments)}removeClass(){this.elem.classList.remove(...arguments)}toggleClass(e,t){this.elem.classList.toggle(e,t)}appendOrInsert(e,t){t?t.getElement().insertAdjacentElement("beforebegin",e):this.elem.appendChild(e)}addChildToDOM(e,t){this.appendOrInsert(e.getElement(),t)}removeChildFromDOM(e){e.getElement().remove()}onChildAdded(e){}onChildRemoved(e){}getBefore(e){let{domIndex:t}=e;if(void 0!==t)return this.children.filter(e=>void 0!==e.domIndex&&e.domIndex>t).reduce((e,t)=>!e||t.domIndex<e.domIndex?t:e,void 0)}addListener(e,t){var i,n;Qx.isHTMLEvent(e)?(null!==(i=this.htmlListener)&&void 0!==i||(this.htmlListener=new Jx),this.htmlListener.add(e,this,t)):(null!==(n=this.internalListener)&&void 0!==n||(this.internalListener=new rC(this.onDispatch.bind(this))),this.internalListener.add(e,this,t));return()=>this.removeListener(e,t)}removeListener(e,t){var i;if(Qx.isHTMLEvent(e))null===(i=this.htmlListener)||void 0===i||i.remove(e,this,t);else if(null!=this.htmlListener){var n;null===(n=this.internalListener)||void 0===n||n.remove(e,this,t)}}setDragTouchEnabled(e){var t;null!==(t=this.internalListener)&&void 0!==t||(this.internalListener=new rC(this.onDispatch.bind(this))),this.internalListener.dragTouchEnabled=e}onDispatch(e,t){var i;if(null===(i=t.sourceEvent)||void 0===i||!i.bubbles)return;let{parent:n}=this;for(;null!=n;){const{internalListener:i}=n;if(null!=i){const o=p(p({},t),Qx.calcCurrentXY(n.getElement(),t));i.dispatch(e,n,o)}n=n.parent}}static addWindowEvent(e,t){return Gr(Pr(),"pagehide",e=>{e.persisted||t()})}},dC=(e,t,i,n)=>{let{x0:o,y0:s,x1:r,y1:a,cx:l,cy:d}=t;if(n&&e.moveTo(o,s),o!==r||s!==a){const t=Math.atan2(s-d,o-l),n=Math.atan2(a-d,r-l);e.arc(l,d,i,t,n)}else e.lineTo(o,s)},cC=class extends Dx{constructor(){super(...arguments),this.path=new yx,this._clipX=Number.NaN,this._clipY=Number.NaN,this.clip=!1,this._dirtyPath=!0,this.lastPixelRatio=Number.NaN}set clipX(e){this._clipX=e,this.dirtyPath=!0}set clipY(e){this._clipY=e,this.dirtyPath=!0}set dirtyPath(e){this._dirtyPath!==e&&(this._dirtyPath=e,e&&this.markDirty("path"))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var e,t,i,n;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||null!==(e=null===(t=this.fillShadow)||void 0===t?void 0:t.isDirty())&&void 0!==e&&e||null!==(i=null===(n=this._clipPath)||void 0===n?void 0:n.isDirty())&&void 0!==i&&i)}resetPathDirty(){this.path.clear(!0),this._dirtyPath=!1}isPathDirty(){return this.path.isDirty()}onChangeDetection(e){this._dirtyPath||(this._dirtyPath=!0,super.onChangeDetection(e))}computeBBox(){return this.updatePathIfDirty(),this.path.computeBBox()}isPointInPath(e,t){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(e,t)}distanceSquared(e,t){return this.distanceSquaredTransformedPoint(e,t)}svgPathData(e){return this.updatePathIfDirty(),this.path.toSVG(e)}distanceSquaredTransformedPoint(e,t){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(e,t)?0:this.path.distanceSquared(e,t)}isDirtyPath(){return!1}updatePath(){}updatePathIfDirty(){(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1)}preRender(e){return e.devicePixelRatio!==this.lastPixelRatio&&(this.dirtyPath=!0),this.lastPixelRatio=e.devicePixelRatio,this.updatePathIfDirty(),super.preRender(e,this.path.commands.length)}render(e){var t;const{ctx:i}=e;if(!this.clip||Number.isNaN(this._clipX)||Number.isNaN(this._clipY))this._clipPath=void 0,this.drawPath(i);else{i.save();try{var n,o;const e=this.strokeWidth/2;null!==(n=this._clipPath)&&void 0!==n||(this._clipPath=new yx),this._clipPath.clear(),this._clipPath.rect(-e,-e,this._clipX+e,this._clipY+e+e),i.clip(null===(o=this._clipPath)||void 0===o?void 0:o.getPath2D()),this._clipX>0&&this._clipY>0&&this.drawPath(i)}finally{i.restore()}}null===(t=this.fillShadow)||void 0===t||t.markClean(),super.render(e)}drawPath(e){this.fillStroke(e,this.path.getPath2D())}toSVG(){if(!this.visible)return;const e=Br("path");e.setAttribute("d",this.svgPathData());const t=this.applySvgFillAttributes(e,[]);return this.applySvgStrokeAttributes(e),{elements:[e],defs:t}}};function uC(e,t,i,n,o){let s=!1,r=!1,a=n-Math.sqrt(Math.max(o**2-i**2,0)),l=0,d=0,c=i-Math.sqrt(Math.max(o**2-n**2,0));return a>e?(s=!0,a=e,l=i-Math.sqrt(Math.max(o**2-(n-e)**2))):Va(a,0)&&(a=0),c>t?(r=!0,d=n-Math.sqrt(Math.max(o**2-(i-t)**2)),c=t):Va(c,0)&&(c=0),{leading0:a,leading1:l,trailing0:d,trailing1:c,leadingClipped:s,trailingClipped:r}}function hC(e,t,i,n,o,s,r){let{topLeft:a,topRight:l,bottomRight:d,bottomLeft:c}=s;const u=Math.max(a+c,l+d),h=Math.max(a+l,c+d);if(u<=0&&h<=0){if(null==r)e.rect(t,i,n,o);else{const s=Math.max(t,r.x),a=Math.min(t+n,r.x+r.width),l=Math.max(i,r.y),d=Math.min(i+o,r.y+r.height);e.rect(s,l,a-s,d-l)}return}if(null==r&&a===l&&a===d&&a===c)return void e.roundRect(t,i,n,o,a);if(n<0&&(t+=n,n=Math.abs(n)),o<0&&(i+=o,o=Math.abs(o)),n<=0||o<=0)return;if(null==r)r=new Pb(t,i,n,o);else{const e=Math.max(t,r.x),s=Math.min(t+n,r.x+r.width),a=Math.max(i,r.y),l=Math.min(i+o,r.y+r.height);r=new Pb(e,a,s-e,l-a)}const p=Math.max(u/o,h/n,1);p>1&&(a/=p,l/=p,d/=p,c/=p);let g,m,f,v,y=!0,b=!0,x=!0,C=!0;if(y){const e=uC(r.height,r.width,Math.max(t+a-r.x,0),Math.max(i+a-r.y,0),a);e.leadingClipped&&(C=!1),e.trailingClipped&&(b=!1);g={x0:Math.max(r.x+e.leading1,r.x),y0:Math.max(r.y+e.leading0,r.y),x1:Math.max(r.x+e.trailing1,r.x),y1:Math.max(r.y+e.trailing0,r.y),cx:t+a,cy:i+a}}if(b){const e=uC(r.width,r.height,Math.max(i+l-r.y,0),Math.max(r.x+r.width-(t+n-l),0),l);e.leadingClipped&&(y=!1),e.trailingClipped&&(x=!1);m={x0:Math.min(r.x+r.width-e.leading0,r.x+r.width),y0:Math.max(r.y+e.leading1,r.y),x1:Math.min(r.x+r.width-e.trailing0,r.x+r.width),y1:Math.max(r.y+e.trailing1,r.y),cx:t+n-l,cy:i+l}}if(x){const e=uC(r.height,r.width,Math.max(r.x+r.width-(t+n-d),0),Math.max(r.y+r.height-(i+o-d),0),d);e.leadingClipped&&(b=!1),e.trailingClipped&&(C=!1);f={x0:Math.min(r.x+r.width-e.leading1,r.x+r.width),y0:Math.min(r.y+r.height-e.leading0,r.y+r.height),x1:Math.min(r.x+r.width-e.trailing1,r.x+r.width),y1:Math.min(r.y+r.height-e.trailing0,r.y+r.height),cx:t+n-d,cy:i+o-d}}if(C){const e=uC(r.width,r.height,Math.max(r.y+r.height-(i+o-c),0),Math.max(t+c-r.x,0),c);e.leadingClipped&&(x=!1),e.trailingClipped&&(y=!1);v={x0:Math.max(r.x+e.leading0,r.x),y0:Math.min(r.y+r.height-e.leading1,r.y+r.height),x1:Math.max(r.x+e.trailing0,r.x),y1:Math.min(r.y+r.height-e.trailing1,r.y+r.height),cx:t+c,cy:i+o-c}}let S=!1;y&&null!=g&&(dC(e,g,a,!S),S||(S=!0)),b&&null!=m&&(dC(e,m,l,!S),S||(S=!0)),x&&null!=f&&(dC(e,f,d,!S),S||(S=!0)),C&&null!=v&&dC(e,v,c,!S),e.closePath()}cC.className="Path",Ab([_y()],cC.prototype,"clip",2),Ab([_y()],cC.prototype,"clipX",1),Ab([_y()],cC.prototype,"clipY",1);var pC=class extends cC{constructor(){super(...arguments),this.borderPath=new yx,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.clipBBox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=this.__strokeWidth,this.effectiveStrokeWidth=this.__strokeWidth,this.hittester=super.isPointInPath.bind(this),this.distanceCalculator=super.distanceSquaredTransformedPoint.bind(this),this.microPixelEffectOpacity=1}set cornerRadius(e){this.topLeftCornerRadius=e,this.topRightCornerRadius=e,this.bottomRightCornerRadius=e,this.bottomLeftCornerRadius=e}isDirtyPath(){return this.lastUpdatePathStrokeWidth!==this.__strokeWidth||Boolean(this.path.isDirty()||this.borderPath.isDirty())}updatePath(){var e,t;const{path:i,borderPath:n,__crisp:o,__topLeftCornerRadius:s,__topRightCornerRadius:r,__bottomRightCornerRadius:a,__bottomLeftCornerRadius:l}=this;let{__x:d,__y:c,__width:u,__height:h,__strokeWidth:p,__clipBBox:g}=this;const m=1/(null!==(e=null===(t=this.layerManager)||void 0===t?void 0:t.canvas.pixelRatio)&&void 0!==e?e:1);let f=1;if(i.clear(),n.clear(),0===u||0===h)return this.effectiveStrokeWidth=0,this.lastUpdatePathStrokeWidth=0,void(this.microPixelEffectOpacity=0);if(o&&(u<=m&&(f*=u/m),h<=m&&(f*=h/m),u=this.align(d,u),h=this.align(c,h),d=this.align(d),c=this.align(c),g=null==g?void 0:new Pb(this.align(g.x),this.align(g.y),this.align(g.x,g.width),this.align(g.y,g.height))),p)if(u<m){const e=d+m/2;n.moveTo(e,c),n.lineTo(e,c+h),p=m,this.borderClipPath=void 0}else if(h<m){const e=c+m/2;n.moveTo(d,e),n.lineTo(d+u,e),p=m,this.borderClipPath=void 0}else if(p<u&&p<h){var v;const e=p/2;d+=e,c+=e,u-=p,h-=p;const t=null===(v=g)||void 0===v?void 0:v.clone().shrink(e),o={topLeft:s>0?s-p:0,topRight:r>0?r-p:0,bottomRight:a>0?a-p:0,bottomLeft:l>0?l-p:0};this.borderClipPath=void 0,u>0&&h>0&&(null==t||(null===t||void 0===t?void 0:t.width)>0&&(null===t||void 0===t?void 0:t.height)>0)&&(hC(i,d,c,u,h,o,t),hC(n,d,c,u,h,o,t))}else{var y;this.borderClipPath=null!==(y=this.borderClipPath)&&void 0!==y?y:new yx,this.borderClipPath.clear(),this.borderClipPath.rect(d,c,u,h),n.rect(d,c,u,h)}else{const e={topLeft:s,topRight:r,bottomRight:a,bottomLeft:l};this.borderClipPath=void 0,hC(i,d,c,u,h,e,g)}if([s,r,a,l].every(gC)){let e=function(e,t){return i.getBBox().distanceSquared(e,t)};const t=this.getBBox();this.hittester=t.containsPoint.bind(t);const i=this;this.distanceSquared=e}else this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquaredTransformedPoint;this.effectiveStrokeWidth=p,this.lastUpdatePathStrokeWidth=p,this.microPixelEffectOpacity=f}computeBBox(){var e;const{__x:t,__y:i,__width:n,__height:o,__clipBBox:s}=this;return null!==(e=null===s||void 0===s?void 0:s.clone())&&void 0!==e?e:new Pb(t,i,n,o)}isPointInPath(e,t){return this.hittester(e,t)}get midPoint(){return{x:this.__x+this.__width/2,y:this.__y+this.__height/2}}setStaticProperties(e,t,i,n,o,s,r,a){this.__drawingMode=e,this.__topLeftCornerRadius=t,this.__topRightCornerRadius=i,this.__bottomRightCornerRadius=n,this.__bottomLeftCornerRadius=o,this.__visible=s,this.__crisp=r,this.__fillShadow=a,this.dirtyPath=!0,this.markDirty()}resetAnimationProperties(e,t,i,n,o,s){this.__x=e,this.__y=t,this.__width=i,this.__height=n,this.__opacity=o,this.__clipBBox=s,this.dirtyPath=!0,this.markDirty()}distanceSquared(e,t){return this.distanceCalculator(e,t)}applyFillAndAlpha(e){super.applyFillAndAlpha(e),e.globalAlpha*=this.microPixelEffectOpacity}applyStrokeAndAlpha(e){super.applyStrokeAndAlpha(e),e.globalAlpha*=this.microPixelEffectOpacity}renderStroke(e){const{stroke:t,effectiveStrokeWidth:i}=this;if(t&&i){const{globalAlpha:t}=e,{lineDash:n,lineDashOffset:o,lineCap:s,lineJoin:r,borderPath:a,borderClipPath:l}=this;l&&e.clip(l.getPath2D()),this.applyStrokeAndAlpha(e),e.lineWidth=i,n&&e.setLineDash(n),o&&(e.lineDashOffset=o),s&&(e.lineCap=s),r&&(e.lineJoin=r),e.stroke(a.getPath2D()),e.globalAlpha=t}}};function gC(e){return 0===e}pC.className="Rect",Ab([$y()],pC.prototype,"x",2),Ab([$y()],pC.prototype,"y",2),Ab([$y()],pC.prototype,"width",2),Ab([$y()],pC.prototype,"height",2),Ab([$y()],pC.prototype,"topLeftCornerRadius",2),Ab([$y()],pC.prototype,"topRightCornerRadius",2),Ab([$y()],pC.prototype,"bottomRightCornerRadius",2),Ab([$y()],pC.prototype,"bottomLeftCornerRadius",2),Ab([$y({equals:dg})],pC.prototype,"clipBBox",2),Ab([$y()],pC.prototype,"crisp",2);var mC,fC=class{constructor(){this.stats=new Map,this.lastLogTime=Date.now(),this.LOG_INTERVAL_MS=1e4,this.startPeriodicLogging()}startPeriodicLogging(){Cr.check("scene:stats","scene:stats:verbose")&&(this.stopPeriodicLogging(),this.intervalId=setInterval(()=>{this.logAccumulatedStats()},this.LOG_INTERVAL_MS))}stopPeriodicLogging(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0)}recordTiming(e,t){const i=this.stats.get(e);i?(i.min=Math.min(i.min,t),i.max=Math.max(i.max,t),i.sum+=t,i.count+=1):this.stats.set(e,{min:t,max:t,sum:t,count:1})}recordTimings(e){for(const[t,i]of Object.entries(e))"start"!==t&&"number"===typeof i&&this.recordTiming(t,i)}logAccumulatedStats(){var e;if(0===this.stats.size)return;const t=(Date.now()-this.lastLogTime)/1e3,i=Array.from(this.stats.keys()).sort((e,t)=>"\u23f1\ufe0f"===e?-1:"\u23f1\ufe0f"===t?1:e.localeCompare(t)),n=[];for(const r of i){const e=this.stats.get(r),t=e.sum/e.count;n.push("".concat(r,"[").concat(e.min.toFixed(1),"/").concat(t.toFixed(1),"/").concat(e.max.toFixed(1),"]ms"))}const o=this.stats.get("\u23f1\ufe0f"),s=null!==(e=null===o||void 0===o?void 0:o.count)&&void 0!==e?e:0;jr.log("\ud83d\udcca Stats (".concat(t.toFixed(0),"s, ").concat(s," renders): ").concat(n.join(" "))),this.stats.clear(),this.lastLogTime=Date.now()}destroy(){this.stopPeriodicLogging(),this.stats.clear()}},vC=0;function yC(e){for(const t of["B","KB","MB","GB"]){if(e<1536)return"".concat(e.toFixed(1)).concat(t);e/=1024}return"".concat(e.toFixed(1),"TB}")}function bC(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Pb.zero;if(!Cr.check("scene:stats","scene:stats:verbose"))return;const{layersRendered:r=0,layersSkipped:a=0,nodesRendered:d=0,nodesSkipped:c=0,opsPerformed:u=0,opsSkipped:h=0}=null!==n&&void 0!==n?n:{},p=performance.now(),{start:g}=t,m=l(t,Qy),f=p-g,v=(null!==mC&&void 0!==mC||(mC=new fC),mC);v.recordTimings(m),v.recordTiming("\u23f1\ufe0f",f);const y=Object.entries(m).map(e=>{let[t,i]=e;return DC(t,i)}).filter(e=>null!=e).join(" + "),b=Object.entries(o).map(e=>{let[t,i]=e;return"".concat(t,": ").concat(JSON.stringify(i))}).join(" ; "),x=Cr.check("scene:stats:verbose"),C=x?function(){if(!("memory"in performance))return;const{totalJSHeapSize:e,usedJSHeapSize:t,jsHeapSizeLimit:i}=performance.memory,n=[];for(const o of[t,e,i])"number"===typeof o&&n.push(yC(o));return"Heap ".concat(n.join(" / "))}():null,S=x?sa.flush():{},w=Object.entries(S),M=[],k=[];for(const[l,O]of w)l.endsWith(":aggregation")&&Array.isArray(O)?M.push("".concat(l.replace(":aggregation",""),"(").concat(O.join(","),")")):l.endsWith(":nodeData")&&"number"===typeof O&&k.push("".concat(l.replace(":nodeData",""),"(").concat(O,")"));const D=M.length>0?"Aggregation: ".concat(M.join(", ")):null,I=k.length>0?"NodeData: ".concat(k.join(", ")):null,A=["".concat(DC("\u23f1\ufe0f",g,p)," (").concat(y,")"),"".concat(b),D,I,"Layers: ".concat(x?kC(r,a):e.size),x?"Nodes: ".concat(kC(d,c)):null,x?"Ops: ".concat(kC(u,h)):null,C].filter(il),L=new Hm(i),N=new Map(A.map(e=>[e,L.measureText(e)])),T=Math.max(...Array.from(N.values(),e=>e.width)),R=function(e,t){let i=0;for(const n of e)i+=t(n);return i}(N.values(),e=>e.height),E=2+s.x;i.save();try{i.fillStyle="white",i.fillRect(E,0,T,R),i.fillStyle="black";let e=0;for(const[t,n]of N.entries())e+=n.height,i.fillText(t,E,e)}catch(P){jr.warnOnce("Error during debug stats rendering",P)}finally{i.restore()}}var xC=new Set,CC=new Set(["gradient","zIndex","clipRect","cachedBBox","childNodeCounts","path","__zIndex","name","__scalingCenterX","__scalingCenterY","__rotationCenterX","__rotationCenterY","_previousDatum","__fill","__lineDash","borderPath","borderClipPath","_clipPath"]);function SC(e){const t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));for(const i of Object.keys(t))CC.has(i)||"number"!==typeof t[i]&&"string"!==typeof t[i]&&"boolean"!==typeof t[i]&&(xC.add(i),delete t[i]);return t}function wC(e,t){var i;if(!Cr.check(!0,"scene"))return{};let n=0;return p({node:"json"===t?SC(e):e,name:null!==(i=e.name)&&void 0!==i?i:e.id,dirty:e instanceof Gx?e.dirty:void 0},Array.from(e instanceof Gx?e.children():[],e=>wC(e,t)).reduce((e,t)=>{let{name:i}=t;const{node:{visible:o,opacity:s,zIndex:r,translationX:a,translationY:l,rotation:d,scalingX:c,scalingY:u},node:h}=t;(!o||s<=0)&&(i="(".concat(i,")")),Gx.is(h)&&h.renderToOffscreenCanvas&&(i="*".concat(i,"*"));const p=Array.isArray(r)?"(".concat(r.join(", "),")"):r,g=["".concat((n++).toString().padStart(3,"0"),"|"),"".concat(null!==i&&void 0!==i?i:"<unknown>"),"z: ".concat(p),a&&"x: ".concat(a),l&&"y: ".concat(l),d&&"r: ".concat(d),null!=c&&1!==c&&"sx: ".concat(c),null!=u&&1!==u&&"sy: ".concat(u)].filter(e=>!!e).join(" ");let m=g,f=1;for(;null!=e[m]&&f<100;)m="".concat(g," (").concat(f++,")");return e[m]=t,e},{}))}function MC(e){var t;const i=e instanceof Gx?e.dirty:void 0;if(!i)return{dirtyTree:{},paths:[]};const n=Array.from(e instanceof Gx?e.children():[],e=>MC(e)).filter(e=>e.paths.length>0),o=Gx.is(e)&&null!==(t=e.name)&&void 0!==t?t:e.id,s=n.length?n.flatMap(e=>e.paths).map(e=>"".concat(o,".").concat(e)):[o];return{dirtyTree:p({name:o,node:e,dirty:i},n.map(e=>e.dirtyTree).filter(e=>null!=e.dirty).reduce((e,t)=>{var i;return e[null!==(i=t.name)&&void 0!==i?i:"<unknown>"]=t,e},{})),paths:s}}function kC(e,t){const i=e+t;return"".concat(e," / ").concat(i," (").concat(Math.round(100*e/i),"%)")}function DC(e,t,i){const n=null==i?t:i-t;return"".concat(e,": ").concat(Math.round(100*n)/100,"ms")}function IC(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];mC?!e&&vC>0||(mC.destroy(),mC=void 0,e&&(vC=0)):e&&(vC=0)}var AC=class e extends Dx{constructor(t){var i;super(t),this.x=0,this.y=0,this.lines=[],this.text=void 0,this.fontCache=void 0,this.fontSize=e.defaultFontSize,this.fontFamily="sans-serif",this.textAlign="start",this.textBaseline="alphabetic",this.boxPadding=0,this.trimText=null===(i=null===t||void 0===t?void 0:t.trimText)||void 0===i||i}onTextChange(){var t,i;if(null===(t=this.richText)||void 0===t||t.clear(),null===(i=this.textMap)||void 0===i||i.clear(),Ua(this.text)){var n;this.lines=[],null!==(n=this.richText)&&void 0!==n||(this.richText=new Gx),this.richText.setScene(this.scene),this.richText.append(this.text.flatMap(e=>Gl(e.text).split(Fl)).filter(Boolean).map(()=>new e({trimText:!1})))}else{const e=Gl(this.text).split(Fl);this.lines=this.trimText?e.map(e=>e.trim()):e}}get font(){var e;return null!==(e=this.fontCache)&&void 0!==e||(this.fontCache=Bl(this)),this.fontCache}static measureBBox(t,i,n,o){if(Ua(t)){const{font:s,lineHeight:r,textAlign:a,textBaseline:l}=o,{width:d,height:c,lineMetrics:u}=_m(t,s),h=r?r*u.length:c,p=e.calcTopOffset(h,u[0],l),g=e.calcLeftOffset(d,a);return new Pb(i-g,n-p,d,h)}return e.computeBBox(Gl(t).split(Fl),i,n,o)}static computeBBox(t,i,n,o){const{font:s,lineHeight:r,textAlign:a,textBaseline:l}=o,{width:d,height:c,lineMetrics:u}=Wm(s).measureLines(t),h=r?r*u.length:c,p=e.calcTopOffset(h,u[0],l),g=e.calcLeftOffset(d,a);return new Pb(i-g,n-p,d,h)}static calcTopOffset(e,t,i){var n;switch(i){case"alphabetic":return null!==(n=null===t||void 0===t?void 0:t.ascent)&&void 0!==n?n:0;case"middle":return e/2;case"bottom":return e;default:return 0}}static calcLeftOffset(e,t){let i=0;switch(t){case"center":i=.5;break;case"right":case"end":i=1}return e*i}computeBBox(){var t;if(this.generateTextMap(),null!==(t=this.textMap)&&void 0!==t&&t.size){const t=Pb.merge(this.textMap.values());return t.x=this.x-e.calcLeftOffset(t.width,this.textAlign),t.y=this.y,t}const{x:i,y:n,lines:o,textBaseline:s,textAlign:r}=this,a=e.computeBBox(o,i,n,{font:this,textBaseline:s,textAlign:r});return null!=this.boxing&&a.grow(this.boxPadding),a}getTextMeasureBBox(){return this.computeBBox()}getPlainText(){return ed(this.text)}isPointInPath(e,t){var i,n;return null!==(i=null===(n=this.getBBox())||void 0===n?void 0:n.containsPoint(e,t))&&void 0!==i&&i}setScene(e){var t;null===(t=this.richText)||void 0===t||t.setScene(e),super.setScene(e)}generateTextMap(){var e,t;if(!Ua(this.text)||null!==(e=this.textMap)&&void 0!==e&&e.size)return;null!==(t=this.textMap)&&void 0!==t||(this.textMap=new Map);let i=0;const n=this.richText.children();for(const{width:o,height:s,ascent:r,segments:a}of _m(this.text,this).lineMetrics){let e=0;for(const t of a){const{color:s,textMetrics:a}=t,d=l(t,Jy),c=n.next().value;c.x=this.x-o/2+e,c.y=r+i,c.setProperties(p(p({},d),{},{fill:null!==s&&void 0!==s?s:this.fill}));const u=c.getBBox();this.textMap.set(c,u),e+=a.width}i+=s}}render(t){var i,n,o;const{ctx:s,stats:r}=t;if(!this.layerManager||!this.hasRenderableText())return r&&(r.nodesSkipped+=1),super.render(t);if(Ua(this.text)&&this.richText){this.generateTextMap();const e=this.richText.getBBox(),{width:o,height:r,lineMetrics:a}=_m(this.text,this);let l=0;switch(this.textAlign){case"left":case"start":l=o/2;break;case"right":case"end":l=o/-2}let d=this.y;switch(this.textBaseline){case"alphabetic":d-=null!==(i=null===(n=a[0])||void 0===n?void 0:n.ascent)&&void 0!==i?i:0;break;case"middle":d-=1===a.length?a[0].ascent+a[0].segments.reduce((e,t)=>Math.min(e,Wm(t).baselineDistance("middle")),0):r/2;break;case"bottom":d-=r}this.renderBoxing(t,e.clone().translate(l,d)),s.save(),s.translate(l,d),this.richText.opacity=this.opacity,this.richText.render(t),s.restore()}else this.renderText(t);if(e.debug.check()&&(null===(o=this.textMap)||void 0===o||!o.size)){const e=this.getBBox();s.strokeStyle="red",s.lineWidth=1,s.strokeRect(e.x,e.y,e.width,e.height)}super.render(t)}markDirty(e){var t;return null===(t=this.textMap)||void 0===t||t.clear(),super.markDirty(e)}renderText(e){const{fill:t,stroke:i,strokeWidth:n,font:o,textAlign:s}=this;if(!t&&(!i||!n)||!this.layerManager)return super.render(e);const{ctx:r}=e;r.font!==o&&(r.font=o),r.textAlign=s,this.renderBoxing(e),this.fillStroke(r)}renderBoxing(t,i){if(!this.boxing)return;const n=null!==i&&void 0!==i?i:e.computeBBox(this.lines,this.x,this.y,this);if(0===n.width||0===n.height)return;const{x:o,y:s,width:r,height:a}=n.grow(this.boxPadding);this.boxing.opacity=this.opacity,this.boxing.x=o,this.boxing.y=s,this.boxing.width=r,this.boxing.height=a,this.boxing.preRender(t),this.boxing.render(t)}executeFill(e){this.renderLines((t,i,n)=>e.fillText(t,i,n))}executeStroke(e){this.renderLines((t,i,n)=>e.strokeText(t,i,n))}renderLines(e){const{x:t,y:i,lines:n}=this;if(!Number.isFinite(t)||!Number.isFinite(i))return;const o=Wm(this),{lineMetrics:s}=o.measureLines(n),{textBaseline:r,lineHeight:a=o.lineHeight()}=this;let l=0;"top"===r?l=s[0].ascent:"middle"!==r&&"bottom"!==r||(l=a*(1-n.length),"middle"===r?(l/=2,l-=o.baselineDistance(r)):l-=s[0].descent);for(const d of s)e(d.text,t,i+l),l+=a}setFont(e){this.fontFamily=e.fontFamily,this.fontSize=e.fontSize,this.fontStyle=e.fontStyle,this.fontWeight=e.fontWeight}setAlign(e){this.textAlign=e.textAlign,this.textBaseline=e.textBaseline}setBoxing(e){var t,i;const n=null!==(t=e.border)&&void 0!==t&&t.enabled?null===(i=e.border)||void 0===i?void 0:i.stroke:void 0;var o,s,r,a,l,d,c,u;null!=e.fill||null!=n?(null!==(o=this.boxing)&&void 0!==o||(this.boxing=new pC({scene:this.scene})),this.boxing.fill=e.fill,this.boxing.fillOpacity=null!==(s=e.fillOpacity)&&void 0!==s?s:1,this.boxing.cornerRadius=null!==(r=e.cornerRadius)&&void 0!==r?r:0,this.boxing.stroke=n,this.boxing.strokeWidth=null!==(a=null===(l=e.border)||void 0===l?void 0:l.strokeWidth)&&void 0!==a?a:0,this.boxing.strokeOpacity=null!==(d=null===(c=e.border)||void 0===c?void 0:c.strokeOpacity)&&void 0!==d?d:1,this.boxPadding=null!==(u=e.padding)&&void 0!==u?u:0):this.boxing&&(this.boxing.destroy(),this.boxing=void 0)}getBoxingProperties(){var e;const{fill:t,fillOpacity:i,cornerRadius:n,stroke:o,strokeWidth:s,strokeOpacity:r}=null!==(e=this.boxing)&&void 0!==e?e:{};return{border:{enabled:null!=o,stroke:o,strokeWidth:s,strokeOpacity:r},cornerRadius:n,fill:t,fillOpacity:i,padding:this.boxPadding}}toSVG(){if(!this.visible||!this.hasRenderableText())return;const e=this.text;if(null==e)return;const t=Br("text");var i;if(Ua(e))for(const a of e){var n,o,s,r;const e=Br("tspan");Mx(e,{fontSize:null!==(n=a.fontSize)&&void 0!==n?n:this.fontSize,fontFamily:null!==(o=a.fontFamily)&&void 0!==o?o:this.fontFamily,fontWeight:null!==(s=a.fontWeight)&&void 0!==s?s:this.fontWeight,fontStyle:null!==(r=a.fontStyle)&&void 0!==r?r:this.fontStyle}),this.applySvgFillAttributes(e),e.textContent=Gl(a.text),t.append(e)}else this.applySvgFillAttributes(t),Mx(t,this),t.setAttribute("text-anchor",{center:"middle",left:"start",right:"end",start:"start",end:"end"}[null!==(i=this.textAlign)&&void 0!==i?i:"start"]),t.setAttribute("alignment-baseline",this.textBaseline),t.setAttribute("x",String(this.x)),t.setAttribute("y",String(this.y)),t.textContent=Gl(e);return{elements:[t]}}hasRenderableText(){const{text:e}=this;return null!=e&&(!!Ua(e)||""!==Gl(e))}};AC.className="Text",AC.debug=Cr.create(!0,"scene:text"),AC.defaultFontSize=10,Ab([_y()],AC.prototype,"x",2),Ab([_y()],AC.prototype,"y",2),Ab([Ky({changeCb:e=>e.onTextChange()})],AC.prototype,"text",2),Ab([_y({changeCb:e=>{e.fontCache=void 0}})],AC.prototype,"fontStyle",2),Ab([_y({changeCb:e=>{e.fontCache=void 0}})],AC.prototype,"fontWeight",2),Ab([_y({changeCb:e=>{e.fontCache=void 0}})],AC.prototype,"fontSize",2),Ab([_y({changeCb:e=>{e.fontCache=void 0}})],AC.prototype,"fontFamily",2),Ab([_y()],AC.prototype,"textAlign",2),Ab([_y()],AC.prototype,"textBaseline",2),Ab([_y()],AC.prototype,"lineHeight",2);var LC=AC,NC=class extends(Ex(LC)){},TC=class extends(Ex(Fx(LC))){},RC=class extends Ra{constructor(e){super(),this.ctx=e,this.rectNode=new pC,this.textNode=new LC,this.fill="white",this.node=this.createNode(),this.node.append([this.rectNode,this.textNode]),this.visible=!0,this.cleanup.register(e.scene.attachNode(this.node),e.eventsHub.on("layout:complete",e=>this.onLayoutComplete(e)))}createNode(){return new Gx({name:"background",zIndex:bp.CHART_BACKGROUND})}onLayoutComplete(e){const{width:t,height:i}=e.chart;this.rectNode.width=t,this.rectNode.height=i}};Ab([ru,ig("node","visible")],RC.prototype,"visible",2),Ab([ru,ig("rectNode","fill")],RC.prototype,"fill",2),Ab([ru],RC.prototype,"image",2),Ab([ru,ig("textNode")],RC.prototype,"text",2);var EC=class extends kh{constructor(){super(...arguments),this.id=xm(this),this.node=new NC({zIndex:1}).setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=Eh.SMALLER,this.fontFamily="sans-serif",this.wrapping="always",this.padding=0,this.layoutStyle="block",this.truncated=!1}registerInteraction(e,t){return e.eventsHub.on("layout:complete",()=>this.updateA11yText(e,t))}computeTextWrap(e,t){var i,n;const{text:o,padding:s,wrapping:r}=this,a=Math.min(null!==(i=this.maxWidth)&&void 0!==i?i:1/0,e)-2*s,l=null!==(n=this.maxHeight)&&void 0!==n?n:t-2*s,d={maxWidth:a,maxHeight:l,font:this,textWrap:r};if(!Number.isFinite(a)&&!Number.isFinite(l))return void(this.node.text=o);let c;Ua(o)?(c=Jm(o,d),this.truncated=c.some(Yl)):(c=Ym(Gl(o),d),this.truncated=Ul(c)),this.node.text=c}updateA11yText(e,t){const{proxyInteractionService:i}=e;if(!this.enabled||!this.text)return void this.destroyProxyText();const n=Bx.toCanvas(this.node);if(!n)return;const{id:o}=this;null==this.proxyText&&(this.proxyText=i.createProxyElement({type:"text",domManagerId:o,where:t}),this.proxyTextListeners=[this.proxyText.addListener("mousemove",t=>this.handleMouseMove(e,t)),this.proxyText.addListener("mouseleave",t=>this.handleMouseLeave(e,t))]);const s=ed(this.text);s!==this.lastProxyTextContent&&(this.proxyText.textContent=s,this.lastProxyTextContent=s);const{lastProxyBBox:r}=this;null!=r&&n.x===r.x&&n.y===r.y&&n.width===r.width&&n.height===r.height||(this.proxyText.setBounds(n),this.lastProxyBBox={x:n.x,y:n.y,width:n.width,height:n.height})}handleMouseMove(e,t){if(null!=t&&this.enabled&&this.truncated){const{x:i,y:n}=Bx.toCanvas(this.node),o=t.sourceEvent.offsetX+i,s=t.sourceEvent.offsetY+n;e.tooltipManager.updateTooltip(this.id,{canvasX:o,canvasY:s,showArrow:!1},[{type:"structured",title:ed(this.text)}])}}handleMouseLeave(e,t){e.tooltipManager.removeTooltip(this.id,void 0,!0)}destroy(){this.destroyProxyText()}destroyProxyText(){if(null!=this.proxyText){for(const t of null!==(e=this.proxyTextListeners)&&void 0!==e?e:[]){var e;t()}this.proxyTextListeners=void 0,this.proxyText.destroy(),this.proxyText=void 0,this.lastProxyTextContent=void 0,this.lastProxyBBox=void 0}}};EC.className="Caption",EC.SMALL_PADDING=10,Ab([ru,ig("node","visible")],EC.prototype,"enabled",2),Ab([ru,ig("node")],EC.prototype,"text",2),Ab([ru,ig("node")],EC.prototype,"textAlign",2),Ab([ru,ig("node")],EC.prototype,"fontStyle",2),Ab([ru,ig("node")],EC.prototype,"fontWeight",2),Ab([ru,ig("node")],EC.prototype,"fontSize",2),Ab([ru,ig("node")],EC.prototype,"fontFamily",2),Ab([ru,ig("node","fill")],EC.prototype,"color",2),Ab([ru],EC.prototype,"spacing",2),Ab([ru],EC.prototype,"maxWidth",2),Ab([ru],EC.prototype,"maxHeight",2),Ab([ru],EC.prototype,"wrapping",2),Ab([ru],EC.prototype,"padding",2),Ab([ru],EC.prototype,"layoutStyle",2);var PC=class extends Array{destroy(){for(const e of this)e.destroy();this.length=0}findById(e){return this.find(t=>t.id===e)}matches(e){return this.length===Object.keys(e).length&&Du(e,(e,t)=>{var i;return Qa(t)&&"type"in t&&(null===(i=this.findById(e))||void 0===i?void 0:i.type)===t.type})}getById(e){const t=this.findById(e);if(!t)throw new Error("Could not find axis by id [".concat(e,"]."));return t}},OC=class extends PC{get[_u.X](){return this.getById(_u.X)}get[_u.Y](){return this.getById(_u.Y)}perpendicular(e){return this[e.direction===_u.X?_u.Y:_u.X]}},FC=class extends PC{get[_u.Angle](){return this.getById(_u.Angle)}get[_u.Radius](){return this.getById(_u.Radius)}},zC=class{constructor(){this.title=new EC,this.subtitle=new EC,this.footnote=new EC}positionCaptions(e){let{layoutBox:t}=e;const{title:i,subtitle:n,footnote:o}=this,s=t.height/10;i.enabled&&(this.positionCaption("top",i,t,s),this.shrinkLayoutByCaption("top",i,t)),n.enabled&&(this.positionCaption("top",n,t,s),this.shrinkLayoutByCaption("top",n,t)),o.enabled&&(this.positionCaption("bottom",o,t,s),this.shrinkLayoutByCaption("bottom",o,t))}positionAbsoluteCaptions(e){const{title:t,subtitle:i,footnote:n}=this,{rect:o}=e.series;for(const s of[t,i,n])if("overlay"===s.layoutStyle)if("left"===s.textAlign)s.node.x=o.x+s.padding;else if("right"===s.textAlign){const e=s.node.getBBox();s.node.x=o.x+o.width-e.width-s.padding}}computeX(e,t){return"left"===e?t.x:"right"===e?t.x+t.width:t.x+t.width/2}positionCaption(e,t,i,n){if(!t.text)return;const{lineMetrics:o}=Ua(t.text)?_m(t.text,t):Wm(t).measureLines(Gl(t.text)),s=Math.max(o[0].height,n);t.node.x=this.computeX(t.textAlign,i)+t.padding,t.node.y=i.y+("top"===e?0:i.height)+t.padding,t.node.textBaseline=e,t.computeTextWrap(i.width,s)}shrinkLayoutByCaption(e,t,i){if("block"===t.layoutStyle){const n=t.node.getBBox().clone(),{spacing:o=0}=t;"bottom"===e&&Ua(t.text)&&(n.y-=n.height),i.shrink("top"===e?Math.ceil(n.y-i.y+n.height+o):Math.ceil(i.y+i.height-n.y+o),e)}}};Ab([ru],zC.prototype,"title",2),Ab([ru],zC.prototype,"subtitle",2),Ab([ru],zC.prototype,"footnote",2);var BC=["candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"],VC=class{constructor(e){this.chartService=e,this.mementoOriginatorKey="chartType"}createMemento(){var e;let t=null===(e=this.chartService.publicApi)||void 0===e||null===(e=e.getOptions())||void 0===e?void 0:e.chartType;return null!==t&&void 0!==t||(t="candlestick"),t}guardMemento(e){return null==e||BC.includes(e)}restoreMemento(e,t,i){var n;if(null==i)return;const o={chartType:i};null===(n=this.chartService.publicApi)||void 0===n||n.updateDelta(o).catch(e=>jr.error("error restoring state",e))}},GC="13.0.1",HC=Symbol("previous-memento-not-found"),jC=class{constructor(e){this.history=[],this.historyIndex=-1,this.originators=new Map,this.clearState=new Map,this.maxHistoryLength=100,this.debug=Cr.create(!0,"history"),this.cleanup=new Ta,this.cleanup.register(e.on("series:undo",this.undo.bind(this)),e.on("series:redo",this.redo.bind(this)))}destroy(){this.cleanup.flush()}addMementoOriginator(e){this.originators.set(e.mementoOriginatorKey,e),this.clearState.set(e.mementoOriginatorKey,e.createMemento()),this.debugEvent("History add originator:",e.mementoOriginatorKey)}clear(){this.debug("History clear:",Object.keys(this.originators)),this.history=[],this.historyIndex=-1;for(const[e,t]of this.originators.entries())this.clearState.set(e,t.createMemento())}record(e){this.historyIndex<this.history.length-1&&(this.history=this.history.slice(0,this.historyIndex+1)),this.history.length>this.maxHistoryLength&&(this.history=this.history.slice(-this.maxHistoryLength));const t=new Map;for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];for(const s of n){if(!this.originators.has(s.mementoOriginatorKey))throw new Error("Originator [".concat(s.mementoOriginatorKey,"] has not been added to the HistoryManager."));t.set(s.mementoOriginatorKey,s.createMemento())}this.history.push({label:e,mementos:t}),this.historyIndex=this.history.length-1,this.debugEvent("History record: [".concat(e,"]"))}undo(){const e=this.history[this.historyIndex];if(e){for(const t of e.mementos.keys()){const e=this.findPreviousMemento(t);if(e===HC)throw new Error("Could not find previous memento for [".concat(t,"]."));this.restoreMemento(t,e)}this.historyIndex-=1,this.debugEvent("History undo: [".concat(e.label,"]"))}}redo(){const e=this.history[this.historyIndex+1];if(e){for(const[t,i]of e.mementos.entries())this.restoreMemento(t,i);this.historyIndex+=1,this.debugEvent("History redo: [".concat(e.label,"]"))}}findPreviousMemento(e){for(let t=this.historyIndex-1;t>=0;t--)if(this.history[t].mementos.has(e))return this.history[t].mementos.get(e);return this.clearState.has(e)?this.clearState.get(e):HC}restoreMemento(e,t){var i;null===(i=this.originators.get(e))||void 0===i||i.restoreMemento(GC,GC,t)}debugEvent(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.debug(...t,this.history.map((e,t)=>t===this.historyIndex?"** ".concat(e.label," **"):e.label))}},WC=class{constructor(){this.caretaker=new Wu(GC),this.state=new Map}setState(e,t){yu(this.state.get(e.mementoOriginatorKey),t)||this.setStateAndRestore(e,t)}setStateAndRestore(e,t){this.state.set(e.mementoOriginatorKey,t),this.restoreState(e)}restoreState(e){const{caretaker:t,state:i}=this;if(!i.has(e.mementoOriginatorKey))return;const n=i.get(e.mementoOriginatorKey);t.restore({version:t.version,[e.mementoOriginatorKey]:n},e)}},_C=class{constructor(){this.cleanup=new Ta,this.destroyed=!1}destroy(){this.cleanup.flush(),this.destroyed=!0}},KC=class e{constructor(e,t,i){this.element=e,this.topTabGuard=t,this.bottomTabGuard=i,this.cleanup=new Ta,this.guardTabIndex=0,this.hasFocus=!1,this.initTabGuard(this.topTabGuard,!1),this.initTabGuard(this.bottomTabGuard,!0),this.element.addEventListener("focus",()=>this.onFocus(),{capture:!0}),this.element.addEventListener("blur",e=>this.onBlur(e),{capture:!0})}set tabIndex(e){this.guardTabIndex=e,0===this.guardTabIndex?this.setGuardIndices(void 0):this.hasFocus||this.setGuardIndices(this.guardTabIndex)}destroy(){this.cleanup.flush()}initTabGuard(e,t){this.cleanup.register(Gr(e,"focus",()=>this.onTab(e,t)))}setGuardIndices(e){const t=e;Zp(this.topTabGuard,"tabindex",t),Zp(this.bottomTabGuard,"tabindex",t)}onFocus(){this.hasFocus=!0,0!==this.guardTabIndex&&this.setGuardIndices(0)}onBlur(e){let{relatedTarget:t}=e;const{topTabGuard:i,bottomTabGuard:n}=this;this.hasFocus=!1,0!==this.guardTabIndex&&t!==i&&t!==n&&this.setGuardIndices(this.guardTabIndex)}onTab(e,t){if(0!==this.guardTabIndex){var i;let n;0===e.tabIndex?(n=this.findExitTarget(!t),this.setGuardIndices(this.guardTabIndex)):n=this.findEnterTarget(t),null===(i=n)||void 0===i||i.focus()}}static queryFocusable(e,t){const i=Pr();return Array.from(e.querySelectorAll(t)).filter(e=>{if(e instanceof HTMLElement){const t=i.getComputedStyle(e);return"none"!==t.display&&"none"!==t.visibility}return!1})}findEnterTarget(t){const i=e.queryFocusable(this.element,'[tabindex="0"]');return i[t?i.length-1:0]}findExitTarget(t){const i=e.queryFocusable(Er(),"[tabindex]").filter(e=>e.tabIndex>0).sort((e,t)=>e.tabIndex-t.tabIndex),{before:n,after:o}=e.findBeforeAndAfter(i,this.guardTabIndex);return t?n:o}static findBeforeAndAfter(e,t){let i,n,o=0,s=e.length-1;for(;o<=s;){const r=Math.floor((o+s)/2),a=e[r].tabIndex;if(a===t){i=e[r-1]||void 0,n=e[r+1]||void 0;break}a<t?(i=e[r],o=r+1):(n=e[r],s=r-1)}return{before:i,after:n}}},UC=class{constructor(e){var t;this.callback=e,this.devicePixelRatio=null!==(t=Pr("devicePixelRatio"))&&void 0!==t?t:1,this.devicePixelRatioMediaQuery=void 0,this.devicePixelRatioListener=e=>{var t;e.matches||(this.devicePixelRatio=null!==(t=Pr("devicePixelRatio"))&&void 0!==t?t:1,this.unregisterDevicePixelRatioListener(),this.registerDevicePixelRatioListener(),this.callback(this.pixelRatio))}}get pixelRatio(){return this.devicePixelRatio}observe(){this.registerDevicePixelRatioListener()}disconnect(){this.unregisterDevicePixelRatioListener()}unregisterDevicePixelRatioListener(){var e;null===(e=this.devicePixelRatioMediaQuery)||void 0===e||e.removeEventListener("change",this.devicePixelRatioListener),this.devicePixelRatioMediaQuery=void 0}registerDevicePixelRatioListener(){var e;const t=null===(e=Pr("matchMedia"))||void 0===e?void 0:e("(resolution: ".concat(this.pixelRatio,"dppx)"));null===t||void 0===t||t.addEventListener("change",this.devicePixelRatioListener),this.devicePixelRatioMediaQuery=t}},YC=class{constructor(){let e;var t;(this.elements=new Map,this.documentReady=!1,this.queuedObserveRequests=[],this.onLoad=()=>{this.documentReady=!0;for(const[e,t]of this.queuedObserveRequests)this.observe(e,t);this.queuedObserveRequests=[],this.observeWindow()},"undefined"!==typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver(e=>{for(const{target:t,contentRect:{width:i,height:n}}of e){const e=this.elements.get(t);this.checkSize(e,t,i,n)}})),this.pixelRatioObserver=new UC(()=>{clearTimeout(e),e=setTimeout(()=>this.checkPixelRatio(),0)}),this.documentReady="complete"===Er("readyState"),this.documentReady)?this.observeWindow():null===(t=Pr())||void 0===t||t.addEventListener("load",this.onLoad)}destroy(){var e,t,i;null===(e=Pr())||void 0===e||e.removeEventListener("load",this.onLoad),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),this.resizeObserver=void 0,null===(i=this.pixelRatioObserver)||void 0===i||i.disconnect(),this.pixelRatioObserver=void 0}observeWindow(){var e;null===(e=this.pixelRatioObserver)||void 0===e||e.observe()}checkPixelRatio(){var e,t;const i=null!==(e=null===(t=this.pixelRatioObserver)||void 0===t?void 0:t.pixelRatio)&&void 0!==e?e:1;for(const[n,o]of this.elements)if(null!=o.size&&o.size.pixelRatio!==i){const{width:e,height:t}=o.size;o.size={width:e,height:t,pixelRatio:i},o.cb(o.size,n)}}checkSize(e,t,i,n){var o,s;if(e&&(i!==(null===(o=e.size)||void 0===o?void 0:o.width)||n!==(null===(s=e.size)||void 0===s?void 0:s.height))){var r,a;const o=null!==(r=null===(a=this.pixelRatioObserver)||void 0===a?void 0:a.pixelRatio)&&void 0!==r?r:1;e.size={width:i,height:n,pixelRatio:o},e.cb(e.size,t)}}observe(e,t){if(!this.documentReady)return void this.queuedObserveRequests.push([e,t]);var i;this.elements.has(e)?this.removeFromQueue(e):null===(i=this.resizeObserver)||void 0===i||i.observe(e);const n={cb:t};this.elements.set(e,n)}unobserve(e){var t;null===(t=this.resizeObserver)||void 0===t||t.unobserve(e),this.elements.delete(e),this.removeFromQueue(e),this.elements.size||this.destroy()}removeFromQueue(e){this.queuedObserveRequests=this.queuedObserveRequests.filter(t=>{let[i]=t;return i!==e})}},$C=class extends Map{constructor(e,t){super(),this.defaultValue=e,this.defaultState=t}set(e,t){return this.delete(e),void 0!==t&&super.set(e,t),delete this.cachedState,delete this.cachedValue,this}delete(e){return delete this.cachedState,delete this.cachedValue,super.delete(e)}stateId(){var e,t;return null!==(e=this.cachedState)&&void 0!==e||(this.cachedState=null!==(t=Array.from(this.keys()).pop())&&void 0!==t?t:this.defaultState),this.cachedState}stateValue(){var e,t;return null!==(e=this.cachedValue)&&void 0!==e||(this.cachedValue=null!==(t=Array.from(this.values()).pop())&&void 0!==t?t:this.defaultValue),this.cachedValue}},ZC=["styles","canvas","canvas-background","canvas-center","canvas-container","canvas-overlay","canvas-proxy","series-area","tooltip-container"],XC=new Set(["styles","canvas-container","canvas","tooltip-container"]),qC="ag-charts-wrapper--safe-horizontal",QC="ag-charts-wrapper--safe-vertical",JC=new Map([["styles",{childElementType:"style"}],["canvas",{childElementType:"canvas"}],["canvas-proxy",{childElementType:"div"}],["canvas-overlay",{childElementType:"div"}],["canvas-center",{childElementType:"div"}],["series-area",{childElementType:"div"}],["tooltip-container",{childElementType:"div"}]]);var eS={x:0,y:0,width:0,height:0,top:0,bottom:0,left:0,right:0,toJSON:()=>eS};function tS(e,t){const i=zr("div");return i.className="ag-charts-tab-guard",e.insertAdjacentElement(t,i),i}var iS=class e extends _C{constructor(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"normal";super(),this.eventsHub=e,this.chart=t,this.styleContainer=n,this.mode=o,this.anchorName="--".concat(xm(this)),this.styles=new Map,this.pendingContainer=void 0,this.container=void 0,this.documentRoot=void 0,this.initiallyConnected=void 0,this.containerSize=void 0,this.sizeMonitor=new YC,this.cursorState=new $C("default"),this.minWidth=0,this.minHeight=0,this.element=this.initDOM(),this.rootElements=this.initRootElements(),this.rootElements.canvas.element.style.setProperty("anchor-name",this.anchorName);let s=!1;if(this.observer=function(e,t){if("undefined"===typeof IntersectionObserver)return;const i=new IntersectionObserver(i=>{for(const n of i)n.target===e&&t(n.intersectionRatio)},{root:e});return i.observe(e),i}(this.element,e=>{0!==e||s||this.eventsHub.emit("dom:hidden",null),s=0===e}),this.setSizeOptions(),this.updateContainerSize(),this.addStyles("ag-charts-community",'.ag-charts-wrapper,.ag-charts-wrapper:after,.ag-charts-wrapper:before,.ag-charts-wrapper *,.ag-charts-wrapper *:after,.ag-charts-wrapper *:before{box-sizing:border-box}.ag-charts-wrapper{--align-items: center;--justify-content: center;position:relative;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.ag-charts-wrapper--safe-horizontal{--justify-content: flex-start}.ag-charts-wrapper--safe-vertical{--align-items: flex-start}.ag-charts-tab-guard{width:0%;height:0%;position:absolute;pointer-events:none}.ag-charts-canvas-background{position:absolute}.ag-charts-canvas-center{width:100%;height:100%;position:absolute;touch-action:auto;pointer-events:auto;display:flex;align-items:var(--align-items);justify-content:var(--justify-content)}.ag-charts-canvas-container,.ag-charts-canvas{position:relative;user-select:none;-webkit-user-select:none}.ag-charts-canvas-container>*,.ag-charts-canvas>*{pointer-events:none}.ag-charts-canvas canvas{display:block}.ag-charts-series-area{outline:none;pointer-events:auto;position:absolute}.ag-charts-swapchain{top:0;left:0;outline:none;opacity:0;pointer-events:none;position:absolute;width:100%;height:100%}.ag-charts-swapchain:focus-visible{opacity:1}.ag-charts-canvas-proxy,.ag-charts-canvas-overlay{inset:0;pointer-events:none;position:absolute;user-select:none;-webkit-user-select:none}.ag-charts-canvas-overlay>*{position:absolute;pointer-events:auto}.ag-charts-theme-default,.ag-charts-theme-default-dark{--ag-charts-accent-color: #2196f3;--ag-charts-background-color: #fff;--ag-charts-border-color: #dddddd;--ag-charts-border-radius: 4px;--ag-charts-chart-background-color: #fff;--ag-charts-chart-padding: 20px;--ag-charts-focus-shadow: 0 0 0 3px #2196f3;--ag-charts-foreground-color: #181d1f;--ag-charts-font-family: Verdana, sans-serif;--ag-charts-font-size: 12px;--ag-charts-font-weight: 400;--ag-charts-popup-shadow: 0 0 16px rgba(0, 0, 0, .15);--ag-charts-subtle-text-color: #8c8c8c;--ag-charts-text-color: #181d1f;--ag-charts-chrome-background-color: #fafafa;--ag-charts-chrome-font-family: Verdana, sans-serif;--ag-charts-chrome-font-size: 12px;--ag-charts-chrome-font-weight: 400;--ag-charts-chrome-subtle-text-color: #8c8c8c;--ag-charts-chrome-text-color: #181d1f;--ag-charts-button-background-color: #fff;--ag-charts-button-border: 1px solid #dddddd;--ag-charts-button-font-weight: normal;--ag-charts-button-text-color: inherit;--ag-charts-input-background-color: #fff;--ag-charts-input-border: 1px solid #dddddd;--ag-charts-input-text-color: #181d1f;--ag-charts-menu-background-color: #fafafa;--ag-charts-menu-border: 1px solid #dddddd;--ag-charts-menu-text-color: #181d1f;--ag-charts-panel-background-color: #fafafa;--ag-charts-panel-text-color: #181d1f;--ag-charts-tooltip-background-color: #fafafa;--ag-charts-tooltip-border: 1px solid #dddddd;--ag-charts-tooltip-text-color: #181d1f;--ag-charts-tooltip-subtle-text-color: #8c8c8c;--ag-charts-crosshair-label-background-color: #fafafa;--ag-charts-crosshair-label-text-color: #181d1f;--ag-charts-spacing: 4px;--ag-charts-icon-size: 16px;--ag-charts-focus-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-accent-color) 12%);--ag-charts-input-border-radius: var(--ag-charts-border-radius);--ag-charts-input-focus-border-color: var(--ag-charts-accent-color);--ag-charts-input-focus-text-color: var(--ag-charts-accent-color);--ag-charts-input-disabled-background-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-foreground-color) 6% );--ag-charts-input-disabled-border-color: var(--ag-charts-border-color);--ag-charts-input-disabled-text-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-input-text-color) 50% );--ag-charts-input-placeholder-text-color: color-mix( in srgb, var(--ag-charts-input-background-color), var(--ag-charts-input-text-color) 60% );--ag-charts-button-border-radius: var(--ag-charts-border-radius);--ag-charts-button-focus-background-color: color-mix( in srgb, var(--ag-charts-button-background-color), var(--ag-charts-accent-color) 12% );--ag-charts-button-focus-border-color: var(--ag-charts-accent-color);--ag-charts-button-focus-text-color: var(--ag-charts-accent-color);--ag-charts-button-disabled-background-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-foreground-color) 6% );--ag-charts-button-disabled-border-color: var(--ag-charts-border-color);--ag-charts-button-disabled-text-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-chrome-text-color) 50% );--ag-charts-checkbox-background-color: color-mix( in srgb, var(--ag-charts-background-color), var(--ag-charts-foreground-color) 35% );--ag-charts-checkbox-checked-background-color: var(--ag-charts-accent-color);--ag-charts-tooltip-border-radius: var(--ag-charts-border-radius);--ag-charts-menu-border-radius: var(--ag-charts-border-radius);--ag-charts-chrome-font-size-small: var(--ag-charts-chrome-font-size);--ag-charts-chrome-font-size-medium: calc(var(--ag-charts-chrome-font-size) * (13 / 12));--ag-charts-chrome-font-size-large: calc(var(--ag-charts-chrome-font-size) * (14 / 12));--ag-charts-border: 1px solid var(--ag-charts-border-color);--ag-charts-focus-border: 1px solid var(--ag-charts-accent-color);--ag-charts-focus-border-shadow: 0 0 0 3px color-mix(in srgb, transparent, var(--ag-charts-accent-color) 20%);--ag-charts-layer-menu: 6;--ag-charts-layer-ui-overlay: 5;--ag-charts-layer-tooltip: 4;--ag-charts-layer-toolbar: 3;--ag-charts-layer-crosshair: 2;--ag-charts-layer-annotations: 1}.ag-charts-theme-default-dark{--ag-charts-focus-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-accent-color) 22%)}.ag-chart-canvas-wrapper .ag-charts-theme-default{--ag-charts-border-radius: var(--ag-border-radius, 4px);--ag-charts-border: var(--ag-borders-critical, solid 1px) var(--ag-charts-border-color);--ag-charts-focus-shadow: var(--ag-focus-shadow, 0 0 0 3px var(--ag-charts-accent-color));--ag-charts-focus-border-shadow: var( --ag-focus-shadow, 0 0 0 3px color-mix(in srgb, transparent, var(--ag-charts-accent-color) 20%) )}.ag-charts-icon{display:block;width:20px;height:20px;speak:none;speak:never;mask:var(--icon) center / contain no-repeat;background-color:currentColor;transition:background-color .25s ease-in-out}.ag-charts-icon-align-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNyAxMGg2djFIN3pNNCA3aDEydjFINHptMSA2aDEwdjFINXoiLz48L3N2Zz4=)}.ag-charts-icon-align-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNCAxMGg2djFINHptMC0zaDEydjFINHptMCA2aDEwdjFINHoiLz48L3N2Zz4=)}.ag-charts-icon-align-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTAgMTBoNnYxaC02ek00IDdoMTJ2MUg0em0yIDZoMTB2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-arrow-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1LjI5MyA0LjVIMTIuNXYtMUgxN3Y0aC0xVjUuMjA3bC05LjY0NiA5LjY0Ny0uNzA4LS43MDh6IiBmaWxsPSIjMDAwIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDE2YTIuNSAyLjUgMCAxIDEtNSAwIDIuNSAyLjUgMCAwIDEgNSAwbS0yLjUgMS41YTEuNSAxLjUgMCAxIDAgMC0zIDEuNSAxLjUgMCAwIDAgMCAzIiBmaWxsPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-arrow-down-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02IDhMMS41IDhMMTAgMThMMTguNSA4TDE0IDhMMTQgM0w2IDNMNiA4Wk03IDRMNyA5SDMuNjYyNDRMMTAgMTYuNDU2TDE2LjMzNzYgOUwxMyA5TDEzIDRMNyA0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-arrow-up-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNCAxMkgxOC41TDEwIDJMMS41IDEySDZMNi4wMDAwMiAxN0gxNFYxMlpNMTMgMTZWMTFIMTYuMzM3NkwxMCAzLjU0NDA1TDMuNjYyNDQgMTFIN0w3LjAwMDAyIDE2SDEzWiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-callout-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtNC41MTRhMjYgMjYgMCAwIDAtMi4wMTcgMS41NGwtLjMxNC4yNmMtLjU1LjQ1Ny0xLjExNS45MjYtMS43NiAxLjQtLjY2OS40OTEtMS41NjItLjAxMi0xLjU2Mi0uOFYxNEg0LjVBMS41IDEuNSAwIDAgMSAzIDEyLjV6TTQuNSA0YS41LjUgMCAwIDAtLjUuNXY4YS41LjUgMCAwIDAgLjUuNWgxLjgzM3YzLjM3MmEzNiAzNiAwIDAgMCAxLjY3OC0xLjMzOGwuMzItLjI2NWEyNiAyNiAwIDAgMSAyLjIyNS0xLjY4NWwuMTI2LS4wODRIMTUuNWEuNS41IDAgMCAwIC41LS41di04YS41LjUgMCAwIDAtLjUtLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyAxdjNoMnYxMkg3djNINnYtM0g0VjRoMlYxek01IDVoM3YxMEg1ek0xMSAxNFY2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6bTEtN2gzdjZoLTN6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-close{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtNSA1IDEwIDEwTTUgMTUgMTUgNSIgc3Ryb2tlPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-comment-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy41MTMgMy45OTVhNi41IDYuNSAwIDAgMSA2LjA5OCAxMS40MWMtLjU4OC4zOTMtMS4yMTcuNTM2LTEuODI5LjU4NWExMyAxMyAwIDAgMS0xLjI3LjAxN0EyNyAyNyAwIDAgMCAxMCAxNkg0LjVhLjUuNSAwIDAgMS0uNS0uNVYxMHEwLS4yNDctLjAwNy0uNTEzYy0uMDA4LS40MTYtLjAxNi0uODU3LjAxNy0xLjI2OS4wNS0uNjEyLjE5Mi0xLjI0LjU4NS0xLjgzYTYuNSA2LjUgMCAwIDEgMi45MTgtMi4zOTNtMy41Ni42MWE1LjUgNS41IDAgMCAwLTUuNjQ2IDIuMzRjLS4yNjYuMzk3LS4zNzkuODQyLS40MiAxLjM1NC0uMDMuMzYtLjAyMi43MTgtLjAxNSAxLjEwOFE1IDkuNjg5IDUgMTB2NWg1cS4zMTEuMDAxLjU5My4wMDhjLjM5LjAwNy43NDcuMDE1IDEuMTA4LS4wMTUuNTEyLS4wNDEuOTU3LS4xNTQgMS4zNTUtLjQyYTUuNSA1LjUgMCAwIDAtMS45ODMtOS45NjciIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-crosshair-add-line{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-date-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMiAyaDF2MTZIMnptMTUgMGgxdjE2aC0xeiIgZmlsbD0iIzE4MUQxRiIvPjxwYXRoIGQ9Ik0xMy4xNTcgMTFINXYtMWg3Ljc5M0wxMSA4LjIwN2wuNzA3LS43MDcgMy4xODIgMy4xODItMy4xODIgMy4xODItLjcwNy0uNzA3eiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-date-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMyAySDJ2MTZoMXptMy41MDcgNC44OUw4LjUgNC44OTVWMTBINXYxaDMuNXY3aDF2LTdoNS4wODhsLTEuOTU3IDEuOTU3LjcwNy43MDcgMy4xODItMy4xODJMMTMuMzM4IDcuM2wtLjcwNy43MDdMMTQuNjI0IDEwSDkuNVY0LjkzMmwxLjk1NyAxLjk1Ny43MDctLjcwN0w4Ljk4MiAzIDUuOCA2LjE4MnoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-delete{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTguNDk2IDguOTk2QS41LjUgMCAwIDEgOSA5LjQ5MnY0YS41LjUgMCAxIDEtMSAuMDA4di00YS41LjUgMCAwIDEgLjQ5Ni0uNTA0TTEyIDkuNWEuNS41IDAgMCAwLTEgMHY0YS41LjUgMCAwIDAgMSAweiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYgNVYzLjVBMi41IDIuNSAwIDAgMSA4LjUgMWgzQTIuNSAyLjUgMCAwIDEgMTQgMy41VjVoMi44MzNhLjUuNSAwIDAgMSAwIDFIMTV2MTAuMjVjMCAuNDE1LS4wNjYuODYzLS4zIDEuMjIxLS4yNTcuMzk0LS42NzIuNjEyLTEuMi42MTJoLTdjLS41MjggMC0uOTQzLS4yMTgtMS4yLS42MTItLjIzNC0uMzU4LS4zLS44MDYtLjMtMS4yMjFWNkgzLjMzM2EuNS41IDAgMCAxIDAtMXptMS0xLjVBMS41IDEuNSAwIDAgMSA4LjUgMmgzQTEuNSAxLjUgMCAwIDEgMTMgMy41VjVIN3pNNiAxNi4yNVY2aDh2MTAuMjVjMCAuMzM1LS4wNTkuNTU0LS4xMzguNjc1LS4wNTUuMDg1LS4xNC4xNTgtLjM2Mi4xNThoLTdjLS4yMjIgMC0uMzA3LS4wNzMtLjM2Mi0uMTU4LS4wOC0uMTIxLS4xMzgtLjM0LS4xMzgtLjY3NSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-disjoint-channel,.ag-charts-icon-disjoint-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTkuMDI4IDE3LjQ2YTIuMjUgMi4yNSAwIDAgMC00LjA5Mi0xLjg1bC05LjUxMS0yLjM3OGEyLjI1IDIuMjUgMCAxIDAtLjIyNS45NzRsOS40NzUgMi4zNjlhMi4yNTEgMi4yNTEgMCAwIDAgNC4zNTMuODg2bS0xLjY2Mi0xLjk2NWExLjI1IDEuMjUgMCAxIDEtLjg4NSAyLjMzOCAxLjI1IDEuMjUgMCAwIDEgLjg4NS0yLjMzOE00LjM0MyAxMy42NjlhMS4yNSAxLjI1IDAgMSAwLTIuMzM4LS44ODUgMS4yNSAxLjI1IDAgMCAwIDIuMzM4Ljg4NU0zLjk3IDguNzY5YTIuMjUgMi4yNSAwIDAgMCAxLjQ1NS0yLjExbDkuNTExLTIuMzc4YTIuMjUgMi4yNSAwIDEgMC0uMjYtLjk2NUw1LjIgNS42ODVhMi4yNSAyLjI1IDAgMSAwLTEuMjMgMy4wODRtLjM3My0yLjU0N2ExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjc1LTMuNDM4YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-drag-handle{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjcuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjxjaXJjbGUgY3g9IjEzLjc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iMTMuNzUiIGN5PSIxMS43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjExLjc1IiByPSIuNzUiIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjUiLz48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iMTEuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjwvc3ZnPg==)}.ag-charts-icon-fibonacci-retracement-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA1aDEydjFIMnoiLz48Y2lyY2xlIGN4PSIxNS43NSIgY3k9IjUuNSIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC4yNSIgY3k9IjE0LjUiIHI9IjEuNzUiIHN0cm9rZT0iIzAwMCIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik0xOCAxNUg2di0xaDEyem0wLTQuNUgydi0xaDE2eiIvPjwvc3ZnPg==)}.ag-charts-icon-fibonacci-retracement-trend-based-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJtNC45OTYgMTIuNjc0IDMuMjkxLTUuNzQzLjg2OC40OTctMy4yOTEgNS43NDN6Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjUuNSIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC4zNTEiIGN5PSIxNC41IiByPSIxLjc1IiBzdHJva2U9IiMwMDAiLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTggNmgtN1Y1aDd6bTAgNC41aC03di0xaDd6bTAgNC41SDZ2LTFoMTJ6Ii8+PC9zdmc+)}.ag-charts-icon-fill-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtOC4wNzEgNC4wNi0uOTI0LS45MjQuNzA3LS43MDcgNy4yODggNy4yODgtNC45NSA0Ljk1YTMuNSAzLjUgMCAwIDEtNC45NSAwbC0xLjQxNC0xLjQxNGEzLjUgMy41IDAgMCAxIDAtNC45NXptLjcwNy43MDhMNC41MzYgOS4wMWEyLjUgMi41IDAgMCAwIDAgMy41MzZMNS45NSAxMy45NmEyLjUgMi41IDAgMCAwIDMuNTM1IDBsNC4yNDMtNC4yNDN6bTYuOSA3LjIwMi0uMzQ1LjM2My0uMzQ0LS4zNjNhLjUuNSAwIDAgMSAuNjg4IDBtLS4zNDUgMS4wOGE4IDggMCAwIDAtLjI4LjMyMyA0LjMgNC4zIDAgMCAwLS40MDkuNTgyYy0uMTEzLjIwMS0uMTQ0LjMyNi0uMTQ0LjM3OGEuODMzLjgzMyAwIDAgMCAxLjY2NyAwYzAtLjA1Mi0uMDMxLS4xNzctLjE0NC0uMzc4YTQuMyA0LjMgMCAwIDAtLjQxLS41ODIgOCA4IDAgMCAwLS4yOC0uMzIybS0uMzQ0LTEuMDguMzQ0LjM2My4zNDQtLjM2My4wMDIuMDAyLjAwNC4wMDQuMDEzLjAxMmE2IDYgMCAwIDEgLjIwNi4yMDhjLjEzMS4xMzYuMzA4LjMyNy40ODUuNTQ1LjE3Ni4yMTUuMzYzLjQ2Ny41MDcuNzI0LjEzNy4yNDMuMjczLjU1My4yNzMuODY4YTEuODMzIDEuODMzIDAgMSAxLTMuNjY3IDBjMC0uMzE1LjEzNi0uNjI1LjI3My0uODY4LjE0NC0uMjU3LjMzLS41MDkuNTA3LS43MjRhOSA5IDAgMCAxIC42NDUtLjcwOGwuMDQ2LS4wNDUuMDEzLS4wMTIuMDA0LS4wMDR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-hollow-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1vcGFjaXR5PSIuMTUiIGQ9Ik01IDVoM3YxMEg1eiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTcgMXYzaDJ2MTJIN3YzSDZ2LTNINFY0aDJWMXpNNSA1aDN2MTBINXptNyAyaDN2NmgtM3ptLTEgN1Y2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-horizontal-line,.ag-charts-icon-horizontal-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNLjUgOS41aDcuMzA2YTIuMjUgMi4yNSAwIDAgMSA0LjM4OCAwSDE5LjV2MWgtNy4zMDZhMi4yNSAyLjI1IDAgMCAxLTQuMzg4IDBILjV6bTkuNSAxLjc1YTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-line-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTQuMjQyIDIuNzIyYy0uNjEyIDAtMS4yLjI0My0xLjYzMi42NzVsLTEuMzQzIDEuMzQ0YS41LjUgMCAwIDAtLjExMi4xMTJMNC4wNSAxMS45NTljLS4yMDcuMjA3LS4zNi40Ni0uNDQ2Ljc0di4wMDFsLS42OSAyLjc2N3YuMDAyYS44Mi44MiAwIDAgMCAxLjAyMiAxLjAyMWguMDAybDIuNjM0LS44MjJjLjI4LS4wODUuNTM0LS4yMzcuNzQtLjQ0M2w3LjEwNy03LjEwOGEuNS41IDAgMCAwIC4xMTItLjExMmwxLjM0My0xLjM0M2EyLjMwOCAyLjMwOCAwIDAgMC0xLjYzMi0zLjk0TTE0LjEyMiA3bDEuMDQ0LTEuMDQ1YTEuMzA4IDEuMzA4IDAgMSAwLTEuODQ5LTEuODVMMTIuMjcxIDUuMTV6bS0yLjU1OC0xLjE0Mi02LjgwNyA2LjgwOWEuOC44IDAgMCAwLS4xOTYuMzI1bC0uNzUgMi40NjggMi40Ny0uNzQ5YS44LjggMCAwIDAgLjMyNS0uMTk0bDYuODA4LTYuODF6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTcuMzYyIDQuODczLTQuNTk0IDYuNjU0LTQuODUtMy4zMTctNC4yNTEgNi45NzctLjg1NC0uNTJMNy42MTIgNi43OWw0Ljg5OSAzLjM1IDQuMDI4LTUuODM2eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-line-style-dashed{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDR2MUgyem0xMiAwaDR2MWgtNHpNOCA5aDR2MUg4eiIvPjwvc3ZnPg==)}.ag-charts-icon-line-style-dotted{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIyLjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSI4LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTAuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSIxMi41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjE0LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-line-style-solid{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDE2djFIMnoiLz48L3N2Zz4=)}.ag-charts-icon-line-with-markers-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTk4IDQuODg4LTMuNTU2IDQuOTE4YTIuMjUgMi4yNSAwIDEgMS0zLjg2Ni43NWwtMS40MzItLjlhMi4yNCAyLjI0IDAgMCAxLTIuMDA5LjQzNWwtMy44MjggNi40MjgtLjg2LS41MTJMNi40NSA5LjYyM2EyLjI1IDIuMjUgMCAxIDEgMy41MS0uNzYxbDEuMzI5LjgzNWEyLjI0IDIuMjQgMCAwIDEgMi41NTctLjQ5N2wzLjU0Mi00Ljg5OHptLTQuOTYgNS4xNTNhMS4yNSAxLjI1IDAgMSAwLS42NCAyLjQxOSAxLjI1IDEuMjUgMCAwIDAgLjY0LTIuNDE5TTkuMSA4LjMyMXEuMDY2LS4xOTIuMDY3LS40MDRhMS4yNSAxLjI1IDAgMSAwLS4wNjcuNDA0IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-lock,.ag-charts-icon-locked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuMjA3IDMuNzY0YTIuODk0IDIuODk0IDAgMCAwLTIuODk1IDIuODk0VjloNS43ODlWNi42NThhMi44OTQgMi44OTQgMCAwIDAtMi44OTUtMi44OTRNMTQuMSA5VjYuNjU4YTMuODk0IDMuODk0IDAgMSAwLTcuNzg5IDB2Mi4zNDlBMi41IDIuNSAwIDAgMCA0IDExLjV2M0EyLjUgMi41IDAgMCAwIDYuNSAxN2g4YTIuNSAyLjUgMCAwIDAgMi41LTIuNXYtM0EyLjUgMi41IDAgMCAwIDE0LjUgOXpNNi41IDEwQTEuNSAxLjUgMCAwIDAgNSAxMS41djNBMS41IDEuNSAwIDAgMCA2LjUgMTZoOGExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTNhMS41IDEuNSAwIDAgMC0xLjUtMS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-measurer-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibTQuNDYxIDEyLjcxIDEuNTMyLTEuNTMxIDEuNDE0IDEuNDE0LjcwNy0uNzA3TDYuNyAxMC40NzJsMS41MzItMS41MzMgMiAyIC43MDctLjcwNy0yLTIgNi4wMS02LjAxIDIuODMgMi44MjhMNS4wNSAxNy43NzggMi4yMjIgMTQuOTVsMS41MzItMS41MzIgMS40MTQgMS40MTQuNzA3LS43MDd6TS44MDggMTQuOTVsLjcwNy0uNzA3TDE0LjI0MyAxLjUxNWwuNzA3LS43MDcuNzA3LjcwNyAyLjgyOCAyLjgyOC43MDcuNzA3LS43MDcuNzA3TDUuNzU3IDE4LjQ4NWwtLjcwNy43MDctLjcwNy0uNzA3LTIuODI4LTIuODI4em0xMS4wNzgtNi44MzVMMTAuNDcgNi43bC43MDctLjcwNyAxLjQxNSAxLjQxNHptLjgyNC0zLjY1NCAxIDEgLjcwOC0uNzA3LTEtMXoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-note-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtMy4yMWwtMS40NjkgMi41N2ExIDEgMCAwIDEtMS42ODIuMDg1TDcuMjQzIDE0SDQuNUExLjUgMS41IDAgMCAxIDMgMTIuNXpNNC41IDRhLjUuNSAwIDAgMC0uNS41djhhLjUuNSAwIDAgMCAuNS41aDMuMjU3bDIuMTk2IDMuMDc0TDExLjcxIDEzaDMuNzlhLjUuNSAwIDAgMCAuNS0uNXYtOGEuNS41IDAgMCAwLS41LS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNi41IDYuNUEuNS41IDAgMCAxIDcgNmg2YS41LjUgMCAwIDEgMCAxSDdhLjUuNSAwIDAgMS0uNS0uNU02LjUgOS41QS41LjUgMCAwIDEgNyA5aDZhLjUuNSAwIDAgMSAwIDFIN2EuNS41IDAgMCAxLS41LS41IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-ohlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTEzIDExaC0zdi0xaDNWM2gxdjJoNHYxaC00djExaC0xek02IDE3di0yaDN2LTFINlY0SDV2MUgydjFoM3YxMXoiLz48L3N2Zz4=)}.ag-charts-icon-pan-end{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0ibTYuNjQ2IDEzLjgxMy0uMzUzLjM1NC43MDcuNzA3LjM1NC0uMzU0ek0xMS4xNjYgMTBsLjM1NC4zNTQuMzU0LS4zNTQtLjM1NC0uMzU0ek03LjM1NSA1LjQ4IDcgNS4xMjZsLS43MDcuNzA3LjM1My4zNTR6bTAgOS4wNCA0LjE2Ni00LjE2Ni0uNzA3LS43MDgtNC4xNjcgNC4xNjd6bTQuMTY2LTQuODc0TDcuMzU0IDUuNDhsLS43MDguNzA3IDQuMTY3IDQuMTY3ek0xMy4wODMgNXYxMGgxVjV6Ii8+PC9zdmc+)}.ag-charts-icon-pan-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuNzkgNS44MzMgOC42MjUgMTBsNC4xNjYgNC4xNjctLjcwNy43MDdMNy4yMSAxMGw0Ljg3My00Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy4yMSAxNC4xNjcgMTEuMzc2IDEwIDcuMjEgNS44MzNsLjcwNy0uNzA3TDEyLjc5IDEwbC00Ljg3MyA0Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-start{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgNXYxMGgxVjV6TTkuNjI0IDEwbDQuMTY2LTQuMTY3LS43MDctLjcwN0w4LjIxIDEwbDQuODc0IDQuODc0LjcwNy0uNzA3eiIvPjwvc3ZnPg==)}.ag-charts-icon-parallel-channel,.ag-charts-icon-parallel-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTcuNzIgNS4zMzFBMi4yNSAyLjI1IDAgMSAwIDE0LjcwNSAzLjZsLTkuNDkgNC41NjJhMi4yNSAyLjI1IDAgMSAwIC4yMDkgMS4wMWw5LjY2Mi00LjY0NmEyLjI1IDIuMjUgMCAwIDAgMi42MzQuODA1bS4zNzMtMi41NDdhMS4yNSAxLjI1IDAgMSAxLTIuMzM4Ljg4NSAxLjI1IDEuMjUgMCAwIDEgMi4zMzgtLjg4NU00LjM0MyA4LjY3YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODVNNS4zMDcgMTYuNzI4YTIuMjUgMi4yNSAwIDEgMS0uNTI1LS44NThsOS45MjMtNC43N2EyLjI1IDIuMjUgMCAxIDEgLjM4MS45MjZ6bS0uOTY0LjI3NGExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjAyMy01LjEwNmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-position-bottom{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzem0zLTNoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgMTNoOHYxSDZ6Ii8+PC9zdmc+)}.ag-charts-icon-position-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMyAxMGgxNHYxSDN6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDdoOHYxSDZ6bTAgNmg4djFINnoiLz48L3N2Zz4=)}.ag-charts-icon-position-top{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzeiIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik02IDdoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDEzaDh2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-price-label-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNC41IDNBMS41IDEuNSAwIDAgMCAzIDQuNVYxM2ExLjUgMS41IDAgMCAwIDEuNSAxLjVoLjgzM3YuMDU3Yy4yNDItLjI5OS41OTctLjUwMyAxLS41NDhWMTMuNUg0LjVBLjUuNSAwIDAgMSA0IDEzVjQuNWEuNS41IDAgMCAxIC41LS41aDExYS41LjUgMCAwIDEgLjUuNXY4YS41LjUgMCAwIDEtLjUuNWgtNC44MThsLS4xMjYuMDg0YTI2IDI2IDAgMCAwLTIuMjI1IDEuNjg1bC0uMzIuMjY1LS4wNjguMDU2YTEuNSAxLjUgMCAwIDEtMi42MDkgMS4zNTRjLjAzMy43NjMuOTA1IDEuMjM4IDEuNTYuNzU2LjY0Ni0uNDc0IDEuMjEtLjk0MyAxLjc2MS0xLjRsLjMxMy0uMjZBMjYgMjYgMCAwIDEgMTAuOTg2IDE0SDE1LjVhMS41IDEuNSAwIDAgMCAxLjUtMS41di04QTEuNSAxLjUgMCAwIDAgMTUuNSAzeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOC43MTYgMTQuODE1YTIuMjUgMi4yNSAwIDEgMS00LjIxIDEuNTkzIDIuMjUgMi4yNSAwIDAgMSA0LjIxLTEuNTkzbS0xLjY2MiAxLjk2NmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS41IDYuMjI4IDcuMTY3IDguMzc2IDYuNSA3Ljc2MiA5LjUgNWwzIDIuNzYyLS42NjcuNjE0eiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yIDE4di0xaDE2djF6TTIgM1YyaDE2djF6IiBmaWxsPSIjMTgxRDFGIi8+PC9zdmc+)}.ag-charts-icon-reset{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuMDQgNC40NDVhNS44MSA1LjgxIDAgMCAwLTcuMjU3IDIuNDUzLjUuNSAwIDAgMS0uODY1LS41MDJBNi44MSA2LjgxIDAgMSAxIDMgOS44MTNhLjUuNSAwIDAgMSAxIDAgNS44MSA1LjgxIDAgMSAwIDguMDQtNS4zNjgiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTQuMjg5IDMuMDAyYS41LjUgMCAwIDEgLjUuNXYyLjY1NWgyLjY1NWEuNS41IDAgMCAxIDAgMUg0LjI5YS41LjUgMCAwIDEtLjUtLjVWMy41MDJhLjUuNSAwIDAgMSAuNS0uNSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-settings{--icon: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkIj48cGF0aCBkPSJNMTAgMTNhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2bTAtMWEyIDIgMCAxIDEtLjAwMS0zLjk5OUEyIDIgMCAwIDEgMTAgMTIiLz48cGF0aCBkPSJNMi4zMSAxNC4zNDVjLS44MTctMS40OTEuMDI3LTIuNDk5LjQ3NC0yLjg2NS41MzEtLjQzNC45NjktLjM2NS45NzItMS40OC0uMDAzLTEuMTE1LS40NDEtMS4wNDYtLjk3Mi0xLjQ4MS0uNDU0LS4zNzEtMS4zMTctMS40MDUtLjQzNC0yLjkzNmwuMDA1LS4wMDljLjg4NC0xLjUyIDIuMjA3LTEuMjkgMi43NTUtMS4wODMuNjQxLjI0My44MDEuNjU2IDEuNzY4LjEwMS45NjQtLjU2LjY4Ni0uOTA0Ljc5Ni0xLjU4Mi4wOTQtLjU3OC41NTktMS44NDMgMi4zMjYtMS44NDNoLjAxYzEuNzU5LjAwNSAyLjIyMiAxLjI2NiAyLjMxNiAxLjg0My4xMS42NzgtLjE2OCAxLjAyMi43OTYgMS41ODIuOTY3LjU1NSAxLjEyNy4xNDIgMS43NjgtLjEwMS41NDktLjIwOCAxLjg3Ni0uNDM4IDIuNzYgMS4wOTJzLjAyIDIuNTY1LS40MzQgMi45MzZjLS41MzEuNDM1LS45NjkuMzY2LS45NzIgMS40ODEuMDAzIDEuMTE1LjQ0MSAxLjA0Ni45NzIgMS40OC40NTQuMzcyIDEuMzE3IDEuNDA2LjQzNCAyLjkzN2wtLjAwNS4wMDljLS44ODQgMS41Mi0yLjIwNyAxLjI5LTIuNzU1IDEuMDgzLS42NDEtLjI0My0uODAxLS42NTYtMS43NjgtLjEwMS0uOTY0LjU2LS42ODYuOTA0LS43OTYgMS41ODEtLjA5NC41NzktLjU1OSAxLjg0NC0yLjMyNiAxLjg0NGgtLjAxYy0xLjc1OS0uMDA1LTIuMjIyLTEuMjY2LTIuMzE2LTEuODQ0LS4xMS0uNjc3LjE2OC0xLjAyMS0uNzk2LTEuNTgxLS45NjctLjU1NS0xLjEyNy0uMTQyLTEuNzY4LjEwMS0uNTQ5LjIwOC0xLjg3Ni40MzgtMi43Ni0xLjA5MmwtLjAyLS4wMzZ6TTkuOTg0IDIuMTYySDEwYzEuMzU1IDAgMS4zNDIgMS4wMzkgMS4zNTMgMS40MjUuMDA4LjMxMi4wNCAxLjE2IDEuMjU5IDEuODcybC4wMTUuMDA4YzEuMjI1LjcgMS45NzYuMzA0IDIuMjUxLjE1NS4zMzctLjE4MyAxLjIyNi0uNzExIDEuOTAyLjQ0NWwuMDA4LjAxNGMuNjc4IDEuMTczLS4yMjkgMS42ODItLjU1OCAxLjg4NC0uMjY2LjE2My0uOTg0LjYxNS0uOTkxIDIuMDI3di4wMTZjLjAwNyAxLjQxMi43MjUgMS44NjQuOTkxIDIuMDI3LjMyOC4yMDEgMS4yMjkuNzA3LjU2NiAxLjg3bC0uMDA4LjAxNGMtLjY3NyAxLjE3NC0xLjU3MS42NDMtMS45MS40NTktLjI3NS0uMTQ5LTEuMDI2LS41NDUtMi4yNTEuMTU0bC0uMDE1LjAwOWMtMS4yMTkuNzEyLTEuMjUxIDEuNTYtMS4yNTkgMS44NzItLjAxMS4zODYuMDAyIDEuNDI1LTEuMzUzIDEuNDI1cy0xLjM0Mi0xLjAzOS0xLjM1My0xLjQyNWMtLjAwOC0uMzEyLS4wNC0xLjE2LTEuMjU5LTEuODcybC0uMDE1LS4wMDljLTEuMjI1LS42OTktMS45NzYtLjMwMy0yLjI1MS0uMTU0LS4zMzYuMTgzLTEuMjE5LjcwNi0xLjg5NC0uNDMybC0uMDE2LS4wMjdjLS42NzgtMS4xNzQuMjI5LTEuNjgyLjU1OC0xLjg4NC4yNjYtLjE2My45ODQtLjYxNS45OTEtMi4wMjd2LS4wMTZjLS4wMDctMS40MTItLjcyNS0xLjg2NC0uOTkxLTIuMDI3LS4zMjgtLjIwMS0xLjIyOS0uNzA3LS41NjYtMS44N2wuMDA4LS4wMTRjLjY3Ny0xLjE3NCAxLjU3MS0uNjQzIDEuOTEtLjQ1OS4yNzUuMTQ5IDEuMDI2LjU0NSAyLjI1MS0uMTU1bC4wMTUtLjAwOGMxLjIxOS0uNzEyIDEuMjUxLTEuNTYgMS4yNTktMS44NzIuMDEtLjM4NC0uMDAyLTEuNDE3IDEuMzM3LTEuNDI1Ii8+PC9zdmc+)}.ag-charts-icon-step-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzE4MUQxRiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNiA0aDV2OGgzVjhoNXYxaC00djRoLTVWNUg3djEwSDJ2LTFoNHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-text-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00IDRIMTZWN0gxNVY1SDEwLjVWMTVIMTRWMTZINlYxNUg5LjVWNUg1VjdINFY0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-trend-line,.ag-charts-icon-trend-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS4zMTQgMTAuOTM4YTIuMjUgMi4yNSAwIDEgMSAuMDEtMWg5LjM1MmEyLjI1IDIuMjUgMCAxIDEgLjAxIDF6bS0yLjE4OS43MjlhMS4yNSAxLjI1IDAgMSAwIDAtMi41IDEuMjUgMS4yNSAwIDAgMCAwIDIuNW0xMy43NSAwYTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-unlock,.ag-charts-icon-unlocked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNjUxIDMuNWEyLjg5NCAyLjg5NCAwIDAgMC0yLjg5NCAyLjg5NFY5SDE0LjVhMi41IDIuNSAwIDAgMSAyLjUgMi41djNhMi41IDIuNSAwIDAgMS0yLjUgMi41aC04QTIuNSAyLjUgMCAwIDEgNCAxNC41di0zQTIuNSAyLjUgMCAwIDEgNi41IDloLjI1N1Y2LjM5NGEzLjg5NCAzLjg5NCAwIDEgMSA3Ljc4OSAwIC41LjUgMCAwIDEtMSAwQTIuODk0IDIuODk0IDAgMCAwIDEwLjY1IDMuNU02LjUgMTBBMS41IDEuNSAwIDAgMCA1IDExLjV2M0ExLjUgMS41IDAgMCAwIDYuNSAxNmg4YTEuNSAxLjUgMCAwIDAgMS41LTEuNXYtM2ExLjUgMS41IDAgMCAwLTEuNS0xLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-vertical-line,.ag-charts-icon-vertical-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNSA3LjgwNmEyLjI1IDIuMjUgMCAwIDEgMCA0LjM4OFYxOS41aC0xdi03LjMwNmEyLjI1IDIuMjUgMCAwIDEgMC00LjM4OFYuNWgxem0tLjUuOTQ0YTEuMjUgMS4yNSAwIDEgMSAwIDIuNSAxLjI1IDEuMjUgMCAwIDEgMC0yLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-zoom-in{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-zoom-out{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS41IDEwYS41LjUgMCAwIDEgLjUtLjVoOGEuNS41IDAgMCAxIDAgMUg2YS41LjUgMCAwIDEtLjUtLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-high-low-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyA0aDJ2MTJINFY0aDNNNSA1aDN2MTBINXpNMTEgMTRWNmg1djhoLTVtMS03aDN2NmgtM3oiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-hlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTYzIDEuODM3LTUuMzM0IDExLjYyMUw2Ljk1NyA4LjEybC00LjE5OSA5LjYyMi0uOTE2LS40IDQuNzU2LTEwLjlMMTIuNDkgMTEuOCAxNy4yNTQgMS40MnoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjQiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTUuODI1IDIuNzA0LjU1IDEzLjc4NWwuOTAyLjQzIDQuNzI0LTkuOTE5IDYuMDM0IDUuMDI5IDMuMjU1LTguMTQtLjkyOC0uMzctMi43NDUgNi44NnptNy44NTIgMTQuNjM2IDUuNzgtMTMuMTM5LS45MTUtLjQwMi01LjIxOSAxMS44Ni02LjAwNS01LjUwNC0zLjI3OCA3LjY0OC45Mi4zOTQgMi43MjItNi4zNTJ6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-chevron-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03LjQ3IDUuNDdhLjc1Ljc1IDAgMCAxIDEuMDYgMGw0IDRhLjc1Ljc1IDAgMCAxIDAgMS4wNmwtNCA0YS43NS43NSAwIDAgMS0xLjA2LTEuMDZMMTAuOTQgMTAgNy40NyA2LjUzYS43NS43NSAwIDAgMSAwLTEuMDYiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-zoom-in-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20taW4iPjxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiLz48bGluZSB4MT0iMjEiIHgyPSIxNi42NSIgeTE9IjIxIiB5Mj0iMTYuNjUiLz48bGluZSB4MT0iMTEiIHgyPSIxMSIgeTE9IjgiIHkyPSIxNCIvPjxsaW5lIHgxPSI4IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjExIi8+PC9zdmc+)}.ag-charts-icon-zoom-out-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20tb3V0Ij48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ii8+PGxpbmUgeDE9IjIxIiB4Mj0iMTYuNjUiIHkxPSIyMSIgeTI9IjE2LjY1Ii8+PGxpbmUgeDE9IjgiIHgyPSIxNCIgeTE9IjExIiB5Mj0iMTEiLz48L3N2Zz4=)}.ag-charts-input{--input-layer-active: 1;--input-layer-focus: 2;--input-padding: calc(var(--ag-charts-spacing) * 2);--input-padding-large: calc(var(--ag-charts-spacing) * 2.5);color:var(--ag-charts-input-text-color);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-large);transition-duration:.25s;transition-property:none;transition-timing-function:ease-out}.ag-charts-input:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:var(--input-layer-focus)}.ag-charts-button{background:var(--ag-charts-button-background-color);border:var(--ag-charts-button-border);border-radius:var(--ag-charts-button-border-radius);color:var(--ag-charts-button-text-color);cursor:pointer;padding:var(--input-padding);transition-property:background,border-color}.ag-charts-button:hover{background:var(--ag-charts-focus-color)}.ag-charts-button:has(.ag-charts-icon){padding:2px}.ag-charts-checkbox{--checkbox-transition-duration: .1s;appearance:none;background:var(--ag-charts-checkbox-background-color);border-radius:calc(var(--ag-charts-border-radius) * 9);cursor:pointer;height:18px;margin:0;transition-duration:var(--checkbox-transition-duration);transition-property:margin;width:29px}.ag-charts-checkbox:before{display:block;background:var(--ag-charts-input-background-color);border-radius:calc(var(--ag-charts-border-radius) * 7);content:" ";height:14px;margin:2px;transition-duration:var(--checkbox-transition-duration);transition-property:margin;transition-timing-function:var(--ag-charts-input-transition-easing);width:14px}.ag-charts-checkbox:checked{background:var(--ag-charts-checkbox-checked-background-color)}.ag-charts-checkbox:checked:before{margin-left:13px}.ag-charts-select{background:var(--ag-charts-input-background-color);border:var(--ag-charts-input-border);border-radius:var(--ag-charts-input-border-radius);padding:3px 2px 4px;font-size:inherit}.ag-charts-textarea{--textarea-line-height: 1.38;background:var(--ag-charts-input-background-color);border:var(--ag-charts-input-border);border-radius:var(--ag-charts-input-border-radius);line-height:var(--textarea-line-height);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-large);padding:var(--input-padding-large) var(--input-padding)}.ag-charts-textarea::placeholder{color:var(--ag-charts-input-placeholder-text-color)}.ag-charts-proxy-container{pointer-events:none;position:absolute}.ag-charts-proxy-legend-toolbar{pointer-events:auto}.ag-charts-proxy-legend-toolbar>div[role=listitem]{pointer-events:none}.ag-charts-proxy-elem{-webkit-appearance:none;appearance:none;background:none;border:none;color:#0000;overflow:hidden;pointer-events:auto;position:absolute}.ag-charts-proxy-elem::-moz-range-thumb,.ag-charts-proxy-elem::-moz-range-track{opacity:0}.ag-charts-proxy-elem::-webkit-slider-runnable-track,.ag-charts-proxy-elem::-webkit-slider-thumb{opacity:0}.ag-charts-proxy-elem:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-focus-indicator{position:absolute;display:block;pointer-events:none;user-select:none;-webkit-user-select:none;width:100%;height:100%}.ag-charts-focus-indicator>div{position:absolute;outline:solid 1px var(--ag-charts-chrome-background-color);box-shadow:var(--ag-charts-focus-shadow)}.ag-charts-focus-indicator>svg{width:100%;height:100%;fill:none;overflow:visible}.ag-charts-focus-svg-outer-path{stroke:var(--ag-charts-chrome-background-color);stroke-width:4px}.ag-charts-focus-svg-inner-path{stroke:var(--ag-charts-accent-color);stroke-width:2px}.ag-charts-overlay{color:#181d1f;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay{color:#fff}.ag-charts-overlay--loading{color:#8c8c8c}.ag-charts-overlay__loading-background{background:#fff;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay .ag-charts-overlay__loading-background{background:#192232}.ag-charts-tooltip{--tooltip-arrow-size: 8px;--tooltip-row-spacing: 8px;--tooltip-column-spacing: 16px;position:fixed;inset:unset;margin:0;padding:0;overflow:visible;top:var(--top, 0px);left:var(--left, 0px);width:max-content;max-width:100%;font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);color:var(--ag-charts-tooltip-text-color);background:var(--ag-charts-tooltip-background-color);border:var(--ag-charts-tooltip-border);border-radius:var(--ag-charts-tooltip-border-radius);box-shadow:var(--ag-charts-popup-shadow)}.ag-charts-tooltip--compact .ag-charts-tooltip-content{--tooltip-row-spacing: 2px;--tooltip-column-spacing: 8px;padding:3px 6px}.ag-charts-tooltip--arrow-top:before,.ag-charts-tooltip--arrow-right:before,.ag-charts-tooltip--arrow-bottom:before,.ag-charts-tooltip--arrow-left:before{content:"";position:absolute;display:block;width:var(--tooltip-arrow-size);height:var(--tooltip-arrow-size);border:inherit;border-bottom-color:transparent;border-right-color:transparent;background:inherit;clip-path:polygon(0 0,100% 0,100% 1px,1px 100%,0 100%)}.ag-charts-tooltip--arrow-top:before{bottom:100%;left:50%;transform:translate(-50%) translateY(calc(var(--tooltip-arrow-size) * .5)) rotate(45deg)}.ag-charts-tooltip--arrow-bottom:before{top:100%;left:50%;transform:translate(-50%) translateY(calc(var(--tooltip-arrow-size) * -.5)) rotate(225deg)}.ag-charts-tooltip--arrow-left:before{right:100%;top:50%;transform:translateY(-50%) translate(calc(var(--tooltip-arrow-size) * .5)) rotate(315deg)}.ag-charts-tooltip--arrow-right:before{left:100%;top:50%;transform:translateY(-50%) translate(calc(var(--tooltip-arrow-size) * -.5)) rotate(135deg)}.ag-charts-tooltip--no-interaction{pointer-events:none;user-select:none;-webkit-user-select:none}.ag-charts-tooltip--wrap-always{overflow-wrap:break-word;word-break:break-word;hyphens:none}.ag-charts-tooltip--wrap-hyphenate{overflow-wrap:break-word;word-break:break-word;hyphens:auto}.ag-charts-tooltip--wrap-on-space{overflow-wrap:normal;word-break:normal}.ag-charts-tooltip--wrap-never{white-space:nowrap}.ag-charts-tooltip-heading,.ag-charts-tooltip-title,.ag-charts-tooltip-label,.ag-charts-tooltip-value{overflow:hidden;text-overflow:ellipsis}.ag-charts-tooltip-content{display:grid;grid:auto-flow minmax(1em,auto) / 1fr;padding:8px 12px;gap:var(--tooltip-row-spacing)}.ag-charts-tooltip-content:has(.ag-charts-tooltip-symbol){grid:auto-flow minmax(1em,auto) / auto 1fr}.ag-charts-tooltip-heading{grid-column:1 / -1}.ag-charts-tooltip-symbol{grid-column:1 / 2;place-self:center}.ag-charts-tooltip-symbol svg{display:block}.ag-charts-tooltip-title{grid-column:-2 / -1}.ag-charts-tooltip-row{grid-column:1 / -1;display:flex;gap:var(--tooltip-column-spacing);align-items:baseline;justify-content:space-between;overflow:hidden}.ag-charts-tooltip-row--inline{grid-column:-2 / -1}.ag-charts-tooltip-label{flex:1;min-width:0}.ag-charts-tooltip-value{min-width:0}.ag-charts-tooltip-footer{grid-column:1 / -1;color:var(--ag-charts-tooltip-subtle-text-color);text-align:center}.ag-charts-popover{position:absolute;border:var(--ag-charts-border);border-radius:var(--ag-charts-border-radius);background:var(--ag-charts-panel-background-color);color:var(--ag-charts-chrome-text-color);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);box-shadow:var(--ag-charts-popup-shadow);z-index:var(--ag-charts-layer-ui-overlay)}.ag-charts-menu{--item-padding: 6px 12px;--icon-color: var(--ag-charts-menu-text-color);display:grid;grid:auto-flow auto / 1fr;column-gap:12px;font-size:var(--ag-charts-chrome-font-size)}.ag-charts-menu:has(.ag-charts-menu__icon,.ag-charts-menu__row--stroke-width-visible){grid:auto-flow auto / auto 1fr}.ag-charts-menu__row--stroke-width-visible:before{content:"";height:var(--strokeWidth);width:12px;background:var(--icon-color)}.ag-charts-menu__row--stroke-width-visible[aria-disabled=true]:before{filter:grayscale(1);opacity:.5}.ag-charts-menu__row{display:grid;grid-column:1 / -1;grid-template-columns:subgrid;align-items:center;padding:var(--item-padding)}.ag-charts-menu__row:not(.ag-charts-menu__row--active){cursor:pointer}.ag-charts-menu__row:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.ag-charts-menu__row:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.ag-charts-menu__row:focus{background:var(--ag-charts-focus-color)}.ag-charts-menu__row:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:var(--ag-charts-layer-menu)}.ag-charts-menu__row--active{--icon-color: var(--ag-charts-accent-color);background:var(--ag-charts-focus-color);color:var(--ag-charts-accent-color)}.ag-charts-menu__label{grid-column:-1 / span 1}.ag-charts-toolbar{--toolbar-gap: calc(var(--ag-charts-spacing) * 2);--toolbar-size: 34px;--toolbar-button-padding: 6px;align-items:center;display:flex;flex-wrap:nowrap;position:absolute}.ag-charts-toolbar__button{align-items:center;background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-button-border);color:var(--ag-charts-button-text-color);cursor:pointer;display:flex;font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-medium);font-weight:var(--ag-charts-chrome-font-weight);justify-content:center;min-height:var(--toolbar-size);min-width:var(--toolbar-size);padding:var(--toolbar-button-padding);position:relative;transition:background-color .25s ease-in-out,border-color .25s ease-in-out,color .25s ease-in-out;white-space:nowrap}.ag-charts-toolbar__button:hover{background:var(--ag-charts-focus-color);z-index:1}.ag-charts-toolbar__button:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-toolbar__button--active{background:var(--ag-charts-focus-color);border-color:var(--ag-charts-accent-color);color:var(--ag-charts-accent-color);z-index:2;+.ag-charts-toolbar__button{border-left-color:var(--ag-charts-accent-color)}}.ag-charts-toolbar__button[aria-disabled=true]{background:var(--ag-charts-button-disabled-background-color);color:var(--ag-charts-button-disabled-text-color);cursor:default}.ag-charts-toolbar--horizontal{flex-direction:row;.ag-charts-toolbar__button{border-right-width:0}.ag-charts-toolbar__button--first{border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-right-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius);border-right-width:1px}}.ag-charts-toolbar--vertical{flex-direction:column;.ag-charts-toolbar__button{margin:-1px 0 0;max-width:100%}.ag-charts-toolbar__button--first{border-top-left-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-left-radius:var(--ag-charts-border-radius);border-bottom-right-radius:var(--ag-charts-border-radius)}}.ag-charts-toolbar__icon+.ag-charts-toolbar__label{margin-left:var(--toolbar-gap)}.ag-charts-toolbar__icon,.ag-charts-toolbar__label{pointer-events:none}.ag-charts-floating-toolbar{border:none;display:flex;.ag-charts-toolbar{align-items:unset;position:unset}}.ag-charts-floating-toolbar__drag-handle{align-items:center;background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-border);border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius);border-right-width:0;cursor:grab;display:flex;justify-content:center;min-width:24px;padding-left:0;padding-right:0}.ag-charts-floating-toolbar__drag-handle--dragging{cursor:grabbing}\n'),this.setContainer(i),this.cleanup.register(fm(this.element)),"normal"===this.mode){const e=this.rootElements["canvas-center"].element;if(null==e)throw new Error("Error initializing tab guards");const t=tS(e,"beforebegin"),i=tS(e,"afterend");this.tabGuards=new KC(e,t,i)}}initDOM(){if("normal"===this.mode){const e=zr("div");return e.innerHTML='<div role="presentation" class="ag-charts-wrapper ag-charts-styles" data-ag-charts><div role="presentation" class="ag-charts-canvas-center"><div role="presentation" class="ag-charts-canvas-container"><div role="presentation" class="ag-charts-canvas-background" aria-hidden="true"></div><div role="presentation" class="ag-charts-canvas" aria-hidden="true"></div><div role="figure" class="ag-charts-canvas-proxy"><div role="presentation" class="ag-charts-series-area"></div></div><div role="presentation" class="ag-charts-canvas-overlay ag-charts-tooltip-container"></div></div></div></div>',e.firstChild}const e=zr("div");e.role="presentation",e.dataset.agCharts="",e.classList.add("ag-charts-wrapper");const t=zr("div");return e.appendChild(t),t.role="presentation",t.classList.add("ag-charts-series-area"),e}initRootElements(){const{mode:e,element:t}=this,i={};for(const o of ZC){const s="ag-charts-".concat(o);let r;if("normal"===e)r=t.classList.contains(s)?t:t.getElementsByClassName(s)[0];else if(XC.has(o))r=t;else{var n;r=null!==(n=t.getElementsByClassName(s)[0])&&void 0!==n?n:zr("div")}if(null==r)throw new Error("AG Charts - unable to find DOM element ".concat(s));i[o]={element:r,children:new Map,listeners:[]}}return i}destroy(){var e;super.destroy(),null===(e=this.observer)||void 0===e||e.unobserve(this.element),this.container&&this.sizeMonitor.unobserve(this.container),this.pendingContainer=void 0;for(const t of Object.values(this.rootElements)){for(const e of t.children.values())e.remove();t.element.remove()}this.element.remove()}postRenderUpdate(){this.updateStylesLocation(),"minimal"!==this.mode&&null!=this.pendingContainer&&this.pendingContainer!==this.container&&(0===e.batchedUpdateContainer.length&&Pr().setTimeout(this.applyBatchedUpdateContainer.bind(this),0),e.batchedUpdateContainer.push(this))}applyBatchedUpdateContainer(){for(const t of e.batchedUpdateContainer)t.destroyed||t.updateContainer();e.batchedUpdateContainer.splice(0)}updateStylesLocation(){var e;if(!0!==this.initiallyConnected&&!1!==(null===(e=this.container)||void 0===e?void 0:e.isConnected)){this.documentRoot=this.getShadowDocumentRoot(this.container),this.initiallyConnected=!0;for(const e of this.rootElements.styles.children.keys())this.removeChild("styles",e);for(const[e,t]of this.styles)this.addStyles(e,t)}}setSizeOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;const{style:o}=this.element;o.width="".concat(null!==i&&void 0!==i?i:e,"px"),o.height="".concat(null!==n&&void 0!==n?n:t,"px"),this.minWidth=null!==i&&void 0!==i?i:e,this.minHeight=null!==n&&void 0!==n?n:t,this.updateContainerClassName()}updateContainerSize(){const{style:e}=this.rootElements["canvas-center"].element;var t,i;(e.visibility=null==this.containerSize?"hidden":"",this.containerSize)?(e.width="".concat(null!==(t=this.containerSize.width)&&void 0!==t?t:0,"px"),e.height="".concat(null!==(i=this.containerSize.height)&&void 0!==i?i:0,"px")):(e.width="",e.height="");this.updateContainerClassName()}setTabGuardIndex(e){this.tabGuards&&(this.tabGuards.tabIndex=e)}setContainer(e){e!==this.container&&(this.pendingContainer=e,"minimal"!==this.mode&&null!=this.container||this.updateContainer())}updateContainer(){const{pendingContainer:e}=this;if(null!=e&&e!==this.container){if(this.container&&(this.element.remove(),this.sizeMonitor.unobserve(this.container)),null!=this.documentRoot)for(const e of this.rootElements.styles.children.keys())this.removeChild("styles",e);this.container=e,this.pendingContainer=void 0,this.documentRoot=this.getShadowDocumentRoot(e),this.initiallyConnected=e.isConnected;for(const[e,t]of this.styles)this.addStyles(e,t);e.appendChild(this.element),this.sizeMonitor.observe(e,e=>{this.containerSize=e,this.updateContainerSize(),this.eventsHub.emit("dom:resize",null)}),this.eventsHub.emit("dom:container-change",null)}}setThemeClass(e){for(const t of Array.from(this.element.classList))t.startsWith("ag-charts-theme-")&&t!==e&&this.element.classList.remove(t);this.element.classList.add(e)}setThemeParameters(e){for(const[t,i]of fu(e)){let e="".concat(i);t.endsWith("Size")||t.endsWith("Radius")?e="".concat(i,"px"):t.endsWith("Border")&&"boolean"===typeof i&&(e=i?"var(--ag-charts-border)":"none"),this.element.style.setProperty("--ag-charts-".concat(Ql(t)),e)}}updateCanvasLabel(e){Zp(this.rootElements["canvas-proxy"].element,"aria-label",e)}getEventElement(e,t){return["focus","blur","keydown","keyup"].includes(t)?this.rootElements["series-area"].element:e}addEventListener(e,t,i){return Gr(this.getEventElement(this.element,e),e,t,i)}removeEventListener(e,t,i){this.getEventElement(this.element,e).removeEventListener(e,t,i)}getBoundingClientRect(){return this.rootElements.canvas.element.getBoundingClientRect()}getOverlayClientRect(){var e,t;const i=Pr(),n=new Pb(0,0,i.innerWidth,i.innerHeight),o=this.getRawOverlayClientRect();return null!==(e=null===(t=n.intersection(o))||void 0===t?void 0:t.toDOMRect())&&void 0!==e?e:eS}getRawOverlayClientRect(){var e;let t=this.element;const i=null===(e=this.element.getRootNode())||void 0===e?void 0:e.fullscreenElement;for(;null!=t;){let e;if(null!=i&&t===i)e=!0;else{var n,o,s;const i=null===(n=(o=t).computedStyleMap)||void 0===n?void 0:n.call(o),r=null===i||void 0===i||null===(s=i.get("overflow-y"))||void 0===s?void 0:s.toString();e="auto"===r||"scroll"===r}if(e)return Pb.fromObject(t.getBoundingClientRect());t=t.parentElement}if(null!=this.documentRoot)return Pb.fromObject(this.documentRoot.getBoundingClientRect());const{innerWidth:r,innerHeight:a}=Pr();return new Pb(0,0,r,a)}getShadowDocumentRoot(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.container;const n=null!==(e=null===(t=i)||void 0===t||null===(t=t.ownerDocument)||void 0===t?void 0:t.body)&&void 0!==e?e:Er("body");for(;null!=i;){if(i===n)return;if(i.parentNode instanceof DocumentFragment)return i;i=i.parentNode}}getParent(e){return this.rootElements[e].element}getChildBoundingClientRect(e){const{children:t}=this.rootElements[e],i=[];for(const n of t.values())i.push(Pb.fromObject(n.getBoundingClientRect()));return Pb.merge(i)}isManagedChildDOMElement(e,t,i){const{children:n}=this.rootElements[t],o=null===n||void 0===n?void 0:n.get(i);return null!=o&&e.contains(o)}contains(e,t){return null==t?this.element.contains(e):this.rootElements[t].element.contains(e)}addStyles(t,i){const n="data-ag-charts";if(this.styles.set(t,i),null==this.container)return;const o=e=>e.getAttribute(n)===t,s=e=>{const t=new Set(["TITLE","META"]);let i,s=!0;for(const a of e.children)if(s&&t.has(a.tagName))i=a;else{if(s=!1,o(a))return;a.hasAttribute(n)&&(i=a)}const r=zr("style");return null!=this.chart.styleNonce&&(r.nonce=this.chart.styleNonce),null==i?e.prepend(r):e.insertBefore(r,i.nextSibling),r};let r;this.styleContainer?r=s(this.styleContainer):!1===this.initiallyConnected?r=this.addChild("styles",t):null!=this.documentRoot||e.headStyles.has(t)?null!=this.documentRoot&&(r=this.addChild("styles",t)):(r=s(Er("head")),e.headStyles.add(t)),null==r||o(r)||(r.setAttribute(n,t),r.innerHTML=i)}removeStyles(e){this.removeChild("styles",e)}updateCursor(e,t){this.cursorState.set(e,t),this.element.style.cursor=this.cursorState.stateValue()}getCursor(){return this.element.style.cursor}addChild(e,t,i,n){var o;const{element:s,children:r,listeners:a}=this.rootElements[e];if(!r)throw new Error("AG Charts - unable to create DOM elements after destroy()");if(r.has(t))return r.get(t);const{childElementType:l="div"}=null!==(o=JC.get(e))&&void 0!==o?o:{};if(i&&i.tagName.toLowerCase()!==l.toLowerCase())throw new Error("AG Charts - mismatching DOM element type");const d=null!==i&&void 0!==i?i:zr(l);for(const[c,u,h]of a)d.addEventListener(c,u,h);if(r.set(t,d),"style"===l&&null!=this.chart.styleNonce&&(d.nonce=this.chart.styleNonce),n){const e=s.querySelector(n.query);if(null==e)throw new Error("AG Charts - addChild query failed ".concat(n.query));e.insertAdjacentElement(n.where,d)}else null===s||void 0===s||s.appendChild(d);return d}removeChild(e,t){var i;const{children:n}=this.rootElements[e];n&&(null===(i=n.get(t))||void 0===i||i.remove(),n.delete(t))}incrementDataCounter(e){var t;const{dataset:i}=this.element;null!==(t=i[e])&&void 0!==t||(i[e]="0"),i[e]=String(Number(i[e])+1)}setDataBoolean(e,t){this.element.dataset[e]=String(t)}setDataNumber(e,t){this.element.dataset[e]=String(t)}updateContainerClassName(){var e,t;const{element:i,containerSize:n,minWidth:o,minHeight:s}=this;i.classList.toggle(qC,o>=(null!==(e=null===n||void 0===n?void 0:n.width)&&void 0!==e?e:1/0)),i.classList.toggle(QC,s>=(null!==(t=null===n||void 0===n?void 0:n.height)&&void 0!==t?t:1/0))}};iS.className="DOMManager",iS.batchedUpdateContainer=[],iS.headStyles=new Set;var nS=iS,oS=class extends lC{constructor(){super(zr("div")),this.textElement=Br("text"),this.textElement.role="presentation",this.svgElement=Br("svg"),this.svgElement.appendChild(this.textElement),this.svgElement.style.width="100%",this.svgElement.style.opacity="0",this.svgElement.role="presentation",this.elem.appendChild(this.svgElement),this.elem.role="presentation"}set textContent(e){var t;this.textElement.textContent=e;const i=this.textElement,n=null===(t=i.getBBox)||void 0===t?void 0:t.call(i);n&&this.svgElement.setAttribute("viewBox","".concat(n.x," ").concat(n.y," ").concat(n.width," ").concat(n.height))}get textContent(){return this.textElement.textContent}destructor(){}},sS=class{constructor(e,t){this.getDispatcher=t,this.onExpanded=()=>{this.controller.setAriaExpanded(!0);const e=this.getDispatcher();if(e&&this.controls){const t={type:"expand-controlled-widget",controlled:this.controls};e.dispatch("expand-controlled-widget",this.controller,t)}},this.onCollapsed=e=>{this.controller.setAriaExpanded(!1),"0"===e.mode&&this.controller.focus()},e.setAriaExpanded(!1),this.controller=e}destroy(){var e;null===(e=this.controls)||void 0===e||e.collapse({mode:"2"}),this.setControlled(void 0)}setControlled(e){this.controls&&(this.controls.removeListener("expand-widget",this.onExpanded),this.controls.removeListener("collapse-widget",this.onCollapsed)),this.controls=e,this.controls&&(this.controller.setAriaControls(this.controls.id),this.controls.addListener("expand-widget",this.onExpanded),this.controls.addListener("collapse-widget",this.onCollapsed))}getControlled(){return this.controls}expandControlled(e){var t;this.controller.isDisabled()||(null===(t=this.controls)||void 0===t||t.expand({controller:this.controller,sourceEvent:void 0,overrideFocusVisible:null===e||void 0===e?void 0:e.overrideFocusVisible}))}},rS=class extends lC{constructor(e,t){super(e),Zp(this.elem,"role",t),this.setEnabled(!0),this.addListener("keydown",e=>{let{sourceEvent:t}=e;var i;gm(t)&&(t.preventDefault(),null===(i=this.htmlListener)||void 0===i||i.dispatch("click",this,{type:"click",device:"keyboard",sourceEvent:t}))})}lazyControllerImpl(){var e;return null!==(e=this.controllerImpl)&&void 0!==e||(this.controllerImpl=new sS(this,()=>this.internalListener)),this.controllerImpl}destructor(){var e;null===(e=this.controllerImpl)||void 0===e||e.destroy()}setEnabled(e){Zp(this.elem,"aria-disabled",!e)}setControlled(e){return this.lazyControllerImpl().setControlled(e)}getControlled(){return this.lazyControllerImpl().getControlled()}expandControlled(e){return this.lazyControllerImpl().expandControlled(e)}addListener(e,t){return super.addListener(e,(i,n)=>{("click"!==e&&"dblclick"!==e||!this.isDisabled())&&t(i,n)})}},aS=class extends rS{constructor(){super(zr("button"))}},lS=class extends lC{constructor(){super(zr("div")),Zp(this.elem,"role","group")}destructor(){}},dS=class extends lC{constructor(e,t){super(zr("div")),this.focusedChildIndex=0,this.onChildFocus=(e,t)=>{const i=this.children[this.focusedChildIndex];this.focusedChildIndex=t.index,null===i||void 0===i||i.setTabIndex(-1),t.setTabIndex(0)},this.onChildKeyDown=(e,t)=>{var i;const n=this.orientation,[o,s]="both"===n?[um.horizontal,um.vertical]:[um[n],void 0];let r=-1;if(lm(e.sourceEvent)){const i=e.sourceEvent.key;i===o.nextKey||i===(null===s||void 0===s?void 0:s.nextKey)?r=t.index+1:i!==o.prevKey&&i!==(null===s||void 0===s?void 0:s.prevKey)||(r=t.index-1)}null===(i=this.children[r])||void 0===i||i.focus()},Zp(this.elem,"role",t),this.orientation=e}get orientation(){var e;return null!==(e=qp(this.elem,"aria-orientation"))&&void 0!==e?e:"both"}set orientation(e){Zp(this.elem,"aria-orientation","both"===e?void 0:e)}focus(){var e;null===(e=this.children[this.focusedChildIndex])||void 0===e||e.focus()}clear(){this.focusedChildIndex=0;for(const e of this.children)this.removeChildListeners(e),e.parent=void 0;this.elem.textContent="",this.children.length=0}addChildListeners(e){e.addListener("focus",this.onChildFocus),e.addListener("keydown",this.onChildKeyDown)}removeChildListeners(e){e.removeListener("focus",this.onChildFocus),e.removeListener("keydown",this.onChildKeyDown)}onChildAdded(e){this.addChildListeners(e),e.setTabIndex(1===this.children.length?0:-1)}onChildRemoved(e){this.removeChildListeners(e);const{focusedChildIndex:t,children:i}=this,n=t===e.index;for(let s=0;s<i.length;s++){const e=i[s];e.index===t&&(this.focusedChildIndex=s),e.index=s}if(n){var o;const e=null!==(o=i[t])&&void 0!==o?o:i[t-1];e?(this.focusedChildIndex=e.index,e.setTabIndex(0)):this.focusedChildIndex=0}}},cS=class extends dS{constructor(){super("both","list"),this.setHidden(!0)}destructor(){for(const e of this.children)e.getElement().parentElement.remove()}addChildToDOM(e,t){const i=zr("div");Zp(i,"role","listitem"),Qp(i,"position","absolute"),lC.setElementContainer(e,i),this.appendOrInsert(i,t),this.setHidden(!1)}removeChildFromDOM(e){e.getElement().parentElement.remove(),this.setHidden(0===this.children.length)}setHidden(e){0===this.children.length&&(e=!0),super.setHidden(e)}},uS=class extends lC{constructor(e){super(e)}destructor(){}},hS=class e extends lC{constructor(){super(zr("input")),this._step=e.STEP_ONE,this.orientation="both"}get step(){return this._step}set step(e){this._step=e,this.getElement().step=e.attributeValue}get keyboardStep(){var e,t;return null!==(e=null===(t=this._keyboardStep)||void 0===t?void 0:t.step)&&void 0!==e?e:this._step}set keyboardStep(e){var t;if(e!==(null===(t=this._keyboardStep)||void 0===t?void 0:t.step)&&(void 0!==this._keyboardStep&&(this.removeListener("keydown",this._keyboardStep.onKeyDown),this.removeListener("keyup",this._keyboardStep.onKeyUp),this.removeListener("blur",this._keyboardStep.onBlur),this._keyboardStep=void 0),void 0!==e)){const t=()=>this.getElement().step=e.attributeValue,i=()=>this.getElement().step=this._step.attributeValue;this._keyboardStep={step:e,onKeyDown:t,onKeyUp:i,onBlur:i},this.addListener("keydown",this._keyboardStep.onKeyDown),this.addListener("keyup",this._keyboardStep.onKeyUp),this.addListener("blur",this._keyboardStep.onBlur)}}get orientation(){var e;return null!==(e=qp(this.elem,"aria-orientation"))&&void 0!==e?e:"both"}set orientation(t){Zp(this.elem,"aria-orientation","both"===t?void 0:t),e.registerDefaultPreventers(this,t)}destructor(){}clampValueRatio(e,t){const i=this.getValueRatio(),n=za(e,i,t);return n!==i&&this.setValueRatio(n),n}setValueRatio(e,t){const{divider:i}=this.step,n=Math.round(1e4*e)/i,{ariaValueText:o=zg(n/i)}=null!==t&&void 0!==t?t:{},s=this.getElement();s.value="".concat(n),s.ariaValueText=o}getValueRatio(){return this.getElement().valueAsNumber/this.step.divider}static registerDefaultPreventers(t,i){"both"===i?t.removeListener("keydown",e.onKeyDown):t.addListener("keydown",e.onKeyDown)}static onKeyDown(e,t){let i=[];const{orientation:n}=t;"horizontal"===n?i=["ArrowUp","ArrowDown"]:"vertical"===n&&(i=["ArrowLeft","ArrowRight"]),i.includes(e.sourceEvent.code)&&e.sourceEvent.preventDefault()}};hS.STEP_ONE={attributeValue:"1",divider:1},hS.STEP_HUNDRETH={attributeValue:"0.01",divider:100};var pS=hS,gS=class extends aS{constructor(){super(),Zp(this.elem,"role","switch"),this.setChecked(!1)}setChecked(e){Zp(this.elem,"aria-checked",e)}},mS=class extends dS{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"horizontal","toolbar")}destructor(){}};function fS(e,t){var i;return(null===(i=t.params)||void 0===i?void 0:i.type)===e}function vS(e){const t={params:e,result:void 0};return t.result=function(e){if("button"===e)return new aS;if("slider"===e)return new pS;if("toolbar"===e)return new mS;if("group"===e)return new lS;if("list"===e)return new cS;if("region"===e)return new uS(zr("div"));if("text"===e)return new oS;if("listswitch"===e)return new gS;throw new Error("AG Charts - error allocating meta")}(t.params.type),t}var yS=class{constructor(e,t,i){this.eventsHub=e,this.localeManager=t,this.domManager=i,this.cleanup=new Ta}destroy(){this.cleanup.flush()}addLocalisation(e){e(),this.cleanup.register(this.eventsHub.on("locale:change",e))}createProxyContainer(e){const t=vS(e),{params:i,result:n}=t,o=n.getElement();return this.domManager.addChild("canvas-proxy",i.domManagerId,o),o.classList.add(...i.classList,"ag-charts-proxy-container"),o.role=i.type,fS("toolbar",t)&&(t.result.orientation=t.params.orientation),this.addLocalisation(()=>{o.ariaLabel=this.localeManager.t(i.ariaLabel.id,i.ariaLabel.params)}),n}createProxyElement(e){const t=vS(e);if(fS("button",t)){const{params:e,result:i}=t,n=i.getElement();if(this.initInteract(e,i),"string"===typeof e.textContent)n.textContent=e.textContent;else{const{textContent:t}=e;this.addLocalisation(()=>{n.textContent=this.localeManager.t(t.id,t.params)})}this.setParent(t.params,t.result)}if(fS("slider",t)){const{params:e,result:i}=t,n=i.getElement();this.initInteract(e,i),n.type="range",n.role="presentation",n.style.margin="0px",this.addLocalisation(()=>{n.ariaLabel=this.localeManager.t(e.ariaLabel.id,e.ariaLabel.params)}),this.setParent(t.params,t.result)}if(fS("text",t)){const{params:e,result:i}=t;this.initElement(e,i),this.setParent(t.params,t.result)}if(fS("listswitch",t)){const{params:e,result:i}=t;this.initInteract(e,i),i.setTextContent(e.textContent),i.setChecked(e.ariaChecked),i.setAriaDescribedBy(e.ariaDescribedBy),this.setParent(t.params,t.result)}if(fS("region",t)){const{params:e,result:i}=t,n=i.getElement();this.initInteract(e,i),n.role="region",this.setParent(t.params,t.result)}return t.result}initElement(e,t){const i=t.getElement();return Qp(i,"cursor",e.cursor),i.classList.toggle("ag-charts-proxy-elem",!0),i}initInteract(e,t){const{tabIndex:i,domIndex:n}=e,o=this.initElement(e,t);void 0!==i&&(o.tabIndex=i),void 0!==n&&(t.domIndex=n)}setParent(e,t){if("parent"in e){var i;null===(i=e.parent)||void 0===i||i.addChild(t)}else{const i={where:e.where,query:".ag-charts-series-area"};this.domManager.addChild("canvas-proxy",e.domManagerId,t.getElement(),i),t.destroyListener=()=>{this.domManager.removeChild("canvas-proxy",e.domManagerId)}}}},bS=/\$\{(\w+)}(?:\[(\w+)])?/gi,xS={number:new Intl.NumberFormat("en-US"),percent:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}),percent0to2dp:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:0,maximumFractionDigits:2}),date:new Intl.DateTimeFormat("en-US",{dateStyle:"full"}),time:new Intl.DateTimeFormat("en-US",{timeStyle:"full"}),datetime:new Intl.DateTimeFormat("en-US",{dateStyle:"full",timeStyle:"full"})},CS=class{constructor(e){this.eventsHub=e,this.localeText=void 0,this.getLocaleText=void 0}setLocaleText(e){this.localeText!==e&&(this.localeText=e,this.eventsHub.emit("locale:change",null))}setLocaleTextFormatter(e){this.getLocaleText=e,this.getLocaleText!==e&&(this.getLocaleText=e,this.eventsHub.emit("locale:change",null))}t(e){var t,i;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{localeText:o=Lb,getLocaleText:s}=this,r=o[e];return String(null!==(t=null!==(i=null===s||void 0===s?void 0:s({key:e,defaultValue:r,variables:n}))&&void 0!==i?i:(e=>{let{defaultValue:t,variables:i}=e;return null===t||void 0===t?void 0:t.replaceAll(bS,(e,t,n)=>{const o=i[t],s=null==n?null:xS[n];return null!=n&&null==s&&jr.warnOnce("Format style [".concat(n,"] is not supported")),null!=s?s.format(o):"number"===typeof o?xS.number.format(o):o instanceof Date?xS.datetime.format(o):String(o)})})({key:e,defaultValue:r,variables:n}))&&void 0!==t?t:e)}},SS=class{constructor(e){var t,i;this.enabled=!0,this.width=600,this.height=300;const{width:n,height:o,canvasElement:s,willReadFrequently:r=!1}=e;this.pixelRatio=null!==(t=null!==(i=e.pixelRatio)&&void 0!==i?i:Pr("devicePixelRatio"))&&void 0!==t?t:1,this.element=null!==s&&void 0!==s?s:zr("canvas"),this.element.style.display="block",this.element.style.width=(null!==n&&void 0!==n?n:this.width)+"px",this.element.style.height=(null!==o&&void 0!==o?o:this.height)+"px",this.element.width=Math.round((null!==n&&void 0!==n?n:this.width)*this.pixelRatio),this.element.height=Math.round((null!==o&&void 0!==o?o:this.height)*this.pixelRatio),this.context=this.element.getContext("2d",{willReadFrequently:r}),this.onEnabledChange(),this.resize(null!==n&&void 0!==n?n:0,null!==o&&void 0!==o?o:0,this.pixelRatio),zb(this.context)}drawImage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.drawImage(this.context.canvas,t,i)}toDataURL(e){return this.element.toDataURL(e)}resize(e,t,i){if(!(e>0&&t>0))return;const{element:n,context:o}=this;n.width=Math.round(e*i),n.height=Math.round(t*i),o.setTransform(i,0,0,i,0,0),n.style.width=e+"px",n.style.height=t+"px",this.width=e,this.height=t,this.pixelRatio=i}clear(){Fb(this)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}reset(){var e,t;this.context.reset(),null===(e=(t=this.context).verifyDepthZero)||void 0===e||e.call(t)}onEnabledChange(){this.element&&(this.element.style.display=this.enabled?"":"none")}};Ab([og(e=>e.onEnabledChange())],SS.prototype,"enabled",2);var wS=class extends Oa{constructor(){super(...arguments),this.cache=new Map,this.imageLoadingCount=0}loadImage(e,t){const i=this.cache.get(e);if(null!==i&&void 0!==i&&i.image)return i.image;if(null!=i&&t)return void i.nodes.add(t);if(!t)return;const n={image:void 0,nodes:new Set([t])},o=new Image;return this.imageLoadingCount++,o.onload=()=>{n.image=o;for(const e of n.nodes)e.markDirty();n.nodes.clear(),this.imageLoadingCount--,this.emit("image-loaded",{uri:e})},o.onerror=()=>{this.imageLoadingCount--,n.nodes.clear(),this.emit("image-error",{uri:e})},o.src=e,this.cache.set(e,n),n.image}waitingToLoad(){return this.imageLoadingCount>0}destroy(){for(const e of this.cache.values())e.nodes.clear();this.cache.clear()}},MS=class{constructor(e){this.canvas=e,this.debug=Cr.create(!0,"scene"),this.layersMap=new Map,this.nextLayerId=0}get size(){return this.layersMap.size}resize(e,t,i){this.canvas.resize(e,t,i);for(const{canvas:n}of this.layersMap.values())n.resize(e,t,i)}addLayer(e){const{width:t,height:i,pixelRatio:n}=this.canvas,{name:o}=e,s=new Vb({width:t,height:i,pixelRatio:n});return this.layersMap.set(s,{id:this.nextLayerId++,name:o,canvas:s}),this.debug("Scene.addLayer() - layers",this.layersMap),s}removeLayer(e){this.layersMap.has(e)&&(this.layersMap.delete(e),e.destroy(),this.debug("Scene.removeLayer() -  layers",this.layersMap))}clear(){for(const e of this.layersMap.values())e.canvas.destroy();this.layersMap.clear()}},kS=class extends Oa{constructor(e){super(),this.debug=Cr.create(!0,"scene"),this.id=xm(this),this.imageLoader=new wS,this.root=null,this.pendingSize=null,this.isDirty=!1,this.cleanup=new Ta,this.updateDebugFlags(),this.canvas=new SS(e),this.layersManager=new MS(this.canvas),this.cleanup.register(this.imageLoader.on("image-loaded",()=>{this.emit("scene-changed",{})}),this.imageLoader.on("image-error",e=>{let{uri:t}=e;jr.warnOnce("Unable to load image ".concat(t))}))}waitingForUpdate(){var e,t;return null!==(e=null===(t=this.imageLoader)||void 0===t?void 0:t.waitingToLoad())&&void 0!==e&&e}get width(){var e,t;return null!==(e=null===(t=this.pendingSize)||void 0===t?void 0:t[0])&&void 0!==e?e:this.canvas.width}get height(){var e,t;return null!==(e=null===(t=this.pendingSize)||void 0===t?void 0:t[1])&&void 0!==e?e:this.canvas.height}get pixelRatio(){var e,t;return null!==(e=null===(t=this.pendingSize)||void 0===t?void 0:t[2])&&void 0!==e?e:this.canvas.pixelRatio}setContainer(e){const{element:t}=this.canvas;return t.remove(),e.appendChild(t),this}setRoot(e){var t;return this.root===e||(this.isDirty=!0,null===(t=this.root)||void 0===t||t.setScene(),this.root=e,e&&(e.visible=!0,e.setScene(this))),this}updateDebugFlags(){Cr.inDevelopmentMode(()=>_b._debugEnabled=!0)}clearCanvas(){this.canvas.clear()}attachNode(e){return this.appendChild(e),()=>e.remove()}appendChild(e){var t;return null===(t=this.root)||void 0===t||t.appendChild(e),this}removeChild(e){return e.remove(),this}download(e,t){var i;Vr(this.canvas.toDataURL(t),null!==(i=null===e||void 0===e?void 0:e.trim())&&void 0!==i?i:"image")}getDataURL(e){return this.canvas.toDataURL(e)}resize(e,t,i){return e=Math.round(e),t=Math.round(t),null!==i&&void 0!==i||(i=this.pixelRatio),e>0&&t>0&&(e!==this.width||t!==this.height||i!==this.pixelRatio)&&(this.pendingSize=[e,t,i],this.isDirty=!0,!0)}render(e){var t;const{debugSplitTimes:i={start:performance.now()},extraDebugStats:n,seriesRect:o}=null!==e&&void 0!==e?e:{},{canvas:s,canvas:{context:r}={},root:a,pendingSize:l,width:d,height:c,pixelRatio:u}=this;if(!r)return;const h=Cr.check("scene:stats","scene:stats:verbose");h&&this.ensureDebugStatsRegistration();const p=performance.now();let g,m=!1;if(l&&(m=!0,this.layersManager.resize(...l),this.pendingSize=null),a&&!a.visible)return void(this.isDirty=!1);if(a instanceof Gx&&(g=a.dirty),null!=a&&!1===g&&!this.isDirty)return this.debug.check()&&this.debug("Scene.render() - no-op",{tree:wC(a,"console")}),void(h&&bC(this.layersManager,i,r,void 0,n,o));const f={ctx:r,width:d,height:c,devicePixelRatio:u,debugNodes:{}};Cr.check("scene:stats:verbose")&&(f.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0,opsPerformed:0,opsSkipped:0}),function(e){const t=Sr(Pr("agChartsSceneDebug")),i=[];for(const n of t)"layout"===n?i.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):i.push(n);e.debugNodeSearch=i}(f);let v=!1;if((!1!==g||m)&&(v=!0,s.clear()),a&&Cr.check("scene:dirtyTree")){const{dirtyTree:e,paths:t}=MC(a);Cr.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:e,paths:t})}if(a&&v){if(a.visible&&a.preRender(f),this.debug.check()){const e=wC(a,"console");this.debug("Scene.render() - before",{canvasCleared:v,tree:e})}if(a.visible)try{r.save(),a.render(f),r.restore()}catch(y){throw this.canvas.reset(),y}}i["\u270d\ufe0f"]=performance.now()-p,null===(t=r.verifyDepthZero)||void 0===t||t.call(r),this.isDirty=!1,h&&bC(this.layersManager,i,r,f.stats,n,o),function(e,t){e.save();try{for(const[i,n]of Object.entries(t)){const t=Bx.toCanvas(n);t?(e.globalAlpha=.8,e.strokeStyle="red",e.lineWidth=1,e.strokeRect(t.x,t.y,t.width,t.height),e.fillStyle="red",e.strokeStyle="white",e.font="16px sans-serif",e.textBaseline="top",e.textAlign="left",e.lineWidth=2,e.strokeText(i,t.x,t.y,t.width),e.fillText(i,t.x,t.y,t.width)):jr.log("Scene.render() - no bbox for debugged node [".concat(i,"]."))}}catch(y){jr.warnOnce("Error during debug rendering",y)}finally{e.restore()}}(r,f.debugNodes),a&&this.debug.check()&&this.debug("Scene.render() - after",{tree:wC(a,"console"),canvasCleared:v})}ensureDebugStatsRegistration(){if(this.releaseDebugStats)return;const e=function(){vC++;let e=!1;return()=>{e||0===vC||(e=!0,0===--vC&&IC())}}(),t=()=>{e(),this.releaseDebugStats=void 0};this.releaseDebugStats=t,this.cleanup.register(t)}toSVG(){const{root:e,width:t,height:i}=this;if(null!=e)return _b.toSVG(e,t,i)}strip(){const{context:e,pixelRatio:t}=this.canvas;e.setTransform(t,0,0,t,0,0),this.layersManager.clear(),this.setRoot(null),this.isDirty=!1,this.clear()}destroy(){this.strip(),this.canvas.destroy(),this.imageLoader.destroy(),this.cleanup.flush(),IC(),Object.assign(this,{canvas:void 0})}};kS.className="Scene";var DS=class{constructor(e,t,i){this.eventsHub=e,this.annotationRoot=t,this.fireChartEvent=i,this.mementoOriginatorKey="annotations",this.annotations=[]}createMemento(){return this.annotations}guardMemento(e){return null==e||Ua(e)}restoreMemento(e,t,i){this.annotations=this.cleanData(null!==i&&void 0!==i?i:[]).map(e=>xu(e,this.getAnnotationTypeStyles(e.type))),this.eventsHub.emit("annotations:restore",{annotations:this.annotations})}updateData(e){this.annotations=this.cleanData(null!==e&&void 0!==e?e:[])}fireChangedEvent(){this.fireChartEvent({type:"annotations",annotations:Qg([...this.annotations])})}attachNode(e){return this.annotationRoot.append(e),()=>(e.remove(),this)}setAnnotationStyles(e){this.styles=e}getAnnotationTypeStyles(e){var t;return null===(t=this.styles)||void 0===t?void 0:t[e]}cleanData(e){for(const t of e)"textAlign"in t&&delete t.textAlign;return e}},IS=class{constructor(e,t){this.eventsHub=e,this.sceneRoot=t,this.axes=new Map,this.axisGridGroup=new Gx({name:"Axes-Grids",zIndex:bp.AXIS_GRID}),this.axisGroup=new Gx({name:"Axes",zIndex:bp.AXIS}),this.axisLabelGroup=new Gx({name:"Axes-Labels",zIndex:bp.SERIES_LABEL}),this.axisCrosslineRangeGroup=new Gx({name:"Axes-Crosslines-Range",zIndex:bp.SERIES_CROSSLINE_RANGE}),this.axisCrosslineLineGroup=new Gx({name:"Axes-Crosslines-Line",zIndex:bp.SERIES_CROSSLINE_LINE}),this.axisCrosslineLabelGroup=new Gx({name:"Axes-Crosslines-Label",zIndex:bp.SERIES_LABEL}),this.sceneRoot.appendChild(this.axisGroup),this.sceneRoot.appendChild(this.axisGridGroup),this.sceneRoot.appendChild(this.axisLabelGroup),this.sceneRoot.appendChild(this.axisCrosslineRangeGroup),this.sceneRoot.appendChild(this.axisCrosslineLineGroup),this.sceneRoot.appendChild(this.axisCrosslineLabelGroup)}updateAxes(e,t){const i={axisNode:this.axisGroup,gridNode:this.axisGridGroup,labelNode:this.axisLabelGroup,crossLineRangeNode:this.axisCrosslineRangeGroup,crossLineLineNode:this.axisCrosslineLineGroup,crossLineLabelNode:this.axisCrosslineLabelGroup};for(const o of e)t.includes(o)||(o.detachAxis(i),o.destroy());for(const o of t)null!==e&&void 0!==e&&e.includes(o)||o.attachAxis(i);this.axes.clear();for(const o of t){const e=o.createAxisContext();var n;if(this.axes.has(e.direction))null===(n=this.axes.get(e.direction))||void 0===n||n.push(e);else this.axes.set(e.direction,[e])}this.eventsHub.emit("axis:change",null)}getAxisIdContext(e){for(const[,t]of this.axes)for(const i of t)if(i.axisId===e)return i}getAxisContext(e){var t;return null!==(t=this.axes.get(e))&&void 0!==t?t:[]}destroy(){this.axes.clear(),this.axisGroup.remove(),this.axisGridGroup.remove()}},AS=class{constructor(e,t,i){this.eventsHub=e,this.caller=t,this.animationManager=i,this.dispatchOnlyLatest=!0,this.dispatchThrottle=0,this.requestThrottle=300,this.isLoadingInitialData=!1,this.isLoadingData=!1,this.freshRequests=[],this.requestCounter=0,this.pendingData=void 0,this.debug=Cr.create(!0,"data-model","data-source"),this.throttledFetch=this.createThrottledFetch(this.requestThrottle),this.throttledDispatch=this.createThrottledDispatch(this.dispatchThrottle)}updateCallback(e){"function"===typeof e&&(this.debug("DataService - updated data source callback"),this.dataSourceCallback=e,this.isLoadingInitialData=!0,this.animationManager.skip(),this.eventsHub.emit("data:source-change",null))}clearCallback(){this.dataSourceCallback=void 0}load(e){var t,i,n,o;const{pendingData:s}=this;if(null!=s&&(null==s.params.windowStart&&null==s.params.windowEnd||(null===(t=s.params.windowStart)||void 0===t?void 0:t.valueOf())===(null===(i=e.windowStart)||void 0===i?void 0:i.valueOf())&&(null===(n=s.params.windowEnd)||void 0===n?void 0:n.valueOf())===(null===(o=e.windowEnd)||void 0===o?void 0:o.valueOf()))){const e=this.requestCounter++;return this.isLoadingInitialData=!1,void this.dispatch(e,s.data)}this.isLoadingData=!0,this.throttledFetch(e)}isLazy(){return null!=this.dataSourceCallback}isLoading(){return this.isLazy()&&(this.isLoadingInitialData||this.isLoadingData)}async getData(){const{latestRequest:e}=this;if(!e)return;const{params:t,fetchRequest:i}=e;return{params:t,data:await i}}restoreData(e){this.pendingData=e}createThrottledFetch(e){return El(e=>this.fetch(e).catch(e=>jr.error("callback failed",e)),e,{leading:!1,trailing:!0})}createThrottledDispatch(e){return El((e,t)=>this.dispatch(e,t),e,{leading:!0,trailing:!0})}dispatch(e,t){this.debug("DataService - dispatching 'data-load' | ".concat(e)),this.eventsHub.emit("data:load",{data:t})}async fetch(e){"context"in this.caller&&(e.context=this.caller.context);const t=Promise.resolve().then(async()=>{if(!this.dataSourceCallback)throw new Error("DataService - [dataSource.getData] callback not initialised");const i=performance.now(),n=this.requestCounter++;let o;this.debug("DataService - requesting | ".concat(n));try{o=await this.dataSourceCallback(e),this.debug("DataService - response | ".concat(performance.now()-i,"ms | ").concat(n))}catch(Ur){this.debug("DataService - request failed | ".concat(n)),jr.errorOnce("DataService - request failed | [".concat(Ur,"]"))}this.isLoadingInitialData=!1;const s=this.freshRequests.indexOf(t);return-1===s||this.dispatchOnlyLatest&&s!==this.freshRequests.length-1?(this.debug("DataService - discarding stale request | ".concat(n)),o):(this.freshRequests=this.freshRequests.slice(s+1),0===this.freshRequests.length&&(this.isLoadingData=!1),Array.isArray(o)?this.throttledDispatch(n,o):this.eventsHub.emit("data:error",null),o)});this.latestRequest={params:e,fetchRequest:t},this.freshRequests.push(t),await t}};Ab([ng({newValue(e){this.throttledDispatch=this.createThrottledDispatch(e)}})],AS.prototype,"dispatchThrottle",2),Ab([ng({newValue(e){this.throttledFetch=this.createThrottledFetch(e)}})],AS.prototype,"requestThrottle",2);var LS=class{constructor(e,t){this.domManager=e,this.updateService=t,this.observers=[]}updateFonts(e){if(e&&0!==e.size){this.loadFonts(e);for(const t of e)this.observeFontStatus(t)}}destroy(){for(const e of this.observers)e.disconnect();this.observers=[]}loadFonts(e){const t=Array.from(e).map(e=>encodeURIComponent(e)),i=":wght@100;200;300;400;500;600;700;800;900",n="".concat(i,"&family="),o="@import url('https://fonts.googleapis.com/css2?family=".concat(t.join(n)).concat(i,"&display=swap');\n");this.domManager.addStyles("google-font-".concat(t.join("-")),o)}observeFontStatus(e){const t=globalThis.document.createElement("div");t.style.setProperty("position","absolute"),t.style.setProperty("top","0"),t.style.setProperty("margin","0"),t.style.setProperty("padding","0"),t.style.setProperty("overflow","hidden"),t.style.setProperty("visibility","hidden"),t.style.setProperty("width","auto"),t.style.setProperty("max-width","none"),t.style.setProperty("font-synthesis","none"),t.style.setProperty("font-family",e),t.style.setProperty("font-size","16px"),t.style.setProperty("white-space","nowrap"),t.textContent="UVWxyz",this.domManager.addChild("canvas-container","font-check-".concat(encodeURIComponent(e)),t);const i=new ResizeObserver(e=>{var t;const i=null===e||void 0===e||null===(t=e.at(0))||void 0===t||null===(t=t.contentBoxSize.at(0))||void 0===t?void 0:t.inlineSize;null!=i&&i>0&&(Wm.clear(),this.updateService.update(Ku.PERFORM_LAYOUT))});i.observe(t),this.observers.push(i)}},NS=class{constructor(){this.registeredListeners=new Map}addListener(e,t){const i={symbol:Symbol(e),handler:t};return this.registeredListeners.has(e)?this.registeredListeners.get(e).push(i):this.registeredListeners.set(e,[i]),()=>this.removeListener(i.symbol)}removeListener(e){for(const[t,i]of this.registeredListeners.entries()){const n=i.findIndex(t=>t.symbol===e);if(n>=0){i.splice(n,1),0===i.length&&this.registeredListeners.delete(t);break}}}dispatch(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(const s of this.getListenersByType(e))try{s.handler(...i)}catch(o){jr.errorOnce(o)}}getListenersByType(e){var t;return null!==(t=this.registeredListeners.get(e))&&void 0!==t?t:[]}destroy(){this.registeredListeners.clear()}},TS={millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e",month:"%b",year:"%Y"},RS={millisecond:"%Y %b %e %H:%M:%S.%L",second:"%Y %b %e %H:%M:%S",minute:"%Y %b %e %H:%M",hour:"%Y %b %e %H:%M",day:"%Y %b %e",month:"%Y %b",year:"%Y"},ES={year:0,month:1,day:2,hour:3,minute:4,second:5,millisecond:6},PS=/%[-_0]?L/,OS=/%[-_0]?S/,FS=/%[-_0]?M/,zS=/%[-_0]?[HI]/,BS=/^%[-_0]?[de]$/,VS=/^%[-_0]?[Bbm]$/,GS=/^%[-_0]?[Yy]$/;var HS=class e extends NS{constructor(){super(...arguments),this.formats=new Map,this.dateFormatter=Im((t,i,n,o,s)=>{var r;const a=null!==(r=e.mergeSpecifiers(t,i))&&void 0!==r?r:TS;return e.getFormatter("date",a,n,o,{truncateDate:s})}),this.formatter=void 0}static mergeSpecifiers(){let e;for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];for(const o of i)e=el(o)&&el(e)?p(p({},e),o):o;return e}static getFormatter(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"long",{truncateDate:o}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(el(t)){var s;if("date"!==e)return void jr.warn("Date formatter configuration is not supported for non-date types.");null!==i&&void 0!==i||(i="millisecond");const r="component"===n?null!==(s=null===t||void 0===t?void 0:t[i])&&void 0!==s?s:TS[i]:function(e,t,i){if("string"===typeof e)return e;null!==e&&void 0!==e||(e=TS);const{millisecond:n=TS.millisecond,second:o=TS.second,minute:s=TS.minute,hour:r=TS.hour,day:a=TS.day,month:l=TS.month,year:d=TS.year}=e,c=ES[t],u=RS[t],h=i?ES[i]:-1;if(h<ES.year&&c>=ES.year&&!GS.test(d)||h<ES.month&&c>=ES.month&&!VS.test(l)||h<ES.day&&c>=ES.day&&!BS.test(a))return u;let p,g;switch(t){case"year":return d;case"month":return h<ES.year?"".concat(l," ").concat(d):l;case"day":return h<ES.year?"".concat(l," ").concat(a," ").concat(d):"".concat(l," ").concat(a);case"hour":p=r;break;case"minute":p=s;break;case"second":p=o;break;case"millisecond":p=n;break;default:return u}return c>=ES.hour&&!zS.test(p)||c>=ES.minute&&!FS.test(p)||c>=ES.second&&!OS.test(p)||c>=ES.millisecond&&!PS.test(p)?u:(h<ES.year?g="".concat(l," ").concat(a," ").concat(d):h<ES.month&&(g="".concat(l," ").concat(a)),g?"".concat(p," ").concat(g):p)}(t,i,o);return Tl(r)}switch(e){case"number":{const e=gl(t);if(null==e)return;return ml(e)}case"date":return Tl(t);case"category":return e=>t.replace("%s",String(e))}}setFormatter(e){this.formatter!==e&&(this.formatter=e,this.formats.clear(),this.dateFormatter.reset(),this.dispatch("format-changed"))}format(t,i){var n;let{specifier:o,truncateDate:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null==i.value)return;const{formatter:r}=this;if(null==r)return;if("function"===typeof r){const e=t(r,i);return null==e?void 0:String(e)}const a=r[i.property];if(null==a)return;if("function"===typeof a){const e=t(a,i);return null==e?e:Gl(e)}if("date"===i.type){const{unit:e,style:t}=i,n=this.dateFormatter(a,o,e,t,s);return null===n||void 0===n?void 0:n(i.value)}const l=null!==o&&void 0!==o?o:a;if("string"!==typeof l)return;let d=this.formats.get(l);return null==d&&(d=e.getFormatter(i.type,l),this.formats.set(l,d)),null===(n=d)||void 0===n?void 0:n(i.value,"number"===i.type?i.fractionDigits:void 0)}defaultFormat(e){let{specifier:t,truncateDate:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{formatter:n}=this,o="function"===typeof n||null===n||void 0===n?void 0:n[e.property];switch(e.type){case"date":{var s;const{unit:n,style:r}=e,a=null!=o&&"function"!==typeof o?o:void 0,l=this.dateFormatter(a,t,n,r,i);return null!==(s=null===l||void 0===l?void 0:l(e.value))&&void 0!==s?s:String(e.value)}case"number":return Fg(e.value,e.fractionDigits);case"category":return Array.isArray(e.value)?e.value.join(" - "):"string"===typeof e.value?e.value:"number"===typeof e.value?Fg(e.value):String(e.value)}}};function jS(e,t){if("string"===typeof e)try{e=yg.fromString(e)}catch(i){e=yg.fromArray([0,0,0])}if("string"===typeof t)try{t=yg.fromString(t)}catch(n){t=yg.fromArray([0,0,0])}return i=>yg.mix(e,t,i).toRgbaString()}var WS=["initial","remove","update","add","trailing","end","none"],_S={initial:{animationDuration:1,animationDelay:0},add:{animationDuration:.25,animationDelay:.75},remove:{animationDuration:.25,animationDelay:0},update:{animationDuration:.5,animationDelay:.25},trailing:{animationDuration:.2,animationDelay:1,skipIfNoEarlierAnimations:!0},end:{animationDelay:1.2,animationDuration:0,skipIfNoEarlierAnimations:!0},none:{animationDuration:0,animationDelay:0}};function KS(e){return e.every(e=>e instanceof _b)?{nodes:e,selections:[]}:{nodes:[],selections:e}}function US(e,t){return e===t||(Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every((e,i)=>US(e,t[i])):Tb(e)&&Tb(t)?e.equals(t):!(!el(e)||!el(t))&&bu(e,t,US))}var YS=class{constructor(e){var t,i,n,o;this.isComplete=!1,this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=e.id,this.groupId=e.groupId,this.autoplay=null===(t=e.autoplay)||void 0===t||t,this.ease=null!==(i=e.ease)&&void 0!==i?i:Oy,this.phase=e.phase;const s=null!==(n=e.duration)&&void 0!==n?n:_S[this.phase].animationDuration;var r,a,l;(this.duration=s*e.defaultDuration,this.delay=(null!==(o=e.delay)&&void 0!==o?o:0)*e.defaultDuration,this.onComplete=e.onComplete,this.onPlay=e.onPlay,this.onStop=e.onStop,this.onUpdate=e.onUpdate,this.interpolate=this.createInterpolator(e.from,e.to),this.from=e.from,!0===e.skip)&&(null===(r=this.onUpdate)||void 0===r||r.call(this,e.to,!1,this),null===(a=this.onStop)||void 0===a||a.call(this,this),null===(l=this.onComplete)||void 0===l||l.call(this,this),this.isComplete=!0);!1!==e.collapsable&&(this.duration=this.checkCollapse(e,this.duration))}checkCollapse(e,t){return US(e.from,e.to)?0:t}play(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isPlaying||this.isComplete||(this.isPlaying=!0,null===(e=this.onPlay)||void 0===e||e.call(this,this),this.autoplay&&(this.autoplay=!1,i&&(null===(t=this.onUpdate)||void 0===t||t.call(this,this.from,!0,this))))}stop(){var e;(this.isPlaying=!1,this.isComplete)||(this.isComplete=!0,null===(e=this.onStop)||void 0===e||e.call(this,this))}update(e){var t;if(this.isComplete)return e;!this.isPlaying&&this.autoplay&&this.play(!0);const i=this.elapsed;if(this.elapsed+=e,this.delay>this.elapsed)return 0;const n=this.interpolate(this.isReverse?1-this.delta:this.delta);null===(t=this.onUpdate)||void 0===t||t.call(this,n,!1,this);const o=this.delay+this.duration;var s;return this.elapsed>=o?(this.stop(),this.isComplete=!0,null===(s=this.onComplete)||void 0===s||s.call(this,this),e-(o-i)):0}get delta(){return this.ease(za(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(e,t){if("object"!==typeof t||Tb(t))return this.interpolateValue(e,t);if(Array.isArray(t)){const i=[];for(let n=0;n<t.length;n++){const o=this.createInterpolator(e[n],t[n]);null!=o&&i.push(o)}return e=>{const t=[];for(const n of i)t.push(n(e));return t}}const i=[];for(const n of Object.keys(t)){const o=this.createInterpolator(e[n],t[n]);null!=o&&i.push([n,o])}return e=>{const t={};for(const[n,o]of i)t[n]=o(e);return t}}interpolateValue(e,t){if(null!=e&&null!=t){if(Tb(e))return i=>e[Nb](t,i);try{switch(typeof e){case"number":return function(e,t){return i=>Number(e)*(1-i)+Number(t)*i}(e,t);case"string":return jS(e,t);case"boolean":if(e===t)return()=>e;break;case"object":return()=>e;default:throw new Error("Unable to interpolate values: ".concat(e,", ").concat(t))}}catch(i){}throw new Error("Unable to interpolate values: ".concat(e,", ").concat(t))}}};function $S(e,t,i,n){return t<e.startIndex?(e.startIndex+=i,e.endIndex+=i,!1):!!(t<e.endIndex||t===e.endIndex&&n)&&(e.endIndex+=i,!0)}function ZS(e,t,i){const n=t+i;if(n<=e.startIndex)return e.startIndex=Math.max(0,e.startIndex-i),e.endIndex=Math.max(e.startIndex,e.endIndex-i),!1;if(t>=e.endIndex)return!1;if(t<=e.startIndex&&n>=e.endIndex)e.startIndex=t,e.endIndex=t;else if(t<=e.startIndex){const i=n-e.startIndex,o=e.endIndex-e.startIndex;e.startIndex=t,e.endIndex=e.startIndex+Math.max(0,o-i)}else n>=e.endIndex?e.endIndex=Math.max(e.startIndex,t):e.endIndex=Math.max(e.startIndex,e.endIndex-i);return!0}function XS(e,t){const i=Math.ceil(e/1e3);return Math.max(t,i)}function qS(e,t){return Math.max(1,Math.ceil(e/t))}var QS=class{constructor(){var e,t,i,n;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.bands=[],this.dataSize=0,this.config={minDataSizeForBanding:null!==(e=o.minDataSizeForBanding)&&void 0!==e?e:1e3,targetBandCount:null!==(t=o.targetBandCount)&&void 0!==t?t:10,maxBandSize:null!==(i=o.maxBandSize)&&void 0!==i?i:1/0,enableBanding:null===(n=o.enableBanding)||void 0===n||n}}applyIndexMap(e){!function(e,t){!function(e,t){for(const i of t)i.insertCount>0&&e.handleInsertion(i.index,i.insertCount),i.deleteCount>0&&e.handleRemoval(i.index,i.deleteCount)}(e,t.spliceOps),t.updatedIndices.size>0&&function(e,t){for(const i of t)e.handleInsertion(i,0)}(e,t.updatedIndices)}(this,e)}initializeBands(e){this.dataSize=Math.max(0,e),this.bands=function(e,t,i){if(!t.enableBanding||e<t.minDataSizeForBanding)return[i(0,e)];const n=qS(e,XS(e,t.targetBandCount)),o=[];for(let s=0;s<e;s+=n){const t=Math.min(s+n,e);o.push(i(s,t))}return o}(this.dataSize,this.config,(e,t)=>this.createBand(e,t))}getBandCount(){return this.bands.length}handleInsertion(e,t){if(this.dataSize+=t,0===this.bands.length)return void this.initializeBands(this.dataSize);const i=XS(this.dataSize,this.config.targetBandCount),n=qS(this.dataSize,i),o=Math.ceil(1.1*n);for(let s=0;s<this.bands.length;s++){const i=this.bands[s],r=s===this.bands.length-1;if(e===i.endIndex&&r&&t>0){i.endIndex-i.startIndex>=n?this.bands.push(this.createBand(e,e+t)):(i.endIndex+=t,i.isDirty=!0);break}if($S(i,e,t,r)&&(i.isDirty=!0,t>0&&e<i.endIndex)){i.endIndex-i.startIndex>o&&this.splitBand(s,n)}}}handleRemoval(e,t){if(t<=0||0===this.bands.length)return;const i=Math.min(t,Math.max(0,this.dataSize-e));if(!(i<=0)){this.dataSize=Math.max(0,this.dataSize-i);for(const t of this.bands){ZS(t,e,i)&&(t.isDirty=!0)}this.bands=this.bands.filter(e=>e.endIndex>e.startIndex)}}splitBand(e,t){const i=this.bands[e],n=i.endIndex-i.startIndex,o=Math.min(t,Math.floor(n/2)),s=i.startIndex+o,r=this.createBand(i.startIndex,s),a=this.createBand(s,i.endIndex);this.bands.splice(e,1,r,a)}getStats(){const e=this.bands.filter(e=>e.isDirty);return{totalBands:this.bands.length,dirtyBands:e.length,dataSize:this.dataSize}}markRangeDirty(e,t){for(const i of this.bands)e<i.endIndex&&t>i.startIndex&&(i.isDirty=!0)}},JS=class e{constructor(){this.domain=new Set,this.dateTimestamps=new Set,this.hasDateValues=!1,this.sortedValues=null,this.sortOrder=void 0,this.isSortedUnique=!1}static is(t){return t instanceof e}setSortedUniqueMode(e,t){t&&(this.isSortedUnique=!0,this.sortOrder=e,this.sortedValues=[])}extend(e){this.isSortedUnique&&this.sortedValues?(this.sortedValues.push(e),e instanceof Date&&(this.hasDateValues=!0)):e instanceof Date?(this.hasDateValues=!0,this.dateTimestamps.add(e.valueOf())):this.domain.add(e)}getDomain(){if(this.isSortedUnique&&this.sortedValues){let e=!1;return this.sortedValues.filter(t=>{if(null==t)return!e&&(e=!0,!0);if(t instanceof Date&&Number.isNaN(t.valueOf())){if(e)return!1;e=!0}return!0})}if(this.hasDateValues){const e=Array.from(this.dateTimestamps,e=>new Date(e));return this.domain.size>0?[...e,...Array.from(this.domain)]:e}return Array.from(this.domain)}isDateDomain(){return this.hasDateValues}isSortedUniqueMode(){return this.isSortedUnique}getSortOrder(){return this.sortOrder}mergeFrom(e){var t;if(this.isSortedUnique&&e.isSortedUnique&&this.sortOrder===e.sortOrder&&void 0!==this.sortOrder&&e.sortedValues)return e.hasDateValues&&(this.hasDateValues=!0),null!==(t=this.sortedValues)&&void 0!==t||(this.sortedValues=[]),void this.sortedValues.push(...e.sortedValues);if(this.convertToSetMode(),e.hasDateValues&&(this.hasDateValues=!0),e.isSortedUnique&&e.sortedValues)for(const i of e.sortedValues)i instanceof Date?this.dateTimestamps.add(i.valueOf()):this.domain.add(i);else{for(const t of e.dateTimestamps)this.dateTimestamps.add(t);for(const t of e.domain)this.domain.add(t)}}convertToSetMode(){if(this.isSortedUnique){if(this.sortedValues){for(const e of this.sortedValues)e instanceof Date?this.dateTimestamps.add(e.valueOf()):this.domain.add(e);this.sortedValues=null}this.isSortedUnique=!1,this.sortOrder=void 0}}},ew=class e{constructor(){this.domain=[1/0,-1/0]}static is(t){return t instanceof e}static extendDomain(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1/0,-1/0];for(const i of e)"number"===typeof i&&(t[0]>i&&(t[0]=i),t[1]<i&&(t[1]=i));return t}extend(e){("number"===typeof e||e instanceof Date)&&(this.domain[0]>e&&(this.domain[0]=e),this.domain[1]<e&&(this.domain[1]=e))}getDomain(){return[...this.domain]}},tw=class extends QS{constructor(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.fullDomainCache=null,this.sortOrder=void 0,this.isUnique=!1,this.domainFactory=e,this.isDiscrete=t}setSortOrderMetadata(e,t){this.sortOrder=e,this.isUnique=t}createBand(e,t){const i=this.domainFactory();return this.isDiscrete&&void 0!==this.sortOrder&&this.isUnique&&JS.is(i)&&i.setSortedUniqueMode(this.sortOrder,this.isUnique),{startIndex:e,endIndex:t,subDomain:i,isDirty:!0}}initializeBands(e){super.initializeBands(e),this.fullDomainCache=null}handleInsertion(e,t){super.handleInsertion(e,t),this.fullDomainCache=null}handleRemoval(e,t){super.handleRemoval(e,t),this.fullDomainCache=null}splitBand(e,t){this.bands.length>1&&super.splitBand(e,t)}markBandsDirty(e,t){this.markRangeDirty(e,t),this.fullDomainCache=null}markAllBandsDirty(){for(const e of this.bands)e.isDirty=!0;this.fullDomainCache=null}extendBandsFromData(e,t){const i=e.length;for(const n of this.bands){if(!n.isDirty)continue;const o=this.domainFactory();this.isDiscrete&&void 0!==this.sortOrder&&this.isUnique&&JS.is(o)&&o.setSortedUniqueMode(this.sortOrder,this.isUnique),n.subDomain=o;const{startIndex:s,endIndex:r}=n;for(let a=s;a<r&&a<i;a++)null!==t&&void 0!==t&&t[a]||n.subDomain.extend(e[a]);n.isDirty=!1}this.fullDomainCache=null}getDirtyBands(){return this.bands.filter(e=>e.isDirty)}extend(e){this.markAllBandsDirty(),this.fullDomainCache=null}canUseSortedConcatenation(){if(!this.sortOrder||!this.isUnique||!this.isDiscrete)return!1;for(const e of this.bands){if(!JS.is(e.subDomain))return!1;if(!e.subDomain.isSortedUniqueMode())return!1;if(e.subDomain.getSortOrder()!==this.sortOrder)return!1}return!0}concatenateSortedDomains(){const e=new JS;e.setSortedUniqueMode(this.sortOrder,this.isUnique);for(const t of this.bands)JS.is(t.subDomain)&&e.mergeFrom(t.subDomain);return e.getDomain()}deduplicateNulls(e){let t=!1;return e.filter(e=>{if(null==e)return!t&&(t=!0,!0);if(e instanceof Date&&Number.isNaN(e.valueOf())){if(t)return!1;t=!0}return!0})}getDomain(){if(null!==this.fullDomainCache)return this.fullDomainCache;if(0===this.bands.length)return this.fullDomainCache=[],[];if(1===this.bands.length){const e=this.bands[0].subDomain.getDomain();return this.fullDomainCache=this.isDiscrete?this.deduplicateNulls(e):e,this.fullDomainCache}if(this.isDiscrete){const e=this.bands[0].subDomain;if(JS.is(e))if(this.canUseSortedConcatenation())this.fullDomainCache=this.deduplicateNulls(this.concatenateSortedDomains());else{const e=new JS;for(const t of this.bands)JS.is(t.subDomain)&&e.mergeFrom(t.subDomain);this.fullDomainCache=this.deduplicateNulls(e.getDomain())}else{const e=new Set;for(const t of this.bands)for(const i of t.subDomain.getDomain())e.add(i);this.fullDomainCache=Array.from(e)}}else{let e,t;for(const i of this.bands){const n=i.subDomain.getDomain();if(2===n.length){const[i,o]=n;(void 0===e||null!=i&&null!=e&&i<e)&&(e=i),(void 0===t||null!=o&&null!=t&&o>t)&&(t=o)}}this.fullDomainCache=void 0!==e&&void 0!==t?[e,t]:[]}return this.fullDomainCache}getStats(){const e=this.bands.filter(e=>e.isDirty).length,t=this.bands.reduce((e,t)=>e+(t.endIndex-t.startIndex),0);return{bandCount:this.bands.length,dirtyBandCount:e,averageBandSize:this.bands.length>0?t/this.bands.length:0,dataSize:this.dataSize}}};function iw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];for(const i of e)"number"===typeof i&&(i<0&&(t[0]+=i),i>0&&(t[1]+=i));return t}function nw(e,t){const i={id:e,matchGroupIds:[t],type:"aggregate",aggregateFunction:e=>ew.extendDomain(e)};return i}function ow(e,t){var i;const n=null===(i=null===t||void 0===t?void 0:t.visible)||void 0===i||i;return{id:e,type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];var i,o;n&&(t[0]+=null!==(i=null===e||void 0===e?void 0:e[0])&&void 0!==i?i:0,t[1]+=null!==(o=null===e||void 0===e?void 0:e[1])&&void 0!==o?o:0);return t}}}function sw(e,t,i){const n={id:e,matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=i[1]-i[0];return t.aggregateFunction(e).map(e=>e/n)}};return t.groupAggregateFunction&&(n.groupAggregateFunction=t.groupAggregateFunction),n}function rw(e){return()=>{let t=0;return i=>ol(i)?(t+=e?Math.max(0,i):i,t):i}}function aw(e){return e.map(e=>Qa(e)?JSON.stringify(e):e).join("-")}function lw(e){const t=null===e||void 0===e?void 0:e.map(Number);return null!==t&&void 0!==t&&t.every(Number.isFinite)?t:[]}function dw(e,t){var i;return null!==(i=null===t||void 0===t?void 0:t.get(e.id))&&void 0!==i?i:0}function cw(e){return"scopes"in e&&Array.isArray(e.scopes)}function uw(e,t){const i=[];for(let n=0;n<e;n+=1)i[n]=t;return i}function hw(e){const t=new Set;for(const i of e.values())i&&t.add(i);return t}function pw(e,t){const i=[];for(const n of e){const e=null===n||void 0===n?void 0:n[t];if(null==e)return;i.push(e)}return i}function gw(e){const t=[];let i,n=0;const o=/((?:(?:^|\.)\s*\w+|\[\s*(?:'(?:[^']|(?<!\\)\\')*'|"(?:[^"]|(?<!\\)\\")*"|-?\d+)\s*\])\s*)/g;for(;i=o.exec(e);){if(i.index!==n)return;n=i.index+i[0].length;const e=i[1].trim();if(e.startsWith("."))t.push(e.slice(1).trim());else if(e.startsWith("[")){const i=e.slice(1,-1).trim();i.startsWith("'")?t.push(i.slice(1,-1).replaceAll(/(?<!\\)\\'/g,"'")):i.startsWith('"')?t.push(i.slice(1,-1).replaceAll(/(?<!\\)\\"/g,'"')):t.push(i)}else t.push(e)}if(n===e.length)return t}function mw(e){return t=>{let i=t;for(const n of e)i=i[n];return i}}var fw=class{constructor(e,t,i){this.ctx=e,this.scopeCacheManager=t,this.resolvers=i}aggregateUngroupedData(e){var t,i;const n=this.ctx.aggregates.map(()=>[1/0,-1/0]);e.domain.aggValues=n;const{columns:o,dataSources:s}=e,r=mu(s.keys()),a=e.keys.map(e=>e.get(r)),l=null!==(t=null===(i=s.get(r))||void 0===i?void 0:i.data)&&void 0!==t?t:[];e.aggregation=null===l||void 0===l?void 0:l.map((e,t)=>{const i=[];for(const[h,p]of this.ctx.aggregates.entries()){var s,r,l,d;const e=this.valueGroupIdxLookup(p);let g=null!==(s=null===(r=p.groupAggregateFunction)||void 0===r?void 0:r.call(p))&&void 0!==s?s:[1/0,-1/0];const m=e.map(e=>o[e][t]),f=pw(a,t),v=null==f?void 0:p.aggregateFunction(m,f);var c,u;if(v)g=null!==(c=null===(u=p.groupAggregateFunction)||void 0===u?void 0:u.call(p,v,g))&&void 0!==c?c:ew.extendDomain(v,g);const y=null!==(l=null===(d=p.finalFunction)||void 0===d?void 0:d.call(p,g))&&void 0!==l?l:g;i[h]=y,ew.extendDomain(y,n[h])}return i})}aggregateGroupedData(e){const t=this.ctx.aggregates.map(()=>[1/0,-1/0]);e.domain.aggValues=t;const{columns:i}=e;for(const[c,u]of this.ctx.aggregates.entries()){const h=this.valueGroupIdxLookup(u);for(let p=0;p<e.groups.length;p++){var n,o,s,r,a;const g=e.groups[p];null!==(n=g.aggregation)&&void 0!==n||(g.aggregation=[]);const m=g.keys;let f=null!==(o=null===(s=u.groupAggregateFunction)||void 0===s?void 0:s.call(u))&&void 0!==o?o:[1/0,-1/0];const v=Math.max(...h.map(e=>{var t,i;return null!==(t=null===(i=g.datumIndices[e])||void 0===i?void 0:i.length)&&void 0!==t?t:0}));for(let e=0;e<v;e++){const t=h.map(t=>{var n;const o=null===(n=g.datumIndices[t])||void 0===n?void 0:n[e];if(null==o)return;const s=this.resolvers.resolveAbsoluteIndex(p,o);return i[t][s]}),n=u.aggregateFunction(t,m);var l,d;if(n)f=null!==(l=null===(d=u.groupAggregateFunction)||void 0===d?void 0:d.call(u,n,f))&&void 0!==l?l:ew.extendDomain(n,f)}const y=null!==(r=null===(a=u.finalFunction)||void 0===a?void 0:a.call(u,f))&&void 0!==r?r:f;g.aggregation[c]=y,ew.extendDomain(y,t[c])}}}postProcessGroups(e){const{groupProcessors:t}=this.ctx,{columnScopes:i,columns:n,invalidData:o}=e;for(const s of t){const t=this.valueGroupIdxLookup(s),r=s.adjust()();for(let i=0;i<e.groups.length;i++){r(n,t,e.groups[i],i)}for(const s of t){const t="category"===this.ctx.values[s].valueType,r=n[s],a=mu(i[s]),l=null===o||void 0===o?void 0:o.get(a),d=t?new JS:new ew;for(let e=0;e<r.length;e+=1)!0!==(null===l||void 0===l?void 0:l[e])&&d.extend(r[e]);e.domain.values[s]=d.getDomain()}}}valueGroupIdxLookup(e){return this.scopeCacheManager.valueGroupIdxLookup(e)}},vw=class{constructor(e){this.ctx=e}setupDomainForDefinition(e,t,i){var n;const o="category"===e.valueType;let s=t.get(e);var r;(s||!1===(null===(n=this.ctx.bandingConfig)||void 0===n?void 0:n.enableBanding)||(s=new tw(o?()=>new JS:()=>new ew,this.ctx.bandingConfig,o),t.set(e,s)),s&&o)&&s.setSortOrderMetadata(null===i||void 0===i?void 0:i.sortOrder,null!==(r=null===i||void 0===i?void 0:i.isUnique)&&void 0!==r&&r);return s||(o?new JS:new ew)}extendDomainFromData(e,t,i){if(e instanceof tw)e.extendBandsFromData(t,i);else for(let n=0;n<t.length;n++)!0!==(null===i||void 0===i?void 0:i[n])&&e.extend(t[n])}initializeBandedDomain(e,t,i){if(!(e instanceof tw))return;const n=e.getStats(),o=0===n.bandCount||n.dataSize!==t;this.ctx.debug.check()&&o&&i&&this.ctx.debug("Reinitializing bands for ".concat(i,": bandCount=").concat(n.bandCount,", dataSize=").concat(n.dataSize,", dataLength=").concat(t)),o&&e.initializeBands(t)}},yw=Symbol("key-sort-orders"),bw=Symbol("column-sort-orders"),xw=Symbol("domain-ranges"),Cw=Symbol("domain-bands"),Sw=Symbol("reducer-bands"),ww=Object.freeze([0]);function Mw(e,t){var i;if("string"===typeof t)e.set(t,(null!==(i=e.get(t))&&void 0!==i?i:0)+1);else for(const o of t){var n;e.set(o,(null!==(n=e.get(o))&&void 0!==n?n:0)+1)}}function kw(e,t){if(e.reusableResult.valid=!1,e.hasInvalidValue)return e.reusableResult.value=e.invalidValue,void e.domain.extend(e.invalidValue);"integrated"!==e.mode&&jr.warnOnce("invalid value of type [".concat(typeof t,"] for [").concat(e.def.scopes," / ").concat(e.def.id,"] ignored:"),"[".concat(t,"]")),e.reusableResult.value=void 0}function Dw(e,t,i,n,o,s){return e&&t&&!1===e(i,n,o)?(s.reusableResult.missing=!1,kw(s,i),s.reusableResult):null}function Iw(e,t,i,n,o){o.missing=!e,e||t||Mw(i,n)}function Aw(e,t,i){return t.valid=!0,t.value=e,i.extend(e),t}var Lw=class{constructor(e){this.ctx=e}createProcessValueFn(e,t,i,n,o,s){const r={def:e,accessor:t,domain:i,reusableResult:n,processorFns:o,mode:this.ctx.mode},a="extend"===s?this.createSpecializedProcessValue(r,e.validation):null;return null!==a&&void 0!==a?a:this.createGenericProcessValue(r,s)}createSpecializedProcessValue(e,t){return null!=e.def.forceValue?this.createSpecializedProcessValueForceValue(e):e.def.processor?this.createSpecializedProcessValueProcessor(e,t):t?"key"===e.def.type?this.createSpecializedProcessValueKeyValidation(e,t):this.createSpecializedProcessValueValueValidation(e,t):null}createValidationMeta(e){const{def:t,domain:i,reusableResult:n,mode:o}=e;return{reusableResult:n,hasInvalidValue:"invalidValue"in t,invalidValue:t.invalidValue,domain:i,def:t,mode:o}}createSpecializedProcessValueKeyValidation(e,t){const{def:i,accessor:n,domain:o,reusableResult:s}=e,r=i.property,a="missingValue"in i,l=i.missingValue,d=i.missing,c=this.createValidationMeta(e);if(n){const e=n;return function(i,n,r){let l;try{l=e(i)}catch(h){}const u=null!=l;return u&&null!=l&&!1!==t(l,i,n)?(s.missing=!1,s.valid=!0,s.value=l,o.extend(l),s):(s.missing=!u,u||a||Mw(d,r),kw(c,l),s)}}return function(e,i,n){const u=r in e,h=u?e[r]:l;return u&&null!=h&&!1!==t(h,e,i)?(s.missing=!1,s.valid=!0,s.value=h,o.extend(h),s):(s.missing=!u,u||a||Mw(d,n),kw(c,h),s)}}createSpecializedProcessValueValueValidation(e,t){const{def:i,accessor:n,domain:o,reusableResult:s}=e,r=i.property,a="missingValue"in i,l=i.missingValue,d=i.missing,c=this.createValidationMeta(e);if(n){const e=n;return function(i,n,r){let l;try{l=e(i)}catch(p){}const u=null!=l,h=Dw(t,u,l,i,n,c);return null!==h?h:(Iw(u,a,d,r,s),Aw(l,s,o))}}return function(e,i,n){const u=r in e,h=u?e[r]:l,p=Dw(t,u,h,e,i,c);return null!==p?p:(Iw(u,a,d,n,s),Aw(h,s,o))}}createSpecializedProcessValueForceValue(e){const{def:t,accessor:i,domain:n,reusableResult:o}=e,s=t.property,r=t.forceValue;if(i){const e=i;return function(t,i,s){let a;try{a=e(t)}catch(d){}const l=null!=a&&Ga(a)?-1*r:r;return o.missing=!1,o.valid=!0,o.value=l,n.extend(l),o}}return function(e,t,i){const a=s in e,l=a?e[s]:void 0,d=a&&Ga(l)?-1*r:r;return o.missing=!1,o.valid=!0,o.value=d,n.extend(d),o}}createSpecializedProcessValueProcessor(e,t){const{def:i,accessor:n,domain:o,reusableResult:s,processorFns:r}=e,a=i.property,l="missingValue"in i,d=i.missingValue,c=i.missing,u=i.processor,h=this.createValidationMeta(e);if(n){const e=n;return function(n,a,d){let p;try{p=e(n)}catch(v){}const g=null!=p,m=Dw(t,g,p,n,a,h);if(null!==m)return m;Iw(g,l,c,d,s);let f=r.get(i);return null==f&&(f=u(),r.set(i,f)),p=f(p,a),Aw(p,s,o)}}return function(e,n,p){const g=a in e;let m=g?e[a]:d;const f=Dw(t,g,m,e,n,h);if(null!==f)return f;Iw(g,l,c,p,s);let v=r.get(i);return null==v&&(v=u(),r.set(i,v)),m=v(m,n),Aw(m,s,o)}}createGenericProcessValue(e,t){const{def:i,accessor:n,domain:o,processorFns:s}=e,r=i.property,a="missingValue"in i,l=i.missingValue,d=i.missing,c="extend"===t,u=e.reusableResult,h=this.createValidationMeta(e);return function(e,t,p){let g,m;if(n){try{g=n(e)}catch(v){}m=null!=g}else m=r in e,g=m?e[r]:l;if(null!=i.forceValue){g=m&&Ga(g)?-1*i.forceValue:i.forceValue,m=!0}Iw(m,a,d,p,u);if("key"===i.type&&null==g)return kw(h,g),u;const f=Dw(i.validation,m,g,e,t,h);if(null!==f)return f;if(u.valid=!0,i.processor){let e=s.get(i);null==e&&(e=i.processor(),s.set(i,e)),g=e(g,t)}return c&&o.extend(g),u.value=g,u}}};function Nw(e,t){return!e||!t||0===e.length||0===t.length||e.some(e=>t.includes(e))}function Tw(e,t){if("category"===e.valueType)for(const i of t)if(i.property===e.property&&i.valueType===e.valueType&&Nw(i.scopes,e.scopes)&&i.validation===e.validation)return i}var Rw=class{constructor(e,t,i){this.ctx=e,this.initializer=t,this.scopeCacheManager=i,this.processValueFactory=new Lw(e)}recomputeDomains(e){const t=this.ctx.debug.check()?performance.now():0,i=e[Cw];let n;const o=e[yw],s=this.setupDefinitionDomains(this.ctx.keys,i,o),r=new Map;for(const c of this.ctx.values){const e=Tw(c,this.ctx.keys);e&&r.set(c,e)}const a=this.setupValueDomainsWithSharing(this.ctx.values,i,s,r),l=new Set;for(const[,c]of r){const e=s.get(c);e&&l.add(e)}this.initializeDomainBands(this.ctx.keys,s,t=>{const i=e.keys[t];return Math.max(...Array.from(i.values()).map(e=>e.length))},e=>String(e.property)),this.initializeDomainBands(this.ctx.values,a,t=>e.columns[t].length,e=>String(e.property));const d=new Map;if(i.size>0){n={totalBands:0,dirtyBands:0,totalData:0};for(const e of i.values())if(e instanceof tw){const t=e.getStats();d.set(e,t),n.totalBands+=t.bandCount,n.dirtyBands+=t.dirtyBandCount,n.totalData=Math.max(n.totalData,t.dataSize)}}if(this.extendDomainsFromData(this.ctx.keys,s,(t,i)=>{var n;return null===(n=e.keys[t])||void 0===n?void 0:n.get(i)},e=>{var t;return null!==(t=e.scopes)&&void 0!==t?t:[]},t=>{var i;return null===(i=e.invalidKeys)||void 0===i?void 0:i.get(t)}),this.extendDomainsFromData(this.ctx.values,a,(t,i)=>e.columns[t],e=>[mu(e.scopes)],t=>{var i;return null===(i=e.invalidKeys)||void 0===i?void 0:i.get(t)},l),e.domain.keys=this.ctx.keys.map(function(e){const t=s.get(e),i=t.getDomain();return ew.is(t)&&i[0]>i[1]?[]:i}),e.domain.values=this.ctx.values.map(function(e){const t=a.get(e),i=t.getDomain();return ew.is(t)&&i[0]>i[1]?[]:i}),"grouped"===e.type&&(e.domain.groups=e.groups.map(e=>e.keys)),this.collectDomainBandingMetadata(e,s,a,i,d),this.ctx.debug.check()&&t>0){const e=performance.now()-t;if(n&&n.totalBands>0){const t=n.dirtyBands/n.totalBands,i=Math.round(t*n.totalData);this.ctx.debug("recomputeDomains with banding: ".concat(e.toFixed(2),"ms, bands: ").concat(n.dirtyBands,"/").concat(n.totalBands," dirty, data scanned: ~").concat(i,"/").concat(n.totalData," (").concat((100*t).toFixed(1),"%)"))}else this.ctx.debug("recomputeDomains: ".concat(e.toFixed(2),"ms (no banding)"))}}setupDefinitionDomains(e,t,i){const n=new Map;for(const[o,s]of e.entries()){const e=null===i||void 0===i?void 0:i.get(o);n.set(s,this.initializer.setupDomainForDefinition(s,t,e))}return n}initializeDomainBands(e,t,i,n){for(const[o,s]of e.entries()){const e=t.get(s);if(!e)continue;const r=i(o);this.initializer.initializeBandedDomain(e,r,n(s))}}extendDomainsFromData(e,t,i,n,o,s){for(const[r,a]of e.entries()){const e=t.get(a);if(e&&(null===s||void 0===s||!s.has(e)))for(const t of n(a)){if(!t)continue;const n=i(r,t);if(!n)continue;const s=o(t);this.initializer.extendDomainFromData(e,n,s)}}}setupValueDomainsWithSharing(e,t,i,n){const o=new Map;for(const s of e){const e=n.get(s);if(e){const t=i.get(e);if(t){o.set(s,t);continue}}o.set(s,this.initializer.setupDomainForDefinition(s,t))}return o}initDataDomainProcessor(e){const{keys:t,values:i}=this.ctx,n=new Set;for(const u of i)if(u.scopes)for(const e of u.scopes)n.add(e);const o=new Map,s=new Map;let r=!0;const a=()=>{for(const i of t)"category"===i.valueType?o.set(i,new JS):o.set(i,new ew);for(const d of i){const i=Tw(d,t);if(i){const t=o.get(i);if(t){var e,s;o.set(d,t),r&&(r=(null!==(e=null===(s=d.scopes)||void 0===s?void 0:s.length)&&void 0!==e?e:0)===n.size);continue}}var a,l;if("category"===d.valueType)o.set(d,new JS);else o.set(d,new ew),r&&(r=(null!==(a=null===(l=d.scopes)||void 0===l?void 0:l.length)&&void 0!==a?a:0)===n.size)}};a();const l=this.scopeCacheManager.buildAccessors(pu(t,i)),d=new WeakMap;for(const u of pu(t,i)){const t=l.get(u.property),i=o.get(u),n={value:void 0,missing:!1,valid:!1},r=this.processValueFactory.createProcessValueFn(u,t,i,n,s,e);d.set(u,r)}function c(e){const t=d.get(e);if(!t)throw new Error("AG Charts - missing processValue function for definition");return t}return{dataDomain:o,processValue:function(e,t,i,n){return c(e)(t,i,n)},getProcessValue:c,initDataDomain:a,scopes:n,allScopesHaveSameDefs:r}}collectDomainBandingMetadata(e,t,i,n,o){var s;null!==(s=e.optimizations)&&void 0!==s||(e.optimizations={});const r=(e,t)=>e.map(e=>{const i=t.get(e),s=n.get(e),r=i instanceof tw;let a,l;if(r||(a="category"===e.valueType?"discrete domain":"not configured"),r&&s){var d;const e=null!==(d=o.get(s))&&void 0!==d?d:s.getStats(),t=e.bandCount>0?e.dirtyBandCount/e.bandCount:0;l={totalBands:e.bandCount,dirtyBands:e.dirtyBandCount,dataSize:e.dataSize,scanRatio:t}}return{property:String(e.property),applied:r,reason:a,stats:l}}),a=r(this.ctx.keys,t),l=r(this.ctx.values,i);e.optimizations.domainBanding={keyDefs:a,valueDefs:l}}};function Ew(){return{lastValue:void 0,sortOrder:0,isUnique:!0,isOrdered:!0}}function Pw(e,t){var i;const n="number"===typeof t?t:null===t||void 0===t||null===(i=t.valueOf)||void 0===i?void 0:i.call(t);if("number"!==typeof n||!Number.isFinite(n))return;if(void 0===e.lastValue)return void(e.lastValue=n);const o=n-e.lastValue;if(0===o)e.isUnique=!1;else if(e.isOrdered){const t=o>0?1:-1;0===e.sortOrder?e.sortOrder=t:e.sortOrder!==t&&(e.isOrdered=!1)}e.lastValue=n}function Ow(e){return{sortOrder:e.isOrdered&&0!==e.sortOrder?e.sortOrder:void 0,isUnique:e.isUnique,isDirty:!1}}var Fw=class{constructor(e,t){this.ctx=e,this.domainManager=t,this.markScopeDatumInvalid=function(e,t,i,n,o){for(const s of e){n.has(s)||(n.set(s,uw(t.length,!1)),o.set(s,0));const e=n.get(s);e[i]||(e[i]=!0,o.set(s,o.get(s)+1))}}}extractData(e){const{dataDomain:t,getProcessValue:i,allScopesHaveSameDefs:n}=this.domainManager.initDataDomainProcessor("extend"),{keys:o,values:s}=this.ctx,{invalidData:r,invalidKeys:a,invalidKeyCount:l,invalidDataCount:d,allKeyMappings:c,keySortOrders:u}=this.extractKeys(o,e,i),{columns:h,columnScopes:p,columnNeedValueOf:g,partialValidDataCount:m,maxDataLength:f}=this.extractValues(r,d,s,e,a,i),v=e=>{const i=t.get(e),n=i.getDomain();return ew.is(i)&&n[0]>n[1]?[]:n};return{type:"ungrouped",input:{count:f},scopes:new Set(e.keys()),dataSources:e,aggregation:void 0,keys:[...c.values()],columns:h,columnScopes:p,columnNeedValueOf:g,invalidKeys:a,invalidKeyCount:l,invalidData:r,invalidDataCount:d,domain:{keys:o.map(v),values:s.map(v)},defs:{allScopesHaveSameDefs:n,keys:o,values:s},partialValidDataCount:m,time:0,version:0,[xw]:new Map,[yw]:u,[bw]:new Map,[Cw]:new Map,[Sw]:new Map}}extractKeys(e,t,i){const n=new Map,o=new Map,s=new Map,r=new Map,a=new Map,l=new Map;let d,c;const u=e.map(e=>i(e)),h=(e,t)=>{const i=c.get(e);d.set(t,d.get(i)),n.has(i)&&(n.set(t,n.get(i)),o.set(t,o.get(i)),r.set(t,r.get(i)))};for(const[m,f]of e.entries()){const{invalidValue:e,scopes:i}=f,v=u[m];d=new Map,c=new Map,a.set(f,d);const y=Ew();for(const a of null!==i&&void 0!==i?i:[]){var p,g;const i=null!==(p=null===(g=t.get(a))||void 0===g?void 0:g.data)&&void 0!==p?p:[];if(c.has(i)){h(i,a);continue}const l=[];let u,m;d.set(a,l),c.set(i,a);let f=0;for(let t=0;t<i.length;t++){if(null==i[t]||"object"!==typeof i[t]){null!==u&&void 0!==u||(u=uw(i.length,!1)),null!==m&&void 0!==m||(m=uw(i.length,!1)),f+=1,u[t]=!0,m[t]=!0,l.push(e);continue}const n=v(i[t],t,a);n.valid?(l.push(n.value),Pw(y,n.value)):(l.push(e),null!==u&&void 0!==u||(u=uw(i.length,!1)),null!==m&&void 0!==m||(m=uw(i.length,!1)),f+=1,u[t]=!0,m[t]=!0)}u&&m&&(n.set(a,u),o.set(a,m),s.set(a,f),r.set(a,f))}l.set(m,Ow(y))}return{invalidData:o,invalidKeys:n,invalidKeyCount:s,invalidDataCount:r,allKeyMappings:a,keySortOrders:l}}extractValues(e,t,i,n,o,s){let r=0;const a=[],l=[],d=[];let c=0;const u=i.map(e=>s(e));for(const[g,m]of i.entries()){var h,p;const{invalidValue:i}=m,s=u[g],f=new Set(m.scopes.map(e=>n.get(e)));if(f.size>1)throw new Error("AG Charts - more than one data source for: ".concat(JSON.stringify(m)));const v=new Set(m.scopes),y=mu(m.scopes),b=null!==(h=null===(p=n.get(y))||void 0===p?void 0:p.data)&&void 0!==h?h:[],x=new Array,C=o.get(y);let S=!1;for(let n=0;n<b.length;n++){if(null==b[n]||"object"!==typeof b[n]){this.markScopeDatumInvalid(m.scopes,b,n,e,t),x[n]=i;continue}const o=b[n],a=null!=C&&C[n],l=s(o,n,m.scopes);let d=l.value;!a&&l.valid||this.markScopeDatumInvalid(m.scopes,b,n,e,t),a?d=i:l.valid||(r+=1,d=i),S||null==d||"object"!==typeof d||(S=!0),x[n]=d}a.push(x),l.push(v),d.push(S),c=Math.max(c,x.length)}return{columns:a,columnScopes:l,columnNeedValueOf:d,partialValidDataCount:r,maxDataLength:c}}warnDataMissingProperties(e){if(0!==e.size)for(const n of pu(this.ctx.keys,this.ctx.values))for(const[o,s]of n.missing){var t,i;if(s<(null!==(t=null===(i=e.get(o))||void 0===i?void 0:i.data.length)&&void 0!==t?t:1/0))continue;const r=null==o?"":" for ".concat(o);jr.warnOnce("the key '".concat(n.property,"' was not found in any data element").concat(r,"."))}}},zw=class{constructor(e){this.ctx=e}groupData(e,t){var i,n,o;const{keys:s,columns:r,columnScopes:a,invalidKeys:l,invalidData:d}=e,c=e.scopes,u=[],h=[],g=1!==c.size||null!=t?new Map:void 0;let m=!0,f=0;const v=c.size,y=this.groupBatches(c,r,a,s,d,l),b=y.length;if(null!==(i=this.ctx.debug)&&void 0!==i&&i.check()&&!e.optimizations&&(e.optimizations={}),null!==(n=this.ctx.debug)&&void 0!==n&&n.check()){const t=v>0?1-b/v:0;e.optimizations.batchMerging={originalBatchCount:v,mergedBatchCount:b,mergeRatio:t}}const x=1===y.length,C=Object.freeze(uw(y[0][1].length,ww));for(const[p,M,k,D,I,A]of y){const e=r[mu(M)];for(let i=0;i<e.length;i++){var S;if(!0===(null===A||void 0===A?void 0:A[i]))continue;const e=k.map(e=>e[i]);if(null==e||0===e.length)throw new Error("AG Charts - no keys found for scope(s): "+p.join(", "));const n=null!==(S=null===t||void 0===t?void 0:t(e))&&void 0!==S?S:e,s=null==g?void 0:aw(n);let r,a,l=null===g||void 0===g?void 0:g.get(s),d=!1;if(null==l?(r={keys:n,datumIndices:[],aggregation:[],validScopes:c},a=f++,l=[a,r],d=!0,null===g||void 0===g||g.set(s,l),u.push(r.keys),h.push(r)):([a,r]=l,m=!1),!0===(null===I||void 0===I?void 0:I[i])){r.validScopes===c&&(r.validScopes=new Set(c.values()));for(const e of D)r.validScopes.delete(e)}if(d&&i===a&&x)r.datumIndices=C;else{d||r.datumIndices!==C||(r.datumIndices=C.map(e=>[...e]));for(const e of M){var w;null!==(w=(o=r.datumIndices)[e])&&void 0!==w||(o[e]=[]),r.datumIndices[e].push(i-a)}}}}return p(p({},e),{},{type:"grouped",domain:p(p({},e.domain),{},{groups:u}),groups:h,groupsUnique:m,optimizations:e.optimizations,[Cw]:e[Cw],[Sw]:e[Sw]})}groupBatches(e,t,i,n,o,s){const r=[],a=new Set;for(const l of e){const e=t.map((e,t)=>t).filter(e=>!a.has(e)&&i[e].has(l));if(0===e.length)continue;for(const t of e)a.add(t);const d=new Set;for(const t of e)for(const e of i[t])d.add(e);const c=n.map(e=>e.get(l)).filter(e=>null!=e),u=null===o||void 0===o?void 0:o.get(l),h=null===s||void 0===s?void 0:s.get(l);r.push([l,e,c,d,u,h])}return this.mergeCompatibleBatches(r)}areBatchesCompatible(e,t){const[,,i,,n,o]=e,[,,s,,r,a]=t;return i.every((e,t)=>e===s[t])&&o===a&&n===r}mergeCompatibleBatches(e){const t=[],i=new Set;for(let n=0;n<e.length;n++){if(i.has(n))continue;const[o,s,r,a,l,d]=e[n],c=[[o],[...s],r,new Set(a),l,d];this.findAndMergeCompatibleBatches(e,n,c,i),t.push(c),i.add(n)}return t}findAndMergeCompatibleBatches(e,t,i,n){const o=e[t];for(let s=t+1;s<e.length;s++){if(n.has(s))continue;const t=e[s],[r,a,,l]=t;if(this.areBatchesCompatible(o,t)){i[0].push(r),i[1].push(...a);for(const e of l)i[3].add(e);n.add(s)}}}};function Bw(e){return 0===e.removedIndices.size&&0===e.totalPrependCount&&e.totalAppendCount>0}function Vw(e){return 0===e.removedIndices.size&&0===e.totalAppendCount&&e.totalPrependCount>0}function Gw(e){return 0===e.removedIndices.size}function Hw(e){return 0===e.removedIndices.size&&0===e.totalPrependCount&&0===e.totalAppendCount&&e.spliceOps.every(e=>0===e.insertCount&&0===e.deleteCount)}function jw(e){return e.removedIndices.size>0&&0===e.totalPrependCount&&0===e.totalAppendCount&&e.spliceOps.every(e=>0===e.insertCount)}function Ww(e){return function(e){const{removedIndices:t}=e;if(0===t.size)return!1;const i=Array.from(t).sort((e,t)=>e-t);if(0!==i[0])return!1;for(let n=0;n<i.length;n++)if(i[n]!==n)return!1;return!0}(e)&&e.totalAppendCount>0&&0===e.totalPrependCount}var _w=class{constructor(e,t){this.indexMap=e,this.prependValues=t.prependValues,this.appendValues=t.appendValues,this.insertionValues=t.insertionValues}getRemovedIndices(){return Array.from(this.indexMap.removedIndices).sort((e,t)=>e-t)}getUpdatedIndices(){return Array.from(this.indexMap.updatedIndices).sort((e,t)=>e-t)}forEachPreservedIndex(e){const{originalLength:t,removedIndices:i,totalPrependCount:n}=this.indexMap;let o=0;const s=Array.from(i).sort((e,t)=>e-t);let r=0;for(let a=0;a<t;a++){for(;r<s.length&&s[r]<a;)o++,r++;if(!i.has(a)){e(a,a+n-o)}}}getPrependedValues(){return this.prependValues}getAppendedValues(){return this.appendValues}getInsertionValues(){return this.insertionValues}applyToArray(e,t,i){const{spliceOps:n,finalLength:o,originalLength:s}=this.indexMap;if(s!==o||0!==n.length){for(const o of n){const n=o.insertCount>0?Array.from({length:o.insertCount},function(e,i){return t(o.index+i)}):[],s=e.splice(o.index,o.deleteCount,...n);i&&s.length>0&&i(s,o)}e.length!==o&&(e.length=o)}}},Kw=class extends QS{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.lastDirtyBandCount=0,this.lastScanRatio=0,this.statsCaptured=!1}createBand(e,t){return{startIndex:e,endIndex:t,cachedResult:void 0,isDirty:!0}}initializeBands(e){super.initializeBands(e),this.statsCaptured=!1}getBands(){return this.bands}evaluateFromData(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=e.reducer();for(const o of this.bands){if(i&&!o.isDirty)continue;const s=e.needsOverlap&&o.startIndex>0?Math.max(0,o.startIndex-1):o.startIndex,r=this.evaluateRange(e,n,t,s,o.endIndex);o.cachedResult=r,o.isDirty=!1}}getResult(e){const t=this.bands.map(e=>e.cachedResult);return e.combineResults(t)}evaluateRange(e,t,i,n,o){let s=e.initialValue;const{keyColumns:r,keysParam:a,rawData:l}=i,d=Math.min(o,l.length);for(let u=n;u<d;u+=1){for(let e=0;e<a.length;e++){var c;a[e]=null===(c=r[e])||void 0===c?void 0:c[u]}s=t(s,a)}return s}captureStatsBeforeProcessing(){const e=this.bands.filter(e=>e.isDirty),t=e.reduce((e,t)=>e+(t.endIndex-t.startIndex),0);this.lastDirtyBandCount=e.length,this.lastScanRatio=this.dataSize>0?t/this.dataSize:0,this.statsCaptured=!0}getStats(){const e=this.bands.filter(e=>!e.isDirty&&void 0!==e.cachedResult);let t,i;if(this.statsCaptured)t=this.lastDirtyBandCount,i=this.lastScanRatio;else{const e=this.bands.filter(e=>e.isDirty),n=e.reduce((e,t)=>e+(t.endIndex-t.startIndex),0);t=e.length,i=this.dataSize>0?n/this.dataSize:0}return{totalBands:this.bands.length,dirtyBands:t,dataSize:this.dataSize,scanRatio:i,cacheHits:e.length}}},Uw=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.bandingConfig=e}static evaluateRange(e,t,i,n,o){let s=e.initialValue;const{keyColumns:r,keysParam:a,rawData:l}=i,d=Math.min(o,l.length);for(let u=n;u<d;u+=1){for(let e=0;e<a.length;e++){var c;a[e]=null===(c=r[e])||void 0===c?void 0:c[u]}s=t(s,a)}return s}evaluate(e,t){var i,n,o;let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r;const a=this.createContext(e,t);if(!a)return;null!==(i=t[r=Sw])&&void 0!==i||(t[r]=new Map);const l=t[Sw],d=e.property;let c=l.get(d);return c||(c=new Kw(this.bandingConfig),l.set(d,c)),0===c.getBandCount()&&c.initializeBands(a.rawData.length),null===(n=s.beforeEvaluate)||void 0===n||n.call(s,c,a),c.captureStatsBeforeProcessing(),c.evaluateFromData(e,a,null!==(o=s.reuseCleanBands)&&void 0!==o&&o),c.getResult(e)}applyIndexMap(e,t){const i=e[Sw];if(i)for(const n of i.values())n.applyIndexMap(t)}createContext(e,t){var i,n;if("ungrouped"!==t.type)return;const o=cw(e)?e.scopes[0]:mu(t.dataSources.keys());if(null==o)return;const s=null!==(i=null===(n=t.dataSources.get(o))||void 0===n?void 0:n.data)&&void 0!==i?i:[],r=t.keys.map(e=>e.get(o)).filter(e=>null!=e),a=r.map(()=>{});return{scopeId:o,rawData:s,keyColumns:r,keysParam:a}}},Yw=class{constructor(e,t){this.ctx=e,this.reducerManager=t}isReprocessingSupported(e){if("grouped"===e.type){var t;if(!e.groupsUnique)return!1;if(1!==this.getUniqueDataSets(e).size)return!1;const i=mu(e.scopes),n=null===(t=e.invalidKeys)||void 0===t?void 0:t.get(i);if(null!==n&&void 0!==n&&n.some(e=>e))return!1}if(this.ctx.aggregates.length>0)return!1;if(this.ctx.reducers.some(e=>!0!==e.supportsBanding||"function"!==typeof e.combineResults))return!1;return!this.ctx.processors.some(e=>void 0===e.incrementalCalculate)&&(!(this.ctx.propertyProcessors.length>0)&&this.ctx.groupProcessors.every(e=>{var t;return null!==(t=e.supportsReprocessing)&&void 0!==t&&t}))}reprocessData(e,t,i,n,o,s){var r;const a=performance.now(),l=this.collectScopeChanges(e,t);if(0===l.size)return e;this.commitPendingTransactions(e);const d=this.buildDefinitionProcessors(this.ctx.keys,i),c=this.buildDefinitionProcessors(this.ctx.values,i),u=this.processAllInsertions(e,l,d,c);this.processAllUpdates(e,l,d,c,u),this.updateBandsForChanges(e,l);const h=this.transformKeysArrays(e,l,u);this.transformColumnsArrays(e,l,u),this.transformInvalidityArrays(e,l,u),this.reprocessBandedReducers(e,l),"grouped"===e.type&&(this.transformGroupsArray(e,l,u),this.ctx.groupProcessors.length>0&&n(e,l)),this.invalidateSortOrdersForChanges(e,l),o(e),this.reprocessProcessors(e),null!=(null===(r=e.reduced)||void 0===r?void 0:r.diff)&&l.size>0&&this.generateDiffMetadata(e,l,h),this.updateProcessedDataMetadata(e);const p=performance.now();e.time=p-a,e.version+=1,s(e,"reprocess");const g=hw(l);return e.changeDescription=1===g.size?g.values().next().value:void 0,e}updateBandsForChanges(e,t){const i=e[Cw];if(0===i.size)return;const n=hw(t);for(const o of n){const{indexMap:e}=o;for(const t of i.values())t.applyIndexMap(e)}}reprocessBandedReducers(e,t){var i;if("ungrouped"!==e.type)return;const n=this.ctx.reducers.filter(e=>e.supportsBanding&&"function"===typeof e.combineResults);if(0!==n.length){null!==(i=e.reduced)&&void 0!==i||(e.reduced={});for(const i of n){const n=this.reducerManager.evaluate(i,e,{reuseCleanBands:!0,beforeEvaluate:(e,i)=>{if(!i.scopeId)return;const n=t.get(i.scopeId);n&&e.applyIndexMap(n.indexMap)}});void 0!==n&&(e.reduced[i.property]=n)}}}collectScopeChanges(e,t){const i=new Map;for(const[o,s]of e.dataSources){var n;const e=null!==(n=null===t||void 0===t?void 0:t.get(s))&&void 0!==n?n:s.getChangeDescription();e&&i.set(o,e)}return i}commitPendingTransactions(e){const t=this.getUniqueDataSets(e);for(const i of t)i.commitPendingTransactions()}buildDefinitionProcessors(e,t){return e.map((e,i)=>({def:e,index:i,processValue:t(e)}))}processAllInsertions(e,t,i,n){const o=new Map;for(const[s,r]of t){const t=e.dataSources.get(s);if(!t)continue;const a=this.processInsertionsOnce(s,r,t,i,n);o.set(s,a)}return o}processAllUpdates(e,t,i,n,o){for(const[s,r]of t){const t=e.dataSources.get(s);if(!t)continue;const a=r.getUpdatedIndices();if(0===a.length)continue;let l=o.get(s);l||(l=new Map,o.set(s,l));for(const e of a){if(e<0||e>=t.data.length)continue;const o=this.processDatum(t,e,s,i,n);o&&l.set(e,o)}}}processInsertionsOnce(e,t,i,n,o){const s=new Map,{finalLength:r}=t.indexMap;for(const a of t.indexMap.spliceOps)if(!(a.insertCount<=0))for(let t=0;t<a.insertCount;t++){const l=a.index+t;if(l<0||l>=r)continue;const d=this.processDatum(i,l,e,n,o);d&&s.set(l,d)}return s}processDatum(e,t,i,n,o){const s=e.data[t],r=new Map,a=new Map;let l=!1,d=!1;if(null==s||"object"!==typeof s)l=!0,d=!0;else{for(const{index:e,def:o,processValue:a}of n){var c;if(null===(c=o.scopes)||void 0===c||!c.includes(i))continue;const n=a(s,t,i);r.set(e,{value:n.value,valid:n.valid}),n.valid||(l=!0)}for(const{index:e,def:n,processValue:r}of o){var u;if(null===(u=n.scopes)||void 0===u||!u.includes(i))continue;const o=r(s,t,n.scopes);a.set(e,{value:o.value,valid:o.valid}),o.valid||(d=!0)}}return{keys:r,values:a,hasInvalidKey:l,hasInvalidValue:d}}transformArraysWithCache(e,t,i,n,o,s){for(const[r,a]of e.entries())for(const e of o(a)){const o=t.get(e);if(!o)continue;const l=n(r,e);if(!l)continue;const d=i.get(e);this.applyChangeDescWithCache(o,l,d,(e,t)=>s(e,a,r))}}transformKeysArrays(e,t,i){const n=new Map,o=e=>{let t=n.get(e);return t||(t={tuples:[]},n.set(e,t)),t},s=new WeakSet;for(const[u,h]of this.ctx.keys.entries())for(const d of null!==(r=h.scopes)&&void 0!==r?r:[]){var r,a;const c=t.get(d);if(!c)continue;const p=null===(a=e.keys[u])||void 0===a?void 0:a.get(d);if(!p)continue;if(s.has(p)){var l;const t=null===(l=Array.from(e.keys[u].entries()).find(e=>{let[t,i]=e;return i===p}))||void 0===l?void 0:l[0];t&&t!==d&&n.has(t)&&n.set(d,n.get(t));continue}s.add(p);const g=i.get(d),m=o(d);let f=0;this.applyChangeDescWithCache(c,p,g,e=>{const t=null===e||void 0===e?void 0:e.keys.get(u);return null!==t&&void 0!==t&&t.valid?t.value:h.invalidValue},e=>{for(const t of e)m.tuples[f]||(m.tuples[f]=new Array(this.ctx.keys.length)),m.tuples[f][u]=t,f+=1})}const d=new Map;for(const[u,{tuples:h}]of n){if(0===h.length)continue;const e=new Set;for(const t of h){const i=[];for(const[e,n]of t.entries()){var c;null!==(c=this.ctx.keys[e].scopes)&&void 0!==c&&c.includes(u)&&i.push(n)}i.length>0&&e.add(aw(i))}d.set(u,e)}return d}transformColumnsArrays(e,t,i){this.transformArraysWithCache(this.ctx.values,t,i,t=>e.columns[t],e=>[mu(e.scopes)],(e,t,i)=>{if(e){if(e.hasInvalidKey)return t.invalidValue;const n=e.values.get(i);return null!==n&&void 0!==n&&n.valid?n.value:t.invalidValue}return t.invalidValue})}transformInvalidityMap(e,t,i,n){const o=new Set;for(const[s,r]of t){let t=e.get(s);if(!t){const o=i.get(s);if(!(o&&Array.from(o.values()).some(n)))continue;t=uw(r.indexMap.originalLength,!1),e.set(s,t)}if(o.has(t))continue;o.add(t);const a=i.get(s);this.applyChangeDescWithCache(r,t,a,(e,t)=>n(e))}}transformInvalidityArrays(e,t,i){e.invalidKeys&&this.transformInvalidityMap(e.invalidKeys,t,i,e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.hasInvalidKey)&&void 0!==t&&t}),e.invalidData&&this.transformInvalidityMap(e.invalidData,t,i,e=>!!e&&(e.hasInvalidKey||e.hasInvalidValue))}applyChangeDescWithCache(e,t,i,n,o){e.applyToArray(t,e=>{const t=null===i||void 0===i?void 0:i.get(e);return n(t,e)},o);const s=e.getUpdatedIndices();if(0!==s.length)for(const r of s){if(r<0||r>=t.length)continue;const e=null===i||void 0===i?void 0:i.get(r);t[r]=n(e,r)}}transformGroupsArray(e,t,i){const n=mu(e.scopes),o=t.get(n);if(!o)return;const s=i.get(n);for(const[,a]of null!==s&&void 0!==s?s:[])if(a.hasInvalidKey)throw new Error("AG Charts - reprocessing grouped data with invalid keys not supported. This typically indicates a data quality issue that requires full reprocessing.");o.applyToArray(e.groups,t=>this.createDataGroupForInsertion(t,e,n,s));const r=o.getUpdatedIndices();if(r.length>0)for(const a of r)a<0||a>=e.groups.length||(e.groups[a]=this.createDataGroupForInsertion(a,e,n,s))}createDataGroupForInsertion(e,t,i,n){var o,s;const r=[];for(const u of t.keys){const t=u.get(i);t&&r.push(t[e])}const a=t.groups[0],l=null!==(o=null===a||void 0===a?void 0:a.datumIndices)&&void 0!==o?o:Object.freeze(uw(t.columnScopes.length,ww)),d=null===n||void 0===n?void 0:n.get(e);let c;return null!==(s=null===d||void 0===d?void 0:d.hasInvalidValue)&&void 0!==s&&s?(c=new Set(t.scopes),c.delete(i)):c=t.scopes,{keys:r,datumIndices:l,aggregation:[],validScopes:c}}generateDiffMetadata(e,t,i){const n=(t,i)=>{const n=[];for(const o of e.keys){const e=o.get(t);if(!e)return;n.push(e[i])}return n.length>0?aw(n):void 0};for(const[s,r]of t){var o;const t={changed:!0,added:new Set,removed:null!==(o=i.get(s))&&void 0!==o?o:new Set,updated:new Set,moved:new Set};for(const e of r.indexMap.spliceOps)if(e.insertCount>0)for(let i=0;i<e.insertCount;i++){const o=e.index+i,r=n(s,o);r&&t.added.add(r)}const{originalLength:a,totalPrependCount:l}=r.indexMap;if(Bw(r.indexMap));else if(Vw(r.indexMap)&&a>0)for(let e=l;e<l+a;e++){const i=n(s,e);i&&t.moved.add(i)}else if(Gw(r.indexMap)&&l>0)for(let e=0;e<a;e++){const i=n(s,e+l);i&&t.moved.add(i)}else r.forEachPreservedIndex((e,i)=>{if(e!==i){const e=n(s,i);e&&t.moved.add(e)}});e.reduced.diff[s]=t}}updateProcessedDataMetadata(e){let t=0;for(const s of e.dataSources.values())t=Math.max(t,s.data.length);e.input.count=t;let i=0;for(const[s,r]of null!==(n=e.invalidData)&&void 0!==n?n:new Map){var n,o;const t=null===(o=e.invalidKeys)||void 0===o?void 0:o.get(s);for(let e=0;e<r.length;e++)!r[e]||null!==t&&void 0!==t&&t[e]||(i+=1)}e.partialValidDataCount=i,this.recountInvalid(e.invalidKeys,e.invalidKeyCount),this.recountInvalid(e.invalidData,e.invalidDataCount),this.invalidateCachesForChanges(e)}updateSortOrderForAppend(e,t,i){if(0===i.length)return;const n=e=>"number"===typeof e?e:e instanceof Date?e.valueOf():void 0;let o=n(t);const s=e.sortOrder;for(const r of i){const t=n(r);if(void 0===t)continue;if(void 0===o){o=t;continue}const i=t-o;if(0===i&&(e.isUnique=!1),void 0!==e.sortOrder){let t=0;i>0?t=1:i<0&&(t=-1),0!==t&&t!==s&&(e.sortOrder=void 0)}o=t}}updateKeySortOrdersForAppend(e,t){for(const[i,n]of e.keys.entries()){const o=e[yw].get(i);if(!o)continue;const s=mu(n.values());if(!s||s.length<=t)continue;const r=t>0?s[t-1]:void 0,a=s.slice(t);this.updateSortOrderForAppend(o,r,a)}}invalidateSortOrdersForChanges(e,t){const i=hw(t);let n,o,s=!0,r=!1,a=!1;for(const l of i){const{indexMap:e}=l;Hw(e)||(Bw(e)?(r=!0,n=e.originalLength):jw(e)||(Ww(e)?(a=!0,o={originalLength:e.originalLength,removedCount:e.removedIndices.size}):s=!1))}s?r&&void 0!==n?this.updateKeySortOrdersForAppend(e,n):a&&o&&this.updateKeySortOrdersForRollingWindow(e,o):(e[yw].clear(),e[bw].clear())}updateKeySortOrdersForRollingWindow(e,t){const{originalLength:i,removedCount:n}=t;for(const[o,s]of e.keys.entries()){const t=e[yw].get(o);if(!t)continue;const r=mu(s.values());if(!r||0===r.length)continue;const a=i-n,l=a>0?r[a-1]:void 0,d=r.slice(a);this.updateSortOrderForAppend(t,l,d)}}invalidateCachesForChanges(e){this.markDomainRangesDirty(e[xw])}markDomainRangesDirty(e){for(const t of e.values())t.isDirty=!0}recountInvalid(e,t){if(e&&t)for(const[i,n]of e){const o=n.filter(Boolean).length;0===o?(e.delete(i),t.delete(i)):t.set(i,o)}}reprocessProcessors(e){var t;if(0!==this.ctx.processors.length){null!==(t=e.reduced)&&void 0!==t||(e.reduced={});for(const t of this.ctx.processors){var i,n;const o=e.reduced[t.property],s=null!==(i=null===(n=t.incrementalCalculate)||void 0===n?void 0:n.call(t,e,o))&&void 0!==i?i:t.calculate(e,o);e.reduced[t.property]=s}}}getUniqueDataSets(e){return new Set(e.dataSources.values())}},$w=class e{constructor(t){this.isDirty=!1;const i=t.reduce((e,t)=>Math.max(e,t.length),0),{maxLevelSize:n,buffer:o}=e.createBuffer(i);this.maxLevelSize=n,this.buffer=o,this.dataLength=i,this.populateBuffer(t)}static computeMaxLevelSize(e){let t=1<<32-Math.clz32(e);return e===t/2&&(t>>>=1),t}static createBuffer(t){const i=e.computeMaxLevelSize(t);return{maxLevelSize:i,buffer:new Float64Array(2*(2*i-1)).fill(Number.NaN)}}populateBuffer(e){const{maxLevelSize:t,buffer:i}=this,n=t-1;for(const o of e){const e=o.length;for(let t=0;t<e;t+=1){const e=Number(o[t]);if(e!==e)continue;const s=n+t<<1,r=i[s],a=i[s+1];(r!==r||e<r)&&(i[s]=e),(a!==a||e>a)&&(i[s+1]=e)}}for(let o=t>>>1;o>=1;o>>>=1){const e=o-1;let t=e<<1,n=e+o<<1;for(let s=0;s<o;s+=1){const e=n+2,o=i[n],s=i[e];i[t]=s!==s||o<s?o:s;const r=i[n+1],a=i[e+1];i[t+1]=a!==a||r>a?r:a,t+=2,n+=4}}}rebuild(t){const i=t.reduce((e,t)=>Math.max(e,t.length),0);if(e.computeMaxLevelSize(i)===this.maxLevelSize)this.buffer.fill(Number.NaN);else{const{maxLevelSize:t,buffer:n}=e.createBuffer(i);this.maxLevelSize=t,this.buffer=n}this.dataLength=i,this.populateBuffer(t)}updateValue(e,t){const{maxLevelSize:i,buffer:n}=this,o=i+e-1,s=Math.trunc(2*o)+0,r=Math.trunc(2*o)+1;n[s]=Number.NaN,n[r]=Number.NaN;for(const a of t){const e=Number(a),t=n[s],i=n[r];(!Number.isFinite(t)||e<t)&&(n[s]=e),(!Number.isFinite(i)||e>i)&&(n[r]=e)}this.propagateUp(o)}updateValues(e){for(const{index:t,values:i}of e)this.updateValue(t,i)}propagateUp(e){const{buffer:t}=this;for(;e>0;){const i=Math.trunc((e-1)/2),n=2*i+1,o=2*i+2,s=t[Math.trunc(2*n)+0],r=t[Math.trunc(2*n)+1],a=t[Math.trunc(2*o)+0],l=t[Math.trunc(2*o)+1];t[Math.trunc(2*i)+0]=!Number.isFinite(a)||s<a?s:a,t[Math.trunc(2*i)+1]=!Number.isFinite(l)||r>l?r:l,e=i}}computeRangeInto(e,t,i,n,o,s,r){const a=o+s-1;if(a<t||o>=i)return r;if(o>=t&&a<i){const t=e[Math.trunc(2*n)+0],i=e[Math.trunc(2*n)+1];Number.isFinite(t)&&(r[0]=Math.min(r[0],t)),Number.isFinite(i)&&(r[1]=Math.max(r[1],i))}else s>1&&(n=Math.trunc(2*n),s=Math.trunc(s/2),this.computeRangeInto(e,t,i,Math.trunc(n+1),o,s,r),this.computeRangeInto(e,t,i,Math.trunc(n+2),o+s,s,r));return r}rangeBetween(e,t,i){const n=null!==i&&void 0!==i?i:[0,0];if(e>t)return n[0]=Number.NaN,n[1]=Number.NaN,n;const{maxLevelSize:o,buffer:s}=this;return n[0]=1/0,n[1]=-1/0,this.computeRangeInto(s,e,t,0,0,o,n),n}getRange(e){const{buffer:t}=this,i=null!==e&&void 0!==e?e:[0,0];return i[0]=t[0],i[1]=t[1],i}get range(){const{buffer:e}=this;return[e[0],e[1]]}get length(){return this.dataLength}};function Zw(e,t){const i=e.length;if(e.length<=1)return 1;let n=0,o=e[0];for(let s=1;s<i;s++){const i=e[s];if(null==i)continue;if("number"!==typeof(t?i.valueOf():i))return;const r=Math.sign(i-o);if(0!==r){if(0!==n&&n!==r)return;n=r}o=i}return 0===n?1:n}var Xw=class{constructor(e){this.ctx=e,this.rangeBetweenBuffer=[0,0]}resolveMissingDataCount(e){let t=0;for(const n of this.ctx.values){var i;t=Math.max(t,null!==(i=n.missing.get(e.id))&&void 0!==i?i:0)}return t}resolveProcessedDataDefById(e,t){var i;const n=null===(i=this.ctx.scopeCache.get(e.id))||void 0===i?void 0:i.get(t);if(!n)throw new Error("AG Charts - didn't find property definition for [".concat(t,", ").concat(e.id,"]"));return{index:n.index,def:n}}resolveProcessedDataIndexById(e,t){return this.resolveProcessedDataDefById(e,t).index}resolveKeysById(e,t,i){const n=this.resolveProcessedDataIndexById(e,t),o=i.keys[n];if(null==o)throw new Error("AG Charts - didn't find keys for [".concat(t,", ").concat(e.id,"]"));return o.get(e.id)}hasColumnById(e,t){var i;return null!=(null===(i=this.ctx.scopeCache.get(e.id))||void 0===i?void 0:i.get(t))}resolveColumnById(e,t,i){var n;const o=this.resolveProcessedDataIndexById(e,t),s=null===(n=i.columns)||void 0===n?void 0:n[o];if(null==s)throw new Error("AG Charts - didn't find column for [".concat(t,", ").concat(e.id,"]"));return s}resolveColumnNeedsValueOf(e,t,i){var n,o;const s=this.resolveProcessedDataIndexById(e,t);return null===(n=null===(o=i.columnNeedValueOf)||void 0===o?void 0:o[s])||void 0===n||n}resolveAbsoluteIndex(e,t){return e+t}getDomain(e,t,i,n){var o;const s=this.getDomainsByType(null!==i&&void 0!==i?i:"value",n);return null!==(o=null===s||void 0===s?void 0:s[this.resolveProcessedDataIndexById(e,t)])&&void 0!==o?o:[]}getDomainBetweenRange(e,t,i,n){let[o,s]=i;const r=t.map(t=>this.resolveProcessedDataIndexById(e,t)),a=n.input.count;if(o<=0&&s>=a){const e=n.domain.values;let t=1/0,i=-1/0;for(const n of r){const o=e[n];null!=o&&(o[0]<t&&(t=o[0]),o[1]>i&&(i=o[1]))}return this.rangeBetweenBuffer[0]=t,this.rangeBetweenBuffer[1]=i,this.rangeBetweenBuffer}const l=r.join(":"),d=n[xw],c=r.map(e=>n.columns[e]);let u=d.get(l);return null==u?(u=new $w(c),d.set(l,u)):u.isDirty&&(u.rebuild(c),u.isDirty=!1),u.rangeBetween(o,s,this.rangeBetweenBuffer)}getSortOrder(e,t,i,n){const o=i.get(t);if(null==o||o.isDirty){const o={sortOrder:Zw(e,n)};return i.set(t,o),o.sortOrder}return o.sortOrder}getKeySortOrder(e,t,i){var n;const o=this.resolveProcessedDataIndexById(e,t),s=null===(n=i.keys[o])||void 0===n?void 0:n.get(e.id);return s?this.getSortOrder(s,o,i[yw],!0):void 0}getKeySortEntry(e,t,i){const n=this.resolveProcessedDataIndexById(e,t),o=i[yw].get(n);return null!==o&&void 0!==o&&o.isDirty?void 0:o}getColumnSortOrder(e,t,i){var n,o;const s=this.resolveProcessedDataIndexById(e,t),r=null===(n=null===(o=i.columnNeedValueOf)||void 0===o?void 0:o[s])||void 0===n||n;return this.getSortOrder(i.columns[s],s,i[bw],r)}getDomainsByType(e,t){switch(e){case"key":return t.domain.keys;case"value":return t.domain.values;case"aggregate":return t.domain.aggValues;case"group-value-processor":return t.domain.groups;default:return null}}},qw=class{constructor(e){this.ctx=e}processScopeCache(){this.ctx.scopeCache.clear();for(const t of pu(this.ctx.keys,this.ctx.values,this.ctx.aggregates))if(t.idsMap)for(const[i,n]of t.idsMap)for(const o of n){var e;if(this.ctx.scopeCache.has(i)){if(null!==(e=this.ctx.scopeCache.get(i))&&void 0!==e&&e.has(o))throw new Error("duplicate definition ids on the same scope are not allowed.");this.ctx.scopeCache.get(i).set(o,t)}else this.ctx.scopeCache.set(i,new Map([[o,t]]))}}valueGroupIdxLookup(e){let{matchGroupIds:t}=e;const i=[];for(const[n,o]of this.ctx.values.entries())(!t||o.groupId&&t.includes(o.groupId))&&i.push(n);return i}valueIdxLookup(e,t){const i=null==e||0===e.length,n="string"===typeof t?t:t.id,o=this.ctx.values.reduce((t,o,s)=>{const r=null==o.scopes||i&&!o.scopes.length||o.scopes.some(t=>null===e||void 0===e?void 0:e.includes(t));return r&&(o.property===n||o.id===n||(t=>{if(t.idsMap)for(const[i,o]of t.idsMap)if(null!==e&&void 0!==e&&e.includes(i)&&o.has(n))return!0;return!1})(o))&&t.push(s),t},[]);if(0===o.length)throw new Error("AG Charts - configuration error, unknown property ".concat(JSON.stringify(t)," in scope(s) ").concat(JSON.stringify(e)));return o}buildAccessors(e){const t=new Map;if(this.ctx.suppressFieldDotNotation)return t;for(const i of e){if(!(i.property.includes(".")||i.property.includes("[")))continue;const e=gw(i.property);if(null==e){jr.warnOnce("Invalid property path [%s]",i.property);continue}const n=mw(e);t.set(i.property,n)}return t}},Qw=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"standalone",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;this.opts=e,this.mode=t,this.suppressFieldDotNotation=i,this.eventsHub=n,this.debug=Cr.create(!0,"data-model"),this.scopeCache=new Map,this.keys=[],this.values=[],this.aggregates=[],this.groupProcessors=[],this.propertyProcessors=[],this.reducers=[],this.processors=[];let o=!0;for(const d of e.props){if("key"===d.type&&!o)throw new Error("AG Charts - internal config error: keys must come before values.");"value"===d.type&&o&&(o=!1)}const s=e=>{let{matchGroupIds:t=[]}=e;for(const i of t)if(this.values.every(e=>e.groupId!==i))throw new Error("AG Charts - internal config error: matchGroupIds properties must match defined groups (".concat(i,")."))},r=new Set,a=new Set;for(const d of e.props){const e="key"===d.type?r:a;if(cw(d)&&d.scopes)for(const t of d.scopes)e.add(t);switch(d.type){case"key":this.keys.push(p(p({},d),{},{index:this.keys.length,missing:new Map}));break;case"value":if(null==d.property)throw new Error("AG Charts - internal config error: no properties specified for value definitions: ".concat(JSON.stringify(d)));this.values.push(p(p({},d),{},{index:this.values.length,missing:new Map}));break;case"aggregate":s(d),this.aggregates.push(p(p({},d),{},{index:this.aggregates.length}));break;case"group-value-processor":s(d),this.groupProcessors.push(p(p({},d),{},{index:this.groupProcessors.length}));break;case"property-value-processor":this.propertyProcessors.push(p(p({},d),{},{index:this.propertyProcessors.length}));break;case"reducer":this.reducers.push(p(p({},d),{},{index:this.reducers.length}));break;case"processor":this.processors.push(p(p({},d),{},{index:this.processors.length}))}}if(this.opts.groupByKeys||null!=this.opts.groupByFn){const e=new Set(a.values());for(const t of r)e.delete(t);if(e.size>0)throw new Error("AG Charts - scopes missing key for grouping, illegal configuration: ".concat([...e.values()]))}const l={keys:this.keys,values:this.values,aggregates:this.aggregates,groupProcessors:this.groupProcessors,propertyProcessors:this.propertyProcessors,reducers:this.reducers,processors:this.processors,debug:this.debug,mode:this.mode,bandingConfig:this.opts.domainBandingConfig,suppressFieldDotNotation:this.suppressFieldDotNotation,scopeCache:this.scopeCache};this.resolvers=new Xw(l),this.scopeCacheManager=new qw(l),this.domainInitializer=new vw(l),this.domainManager=new Rw(l,this.domainInitializer,this.scopeCacheManager),this.reducerManager=new Uw(this.opts.domainBandingConfig),this.dataExtractor=new Fw(l,this.domainManager),this.dataGrouper=new zw(l),this.aggregator=new fw(l,this.scopeCacheManager,this.resolvers),this.incrementalProcessor=new Yw(l,this.reducerManager)}resolveProcessedDataDefById(e,t){return this.resolvers.resolveProcessedDataDefById(e,t)}resolveProcessedDataIndexById(e,t){return this.resolvers.resolveProcessedDataIndexById(e,t)}resolveKeysById(e,t,i){return this.resolvers.resolveKeysById(e,t,i)}hasColumnById(e,t){return this.resolvers.hasColumnById(e,t)}resolveColumnById(e,t,i){return this.resolvers.resolveColumnById(e,t,i)}resolveColumnNeedsValueOf(e,t,i){return this.resolvers.resolveColumnNeedsValueOf(e,t,i)}resolveMissingDataCount(e){return this.resolvers.resolveMissingDataCount(e)}*forEachDatum(e,t,i,n){const o=t.columnScopes.findIndex(t=>t.has(e.id));for(const r of null!==(s=i.datumIndices[o])&&void 0!==s?s:[]){var s;const e=this.resolvers.resolveAbsoluteIndex(n,r);yield t.columns[o][e]}}getUniqueDataSets(e){return new Set(e.dataSources.values())}*forEachGroupDatum(e,t){const i=t.columnScopes.findIndex(t=>t.has(e.id)),n={groupIndex:0,columnIndex:i},o=[];for(const r of t.groups){n.group=r;for(const e of null!==(s=r.datumIndices[i])&&void 0!==s?s:o){var s;n.datumIndex=this.resolvers.resolveAbsoluteIndex(n.groupIndex,e),yield n}n.groupIndex++}}getDomain(e,t,i,n){const o=this.resolvers.getDomain(e,t,i,n);if("key"===i&&o.length>0){return{domain:o,sortMetadata:this.getKeySortMetadata(e,t,n)}}return{domain:o}}getDomainBetweenRange(e,t,i,n){let[o,s]=i;return this.resolvers.getDomainBetweenRange(e,t,[o,s],n)}getKeySortOrder(e,t,i){return this.resolvers.getKeySortOrder(e,t,i)}getColumnSortOrder(e,t,i){return this.resolvers.getColumnSortOrder(e,t,i)}getKeySortMetadata(e,t,i){const n=this.resolvers.getKeySortEntry(e,t,i);if(null!=(null===n||void 0===n?void 0:n.sortOrder))return{sortOrder:n.sortOrder,isUnique:n.isUnique}}processData(e){const{opts:{groupByKeys:t,groupByFn:i},aggregates:n,groupProcessors:o,reducers:s,processors:r,propertyProcessors:a}=this,l=performance.now();if(t&&0===this.keys.length)return;let d=this.extractData(e);t?d=this.dataGrouper.groupData(d):i&&(d=this.dataGrouper.groupData(d,i(d))),o.length>0&&"grouped"===d.type&&this.aggregator.postProcessGroups(d),n.length>0&&"ungrouped"===d.type?this.aggregator.aggregateUngroupedData(d):n.length>0&&"grouped"===d.type&&this.aggregator.aggregateGroupedData(d),a.length>0&&this.postProcessProperties(d),s.length>0&&this.reduceData(d),r.length>0&&this.postProcessData(d),this.warnDataMissingProperties(e);const c=performance.now();return d.time=c-l,d.version+=1,this.collectOptimizationMetadata(d,"full-process"),this.debug.check()&&function(e){var t;const i=(e,t)=>{t.length>0&&(jr.log("DataModel.processData() - ".concat(e)),jr.table(t))};if(jr.log("DataModel.processData() - processedData",e),i("Key Domains",e.domain.keys),i("Value Domains",e.domain.values),i("Aggregate Domains",null!==(t=e.domain.aggValues)&&void 0!==t?t:[]),e.optimizations){jr.log("DataModel.processData() - Optimization Summary");const t=e.optimizations;if(t.performance&&jr.log("  Performance: ".concat(t.performance.processingTime.toFixed(2),"ms (").concat(t.performance.pathTaken,")")),t.reprocessing){const e=t.reprocessing.applied?"\u2713":"\u2717",i=t.reprocessing.reason?" (".concat(t.reprocessing.reason,")"):"";jr.log("  Reprocessing: ".concat(e).concat(i))}if(t.domainBanding){const e=t.domainBanding.keyDefs.filter(e=>e.applied),i=t.domainBanding.valueDefs.filter(e=>e.applied),n=e.length+i.length,o=t.domainBanding.keyDefs.length+t.domainBanding.valueDefs.length;if(n>0){jr.log("  Domain Banding: \u2713 (".concat(n,"/").concat(o," definitions)"));for(const t of[...e,...i])if(t.stats){const e=(100*t.stats.scanRatio).toFixed(1);jr.log("    ".concat(t.property,": scanned ").concat(t.stats.dirtyBands,"/").concat(t.stats.totalBands," bands (").concat(e,"%)"))}}else{const e=[...t.domainBanding.keyDefs.filter(e=>!e.applied).map(e=>e.reason),...t.domainBanding.valueDefs.filter(e=>!e.applied).map(e=>e.reason)],i=[...new Set(e)].join(", ");jr.log("  Domain Banding: \u2717 (".concat(i,")"))}}if(t.sharedDatumIndices){const e=t.sharedDatumIndices.applied?"\u2713":"\u2717",i="".concat(t.sharedDatumIndices.sharedGroupCount,"/").concat(t.sharedDatumIndices.totalGroupCount);jr.log("  Shared DatumIndices: ".concat(e," (").concat(i," groups)"))}if(t.batchMerging){const e=(100*t.batchMerging.mergeRatio).toFixed(0),i="".concat(t.batchMerging.originalBatchCount," \u2192 ").concat(t.batchMerging.mergedBatchCount);jr.log("  Batch Merging: ".concat(i," (").concat(e,"% reduction)"))}}}(d),this.processScopeCache(),d}isReprocessingSupported(e){return this.incrementalProcessor.isReprocessingSupported(e)}reprocessData(e,t){if(!this.isReprocessingSupported(e)){this.debug.check()&&this.debug("Falling back to full reprocessing - incremental not supported for current configuration");const t=this.getUniqueDataSets(e);for(const e of t)e.commitPendingTransactions();return this.processData(e.dataSources)}const{getProcessValue:i}=this.initDataDomainProcessor("skip");return this.incrementalProcessor.reprocessData(e,t,i,this.reprocessGroupProcessors.bind(this),this.recomputeDomains.bind(this),this.collectOptimizationMetadata.bind(this))}recomputeDomains(e){this.domainManager.recomputeDomains(e)}warnDataMissingProperties(e){this.dataExtractor.warnDataMissingProperties(e)}processScopeCache(){this.scopeCacheManager.processScopeCache()}valueGroupIdxLookup(e){return this.scopeCacheManager.valueGroupIdxLookup(e)}valueIdxLookup(e,t){return this.scopeCacheManager.valueIdxLookup(e,t)}extractData(e){return this.dataExtractor.extractData(e)}reprocessGroupProcessors(e,t){const{groupProcessors:i}=this,{columns:n}=e;for(const s of i)if(!s.supportsReprocessing)throw new Error("AG Charts - attempted to reprocess group processor that does not support reprocessing. This is an internal error that should not occur.");const o=hw(t);for(const s of i){const t=this.valueGroupIdxLookup(s),i=s.adjust()();for(const s of o){const{indexMap:o}=s;for(const s of o.spliceOps)if(s.insertCount>0)for(let o=0;o<s.insertCount;o++){const r=s.index+o;i(n,t,e.groups[r],r)}}}}postProcessProperties(e){for(const{adjust:t,property:i,scopes:n}of this.propertyProcessors)for(const o of this.valueIdxLookup(n,i))t()(e,o)}reduceData(e){var t;null!==(t=e.reduced)&&void 0!==t||(e.reduced={});for(const i of this.reducers)this.shouldUseReducerBanding(i,e)?e.reduced[i.property]=this.reduceWithBands(i,e):e.reduced[i.property]=this.reduceStandard(i,e)}shouldUseReducerBanding(e,t){return"ungrouped"===t.type&&!0===e.supportsBanding&&"function"===typeof e.combineResults}reduceWithBands(e,t){const i=this.reducerManager.evaluate(e,t,{reuseCleanBands:!1});return void 0===i?this.reduceStandard(e,t):i}reduceStandard(e,t){var i,n;const o=e.reducer();if("grouped"===t.type){let i=e.initialValue;for(const e of t.groups)i=o(i,e.keys);return i}const s=cw(e)?e.scopes[0]:mu(t.scopes);if(null==s)return e.initialValue;const r=null!==(i=null===(n=t.dataSources.get(s))||void 0===n?void 0:n.data)&&void 0!==i?i:[],a=t.keys.map(e=>e.get(s)).filter(e=>null!=e),l=a.map(()=>{});return Uw.evaluateRange(e,o,{rawData:r,keyColumns:a,keysParam:l},0,r.length)}postProcessData(e){var t;null!==(t=e.reduced)&&void 0!==t||(e.reduced={});for(const o of this.processors)e.reduced[o.property]=o.calculate(e,e.reduced[o.property]);const{diff:i}=e.reduced;var n;i&&(null===(n=this.eventsHub)||void 0===n||n.emit("datamodel:diff",{diff:i}))}initDataDomainProcessor(e){return this.domainManager.initDataDomainProcessor(e)}collectOptimizationMetadata(e,t){var i,n;const o=null===(i=e.optimizations)||void 0===i?void 0:i.domainBanding,s=e[Sw];this.reducers.length>0&&s&&this.collectReducerBandingMetadata(e,s);const r=null===(n=e.optimizations)||void 0===n?void 0:n.reducerBanding;e.optimizations=p(p({performance:{processingTime:e.time,pathTaken:t}},o&&{domainBanding:o}),r&&{reducerBanding:r});const a="reprocess"===t;let l;if(!this.isReprocessingSupported(e)){const t=[];if("grouped"===e.type){var d;e.groupsUnique||t.push("groupsUnique=false");1!==this.getUniqueDataSets(e).size&&t.push("multiple data sources");const i=mu(e.scopes),n=null===(d=e.invalidKeys)||void 0===d?void 0:d.get(i);null!==n&&void 0!==n&&n.some(e=>e)&&t.push("has invalid keys")}this.aggregates.length>0&&t.push("has aggregates"),this.reducers.filter(e=>!e.supportsBanding).length>0&&t.push("has reducers"),this.processors.filter(e=>void 0===e.incrementalCalculate).length>0&&t.push("has processors"),this.propertyProcessors.length>0&&t.push("has property processors"),l=t.length>0?t.join(", "):void 0}if(e.optimizations.reprocessing={applied:a,reason:l},"grouped"===e.type){let t=0;const i=e.groups[0];if(i){const n=i.datumIndices;for(const i of e.groups)i.datumIndices===n&&t++}e.optimizations.sharedDatumIndices={applied:t>0,sharedGroupCount:t,totalGroupCount:e.groups.length}}}collectReducerBandingMetadata(e,t){var i;if(0===this.reducers.length)return;null!==(i=e.optimizations)&&void 0!==i||(e.optimizations={});const n=[];for(const o of this.reducers){const i=t.get(o.property),s=this.shouldUseReducerBanding(o,e)&&null!=i;let r,a;s||(r=!0!==o.supportsBanding?"reducer does not support banding":"ungrouped"!==e.type?"grouped data not supported":void 0===o.combineResults?"missing combineResults function":"banding not applied"),s&&i&&(a=i.getStats()),n.push({property:String(o.property),applied:s,reason:r,stats:a})}e.optimizations.reducerBanding={reducers:n}}buildAccessors(e){return this.scopeCacheManager.buildAccessors(e)}};function Jw(e,t,i){const n=e.filter(e=>"number"===typeof e&&Number.isFinite(e));return n.length>0?i(n):t}function eM(e){return e.input.count<=1e3}function tM(e){return null!=e&&dv(e)}function iM(e){return null!=e}function nM(e){switch(e){case"number":case"log":case"time":case"unit-time":case"ordinal-time":case"color":return tM;default:return iM}}function oM(e){switch(e){case"number":case"log":case"time":case"color":return"range";default:return"category"}}function sM(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return p({property:e,type:"key",valueType:oM(t),validation:nM(t)},i)}function rM(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return p({property:e,type:"value",valueType:oM(t),validation:nM(t)},i)}var aM=function(e){return e};function lM(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=t.filter(e=>null!=e);return 0===n.length?()=>aM:1===n.length?n[0]:function(){const e=n.map(e=>e());return function(t,i){return e.reduce((e,t)=>t(e,i),t)}}}function dM(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{onlyPositive:n,processor:o}=i;return p(p({},rM(e,t,l(i,tb))),{},{processor:lM(o,rw(n))})}function cM(e,t){return p(p({},rM(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})),{},{processor:()=>{let e=0;return t=>{if(!ol(t))return t;const i=e;return e+=t,i}}})}function uM(e,t,i,n){return[rM(e,n,i),MM(i.groupId,t,i.separateNegative),...null==i.rangeId?[]:[nw(i.rangeId,i.groupId)]]}var hM={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer(){let e=Number.NaN;return function(t,i){const n=i[0],o="number"===typeof n?n:Number(n);if(!Number.isFinite(o))return t;const s=e;if(e=o,!Number.isFinite(e))return t;const r=Math.abs(o-s),a=null!==t&&void 0!==t?t:1/0;return r>0&&r<a?r:a}},supportsBanding:!0,combineResults:e=>Jw(e,1/0,e=>Math.min(...e)),needsOverlap:!0},pM={type:"reducer",property:"largestKeyInterval",initialValue:-1/0,reducer(){let e=Number.NaN;return function(t,i){const n=i[0],o="number"===typeof n?n:Number(n);if(!Number.isFinite(o))return t;const s=e;if(e=o,!Number.isFinite(e))return t;const r=Math.abs(o-s),a=null!==t&&void 0!==t?t:-1/0;return r>0&&r>a?r:a}},supportsBanding:!0,combineResults:e=>Jw(e,-1/0,e=>Math.max(...e)),needsOverlap:!0},gM={type:"processor",property:"sortedGroupDomain",calculate:function(e){let{domain:{groups:t}}=e;return null===t||void 0===t?void 0:t.slice().sort((e,t)=>{for(let i=0;i<e.length;i++){const n=e[i]-t[i];if(0!==n)return n}return 0})}};function mM(e){let{normaliseTo:t}=e;const i=(e,i)=>{if(0===i)return 0;const n=(null!==e&&void 0!==e?e:0)*t/i;return n>=0?Math.min(t,n):Math.max(-t,n)};return()=>()=>(e,t,n,o)=>{const s=function(e,t,i,n){const o=[0,0];for(const s of t){const t=e[s],r=i.datumIndices[s];if(null!=r)for(const e of r){const i=t[n+e];if(null==i)continue;const s="number"===typeof i?i:Math.max(...i.map(e=>null!==e&&void 0!==e?e:0)),r=s<0?0:1;o[r]=0===r?Math.min(o[r],s):Math.max(o[r],s)}}return Math.max(Math.abs(o[0]),o[1])}(e,t,n,o);for(const r of t){const t=n.datumIndices[r];if(null!=t)for(const n of t){const t=o+n,a=e[r],l=a[t];null!=l?a[t]=i(l,s):a[t]=void 0}}}}function fM(e,t){return{type:"group-value-processor",matchGroupIds:e,adjust:km({normaliseTo:t},mM)}}function vM(e){let{normaliseTo:t,zeroDomain:i,rangeMin:n,rangeMax:o}=e;const s=t[1]-t[0],r=function(e,n,o){const r=t[0]+(e-n)/o*s;return 0===o?i:r>=t[1]?t[1]:r<t[0]?t[0]:r};return function(){return function(e,i){let[s,a]=e.domain.values[i];null!=n&&(s=n),null!=o&&(a=o);const l=a-s;e.domain.values[i]=[t[0],t[1]];const d=e.columns[i];for(let t=0;t<d.length;t+=1)d[t]=r(d[t],s,l)}}}function yM(e,t,i,n,o){return{type:"property-value-processor",property:e,adjust:km({normaliseTo:t,rangeMin:n,rangeMax:o,zeroDomain:i},vM)}}function bM(e,t,i){var n;let o=3;if("category"===e.valueType)return t.length<i.length&&(o&=-2),o;let s=null===(n=i[0])||void 0===n?void 0:n.valueOf();for(let a=1;0!==o&&a<i.length;a++){var r;const e=null===(r=i[a])||void 0===r?void 0:r.valueOf();(!Number.isFinite(e)||s>e)&&(o&=-3),Number.isFinite(e)&&s===e&&(o&=-2),s=e}return o}function xM(e){return function(t,i){if(!eM(t))return;const{keys:n,values:o}=t.defs,{input:s,domain:{values:r},columns:a}=t;let l=!0,d=!0;if(0!==s.count){const i=t[yw];for(let e=0;(l||d)&&e<n.length;e++){const o=n[e],s=i.get(e);if("category"===o.valueType){var c,u,h,p;(null!==(c=null===(u=t.domain.keys[e])||void 0===u?void 0:u.length)&&void 0!==c?c:0)<(null!==(h=null===(p=t.keys[e])||void 0===p||null===(p=p.values().next().value)||void 0===p?void 0:p.length)&&void 0!==h?h:0)&&(l=!1)}else s&&(!1===s.isUnique&&(l=!1),1!==s.sortOrder&&(d=!1))}if(e&&e.length>0){let t=3;for(let i=0;0!==t&&i<o.length;i++){const n=o[i];e.includes(n.id)&&(t&=bM(n,r[i],a[i]))}0===(1&t)&&(l=!1),0===(2&t)&&(d=!1)}}return{uniqueKeys:l,orderedKeys:d}}}function CM(){return{uniqueKeys:!0,orderedKeys:!1}}function SM(e){return{type:"processor",property:"animationValidation",calculate:km(e,xM),incrementalCalculate:CM}}function wM(e){let{mode:t,separateNegative:i}=e;return function(){return function(){return function(e,n,o,s){const r=[0,0];for(const a of n){const n=o.datumIndices[a];if(null==n)continue;const l=r[0],d=r[1],c=e[a];let u=!1;for(const e of n){const n=s+e,o=c[n];if(!ol(o))continue;const a=i&&Ga(o),h=a?l:d;if(c[n]="normal"===t?h+o:h,!u){r[a?0:1]=h+o,u=!0}}}}}}}function MM(e,t){return{type:"group-value-processor",matchGroupIds:[e],adjust:km({mode:t,separateNegative:arguments.length>2&&void 0!==arguments[2]&&arguments[2]},wM),supportsReprocessing:!0}}function kM(e){var t;return null!==(t=e.id)&&void 0!==t?t:e.property}function DM(e,t,i,n,o){for(const{previousIndex:s,nextIndex:r}of i){const i=e[s],a=t[r];if(i[n]!==a[o])return!1}return!0}function IM(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return{type:"processor",property:"diff",calculate(n,o){if(!eM(n))return;const s=new Map,r=new Map,a=new Map,l=new Map,d=t.keys.map(t=>t.get(e)),c=n.keys.map(t=>t.get(e)),u=t.columns,h=n.columns,g=function(e,t,i){const n=new Map,o=t.defs.values;for(let d=0;d<o.length;d+=1){var s;const t=o[d];if(!1===(null===(s=t.scopes)||void 0===s?void 0:s.includes(e)))continue;const i=kM(t);if(n.has(i))return;n.set(i,d)}const r=[],a=i.defs.values;for(let d=0;d<a.length;d+=1){var l;const t=a[d];if(!1===(null===(l=t.scopes)||void 0===l?void 0:l.includes(e)))continue;const i=kM(t),o=n.get(i);if(null==o)return;n.delete(i),r.push({previousIndex:o,nextIndex:d})}if(0===n.size)return r}(e,t,n);if(null==g)return o;const m=Math.max(t.input.count,n.input.count);for(let e=0;e<m;e++){const o=e<t.input.count,p=e<n.input.count,m=o?pw(d,e):void 0,f=null==m?"":AM(...m),v=p?pw(c,e):void 0,y=null==v?"":AM(...v);if(p&&o&&f===y){DM(u,h,g,e,e)||a.set(y,e);continue}const b=l.get(y);null!=b?(!i&&DM(u,h,g,b,e)||(a.set(y,e),s.set(y,e)),l.delete(y)):p&&r.set(y,e);const x=r.get(f);null!=x?(!i&&DM(u,h,g,x,e)||(a.set(f,e),s.set(f,e)),r.delete(f)):o&&(a.delete(f),l.set(f,e))}const f={changed:r.size>0||a.size>0||l.size>0,added:new Set(r.keys()),updated:new Set(a.keys()),removed:new Set(l.keys()),moved:new Set(s.keys())};return p(p({},o),{},{[e]:f})}}}function AM(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(1===t.length){const e=uv(t[0]);if("boolean"===typeof e||"number"===typeof e||"string"===typeof e)return e}return t.map(e=>uv(e)).join("___")}var LM=class{constructor(e){this.maxAnimationTime=e,this.debug=Cr.create(!0,"animation"),this.controllers=new Map,this.stoppedCbs=new Set,this.currentPhase=0,this.phases=new Map(WS.map(e=>[e,[]])),this.skipAnimations=!1,this.animationTimeConsumed=0,this.isReady=!1}get size(){return this.controllers.size}get consumedTimeMs(){return this.animationTimeConsumed}isActive(){return this.controllers.size>0}getActiveControllers(){var e;return null!==(e=this.phases.get(WS[this.currentPhase]))&&void 0!==e?e:[]}checkOverlappingId(e){null!=e&&this.controllers.has(e)&&(this.controllers.get(e).stop(),this.debug("Skipping animation batch due to update of existing animation: ".concat(e)),this.skip())}addAnimation(e){var t;if(e.isComplete)return;if(WS.indexOf(e.phase)<this.currentPhase)return this.debug("Skipping animation due to being for an earlier phase",e.id),void e.stop();this.controllers.set(e.id,e),null===(t=this.phases.get(e.phase))||void 0===t||t.push(e)}removeAnimation(e){this.controllers.delete(e.id);const t=this.phases.get(e.phase),i=null===t||void 0===t?void 0:t.indexOf(e);null!=i&&i>=0&&(null===t||void 0===t||t.splice(i,1))}progress(e){var t;if(!this.isReady)return;let i=0===e?.01:e;const n=()=>{const e=WS[this.currentPhase];return{phaseControllers:[...this.getActiveControllers()],phase:e,phaseMeta:_S[e]}};let{phase:o,phaseControllers:s,phaseMeta:r}=n();const a=()=>null==WS[this.currentPhase],l=()=>{for(({phase:o,phaseControllers:s,phaseMeta:r}=n());!a()&&0===s.length;)this.currentPhase++,({phase:o,phaseControllers:s,phaseMeta:r}=n()),this.debug("AnimationBatch - phase changing to ".concat(o),{unusedTime:i},s)},d=this.controllers.size;this.debug("AnimationBatch - ".concat(e,"ms; phase ").concat(o," with ").concat(null===(t=s)||void 0===t?void 0:t.length," of ").concat(d));do{const e=i,t=r.skipIfNoEarlierAnimations&&0===this.animationTimeConsumed;let n=0;for(const o of s)t?o.stop():i=Math.min(o.update(e),i),o.isComplete&&(n++,this.removeAnimation(o));this.animationTimeConsumed+=e-i,this.debug("AnimationBatch - updated ".concat(s.length," controllers; ").concat(n," completed"),s),this.debug("AnimationBatch - animationTimeConsumed: ".concat(this.animationTimeConsumed)),l()}while(i>0&&!a());this.animationTimeConsumed>this.maxAnimationTime&&(this.debug("Animation batch exceeded max animation time, skipping",[...this.controllers]),this.stop())}ready(){if(this.isReady)return;this.isReady=!0,this.debug("AnimationBatch - ready; skipped: ".concat(this.skipAnimations),[...this.controllers]);let e=!0;for(const[,t]of this.controllers)if(t.duration>0&&!0!==_S[t.phase].skipIfNoEarlierAnimations){e=!1;break}if(!e)for(const[,t]of this.controllers)t.autoplay&&t.play(!0)}skip(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!1===this.skipAnimations&&!0===e){for(const e of this.controllers.values())e.stop();this.controllers.clear()}this.skipAnimations=e}play(){for(const e of this.controllers.values())e.play()}stop(){for(const e of this.controllers.values())try{e.stop(),this.removeAnimation(e)}catch(Ur){jr.error("Error during animation stop",Ur)}this.dispatchStopped()}stopByAnimationId(e){if(null!=e&&this.controllers.has(e)){const t=this.controllers.get(e);t&&(t.stop(),this.removeAnimation(t))}}stopByAnimationGroupId(e){for(const t of this.controllers.values())t.groupId===e&&this.stopByAnimationId(t.id)}dispatchStopped(){for(const e of this.stoppedCbs)e();this.stoppedCbs.clear()}isSkipped(){return this.skipAnimations}getRemainingTime(e){if(!this.isActive())return 0;let t=0;for(const[i,n]of this.phases)0!==n.length&&(null!=e&&e!==i||(t+=Math.max(...n.map(e=>{var t;return e.isComplete?0:e.delay+e.duration-(null!==(t=e.elapsed)&&void 0!==t?t:0)}))));return t}destroy(){this.stop(),this.controllers.clear()}},NM=(e=>(e[e.Default=32]="Default",e[e.ZoomDrag=16]="ZoomDrag",e[e.Annotations=8]="Annotations",e[e.ContextMenu=4]="ContextMenu",e[e.Animation=2]="Animation",e[e.AnnotationsSelected=1]="AnnotationsSelected",e[e.Clickable=41]="Clickable",e[e.Focusable=34]="Focusable",e[e.Keyable=43]="Keyable",e[e.ContextMenuable=36]="ContextMenuable",e[e.AnnotationsMoveable=9]="AnnotationsMoveable",e[e.AnnotationsDraggable=57]="AnnotationsDraggable",e[e.ZoomDraggable=50]="ZoomDraggable",e[e.ZoomClickable=34]="ZoomClickable",e[e.ZoomWheelable=59]="ZoomWheelable",e[e.All=63]="All",e))(NM||{}),TM=class{constructor(){this.stateQueue=34}pushState(e){this.stateQueue|=e}popState(e){this.stateQueue&=~e}isState(e){return!!(this.stateQueue&-this.stateQueue&e)}};function RM(e){return null==e||!Number.isNaN(e)&&e>=0&&e<=2}var EM=class{constructor(e,t){this.interactionManager=e,this.chartUpdateMutex=t,this.defaultDuration=1e3,this.maxAnimatableItems=1e3,this.batch=new LM(1.5*this.defaultDuration),this.debug=Cr.create(!0,"animation"),this.events=new Oa,this.rafAvailable="undefined"!==typeof requestAnimationFrame,this.isPlaying=!0,this.requestId=null,this.skipAnimations=!0,this.currentAnonymousAnimationId=0,this.cumulativeAnimationTime=0}addListener(e,t){return this.events.on(e,t)}animate(e){const t=this.batch;try{t.checkOverlappingId(e.id)}catch(Ur){return void this.failsafeOnError(Ur)}let{id:i}=e;null==i&&(i="__".concat(this.currentAnonymousAnimationId),this.currentAnonymousAnimationId+=1);const n=this.isSkipped()||"none"===e.phase;n&&this.debug("AnimationManager - skipping animation");const{delay:o,duration:s}=e;if(!RM(o))throw new Error("Animation delay of ".concat(o," is unsupported (").concat(i,")"));if(!RM(s))throw new Error("Animation duration of ".concat(s," is unsupported (").concat(i,")"));const r=new YS(p(p({},e),{},{id:i,skip:n,autoplay:!!this.isPlaying&&e.autoplay,phase:e.phase,defaultDuration:this.defaultDuration}));if(!this.forceTimeJump(r,this.defaultDuration))return this.batch.addAnimation(r),r}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");try{this.batch.play()}catch(Ur){this.failsafeOnError(Ur)}this.requestAnimation()}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.stop()}stopByAnimationId(e){try{this.batch.stopByAnimationId(e)}catch(Ur){this.failsafeOnError(Ur)}}stopByAnimationGroupId(e){try{this.batch.stopByAnimationGroupId(e)}catch(Ur){this.failsafeOnError(Ur)}}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.skipAnimations=e}isSkipped(){return!this.rafAvailable||this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}getRemainingTime(e){return this.batch.getRemainingTime(e)}getCumulativeAnimationTime(){return this.cumulativeAnimationTime}skipCurrentBatch(){this.debug.check()&&this.debug("AnimationManager - skipCurrentBatch()",{stack:new Error("Stack trace for animation skip tracking").stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(e){this.requestId=Pr().requestAnimationFrame(t=>{e(t).catch(e=>jr.error(e))})}forceTimeJump(e,t){return!1}requestAnimation(){if(!this.rafAvailable)return;if(!this.batch.isActive()||null!==this.requestId)return;let e;const t=async i=>{await this.debug.group("AnimationManager.onAnimationFrame()",async()=>{const n=()=>{const t=i-(null!==e&&void 0!==e?e:i);e=i,this.debug("AnimationManager",{controllersCount:this.batch.size,deltaTime:t}),this.interactionManager.pushState(2);try{this.batch.progress(t),this.cumulativeAnimationTime+=t}catch(Ur){this.failsafeOnError(Ur)}this.events.emit("animation-frame",{type:"animation-frame",deltaMs:t})};this.isSkippingFrames()?await this.chartUpdateMutex.acquireImmediately(n):await this.chartUpdateMutex.acquire(n),this.batch.isActive()?this.scheduleAnimationFrame(t):(this.batch.stop(),this.events.emit("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}))})};this.events.emit("animation-start",{type:"animation-start",deltaMs:0}),this.scheduleAnimationFrame(t)}cancelAnimation(){null!==this.requestId&&(cancelAnimationFrame(this.requestId),this.events.emit("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}),this.requestId=null,this.startBatch())}failsafeOnError(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];jr.error("Error during animation, skipping animations",e),t&&this.cancelAnimation()}startBatch(e){this.debug("AnimationManager - startBatch() with skipAnimations=".concat(e,".")),this.reset(),this.batch.destroy(),this.batch=new LM(1.5*this.defaultDuration),!0===e&&this.batch.skip()}endBatch(){this.batch.isActive()?(this.batch.ready(),this.requestAnimation()):(this.interactionManager.popState(2),this.batch.isSkipped()&&this.batch.skip(!1))}onBatchStop(e){this.batch.stoppedCbs.add(e)}destroy(){this.stop(),this.events.clear()}},PM=class{constructor(){this.download={type:"action",showOn:"always",label:"contextMenuDownload",enabled:!0,action:void 0,items:void 0},this["zoom-to-cursor"]={type:"action",showOn:"series-area",label:"contextMenuZoomToCursor",enabled:!0,action:void 0,items:void 0},this["pan-to-cursor"]={type:"action",showOn:"series-area",label:"contextMenuPanToCursor",enabled:!0,action:void 0,items:void 0},this["reset-zoom"]={type:"action",showOn:"series-area",label:"contextMenuResetZoom",enabled:!0,action:void 0,items:void 0},this["toggle-series-visibility"]={type:"action",showOn:"legend-item",label:"contextMenuToggleSeriesVisibility",enabled:!0,action:void 0,items:void 0},this["toggle-other-series"]={type:"action",showOn:"legend-item",label:"contextMenuToggleOtherSeries",enabled:!0,action:void 0,items:void 0},this.separator={type:"separator",showOn:"always",label:"separator",enabled:!0,action:void 0,items:void 0}}},OM=class{constructor(){this.defaults=["download","zoom-to-cursor","pan-to-cursor","reset-zoom","toggle-series-visibility","toggle-other-series"]}},FM=class{constructor(){this.items=new PM,this.lists=new OM}},zM=class{constructor(e){this.eventsHub=e,this.builtins=new FM,this.hiddenActions=new Set,this.toggle("zoom-to-cursor","hide"),this.toggle("pan-to-cursor","hide"),this.toggle("reset-zoom","hide")}static check(e,t){return t.showOn==e}static checkCallback(e,t,i){return e===t}dispatchContext(e,t,i,n){var o,s;const{widgetEvent:r}=t;if(r.sourceEvent.defaultPrevented)return;const a={showOn:e,x:null!==(o=null===n||void 0===n?void 0:n.x)&&void 0!==o?o:t.canvasX,y:null!==(s=null===n||void 0===n?void 0:n.y)&&void 0!==s?s:t.canvasY,context:i,widgetEvent:r};this.eventsHub.emit("context-menu:setup",a),this.eventsHub.emit("context-menu:complete",a)}isVisible(e){return!this.hiddenActions.has(e)}toggle(e,t){switch(null!==t&&void 0!==t||(t=this.isVisible(e)?"hide":"show"),t){case"show":this.hiddenActions.delete(e);break;case"hide":this.hiddenActions.add(e)}}},BM=class e{constructor(e){this.eventsHub=e,this.highlightStates=new $C,this.pendingUnhighlights=new Map,this.unhighlightDelay=100}updateHighlight(t,i){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=this.getActiveHighlight();if(null==i){if(n&&this.unhighlightDelay>0){if(!this.pendingUnhighlights.get(t)){const e=Ux(()=>{this.applyPendingUnhighlight(t)});this.pendingUnhighlights.set(t,{scheduler:e}),e.schedule(this.unhighlightDelay)}return}const i=this.pendingUnhighlights.get(t);i&&(i.scheduler.cancel(),this.pendingUnhighlights.delete(t)),this.highlightStates.set(t,void 0);const s=this.getActiveHighlight();return void(this.isEqual(s,o)||this.eventsHub.emit(e.HIGHLIGHT_CHANGE_EVENT,{callerId:t,currentHighlight:s,previousHighlight:o}))}const s=this.pendingUnhighlights.get(t);s&&(s.scheduler.cancel(),this.pendingUnhighlights.delete(t)),this.highlightStates.set(t,i);const r=this.getActiveHighlight();this.isEqual(r,o)||this.eventsHub.emit(e.HIGHLIGHT_CHANGE_EVENT,{callerId:t,currentHighlight:r,previousHighlight:o})}applyPendingUnhighlight(t){if(!this.pendingUnhighlights.has(t))return;this.pendingUnhighlights.delete(t);const i=this.getActiveHighlight();this.highlightStates.set(t,void 0);const n=this.getActiveHighlight();this.isEqual(n,i)||this.eventsHub.emit(e.HIGHLIGHT_CHANGE_EVENT,{callerId:t,currentHighlight:n,previousHighlight:i})}getActiveHighlight(){return this.highlightStates.stateValue()}destroy(){for(const{scheduler:e}of this.pendingUnhighlights.values())e.cancel();this.pendingUnhighlights.clear()}isEqual(e,t){return e===t||null!=e&&null!=t&&(null===e||void 0===e?void 0:e.series)===(null===t||void 0===t?void 0:t.series)&&(null===e||void 0===e?void 0:e.itemId)===(null===t||void 0===t?void 0:t.itemId)&&(null===e||void 0===e?void 0:e.datum)===(null===t||void 0===t?void 0:t.datum)}};BM.HIGHLIGHT_CHANGE_EVENT="highlight:change";var VM=BM,GM=(e=>(e[e.None=0]="None",e[e.Item=1]="Item",e[e.Series=2]="Series",e[e.OtherSeries=3]="OtherSeries",e[e.OtherItem=4]="OtherItem",e))(GM||{}),HM=[0,1,2,3,4];function jM(e){switch(e){case 1:return"highlighted-item";case 4:return"unhighlighted-item";case 2:return"highlighted-series";case 3:return"unhighlighted-series";case 0:return"none";default:return e}}var WM=class extends kh{};Ab([ru],WM.prototype,"fill",2),Ab([ru],WM.prototype,"fillOpacity",2),Ab([ru],WM.prototype,"stroke",2),Ab([ru],WM.prototype,"strokeWidth",2),Ab([ru],WM.prototype,"strokeOpacity",2),Ab([ru],WM.prototype,"lineDash",2),Ab([ru],WM.prototype,"lineDashOffset",2);var _M=class extends kh{constructor(){super(...arguments),this.enabled=!0,this.range="tooltip",this.bringToFront=!0,this.highlightedItem={},this.unhighlightedItem={},this.highlightedSeries={},this.unhighlightedSeries={}}getItemHighlightStyle(e){switch(e){case 1:return this.highlightedItem;case 4:return this.unhighlightedItem;case 2:return this.highlightedSeries;case 3:return this.unhighlightedSeries}}getSeriesHighlightStyle(e){switch(e){case 1:case 4:case 2:return this.highlightedSeries;case 3:return this.unhighlightedSeries}}getStyle(e){return xu(this.getItemHighlightStyle(e),this.getSeriesHighlightStyle(e))}};Ab([ru],_M.prototype,"enabled",2),Ab([ru],_M.prototype,"range",2),Ab([ru],_M.prototype,"bringToFront",2),Ab([ru],_M.prototype,"highlightedItem",2),Ab([ru],_M.prototype,"unhighlightedItem",2),Ab([ru],_M.prototype,"highlightedSeries",2),Ab([ru],_M.prototype,"unhighlightedSeries",2);var KM=class extends kh{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};Ab([ru],KM.prototype,"start",2),Ab([ru],KM.prototype,"stop",2),Ab([ru],KM.prototype,"fill",2),Ab([ru],KM.prototype,"fillOpacity",2),Ab([ru],KM.prototype,"stroke",2),Ab([ru],KM.prototype,"strokeWidth",2),Ab([ru],KM.prototype,"strokeOpacity",2),Ab([ru],KM.prototype,"lineDash",2),Ab([ru],KM.prototype,"lineDashOffset",2);var UM=class{constructor(){this.key="x",this.segments=new Dh(KM)}};Ab([ru],UM.prototype,"enabled",2),Ab([ru],UM.prototype,"key",2),Ab([ru],UM.prototype,"segments",2);var YM=class extends kh{constructor(){super(...arguments),this.type="gradient",this.colorStops=[],this.bounds="item",this.gradient="linear",this.rotation=0,this.reverse=!1,this.colorSpace="rgb"}};Ab([ru],YM.prototype,"type",2),Ab([ru],YM.prototype,"colorStops",2),Ab([ru],YM.prototype,"bounds",2),Ab([ru],YM.prototype,"gradient",2),Ab([ru],YM.prototype,"rotation",2),Ab([ru],YM.prototype,"reverse",2),Ab([ru],YM.prototype,"colorSpace",2);var $M=class extends kh{constructor(){super(...arguments),this.type="pattern",this.colorStops=[],this.bounds="item",this.gradient="linear",this.rotation=0,this.scale=1,this.reverse=!1,this.pattern="forward-slanted-lines",this.width=26,this.height=26,this.padding=6,this.fill="black",this.fillOpacity=1,this.backgroundFill="white",this.backgroundFillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0}};Ab([ru],$M.prototype,"type",2),Ab([ru],$M.prototype,"colorStops",2),Ab([ru],$M.prototype,"bounds",2),Ab([ru],$M.prototype,"gradient",2),Ab([ru],$M.prototype,"rotation",2),Ab([ru],$M.prototype,"scale",2),Ab([ru],$M.prototype,"reverse",2),Ab([ru],$M.prototype,"path",2),Ab([ru],$M.prototype,"pattern",2),Ab([ru],$M.prototype,"width",2),Ab([ru],$M.prototype,"height",2),Ab([ru],$M.prototype,"padding",2),Ab([ru],$M.prototype,"fill",2),Ab([ru],$M.prototype,"fillOpacity",2),Ab([ru],$M.prototype,"backgroundFill",2),Ab([ru],$M.prototype,"backgroundFillOpacity",2),Ab([ru],$M.prototype,"stroke",2),Ab([ru],$M.prototype,"strokeOpacity",2),Ab([ru],$M.prototype,"strokeWidth",2);var ZM=class extends kh{constructor(){super(...arguments),this.type="image",this.url="",this.rotation=0,this.scale=1,this.backgroundFill="black",this.backgroundFillOpacity=1,this.repeat="no-repeat",this.fit="contain"}};Ab([ru],ZM.prototype,"type",2),Ab([ru],ZM.prototype,"url",2),Ab([ru],ZM.prototype,"rotation",2),Ab([ru],ZM.prototype,"scale",2),Ab([ru],ZM.prototype,"backgroundFill",2),Ab([ru],ZM.prototype,"backgroundFillOpacity",2),Ab([ru],ZM.prototype,"repeat",2),Ab([ru],ZM.prototype,"fit",2);var XM=class extends kh{constructor(){super(...arguments),this.visible=!0,this.focusPriority=1/0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlight=new _M}handleUnknownProperties(e,t){"context"in t&&(this.context=t.context,e.delete("context"))}};function qM(e,t){if(null==e||0===t.length)return[!1,!1];const i=e.valueOf(),n=t[0],o=t.at(-1);if("string"===typeof n)return[i===n,i===o];let s=n.valueOf(),r=o.valueOf();return s>r&&([s,r]=[r,s]),[i===s,i===r]}function QM(e,t,i,n,o,s){const[r,a]=qM(t,s),[l,d]=qM(e,o);return{xKey:i,yKey:n,xValue:e,yValue:t,first:l,last:d,min:r,max:a}}function JM(e,t,i,n){var o,s;let[r,a]=i,l=null!==(o=ug(0,t-1,i=>{var o,s;const a=null!==(o=null===(s=n(1===e?i:t-i))||void 0===s?void 0:s[1])&&void 0!==o?o:Number.NaN;return!Number.isFinite(a)||a>=r}))&&void 0!==o?o:0,d=null!==(s=cg(0,t-1,i=>{var o,s;const r=null!==(o=null===(s=n(1===e?i:t-i))||void 0===s?void 0:s[0])&&void 0!==o?o:Number.NaN;return!Number.isFinite(r)||r<=a}))&&void 0!==s?s:t-1;return-1===e&&([l,d]=[t-d,t-l]),l=Math.max(l,0),d=Math.min(d+1,t),[l,d]}function ek(e,t,i){var n,o,s,r;if(i){const{x:e,y:t,width:n,height:o}=i;return{canvasX:e+n/2,canvasY:t+o/2}}const a=null!==(n=null!==(o=null===(s=t.yBar)||void 0===s?void 0:s.upperPoint)&&void 0!==o?o:t.midPoint)&&void 0!==n?n:null===(r=e.datumMidPoint)||void 0===r?void 0:r.call(e,t);if(a){const{x:t,y:i}=Bx.toCanvasPoint(e.contentGroup,a.x,a.y);return{canvasX:Math.round(t),canvasY:Math.round(i)}}}function tk(e){const t={};for(const i of HM)t[i]=e(void 0,!1,i);return t}function ik(e){const t={};for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];for(const r of null!==n&&void 0!==n?n:["default"])for(const i of HM){var s;(null!==(s=t[r])&&void 0!==s?s:t[r]={})[i]=e(void 0,!1,i,r)}return t}Ab([ru],XM.prototype,"id",2),Ab([ru],XM.prototype,"visible",2),Ab([ru],XM.prototype,"focusPriority",2),Ab([ru],XM.prototype,"showInLegend",2),Ab([ru],XM.prototype,"cursor",2),Ab([ru],XM.prototype,"nodeClickRange",2),Ab([ru],XM.prototype,"highlight",2);var nk=class{constructor(e,t,i,n){this.domManager=i,this.tooltip=n,this.stateTracker=new $C,this.suppressState=new $C(!1),this.appliedState=null,this.pendingRemovals=new Map,this.removeDelay=100,this.cleanup=new Ta,this.cleanup.register(n.setup(t,i),e.on("dom:hidden",()=>this.tooltip.hide()))}destroy(){for(const{scheduler:e}of this.pendingRemovals.values())e.cancel();this.pendingRemovals.clear(),this.cleanup.flush()}updateTooltip(e,t,i,n){var o;const s=this.pendingRemovals.get(e);s&&(s.scheduler.cancel(),this.pendingRemovals.delete(e)),null!==i&&void 0!==i||(i=null===(o=this.stateTracker.get(e))||void 0===o?void 0:o.content),this.stateTracker.set(e,{meta:t,content:i,pagination:n}),this.applyStates()}removeTooltip(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&this.removeDelay>0){const i=this.pendingRemovals.get(e);if(i)return void(t&&(i.lastMeta=t));const n=Ux(()=>{this.applyPendingRemoval(e)});return this.pendingRemovals.set(e,{scheduler:n,lastMeta:t}),void n.schedule(this.removeDelay)}const i=this.pendingRemovals.get(e);i&&(i.scheduler.cancel(),this.pendingRemovals.delete(e)),this.stateTracker.delete(e),this.applyStates()}suppressTooltip(e){this.suppressState.set(e,!0)}unsuppressTooltip(e){this.suppressState.delete(e)}applyPendingRemoval(e){this.pendingRemovals.has(e)&&(this.pendingRemovals.delete(e),this.stateTracker.delete(e),this.applyStates())}applyStates(){var e,t;const i=this.stateTracker.stateId(),n=i?this.stateTracker.get(i):void 0;if(this.suppressState.stateValue()||null==(null===n||void 0===n?void 0:n.meta)||null==(null===n||void 0===n?void 0:n.content))return this.appliedState=null,void this.tooltip.hide();const o=this.domManager.getBoundingClientRect(),s="extended"===this.tooltip.bounds?this.domManager.getOverlayClientRect():o;if(yu(null===(e=this.appliedState)||void 0===e?void 0:e.content,null===n||void 0===n?void 0:n.content)&&yu(null===(t=this.appliedState)||void 0===t?void 0:t.pagination,null===n||void 0===n?void 0:n.pagination)){const e=this.tooltip.isVisible();this.tooltip.show(s,o,null===n||void 0===n?void 0:n.meta,null,void 0,e)}else this.tooltip.show(s,o,null===n||void 0===n?void 0:n.meta,null===n||void 0===n?void 0:n.content,null===n||void 0===n?void 0:n.pagination);this.appliedState=n}static makeTooltipMeta(e,t,i,n){var o,s,r,a;const{canvasX:l,canvasY:d}=e,c=t.properties.tooltip,{placement:u,anchorTo:h,xOffset:p,yOffset:g}=c.position,m=ek(t,i,n);return{canvasX:l,canvasY:d,nodeCanvasX:null!==(o=null===m||void 0===m?void 0:m.canvasX)&&void 0!==o?o:l,nodeCanvasY:null!==(s=null===m||void 0===m?void 0:m.canvasY)&&void 0!==s?s:d,enableInteraction:null!==(r=null===(a=c.interaction)||void 0===a?void 0:a.enabled)&&void 0!==r&&r,showArrow:c.showArrow,position:{placement:u,anchorTo:h,xOffset:p,yOffset:g}}}};function ok(e,t){const{device:i,offsetX:n,offsetY:o,clientX:s,clientY:r,currentX:a,currentY:l,sourceEvent:d}=t;return{type:e,device:i,offsetX:n,offsetY:o,clientX:s,clientY:r,currentX:a,currentY:l,sourceEvent:d}}function sk(e,t){return e*e+t*t>=9}var rk=class{constructor(e){this.cleanup=new Ta,this.events=new Oa,this.isDragging=!1,this.touch={distanceTravelledX:0,distanceTravelledY:0,clientX:0,clientY:0},this.cleanup.register(e.addListener("touchstart",this.onTouchStart.bind(this)),e.addListener("touchmove",this.onTouchMove.bind(this)),e.addListener("touchend",this.onTouchEnd.bind(this)),e.addListener("mousemove",this.onMouseMove.bind(this)),e.addListener("dblclick",this.onDblClick.bind(this)),e.addListener("drag-start",this.onDragStart.bind(this)),e.addListener("drag-move",this.onDragMove.bind(this)),e.addListener("drag-end",this.onDragEnd.bind(this)))}destroy(){this.cleanup.flush()}onTouchStart(e){var t;const{clientX:i,clientY:n}=null!==(t=e.sourceEvent.targetTouches[0])&&void 0!==t?t:{clientX:1/0,clientY:1/0};this.touch.distanceTravelledX=0,this.touch.distanceTravelledY=0,this.touch.clientX=i,this.touch.clientY=n}onTouchMove(e){var t;const{clientX:i,clientY:n}=null!==(t=e.sourceEvent.targetTouches[0])&&void 0!==t?t:{clientX:1/0,clientY:1/0};this.touch.distanceTravelledX+=Math.abs(this.touch.clientX-i),this.touch.distanceTravelledY+=Math.abs(this.touch.clientY-n),this.touch.clientX=i,this.touch.clientY=n}onTouchEnd(e){e.sourceEvent.preventDefault()}onMouseMove(e){this.events.emit("mousemove",e)}onDblClick(e){this.events.emit("dblclick",e)}onDragStart(e){this.dragStartEvent=e}onDragMove(e){null!=this.dragStartEvent&&sk(e.originDeltaX,e.originDeltaY)&&(this.events.emit("drag-start",this.dragStartEvent),this.events.emit("drag-move",p(p({},this.dragStartEvent),{},{type:"drag-move"})),this.dragStartEvent=void 0,this.isDragging=!0),this.isDragging&&this.events.emit("drag-move",e)}onDragEnd(e){if(this.isDragging)return this.events.emit("drag-end",e),void(this.isDragging=!1);if("mouse"===e.device){const t=ok("click",e);this.events.emit("click",t)}else if("touchend"===e.sourceEvent.type){if(sk(this.touch.distanceTravelledX,this.touch.distanceTravelledY))return;const t=ok("click",e);this.events.emit("click",t);const i=Date.now();if(void 0!==this.lastClick&&i-this.lastClick.time<=505&&function(e,t){const i=e.clientX-t.clientX,n=e.clientY-t.clientY;return i*i+n*n<900}(this.lastClick,e)){const t=ok("dblclick",e);this.events.emit("dblclick",t),this.lastClick=void 0}else this.lastClick={time:i,clientX:e.clientX,clientY:e.clientY}}}},ak=class extends uS{constructor(e){super(e)}addChildToDOM(){}removeChildFromDOM(){}},lk=class{constructor(e,t){this.seriesWidget=new ak(e.getParent("series-area")),this.chartWidget=new ak(e.getParent("canvas-proxy")),this.containerWidget=new ak(e.getParent("canvas-container")),this.containerWidget.addChild(this.chartWidget),this.chartWidget.addChild(this.seriesWidget),t.withDragInterpretation&&(this.seriesDragInterpreter=new rk(this.seriesWidget))}destroy(){var e;null===(e=this.seriesDragInterpreter)||void 0===e||e.destroy(),this.seriesWidget.destroy(),this.chartWidget.destroy(),this.containerWidget.destroy()}},dk=class e extends Kb{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];super(),this.range=i,this.defaultTickCount=e.defaultTickCount,this.defaultClamp=!1,this._domain=[],this.domainNeedsValueOf=!0,this.d0Cache=Number.NaN,this.d1Cache=Number.NaN,this.domain=t}static is(t){return t instanceof e}get domain(){return this._domain}set domain(e){if(this._domain=e,e&&e.length>=2){const t=e[0];this.domainNeedsValueOf=null!=t&&"object"===typeof t,this.domainNeedsValueOf?(this.d0Cache=e[0].valueOf(),this.d1Cache=e[1].valueOf()):(this.d0Cache=e[0],this.d1Cache=e[1])}else this.d0Cache=Number.NaN,this.d1Cache=Number.NaN}normalizeDomains(){return uk(...arguments)}calcBandwidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const{domain:i}=this,n=this.getPixelRange();if(0===i.length)return n;let o=Math.abs(this.d1Cache-this.d0Cache)/e+1;if(0!==t){const e=Math.floor(n);o=Math.min(o,e)}return n/Math.max(1,o)}convert(e,t){var i;const{domain:n}=this;if(!n||n.length<2||null==e)return Number.NaN;const{range:o}=this,s=null!==(i=null===t||void 0===t?void 0:t.clamp)&&void 0!==i?i:this.defaultClamp;let r=this.d0Cache,a=this.d1Cache,l="number"===typeof e?e:e.valueOf();if(this.transform&&(r=this.transform(r),a=this.transform(a),l=this.transform(l)),s){const[e,t]=$u([r,a]);if(l<e)return o[0];if(l>t)return o[1]}if(r===a)return(o[0]+o[1])/2;if(l===r)return o[0];if(l===a)return o[1];const d=o[0];return d+(l-r)/(a-r)*(o[1]-d)}invert(e,t){const{domain:i}=this;if(i.length<2)return;let n=this.d0Cache,o=this.d1Cache;this.transform&&(n=this.transform(n),o=this.transform(o));const{range:s}=this,[r,a]=s;let l;return l=r===a?this.toDomain((n+o)/2):this.toDomain(n+(e-r)/(a-r)*(o-n)),this.transformInvert?this.transformInvert(l):l}getDomainMinMax(){return Zb(this.domain)}getPixelRange(){const[e,t]=this.range;return Math.abs(t-e)}};dk.defaultTickCount=5;var ck=dk;function uk(){let e,t,i=1/0,n=-1/0;for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];for(const a of s){const o=a.domain;for(const s of o){const o=s.valueOf();o<i&&(i=o,e=s),o>n&&(n=o,t=s)}}if(null!=e&&null!=t){return{domain:[e,t],animatable:!0}}return{domain:[],animatable:!1}}var hk=class e extends Kb{constructor(){super(...arguments),this.invalid=!0,this.range=[0,1],this.round=!1,this._bandwidth=1,this._step=1,this._inset=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0}static is(t){return t instanceof e}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get inset(){return this.refresh(),this._inset}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(e){e=za(0,e,1),this._paddingInner=e,this._paddingOuter=e}get padding(){return this._paddingInner}set paddingInner(e){this.invalid=!0,this._paddingInner=za(0,e,1)}get paddingInner(){return this._paddingInner}set paddingOuter(e){this.invalid=!0,this._paddingOuter=za(0,e,1)}get paddingOuter(){return this._paddingOuter}getBandCountForUpdate(){return this.bands.length}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&jr.warnOnce("Expected update to not invalidate scale"))}convert(e,t){this.refresh();const i=this.findIndex(e,null===t||void 0===t?void 0:t.alignment);return null==i||i<0||i>=this.getBandCountForUpdate()?Number.NaN:this.ordinalRange(i)}getDomainMinMax(){return Zb(this.domain)}invertNearestIndex(e){this.refresh();const t=this.getBandCountForUpdate();if(0===t)return-1;let i=0,n=t-1,o=1/0,s=0;for(;i<=n;){const t=Math.trunc((n+i)/2),r=this.ordinalRange(t),a=Math.abs(r-e);if(0===a)return t;a<o&&(o=a,s=t),r<e?i=t+1:n=t-1}return s}update(){const[e,t]=this.range;let{_paddingInner:i}=this;const{_paddingOuter:n}=this,o=this.getBandCountForUpdate();if(0===o)return;const s=t-e;let r;1===o?(i=0,r=s*(1-2*n)):r=s/Math.max(1,o-i+2*n);const a=this.round&&Math.floor(r)>0,l=a?Math.floor(r):r;let d=e+(s-l*(o-i))/2,c=l*(1-i);a&&(d=Math.round(d),c=Math.round(c)),this._step=l,this._inset=d,this._bandwidth=c,this._rawBandwidth=r*(1-i)}ordinalRange(e){const{_inset:t,_step:i,range:n}=this;return za(Math.min(n[0],n[1]),t+i*e,Math.max(n[0],n[1]))}};Ab([Ub],hk.prototype,"range",2),Ab([Ub],hk.prototype,"round",2);var pk=hk;function gk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length-1)-t+1;if(i<2)return{isUniform:!1};const n=Array.from({length:20},(e,n)=>t+Math.floor(n*(i-1)/19)),o=n.map(t=>e[t].valueOf()),s=(o.at(-1)-o[0])/(i-1);if(!Number.isFinite(s)||0===s)return{isUniform:!1};const r=Math.abs(.01*s);for(let a=1;a<o.length;a++){const e=n[a]-n[a-1],t=(o[a]-o[a-1])/e;if(Math.abs(t-s)>r)return{isUniform:!1}}return{isUniform:!0,interval:s}}var mk=class e extends pk{static is(t){return t instanceof e}toDomain(e){return new Date(e)}get reversed(){const{domain:e}=this;return e.length>0&&e[0].valueOf()>e.at(-1).valueOf()}get numericBands(){return this.bands.map(e=>e.valueOf())}convert(e,t){var i,n;this.refresh(),e instanceof Date||(e=new Date(e));const{domain:o,reversed:s}=this,r=this.numericBands,a=r.length;if(o.length<=0)return Number.NaN;const l=this.ordinalRange(0),d=this.ordinalRange(a-1);if(0===a)return l;if(!0===(null===t||void 0===t?void 0:t.clamp)){const{range:t}=this;if(e.valueOf()<r[0])return t[0];if(e.valueOf()>r.at(-1))return t[1]}if((null!==(i=null===t||void 0===t?void 0:t.alignment)&&void 0!==i?i:Pa.Leading)!==Pa.Interpolate){const i=super.convert(e,t);return s?d-(i-l):i}const c=e.valueOf();let u,h=null!==(n=this.findIndex(e))&&void 0!==n?n:0;s?(h=Math.min(Math.max(h,1),a-1),u=-1):(h=Math.min(Math.max(h,0),a-2),u=1);const p=r[h],g=r[h+u],m=this.ordinalRange(h),f=(c-p)/(g-p)*(this.ordinalRange(h+u)-m)+m;return s?d-(f-l):f}invert(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.refresh();const{domain:i}=this;if(i.length<=0)return;const n=this.bands,o=this.getBandCountForUpdate(),s=i[0].valueOf()>i.at(-1).valueOf();let r;if(t)r=this.invertNearestIndex(e-this.bandwidth/2);else{const t=ug(0,o-1,t=>this.ordinalRange(t)>=e);r=null!==t&&void 0!==t?t:o-1}return n[s?o-1-r:r]}getUniformityCache(e){}findIndex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pa.Leading;if(null==e)return;const i=this.numericBands,n=i.length;if(0===n)return;if(1===n)return 0;const o=e.valueOf();return t===Pa.Trailing?ug(0,n-1,e=>i[e]>=o):cg(0,n-1,e=>i[e]<=o)}};function fk(e,t,i,n,o){return t+(o-e)/(i-e)*(n-t)}function vk(e,t,i,n,o){return e+(i-e)/(n-t)*(o-t)}function yk(e,t,i){return[vk(e,i.min,t,i.max,0),vk(e,i.min,t,i.max,1)]}function bk(e,t,i,n,o,s){if(i<=o&&s<=n)return i;const r=o-i,a=s-n;return za(e,i+(Math.abs(r)<Math.abs(a)?r:a),t)}function xk(e,t,i){const{x:n={min:0,max:1},y:o={min:0,max:1}}=t,s=Pv.from(i),r=Pv.from(e),a=function(e,t,i){const[n,o]=yk(e.x1,e.x2,t),[s,r]=yk(e.y1,e.y2,i);return{x1:n,x2:o,y1:s,y2:r}}(r,n,o),l=bk(a.x1,a.x2,r.x1,r.x2,s.x1,s.x2),d=bk(a.y1,a.y2,r.y1,r.y2,s.y1,s.y2),c={x:{min:fk(r.x1,n.min,r.x2,n.max,l),max:fk(r.x1,n.min,r.x2,n.max,l+e.width)},y:{min:fk(r.y1,o.min,r.y2,o.max,d),max:fk(r.y1,o.min,r.y2,o.max,d+e.height)}},u=c.x.max-c.x.min,h=c.y.max-c.y.min;return c.x.min=za(0,c.x.min,1-u),c.x.max=c.x.min+u,c.y.min=za(0,c.y.min,1-h),c.y.max=c.y.min+h,c}function Ck(e,t){const i=null===e||void 0===e?void 0:e.valueOf(),n=null===t||void 0===t?void 0:t.valueOf();return"number"!==typeof i||"number"!==typeof n?[void 0,void 0]:i<n?[Pa.Leading,Pa.Trailing]:[Pa.Trailing,Pa.Leading]}var Sk=e=>hd((t,i)=>{let{options:n}=i;return!ck.is(null===e||void 0===e?void 0:e.scale)&&!mk.is(null===e||void 0===e?void 0:e.scale)||(null==t||null==n.end||t<n.end)},"to be less than end");function wk(e,t){const i={};for(const{id:o,direction:s}of e){var n;const{min:e,max:r}=null!==(n=t[o])&&void 0!==n?n:{min:0,max:1};i[o]={min:e,max:r,direction:s}}return i}function Mk(e){return{source:"user-interaction",sourceDetail:e}}var kk=class extends _C{constructor(e,t,i){super(),this.eventsHub=e,this.fireChartEvent=i,this.mementoOriginatorKey="zoom",this.state={},this.axes=[],this.didLayoutAxes=!1,this.lastRestoredState={},this.independentAxes=!1,this.navigatorModule=!1,this.zoomModule=!1,this.pendingMemento=void 0,this.cleanup.register(e.on("layout:complete",()=>{this.didLayoutAxes=!0;const{pendingMemento:e}=this;e&&this.restoreMemento(e.version,e.mementoVersion,e.memento),this.updateZoom({source:"chart-update",sourceDetail:"unspecified"})}),t.addListener("update-complete",e=>{let{wasShortcut:t}=e;if(!t&&this.pendingZoomEventSource){const e=this.pendingZoomEventSource;this.fireChartEvent(p({type:"zoom",source:e},this.getMementoRanges())),this.pendingZoomEventSource=void 0}}))}toCoreZoomState(e){const t={};let i;const{state:n}=this;if(this.independentAxes){const e=this.getPrimaryAxisId(_u.X),t=this.getPrimaryAxisId(_u.Y);i=[],e&&i.push(e),t&&i.push(t)}else i=vu(n);for(const s of i){var o;const{direction:i}=null!==(o=n[s])&&void 0!==o?o:{};if(void 0!=i){const n=e[i];if(n){const{min:e,max:o}=n;t[s]={min:e,max:o,direction:i}}}}return t}toAxisZoomState(e){let t,i;for(const n of vu(e)){const{min:o,max:s,direction:r}=e[n];r===_u.X?null!==t&&void 0!==t||(t={min:o,max:s}):r===_u.Y&&(null!==i&&void 0!==i||(i={min:o,max:s}))}if(t||i)return{x:t,y:i}}createMemento(){return this.getMementoRanges()}guardMemento(e,t){if(null==e)return!0;if(!Qa(e))return!1;const i=this.getPrimaryAxis(_u.X),n=this.getPrimaryAxis(_u.Y),o={rangeX:{start:Sk(i),end:kd},rangeY:{start:Sk(n),end:kd},ratioX:{start:kd,end:kd},ratioY:{start:kd,end:kd},autoScaledAxes:kd},{invalid:s}=ud(e,o);return!(s.length>0)||(t.push(...s.map(String)),!1)}restoreMemento(e,t,i){if(!this.axes||!this.didLayoutAxes)return void(this.pendingMemento={version:e,mementoVersion:t,memento:i});this.pendingMemento=void 0;const n=this.getDefinedZoom();var o;if(null!==i&&void 0!==i&&i.rangeX)n.x=null!==(o=this.rangeToRatioDirection(_u.X,i.rangeX))&&void 0!==o?o:{min:0,max:1};else if(null!==i&&void 0!==i&&i.ratioX){var s,r;n.x={min:null!==(s=i.ratioX.start)&&void 0!==s?s:0,max:null!==(r=i.ratioX.end)&&void 0!==r?r:1}}else n.x={min:0,max:1};const{navigatorModule:a,zoomModule:l}=this;this.eventsHub.emit("zoom:load-memento",{zoom:n,memento:i,navigatorModule:a,zoomModule:l});const d=this.toCoreZoomState(n);this.lastRestoredState=Eu(Qg(d)),this.updateChanges({source:"state-change",sourceDetail:"internal-restoreMemento",changes:d,isReset:!1})}findAxis(e){for(const t of this.axes)if(t.id===e)return t}getAxes(){return this.axes}setAxes(e){const{axes:t}=this;t.length=0;for(const n of e)"range"in n&&t.push(n);const i=wk(e,this.state);this.state=i,this.lastRestoredState=wk(e,this.lastRestoredState),this.updateChanges({source:"chart-update",sourceDetail:"internal-setAxes",changes:i,isReset:!1})}setIndependentAxes(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.independentAxes=e}setNavigatorEnabled(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.navigatorModule=e}setZoomModuleEnabled(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.zoomModule=e}isNavigatorEnabled(){return this.navigatorModule}isZoomEnabled(){return this.zoomModule}updateZoom(e,t){let{source:i,sourceDetail:n}=e;const o=this.toCoreZoomState(null!==t&&void 0!==t?t:{});return this.updateChanges({source:i,sourceDetail:n,changes:o,isReset:!1})}computeChangedAxesIds(e){const t=[],i=this.state;for(const o of vu(e)){var n;const s=null!==(n=e[o])&&void 0!==n?n:{min:0,max:1},r=i[o];void 0!=r&&r.min===s.min&&r.max===s.max||t.push(o)}return t}updateChanges(e){const{source:t,sourceDetail:i,isReset:n,changes:o}=e;!function(e){for(const t of vu(e)){const i=e[t];if(!i)continue;const{min:n,max:o}=i;(n<0||o>1)&&(jr.warnOnce("Attempted to update axis (".concat(t,") zoom to an invalid ratio of [{ min: ").concat(n,", max: ").concat(o," }], expecting a ratio of 0 to 1. Ignoring.")),delete e[t])}}(o);const s=this.computeChangedAxesIds(o),r=Qg(this.state);for(const u of s){const e=r[u];var a,l,d,c;if(void 0!=e)e.min=null!==(a=null===(l=o[u])||void 0===l?void 0:l.min)&&void 0!==a?a:0,e.max=null!==(d=null===(c=o[u])||void 0===c?void 0:c.max)&&void 0!==d?d:1}return this.state=r,this.dispatch(t,i,s,n)}resetZoom(e){let{source:t,sourceDetail:i}=e;this.updateChanges({source:t,sourceDetail:i,changes:this.getRestoredZoom(),isReset:!0})}resetAxisZoom(e,t){let{source:i,sourceDetail:n}=e;this.updateChanges({source:i,sourceDetail:n,changes:{[t]:this.getRestoredZoom()[t]},isReset:!0})}panToBBox(e,t){if(!this.isZoomEnabled()&&!this.isNavigatorEnabled())return!1;const i=this.getZoom();if(void 0===i||!i.x&&!i.y)return!1;if(!(e.width>0&&e.height>0&&Math.abs(t.width)<=Math.abs(e.width)&&Math.abs(t.height)<=Math.abs(e.height)))return jr.warnOnce("cannot pan to target BBox - chart too small?"),!1;const n=xk(e,i,t),o=this.toCoreZoomState(n);return this.updateChanges({source:"user-interaction",sourceDetail:"internal-panToBBox",changes:o,isReset:!1})}fireZoomPanStartEvent(e){this.eventsHub.emit("zoom:pan-start",{callerId:e})}extendToEnd(e,t,i){return this.extendWith(e,t,e=>Number(e)-i)}extendWith(e,t,i){let{source:n,sourceDetail:o}=e;const s=this.getPrimaryAxis(t);if(!s)return;const r=this.getDomainExtents(s);if(!r)return;const[,a]=r,l=i(a),d=this.rangeToRatioAxis(s,{start:l});d&&this.updateChanges({source:n,sourceDetail:o,changes:{[t]:d},isReset:!1})}updateWith(e,t,i){let{source:n,sourceDetail:o}=e;const s=this.getPrimaryAxis(t);if(!s)return;const r=this.getDomainExtents(s);if(!r)return;let[a,l]=r;[a,l]=i(a,l);const d=this.rangeToRatioAxis(s,{start:a,end:l});d&&this.updateChanges({source:n,sourceDetail:o,changes:{[t]:d},isReset:!1})}getZoom(){return this.toAxisZoomState(this.state)}getAxisZoom(e){var t;return null!==(t=this.state[e])&&void 0!==t?t:{min:0,max:1}}getAxisZooms(){return this.state}getCoreZoom(){return this.state}getRestoredZoom(){return this.lastRestoredState}getPrimaryAxisId(e){var t;return null===(t=this.getPrimaryAxis(e))||void 0===t?void 0:t.id}getBoundSeries(){const e=this.getPrimaryAxis(_u.X),t=this.getPrimaryAxis(_u.Y);let i;if(this.independentAxes){var n,o;const s=new Set(null!==(n=null===e||void 0===e?void 0:e.boundSeries)&&void 0!==n?n:[]),r=new Set(null!==(o=null===t||void 0===t?void 0:t.boundSeries)&&void 0!==o?o:[]);i=new Set;for(const e of s)r.has(e)&&i.add(e)}else{var s,r;i=new Set([...null!==(s=null===e||void 0===e?void 0:e.boundSeries)&&void 0!==s?s:[],...null!==(r=null===t||void 0===t?void 0:t.boundSeries)&&void 0!==r?r:[]])}return i}constrainZoomToItemCount(e,t,i){var n,o,s,r;let a=[e.x.min,e.x.max],l=i?void 0:[e.y.min,e.y.max];for(const d of this.getBoundSeries()){const e=d.getZoomRangeFittingItems(a,l,t);null!=e&&(a=e.x,l=e.y)}return{x:{min:a[0],max:a[1]},y:{min:null!==(n=null===(o=l)||void 0===o?void 0:o[0])&&void 0!==n?n:0,max:null!==(s=null===(r=l)||void 0===r?void 0:r[1])&&void 0!==s?s:1}}}isVisibleItemsCountAtLeast(e,t,i){const n=this.getBoundSeries(),o=[e.x.min,e.x.max],s=!i.includeYVisibleRange&&i.autoScaleYAxis?void 0:[e.y.min,e.y.max];let r=0;for(const a of n){const e=t-(null!==r&&void 0!==r?r:0);if(r+=a.getVisibleItems(o,s,e),r>=t)return!0}return 0===n.size}getMementoRanges(){const e=this.getDefinedZoom(),t={rangeX:this.getRangeDirection(_u.X,e.x),rangeY:this.getRangeDirection(_u.Y,e.y),ratioX:{start:e.x.min,end:e.x.max},ratioY:{start:e.y.min,end:e.y.max},autoScaledAxes:void 0};return this.eventsHub.emit("zoom:save-memento",{memento:t}),t}dispatch(e,t,i,n){var o;const{x:s,y:r}=null!==(o=this.getZoom())&&void 0!==o?o:{},a=this.state;let l;const d=this,c={source:e,sourceDetail:t,isReset:n,changedAxes:i,state:a,x:s,y:r,stateAsDefinedZoom(){var e;const{x:t={min:0,max:1},y:i={min:0,max:1}}=null!==(e=d.toAxisZoomState(c.state))&&void 0!==e?e:{};return{x:t,y:i}},constrainZoom(e){this.constrainChanges(d.toCoreZoomState(e))},constrainChanges(e){null!==l&&void 0!==l||(l=Qg(a));for(const t of vu(e)){const i=e[t],n=l[t];i&&n&&(n.min=i.min,n.max=i.max)}c.state=l}};let u;this.eventsHub.emit("zoom:change-request",c),l&&!function(e,t){const i=vu(e),n=vu(t);if(i.length!==n.length)return!1;for(const o of i)if(!n.includes(o))return!1;for(const o of i){const i=e[o],n=t[o];if(i!==n&&(void 0==i||void 0==n||i.direction!==n.direction||i.min!==n.min||i.max!==n.max))return!1}return!0}(a,l)?(u=!0,this.state=l):u=!1;const h=i.length>0||u;if(h){var p;const i=null!==(p=this.getZoom())&&void 0!==p?p:{};this.eventsHub.emit("zoom:change-complete",{source:e,sourceDetail:t,x:i.x}),this.pendingZoomEventSource=e}return h}getRange(e,t){return this.getRangeAxis(this.findAxis(e),t)}getRangeDirection(e,t){return this.getRangeAxis(this.getPrimaryAxis(e),t)}getRangeAxis(e,t){if(!e||!t||!ck.is(e.scale)&&!mk.is(e.scale))return;const i=this.getDomainPixelExtents(e);if(!i)return;const[n,o]=i;let s,r;return n<=o?(s=e.scale.invert(0),r=e.scale.invert(n+(o-n)*t.max)):(s=e.scale.invert(n-(n-o)*t.min),r=e.scale.invert(0)),{start:s,end:r}}rangeToRatio(e,t){return this.rangeToRatioAxis(this.findAxis(e),t)}rangeToRatioDirection(e,t){return this.rangeToRatioAxis(this.getPrimaryAxis(e),t)}rangeToRatioAxis(e,t){var i;if(!e)return;const n=this.getDomainPixelExtents(e);if(!n)return;const[o,s]=n,{scale:r}=e,{start:a,end:l}=t,[d=Pa.Leading,c=Pa.Trailing]=Ck(a,l),u=null==a?o:r.convert(a,{alignment:d}),h=null==l?s:r.convert(l,{alignment:c})+(null!==(i=r.bandwidth)&&void 0!==i?i:0);if(!ol(u)||!ol(h))return;const[p,g]=[Math.min(o,s),Math.max(o,s)];if(u<p||u>g)return void jr.warnOnce("Invalid range start [".concat(a,"], expecting a value between [").concat(r.invert(o),"] and [").concat(r.invert(s),"], ignoring."));if(h<p||h>g)return void jr.warnOnce("Invalid range end [".concat(l,"], expecting a value between [").concat(r.invert(o),"] and [").concat(r.invert(s),"], ignoring."));const m=s-o;if(0===m)return;const f=Math.abs((u-o)/m),v=Math.abs((h-o)/m);return f>=v?void 0:{min:f,max:v}}getPrimaryAxis(e){var t;return null===(t=this.axes)||void 0===t?void 0:t.find(t=>t.direction===e)}getDomainExtents(e){const{domain:t}=e.scale,i=t.at(0),n=t.at(-1);if(null!=i&&null!=n)return[i,n]}getDomainPixelExtents(e){const[t,i]=e.scale.range;if(ol(t)&&ol(i))return[t,i]}getDefinedZoom(){var e,t,i,n,o,s,r,a;const l=this.getZoom();return{x:{min:null!==(e=null===l||void 0===l||null===(t=l.x)||void 0===t?void 0:t.min)&&void 0!==e?e:0,max:null!==(i=null===l||void 0===l||null===(n=l.x)||void 0===n?void 0:n.max)&&void 0!==i?i:1},y:{min:null!==(o=null===l||void 0===l||null===(s=l.y)||void 0===s?void 0:s.min)&&void 0!==o?o:0,max:null!==(r=null===l||void 0===l||null===(a=l.y)||void 0===a?void 0:a.max)&&void 0!==r?r:1}}}},Dk=(e=>(e[e.Caption=0]="Caption",e[e.Legend=1]="Legend",e[e.ToolbarLeft=2]="ToolbarLeft",e[e.ToolbarBottom=3]="ToolbarBottom",e[e.Navigator=4]="Navigator",e[e.Overlay=5]="Overlay",e))(Dk||{}),Ik=class{constructor(e){this.eventsHub=e,this.elements=new Map}registerElement(e,t){return this.elements.has(e)?this.elements.get(e).add(t):this.elements.set(e,new Set([t])),()=>{var i;return null===(i=this.elements.get(e))||void 0===i?void 0:i.delete(t)}}createContext(e,t){const i={width:e,height:t,layoutBox:new Pb(0,0,e,t)};for(const n of Object.values(Dk)){if("number"!==typeof n)continue;const e=this.elements.get(n);if(e)for(const t of e)t(i)}return i}emitLayoutComplete(e,t){var i,n;let{width:o,height:s}=e;this.eventsHub.emit("layout:complete",{axes:null!==(i=t.axes)&&void 0!==i?i:{},chart:{width:o,height:s},clipSeries:null!==(n=t.clipSeries)&&void 0!==n&&n,series:t.series})}},Ak=class{constructor(){this.labelData=new Map}updateLabels(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pb.zero;const n={x:-t.left,y:-t.top,width:i.width+t.left+t.right,height:i.height+t.top+t.bottom},o=new Set(e.map(e=>e.id));for(const l of this.labelData.keys())o.has(l)||this.labelData.delete(l);for(const l of e){const e=l.getLabelData();e.every(dy)&&this.labelData.set(l.id,e)}const s=uy(this.labelData,n,5);for(const l of e){var r,a;null===(r=l.updatePlacedLabelData)||void 0===r||r.call(l,null!==(a=s.get(l.id))&&void 0!==a?a:[])}}},Lk=class{constructor(e){this.eventsHub=e,this.mementoOriginatorKey="legend",this.legendDataMap=new Map}createMemento(){return this.getData().filter(e=>{let{hideInLegend:t,isFixed:i}=e;return!t&&!i}).map(e=>{let{enabled:t,seriesId:i,itemId:n,legendItemName:o}=e;return{visible:t,seriesId:i,itemId:n,legendItemName:o}})}guardMemento(e){return null==e||Ua(e)}restoreMemento(e,t,i){if(i)for(const o of i){var n;const{seriesId:e,data:t}=null!==(n=this.getRestoredData(o))&&void 0!==n?n:{};e&&t&&this.updateData(e,t)}this.update()}getRestoredData(e){const{seriesId:t,itemId:i,legendItemName:n,visible:o}=e;if(t){var s;const e=(null!==(s=this.legendDataMap.get(t))&&void 0!==s?s:[]).map(e=>{const n=e.seriesId===t&&(!i||e.itemId===i);return n&&e.isFixed&&this.warnFixed(e.seriesId,e.itemId),!e.isFixed&&n?p(p({},e),{},{enabled:o}):e});return{seriesId:t,data:e}}if(null!=i||null!=n)for(const a of this.getData()){var r;if(null!=i&&a.itemId!==i||null!=n&&a.legendItemName!==n)continue;if(a.isFixed)return void this.warnFixed(a.seriesId,i);const e=(null!==(r=this.legendDataMap.get(a.seriesId))&&void 0!==r?r:[]).map(e=>e.itemId===i||e.legendItemName===n?p(p({},e),{},{enabled:o}):e);return{seriesId:a.seriesId,data:e}}}warnFixed(e,t){jr.warnOnce("The legend item with seriesId [".concat(e,"] and itemId [").concat(t,"] is not configurable, this series item cannot be toggled through the legend."))}update(e){this.eventsHub.emit("legend:change",{legendData:null!==e&&void 0!==e?e:this.getData()})}updateData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.eventsHub.emit("legend:change-partial",{seriesId:e,legendData:t}),this.legendDataMap.set(e,t)}clearData(){this.legendDataMap.clear()}toggleItem(e,t,i,n){if(n){for(const t of this.getData()){var o;const i=(null!==(o=this.legendDataMap.get(t.seriesId))&&void 0!==o?o:[]).map(t=>t.legendItemName===n?p(p({},t),{},{enabled:e}):t);this.updateData(t.seriesId,i)}return}const s=this.getData(t),r=1===s.length,a=s.map(t=>null==i&&r||t.itemId===i?p(p({},t),{},{enabled:e}):t);this.updateData(t,a)}getData(e){var t;return e?null!==(t=this.legendDataMap.get(e))&&void 0!==t?t:[]:[...this.legendDataMap].reduce((e,t)=>{let[i,n]=t;return e.concat(n)},[])}getDatum(){let{seriesId:e,itemId:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getData(e).find(e=>e.itemId===t)}getSeriesEnabled(e){const t=this.getData(e);if(t.length>0)return t.some(e=>e.enabled)}getItemEnabled(){var e,t;let{seriesId:i,itemId:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null===(e=null===(t=this.getDatum({seriesId:i,itemId:n}))||void 0===t?void 0:t.enabled)||void 0===e||e}},Nk=class{updateCallback(e){this.resolvePartialCallback=e}resolvePartial(e,t,i){var n;return null===(n=this.resolvePartialCallback)||void 0===n?void 0:n.call(this,e,t,i)}},Tk=class{constructor(){this.groups=new Map}registerSeries(e){let{internalId:t,seriesGrouping:i,visible:n,type:o}=e;if(!i)return;let s=this.groups.get(o);null==s&&(s=new Map,this.groups.set(o,s)),s.set(t,{grouping:i,visible:n})}updateSeries(e){var t;let{internalId:i,seriesGrouping:n,visible:o,type:s}=e;if(!n)return;const r=null===(t=this.groups.get(s))||void 0===t?void 0:t.get(i);r&&(r.grouping=n,r.visible=o)}deregisterSeries(e){let{internalId:t,type:i}=e;const n=this.groups.get(i);null!=n&&(n.delete(t),0===n.size&&this.groups.delete(i))}getVisiblePeerGroupIndex(e){let{type:t,seriesGrouping:i,visible:n}=e;if(!i)return{visibleGroupCount:n?1:0,visibleSameStackCount:n?1:0,index:0};const o=new Set,s=new Set,r=this.groups.get(t);for(const d of null!==(a=null===r||void 0===r?void 0:r.values())&&void 0!==a?a:[]){var a;d.visible&&(o.add(d.grouping.groupIndex),d.grouping.groupIndex===i.groupIndex&&s.add(d.grouping.stackIndex))}const l=Array.from(o);return l.sort((e,t)=>e-t),{visibleGroupCount:l.length,visibleSameStackCount:s.size,index:l.indexOf(i.groupIndex)}}},Rk=class{constructor(e){this.updateCallback=e,this.events=new Oa}addListener(e,t){return this.events.on(e,t)}destroy(){this.events.clear()}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ku.FULL,t=arguments.length>1?arguments[1]:void 0;this.updateCallback(e,t)}dispatchUpdateComplete(e,t){this.events.emit("update-complete",{type:"update-complete",apiUpdate:e,wasShortcut:t})}dispatchPreDomUpdate(){this.events.emit("pre-dom-update",{type:"pre-dom-update"})}dispatchPreSceneRender(){this.events.emit("pre-scene-render",{type:"pre-scene-render"})}dispatchProcessData(e){let{series:t}=e;this.events.emit("process-data",{type:"process-data",series:t})}},Ek=class{constructor(e,t){this.eventsHub=new Oa,this.callbackCache=new Sp,this.highlightManager=new VM(this.eventsHub),this.formatManager=new HS,this.layoutManager=new Ik(this.eventsHub),this.localeManager=new CS(this.eventsHub),this.seriesStateManager=new Tk,this.stateManager=new WC,this.seriesLabelLayoutManager=new Ak,this.cleanup=new Ta;const{scene:i,root:n,syncManager:o,container:s,fireEvent:r,updateCallback:a,updateMutex:l,styleContainer:d,chartType:c,domMode:u,withDragInterpretation:h}=t;this.chartService=e,this.syncManager=o,this.domManager=new nS(this.eventsHub,this.chartService,s,d,u),this.widgets=new lk(this.domManager,{withDragInterpretation:h});const p=this.domManager.addChild("canvas","scene-canvas",null===i||void 0===i?void 0:i.canvas.element);this.scene=null!==i&&void 0!==i?i:new kS({canvasElement:p}),this.scene.setRoot(n),this.cleanup.register(this.scene.on("scene-changed",()=>{this.updateService.update(Ku.SCENE_RENDER)})),this.axisManager=new IS(this.eventsHub,n),this.legendManager=new Lk(this.eventsHub),this.annotationManager=new DS(this.eventsHub,e.annotationRoot,r),this.chartTypeOriginator=new VC(e),this.interactionManager=new TM,this.contextMenuRegistry=new zM(this.eventsHub),this.optionsGraphService=new Nk,this.updateService=new Rk(a),this.proxyInteractionService=new yS(this.eventsHub,this.localeManager,this.domManager),this.fontManager=new LS(this.domManager,this.updateService),this.historyManager=new jC(this.eventsHub),this.animationManager=new EM(this.interactionManager,l),this.dataService=new AS(this.eventsHub,e,this.animationManager),this.tooltipManager=new nk(this.eventsHub,this.localeManager,this.domManager,e.tooltip),this.zoomManager=new kk(this.eventsHub,this.updateService,r);for(const m of ca.listModulesByType(ua.Plugin)){var g;if(!m.chartType||m.chartType===c)null===(g=m.patchContext)||void 0===g||g.call(m,this)}}destroy(){this.animationManager.destroy(),this.axisManager.destroy(),this.callbackCache.invalidateCache(),this.domManager.destroy(),this.fontManager.destroy(),this.proxyInteractionService.destroy(),this.tooltipManager.destroy(),this.zoomManager.destroy(),this.widgets.destroy(),this.cleanup.flush()}},Pk=class extends kh{constructor(){super(...arguments),this.range="tooltip",this.drawingMode="cutout"}};function Ok(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function Fk(e,t){if(null==e||null==t)return e===t;if(e.size!==t.size)return!1;for(const[i,n]of e){const e=t.get(i);if(null==e)return!1;if(!Ok(n,e))return!1}return!0}function zk(e,t){const{props:i}=e,n=l(e,ob),{props:o}=t;return yu(n,l(t,sb))&&function(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i+=1){const n=e[i],{type:o,idsMap:s,scopes:r,data:a}=n,d=l(n,ib),c=t[i],{type:u,idsMap:h,scopes:p,data:g}=c,m=l(c,nb);if(o!==u)return!1;if(r&&p&&!kr(r,p))return!1;if(a&&g&&a!==g)return!1;if(!yu(d,m)||!Fk(s,h))return!1}return!0}(i,o)}function Bk(e,t,i,n){return t===e.dataSet&&(kr(i,e.ids)&&zk(n,e.opts))}function Vk(e){return e.filter(e=>"key"===e.type).map(e=>e.property).join(";")}Ab([ru],Pk.prototype,"range",2),Ab([ru],Pk.prototype,"drawingMode",2);var Gk=class e{constructor(e,t,i){this.mode=e,this.suppressFieldDotNotation=t,this.eventsHub=i,this.debug=Cr.create(!0,"data-model"),this.requested=[],this.status="setup"}async request(e,t,i){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");return new Promise((n,o)=>{this.requested.push({id:e,opts:i,dataSet:t,resolve:n,reject:o})})}execute(t){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");this.status="executed";const i=new Map;for(const e of this.requested)e.dataSet.hasPendingTransactions()&&i.set(e.dataSet,e.dataSet.getChangeDescription()),e.dataSet.commitPendingTransactions();this.debug("DataController.execute() - requested",this.requested);const n=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",n);const o=this.mergeRequested(n);this.debug("DataController.execute() - merged",o),this.debug.check()&&(Pr().processedData=[]);const s=[];for(const{dataSet:r,ids:a,opts:l,resolves:d,rejects:c}of o){let o=function(e){return Bk(e,r,a,l)};const u=null===t||void 0===t?void 0:t.find(o),h=(e,t)=>{if(this.debug.check()&&Pr("processedData").push(t),null!=t){s.push({opts:l,dataSet:r,dataLength:r.data.length,ids:a,dataModel:e,processedData:t});for(const i of d)i({dataModel:e,processedData:t})}else for(const i of c)i(new Error("AG Charts - no processed data generated"))},p=()=>{try{const e=new Qw(l,this.mode,this.suppressFieldDotNotation,this.eventsHub),t=new Map(n.map(e=>[e.id,e.dataSet])),i=e.processData(t);return h(e,i),e}catch(Ur){for(const t of c)t(Ur)}};if(null==u){p();continue}const{dataModel:g,processedData:m}=u,f=i.get(r);if(m&&f&&g.isReprocessingSupported(m)){if(this.debug("DataController.execute() - reprocessing data",m,r),g.reprocessData(m,i),Cr.check("data-model:reprocess-diff")){const t=new Qw(l,this.mode,this.suppressFieldDotNotation,this.eventsHub),i=new Map(n.map(e=>[e.id,e.dataSet])),o=t.processData(i),s=JSON.parse(JSON.stringify(m,e.jsonReplacer)),r=JSON.parse(JSON.stringify(o,e.jsonReplacer));delete s.time,delete s.optimizations,delete r.time,delete r.optimizations;const a=Xg(r,s);a?(jr.log("\u26a0\ufe0f DATA-MODEL REPROCESS DIFF DETECTED \u26a0\ufe0f"),jr.log("Difference between incremental update and full reprocess:"),jr.log(""),jr.log("BASELINE (full reprocess):"),jr.log(JSON.stringify(r,null,2)),jr.log(""),jr.log("REPROCESSED (incremental update):"),jr.log(JSON.stringify(s,null,2)),jr.log(""),jr.log("DIFF (what changed):"),jr.log(JSON.stringify(a,null,2))):jr.log("\u2705 Data-model reprocess matches baseline (no diff)")}h(g,m)}else p()}return s}validateRequests(e){const t=[];for(const[i,n]of e.entries())i>0&&n.dataSet.data.length!==e[0].dataSet.data.length&&!1===n.opts.groupByData&&!1===n.opts.groupByKeys?n.reject(new Error("all series[].data arrays must be of the same length and have matching keys.")):t.push(n);return t}mergeRequested(t){const i=[];for(const n of t){const t=i.find(e.groupMatch(n));t?t.push(n):i.push([n])}return i.map(e.mergeRequests)}static groupMatch(e){let{dataSet:t,opts:i}=e;const{groupByData:n,groupByKeys:o=!1,groupByFn:s,props:r}=i,a=Vk(r);return e=>{var i;let[r]=e;return(!1===n||r.dataSet===t)&&(null!==(i=r.opts.groupByKeys)&&void 0!==i&&i)===o&&r.opts.groupByFn===s&&Vk(r.opts.props)===a}}static mergeRequests(t){const i={ids:[],rejects:[],resolves:[],dataSet:t[0].dataSet,opts:p(p({},t[0].opts),{},{props:[]})},n=new Map,o=new Map;let s=0;for(const h of t){var r,a;const{id:t,dataSet:g,resolve:m,reject:f,opts:{props:v}}=h,y=l(h.opts,rb);i.ids.push(t),i.rejects.push(f),i.resolves.push(m),null!==(r=i.dataSet)&&void 0!==r||(i.dataSet=g),null!==(a=i.opts)&&void 0!==a||(i.opts=p(p({},y),{},{props:[]}));for(const r of v){var d;const a=p(p({},r),{},{scopes:[t],data:g.data});let l;e.createIdsMap(t,a),e.crossScopeMergableTypes.has(a.type)?l=-1:o.has(g.data)?l=o.get(g.data):(l=s++,o.set(g.data,l));const h="".concat(a.type,"-").concat(l,"-").concat(a.groupId),m=n.get(h),f=null===m||void 0===m?void 0:m.find(t=>e.deepEqual(t,a));if(null!=m)if(null!=f){var c,u;if(null!=a.scopes)null!==(c=f.scopes)&&void 0!==c||(f.scopes=[]),f.scopes.push(...a.scopes);if(("key"===f.type||"value"===f.type)&&null!==(d=a.idsMap)&&void 0!==d&&d.size)null!==(u=f.idsMap)&&void 0!==u||(f.idsMap=new Map),e.mergeIdsMap(a.idsMap,f.idsMap)}else i.opts.props.push(a),m.push(a);else i.opts.props.push(a),n.set(h,[a])}}return i}static mergeIdsMap(e,t){for(const[i,n]of e){const e=t.get(i);if(null==e)t.set(i,new Set(n));else for(const t of n)e.add(t)}}static createIdsMap(e,t){var i;null!=t.id&&(null!==(i=t.idsMap)&&void 0!==i||(t.idsMap=new Map),t.idsMap.has(e)?t.idsMap.get(e).add(t.id):t.idsMap.set(e,new Set([t.id])))}static deepEqual(t,i){if(t===i)return!0;if(t&&i&&"object"==typeof t&&"object"==typeof i){if(t.constructor!==i.constructor)return!1;let n,o;if(Array.isArray(t)){if(o=t.length,o!==i.length)return!1;for(n=o-1;n>=0;n--)if(!e.deepEqual(t[n],i[n]))return!1;return!0}const s=Object.keys(t);if(o=s.length,o!==Object.keys(i).length)return!1;for(n=o-1;n>=0;n--){const o=s[n];if(!e.skipKeys.has(o)&&(!Object.hasOwn(i,o)||!e.deepEqual(t[o],i[o])))return!1}return!0}return!1}static jsonReplacer(e,t){return t instanceof Map?{__type:"Map",value:Array.from(t.entries())}:t instanceof Set?{__type:"Set",value:Array.from(t)}:t}};Gk.crossScopeMergableTypes=new Set(["key","group-value-processor"]),Gk.skipKeys=new Set(["id","idsMap","type","scopes","data"]);var Hk=Gk,jk=class e{constructor(e){this.data=e,this.pendingTransactions=[]}static empty(){return new e([])}static wrap(t){return new e(t)}netSize(){if(!this.hasPendingTransactions())return this.data.length;const e=this.getChangeDescription();return e?e.indexMap.finalLength:this.data.length}addTransaction(e){const t=this.normalizeTransaction(e);this.pendingTransactions.push(t),this.cachedChangeDescription=void 0}deepClone(){return new e([...this.data])}normalizeTransaction(e){const{add:t,addIndex:i,prepend:n,append:o,remove:s,update:r}=e;if(void 0===t)return e;const a={remove:s,update:r};if(n&&(a.prepend=n),o&&(a.append=o),t&&t.length>0){const e=this.netSize();void 0===i||i>=e?a.append=o?[...o,...t]:t:0===i?a.prepend=n?[...t,...n]:t:a.insertions=[{index:i,items:t}]}return a}hasPendingTransactions(){return this.pendingTransactions.length>0}getPendingTransactionCount(){return this.pendingTransactions.length}commitPendingTransactions(){if(!this.hasPendingTransactions())return!1;const e=this.getChangeDescription();if(!e)return!1;const t=e.getPrependedValues(),i=e.getInsertionValues(),n=e.getAppendedValues(),o=[...t,...i,...n];let s=0;return e.applyToArray(this.data,function(e){if(s>=o.length)throw new Error("AG Charts - Internal error: No insertion value found for index ".concat(e));return o[s++]}),this.pendingTransactions=[],this.cachedChangeDescription=void 0,this.updateItemToIndexCache(e,n,t,i),!0}updateItemToIndexCache(e,t,i,n){if(!this.itemToIndexCache)return;const{indexMap:o}=e,{totalPrependCount:s,totalAppendCount:r,removedIndices:a}=o,l=a.size>0,d=n.length>0;if(!l&&0===s&&0===r&&!d)return;if(d)return void(this.itemToIndexCache=void 0);let c=!1,u=0;if(l){const e=Array.from(a).sort((e,t)=>e-t);if(c=0===e[0],c){for(let t=0;t<e.length;t++)if(e[t]!==t){c=!1;break}c&&(u=e.length)}}if(l&&!c)return void(this.itemToIndexCache=void 0);const h=this.itemToIndexCache,p=s-u;if(0!==p)for(const[m,f]of h)a.has(f)?h.delete(m):h.set(m,f+p);else if(l)for(const[m,f]of h)a.has(f)&&h.delete(m);for(let m=0;m<i.length;m++){const e=i[m];h.has(e)||h.set(e,m)}const g=o.finalLength-r;for(let m=0;m<t.length;m++){const e=t[m];h.has(e)||h.set(e,g+m)}}clearPendingTransactions(){const e=this.pendingTransactions.length;return this.pendingTransactions=[],this.cachedChangeDescription=void 0,e}getPendingTransactions(){return[...this.pendingTransactions]}toJSON(){return this.data}getChangeDescription(){if(!this.hasPendingTransactions())return;if(this.cachedChangeDescription)return this.cachedChangeDescription;const{indexMap:e,prependValues:t,appendValues:i,insertionValues:n}=this.buildIndexMap(),o=new _w(e,{prependValues:t,appendValues:i,insertionValues:n});return this.cachedChangeDescription=o,o}removeFromGroups(e,t){for(const i of e){let e=0;for(;e<i.length&&t.size>0;)t.has(i[e])?(t.delete(i[e]),i.splice(e,1)):e++;if(0===t.size)break}}buildIndexMap(){const e=this.data.length,t=this.collectTransactionEffects(),i=t.prependsList.flat(),n=t.appendsList.flat(),o=t.insertionsList.flat(),s=i.length,r=n.length,a=o.length,l=e-t.removedOriginalIndices.size,d=s+l+a+r,c=t.removedOriginalIndices.size>0?this.getSortedRemovedIndices(t.removedOriginalIndices):void 0,u=this.buildSpliceOperations(s,a,r,l,t.trackedInsertions,null===c||void 0===c?void 0:c.desc,null===c||void 0===c?void 0:c.asc),h=this.resolveUpdatedIndices(s,a,l,t.updateTracking,null===c||void 0===c?void 0:c.asc,t.updatedOriginalIndices,t.trackedInsertions);return{indexMap:{originalLength:e,finalLength:d,spliceOps:u,removedIndices:t.removedOriginalIndices,updatedIndices:h,totalPrependCount:s,totalAppendCount:r},prependValues:i,appendValues:n,insertionValues:o}}getSortedRemovedIndices(e){const t=Array.from(e).sort((e,t)=>e-t);return{asc:t,desc:[...t].reverse()}}collectTransactionEffects(){const e={prependsList:[],appendsList:[],insertionsList:[],trackedInsertions:[],removedOriginalIndices:new Set,updatedOriginalIndices:new Set,virtualLength:this.data.length};for(const t of this.pendingTransactions){const{prepend:i,append:n,insertions:o,remove:s,update:r}=t;this.applyPrepends(i,e),this.applyInsertions(o,e),this.applyAppends(n,e),this.applyRemovals(s,e),this.applyUpdates(r,e)}return{prependsList:e.prependsList,appendsList:e.appendsList,insertionsList:e.insertionsList,trackedInsertions:e.trackedInsertions,removedOriginalIndices:e.removedOriginalIndices,updatedOriginalIndices:e.updatedOriginalIndices,updateTracking:e.updateTracking}}applyPrepends(e,t){Array.isArray(e)&&0!==e.length&&(t.prependsList.unshift([...e]),t.virtualLength+=e.length)}applyInsertions(e,t){if(Array.isArray(e))for(const{index:i,items:n}of e)i>=0&&i<=t.virtualLength&&n.length>0&&(t.trackedInsertions.push({virtualIndex:i,items:[...n]}),t.insertionsList.push([...n]),t.virtualLength+=n.length)}applyAppends(e,t){Array.isArray(e)&&0!==e.length&&(t.appendsList.push([...e]),t.virtualLength+=e.length)}applyRemovals(e,t){if(!Array.isArray(e)||0===e.length)return;const i=new Set(e);if(this.removeFromGroups(t.prependsList,i),i.size>0&&this.removeFromGroups(t.insertionsList,i),t.trackedInsertions.length>0&&this.removeFromTrackedInsertions(e,t),i.size>0&&this.removeFromGroups(t.appendsList,i),i.size>0)for(let n=0;n<this.data.length&&i.size>0;n++){const e=this.data[n];i.has(e)&&(t.removedOriginalIndices.add(n),i.delete(e),t.virtualLength--)}i.size>0&&jr.warnOnce("applyTransaction() remove includes items not present in current data; ignoring missing items.")}applyUpdates(e,t){if(!Array.isArray(e)||0===e.length)return;const i=new Set(e),n=this.collectUpdatedIndicesFromGroups(t.prependsList,i),o=i.size>0?this.collectUpdatedIndicesFromGroups(t.insertionsList,i):[],s=i.size>0?this.collectUpdatedIndicesFromGroups(t.appendsList,i):[];i.size>0&&this.collectUpdatedOriginalIndices(i,t),t.updateTracking={updatedPrependsIndices:n,updatedAppendsIndices:s,updatedInsertionsIndices:o},i.size>0&&jr.warnOnce("applyTransaction() update includes items not present in current data; ignoring missing items.")}collectUpdatedIndicesFromGroups(e,t){if(0===t.size||0===e.length)return[];const i=[];let n=0;for(const o of e){for(const e of o)t.has(e)&&(i.push(n),t.delete(e)),n++;if(0===t.size)break}return i}getItemToIndexMap(){if(void 0===this.itemToIndexCache){this.itemToIndexCache=new Map;for(let e=0;e<this.data.length;e++)this.itemToIndexCache.has(this.data[e])||this.itemToIndexCache.set(this.data[e],e)}return this.itemToIndexCache}collectUpdatedOriginalIndices(e,t){const i=this.getItemToIndexMap();for(const n of[...e]){const o=i.get(n);void 0===o||t.removedOriginalIndices.has(o)||(t.updatedOriginalIndices.add(o),e.delete(n))}}removeFromTrackedInsertions(e,t){for(let i=0;i<t.trackedInsertions.length;i++){const n=t.trackedInsertions[i],o=n.items.length,s=[];let r=0;for(;r<n.items.length;)e.includes(n.items[r])?(s.push(r+s.length),n.items.splice(r,1),t.virtualLength--):r++;s.length>0&&this.adjustLaterInsertionsAfterRemoval(t.trackedInsertions,i,n,o,s)}}adjustLaterInsertionsAfterRemoval(e,t,i,n,o){const s=o.length;for(let r=t+1;r<e.length;r++){const t=e[r];if(t.virtualIndex<=i.virtualIndex)continue;const a=Math.min(Math.max(t.virtualIndex-i.virtualIndex,0),n);let l=0;for(const e of o){if(!(e<a))break;l++}a===n&&(l=s),l>0&&(t.virtualIndex-=l)}}buildSpliceOperations(e,t,i,n,o,s,r){const a=[];if(e>0&&a.push({index:0,deleteCount:0,insertCount:e}),s&&s.length>0){let t=s[0],i=1;for(let n=1;n<s.length;n++){const o=s[n];s[n-1]-o===1?i++:(a.push({index:t-i+1+e,deleteCount:i,insertCount:0}),t=o,i=1)}a.push({index:t-i+1+e,deleteCount:i,insertCount:0})}if(o.length>0)for(const l of o){const t=this.countRemovalsBeforeIndex(r,e,l.virtualIndex),i=l.virtualIndex-t;a.push({index:i,deleteCount:0,insertCount:l.items.length})}return i>0&&a.push({index:e+n+t,deleteCount:0,insertCount:i}),a}countRemovalsBeforeIndex(e,t,i){if(!e||0===e.length)return 0;let n=0;for(const o of e){if(!(o+t<i))break;n++}return n}resolveUpdatedIndices(e,t,i,n,o,s,r){const a=new Set;if(n)for(const l of n.updatedPrependsIndices)a.add(l);if(s.size>0){const t=Array.from(s).sort((e,t)=>e-t);let i=0;for(const n of t){if(o)for(;i<o.length&&o[i]<n;)i++;const t=o?i:0,s=n+e;let l=0;for(const e of r)e.virtualIndex<=s&&(l+=e.items.length);const d=n+e-t+l;a.add(d)}}if(n){const s=e+i+t;for(const e of n.updatedAppendsIndices)a.add(s+e);if(n.updatedInsertionsIndices.length>0&&r.length>0){let t=0;for(const i of r){const s=this.countRemovalsBeforeIndex(o,e,i.virtualIndex),r=i.virtualIndex-s;for(let e=0;e<i.items.length;e++)n.updatedInsertionsIndices.includes(t)&&a.add(r+e),t++}}}return a}},Wk=class e{constructor(e){this.chart=e}subscribe(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_GROUP,i=this.get(t);return i||(i={members:new Set},e.chartsGroups.set(t,i)),i.members.add(this.chart),this}unsubscribe(){var t,i;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_GROUP;const o=this.get(n);return null===o||void 0===o||o.members.delete(this.chart),null===o||void 0===o||null===(t=o.domains)||void 0===t||null===(t=t.x)||void 0===t||null===(t=t.sources)||void 0===t||delete t[this.chart.id],null===o||void 0===o||null===(i=o.domains)||void 0===i||null===(i=i.y)||void 0===i||null===(i=i.sources)||void 0===i||delete i[this.chart.id],this}getChart(){return this.chart}getGroupState(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_GROUP;return this.get(t)}getGroupMembers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_GROUP;const i=this.get(t);return i?Array.from(i.members):[]}getGroupSiblings(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_GROUP;return this.getGroupMembers(t).filter(e=>e!==this.chart)}getGroupSyncMode(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_GROUP;return this.getGroupMembers(t).some(e=>e.series.length>1)?"multi-series":"single-series"}get(t){return e.chartsGroups.get(t)}};Wk.chartsGroups=new Map,Wk.DEFAULT_GROUP=Symbol("sync-group-default");var _k=Wk,Kk=class extends kh{constructor(){super(...arguments),this.enabled=!1}};Ab([ru],Kk.prototype,"enabled",2),Ab([ru],Kk.prototype,"tabIndex",2);var Uk={};Db(Uk,{NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>Yk,fromToMotion:()=>$k,staticFromToMotion:()=>Zk});var Yk={added:"add",updated:"update",removed:"remove",unknown:"initial","no-op":"none"};function $k(e,t,i,n,o,s,r){const{fromFn:a,toFn:d,applyFn:c=(e,t)=>e.setProperties(t)}=o,{nodes:u,selections:h}=KS(n),g=(n,o)=>{let u,h=0,g=0;for(const f of o){var m;const v=n[h]===f,y={last:g>=o.length-1,lastLive:h>=n.length-1,prev:o[g-1],prevFromProps:u,prevLive:n[h-1],next:o[g+1],nextLive:n[h+(v?1:0)]},b="".concat(e,"_").concat(t,"_").concat(f.id);i.stopByAnimationId(b);let x="unknown";v?s&&r&&(x=Xk(f,f.datum,s,r)):x="removed",f.transitionOut="removed"===x;const C=a(f,f.datum,x,y),{phase:S,start:w,finish:M,delay:k,duration:D}=C,I=l(C,ab),A=d(f,f.datum,x,y),{phase:L,start:N,finish:T,delay:R,duration:E}=A,P=l(A,lb),O=null==M;i.animate({id:b,groupId:e,phase:null!==(m=null!==S&&void 0!==S?S:L)&&void 0!==m?m:"update",duration:null!==D&&void 0!==D?D:E,delay:null!==k&&void 0!==k?k:R,from:I,to:P,ease:zy,collapsable:O,onPlay:()=>{const e=p(p(p({},w),N),I);c(f,e,"start")},onUpdate(e){c(f,e,"update")},onStop:()=>{const e=p(p(p(p(p(p({},w),N),I),P),M),T);c(f,e,"end")}}),v&&h++,g++,u=I}};let m=0;for(const l of h){const n=l.nodes();g(n.filter(e=>!l.isGarbage(e)),n),i.animate({id:"".concat(e,"_").concat(t,"_selection_").concat(m),groupId:e,phase:"end",from:0,to:1,ease:zy,onStop(){l.cleanup()}}),m++}g(u,u)}function Zk(e,t,i,n,o,s,r){const{nodes:a,selections:l}=KS(n),{start:d,finish:c,phase:u}=r;i.animate({id:"".concat(e,"_").concat(t),groupId:e,phase:null!==u&&void 0!==u?u:"update",from:o,to:s,ease:zy,onPlay:()=>{if(d){for(const e of a)e.setProperties(d);for(const e of l){const t=e.nodes();e.batchedUpdate(function(){for(const e of t)e.setProperties(d)})}}},onUpdate(e){for(const t of a)t.setProperties(e);for(const t of l){const i=t.nodes();t.batchedUpdate(function(){for(const t of i)t.setProperties(e)})}},onStop:()=>{for(const e of a)e.setProperties(p(p({},s),c));for(const e of l){const t=e.nodes();e.batchedUpdate(function(){for(const e of t)e.setProperties(p(p({},s),c));e.cleanup()})}}})}function Xk(e,t,i,n){const o=i(e,t);return n.added.has(o)?"added":n.removed.has(o)?"removed":null==e.previousDatum&&null!=e.datum?"added":null!=e.previousDatum&&null==e.datum?"removed":"updated"}var qk={};function Qk(e,t){const{nodes:i,selections:n}=KS(e);for(const o of n){const e=o.nodes();o.batchedUpdate(function(){for(const i of e){const e=t(i,i.datum);i.setProperties(e)}o.cleanup()})}for(const o of i){const e=t(o,o.datum);o.setProperties(e)}}Db(qk,{resetMotion:()=>Qk});var Jk=class e{constructor(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.parentNode=e,this.autoCleanup=i,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=Cr.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(_b,t)?()=>new t:t}static select(t,i){return new e(t,i,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])}static selectAll(e,t){const i=[],n=e=>{if(t(e)&&i.push(e),e instanceof Gx)for(const t of e.children())n(t)};return n(e),i}static selectByClass(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return e.selectAll(t,e=>n.some(t=>e instanceof t))}static selectByTag(t,i){return e.selectAll(t,e=>e.tag===i)}createNode(e,t,i){const n=this.nodeFactory(e);return n.datum=e,null===t||void 0===t||t(n),null==i?this._nodes.push(n):this._nodes.splice(i,0,n),this.parentNode.appendChild(n),n}update(e,t,i){if(this.garbageBin.size>0&&this.debug("Selection - update() called with pending garbage",e),i&&0===this._nodesMap.size&&this._nodes.length>0)for(const o of this._nodes)this.garbageBin.add(o);if(!i&&this._nodesMap.size>0&&this._nodesMap.clear(),i){const o=new Map,s=new Map;for(let t=0;t<e.length;t++){let r=i(e[t]);if(o.has(r)){var n;const e=(null!==(n=s.get(r))&&void 0!==n?n:0)+1;s.set(r,e),r="".concat(r,":").concat(e)}o.set(r,t)}for(const[t,i]of this._nodesMap.entries()){const n=o.get(i);null==n?this.garbageBin.add(t):(t.datum=e[n],this.garbageBin.delete(t),o.delete(i))}for(const[i,n]of o.entries()){const o=e[n];this._nodesMap.set(this.createNode(o,t,n),i)}}else{const i=Math.max(e.length,this.data.length);for(let n=0;n<i;n++)n>=e.length?this.garbageBin.add(this._nodes[n]):n>=this._nodes.length?this.createNode(e[n],t):(this._nodes[n].datum=e[n],this.garbageBin.delete(this._nodes[n]))}return this.data=e.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){if(0===this.garbageBin.size)return this;const e=this;return this._nodes=this._nodes.filter(function(t){return!e.garbageBin.has(t)||(e._nodesMap.delete(t),e.garbageBin.delete(t),t.destroy(),!1)}),this}clear(){this.update([]);for(const e of this._nodesMap.keys())this.garbageBin.add(e);return this._nodesMap.clear(),this}isGarbage(e){return this.garbageBin.has(e)}each(e){const t=this._nodes;return this.parentNode.batchedUpdate(function(){for(const i of t.entries())e(i[1],i[1].datum,i[0])}),this}*[Symbol.iterator](){for(let e=0;e<this._nodes.length;e++){const t=this._nodes[e];yield{node:t,datum:t.datum,index:e}}}select(t){return e.selectAll(this.parentNode,t)}selectByClass(t){return e.selectByClass(this.parentNode,t)}selectByTag(t){return e.selectByTag(this.parentNode,t)}nodes(){return this._nodes}at(e){return this._nodes.at(e)}get length(){return this._nodes.length}batchedUpdate(e){this.parentNode.batchedUpdate(e)}},eD=class extends Dx{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.fill=void 0,this.strokeWidth=1}set x(e){this.x1=e,this.x2=e}set y(e){this.y1=e,this.y2=e}get midPoint(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}}computeBBox(){return new Pb(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(e,t){return(this.x1===this.x2||this.y1===this.y2)&&this.getBBox().clone().grow(this.strokeWidth/2).containsPoint(e,t)}distanceSquared(e,t){const{x1:i,y1:n,x2:o,y2:s}=this;return Ng(e,t,i,n,o,s,1/0)}render(e){var t;const{ctx:i,devicePixelRatio:n}=e;let{x1:o,y1:s,x2:r,y2:a}=this;if(o===r){const{strokeWidth:e}=this,t=Math.round(o*n)/n+Math.trunc(e*n)%2/(2*n);o=t,r=t}else if(s===a){const{strokeWidth:e}=this,t=Math.round(s*n)/n+Math.trunc(e*n)%2/(2*n);s=t,a=t}i.beginPath(),i.moveTo(o,s),i.lineTo(r,a),this.fillStroke(i),null===(t=this.fillShadow)||void 0===t||t.markClean(),super.render(e)}toSVG(){if(!this.visible)return;const e=Br("line");return e.setAttribute("x1",String(this.x1)),e.setAttribute("y1",String(this.y1)),e.setAttribute("x2",String(this.x2)),e.setAttribute("y2",String(this.y2)),this.applySvgStrokeAttributes(e),{elements:[e]}}};eD.className="Line",Ab([_y()],eD.prototype,"x1",2),Ab([_y()],eD.prototype,"y1",2),Ab([_y()],eD.prototype,"x2",2),Ab([_y()],eD.prototype,"y2",2);var tD=class{constructor(){this.enabled=!0}};Ab([ru],tD.prototype,"enabled",2),Ab([ru],tD.prototype,"stroke",2),Ab([ru],tD.prototype,"strokeWidth",2),Ab([ru],tD.prototype,"strokeOpacity",2);var iD=class extends kh{constructor(){super(...arguments),this.enabled=!1,this.border=new tD,this._cachedFormatter=void 0}formatValue(e,t,i,n){const{formatter:o,format:s}=this;let r;if(null!=o&&(null!==r&&void 0!==r||(r=e(o,n))),null!=s){var a,l;let e=this._cachedFormatter;null!=e&&e.type===t&&e.format===s||(e={type:t,format:s,formatter:HS.getFormatter(t,s)},this._cachedFormatter=e),null!==r&&void 0!==r||(r=null===(a=(l=e).formatter)||void 0===a?void 0:a.call(l,i))}return null==r||Ua(r)?r:String(r)}};function nD(e){var t;const{enabled:i=!1,stroke:n}=null!==(t=null===e||void 0===e?void 0:e.border)&&void 0!==t?t:{},o=null!=(null===e||void 0===e?void 0:e.fill)||i&&null!=n?null===e||void 0===e?void 0:e.padding:null;if(null==o)return{bottom:0,left:0,right:0,top:0};if("number"===typeof o)return{bottom:o,left:o,right:o,top:o};{const{bottom:e=0,left:t=0,right:i=0,top:n=0}=o;return{bottom:e,left:t,right:i,top:n}}}Ab([ru],iD.prototype,"enabled",2),Ab([ru],iD.prototype,"border",2),Ab([ru],iD.prototype,"color",2),Ab([ru],iD.prototype,"cornerRadius",2),Ab([ru],iD.prototype,"fill",2),Ab([ru],iD.prototype,"fillOpacity",2),Ab([ru],iD.prototype,"fontStyle",2),Ab([ru],iD.prototype,"fontWeight",2),Ab([ru],iD.prototype,"fontSize",2),Ab([ru],iD.prototype,"fontFamily",2),Ab([ru],iD.prototype,"formatter",2),Ab([ru],iD.prototype,"format",2),Ab([ru],iD.prototype,"padding",2),Ab([ru],iD.prototype,"itemStyler",2);var oD=class{constructor(){this.moduleMap=new Map}modules(){return this.moduleMap.values()}addModule(e,t){if(this.moduleMap.has(e))throw new Error("AG Charts - module already initialised: ".concat(e));this.moduleMap.set(e,t)}removeModule(e){var t,i;null===(t=this.moduleMap.get(e))||void 0===t||null===(i=t.destroy)||void 0===i||i.call(t),this.moduleMap.delete(e)}getModule(e){return this.moduleMap.get(e)}isEnabled(e){return this.moduleMap.has(e)}mapModules(e){return Array.from(this.moduleMap.values(),e)}destroy(){for(const t of this.moduleMap.values()){var e;null===t||void 0===t||null===(e=t.destroy)||void 0===e||e.call(t)}this.moduleMap.clear()}},sD=class extends Dx{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.horizontal=!1,this.strokeWidth=1}computeBBox(){return new Pb(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(e,t){return!1}render(e){var t;const{ctx:i}=e;let{x1:n,y1:o,x2:s,y2:r}=this;n=this.align(n),o=this.align(o),s=this.align(s),r=this.align(r);const{fill:a,horizontal:l}=this,{globalAlpha:d}=i;null!=a&&(this.applyFillAndAlpha(i),i.beginPath(),i.moveTo(n,o),i.lineTo(s,o),i.lineTo(s,r),i.lineTo(n,r),i.closePath(),i.fill(),i.globalAlpha=d);const{stroke:c,strokeWidth:u,startLine:h,endLine:p}=this;if(!(!h&&!p||!c||!u)){const{lineDash:e,lineDashOffset:t,lineCap:a,lineJoin:c}=this;this.applyStrokeAndAlpha(i),i.lineWidth=u,e&&i.setLineDash([...e]),t&&(i.lineDashOffset=t),a&&(i.lineCap=a),c&&(i.lineJoin=c),i.beginPath(),h&&(i.moveTo(n,o),l?i.lineTo(n,r):i.lineTo(s,o)),p&&(i.moveTo(s,r),l?i.lineTo(s,o):i.lineTo(n,r)),i.stroke(),i.globalAlpha=d}null===(t=this.fillShadow)||void 0===t||t.markClean(),super.render(e)}};function rD(e){switch(e.type){case"line":return e.value;case"range":return e.range}}function aD(e,t){const i=rD(e);if(null==i)return!1;const n=ck.is(t)||mk.is(t),o=e=>cv(e,n)&&!Number.isNaN(t.convert(e,{clamp:!0}));if("range"===e.type){const[e,t]=i;return o(e)&&o(t)}return o(i)}sD.className="Range",Ab([_y()],sD.prototype,"x1",2),Ab([_y()],sD.prototype,"y1",2),Ab([_y()],sD.prototype,"x2",2),Ab([_y()],sD.prototype,"y2",2),Ab([_y()],sD.prototype,"startLine",2),Ab([_y()],sD.prototype,"endLine",2),Ab([_y()],sD.prototype,"horizontal",2);var lD={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:1},"top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:-1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:-1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:-1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:-1},"bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:-1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:-1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:1},"inside-top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},dD={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:-1},"top-left":{rangeH:-1,rangeV:-1,labelH:1,labelV:-1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:1,labelV:-1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:1,labelV:1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:1,labelV:1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:1},"bottom-right":{rangeH:1,rangeV:1,labelH:-1,labelV:1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:-1,labelV:1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:-1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:-1,labelV:-1},"inside-top-right":{rangeH:-1,rangeV:-1,labelH:-1,labelV:-1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},cD={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:-1},"top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:-1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:-1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:-1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:1},"bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:-1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:1},"inside-top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:-1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},uD={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:-1},"top-left":{rangeH:-1,rangeV:-1,labelH:1,labelV:-1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:-1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:-1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:1,labelV:1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:1},"bottom-right":{rangeH:1,rangeV:1,labelH:-1,labelV:1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:-1,labelV:-1},"inside-top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:-1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},hD=class extends kh{constructor(){super(...arguments),this.fontSize=Eh.LARGE,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};Ab([ru],hD.prototype,"enabled",2),Ab([ru],hD.prototype,"text",2),Ab([ru],hD.prototype,"fontStyle",2),Ab([ru],hD.prototype,"fontWeight",2),Ab([ru],hD.prototype,"fontSize",2),Ab([ru],hD.prototype,"fontFamily",2),Ab([ru],hD.prototype,"padding",2),Ab([ru],hD.prototype,"color",2),Ab([ru],hD.prototype,"position",2),Ab([ru],hD.prototype,"rotation",2),Ab([ru],hD.prototype,"parallel",2);var pD=class extends kh{constructor(){super(),this.id=xm(this),this.defaultColorRange=[],this.fill="#c16068",this.label=new hD,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.position="top",this.rangeGroup=new Gx({name:this.id}),this.lineGroup=new Gx({name:this.id}),this.labelGroup=new Gx({name:this.id}),this.crossLineRange=new sD,this.crossLineLabel=new TC,this.data=void 0,this.startLine=!1,this.endLine=!1,this._isRange=void 0,this.lineGroup.append(this.crossLineRange),this.labelGroup.append(this.crossLineLabel),this.crossLineRange.pointerEvents=1}get defaultLabelPosition(){return"top"}update(e){const{enabled:t,type:i,data:n,scale:o}=this;if(!o||!t||!e||!aD(this,o)||null==n)return this.rangeGroup.visible=!1,this.lineGroup.visible=!1,void(this.labelGroup.visible=!1);this.rangeGroup.visible=e,this.lineGroup.visible=e,this.labelGroup.visible=e,this.updateNodes();const s="range"===i;s!==this._isRange&&(s?this.rangeGroup.appendChild(this.crossLineRange):this.lineGroup.appendChild(this.crossLineRange)),this._isRange=s}calculateLayout(e){var t,i;if(this.data=void 0,!e)return;const{type:n,range:o,value:s,scale:r,clippedRange:a,strokeWidth:l=0}=this;if(!r)return;const d=null!==(t=r.bandwidth)&&void 0!==t?t:0,c=null!==(i=r.step)&&void 0!==i?i:0,u=r instanceof pk?(c-d)/2:0;let h,p,g,m,[f,v]=$u(a);if(f-=d,v+=d,"line"===n){const e=d/2;if(h=r.convert(s)+e,p=Number.NaN,g=r.convert(s,{clamp:!0})+e,m=Number.NaN,g>=v||g<=f)return}else{if(!o)return;{const[e,t]=o,[i,n]=Ck(e,t);if(h=r.convert(e,{alignment:i}),p=r.convert(t,{alignment:n}),g=r.convert(e,{clamp:!0,alignment:i}),m=r.convert(t,{clamp:!0,alignment:n}),g>m&&([g,m]=[m,g],[h,p]=[p,h]),g>=v||m<=f)return;Number.isFinite(h)&&(g-=u),Number.isFinite(p)&&(p+=d,m+=d+u)}}g=Yu(g,a),m=Yu(m,a),h-u>=g&&(h-=u),p+u<=m&&(p+=u),this.startLine=l>0&&h>=g&&h<=g+u,this.endLine=l>0&&p>=m-d-u&&p<=m,this.data=[g,m],!1!==this.label.enabled&&this.label.text}updateNodes(){const{position:e,data:[t,i]=[0,0],gridLength:n}=this,o=Number.isFinite(i)?i-t:0;let s;switch(e){case"top":case"bottom":s=new Pb(t,"top"===e?0:-n,o,n);break;case"left":case"right":s=new Pb("left"===e?0:-n,t,n,o)}this.updateRangeNode(s);const{label:r}=this;!1!==r.enabled&&r.text&&(this.updateLabel(),this.positionLabel(s))}updateRangeNode(e){const{type:t,position:i,crossLineRange:n,startLine:o,endLine:s,fill:r,fillOpacity:a,stroke:l,strokeWidth:d,strokeOpacity:c,lineDash:u}=this;n.x1=e.x,n.x2=e.x+e.width,n.y1=e.y,n.y2=e.y+e.height,n.horizontal="top"===i||"bottom"===i,n.startLine=o,n.endLine=s,n.fill="range"===t?r:void 0,n.fillOpacity=null!==a&&void 0!==a?a:1,n.stroke=l,n.strokeWidth=null!==d&&void 0!==d?d:1,n.strokeOpacity=null!==c&&void 0!==c?c:1,n.lineDash=u}updateLabel(){const{crossLineLabel:e,label:t}=this;t.text&&(e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.fontSize=t.fontSize,e.fontFamily=t.fontFamily,e.fill=t.color,e.text=t.text)}get anchor(){const e="left"===this.position||"right"===this.position,t="range"===this.type,{position:i=this.defaultLabelPosition}=this.label;if(t){return(e?cD:uD)[i]}return(e?lD:dD)[i]}positionLabel(e){var t;const{crossLineLabel:i,label:n,anchor:o}=this;i.rotation=Bp(null!==(t=n.rotation)&&void 0!==t?t:0),i.textBaseline="middle",i.textAlign="center";const s=i.getBBox();if(!s)return;const{width:r,height:a}=s,l=n.padding+r/2,d=n.padding+a/2,c=e.x+e.width*(o.rangeH+1)/2-l*o.labelH,u=e.y+e.height*(o.rangeV+1)/2-d*o.labelV;i.x=c,i.y=u,i.rotationCenterX=c,i.rotationCenterY=u}computeLabelSize(){var e;const{label:t}=this;if(!1===t.enabled||!t.text)return;const i=new TC;i.fontFamily=t.fontFamily,i.fontSize=t.fontSize,i.fontStyle=t.fontStyle,i.fontWeight=t.fontWeight,i.text=t.text,i.rotation=Bp(null!==(e=t.rotation)&&void 0!==e?e:0),i.textBaseline="middle",i.textAlign="center";const n=i.getBBox();if(!n)return;const{width:o,height:s}=n;return{width:o,height:s}}calculatePadding(e){const{label:t,anchor:i}=this,n=this.computeLabelSize();if(!n)return;const{width:o,height:s}=n,r=t.padding+o,a=t.padding+s,l="left"===this.position||"right"===this.position;var d,c;if(l)if(-1===i.rangeH&&1===i.labelH)e.left=Math.max(null!==(d=e.left)&&void 0!==d?d:0,r);else if(1===i.rangeH&&-1===i.labelH){var u;e.right=Math.max(null!==(u=e.right)&&void 0!==u?u:0,r)}if(!l)if(-1===i.rangeV&&1===i.labelV)e.top=Math.max(null!==(c=e.top)&&void 0!==c?c:0,a);else if(1===i.rangeV&&-1===i.labelV){var h;e.bottom=Math.max(null!==(h=e.bottom)&&void 0!==h?h:0,a)}}};pD.className="CrossLine",Ab([ru],pD.prototype,"enabled",2),Ab([ru],pD.prototype,"type",2),Ab([ru],pD.prototype,"range",2),Ab([ru],pD.prototype,"value",2),Ab([ru],pD.prototype,"defaultColorRange",2),Ab([ru],pD.prototype,"fill",2),Ab([ru],pD.prototype,"fillOpacity",2),Ab([ru],pD.prototype,"stroke",2),Ab([ru],pD.prototype,"strokeWidth",2),Ab([ru],pD.prototype,"strokeOpacity",2),Ab([ru],pD.prototype,"lineDash",2),Ab([ru],pD.prototype,"label",2);var gD=class{constructor(){this.enabled=!0,this.width=1,this.style=[{fill:void 0,fillOpacity:1,stroke:void 0,strokeWidth:void 0,lineDash:[]}]}};Ab([ru],gD.prototype,"enabled",2),Ab([ru],gD.prototype,"width",2),Ab([ru],gD.prototype,"style",2);var mD=class extends kh{};Ab([ru],mD.prototype,"placement",2),Ab([ru],mD.prototype,"step",2),Ab([ru],mD.prototype,"values",2),Ab([ru],mD.prototype,"minSpacing",2),Ab([ru],mD.prototype,"maxSpacing",2);var fD=class extends kh{constructor(){super(...arguments),this.enabled=!0,this.border=new tD,this.wrapping="never",this.truncate=!1,this.spacing=5,this.color="#575757",this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this._formatters={"component:year":void 0,"component:month":void 0,"component:day":void 0,"component:none":void 0,"long:year":void 0,"long:month":void 0,"long:day":void 0,"long:none":void 0}}getSideFlag(){return this.mirrored?1:-1}formatValue(e,t,i,n){const{formatter:o,format:s}=this,{type:r,value:a,domain:l,boundSeries:d}=t,c="number"===t.type?t.fractionDigits:void 0,u="date"===t.type?t.unit:void 0;let h;if(null!=o){h=e(o,{value:a,index:i,domain:l,fractionDigits:c,unit:u,step:"date"===t.type?t.step:void 0,boundSeries:d})}if(null!=s&&null==h){var p,g;const{specifier:e,dateStyle:t="long",truncateDate:i}=null!==n&&void 0!==n?n:{},o="".concat(t,":").concat(null!==i&&void 0!==i?i:"none");let l=this._formatters[o];const d=HS.mergeSpecifiers(e,s);null!=l&&l.type===r&&l.unit===u&&yu(l.mergedFormat,d)||(l={type:r,mergedFormat:d,unit:u,formatter:HS.getFormatter(r,d,u,t,{truncateDate:i})},this._formatters[o]=l),h=null===(p=(g=l).formatter)||void 0===p?void 0:p.call(g,a,c)}return null==h||Ua(h)?h:String(h)}};Ab([ru],fD.prototype,"enabled",2),Ab([ru],fD.prototype,"border",2),Ab([ru],fD.prototype,"cornerRadius",2),Ab([ru],fD.prototype,"fill",2),Ab([ru],fD.prototype,"fillOpacity",2),Ab([ru],fD.prototype,"fontStyle",2),Ab([ru],fD.prototype,"fontWeight",2),Ab([ru],fD.prototype,"fontSize",2),Ab([ru],fD.prototype,"fontFamily",2),Ab([ru],fD.prototype,"wrapping",2),Ab([ru],fD.prototype,"truncate",2),Ab([ru],fD.prototype,"spacing",2),Ab([ru],fD.prototype,"minSpacing",2),Ab([ru],fD.prototype,"color",2),Ab([ru],fD.prototype,"rotation",2),Ab([ru],fD.prototype,"avoidCollisions",2),Ab([ru],fD.prototype,"mirrored",2),Ab([ru],fD.prototype,"padding",2),Ab([ru],fD.prototype,"parallel",2),Ab([ru],fD.prototype,"itemStyler",2),Ab([ru],fD.prototype,"formatter",2),Ab([ru],fD.prototype,"format",2);var vD=class{constructor(){this.enabled=!0,this.width=1,this.stroke=void 0}};Ab([ru],vD.prototype,"enabled",2),Ab([ru],vD.prototype,"width",2),Ab([ru],vD.prototype,"stroke",2);var yD=class extends kh{constructor(){super(...arguments),this.enabled=!0,this.width=1,this.size=6}};Ab([ru],yD.prototype,"enabled",2),Ab([ru],yD.prototype,"width",2),Ab([ru],yD.prototype,"size",2),Ab([ru],yD.prototype,"stroke",2);var bD=class extends kh{constructor(){super(...arguments),this.caption=new EC,this.enabled=!1,this.spacing=EC.SMALL_PADDING,this.fontSize=Eh.SMALLER,this.fontFamily="sans-serif",this.wrapping="always"}};Ab([ru],bD.prototype,"enabled",2),Ab([ru],bD.prototype,"text",2),Ab([ru],bD.prototype,"spacing",2),Ab([ru],bD.prototype,"fontStyle",2),Ab([ru],bD.prototype,"fontWeight",2),Ab([ru],bD.prototype,"fontSize",2),Ab([ru],bD.prototype,"fontFamily",2),Ab([ru],bD.prototype,"color",2),Ab([ru],bD.prototype,"wrapping",2),Ab([ru],bD.prototype,"formatter",2);var xD=(e=>(e[e.TickAndDomain=0]="TickAndDomain",e[e.TicksOnly=1]="TicksOnly",e[e.Off=2]="Off",e))(xD||{});var CD=2*Math.PI,SD=CD/2;function wD(e){const{min:t,max:i}=e,n=e=>e<t||e>i,o={fromFn(e,t,i){let{x1:o,x2:s,y1:r,y2:a}=e,l=e.opacity;return("added"===i||n(t.offset))&&(({x1:o,x2:s,y1:r,y2:a}=t),l=0),{x1:o,x2:s,y1:r,y2:a,opacity:l,phase:Yk[i]}},toFn(e,t,i){const{x1:n,x2:o,y1:s,y2:r}=t;let a=1;return"removed"===i&&(a=0),{x1:n,x2:o,y1:s,y2:r,opacity:a}},applyFn(e,t){e.setProperties(t),e.visible=!n(e.y)}},s={fromFn(e,t,i){var o;const s=null!==(o=e.previousDatum)&&void 0!==o?o:t;let{x:r,y:a,rotationCenterX:l,rotationCenterY:d,rotation:c}=s,u=e.opacity;return"removed"===i||n(s.y)?c=t.rotation:("added"===i||n(e.datum.y))&&(({x:r,y:a,rotationCenterX:l,rotationCenterY:d,rotation:c}=t),u=0),{x:r,y:a,rotationCenterX:l,rotationCenterY:d,rotation:c,opacity:u,phase:Yk[i]}},toFn(e,t,i){const{x:n,y:o,rotationCenterX:s,rotationCenterY:r}=t;let a=0,l=1;if("added"===i)a=t.rotation;else if("removed"===i)l=0,a=t.rotation;else{var d,c;a=function(e,t){return Math.abs(t-e)<SD?t:e>t?t+CD:t-CD}(null!==(d=null===(c=e.previousDatum)||void 0===c?void 0:c.rotation)&&void 0!==d?d:t.rotation,t.rotation)}return{x:n,y:o,rotationCenterX:s,rotationCenterY:r,rotation:a,opacity:l,finish:{rotation:t.rotation}}}},r={fromFn(e,t){var i;const{x1:n,x2:o,y1:s,y2:r}=null!==(i=e.previousDatum)&&void 0!==i?i:t;return{x1:n,x2:o,y1:s,y2:r,phase:Yk.updated}},toFn(e,t){const{x1:i,x2:n,y1:o,y2:s}=t;return{x1:i,x2:n,y1:o,y2:s}}},a={fromFn(e,t){const{translationX:i,translationY:n}=e;return{translationX:i,translationY:n,phase:Yk.updated}},toFn(e,t){const{translationX:i,translationY:n}=t;return{translationX:i,translationY:n}}};return{tick:o,line:r,label:s,group:a}}function MD(){return(e,t)=>({x:t.x,y:t.y,rotationCenterX:t.rotationCenterX,rotationCenterY:t.rotationCenterY,rotation:t.rotation})}var kD=(e=>(e[e.TickLines=0]="TickLines",e[e.AxisLine=1]="AxisLine",e[e.TickLabels=2]="TickLabels",e))(kD||{});function DD(e,t){var i,n,o,s;return e.domain===t.domain&&e.rangeExtent===t.rangeExtent&&e.nice[0]===t.nice[0]&&e.nice[1]===t.nice[1]&&e.gridLength===t.gridLength&&e.visibleRange[0]===t.visibleRange[0]&&e.visibleRange[1]===t.visibleRange[1]&&(null===(i=e.initialPrimaryTickCount)||void 0===i?void 0:i.unzoomed)===(null===(n=t.initialPrimaryTickCount)||void 0===n?void 0:n.unzoomed)&&(null===(o=e.initialPrimaryTickCount)||void 0===o?void 0:o.zoomed)===(null===(s=t.initialPrimaryTickCount)||void 0===s?void 0:s.zoomed)}function ID(e,t,i){var n,o;const s=null!==(n=e.bandwidth)&&void 0!==n?n:0,r=((null!==(o=e.step)&&void 0!==o?o:0)-s)/2,a=e.convert(i),l=a+s+r;return[a,Yu(a-r,t),Yu(l,t)]}var AD=class e{constructor(t,i){this.moduleCtx=t,this.scale=i,this.id="unknown",this._crossLines=[],this.nice=!0,this.reverse=!1,this.interval=new mD,this.dataDomain={domain:[],clipped:!1},this.title=new bD,this.gridLength=0,this.gridPadding=0,this.seriesAreaPadding=0,this.layoutConstraints={stacked:!0,align:"start",width:100,unit:"percent"},this.boundSeries=[],this.includeInvisibleDomains=!1,this.interactionEnabled=!0,this.axisGroup=new Gx({name:"".concat(this.id,"-axis")}),this.tickLineGroup=this.axisGroup.appendChild(new Wx({name:"".concat(this.id,"-Axis-tick-lines"),zIndex:0})),this.tickLabelGroup=this.axisGroup.appendChild(new Wx({name:"".concat(this.id,"-Axis-tick-labels"),zIndex:2})),this.labelGroup=new Gx({name:"".concat(this.id,"-Labels"),zIndex:bp.SERIES_ANNOTATION}),this.gridGroup=new jx({name:"".concat(this.id,"-Axis-grid"),zIndex:bp.AXIS_GRID}),this.gridFillGroup=this.gridGroup.appendChild(new Gx({name:"".concat(this.id,"-gridFills")})),this.gridLineGroup=this.gridGroup.appendChild(new Gx({name:"".concat(this.id,"-gridLines")})),this.crossLineRangeGroup=new Wx({name:"".concat(this.id,"-CrossLines-Range"),zIndex:bp.SERIES_CROSSLINE_RANGE}),this.crossLineLineGroup=new Wx({name:"".concat(this.id,"-CrossLines-Line"),zIndex:bp.SERIES_CROSSLINE_LINE}),this.crossLineLabelGroup=new Wx({name:"".concat(this.id,"-CrossLines-Label"),zIndex:bp.SERIES_LABEL}),this.tickLabelGroupSelection=Jk.select(this.tickLabelGroup,TC,!1),this.line=new vD,this.tick=new yD,this.gridLine=new gD,this.label=this.createLabel(),this.defaultTickMinSpacing=e.defaultTickMinSpacing,this.translation={x:0,y:0},this.layout={label:{fractionDigits:0,spacing:this.label.spacing,format:this.label.format}},this.axisContext=void 0,this.cleanup=new Ta,this.isHovering=!1,this.range=[0,1],this.visibleRange=[0,1],this.animatable=!0,this.tickLayout=void 0,this.formatterBoundSeries=new Cg(()=>{const{direction:e,boundSeries:t}=this;return Eu(t.flatMap(t=>t.getFormatterContext(e)))}),this.moduleMap=new oD,this.range=this.scale.range.slice();for(const e of this.crossLines)this.initCrossLine(e);this.cleanup.register(this.moduleCtx.widgets.containerWidget.addListener("mousemove",e=>this.onMouseMove(e)),this.moduleCtx.widgets.containerWidget.addListener("mouseleave",()=>this.endHovering()))}set crossLines(e){const{CrossLineConstructor:t}=this.constructor;for(const i of this._crossLines)this.detachCrossLine(i);this._crossLines=e.map(e=>{const i=new t;return i.set(e),i});for(const i of this._crossLines)this.attachCrossLine(i),this.initCrossLine(i)}get crossLines(){return this._crossLines}get type(){var e;return null!==(e=this.constructor.type)&&void 0!==e?e:""}get primaryLabel(){}get primaryTick(){}isCategoryLike(){return!1}resetAnimation(e){}onMouseMove(e){const t=this.tickLabelGroup.pickNode(e.currentX,e.currentY),i=null===t||void 0===t?void 0:t.datum,{textUntruncated:n}=null!==i&&void 0!==i?i:{};n?(this.moduleCtx.tooltipManager.updateTooltip(this.id,{canvasX:e.currentX,canvasY:e.currentY,showArrow:!1},[{type:"structured",title:n}]),this.isHovering=!0):this.endHovering()}endHovering(){this.isHovering&&(this.moduleCtx.tooltipManager.removeTooltip(this.id,void 0,!0),this.isHovering=!1)}attachCrossLine(e){this.crossLineRangeGroup.appendChild(e.rangeGroup),this.crossLineLineGroup.appendChild(e.lineGroup),this.crossLineLabelGroup.appendChild(e.labelGroup)}detachCrossLine(e){e.rangeGroup.remove(),e.lineGroup.remove(),e.labelGroup.remove()}destroy(){this.moduleMap.destroy(),this.cleanup.flush()}setScaleRange(e){const{range:t,scale:i}=this,n=(t[1]-t[0])/(e[1]-e[0]),o=n*e[0],s=t[0]-o;i.range=[s,s+n]}updateScale(){const{range:[e,t]}=this;this.setScaleRange(this.visibleRange);for(const i of this.crossLines)i.clippedRange=[e,t]}setCrossLinesVisible(e){this.crossLineRangeGroup.visible=e,this.crossLineLineGroup.visible=e,this.crossLineLabelGroup.visible=e}attachAxis(e){e.gridNode.appendChild(this.gridGroup),e.axisNode.appendChild(this.axisGroup),e.labelNode.appendChild(this.labelGroup),e.crossLineRangeNode.appendChild(this.crossLineRangeGroup),e.crossLineLineNode.appendChild(this.crossLineLineGroup),e.crossLineLabelNode.appendChild(this.crossLineLabelGroup)}detachAxis(){this.gridGroup.remove(),this.axisGroup.remove(),this.labelGroup.remove(),this.crossLineRangeGroup.remove(),this.crossLineLineGroup.remove(),this.crossLineLabelGroup.remove()}attachLabel(e){this.labelGroup.append(e)}inRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const[i,n]=$u(this.range);return e>=i-t&&e<=n+t}getRangeOverflow(e){const{range:t,visibleRange:i}=this,n=(t[1]-t[0])/(i[1]-i[0]),[o,s]=$u([t[0]-n*i[0],t[0]-n*i[0]+n]);return e<o?e-o:e>s?e-s:0}onGridLengthChange(e,t){t^e&&this.onGridVisibilityChange();for(const i of this.crossLines)this.initCrossLine(i)}onGridVisibilityChange(){}createLabel(){return new fD}update(){this.formatterBoundSeries.clear(),this.updatePosition(),this.updateSelections(),this.gridLineGroup.visible=this.gridLine.enabled,this.updateLabels(),this.updateCrossLines()}getLabelStyles(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.label;const n={border:i.border,color:i.color,cornerRadius:i.cornerRadius,fill:i.fill,fillOpacity:i.fillOpacity,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,padding:i.padding,spacing:i.spacing};let o;i.itemStyler&&(o=this.cachedCallWithContext(i.itemStyler,p(p({},e),n)));const s=xu(o,t,n);return{border:s.border,color:s.color,cornerRadius:s.cornerRadius,fill:s.fill,fillOpacity:s.fillOpacity,fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight,padding:s.padding,spacing:s.spacing}}getTickSize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tick;return e.enabled?e.size:0}processData(){this.invalidateLayoutCache();const{includeInvisibleDomains:e,boundSeries:t,direction:i}=this,n=e?t:t.filter(e=>e.isEnabled()),o=n.map(e=>e.getDomain(i));this.setDomains(...o)}getDomainExtentsNice(){return[this.nice,this.nice]}setDomains(){let e,t;if(arguments.length>0){const i=this.scale.normalizeDomains(...arguments);e={domain:i.domain,sortMetadata:{sortOrder:1}},t=i.animatable}else e={domain:[]},t=!0;this.dataDomain=this.normaliseDataDomain(e),this.reverse&&this.dataDomain.domain.reverse(),this.animatable=t}calculateDomain(e){const{dataDomain:{domain:t},range:i,scale:n,gridLength:o}=this,s=Zu(i),r=[0,1],a=this.getDomainExtentsNice();this.updateScale();const{unzoomedTickLayoutCache:l}=this;let d;if(null!=l&&DD(l,{domain:t,rangeExtent:s,nice:a,gridLength:o,visibleRange:r,initialPrimaryTickCount:e}))d=l.tickLayout;else{const i=n.range;this.setScaleRange([0,1]);const l=a.map(e=>e?0:2);d=this.calculateTickLayout(t,l,[0,1],e),n.range=i,this.unzoomedTickLayoutCache={domain:t,rangeExtent:s,nice:a,gridLength:o,visibleRange:r,initialPrimaryTickCount:e,tickLayout:d}}return this.updateScale(),n.domain=d.niceDomain,{unzoomedTickLayout:d,domain:n.domain}}calculateLayout(e,t){var i;this.chartLayout=t;const{visibleRange:n}=this,o=0===n[0]&&1===n[1],{unzoomedTickLayout:s,domain:r}=this.calculateDomain(e),a=this.getDomainExtentsNice();let l;if(o)l=s;else{const{range:t,gridLength:i}=this,o=Zu(t),s=a.map(e=>e?1:2),{tickLayoutCache:d}=this;null!=d&&DD(d,{domain:r,rangeExtent:o,nice:a,gridLength:i,visibleRange:n,initialPrimaryTickCount:e})?l=d.tickLayout:(l=this.calculateTickLayout(r,s,n,e),this.tickLayoutCache={domain:r,rangeExtent:o,nice:a,gridLength:i,visibleRange:n,initialPrimaryTickCount:e,tickLayout:l})}const{rawTickCount:d=0,fractionDigits:c,bbox:u}=l,h=null!==(i=s.rawTickCount)&&void 0!==i?i:0,p=0!==d&&0!==h?{zoomed:d,unzoomed:h}:void 0;return this.tickLayout=l.layout,this.layout.label={fractionDigits:c,spacing:this.label.spacing,format:this.label.format},this.layoutCrossLines(),{primaryTickCount:p,bbox:u}}invalidateLayoutCache(){this.unzoomedTickLayoutCache=void 0,this.tickLayoutCache=void 0,this.tickLayout=void 0}updateCrossLines(){const e=this.hasDefinedDomain()||this.hasVisibleSeries();for(const t of this.crossLines)t.update(e)}updatePosition(){const{crossLineRangeGroup:e,crossLineLineGroup:t,crossLineLabelGroup:i,gridGroup:n,translation:o}=this,s=Math.floor(o.x),r=Math.floor(o.y);n.setProperties({translationX:s,translationY:r}),e.setProperties({translationX:s,translationY:r}),t.setProperties({translationX:s,translationY:r}),i.setProperties({translationX:s,translationY:r})}tickFormatter(e,t,i,n,o){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"long";const{moduleCtx:r,label:a}=this,{formatManager:l}=r,d=i?this.primaryLabel:void 0,c=this.tickFormatParams(e,t,n,o),u=this.formatterBoundSeries.get();let h,p,g;if("number"===c.type)h=c.fractionDigits;else if("date"===c.type){const{unit:e,step:t,epoch:i}=c;p={unit:e,step:t,epoch:i},g=c.truncateDate}const m=this.uncachedCallWithContext.bind(this),f={datum:void 0,seriesId:void 0,legendItemName:void 0,key:void 0,source:"axis-label",property:this.getFormatterProperty(),domain:e,boundSeries:u},v=null!==d&&void 0!==d?d:a,y=i?a.format:void 0,b={specifier:HS.mergeSpecifiers(null===d||void 0===d?void 0:d.format,a.format),truncateDate:g};return(e,t)=>{var i,n;const o=this.datumFormatParams(e,f,h,p,s);return o.value=e,null!==(i=null!==(n=v.formatValue(m,o,t,{specifier:y,dateStyle:s,truncateDate:g}))&&void 0!==n?n:l.format(m,o,b))&&void 0!==i?i:l.defaultFormat(o,b)}}formatDatum(e,t,i,n,o,s,r,a,l,d){var c,u,h;if(null==t)return"";const{moduleCtx:p,dataDomain:g}=this;null!==a&&void 0!==a||(a=g.domain);const{formatManager:m}=p,f=this.formatterBoundSeries.get();let v;switch(i){case"crosshair":case"annotation-label":v=this.layout.label.fractionDigits+1;break;case"series-label":v=2;break;case"tooltip":v=3;break;case"legend-label":v=void 0}const y=this.datumFormatParams(t,{source:i,datum:s,seriesId:n,legendItemName:o,key:r,property:this.getFormatterProperty(),domain:a,boundSeries:f},v,void 0,"long"),{type:b,value:x}=y,C=this.createCallWithContext(e),S=null!==(c=null!==(u=null!==(h=null===l||void 0===l?void 0:l.formatValue(C,b,x,null!==d&&void 0!==d?d:y))&&void 0!==h?h:m.format(C,y))&&void 0!==u?u:this.label.formatValue(C,y,Number.NaN))&&void 0!==c?c:m.defaultFormat(y);return Ua(S)?S:String(S)}getBBox(){return this.axisGroup.getBBox()}initCrossLine(e){e.scale=this.scale,e.gridLength=this.gridLength}hasVisibleSeries(){return this.boundSeries.some(e=>e.isEnabled())}clipTickLines(e,t,i,n){this.tickLineGroup.setClipRect(new Pb(e,t,i,n))}clipGrid(e,t,i,n){this.gridGroup.setClipRect(new Pb(e,t,i,n))}getFormatterProperty(){const{direction:e,boundSeries:t}=this;let i=e;for(const n of t){const t=n.resolveKeyDirection(e);if(t!==e){i=t;break}}return i}getTitleFormatterParams(e){var t;const{direction:i}=this;return{domain:e,direction:i,boundSeries:this.formatterBoundSeries.get(),defaultValue:null===(t=this.title)||void 0===t?void 0:t.text}}normaliseDataDomain(e){return{domain:[...e.domain],clipped:!1}}getLayoutState(){return p({id:this.id,rect:this.getBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize(),direction:this.direction,domain:this.dataDomain.domain,scale:this.scale},this.layout)}getModuleMap(){return this.moduleMap}createModuleContext(){var e;return null!==(e=this.axisContext)&&void 0!==e||(this.axisContext=this.createAxisContext()),p(p({},this.moduleCtx),{},{parent:this.axisContext})}createAxisContext(){const{scale:e}=this;return{axisId:this.id,scale:this.scale,direction:this.direction,continuous:ck.is(e)||mk.is(e),getCanvasBounds:()=>Bx.toCanvas(this.axisGroup),seriesKeyProperties:()=>this.boundSeries.reduce((e,t)=>{const i=t.getKeyProperties(this.direction);for(const n of i)e.add(n);return e},new Set),seriesIds:()=>this.boundSeries.map(e=>e.id),scaleInvert:t=>e.invert(t,!0),scaleInvertNearest:t=>e.invert(t,!0),formatScaleValue:(e,t,i)=>this.formatDatum(void 0,e,t,void 0,void 0,void 0,void 0,void 0,i),attachLabel:e=>this.attachLabel(e),inRange:(e,t)=>this.inRange(e,t),getRangeOverflow:e=>this.getRangeOverflow(e),pickBand:e=>this.pickBand(e),measureBand:e=>this.measureBand(e)}}pickBand(e){if(!pk.is(this.scale))return;const{scale:t,range:i,id:n}=this,o=t.invert(this.isVertical()?e.y:e.x,!0),[s,r,a]=ID(t,i,o);return{id:n,value:o,band:[r,a],position:s}}measureBand(e){if(!pk.is(this.scale))return;const[,t,i]=ID(this.scale,this.range,e);return{band:[t,i]}}isVertical(){return this.direction===_u.Y}isReversed(){return this.reverse}cachedCallWithContext(e,t){const{callbackCache:i,chartService:n}=this.moduleCtx;return i.call([this,n],e,t)}uncachedCallWithContext(e,t){const{chartService:i}=this.moduleCtx;return Cp([this,i],e,t)}createCallWithContext(e){const{chartService:t}=this.moduleCtx;return(i,n)=>Cp([e,this,t],i,n)}};AD.defaultTickMinSpacing=50,AD.CrossLineConstructor=pD,Ab([ru],AD.prototype,"nice",2),Ab([ru],AD.prototype,"reverse",2),Ab([ru],AD.prototype,"interval",2),Ab([ru],AD.prototype,"title",2),Ab([og((e,t,i)=>e.onGridLengthChange(t,i))],AD.prototype,"gridLength",2);var LD=AD,ND=class extends fD{constructor(){super(...arguments),this.autoRotateAngle=335}};Ab([ru],ND.prototype,"autoRotate",2),Ab([ru],ND.prototype,"autoRotateAngle",2);var TD=class e extends pk{constructor(){super(...arguments),this.type="category",this.defaultTickCount=0,this.index=new Map,this.indexInitialized=!1,this._domain=[]}static is(t){return t instanceof e}set domain(e){this._domain!==e&&(this.invalid=!0,this._domain=e,this.index.clear(),this.indexInitialized=!1)}get domain(){return this._domain}get bands(){return this._domain}normalizeDomains(){let e;const t=new Set;let i=!0;for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];for(const r of o){const n=r.domain;t.has(n)||(t.add(n),null==e?e=RD(n):(i&&(i=ED(n,e)),e=RD([...e,...n])))}return null!==e&&void 0!==e||(e=[]),{domain:e,animatable:i}}toDomain(e){}invert(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.refresh();const i=t?this.bandwidth/2:0,n=this.invertNearestIndex(Math.max(0,e-i));return t||e===this.ordinalRange(n)?this.domain[n]:void 0}ticks(e){var t,i;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.domain,o=arguments.length>2?arguments[2]:void 0;const{bands:s}=this;let{tickCount:r}=e;if(0===r){const e=s.length>1?1:0;return{ticks:s[e]?[s[e]]:[],count:void 0,firstTickIndex:e}}let a=null!=r&&0!==r?Math.trunc(s.length/r):1;if(a=qu(a),a<=1)return $b(n,!1,o);r=Math.trunc(s.length/a);const l=a*r,d=qu(Math.trunc((s.length-l)/2)),c=za(0,Math.floor((null!==(t=null===o||void 0===o?void 0:o[0])&&void 0!==t?t:0)*s.length),s.length),u=za(0,Math.ceil((null!==(i=null===o||void 0===o?void 0:o[1])&&void 0!==i?i:1)*s.length),s.length),h=Math.floor((c-d)/a)*a+d,p=Math.ceil((u-d)/a)*a+d,g=[];for(let f=h;f<p;f+=a)f>=0&&f<s.length&&g.push(s[f]);let m=g.length>0?this.findIndex(g[0]):void 0;return null!=m&&(m=Math.floor((m-d)/a)),{ticks:g,count:void 0,firstTickIndex:m}}findIndex(e){const{index:t,indexInitialized:i}=this;if(!i){const{domain:e}=this;for(let i=0;i<e.length;i++)t.set(tv(e[i]),i);this.indexInitialized=!0}return t.get(tv(e))}};function RD(e){let t;const i=new Set;for(const o of e){const s=tv(o),r=i.size;i.add(s);var n;if(i.size!==r)null===(n=t)||void 0===n||n.push(o);else null!==t&&void 0!==t||(t=e.slice(0,i.size))}return null!==t&&void 0!==t?t:e}function ED(e,t){let i=-1;for(const n of e){const e=t.indexOf(n);if(-1===e)i=1/0;else{if(e<=i)return!1;i=e}}return!0}var PD=new Date(1970,0,4),OD=class e extends ck{constructor(){super([],[0,1]),this.type="time"}static is(t){return t instanceof e}toDomain(e){return new Date(e)}convert(e,t){var i;return super.convert("number"===typeof e?e:null!==(i=null===e||void 0===e?void 0:e.valueOf())&&void 0!==i?i:Number.NaN,t)}invert(e){return new Date(super.invert(e))}niceDomain(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.domain;if(t.length<2)return[];let[i,n]=t;const o=this.getPixelRange();for(let s=0;s<4;s++){const[t,s]=BD(i,n,e,o);if(tv(i)===tv(t)&&tv(n)===tv(s))break;i=t,n=s}return[i,n]}ticks(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.domain,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,1],{extend:n=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{nice:o,interval:s,tickCount:r=ck.defaultTickCount,minTickCount:a,maxTickCount:l}=e;if(t.length<2)return;const d=t.map(tv),c=d[0],u=d.at(-1);if(null!=s){var h;return{ticks:null!==(h=zD({start:c,stop:u,interval:s,availableRange:this.getPixelRange(),visibleRange:i,extend:n}))&&void 0!==h?h:FD({start:c,stop:u,tickCount:r,minTickCount:a,maxTickCount:l,visibleRange:i,extend:n}),count:void 0}}if(o.every(Boolean)&&2===r)return{ticks:t,count:void 0};if(o.every(Boolean)&&1===r)return{ticks:t.slice(0,1),count:void 0};const p=Yf(c,u,r,a,l,{weekStart:PD});if(null==p)return;return{ticks:wf(p,new Date(c),new Date(u),{visibleRange:i,extend:n}),count:void 0,firstTickIndex:Tf(p,new Date(c),new Date(u),{visibleRange:i,extend:n}),timeInterval:p}}};function FD(e){let{start:t,stop:i,tickCount:n,minTickCount:o,maxTickCount:s,visibleRange:r,extend:a}=e;const l=Yf(t,i,n,o,s,{weekStart:PD});return l?wf(l,new Date(t),new Date(i),{visibleRange:r,extend:a}):[]}function zD(e){let{start:t,stop:i,interval:n,availableRange:o,visibleRange:s,extend:r}=e;if(!n)return[];if(el(n)||"string"===typeof n){const e=wf(n,new Date(t),new Date(i),{visibleRange:s,extend:r});if(Qf(e.length,o))return;return e}const a=Math.abs(n);if(Qf(Math.abs(i-t)/a,o))return;const l=Vf.findLast(e=>a%e.duration===0);if(l){const{timeInterval:e,step:n,duration:o}=l;return wf(p(p({},e),{},{step:n*Ef(e)*Math.round(a/o),epoch:Uf(e,{weekStart:PD})}),new Date(t),new Date(i),{visibleRange:s,extend:r})}let d=new Date(Math.min(t,i));const c=new Date(Math.max(t,i)),u=[];for(;d<=c;)u.push(d),d=new Date(d),d.setMilliseconds(d.getMilliseconds()+a);return u}function BD(e,t,i,n){const{interval:o}=i,s=Math.min(tv(e),tv(t)),r=Math.max(tv(e),tv(t));let a;if(el(o)||"string"===typeof o)a=o;else{var l;let e;"number"===typeof o&&(e=(r-s)/Math.max(o,1),Qf(e,n)&&(e=void 0)),null!==e&&void 0!==e||(e=null!==(l=i.tickCount)&&void 0!==l?l:ck.defaultTickCount),a=Yf(s,r,e,i.minTickCount,i.maxTickCount,{weekStart:PD})}if(null==a)return[e,t];const d=wf(a,new Date(s),new Date(r),{extend:!0});if(null==d||d.length<2)return[e,t];const c=d[0],u=d.at(-1);return e<=t?[c,u]:[u,c]}var VD=class e extends mk{constructor(){super(...arguments),this.type="ordinal-time",this.defaultTickCount=ck.defaultTickCount,this._domain=[],this.isReversed=!1}static is(t){return t instanceof e}set domain(e){e!==this._domain&&(this.invalid=!0,this._domain=e,this._bands=void 0,this._numericBands=void 0,this._uniformityCache=void 0,this.isReversed=GD(e))}get domain(){return this._domain}get bands(){var e;return null!==(e=this._bands)&&void 0!==e||(this._bands=this.isReversed?this.domain.slice().reverse():this.domain),this._bands}get numericBands(){var e;return null!==(e=this._numericBands)&&void 0!==e||(this._numericBands=this.bands.map(e=>e.valueOf())),this._numericBands}getUniformityCache(e){const{bands:t}=this,i=t.length;if(!e||0===e[0]&&1===e[1])return i>1e3&&void 0===this._uniformityCache&&(this._uniformityCache=gk(t)),this._uniformityCache;return gk(t,Math.floor(e[0]*i),Math.min(Math.ceil(e[1]*i),i-1))}normalizeDomains(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=t.filter(e=>e.domain.length>0);if(0===n.length)return{domain:[],animatable:!1};const o=n[0].domain,s=n.every(e=>e.domain===o);if(1===n.length||s){var r;const e=n[0];let t,i=e.domain,o=!1;var a;if(void 0===(null===(r=e.sortMetadata)||void 0===r?void 0:r.sortOrder))t=Mg(i);else t=e.sortMetadata.sortOrder,o=null!==(a=e.sortMetadata.isUnique)&&void 0!==a&&a;return-1===t?i=i.slice().reverse():null==t&&(i=o?i.slice().sort((e,t)=>e.valueOf()-t.valueOf()):wg(i.slice())),{domain:i,animatable:!0}}return{domain:wg(n.map(e=>e.domain).flat()),animatable:!0}}ticks(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,1],{extend:o=!1,dropInitial:s=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{interval:r,maxTickCount:a,tickCount:l=a}=e,{bands:d}=this;if(!d.length)return;if(this.refresh(),null==r){const{ticks:e,tickOffset:i,tickEvery:s}=this.getDefaultTicks(t,l,n,o);let r=e.length>0?this.findIndex(e[0]):void 0;return r=null==r?void 0:Math.floor((r-i)/s),{ticks:e,count:void 0,firstTickIndex:r}}let c,u;t&&t.length>=2?(c=t[0].valueOf(),u=t.at(-1).valueOf()):(c=d[0].valueOf(),u=d.at(-1).valueOf());const[h,p]=this.range,g=null!==(i=zD({start:c,stop:u,interval:r,availableRange:Math.abs(p-h),visibleRange:n,extend:o}))&&void 0!==i?i:this.getDefaultTicks(t,l,n,o).ticks,m=[];let f=-1;for(const y of g){var v;const e=null!==(v=this.findIndex(y,Pa.Trailing))&&void 0!==v?v:-1,t=e===f;f=e,s&&0===e||-1===e||t||m.push(d[e])}return{ticks:m,count:void 0,firstTickIndex:void 0}}stepTicks(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,1],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const o=t?this.bandDomainIndices(t):void 0,s=this.ticksEvery(o,i,e,0,!1),r=s.at(-1),a=n&&e>1?null===o||void 0===o?void 0:o[1]:void 0,l=null!=a&&null!=r?this.findIndex(r):void 0;return null!=l&&null!=a&&a-l<e&&s.pop(),s}bandCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,1];const{domain:t}=this,i=Math.floor(e[0]*t.length);return Math.ceil(e[1]*t.length)-i}getDefaultTicks(e,t,i,n){const{bands:o}=this,s=Math.ceil(o.length/t),r=Math.floor(s/2),a=e?this.bandDomainIndices(e):void 0;return{ticks:this.ticksEvery(a,i,s,r,n),tickOffset:r,tickEvery:s}}bandDomainIndices(e){var t,i;const n=GD(e);return[null!==(t=this.findIndex(e[n?e.length-1:0],Pa.Trailing))&&void 0!==t?t:0,null!==(i=this.findIndex(e[n?0:e.length-1],Pa.Trailing))&&void 0!==i?i:this.bands.length-1]}ticksEvery(){let[e,t]=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,this.bands.length],i=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;const{bands:r}=this,a=e,l=t-e+1;let d,c=a+Math.floor(i[0]*l),u=a+Math.ceil(i[1]*l);if(s&&(c-=n,u+=n),c=Math.max(c,0),u=Math.min(u,r.length),n<=1)d=r.slice(c,u);else{d=[];for(let e=c;e<u;e+=1)(e-a+o)%n===0&&d.push(r[e])}return d}};function GD(e){return e.length>0&&e[0]>e.at(-1)}var HD=5e7,jD=class e extends mk{constructor(){super(...arguments),this.type="unit-time",this.defaultTickCount=12,this._domain=[],this._bands=void 0}static is(t){return t instanceof e}static supportsInterval(e,t){return WD(e,t)}set domain(e){e!==this._domain&&(this._domain=e,this._bands=void 0,this._numericBands=void 0,this._uniformityCache=void 0,this._domainBoundaries=void 0,this._bandRangeCache=void 0,this._encodedBands=void 0,this._encodingParams=void 0,this._linearParams=void 0)}get domain(){return this._domain}get interval(){return this._interval}set interval(e){this._interval!==e&&(this._interval=e,this._bands=void 0,this._numericBands=void 0,this._uniformityCache=void 0,this._domainBoundaries=void 0,this._bandRangeCache=void 0,this._encodedBands=void 0,this._encodingParams=void 0,this._linearParams=void 0)}get bands(){if(void 0===this._bands)if(this.ensureEncodedBands(),null!=this._encodedBands&&null!=this._encodingParams){const e=this._encodingParams;this._bands=this._encodedBands.map(t=>kf(t,e))}else this._bands=[];return this._bands}get numericBands(){if(void 0===this._numericBands)if(this.ensureEncodedBands(),null!=this._encodedBands&&null!=this._encodingParams){const e=this._encodingParams;this._numericBands=this._encodedBands.map(t=>Nf(t,e))}else this._numericBands=[];return this._numericBands}ensureEncodedBands(){if(void 0!==this._encodedBands)return;const{domain:e,interval:t}=this;if(e.length<2||null==t)return void(this._encodedBands=[]);const i=this.getCachedBandRange();if(null==i)return void(this._encodedBands=[]);const[n,o]=i,s={visibleRange:[0,1],extend:!1};if(Sf(t,n,o,s)>HD)return jr.warnOnce("the configured unit results in too many bands, ignoring. Supply a larger unit."),void(this._encodedBands=[]);const{encodedValues:r,encodingParams:a}=Mf(t,n,o,s);this._encodedBands=r,this._encodingParams=a}getBandCountForUpdate(){var e,t;return this.ensureEncodedBands(),null!==(e=null===(t=this._encodedBands)||void 0===t?void 0:t.length)&&void 0!==e?e:0}getUniformityCache(e){const t=this.getBandCountForUpdate();if(!e||0===e[0]&&1===e[1]){if(t>1e3&&void 0===this._uniformityCache)if(this.ensureEncodedBands(),null!=this._encodingParams&&null!=this._encodedBands&&this._encodedBands.length>=2){const e=Nf(this._encodedBands[0],this._encodingParams),t=Nf(this._encodedBands[1],this._encodingParams);this._uniformityCache={isUniform:!0,interval:t-e}}else this._uniformityCache={isUniform:!1};return this._uniformityCache}if(this.ensureEncodedBands(),null!=this._encodingParams&&null!=this._encodedBands&&this._encodedBands.length>=2){const e=Nf(this._encodedBands[0],this._encodingParams);return{isUniform:!0,interval:Nf(this._encodedBands[1],this._encodingParams)-e}}return{isUniform:!1}}normalizeDomains(){return uk(...arguments)}getCachedBandRange(){var e;const{domain:t,interval:i}=this;if(!(t.length<2||null==i))return null!==(e=this._bandRangeCache)&&void 0!==e||(this._bandRangeCache={start:ff(i,t[0]),stop:ff(i,t[1])}),[this._bandRangeCache.start,this._bandRangeCache.stop]}getDomainBoundaries(){const{interval:e}=this;if(null!=e){if(void 0===this._domainBoundaries){const t=this.getCachedBandRange();if(null==t)return;const[i,n]=t,o=Math.min(i.valueOf(),n.valueOf()),s=Math.max(i.valueOf(),n.valueOf()),r=bf(e,new Date(s)).valueOf();this._domainBoundaries={d0:o,dNext:r}}return this._domainBoundaries}}getLinearParams(){if(void 0===this._linearParams&&(this.ensureEncodedBands(),null!=this._encodedBands&&null!=this._encodingParams&&this._encodedBands.length>=2)){const e=Nf(this._encodedBands[0],this._encodingParams),t=Nf(this._encodedBands[1],this._encodingParams);this._linearParams={firstBandTime:e,intervalMs:t-e}}return this._linearParams}isLinearUnit(){var e;const t=null===(e=this._encodingParams)||void 0===e?void 0:e.unit;return"millisecond"===t||"second"===t||"minute"===t||"hour"===t}findIndex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pa.Leading;if(null==e)return;const i=this.getBandCountForUpdate();if(0===i)return;if(1===i)return 0;const n=this.getLinearParams();if(null==n||0===n.intervalMs)return super.findIndex(e,t);const{firstBandTime:o,intervalMs:s}=n,r=e.valueOf(),a=(r-o)/s;let l=t===Pa.Trailing?Math.ceil(a):Math.floor(a);if(l=Math.max(0,Math.min(l,i-1)),this.isLinearUnit()){if(t===Pa.Trailing){if(o+l*s<r&&l===i-1)return}else{if(o+l*s>r&&0===l)return}return l}const d=this.numericBands;if(t===Pa.Trailing){for(;l>0&&d[l-1]>=r;)l--;for(;l<i-1&&d[l]<r;)l++;if(d[l]<r)return}else{for(;l<i-1&&d[l+1]<=r;)l++;for(;l>0&&d[l]>r;)l--;if(d[l]>r)return}return l}convert(e,t){this.refresh(),e instanceof Date||(e=new Date(e));const{domain:i,interval:n}=this;if(i.length<2)return Number.NaN;if(!0!==(null===t||void 0===t?void 0:t.clamp)&&null!=n){const t=this.getDomainBoundaries();if(null!=t){const i=e.valueOf();if(i<t.d0||i>=t.dNext)return Number.NaN}}return super.convert(e,t)}calculateBands(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e===this.domain&&0===t[0]&&1===t[1]&&!i&&null!=this._bands)return{bands:this._bands,firstBandIndex:0};if(e.length<2)return{bands:[],firstBandIndex:void 0};const{interval:n}=this;if(null==n)return{bands:[],firstBandIndex:void 0};const o={visibleRange:t,extend:i};if(!WD(e,n,o))return{bands:[],firstBandIndex:void 0};const s=e===this.domain?this.getCachedBandRange():_D(e,n);if(null==s)return{bands:[],firstBandIndex:void 0};const[r,a]=s;if(Sf(n,r,a,o)>HD)return jr.warnOnce("the configured unit results in too many bands, ignoring. Supply a larger unit."),{bands:[],firstBandIndex:void 0};return{bands:wf(n,r,a,o),firstBandIndex:Tf(n,r,a,o)}}ticks(e){var t,i;let n,o,s,{interval:r}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.domain,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,1],{extend:d=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(a.length<2)return;if(a!==this.domain||d?({bands:n,firstBandIndex:o}=this.calculateBands(a,l,d)):(({bands:n}=this.calculateBands(a,[0,1],!1)),s=function(e,t,i){var n;return null!==(n=Yb(e,t,i))&&void 0!==n?n:[0,e.length]}(n,!1,l),o=s[0]),null==r)return{ticks:n,count:void 0,firstTickIndex:o};const c=this.interval?Ff(this.interval):1/0,u=Math.min(a[0].valueOf(),a[1].valueOf()),h=Math.max(a[0].valueOf(),a[1].valueOf());let p,g,m;if(el(r)||"string"===typeof r)p=wf(r,a[0],a[1],{extend:!0,visibleRange:l}),g=0,m=p.length-1;else{var f,v;const e=s?s[0]:0,t=s?s[1]:n.length-1;p=n,g=null!==(f=cg(e,t,e=>n[e].valueOf()<=u))&&void 0!==f?f:e,m=null!==(v=cg(e,t,e=>n[e].valueOf()<=h))&&void 0!==v?v:t}const y=[];let b,x,C;for(let M=g;M<=m;M++){const e=p[M].valueOf(),t=cg(0,n.length-1,t=>n[t].valueOf()<=e),i=null!=t&&t!=b?n[t]:void 0;b=t,null!=i&&e-i.getTime()<=c&&y.push(i)}if(this.interval){const e=_D([new Date(u),new Date(h)],this.interval);x=e[0].valueOf(),C=e[1].valueOf()}else x=u,C=h;let S=null!==(t=ug(0,y.length-1,e=>y[e].valueOf()>=x))&&void 0!==t?t:0,w=null!==(i=cg(0,y.length-1,e=>y[e].valueOf()<=C))&&void 0!==i?i:y.length-1;return d&&(S=Math.max(S-1,0),w=Math.min(w+1,y.length-1)),{ticks:y.slice(S,w+1),count:y.length,firstTickIndex:o}}};function WD(e,t,i){const[n,o]=_D(e,t);return Sf(t,n,o,i)<=HD}function _D(e,t){return[ff(t,e[0]),ff(t,e[1])]}function KD(e,t,i,n,o){let[s,r]=$u(t.map(Number));const a=Math.floor(i.unzoomed);if(a<=1){const[t,i]=function(e,t){let i=e,n=t,o=0;do{[i,n]=Jf(i,n);const{ticks:e}=Wf(i,n,5);if(e.length%2===1)return[i,n];i-=1,n+=1}while(o++<10);return[e,t]}(s,r),a=5*Math.pow(2,-Math.ceil(Math.log2(o[1]-o[0]))),{ticks:l}=Wf(t,i,a,void 0,void 0,o),d=[e.toDomain(t),e.toDomain(i)];return n&&d.reverse(),{domain:d,ticks:l}}if(s===r){const e=Math.floor(Math.log10(s)),t=Math.pow(10,e),i=Math.min(t,1),n=a-1;s-=i*Math.floor(n/2),r=s+i*n}let l=s,d=r;l=function(e,t,i){e=Math.floor(e);const n=Math.abs(t-e)/(i-1),o=Math.floor(Math.log10(n)),s=Math.pow(10,o);return Math.floor(e/s)*s}(l,d,a);const c=function(e,t,i){const n=i-1,o=(t-e)/n;return function(e){const t=Math.floor(Math.log10(e)),i=Math.pow(10,t),n=e/i;return n>0&&n<=1?i:n>1&&n<=2?2*i:n>2&&n<=5?5*i:n>5&&n<=10?10*i:e}(o)}(l,d,a);d=l+(a-1)*c;const u=Math.floor(l/c)*c,h=Math.floor(d/c)*c;u<=s&&h>=r&&(l=u,d=h);const p=[e.toDomain(l),e.toDomain(d)];n&&p.reverse();const g=function(e,t,i){const n=_a(t),o=Math.pow(10,n),s=[];for(let r=0;r<i;r++){const i=e+t*r;s.push(Math.round(i*o)/o)}return s}(l,c*((i.unzoomed-1)/(i.zoomed-1)),Math.floor(i.zoomed));return{domain:p,ticks:g}}var UD=[1,2,3,4,6,8,9,10,12];function YD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=[];for(const n of e){const{x:e,y:o,width:s,height:r}=n;if(i.some(i=>rg(i,e,o,s+t,r+t)))return!0;i.push(n)}return!1}function $D(e,t,i,n){if(null==e)return t;if("number"!==typeof e){const o=t[0];return wf("string"===typeof e?{unit:e,epoch:o}:p(p({},e),{},{epoch:o}),t[0],t[1],{visibleRange:i,extend:n})}const o=[],s=t[0].valueOf(),r=t[1].valueOf();for(let a=s;a<=r;a+=e)o.push(new Date(a));return o}function ZD(e,t){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o+=1){var i,n;if((null===(i=e[o])||void 0===i?void 0:i.valueOf())!==(null===(n=t[o])||void 0===n?void 0:n.valueOf()))return!1}return!0}function XD(e,t){let{niceDomain:i,rawTicks:n,rawFirstTickIndex:o=0,generatePrimaryTicks:s,primaryTicksIndices:r,alignment:a,fractionDigits:l,timeInterval:d}=t;const{scale:c,label:u,tickFormatter:h,inRange:p,isVertical:g,sizeLimit:m=1/0}=e,f=OD.is(c)||mk.is(c),v=Wm(u),y=rv(),b=[];return qD(c,i,()=>{var e,t;const x=pk.is(c)&&null!==(e=c.bandwidth)&&void 0!==e?e:1/0,C=(null!==(t=c.bandwidth)&&void 0!==t?t:0)/2,S=function(e,t,i,n,o,s,r){const a=t?"component":"long",l=t&&s?Of(s):void 0,d=t?r(i,n,!0,o,l,a):null,c=e?r(i,n,!1,o,s,a):null;return(e,t,i)=>{var n;const o=e?d:c;return null!==(n=null===o||void 0===o?void 0:o(t,i))&&void 0!==n?n:String(t)}}(u.enabled,s,i,n,l,d,h),w={font:u,maxWidth:g?m:x,maxHeight:g?x:m,overflow:u.truncate?"ellipsis":"hide",textWrap:u.wrapping};for(let i=0;i<n.length;i++){var M;const e=n[i],t=c.convert(e,{alignment:a})+C;if(p&&!p(t))continue;const s=null!==(M=null===r||void 0===r?void 0:r.has(i))&&void 0!==M&&M,l=S(s,e,i);let d=null;u.avoidCollisions&&(d=Um(l,w)||null);const h=null!==d&&void 0!==d?d:l,g=Ua(h),m=h!==l&&(!g||Yl(h.at(-1)));let x;if(f){const t=null===e||void 0===e?void 0:e.valueOf();Number.isFinite(t)&&(x=y("v:".concat(t)))}null!==x&&void 0!==x||(x=y("l:".concat(g?ed(h.flat()):h))),b.push({tick:e,tickId:x,tickLabel:h,isPrimary:s,index:i+o,textUntruncated:m?ed(l):void 0,textMetrics:g?_m(h,u):v.measureLines(Gl(h)),translation:Math.floor(t)})}}),b}function qD(e,t,i){const n=e.domain;try{e.domain=t,i()}finally{e.domain=n}}function QD(e,t){if(null!=e)return"string"===typeof e?e:el(e)&&null!=t?e[Rf(t)]:void 0}var JD=new Date(1970,0,4);function eI(e){const{label:t,domain:i,axisRotation:n,labelOffset:o,sideFlag:s}=e,{defaultRotation:r,configuredRotation:a,parallelFlipFlag:l,regularFlipFlag:d}=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=Wp(e),o=!n&&i>=0&&i<=Math.PI?-1:1,s=!n&&i-Math.PI/2>=0&&i-Math.PI/2<=Math.PI?-1:1;let r=0;return t?r=o*(Math.PI/2):-1===s&&(r=Math.PI),{configuredRotation:n,defaultRotation:r,parallelFlipFlag:o,regularFlipFlag:s}}(t.rotation,t.parallel,n),c=a+r,u=function(i){var n;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=null!==(n=t.minSpacing)&&void 0!==n?n:0===a&&0===s?10:0,l=c+s,d=nD(t);return YD(function(e,t,i){const{niceDomain:n,ticks:o,timeInterval:s}=t;if(null==s)return[];const r=function(e){if(e.length<2)return 1/0;let t=0,i=e[0].translation;for(let n=1;n<e.length;n++){const o=e[n].translation,s=Math.abs(o-i);t=Math.max(t,s),i=o}return t}(o),{label:a,labelOffset:l,primaryLabel:d,domain:c}=e,{width:u,height:h}=function(e,t,i,n,o){const s=QD(e.format,n);if(null==s)return{width:0,height:0};const r=Tl(s),a=n?Of(n):void 0,l=QD(null===t||void 0===t?void 0:t.format,a),d=l?Tl(l):r,c=new Date(i[0]),u=new Date(i.at(-1)),h=a?wf(a,new Date(i[0]),new Date(i.at(-1)),{extend:!0}):void 0;let p=0,g=0;if(null!=r){const t=nD(e),i=t.left+t.right,s=t.top+t.bottom;let a,l;null!=h&&h.length>1?(a=h[0],l=h[1]):(a=c,l=u);const d=wf(n,a,l,{limit:50});for(const e of d){const t=r(e),{width:n,height:a}=o.measureLines(t);p=Math.max(p,n+i),g=Math.max(g,a+s)}}if(null!=d&&null!=h){const e=nD(t),i=e.left+e.right,n=e.top+e.bottom;for(const t of h){const e=d(t),{width:s,height:r}=o.measureLines(e);p=Math.max(p,s+i),g=Math.max(g,r+n)}}return{width:Math.ceil(p),height:Math.ceil(g)}}(a,d,null!==n&&void 0!==n?n:c,s,Wm(a)),p=[];for(const g of[0,r]){const{x:e,y:t}=Tp(l,g,i);p.push({x:e,y:t,width:u,height:h})}return p}(e,i,l),r)||YD(function(e,t,i,n){const o=[],s=n.left+n.right,r=n.top+n.bottom;for(const{tickLabel:a,textMetrics:l,translation:d}of e){if(!a)continue;const{x:e,y:n}=Tp(t,d,i),c=l.width+s,u=l.height+r;o.push({x:e,y:n,width:c,height:u})}return o}(i.ticks,o,l,d),r)},{maxTickCount:h}=tI(e),p=function(e){var t;if(null!==(t=e.interval)&&void 0!==t&&t.values)return 2;if(null!=e.primaryTickCount)return 1;return 0}(e),g=t.enabled&&t.avoidCollisions,m=Number.isFinite(h)?h:10,f=g&&t.autoRotate&&null==t.rotation;let v=0,y=0,b=!0,x={tickDomain:[],niceDomain:i,ticks:[],rawTicks:[],rawTickCount:void 0,timeInterval:void 0,fractionDigits:0};for(;b&&v<=m;)({tickData:x,index:v}=iI(e,p,x,v)),y=f&&u(x,0)?Wp(t.autoRotateAngle):0,b=g&&u(x,y);const C=function(e,t,i,n,o){const s=t>0&&t<=Math.PI,r=i>0&&i<=Math.PI;if(e){if(!t&&!i)return"center";if(n*(s||r?-1:1)===-1)return"end"}else if(n*o===-1)return"end";return"start"}(t.parallel,a,y,s,d),S=function(e,t,i,n){return e&&!t?i*n===-1?"top":"bottom":"middle"}(t.parallel,a,s,l);return{tickData:x,textAlign:C,textBaseline:S,rotation:a+y}}function tI(e){let{scale:t,domain:i,range:n,visibleRange:o,label:s,defaultTickMinSpacing:r,interval:{minSpacing:a,maxSpacing:l}}=e;const{defaultTickCount:d}=t,c=Zu(n),u=Zu(o);if(TD.is(t)||VD.is(t)&&i.length<1e3){const e=TD.is(t)?i.length:Math.min(i.length,Math.max(1,Math.floor(c/(u*r)))),n=Math.ceil(c/(u*s.fontSize));return{tickCount:Math.min(n,e),minTickCount:0,maxTickCount:e}}return ev(c,u,a,l,d,r)}function iI(e,t,i,n){const{step:o,values:s}=e.interval,{maxTickCount:r,minTickCount:a,tickCount:l}=tI(e),d=e=>Math.max(l-e,a),c=null==o&&null==s&&d(n)>a,u=i.rawTicks,h=l-a,p={minTickCount:a,maxTickCount:r,tickCount:d(n)};let g=nI(e,t,p);if(c&&ZD(g.rawTicks,u)){let i=n,o=h;for(;i<=o;){n=Math.trunc((i+o)/2),p.tickCount=d(n);const s=nI(e,t,p);ZD(s.rawTicks,u)?i=n+1:(g=s,o=n-1)}}const{tickDomain:m,niceDomain:f,rawTicks:v,rawTickCount:y,rawFirstTickIndex:b,generatePrimaryTicks:x,primaryTicksIndices:C,alignment:S,fractionDigits:w,timeInterval:M}=g;return{tickData:{tickDomain:m,niceDomain:f,rawTicks:v,rawTickCount:y,fractionDigits:w,timeInterval:M,ticks:XD(e,{niceDomain:f,rawTicks:v,rawFirstTickIndex:b,generatePrimaryTicks:x,primaryTicksIndices:C,alignment:S,fractionDigits:w,timeInterval:M})},index:n+1}}function nI(e,t,i){var n,o;const{domain:s,reverse:r,visibleRange:a,scale:l,interval:d,primaryLabel:c,niceMode:u,primaryTickCount:h,minimumTimeGranularity:g}=e,m=p({nice:u.map(e=>0===e),interval:d.step},i),f=p(p({},m),{},{nice:u.map(e=>0===e||1===e)});let v;1===t&&null!=h&&ck.is(l)&&(v=KD(l,s,h,r,a));const y=u.includes(0)?null!==(n=null===(o=v)||void 0===o?void 0:o.domain)&&void 0!==n?n:l.niceDomain(m,s):s;let b,x,C,S,w,M,k=y;const D=!0===(null===c||void 0===c?void 0:c.enabled)&&null==f.interval;qD(l,y,()=>{switch(t){case 2:if(k=d.values,b=d.values,x=b.length,VD.is(l)?M=Pa.Trailing:jD.is(l)&&(M=Pa.Interpolate),ck.is(l)){const[e,t]=$u(y.map(Number));b=b.filter(i=>Number(i)>=e&&Number(i)<=t).sort((e,t)=>Number(e)-Number(t))}break;case 1:if(v)b=v.ticks,x=v.ticks.length;else{const e=l.ticks(f,y,a);b=null===e||void 0===e?void 0:e.ticks,x=null===e||void 0===e?void 0:e.count}break;default:{const{tickCount:e,minTickCount:t,maxTickCount:n}=i;if(y.length>0&&null==f.interval&&(jD.is(l)||D&&(OD.is(l)||VD.is(l)))){const i=y,o=Math.min(i[0].valueOf(),i.at(-1).valueOf()),s=Math.max(i[0].valueOf(),i.at(-1).valueOf());S=Yf(o,s,e,t,n,{weekStart:null==c?JD:void 0,primaryOnly:!0})}let o;VD.is(l)?o=g:jD.is(l)&&(o=l.interval),null!=o&&null!=S&&Ff(o)>=Ff(S)&&(S=o);const s=S?function(e,t,i,n,o,s,r,a){var l;if(!OD.is(e)&&!mk.is(e))return;const d=Of(s);if(null==d)return;r&&(t=[1-t[1],1-t[0]]);const c=Math.min(e.domain[0].valueOf(),e.domain.at(-1).valueOf()),u=Math.max(e.domain[0].valueOf(),e.domain.at(-1).valueOf());let[h,g]=xf(new Date(c),new Date(u),t);h=ff(d,h),h.valueOf()>=c&&(h=yf(d,h)),g=vf(d,g),g.valueOf()<=u&&(g=bf(d,g));const m=wf(d,h,g),f=Ff(s),v=VD.is(e),y=p(p({},o),{},{interval:s}),b=[];let x,C,S,w=0;if(VD.is(e)){var M;const o=Rf(s);C=null!=a&&Ff(a)>=Ff(o)?2:3,S=Pa.Trailing;const r=i/n,l=e.bandCount(t)/(18*r);w=null!==(M=UD.findLast(e=>l>=e))&&void 0!==M?M:1}else jD.is(e)&&(null==e.interval||Ff(e.interval)>=f)?C=1:(C=0,S=Pa.Interpolate);for(let p=0;p<m.length-1;p++){const t=m[p],i=m[p+1],n=0===p,o=p===m.length-2,s=i.valueOf()-t.valueOf(),r=[Math.max((c-t.valueOf())/s,0),Math.min((u-t.valueOf())/s,1)];let a;switch(C){case 0:a=$D(y.interval,[t,i],r,!0);break;case 1:case 3:{var k;const n=e.ticks(y,[t,i],r,{extend:!0,dropInitial:!0});a=null!==(k=null===n||void 0===n?void 0:n.ticks)&&void 0!==k?k:[];break}case 2:a=e.stepTicks(w,[t,i],void 0,!o)}if(Ar(a,e=>e.valueOf()<t.valueOf()),o||Lr(a,e=>{switch(C){case 0:case 3:return e.valueOf()+f>i.valueOf();case 1:case 2:return e.valueOf()>=i.valueOf()}}),0===a.length)continue;const l=Sg(a[0],t);!(0===C?0===l:l<=f)||v&&n||(null!==x&&void 0!==x||(x=new Set),x.add(b.length)),b.push(...a)}return 1===(null===(l=x)||void 0===l?void 0:l.size)&&x.has(0)&&(x=void 0),{ticks:b,primaryTicksIndices:x,alignment:S}}(l,a,e,n,f,S,r,g):void 0;if(s)({ticks:b,primaryTicksIndices:w,alignment:M}=s);else{const e=jD.is(l)&&null==f.interval&&null!=S?p(p({},f),{},{interval:S}):f,t=l.ticks(e,y,a);if(b=null===t||void 0===t?void 0:t.ticks,x=null===t||void 0===t?void 0:t.count,C=null===t||void 0===t?void 0:t.firstTickIndex,OD.is(l)||mk.is(l)){const e="number"===typeof f.interval?iv(f.interval):f.interval;null!==S&&void 0!==S||(S=null!==e&&void 0!==e?e:null===t||void 0===t?void 0:t.timeInterval)}}}}}),null!==b&&void 0!==b||(b=[]);let I=0;for(const p of b){if("number"!==typeof p)continue;const e=_a(p);e>I&&(I=e)}return D||(w=void 0),{tickDomain:k,niceDomain:y,rawTicks:b,rawTickCount:x,rawFirstTickIndex:C,generatePrimaryTicks:D,primaryTicksIndices:w,alignment:M,fractionDigits:I,timeInterval:S}}var oI=class e extends LD{constructor(e,t){let i;super(e,t),this.maxThicknessRatio=.3,this.crossAxisTranslation={x:0,y:0},this.minimumTimeGranularity=void 0,this.headingLabelGroup=this.axisGroup.appendChild(new jx({name:"".concat(this.id,"-Axis-heading")})),this.lineNodeGroup=this.axisGroup.appendChild(new jx({name:"".concat(this.id,"-Axis-line")})),this.lineNode=this.lineNodeGroup.appendChild(new eD({zIndex:1})),this.tickLineGroupSelection=Jk.select(this.tickLineGroup,eD,!1),this.gridLineGroupSelection=Jk.select(this.gridLineGroup,eD,!1),this.gridFillGroupSelection=Jk.select(this.gridFillGroup,pC,!1),this.tempText=new TC({debugDirty:!1}),this.tempCaption=new EC,this.animationManager=e.animationManager,this.animationState=new Vm("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()},reset:"empty"},ready:{update:e=>this.animateReadyUpdate(e),resize:()=>this.resetSelectionNodes(),reset:"empty"}}),this.headingLabelGroup.appendChild(this.title.caption.node),this.cleanup.register(e.eventsHub.on("layout:complete",e=>{const t=[e.chart.width,e.chart.height];null==i||kr(t,i)||this.animationState.transition("resize"),i=t}),this.title.caption.registerInteraction(this.moduleCtx,"afterend"))}static is(t){return t instanceof e}get horizontal(){return"top"===this.position||"bottom"===this.position}onGridVisibilityChange(){}resetAnimation(e){"initial"===e&&this.animationState.transition("reset")}get direction(){return"top"===this.position||"bottom"===this.position?_u.X:_u.Y}createAxisContext(){return p(p({},super.createAxisContext()),{},{position:this.position})}createLabel(){return new ND}updateDirection(){switch(this.position){case"top":this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}calculateLayout(e,t){return this.updateDirection(),super.calculateLayout(e,t)}layoutCrossLines(){const e=this.hasDefinedDomain()||this.hasVisibleSeries();for(const i of this.crossLines){var t;null===(t=i.calculateLayout)||void 0===t||t.call(i,e)}}calculateTickLayout(e,t,i,n){var o,s=this;const r=this.label.getSideFlag(),a=r*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding);if(2===t[0]&&2===t[1]&&!1===this.label.enabled&&!1===this.tick.enabled&&!1===this.gridLine.enabled){const{bbox:t,spacing:i}=this.tickBBox(e,[],[]);return{ticks:[],rawTickCount:0,tickDomain:e,niceDomain:e,fractionDigits:0,timeInterval:void 0,bbox:t,layout:{ticks:[],tickLines:[],gridLines:[],gridFills:[],labels:[],spacing:i}}}const{label:l,primaryLabel:d,scale:c,range:u,interval:h,reverse:p,defaultTickMinSpacing:g,minimumTimeGranularity:m}=this,f=eI({label:l,scale:c,interval:h,primaryLabel:d,domain:e,range:u,reverse:p,niceMode:t,visibleRange:i,defaultTickMinSpacing:g,minimumTimeGranularity:m,sideFlag:r,labelOffset:a,primaryTickCount:n,axisRotation:this.horizontal?-.5*Math.PI:0,isVertical:this.direction===_u.Y,sizeLimit:null===(o=this.chartLayout)||void 0===o?void 0:o.sizeLimit,inRange:e=>this.inRange(e,.001),tickFormatter:function(){return s.tickFormatter(...arguments)}}),{tickData:v}=f;if(this.label.avoidCollisions&&this.horizontal&&v.ticks.length>2&&(ck.is(this.scale)||mk.is(this.scale))){var y,b;const e=null!==(y=null===(b=this.chartLayout)||void 0===b?void 0:b.padding.right)&&void 0!==y?y:0,t=v.ticks.at(-1);null!=(null===t||void 0===t?void 0:t.tickLabel)&&t.translation+t.textMetrics.width/2>u[1]+e&&(t.tickLabel=void 0,0===i[0]&&1===i[1]&&(v.ticks[0].tickLabel=void 0))}const{ticks:x,tickDomain:C,rawTicks:S,rawTickCount:w,fractionDigits:M,timeInterval:k,niceDomain:D}=v,I=x.map(e=>this.getTickLabelProps(e,f)),{position:A,gridPadding:L,gridLength:N}=this,T="bottom"===A||"right"===A?-1:1,R=T*L,E=T*(N+L),P=this.calculateGridLines(x,R,E),O=this.calculateGridFills(x,R,E),F=this.calculateTickLines(x,T),{bbox:z,spacing:B}=this.tickBBox(C,x,I);return{ticks:S,rawTickCount:w,tickDomain:C,niceDomain:D,fractionDigits:M,timeInterval:k,bbox:z,layout:{ticks:x,gridLines:P,gridFills:O,tickLines:F,labels:I,spacing:B}}}calculateGridLines(e,t,i){return e.map((n,o)=>this.calculateGridLine(n,o,t,i,e))}calculateGridLine(e,t,i,n,o){var s;let{index:r,tickId:a,translation:l}=e;const{gridLine:d,horizontal:c}=this,[u,h,p,g]=c?[l,i,l,n]:[i,l,n,l],{style:m}=d,{stroke:f,strokeWidth:v=0,lineDash:y}=null!==(s=m[r%m.length])&&void 0!==s?s:{};return{tickId:a,offset:l,x1:u,y1:h,x2:p,y2:g,stroke:f,strokeWidth:v,lineDash:y}}calculateGridFills(e,t,i){const{horizontal:n,range:o,type:s}=this,r=[];if(0==e.length)return r;let a=0;const l=!n&&"unit-time"===s;if(l&&e[0].translation<o[0]||!l&&e[0].translation>o[0]){const n={tickId:"before:".concat(e[0].tickId),translation:o[0]};r.push(this.calculateGridFill(n,-1,e[0].index,t,i,e)),a=1}return r.push(...e.map((n,o)=>this.calculateGridFill(n,o,n.index+a,t,i,e))),r}calculateGridFill(e,t,i,n,o,s){var r;let{tickId:a,translation:l}=e;const{gridLine:d,horizontal:c,range:u}=this,h=s[t+1],p=l,g=h?h.translation:u[1],[m,f,v,y]=c?[p,Math.max(n,o),g,Math.min(n,o)]:[Math.min(n,o),Math.min(p,g),Math.max(n,o),Math.max(p,g)],{fill:b,fillOpacity:x}=null!==(r=d.style[i%d.style.length])&&void 0!==r?r:{};return{tickId:a,x1:m,y1:f,x2:v,y2:y,fill:b,fillOpacity:x}}calculateTickLines(e,t){return e.map(i=>this.calculateTickLine(i,i.index,t,e))}calculateTickLine(e,t,i,n){let{isPrimary:o,tickId:s,translation:r}=e;const{horizontal:a,tick:l,primaryTick:d}=this,c=o&&d?d:l,u=-i*this.getTickSize(c),[h,p,g,m]=a?[r,0,r,u]:[0,r,u,r],{stroke:f,width:v}=c;return{tickId:s,offset:r,x1:h,y1:p,x2:g,y2:m,stroke:f,strokeWidth:v,lineDash:void 0}}update(){var e;this.updateDirection();const t=Array.from(this.tickLabelGroupSelection.nodes(),e=>e.datum.tickId);super.update();const{tickLayout:i}=this;if(this.updateTitle(this.scale.domain,null!==(e=null===i||void 0===i?void 0:i.spacing)&&void 0!==e?e:0),this.animatable||this.moduleCtx.animationManager.skipCurrentBatch(),i){const{ticks:e}=i;if(this.animationManager.isSkipped())this.resetSelectionNodes();else{const i=Ag(t,e.map(e=>e.tickId));this.animationState.transition("update",i)}}const{enabled:n,stroke:o,width:s}=this.line;this.lineNode.setProperties({stroke:o,strokeWidth:n?s:0}),this.updateTickLines(),this.updateGridLines(),this.updateGridFills()}getAxisTransform(){return{translationX:Math.floor(this.translation.x+this.crossAxisTranslation.x),translationY:Math.floor(this.translation.y+this.crossAxisTranslation.y)}}updatePosition(){super.updatePosition();const e=this.getAxisTransform();this.tickLineGroup.datum=e,this.tickLabelGroup.datum=e,this.lineNodeGroup.datum=e,this.headingLabelGroup.datum=e}setAxisVisible(e){var t,i,n,o;this.tickLineGroup.visible=e&&(this.tick.enabled||null!==(t=null===(i=this.primaryTick)||void 0===i?void 0:i.enabled)&&void 0!==t&&t),this.tickLabelGroup.visible=e&&(this.label.enabled||null!==(n=null===(o=this.primaryTick)||void 0===o?void 0:o.enabled)&&void 0!==n&&n),this.lineNodeGroup.visible=e,this.headingLabelGroup.visible=e}getAxisLineCoordinates(){const{horizontal:e}=this,[t,i]=$u(this.range);return e?{x1:t,x2:i,y1:0,y2:0}:{x1:0,x2:0,y1:t,y2:i}}getTickLineBBox(e){const{translation:t}=e,{position:i,primaryTick:n}=this;let o=this.getTickSize();switch(null!==n&&void 0!==n&&n.enabled&&(o=Math.max(o,this.getTickSize(n))),i){case"top":return new Pb(t,-o,t,o);case"bottom":return new Pb(t,0,t,o);case"left":return new Pb(-o,t,o,t);case"right":return new Pb(0,t,o,t)}}lineNodeBBox(){const{position:e,seriesAreaPadding:t}=this,{y1:i,y2:n}=this.getAxisLineCoordinates(),o=n-i;switch(e){case"top":return new Pb(i,-t,o,t);case"bottom":return new Pb(i,0,o,t);case"left":return new Pb(-t,i,t,o);case"right":return new Pb(0,i,t,o)}}titleBBox(e,t){const{tempCaption:i}=this;return i.node.setProperties(this.titleProps(i,e,t)),i.node.getBBox()}tickBBox(e,t,i){const{tick:n,primaryTick:o,label:s,primaryLabel:r,title:a,position:l,horizontal:d,seriesAreaPadding:c}=this,u=[];if(u.push(this.lineNodeBBox()),n.enabled||null!==o&&void 0!==o&&o.enabled)for(const g of t)u.push(this.getTickLineBBox(g));const{tempText:h}=this;if(s.enabled)for(const g of i){if(!g.visible)continue;h.setProperties(g);const e=h.getBBox();e&&u.push(e)}if(null!==r&&void 0!==r&&r.enabled&&"bottom"===l){const e=2;if(u.push(new Pb(0,Vl(s.fontSize)+e,1,this.getTickSize(n)+s.spacing+c)),null!=r.format){const{format:t}=r,i=(el(t)?Object.values(t):[t]).reduce((e,t)=>Math.max(e,Xl(t)),0);u.push(new Pb(0,this.getTickSize(null!==o&&void 0!==o?o:n)+r.spacing+c,1,i*Vl(r.fontSize)+e))}}let p=0;if(a.enabled){const t=Pb.merge(u);p=d?t.height:t.width,u.push(this.titleBBox(e,p))}return{bbox:Pb.merge(u),spacing:p}}titleProps(e,t,i){var n;const{title:o}=this;if(!o.enabled)return e.enabled=!1,{visible:!1,text:"",textBaseline:"bottom",x:0,y:0,rotationCenterX:0,rotationCenterY:0,rotation:0};e.enabled=!0,e.color=o.color,e.fontFamily=o.fontFamily,e.fontSize=o.fontSize,e.fontStyle=o.fontStyle,e.fontWeight=o.fontWeight,e.wrapping=o.wrapping;const s=(null!==(n=o.spacing)&&void 0!==n?n:0)+i,{range:r}=this,a=(r[0]+r[1])/2;let l,d,c,u;switch(this.position){case"top":l=a,d=-s,c=0,u="bottom";break;case"bottom":l=a,d=s,c=0,u="top";break;case"left":l=-s,d=a,c=-.5*Math.PI,u="bottom";break;case"right":l=s,d=a,c=.5*Math.PI,u="bottom"}const{formatter:h=e=>e.defaultValue}=o,p=this.cachedCallWithContext(h,this.getTitleFormatterParams(t));return e.text=p,{visible:!0,text:p,textBaseline:u,x:l,y:d,rotationCenterX:l,rotationCenterY:d,rotation:c}}getTickLabelProps(e,t){const{horizontal:i,primaryLabel:n,primaryTick:o,seriesAreaPadding:s,scale:r}=this,{tickId:a,tickLabel:l="",translation:d,isPrimary:c,textUntruncated:u}=e,h=c&&null!==n&&void 0!==n&&n.enabled?n:this.label,g=c&&null!==o&&void 0!==o&&o.enabled?o:this.tick,{rotation:m,textBaseline:f,textAlign:v}=t,{range:y}=r,b=this.label.getSideFlag(),x=nD(h)[this.position],C=b*(this.getTickSize(g)+h.spacing+s)-x,S=""!==l,w=i?d:C,M=i?-C:d;return p(p({},this.getLabelStyles({value:e.tick,formattedValue:l},void 0,h)),{},{tickId:a,rotation:m,text:l,textAlign:v,textBaseline:f,textUntruncated:u,visible:S,x:w,y:M,rotationCenterX:w,rotationCenterY:M,range:y})}updateSelections(){if(!this.tickLayout)return;const e=this.getAxisLineCoordinates(),{tickLines:t,gridLines:i,gridFills:n,labels:o}=this.tickLayout,s=e=>e.tickId;this.lineNode.datum=e,this.gridLineGroupSelection.update(this.gridLine.enabled?i:[],void 0,s),this.gridFillGroupSelection.update(this.gridLine.enabled?n:[],void 0,s),this.tickLineGroupSelection.update(t,void 0,s),this.tickLabelGroupSelection.update(o,void 0,s)}updateGridLines(){this.gridLineGroupSelection.each((e,t)=>{e.stroke=t.stroke,e.strokeWidth=t.strokeWidth,e.lineDash=t.lineDash})}updateGridFills(){this.gridFillGroupSelection.each((e,t)=>{var i;e.fill=t.fill,e.fillOpacity=null!==(i=t.fillOpacity)&&void 0!==i?i:1})}updateTickLines(){this.tickLineGroupSelection.each((e,t)=>{e.stroke=t.stroke,e.strokeWidth=t.strokeWidth,e.lineDash=t.lineDash})}updateTitle(e,t){const{caption:i}=this.title,n=this.titleProps(i,e,t);i.node.visible=n.visible,i.node.text=n.text,i.node.textBaseline=n.textBaseline,i.node.datum=n}updateLabels(){this.label.enabled&&this.tickLabelGroupSelection.each((e,t)=>{var i;e.fill=t.color,e.text=t.text,e.textBaseline=t.textBaseline,e.textAlign=null!==(i=t.textAlign)&&void 0!==i?i:"center",e.pointerEvents=null==t.textUntruncated?1:0,e.setFont(t),e.setBoxing(t)})}animateReadyUpdate(e){const{animationManager:t}=this.moduleCtx,i=wD(function(e){const[t,i]=$u(e.range),n=Math.floor(t),o=Math.ceil(i);return{min:n,max:o,visible:n!==o}}(this));$k(this.id,"axis-group",t,[this.lineNodeGroup,this.tickLabelGroup,this.tickLineGroup,this.headingLabelGroup],i.group),$k(this.id,"line",t,[this.lineNode],i.line),$k(this.id,"line-paths",t,[this.gridLineGroupSelection,this.tickLineGroupSelection],i.tick,(e,t)=>t.tickId,e),$k(this.id,"tick-labels",t,[this.tickLabelGroupSelection],i.label,(e,t)=>t.tickId,e),$k(this.id,"title",t,[this.title.caption.node],i.label,(e,t)=>t.tickId,e)}resetSelectionNodes(){Qk([this.lineNodeGroup,this.tickLabelGroup,this.tickLineGroup,this.headingLabelGroup],(e,t)=>({translationX:t.translationX,translationY:t.translationY})),Qk([this.gridLineGroupSelection,this.tickLineGroupSelection],(e,t)=>{const{x1:i,x2:n,y1:o,y2:s}=t;return{x1:i,x2:n,y1:o,y2:s}}),Qk([this.gridFillGroupSelection],(e,t)=>{const{x1:i,x2:n,y1:o,y2:s}=t;return{x:i,y:o,width:n-i,height:s-o}}),Qk([this.tickLabelGroupSelection],(e,t)=>({x:t.x,y:t.y,rotationCenterX:t.rotationCenterX,rotationCenterY:t.rotationCenterY,rotation:t.rotation})),Qk([this.title.caption.node],(e,t)=>({x:t.x,y:t.y,rotationCenterX:t.rotationCenterX,rotationCenterY:t.rotationCenterY,rotation:t.rotation})),Qk([this.lineNode],(e,t)=>{const{x1:i,x2:n,y1:o,y2:s}=t;return{x1:i,x2:n,y1:o,y2:s}})}};Ab([ru],oI.prototype,"thickness",2),Ab([ru],oI.prototype,"maxThicknessRatio",2),Ab([ru],oI.prototype,"position",2),Ab([ru],oI.prototype,"crossAt",2);var sI=oI,rI=["right","top","left","bottom"];function aI(e){return"string"===typeof e&&rI.includes(e)}var lI=["direction","xKey","yKey","sizeKey","angleKey","radiusKey","normalizedTo"];var dI=new Map([{type:"chart",name:"cartesian",moduleId:"CartesianChartModule"},{type:"chart",name:"standalone",moduleId:"StandaloneChartModule",enterprise:!0},{type:"chart",name:"polar",moduleId:"PolarChartModule"},{type:"chart",name:"topology",moduleId:"TopologyChartModule",enterprise:!0},{type:"axis",name:"number",chartType:"cartesian",moduleId:"NumberAxisModule"},{type:"axis",name:"log",chartType:"cartesian",moduleId:"LogAxisModule"},{type:"axis",name:"time",chartType:"cartesian",moduleId:"TimeAxisModule"},{type:"axis",name:"unit-time",chartType:"cartesian",moduleId:"UnitTimeAxisModule"},{type:"axis",name:"category",chartType:"cartesian",moduleId:"CategoryAxisModule"},{type:"axis",name:"grouped-category",chartType:"cartesian",moduleId:"GroupedCategoryAxisModule"},{type:"axis",name:"ordinal-time",chartType:"cartesian",enterprise:!0,moduleId:"OrdinalTimeAxisModule"},{type:"axis",name:"angle-category",chartType:"polar",enterprise:!0,moduleId:"AngleCategoryAxisModule"},{type:"axis",name:"angle-number",chartType:"polar",enterprise:!0,moduleId:"AngleNumberAxisModule"},{type:"axis",name:"radius-category",chartType:"polar",enterprise:!0,moduleId:"RadiusCategoryAxisModule"},{type:"axis",name:"radius-number",chartType:"polar",enterprise:!0,moduleId:"RadiusNumberAxisModule"},{type:"series",name:"bar",chartType:"cartesian",moduleId:"BarSeriesModule"},{type:"series",name:"scatter",chartType:"cartesian",moduleId:"ScatterSeriesModule"},{type:"series",name:"bubble",chartType:"cartesian",moduleId:"BubbleSeriesModule"},{type:"series",name:"line",chartType:"cartesian",moduleId:"LineSeriesModule"},{type:"series",name:"area",chartType:"cartesian",moduleId:"AreaSeriesModule"},{type:"series",name:"pie",chartType:"polar",moduleId:"PieSeriesModule"},{type:"series",name:"donut",chartType:"polar",moduleId:"DonutSeriesModule"},{type:"series",name:"box-plot",chartType:"cartesian",enterprise:!0,moduleId:"BoxPlotSeriesModule"},{type:"series",name:"candlestick",chartType:"cartesian",enterprise:!0,moduleId:"CandlestickSeriesModule"},{type:"series",name:"cone-funnel",chartType:"cartesian",enterprise:!0,moduleId:"ConeFunnelSeriesModule"},{type:"series",name:"funnel",chartType:"cartesian",enterprise:!0,moduleId:"FunnelSeriesModule"},{type:"series",name:"ohlc",chartType:"cartesian",enterprise:!0,moduleId:"OhlcSeriesModule"},{type:"series",name:"heatmap",chartType:"cartesian",enterprise:!0,moduleId:"HeatmapSeriesModule"},{type:"series",name:"histogram",chartType:"cartesian",moduleId:"HistogramSeriesModule"},{type:"series",name:"range-area",chartType:"cartesian",enterprise:!0,moduleId:"RangeAreaSeriesModule"},{type:"series",name:"range-bar",chartType:"cartesian",enterprise:!0,moduleId:"RangeBarSeriesModule"},{type:"series",name:"waterfall",chartType:"cartesian",enterprise:!0,moduleId:"WaterfallSeriesModule"},{type:"series",name:"nightingale",chartType:"polar",enterprise:!0,moduleId:"NightingaleSeriesModule"},{type:"series",name:"radar-area",chartType:"polar",enterprise:!0,moduleId:"RadarAreaSeriesModule"},{type:"series",name:"radar-line",chartType:"polar",enterprise:!0,moduleId:"RadarLineSeriesModule"},{type:"series",name:"radial-bar",chartType:"polar",enterprise:!0,moduleId:"RadialBarSeriesModule"},{type:"series",name:"radial-column",chartType:"polar",enterprise:!0,moduleId:"RadialColumnSeriesModule"},{type:"series",name:"map-shape",chartType:"topology",enterprise:!0,moduleId:"MapShapeSeriesModule"},{type:"series",name:"map-line",chartType:"topology",enterprise:!0,moduleId:"MapLineSeriesModule"},{type:"series",name:"map-marker",chartType:"topology",enterprise:!0,moduleId:"MapMarkerSeriesModule"},{type:"series",name:"map-shape-background",chartType:"topology",enterprise:!0,moduleId:"MapShapeBackgroundSeriesModule"},{type:"series",name:"map-line-background",chartType:"topology",enterprise:!0,moduleId:"MapLineBackgroundSeriesModule"},{type:"series",name:"pyramid",chartType:"standalone",enterprise:!0,moduleId:"PyramidSeriesModule"},{type:"series",name:"linear-gauge",chartType:"standalone",enterprise:!0,moduleId:"LinearGaugeModule"},{type:"series",name:"radial-gauge",chartType:"standalone",enterprise:!0,moduleId:"RadialGaugeModule"},{type:"series",name:"sunburst",chartType:"standalone",enterprise:!0,moduleId:"SunburstSeriesModule"},{type:"series",name:"treemap",chartType:"standalone",enterprise:!0,moduleId:"TreemapSeriesModule"},{type:"series",name:"chord",chartType:"standalone",enterprise:!0,moduleId:"ChordSeriesModule"},{type:"series",name:"sankey",chartType:"standalone",enterprise:!0,moduleId:"SankeySeriesModule"},{type:"plugin",name:"animation",enterprise:!0,moduleId:"AnimationModule"},{type:"plugin",name:"annotations",chartType:"cartesian",enterprise:!0,moduleId:"AnnotationsModule"},{type:"plugin",name:"legend",moduleId:"LegendModule"},{type:"plugin",name:"locale",moduleId:"LocaleModule"},{type:"plugin",name:"chartToolbar",chartType:"cartesian",enterprise:!0,moduleId:"ChartToolbarModule"},{type:"plugin",name:"contextMenu",enterprise:!0,moduleId:"ContextMenuModule"},{type:"plugin",name:"statusBar",chartType:"cartesian",enterprise:!0,moduleId:"StatusBarModule"},{type:"plugin",name:"dataSource",enterprise:!0,moduleId:"DataSourceModule"},{type:"plugin",name:"sync",chartType:"cartesian",enterprise:!0,moduleId:"SyncModule"},{type:"plugin",name:"ranges",chartType:"cartesian",enterprise:!0,moduleId:"RangesModule"},{type:"plugin",name:"zoom",enterprise:!0,moduleId:"ZoomModule"},{type:"plugin",name:"flashOnUpdate",enterprise:!0,moduleId:"FlashOnUpdateModule"},{type:"plugin",name:"gradientLegend",enterprise:!0,moduleId:"GradientLegendModule"},{type:"plugin",name:"navigator",chartType:"cartesian",enterprise:!0,moduleId:"NavigatorModule"},{type:"axis:plugin",name:"crosshair",chartType:"cartesian",enterprise:!0,moduleId:"CrosshairModule"},{type:"axis:plugin",name:"bandHighlight",chartType:"cartesian",enterprise:!0,moduleId:"BandHighlightModule"},{type:"series:plugin",name:"errorBar",chartType:"cartesian",enterprise:!0,moduleId:"ErrorBarsModule"},{type:"preset",name:"gauge-preset",chartType:"standalone",enterprise:!0,moduleId:"GaugePresetModule"},{type:"preset",name:"price-volume",chartType:"cartesian",enterprise:!0,moduleId:"PriceVolumePresetModule"},{type:"preset",name:"sparkline",moduleId:"SparklinePresetModule"}].map(e=>[e.name,e]));function cI(e){var t,i,n,o,s;const r=null!==(t=null===(i=e.series)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.type)&&void 0!==t?t:"line";return null!==(n=null!==(o=null===(s=ca.getSeriesModule(r))||void 0===s?void 0:s.chartType)&&void 0!==o?o:function(e){const t=dI.get(e);return(null===t||void 0===t?void 0:t.type)===ua.Series?t.chartType:void 0}(r))&&void 0!==n?n:"unknown"}var uI=class extends oD{*legends(){for(const e of ca.listModulesByType(ua.Plugin))"legend"!==e.name&&"gradientLegend"!==e.name||(yield{legendType:"legend"===e.name?"category":"gradient",legend:this.getModule(e.name)})}},hI="ag-charts-overlay",pI="ag-charts-dark-overlay",gI=class extends kh{constructor(e,t){super(),this.className=e,this.defaultMessageId=t,this.enabled=!0}getText(e){return Ua(this.text)?ed(this.text):this.rendererAsText?this.rendererAsText:e.t(Gl(this.text)||this.defaultMessageId)}getElement(e,t,i,n){var o;if(null===(o=this.content)||void 0===o||o.remove(),this.rendererAsText=void 0,this.focusBox=n,this.renderer){var s,r;const t={},i=Cp(e,this.renderer,t);if(i instanceof HTMLElement)this.content=i;else{const e=zr("div");e.innerHTML=i;const{firstElementChild:t}=e;t instanceof HTMLElement&&1===e.childElementCount?this.content=t:this.content=e}this.rendererAsText=null!==(s=null===(r=this.content)||void 0===r||null===(r=r.textContent)||void 0===r?void 0:r.trim())&&void 0!==s?s:void 0}else{const e=zr("div",{display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",height:"100%",margin:"8px",fontFamily:"var(--ag-charts-font-family)",fontSize:"var(--ag-charts-font-size)",fontWeight:"var(--ag-charts-font-weight)"});if(Ua(this.text)){const t=zr("div");for(const e of this.text){var a;const i=zr("span",{color:e.color,fontSize:"".concat(e.fontSize,"px"),fontFamily:null!==(a=e.fontFamily)&&void 0!==a?a:"inherit",fontWeight:String(e.fontWeight),fontStyle:e.fontStyle});i.innerText=Gl(e.text),t.appendChild(i)}e.appendChild(t)}else e.innerText=this.getText(i);this.content=e,this.content.classList.add(this.className),null===t||void 0===t||t.animate({from:0,to:1,id:"overlay",phase:"add",groupId:"opacity",onUpdate(t){e.style.opacity=String(t)},onStop(){e.style.opacity="1"}})}return this.content}removeElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{var e;return null===(e=this.content)||void 0===e?void 0:e.remove()},t=arguments.length>1?arguments[1]:void 0;if(this.content){if(t){const{content:i}=this;t.animate({from:1,to:0,phase:"remove",id:"overlay",groupId:"opacity",onUpdate(e){i.style.opacity=String(e)},onStop(){null===e||void 0===e||e()}})}else null===e||void 0===e||e();this.content=void 0,this.focusBox=void 0}}};Ab([ru],gI.prototype,"enabled",2),Ab([ru],gI.prototype,"text",2),Ab([ru],gI.prototype,"renderer",2);var mI=class extends kh{constructor(){super(...arguments),this.darkTheme=!1,this.loading=new gI("ag-charts-loading-overlay","overlayLoadingData"),this.noData=new gI("ag-charts-no-data-overlay","overlayNoData"),this.noVisibleSeries=new gI("ag-charts-no-visible-series","overlayNoVisibleSeries"),this.unsupportedBrowser=new gI("ag-charts-unsupported-browser","overlayUnsupportedBrowser")}getFocusInfo(e){for(const t of[this.loading,this.noData,this.noVisibleSeries,this.unsupportedBrowser])if(void 0!==t.focusBox)return{text:t.getText(e),rect:t.focusBox}}destroy(){this.loading.removeElement(),this.noData.removeElement(),this.noVisibleSeries.removeElement(),this.unsupportedBrowser.removeElement()}};Ab([ru],mI.prototype,"darkTheme",2),Ab([ru],mI.prototype,"loading",2),Ab([ru],mI.prototype,"noData",2),Ab([ru],mI.prototype,"noVisibleSeries",2),Ab([ru],mI.prototype,"unsupportedBrowser",2);var fI=class extends kh{constructor(e){super(),this.ctx=e,this.rectNode=new pC,this.border=new sg(this.rectNode),this.cornerRadius=0,this.padding=0,this.cleanup=new Ta,this.node=this.createNode(),this.node.append([this.rectNode]),this.rectNode.fill=void 0,this.cleanup.register(e.scene.attachNode(this.node),e.eventsHub.on("layout:complete",e=>this.onLayoutComplete(e)))}destroy(){this.cleanup.flush()}getPadding(){var e,t,i,n;const{border:o,padding:s}=this,r=o.enabled?o.strokeWidth:0;if("number"===typeof s){const e=s+r;return{top:e,right:e,bottom:e,left:e}}return{top:(null!==(e=s.top)&&void 0!==e?e:0)+r,right:(null!==(t=s.right)&&void 0!==t?t:0)+r,bottom:(null!==(i=s.bottom)&&void 0!==i?i:0)+r,left:(null!==(n=s.left)&&void 0!==n?n:0)+r}}createNode(){return new Gx({name:"series-area-container",zIndex:bp.SERIES_AREA_CONTAINER})}onLayoutComplete(e){const{x:t,y:i,width:n,height:o}=e.series.paddedRect;this.rectNode.x=t,this.rectNode.y=i,this.rectNode.width=n,this.rectNode.height=o}};function vI(e,t,i,n){var o,s,r,a,l,d,c,u,h,p,g;if($v(e))return{type:"gradient",gradient:null!==(o=e.gradient)&&void 0!==o?o:t.gradient,colorStops:null!==(s=e.colorStops)&&void 0!==s?s:t.colorStops,bounds:null!==(r=e.bounds)&&void 0!==r?r:t.bounds,rotation:null!==(a=e.rotation)&&void 0!==a?a:t.rotation,reverse:null!==(l=e.reverse)&&void 0!==l?l:t.reverse,colorSpace:null!==(d=e.colorSpace)&&void 0!==d?d:t.colorSpace};if(qv(e)){var m,f,v,y,b,x,C,S,w,M,k,D,I,A;const t=null!==(m=e.pattern)&&void 0!==m?m:i.pattern;let n=e.strokeWidth;"backward-slanted-lines"===t||"forward-slanted-lines"===t||"horizontal-lines"===t||"vertical-lines"===t?null!==n&&void 0!==n||(n=i.strokeWidth):null!==n&&void 0!==n||(n=0);return{type:"pattern",pattern:t,width:null!==(f=null!==(v=e.width)&&void 0!==v?v:e.height)&&void 0!==f?f:i.width,height:null!==(y=null!==(b=e.height)&&void 0!==b?b:e.width)&&void 0!==y?y:i.height,path:e.path,padding:null!==(x=e.padding)&&void 0!==x?x:i.padding,fill:null!==(C=e.fill)&&void 0!==C?C:i.fill,fillOpacity:null!==(S=e.fillOpacity)&&void 0!==S?S:i.fillOpacity,backgroundFill:null!==(w=e.backgroundFill)&&void 0!==w?w:i.backgroundFill,backgroundFillOpacity:null!==(M=e.backgroundFillOpacity)&&void 0!==M?M:i.backgroundFillOpacity,stroke:null!==(k=e.stroke)&&void 0!==k?k:i.stroke,strokeOpacity:null!==(D=e.strokeOpacity)&&void 0!==D?D:i.strokeOpacity,strokeWidth:n,rotation:null!==(I=e.rotation)&&void 0!==I?I:i.rotation,scale:null!==(A=e.scale)&&void 0!==A?A:i.scale}}return Qv(e)?{type:"image",url:e.url,width:e.width,height:e.height,backgroundFill:null!==(c=e.backgroundFill)&&void 0!==c?c:n.backgroundFill,backgroundFillOpacity:null!==(u=e.backgroundFillOpacity)&&void 0!==u?u:n.backgroundFillOpacity,rotation:null!==(h=e.rotation)&&void 0!==h?h:n.rotation,repeat:null!==(p=e.repeat)&&void 0!==p?p:n.repeat,fit:null!==(g=e.fit)&&void 0!==g?g:n.fit}:e}function yI(e,t,i,n){return $v(null===e||void 0===e?void 0:e.fill)||qv(null===e||void 0===e?void 0:e.fill)||Qv(null===e||void 0===e?void 0:e.fill)?p(p({},e),{},{fill:vI(e.fill,t,i,n)}):e}Ab([ru],fI.prototype,"border",2),Ab([ru],fI.prototype,"clip",2),Ab([ig("rectNode","cornerRadius"),ru],fI.prototype,"cornerRadius",2),Ab([ru],fI.prototype,"padding",2);var bI=(e=>(e[e.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",e[e.NEAREST_NODE=1]="NEAREST_NODE",e[e.AXIS_ALIGNED=2]="AXIS_ALIGNED",e))(bI||{}),xI=class{constructor(e,t,i,n){this.type=e,this.event=t,this.defaultPrevented=!1,this.datum=i.datum,this.seriesId=n.id}preventDefault(){this.defaultPrevented=!0}},CI=class{constructor(e,t){this.series=e,this.seriesGrouping=t,this.type="groupingChanged"}};function SI(e){switch(e){case"x":return _u.X;case"y":return _u.Y;case"angle":return _u.Angle;case"radius":return _u.Radius}}function wI(e){switch(e){case _u.X:return"x";case _u.Y:return"y";case _u.Angle:return"angle";case _u.Radius:return"radius";default:return"x"}}var MI=class extends Kx{constructor(e){super(),this.cleanup=new Ta,this.usesPlacedLabels=!1,this.alwaysClip=!1,this.hasChangesOnHighlight=!1,this.seriesGrouping=void 0,this.NodeEvent=xI,this.internalId=xm(this),this.contentGroup=new jx({name:"".concat(this.internalId,"-content"),zIndex:Nh.ANY_CONTENT}),this.highlightGroup=new jx({name:"".concat(this.internalId,"-highlight"),zIndex:Nh.ANY_CONTENT}),this.highlightNodeGroup=this.highlightGroup.appendChild(new Gx({name:"".concat(this.internalId,"-highlight-node")})),this.highlightLabelGroup=this.highlightGroup.appendChild(new Gx({name:"".concat(this.internalId,"-highlight-label"),zIndex:Th.LABEL})),this.annotationGroup=new jx({name:"".concat(this.internalId,"-annotation")}),this.labelGroup=new jx({name:"".concat(this.internalId,"-series-labels")}),this.axes={},this.directions=[_u.X,_u.Y],this.nodeDataRefresh=!0,this.processedDataUpdated=!0,this.moduleMap=new oD,this.datumCallbackCache=new Map,this.connectsToYAxis=!1,this.declarationOrder=-1,this._broughtToFront=!1,this.events=new Oa,this._pickNodeCache=new Fa(5),this.fireEventWrapper=e=>super.fireEvent(e);const{moduleCtx:t,pickModes:i,propertyKeys:n={},propertyNames:o={},canHaveAxes:s=!1,usesPlacedLabels:r=!1,alwaysClip:a=!1}=e;this.ctx=t,this.propertyKeys=n,this.propertyNames=o,this.canHaveAxes=s,this.usesPlacedLabels=r,this.pickModes=i,this.alwaysClip=a,this.highlightLabelGroup.pointerEvents=1,this.cleanup.register(this.ctx.eventsHub.on("data:update",e=>this.setChartData(e)),this.ctx.eventsHub.on("highlight:change",e=>this.onChangeHighlight(e)))}get pickModeAxis(){return"main"}get id(){var e,t;return null!==(e=null===(t=this.properties)||void 0===t?void 0:t.id)&&void 0!==e?e:this.internalId}get type(){var e;return null!==(e=this.constructor.type)&&void 0!==e?e:""}get focusable(){return!0}get data(){var e;return null!==(e=this._data)&&void 0!==e?e:this._chartData}set visible(e){this.properties.visible=e,this.ctx.legendManager.toggleItem(e,this.id),this.ctx.legendManager.update(),this.visibleMaybeChanged()}get visible(){var e;return null!==(e=this.ctx.legendManager.getSeriesEnabled(this.id))&&void 0!==e?e:this.properties.visible}get hasData(){const e=this.data;return null!=e&&e.netSize()>0}get tooltipEnabled(){var e;return null===(e=this.properties.tooltip)||void 0===e?void 0:e.enabled}onDataChange(){this.nodeDataRefresh=!0,this.processedDataUpdated=!0,this._pickNodeCache.clear()}setOptionsData(e){this._data=e,this.onDataChange()}setChartData(e){this._chartData=e,this.data===e&&this.onDataChange()}onSeriesGroupingChange(e,t){const{internalId:i,type:n,visible:o}=this;e&&this.ctx.seriesStateManager.deregisterSeries(this),t&&this.ctx.seriesStateManager.registerSeries({internalId:i,type:n,visible:o,seriesGrouping:t}),this.fireEvent(new CI(this,t))}getBandScalePadding(){return{inner:1,outer:0}}attachSeries(e,t,i){e.appendChild(this.contentGroup),t.appendChild(this.highlightGroup),t.appendChild(this.labelGroup),null===i||void 0===i||i.appendChild(this.annotationGroup)}detachSeries(e,t,i){this.contentGroup.remove(),this.highlightGroup.remove(),this.labelGroup.remove(),this.annotationGroup.remove()}setSeriesIndex(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.bringToFront();return!(!t&&e===this.declarationOrder&&i===this._broughtToFront)&&(this.declarationOrder=e,this._broughtToFront=i,this.setZIndex(i?Number.MAX_VALUE:e),this.fireEvent(new CI(this,this.seriesGrouping)),!0)}setZIndex(e){this.contentGroup.zIndex=[Nh.ANY_CONTENT,e,Th.FOREGROUND],this.highlightGroup.zIndex=[Nh.ANY_CONTENT,e,Th.HIGHLIGHT],this.labelGroup.zIndex=[Nh.ANY_CONTENT,e,Th.LABEL],this.annotationGroup.zIndex=e}renderToOffscreenCanvas(){return!1}addEventListener(e,t){return super.addEventListener(e,t)}removeEventListener(e,t){return super.removeEventListener(e,t)}hasEventListener(e){return super.hasEventListener(e)}updatedDomains(){}destroy(){this.cleanup.flush(),this.resetDatumCallbackCache(),this.ctx.seriesStateManager.deregisterSeries(this)}getPropertyValues(e,t){const i=SI(e),n=null==i?e:wI(this.resolveKeyDirection(i)),o=null===t||void 0===t?void 0:t[n],s=[];if(!o)return s;const r=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const n of t)Array.isArray(n)?r(...n):"object"===typeof n?r(...Object.values(n)):s.push(n)};return r(...o.map(e=>this.properties[e])),s}getKeyAxis(e){}getKeys(e){return this.getPropertyValues(wI(e),this.propertyKeys)}getKeyProperties(e){var t;return null!==(t=this.propertyKeys[this.resolveKeyDirection(e)])&&void 0!==t?t:[]}getNames(e){return this.getPropertyValues(wI(e),this.propertyNames)}getFormatterContext(e){const{id:t}=this,i=this.getPropertyValues(e,this.propertyKeys),n=this.getPropertyValues(e,this.propertyNames),o=[];for(let s=0;s<i.length;s++)o.push({seriesId:t,key:i[s],name:n[s]});return o}resolveKeyDirection(e){return e}getDomain(e){const t=this.getSeriesDomain(e),i=this.moduleMap.mapModules(t=>t.getDomain(e)).flat();return 0===i.length?t:{domain:t.domain.concat(i)}}getRange(e,t){return this.getSeriesRange(e,t)}getZoomRangeFittingItems(e,t,i){}getVisibleItems(e,t,i){return 1/0}markNodeDataDirty(){this.nodeDataRefresh=!0,this._pickNodeCache.clear(),this.visibleMaybeChanged()}visibleMaybeChanged(){this.ctx.seriesStateManager.updateSeries(this)}getOpacity(){const e=1;if(!this.properties.highlight)return e;const{opacity:t=e}=this.getHighlightStyle();return t}getHighlightState(e,t,i,n){if(t)return 1;if(null==(null===e||void 0===e?void 0:e.series))return 0;if(this.isSeriesHighlighted(e,n)){return null==this.isItemHighlighted(e,i)?2:4}return 3}getHighlightStateString(e,t,i,n){return jM(this.getHighlightState(e,t,i,n))}onChangeHighlight(e){const t=e.previousHighlight,i=e.currentHighlight,n=this.getHighlightState(i),o=this.getHighlightState(t);this.setSeriesIndex(this.declarationOrder);const s=this.hasItemStylers();if(!s&&n===o)return void(this.hasChangesOnHighlight=!1);const{highlightedSeries:r,unhighlightedItem:a,unhighlightedSeries:l}=this.properties.highlight;this.hasChangesOnHighlight=s||!tl(r)||!tl(a)||!tl(l)}bringToFront(){return this.properties.highlight.bringToFront&&this.isSeriesHighlighted(this.ctx.highlightManager.getActiveHighlight())}isSeriesHighlighted(e,t){return(null===e||void 0===e?void 0:e.series)===this}isItemHighlighted(e,t){if(null!=(null===e||void 0===e?void 0:e.datumIndex)&&null!=t)return e.datumIndex===t}getHighlightStyle(e,t,i,n){var o;const s=null===(o=this.ctx.highlightManager)||void 0===o?void 0:o.getActiveHighlight();return null!==i&&void 0!==i||(i=this.getHighlightState(s,e,t,n)),this.properties.highlight.getStyle(i)}filterItemStylerFillParams(e){return $v(e)?Mu(e,["bounds","colorSpace","gradient","reverse"]):qv(e)?Mu(e,["padding"]):e}getModuleTooltipParams(){return this.moduleMap.mapModules(e=>e.getTooltipParams()).reduce((e,t)=>Object.assign(e,t),{})}pickNodes(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{pickModes:n,pickModeAxis:o,visible:s,contentGroup:r}=this;if(!s||!r.visible)return;if("highlight"===t&&!this.properties.highlight.enabled)return;if("highlight-tooltip"===t&&!this.properties.highlight.enabled)return;let a=1/0;if("tooltip"===t||"highlight-tooltip"===t){const{tooltip:e}=this.properties;a="number"===typeof e.range?e.range:1/0,i||(i="exact"===e.range)}else if("event"===t||"context-menu"===t){const{nodeClickRange:e}=this.properties;a="number"===typeof e?e:1/0,i||(i="exact"===e)}const l=n.filter(e=>!i||0===e),{x:d,y:c}=e,u=JSON.stringify({x:d,y:c,maxDistance:a,selectedPickModes:l});if(this._pickNodeCache.has(u))return this._pickNodeCache.get(u);for(const h of l){let t;switch(h){case 0:{const i=this.pickNodesExactShape(e);t=0===i.length?void 0:{datums:i,distance:0};break}case 1:{const i=this.pickNodeClosestDatum(e),n=0===(null===i||void 0===i?void 0:i.distance)?this.pickNodesExactShape(e):void 0;t=null!=n&&0!==n.length?{datums:n,distance:0}:i?{datums:[i.datum],distance:i.distance}:void 0;break}case 2:{const i=null==o?void 0:this.pickNodeMainAxisFirst(e,"main-category"===o);t=null==i?void 0:{datums:[i.datum],distance:i.distance};break}}if(t&&t.distance<=a)return this._pickNodeCache.set(u,{pickMode:h,datums:t.datums,distance:t.distance})}return this._pickNodeCache.set(u,void 0)}pickNodesExactShape(e){const t=[];for(const i of this.contentGroup.pickNodes(e.x,e.y)){const e=i.closestDatum();null!=e&&!0!==e.missing&&t.push(e)}return t}pickNodeClosestDatum(e){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeNearestDistantObject(e,t){var i;const n=Lm(e.x,e.y,t),o=null===(i=n.nearest)||void 0===i?void 0:i.closestDatum();if(null!=o&&!0!==o.missing)return{datum:o,distance:Math.sqrt(n.distanceSquared)}}pickNodeMainAxisFirst(e,t){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}getLabelData(){return[]}updatePlacedLabelData(e){}fireEvent(e){Cp([this.properties,this.ctx.chartService],this.fireEventWrapper,e)}fireNodeClickEvent(e,t){const i=new this.NodeEvent("seriesNodeClick",e,t,this);return this.fireEvent(i),!i.defaultPrevented}fireNodeDoubleClickEvent(e,t){const i=new this.NodeEvent("seriesNodeDoubleClick",e,t,this);return this.fireEvent(i),!i.defaultPrevented}createNodeContextMenuActionEvent(e,t){return new this.NodeEvent("nodeContextMenuAction",e,t,this)}onLegendInitialState(e,t){const{visible:i=!0,itemId:n,legendItemName:o}=null!==t&&void 0!==t?t:{};this.toggleSeriesItem(i,e,n,o)}onLegendItemClick(e){const{enabled:t,itemId:i,series:n,legendType:o}=e,s="legendItemName"in this.properties?this.properties.legendItemName:void 0,r="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,a=void 0!=s&&s===e.legendItemName;(n.id===this.id||a||void 0!=r)&&this.toggleSeriesItem(t,o,i,s,e)}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:n,numVisibleItems:o,legendType:s}=e,r="legendItemName"in this.properties?this.properties.legendItemName:void 0,a="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,l=void 0!=r&&r===e.legendItemName;n.id===this.id||l||void 0!=a?this.toggleSeriesItem(!0,s,i,r,e):t&&1===o?this.toggleSeriesItem(!0,s,void 0,r):this.toggleSeriesItem(!1,s,void 0,r)}toggleSeriesItem(e,t,i,n,o){var s;const r=this.id;(e||"category"!==t)&&(this.visible=e),this.nodeDataRefresh=!0,this._pickNodeCache.clear();const a={type:"seriesVisibilityChange",seriesId:r,itemId:i,legendItemName:null!==(s=null===o||void 0===o?void 0:o.legendItemName)&&void 0!==s?s:n,visible:e};this.fireEvent(a),this.ctx.legendManager.toggleItem(e,r,i,n)}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return p(p({},this.ctx),{},{series:this})}getAxisValueText(e,t,i,n,o,s){const{id:r,properties:a}=this;return e.formatDatum(a,i,t,r,s,n,o)}getLabelText(e,t,i,n,o,s,r){if(null==e)return"";const{axes:a,canHaveAxes:l,ctx:d,id:c,properties:u}=this,h="series-label",g="legendItemName"in u?u.legendItemName:void 0,m=p({seriesId:this.id},r),f=l?SI(n):void 0,v=null==f?void 0:a[this.resolveKeyDirection(f)];if(null!=v)return v.formatDatum(u,e,h,c,g,t,i,o,s,m);const{formatManager:y}=d,b=this.callWithContext.bind(this),x=t=>{var i,n;return null!==(i=null!==(n=s.formatValue(b,t.type,t.value,m))&&void 0!==n?n:y.format(b,t))&&void 0!==i?i:String(e)},C=this.getFormatterContext(n);switch(n){case"y":case"color":case"size":return x({type:"number",value:e,datum:t,seriesId:c,legendItemName:g,key:i,source:h,property:n,domain:o,boundSeries:C,fractionDigits:void 0});case"x":case"radius":case"angle":case"label":case"secondaryLabel":case"calloutLabel":case"sectorLabel":case"legendItem":return x({type:"category",value:e,datum:t,seriesId:c,legendItemName:g,key:i,source:h,property:n,domain:o,boundSeries:C})}}getMarkerStyle(e,t,i,n){var o,s;let{datumIndex:r,datum:a,point:l}=t,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{size:null!==(o=null!==(s=null===l||void 0===l?void 0:l.size)&&void 0!==s?s:e.size)&&void 0!==o?o:0},c=arguments.length>5?arguments[5]:void 0;const{itemStyler:u}=e,{highlightState:h,isHighlight:g=!1,checkForHighlight:m=!0,resolveMarkerSubPath:f=["marker"],resolveStyler:v=!1}=null!==n&&void 0!==n?n:{},y=["series","".concat(this.declarationOrder),...f];if(v){const e={permissivePath:!0},t=this.ctx.optionsGraphService.resolvePartial(y,d,e);var b;if(t)d=p(p({},t),{},{size:null!==(b=t.size)&&void 0!==b?b:d.size})}let x=xu(m?this.getHighlightStyle(g,r,h):void 0,d,e.getStyle(),c);if(u&&i){var C;const e=null===(C=this.ctx.highlightManager)||void 0===C?void 0:C.getActiveHighlight(),t=this.getHighlightStateString(e,g,r),n=this.filterItemStylerFillParams(x.fill),o=this.cachedCallWithContext(u,p(p(p({seriesId:this.id},x),{},{fill:n},i),{},{highlightState:t,datum:a}));x=xu(this.ctx.optionsGraphService.resolvePartial(y,o),x)}return x}applyMarkerStyle(e,t,i,n){let{applyTranslation:o=!0,selected:s=!0}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const{shape:r,size:a=0}=e,l=this.visible&&a>0&&i&&!Number.isNaN(i.x)&&!Number.isNaN(i.y);if(t.setStyleProperties(e,n),o?t.setProperties({visible:l,shape:r,size:a,x:null===i||void 0===i?void 0:i.x,y:null===i||void 0===i?void 0:i.y,scalingCenterX:null===i||void 0===i?void 0:i.x,scalingCenterY:null===i||void 0===i?void 0:i.y}):t.setProperties({visible:l,shape:r,size:a}),s||(t.fillOpacity*=.25,t.strokeOpacity*=.125),"function"===typeof r&&!t.dirtyPath){t.path.clear(!0),t.updatePath(),t.checkPathDirty();const n=t.getBBox();if(null!=i&&n.isFinite()){const t=n.computeCenter(),[o,s]=["x","y"].map(n=>{var o;return(null!==(o=e.strokeWidth)&&void 0!==o?o:0)+Math.abs(t[n]-i[n])});i.focusSize=Math.max(n.width+o,n.height+s)}}}get nodeDataDependencies(){var e;return null!==(e=this._nodeDataDependencies)&&void 0!==e?e:{seriesRectWidth:Number.NaN,seriesRectHeight:Number.NaN}}checkResize(e){const{width:t,height:i}=null!==e&&void 0!==e?e:{width:Number.NaN,height:Number.NaN},n=e?{seriesRectWidth:t,seriesRectHeight:i}:void 0,o=null!=Xg(this.nodeDataDependencies,n);return o&&(this._nodeDataDependencies=n,this.markNodeDataDirty()),o}pickFocus(e){}resetDatumCallbackCache(){this.datumCallbackCache.clear()}cachedDatumCallback(e,t){const{datumCallbackCache:i}=this,n=i.get(e);if(null!=n)return n;try{const n=t();return i.set(e,n),n}catch(Ur){jr.error(String(Ur))}}cachedCallWithContext(e,t){return this.ctx.callbackCache.call([this.properties,this.ctx.chartService],e,t)}callWithContext(e,t){return Cp([this.properties,this.ctx.chartService],e,t)}formatTooltipWithContext(e,t,i){return e.formatTooltip([this.properties,this.ctx.chartService],t,i)}minTimeInterval(){}needsDataModelDiff(){var e;return!this.ctx.animationManager.isSkipped()||!(null===(e=this.chart)||void 0===e||!e.flashOnUpdateEnabled)}};MI.className="Series",Ab([ng({changeValue:function(e,t){this.onSeriesGroupingChange(t,e)}})],MI.prototype,"seriesGrouping",2);var kI=class{constructor(e){this.swapChain=e,this.hasBeenActivated=!1,this.div=zr("div"),this.svg=Br("svg"),this.outerPath=Br("path"),this.innerPath=Br("path"),this.svg.append(this.outerPath),this.svg.append(this.innerPath),this.outerPath.classList.add("ag-charts-focus-svg-outer-path"),this.innerPath.classList.add("ag-charts-focus-svg-inner-path"),this.element=zr("div","ag-charts-focus-indicator"),this.element.ariaHidden="true",this.element.append(this.svg),this.swapChain.addListener("swap",e=>this.onSwap(e))}clear(){}update(e,t,i){if(null!=t)if(e instanceof cC){const i=(i,n)=>{var o,s;let{x:r,y:a}=Bx.toCanvasPoint(e,i,n);return r-=null!==(o=t.x)&&void 0!==o?o:0,a-=null!==(s=t.y)&&void 0!==s?s:0,{x:r,y:a}},n=e.svgPathData(i);this.outerPath.setAttribute("d",n),this.innerPath.setAttribute("d",n),this.show(this.svg)}else{let n;if(i){const i=Math.max(e.x-t.x,0),o=Math.max(e.y-t.y,0),s=Math.min(e.x+e.width-t.x,t.width),r=Math.min(e.y+e.height-t.y,t.height);n=new Pb(i,o,s-i,r-o)}else n=new Pb(e.x-t.x,e.y-t.y,e.width,e.height);wp(this.div,n),this.show(this.div)}}onSwap(e){e!==this.element.parentElement&&(this.element.remove(),e.appendChild(this.element),this.overrideFocusVisible(this.focusVisible))}show(e){this.hasBeenActivated=!0,this.element.innerHTML="",this.element.append(e)}overrideFocusVisible(e){this.focusVisible=e;const t=this.element.parentElement;null===t||void 0===t||t.style.setProperty("opacity",{true:"1",false:"0",undefined:""}["".concat(e)])}isFocusVisible(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&!this.hasBeenActivated)return!1;const e=this.element.parentElement;return null!=e&&"1"===Pr().getComputedStyle(e).opacity}},DI=class{constructor(e,t,i,n){this.label1=e,this.label2=t,this.hasFocus=!1,this.skipDispatch=!1,this.listeners={blur:[],focus:[],swap:[]},this.onBlur=e=>(Qp(e.target,"pointer-events",void 0),!this.skipDispatch&&this.dispatch("blur",e)),this.onFocus=e=>(Qp(e.target,"pointer-events","auto"),!this.skipDispatch&&this.dispatch("focus",e)),Zp(this.label1,"id",Cm()),Zp(this.label2,"id",Cm()),Qp(this.label1,"display","none"),Qp(this.label2,"display","none"),this.label1.textContent=n,this.label2.textContent=n,this.activeAnnouncer=this.createAnnouncer(i),this.inactiveAnnouncer=this.createAnnouncer(i),Zp(this.activeAnnouncer,"tabindex",0),this.label2.insertAdjacentElement("afterend",this.activeAnnouncer),this.label2.insertAdjacentElement("afterend",this.inactiveAnnouncer),this.swap(n)}createAnnouncer(e){const t=zr("div");return t.role=e,t.className="ag-charts-swapchain",t.addEventListener("blur",this.onBlur),t.addEventListener("focus",this.onFocus),t}destroy(){for(const e of[this.activeAnnouncer,this.inactiveAnnouncer])e.removeEventListener("blur",this.onBlur),e.removeEventListener("focus",this.onFocus),e.remove()}focus(e){this.focusOptions=e,this.activeAnnouncer.focus(e),this.focusOptions=void 0}update(e){this.skipDispatch=!0,this.swap(e),this.hasFocus&&this.activeAnnouncer.focus(this.focusOptions),this.skipDispatch=!1}addListener(e,t){if(this.listeners[e].push(t),"swap"===e){t(this.activeAnnouncer)}}dispatch(e,t){"focus"===e?this.hasFocus=!0:"blur"===e&&(this.hasFocus=!1);for(const i of this.listeners[e])i(t)}swap(e){const t=this.activeAnnouncer.tabIndex;this.label2.textContent=e,[this.inactiveAnnouncer,this.activeAnnouncer]=[this.activeAnnouncer,this.inactiveAnnouncer],[this.label1,this.label2]=[this.label2,this.label1],Xp(this.inactiveAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!0,tabindex:void 0}),Xp(this.activeAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!1,tabindex:t}),this.dispatch("swap",this.activeAnnouncer)}},II={arrowdown:{bindings:[{code:"ArrowDown"}]},arrowleft:{bindings:[{code:"ArrowLeft"}]},arrowright:{bindings:[{code:"ArrowRight"}]},arrowup:{bindings:[{code:"ArrowUp"}]},delete:{bindings:[{key:"Backspace"},{key:"Delete"}],activatesFocusIndicator:!1},redo:{bindings:[{key:"y",ctrlOrMeta:!0},{key:"z",ctrlOrMeta:!0,shift:!0}],activatesFocusIndicator:!1},undo:{bindings:[{key:"z",ctrlOrMeta:!0}],activatesFocusIndicator:!1},submit:{bindings:[{key:"Enter"},{code:"Enter"},{code:"Space"}]},zoomin:{bindings:[{key:"+"},{code:"ZoomIn"},{code:"Add"}],activatesFocusIndicator:!1},zoomout:{bindings:[{key:"-"},{code:"ZoomOut"},{code:"Substract"}],activatesFocusIndicator:!1}};function AI(e,t){for(const i of t)if("code"in i){if(i.code===e.code)return!0}else{if(i.key===e.key&&(void 0===i.shift||i.shift===e.shiftKey)&&(void 0===i.ctrlOrMeta||i.ctrlOrMeta===e.ctrlKey||i.ctrlOrMeta===e.metaKey))return!0}return!1}function LI(e,t,i){var n;const{x:o,y:s}=null!==(n=function(e,t,i){const n=ek(e,i.datum,i.movedBounds);if(null!=n)return{x:n.canvasX,y:n.canvasY};const o=i.bounds;if(null!=o){if(o instanceof Pb){const{x:e,y:i}=o.computeCenter();return{x:t.x+e,y:t.y+i}}return Bx.toCanvas(o).computeCenter()}}(e,t,i))&&void 0!==n?n:{};if(void 0!==o&&void 0!==s)return{type:"keyboard",canvasX:o,canvasY:s}}var NI=class{constructor(){this.events=new Oa,this.x1=Number.NaN,this.y1=Number.NaN,this.x=Number.NaN,this.y=Number.NaN,this.vx=0,this.vy=0,this.t0=Number.NaN,this.animationFrameHandle=void 0}reset(){this.x=Number.NaN,this.y=Number.NaN,null!=this.animationFrameHandle&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0)}update(e,t){var i;if(Number.isNaN(this.x)||Number.isNaN(this.y))return this.x=e,this.y=t,this.vx=0,this.vy=0,this.emitUpdate(),void(null!=this.animationFrameHandle&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0));this.x1=e,this.y1=t,this.t0=Date.now(),null!==(i=this.animationFrameHandle)&&void 0!==i||(this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this)))}onFrame(){this.animationFrameHandle=void 0;const{x1:e,y1:t,t0:i}=this,n=Date.now(),o=n-i;this.t0=n;const s=.001,r=Math.trunc(Math.ceil(o/1));let{x:a,y:l,vx:d,vy:c}=this;for(let u=0;u<r;u+=1){d+=-(200*(a-e)+12*d)/.1*s,c+=-(200*(l-t)+12*c)/.1*s,a+=d*s,l+=c*s}Math.hypot(a-e,l-t)<.5?(this.x=this.x1,this.y=this.y1,this.vx=0,this.vy=0):(this.x=a,this.y=l,this.vx=d,this.vy=c,this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this))),this.emitUpdate()}emitUpdate(){this.events.emit("update",{x:this.x,y:this.y})}},TI=null;function RI(e){const t=ed(e);return""===t?"":(null!==TI&&void 0!==TI||(TI=zr("div")),TI.textContent=t,TI.innerHTML.replaceAll("\n","<br>"))}function EI(e,t){const{path:i,size:n}=e,{x:o,y:s}=e;i.clear();let r=!1;for(const[a,l]of t){const e=o+(a-.5)*n,t=s+(l-.5)*n;r?i.lineTo(e,t):i.moveTo(e,t),r=!0}i.closePath()}var PI={circle(e){let{path:t,x:i,y:n,size:o}=e;const s=o/2;t.arc(i,n,s,0,2*Math.PI),t.closePath()},cross(e){EI(e,[[.25,0],[.5,.25],[.75,0],[1,.25],[.75,.5],[1,.75],[.75,1],[.5,.75],[.25,1],[0,.75],[.25,.5],[0,.25]])},diamond(e){EI(e,[[.5,0],[1,.5],[.5,1],[0,.5]])},heart(e){let{path:t,x:i,y:n,size:o}=e;const s=o/4;n+=s/2,t.arc(i-s,n-s,s,Bp(130),Bp(330)),t.arc(i+s,n-s,s,Bp(220),Bp(50)),t.lineTo(i,n+s),t.closePath()},pin(e){let{path:t,x:i,y:n,size:o}=e;const s=.5,r=.5;t.moveTo(i+.391*o,n+(.391-r)*o),t.cubicCurveTo(i+.391*o,n+(.606-r)*o,i+0*o,n+.5*o,i+0*o,n+.5*o),t.cubicCurveTo(i+0*o,n+.5*o,i+-.391*o,n+(.606-r)*o,i+-.391*o,n+(.391-r)*o),t.cubicCurveTo(i+-.391*o,n+-.325*o,i+(.284-s)*o,n+-.5*o,i+0*o,n+-.5*o),t.cubicCurveTo(i+(.716-s)*o,n+-.5*o,i+.391*o,n+-.325*o,i+.391*o,n+(.391-r)*o),t.closePath()},plus(e){EI(e,[[1/3,0],[2/3,0],[2/3,1/3],[1,1/3],[1,2/3],[2/3,2/3],[2/3,1],[1/3,1],[1/3,2/3],[0,2/3],[0,1/3],[1/3,1/3]])},square(e){let{path:t,x:i,y:n,size:o,pixelRatio:s}=e;const r=o/2;t.moveTo(bx(s,i-r),bx(s,n-r)),t.lineTo(bx(s,i+r),bx(s,n-r)),t.lineTo(bx(s,i+r),bx(s,n+r)),t.lineTo(bx(s,i-r),bx(s,n+r)),t.closePath()},star(e){let{path:t,x:i,y:n,size:o}=e;const s=o/2,r=s/2,a=Math.PI/2;for(let l=0;l<10;l++){const e=l%2===0?s:r,o=l*Math.PI/5-a,d=i+Math.cos(o)*e,c=n+Math.sin(o)*e;t.lineTo(d,c)}t.closePath()},triangle(e){EI(e,[[.5,0],[1,.87],[0,.87]])}},OI=class extends cC{constructor(){super(...arguments),this.shape="square",this.x=0,this.y=0,this.size=12}isPointInPath(e,t){return this.distanceSquared(e,t)<=0}get midPoint(){return{x:this.x,y:this.y}}distanceSquared(e,t){const i=FI.anchor(this.shape),n=e-this.x+(i.x-.5)*this.size,o=t-this.y+(i.y-.5)*this.size,s=this.size/2;return Math.max(n*n+o*o-s*s,0)}updatePath(){var e,t;const{path:i,shape:n,x:o,y:s,size:r}=this,a=null!==(e=null===(t=this.layerManager)||void 0===t||null===(t=t.canvas)||void 0===t?void 0:t.pixelRatio)&&void 0!==e?e:1,l=FI.anchor(n),d={path:i,x:o-(l.x-.5)*r,y:s-(l.y-.5)*r,size:r,pixelRatio:a};i.clear(),"string"===typeof n?PI[n](d):"function"===typeof n&&n(d)}computeBBox(){const{x:e,y:t,size:i}=this,n=FI.anchor(this.shape);return new Pb(e-i*n.x,t-i*n.y,i,i)}executeFill(e,t){if(t)return super.executeFill(e,t)}executeStroke(e,t){if(t)return super.executeStroke(e,t)}};Ab([Zy({equals:Wy})],OI.prototype,"shape",2),Ab([$y()],OI.prototype,"x",2),Ab([$y()],OI.prototype,"y",2),Ab([$y({convertor:Math.abs})],OI.prototype,"size",2);var FI=class extends(Ex(Ox(Fx(OI)))){static anchor(e){return"pin"===e?{x:.5,y:1}:"function"===typeof e&&"anchor"in e?e.anchor:{x:.5,y:.5}}constructor(e){super(e),null!=(null===e||void 0===e?void 0:e.shape)&&(this.shape=e.shape)}resetAnimationProperties(e,t,i,n,o,s){this.__x=e,this.__y=t,this.__size=i,this.__opacity=n,this.resetScalingProperties(o,s,e,t),this.dirtyPath=!0,this.markDirty()}};var zI="ag-charts-tooltip";function BI(e){return null!=e&&(Array.isArray(e)?e.some(e=>BI(e.text)):""!==Gl(e).trim())}function VI(e){return null==e||"number"===typeof e&&!Number.isFinite(e)}function GI(e){return"raw"!==e.type&&(!(!e.data||0===e.data.length)&&e.data.every(e=>!0===e.missing))}function HI(e){const t=[],i=new Map;for(const n of e)if(!GI(n))if("structured"===n.type){const{heading:e}=n,o=BI(e)?i.get(e):void 0,s={type:"structured",heading:e,items:[n]};null==o?(i.set(e,s),t.push(s)):o.items.push(n)}else t.push(n);return t}function jI(e,t,i){let n="";BI(e)?(n+='<span class="'.concat(zI,'-label">').concat(RI(e),"</span>"),n+=" ",n+='<span class="'.concat(zI,'-value">').concat(RI(t),"</span>")):n+='<span class="'.concat(zI,'-label">').concat(RI(t),"</span>");const o=["".concat(zI,"-row")];return i&&o.push("".concat(zI,"-row--inline")),n='<div class="'.concat(o.join(" "),'">').concat(n,"</div>"),n}function WI(e){var t,i,n;let o="";if(null!==(t=e.data)&&void 0!==t&&t.length&&e.data.every(e=>!0===e.missing))return o;const s=BI(e.title),r=!s&&1===(null===(i=e.data)||void 0===i?void 0:i.length),a=null==e.symbol?void 0:function(e,t){var i,n,o;let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t*(5/3);const r=new Gx,a=Math.min(null!==(i=e.marker.strokeWidth)&&void 0!==i?i:1,2),l=null!==(n=e.line)&&void 0!==n&&n.enabled?Math.min(e.line.strokeWidth,2):0,d=Math.max(!1===e.marker.enabled?0:t,null==e.line?0:s),c=Math.max(!1===e.marker.enabled?0:t,l);if(null!==(o=e.line)&&void 0!==o&&o.enabled){const{stroke:t,strokeOpacity:i,lineDash:n}=e.line,o=new eD;o.x1=0,o.y1=c/2,o.x2=d,o.y2=c/2,o.stroke=t,o.strokeOpacity=i,o.strokeWidth=l,o.lineDash=n,r.append(o)}if(!1!==e.marker.enabled){const{shape:i,fill:n,fillOpacity:o,stroke:s,strokeOpacity:l,lineDash:u,lineDashOffset:h}=e.marker,p=new FI;p.shape=null!==i&&void 0!==i?i:"square",p.size=t,p.fill=n,p.fillOpacity=null!==o&&void 0!==o?o:1,p.stroke=s,p.strokeOpacity=null!==l&&void 0!==l?l:1,p.strokeWidth=a,p.lineDash=u,p.lineDashOffset=null!==h&&void 0!==h?h:0;const g=FI.anchor(i),m=d/2+(g.x-.5)*t,f=c/2+(g.y-.5)*t,v=t/(t+a);p.x=m,p.y=f,p.scalingCenterX=m,p.scalingCenterY=f,p.scalingX=v,p.scalingY=v,r.append(p)}return Gx.toSVG(r,d,c)}(e.symbol,12);if(null!=a&&(s||null!==(n=e.data)&&void 0!==n&&n.length)&&(o+='<span class="'.concat(zI,'-symbol">').concat(a,"</span>")),s&&(o+='<span class="'.concat(zI,'-title">').concat(RI(e.title),"</span>"),o+=" "),e.data)for(const d of e.data){var l;!0!==d.missing&&(o+=jI(null!==(l=d.label)&&void 0!==l?l:d.fallbackLabel,ed(d.value),r),o+=" ")}return o}function _I(e,t){if(null==e||1===t.length)return;const i=null===e||void 0===e?void 0:e.t("tooltipPaginationStatus",{index:t.index+1,count:t.length});return'<div class="'.concat(zI,'-footer">').concat(i,"</div>")}function KI(e,t,i,n){var o;const s=1===t.items.length?t.items[0]:void 0;let r,a,l;switch(i){case"compact":r=!0,a=ed(null===s||void 0===s?void 0:s.title);break;case"single":const e=BI(t.heading);r=null!=s&&(!e||null==s.title)&&1===(null===(o=s.data)||void 0===o?void 0:o.length)&&null==s.data[0].label&&null!=s.data[0].value,l=ed(e?t.heading:null===s||void 0===s?void 0:s.title);break;case"shared":r=!1}let d="";if(r&&null!=s){if(BI(a)&&(d+='<span class="'.concat(zI,'-title">').concat(RI(a),"</span>")),s.data)for(const h of s.data){var c;!0!==h.missing&&(d+=jI(null!==(c=h.label)&&void 0!==c?c:l,ed(h.value),!1),d+=" ")}}else{BI(t.heading)&&(d+='<span class="'.concat(zI,'-heading">').concat(RI(ed(t.heading)),"</span>"),d+=" ");for(const e of t.items)d+=WI(e)}if(0===d.length)return;const u="compact"!==i&&null!=n?_I(e,n):void 0;return u+null&&(d+=u),d='<div class="'.concat(zI,'-content">').concat(d.trimEnd(),"</div>"),d}function UI(e,t,i,n){const o=HI(t);if(0!==o.length){if(1===o.length&&"structured"===o[0].type)return KI(e,o[0],i,n);{const t=o.map(t=>"structured"===t.type?KI(e,t,i):t.rawHtmlString);var s;if(null!=n)t.push(null!==(s=function(e,t){const i=null==t?void 0:_I(e,t);return null==i?"":'<div class="'.concat(zI,'-content">').concat(i,"</div>")}(e,n))&&void 0!==s?s:"");return t.join("")}}}var YI={left:-1,"top-left":-1,"bottom-left":-1,top:0,center:0,bottom:0,right:1,"top-right":1,"bottom-right":1},$I={"top-left":-1,top:-1,"top-right":-1,left:0,center:0,right:0,"bottom-left":1,bottom:1,"bottom-right":1},ZI={left:3,"top-left":void 0,"bottom-left":void 0,top:2,center:void 0,bottom:1,right:0,"top-right":void 0,"bottom-right":void 0},XI={top:2,bottom:2,left:1,right:1,"top-right":3,"top-left":3,"bottom-right":3,"bottom-left":3,center:0},qI={pointer:"top",node:"top",chart:"top-left"},QI=class extends kh{constructor(){super(...arguments),this.xOffset=0,this.yOffset=0}};Ab([ru],QI.prototype,"xOffset",2),Ab([ru],QI.prototype,"yOffset",2),Ab([ru],QI.prototype,"anchorTo",2),Ab([ru],QI.prototype,"placement",2);var JI=class extends kh{constructor(){super(),this.enabled=!0,this.mode="single",this.delay=0,this.range=void 0,this.wrapping="hyphenate",this.position=new QI,this.pagination=!1,this.darkTheme=!1,this.bounds="extended",this.cleanup=new Ta,this.springAnimation=new NI,this.enableInteraction=!1,this.wrapTypes=["always","hyphenate","on-space","never"],this.sizeMonitor=new YC,this._elementSize=void 0,this._showTimeout=void 0,this.arrowPosition=void 0,this._visible=!1,this.positionParams=void 0,this.localeManager=void 0,this.cleanup.register(this.springAnimation.events.on("update",this.updateTooltipPosition.bind(this)))}get interactive(){return this.enableInteraction}setup(e,t){return"togglePopover"in Pr().HTMLElement.prototype&&(this.element=t.addChild("tooltip-container",zI),this.element.setAttribute("popover","manual"),this.element.className=zI,this.element.style.positionAnchor=t.anchorName,this.sizeMonitor.observe(this.element,e=>{this._elementSize=e,this.updateTooltipPosition()})),this.localeManager=e,()=>{t.removeChild("tooltip-container",zI),this.cleanup.flush(),this.element&&this.sizeMonitor.unobserve(this.element)}}isVisible(){return this._visible}contains(e){var t,i;return null!==(t=null===(i=this.element)||void 0===i?void 0:i.contains(e))&&void 0!==t&&t}updateTooltipPosition(){var e,t,i,n,o,s,r,a,l,d;const{element:c,_elementSize:u,positionParams:h}=this;if(null==c||null==u||null==h)return;const{canvasRect:p,relativeRect:g,meta:m}=h,{x:f,y:v}=this.springAnimation,y=null!==(e=null===(t=m.position)||void 0===t?void 0:t.anchorTo)&&void 0!==e?e:"pointer";let b=null!==(i=null===(n=m.position)||void 0===n?void 0:n.placement)&&void 0!==i?i:qI[y];Array.isArray(b)||(b=[b]);const x=null!==(o=null===(s=m.position)||void 0===s?void 0:s.xOffset)&&void 0!==o?o:0,C=null!==(r=null===(a=m.position)||void 0===a?void 0:a.yOffset)&&void 0!==r?r:0,S=g.x,w=g.y,M=g.width-u.width-1+S,k=g.height-u.height+w;let D,I,A=0,L=!1;do{D=b[A],A+=1;const e=this.getTooltipBounds({elementSize:u,placement:D,anchorTo:y,canvasX:f,canvasY:v,yOffset:C,xOffset:x,canvasRect:p});I=Rm(u.width,u.height,g,e),L=!1,1&XI[D]&&(L||(L=I.x<S||I.x>M)),2&XI[D]&&(L||(L=I.y<w||I.y>k))}while(A<b.length&&L);const N=za(S,I.x,M),T=za(w,I.y,k);L||(L=N!==I.x||T!==I.y);const R="chart"!==y&&!L&&!x&&!C,E=null!==(l=null!==(d=m.showArrow)&&void 0!==d?d:this.showArrow)&&void 0!==l?l:R;this.arrowPosition=E?ZI[D]:void 0,this.updateClassModifiers(),c.style.translate="".concat(N,"px ").concat(T,"px")}show(e,t,i,n,o){var s,r,a,l;let d=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const{element:c}=this;if(null!=c&&null!=n&&0!==n.length){const e=UI(this.localeManager,n,this.mode,this.pagination?o:void 0);if(null==e)return void this.toggle(!1);c.innerHTML=e}else if(null==c||""===c.innerHTML)return void this.toggle(!1);const u={x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height};this.positionParams={canvasRect:t,relativeRect:u,meta:i};switch(null!==(s=null===(r=i.position)||void 0===r?void 0:r.anchorTo)&&void 0!==s?s:"pointer"){case"node":this.springAnimation.update(null!==(a=i.nodeCanvasX)&&void 0!==a?a:i.canvasX,null!==(l=i.nodeCanvasY)&&void 0!==l?l:i.canvasY);break;case"pointer":this.springAnimation.update(i.canvasX,i.canvasY);break;case"chart":this.springAnimation.reset()}i.enableInteraction?(this.enableInteraction=!0,c.style.pointerEvents="auto",c.removeAttribute("aria-hidden"),c.tabIndex=-1):(this.enableInteraction=!1,c.style.pointerEvents="none",c.setAttribute("aria-hidden","true"),c.removeAttribute("tabindex")),c.style.setProperty("--top","".concat(t.top,"px")),c.style.setProperty("--left","".concat(t.left,"px")),this.updateClassModifiers(),this.toggle(!0,d)}hide(){this.toggle(!1)}maybeEnterInteractiveTooltip(e,t){let{relatedTarget:i}=e;const{interactive:n,interactiveLeave:o,enabled:s,element:r}=this;if(null==r)return!1;if(o)return!0;const a=n&&s&&this.isVisible()&&i instanceof Node&&this.contains(i);return a&&(this.interactiveLeave={callback:t,listener:e=>{(null==e.relatedTarget||e.relatedTarget instanceof Node&&!this.contains(e.relatedTarget))&&this.popInteractiveLeaveCallback()}},r.addEventListener("focusout",this.interactiveLeave.listener),r.addEventListener("mouseout",this.interactiveLeave.listener)),a}popInteractiveLeaveCallback(){const{interactiveLeave:e,element:t}=this;this.interactiveLeave=void 0,e&&(t&&(t.removeEventListener("focusout",e.listener),t.removeEventListener("mouseout",e.listener)),e.callback())}toggle(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{delay:i}=this;var n;e&&i>0&&!t?null!==(n=this._showTimeout)&&void 0!==n||(this._showTimeout=setTimeout(()=>{this._showTimeout=void 0,this.toggleCallback(!0)},i)):(clearTimeout(this._showTimeout),this._showTimeout=void 0,this.toggleCallback(e))}toggleCallback(e){var t;null!==(t=this.element)&&void 0!==t&&t.isConnected&&this._visible!==e&&(this._visible=e,this.element.togglePopover(e),e?this.updateTooltipPosition():(this.springAnimation.reset(),this.popInteractiveLeaveCallback()))}updateClassModifiers(){var e;if(null===(e=this.element)||void 0===e||!e.isConnected)return;const{classList:t}=this.element,i=(e,i)=>t.toggle("".concat(zI,"--").concat(e),i);i("no-interaction",!this.enableInteraction),i("arrow-top",1===this.arrowPosition),i("arrow-right",3===this.arrowPosition),i("arrow-bottom",2===this.arrowPosition),i("arrow-left",0===this.arrowPosition),i("compact","compact"===this.mode),t.toggle("ag-charts-tooltip--dark",this.darkTheme);for(const n of this.wrapTypes)t.toggle("".concat(zI,"--wrap-").concat(n),n===this.wrapping)}getTooltipBounds(e){const{elementSize:t,anchorTo:i,placement:n,canvasX:o,canvasY:s,yOffset:r,xOffset:a,canvasRect:l}=e,{width:d,height:c}=t,u={width:d,height:c};if("node"===i||"pointer"===i){const e=YI[n],t=$I[n];return u.top=s+r+c*(t-1)/2+8*t,u.left=o+a+d*(e-1)/2+8*e,u}switch(n){case"top":return u.top=r,u.left=l.width/2-d/2+a,u;case"right":return u.top=l.height/2-c/2+r,u.left=l.width-d+a,u;case"left":return u.top=l.height/2-c/2+r,u.left=a,u;case"bottom":return u.top=l.height-c+r,u.left=l.width/2-d/2+a,u;case"top-left":return u.top=r,u.left=a,u;case"top-right":return u.top=r,u.left=l.width-d+a,u;case"bottom-right":return u.top=l.height-c+r,u.left=l.width-d+a,u;case"bottom-left":return u.top=l.height-c+r,u.left=a,u}return u}};function eA(e,t){return e.series===t.series&&yu(e.datumIndex,t.datumIndex)}Ab([ru],JI.prototype,"enabled",2),Ab([ru],JI.prototype,"mode",2),Ab([ru],JI.prototype,"showArrow",2),Ab([ru],JI.prototype,"delay",2),Ab([ru],JI.prototype,"range",2),Ab([ru],JI.prototype,"wrapping",2),Ab([ru],JI.prototype,"position",2),Ab([ru],JI.prototype,"pagination",2),Ab([ru],JI.prototype,"darkTheme",2),Ab([ru],JI.prototype,"bounds",2);var tA=class{constructor(){this.candidates=[]}get current(){return this.active}reset(){this.candidates.length=0,this.active=void 0}update(e,t){this.candidates=e;let i=null==t?-1:e.findIndex(e=>eA(e,t));return-1===i&&(i=0),this.active=e[i],{current:this.active,index:i,length:e.length}}next(){const{candidates:e,active:t}=this,i=null==t?-1:e.findIndex(e=>eA(e,t));if(-1===i)return;let n=i+1;return n>=e.length&&(n=0),this.active=e[n],{current:this.active,index:n,length:this.candidates.length}}},iA=class extends _C{constructor(e){super(),this.chart=e,this.id=xm(this),this.series=[],this.announceMode="when-changed",this.highlight={pendingHoverEvent:void 0,appliedHoverEvent:void 0,stashedHoverEvent:void 0},this.tooltip={lastHover:void 0},this.hoverDevice="pointer",this.previousInputDevice="keyboard",this.focus={sortedSeries:[],series:void 0,seriesIndex:0,datumIndex:0,datum:void 0},this.cachedTooltipContent=void 0,this.hoverScheduler=function(e){const t=Pr();return Yx(function(e,i){return t.requestAnimationFrame(e)},e,function(e){t.cancelAnimationFrame(e)})}(()=>{(this.tooltip.lastHover||this.highlight.pendingHoverEvent)&&(this.chart.getUpdateType()<=Ku.SERIES_UPDATE?this.hoverScheduler.schedule():(this.highlight.pendingHoverEvent&&this.handleHoverHighlight(!1),this.tooltip.lastHover&&this.handleHoverTooltip(this.tooltip.lastHover,!1)))}),this.tooltipCandidates=new tA;const t=e.ctx.localeManager.t("ariaInitSeriesArea"),i=e.ctx.domManager.addChild("series-area","series-area-aria-label1"),n=e.ctx.domManager.addChild("series-area","series-area-aria-label2");this.swapChain=new DI(i,n,"img",t),this.swapChain.addListener("blur",e=>this.onBlur(e)),this.swapChain.addListener("focus",()=>this.onFocus()),"normal"===e.ctx.domManager.mode&&(this.focusIndicator=new kI(this.swapChain),this.focusIndicator.overrideFocusVisible("integrated"!==e.mode&&void 0));const{seriesDragInterpreter:o,seriesWidget:s,containerWidget:r}=e.ctx.widgets;s.setTabIndex(-1),this.cleanup.register(()=>e.ctx.domManager.removeChild("series-area","series-area-aria-label1"),()=>e.ctx.domManager.removeChild("series-area","series-area-aria-label2"),s.addListener("focus",()=>this.swapChain.focus({preventScroll:!0})),s.addListener("mousemove",e=>this.onHover(e,s)),s.addListener("wheel",e=>this.onWheel(e)),s.addListener("mouseleave",e=>this.onLeave(e)),s.addListener("keydown",e=>this.onKeyDown(e)),s.addListener("contextmenu",(e,t)=>this.onContextMenu(e,t)),r.addListener("contextmenu",(e,t)=>this.onContextMenu(e,t)),r.addListener("click",(e,t)=>this.onClick(e,t)),r.addListener("dblclick",(e,t)=>this.onClick(e,t)),e.ctx.animationManager.addListener("animation-start",()=>this.clearAll()),e.ctx.eventsHub.on("dom:resize",()=>this.clearAll()),e.ctx.eventsHub.on("highlight:change",e=>this.changeHighlightDatum(e)),e.ctx.eventsHub.on("layout:complete",e=>this.layoutComplete(e)),e.ctx.updateService.addListener("pre-scene-render",()=>this.preSceneRender()),e.ctx.updateService.addListener("update-complete",()=>this.updateComplete()),e.ctx.eventsHub.on("zoom:change-complete",()=>this.clearAll()),e.ctx.eventsHub.on("zoom:pan-start",()=>this.clearAll())),o&&this.cleanup.register(o.events.on("drag-move",e=>this.onDragMove(e,s)),o.events.on("click",e=>this.onClick(e,s)),o.events.on("dblclick",e=>this.onClick(e,s)))}get bbox(){var e;return(null!==(e=this.seriesRect)&&void 0!==e?e:Pb.zero).clone()}isState(e){return this.chart.ctx.interactionManager.isState(e)}isIgnoredTouch(e){return"touch"===e.device&&"click"!==e.type&&("hover"!==this.chart.ctx.chartService.touch.dragAction&&("drag"!==this.chart.ctx.chartService.touch.dragAction||!this.isState(9)))}dataChanged(){var e,t,i;(this.cachedTooltipContent=void 0,this.highlight.appliedHoverEvent)&&(null!==(i=(t=this.highlight).stashedHoverEvent)&&void 0!==i||(t.stashedHoverEvent=this.highlight.appliedHoverEvent),this.clearHighlight());this.chart.ctx.tooltipManager.removeTooltip(this.id),null===(e=this.focusIndicator)||void 0===e||e.clear()}preSceneRender(){var e;null!=this.highlight.stashedHoverEvent&&(this.highlight.pendingHoverEvent=null!==(e=this.tooltip.lastHover)&&void 0!==e?e:this.highlight.stashedHoverEvent,this.highlight.stashedHoverEvent=void 0,this.handleHoverHighlight(!0));null!=this.tooltip.lastHover&&this.handleHoverTooltip(this.tooltip.lastHover,!0)}updateComplete(){var e;this.isState(34)&&null!==(e=this.focusIndicator)&&void 0!==e&&e.isFocusVisible()&&("always"!==this.announceMode&&(this.announceMode="never"),this.handleFocus(0,0))}update(e,t){this.chart.ctx.updateService.update(e,t)}seriesChanged(e){this.focus.sortedSeries=[...e].sort((e,t)=>{var i,n;let o=null!==(i=e.properties.focusPriority)&&void 0!==i?i:1/0,s=null!==(n=t.properties.focusPriority)&&void 0!==n?n:1/0;return o===s&&([o,s]=[e.declarationOrder,t.declarationOrder]),o<s?-1:o>s?1:0}),this.series=e}layoutComplete(e){this.seriesRect=e.series.rect,this.hoverRect=e.series.rect,this.chart.ctx.widgets.seriesWidget.setBounds(e.series.rect),"normal"===this.chart.ctx.domManager.mode&&this.chart.ctx.widgets.chartWidget.setBounds(e.chart)}onContextMenu(e,t){var i,n;const{sourceEvent:o}=e;if(o.currentTarget!=t.getElement())return;if(t!==this.chart.ctx.widgets.seriesWidget){if(this.isState(36)){const{currentX:t,currentY:i}=e;this.chart.ctx.contextMenuRegistry.dispatchContext("always",{widgetEvent:e,canvasX:t,canvasY:i},void 0)}return}let s,r;if(null!==(i=this.focusIndicator)&&void 0!==i&&i.isFocusVisible())s=this.chart.ctx.highlightManager.getActiveHighlight(),s&&this.seriesRect&&s.midPoint&&(r=Bx.toCanvasPoint(s.series.contentGroup,s.midPoint.x,s.midPoint.y));else if(this.isState(36)){const t=this.pickNodes({x:e.currentX,y:e.currentY},"context-menu");t&&(this.chart.ctx.highlightManager.updateHighlight(this.id),s=t.matches[0].datum)}const a=null===(n=s)||void 0===n?void 0:n.series;this.clearAll();const l=e.currentX+t.cssLeft(),d=e.currentY+t.cssTop(),{datumIndex:c}=null!==s&&void 0!==s?s:{};a&&s&&null!=c?this.chart.ctx.contextMenuRegistry.dispatchContext("series-node",{widgetEvent:e,canvasX:l,canvasY:d},{pickedSeries:a,pickedNode:p(p({},s),{},{datumIndex:c})},r):this.chart.ctx.contextMenuRegistry.dispatchContext("series-area",{widgetEvent:e,canvasX:l,canvasY:d},void 0,r)}onLeave(e){if(!this.isState(41))return;const t=e.sourceEvent.relatedTarget;"ag-charts-text-input__textarea"!==(null===t||void 0===t?void 0:t.className)&&(this.maybeEnterInteractiveTooltip(e.sourceEvent)||(this.chart.ctx.domManager.updateCursor(this.id),"keyboard"!==this.hoverDevice&&this.clearAll(!0)))}onWheel(e){var t;this.isState(41)&&(null===(t=this.focusIndicator)||void 0===t||t.overrideFocusVisible(!1),this.previousInputDevice="pointer")}onDragMove(e,t){var i;this.isState(41)&&(null===(i=this.focusIndicator)||void 0===i||i.overrideFocusVisible(!1),this.onHoverLikeEvent(e,t))}onHover(e,t){this.isState(41)&&this.onHoverLikeEvent(e,t)}onHoverLikeEvent(e,t){var i,n;if(this.isIgnoredTouch(e))return;if("touch"===e.device&&"hover"===this.chart.ctx.chartService.touch.dragAction&&e.sourceEvent.preventDefault(),t!==this.chart.ctx.widgets.seriesWidget)return;let o;if("touch"!==e.device&&(n="drag-move",e.type===n)||(this.tooltip.lastHover=e),this.hoverDevice="pointer",this.previousInputDevice="pointer",this.highlight.pendingHoverEvent=e,this.hoverScheduler.schedule(),this.isState(32)){var s;const{currentX:t,currentY:i}=e;o=this.pickNodes({x:t,y:i},"event");const n=null===(s=o)||void 0===s?void 0:s.matches,r=null===n||void 0===n?void 0:n[0];null!==r&&void 0!==r&&r.series.hasEventListener("seriesNodeClick")||null!==r&&void 0!==r&&r.series.hasEventListener("seriesNodeDoubleClick")||null!=n&&n.length>1&&this.chart.tooltip.pagination?this.chart.ctx.domManager.updateCursor(this.id,"pointer"):this.chart.ctx.domManager.updateCursor(this.id)}const r=Boolean(null===(i=o)||void 0===i?void 0:i.matches.length);this.emitSeriesAreaHoverEvent(e,r)}onClick(e,t){var i;if("keyboard"===e.device)return;if(t===this.chart.ctx.widgets.seriesWidget&&this.chart.ctx.animationManager.isActive()&&this.chart.ctx.animationManager.skipCurrentBatch(),"touch"===e.device&&t===this.chart.ctx.widgets.seriesWidget&&this.swapChain.focus({preventScroll:!0}),!this.isState(41))return;if(t===this.chart.ctx.widgets.seriesWidget){if(!t.getElement().contains(e.sourceEvent.target))return}else if(e.sourceEvent.target!=t.getElement())return;null===(i=this.focusIndicator)||void 0===i||i.overrideFocusVisible(!1),this.onHoverLikeEvent(e,t);const n=t===this.chart.ctx.widgets.seriesWidget;if(!this.isState(32))return void(n&&this.emitSeriesAreaClickEvent(e,!1));if(n){if(Boolean(this.checkSeriesNodeClick(e)))return this.emitSeriesAreaClickEvent(e,!0),this.update(Ku.SERIES_UPDATE),void e.sourceEvent.preventDefault();this.emitSeriesAreaClickEvent(e,!1)}const o={type:"click"===e.type?"click":"doubleClick",event:e.sourceEvent};this.chart.fireEvent(o)}emitSeriesAreaHoverEvent(e,t){const i=this.toCanvasCoordinates(e.currentX,e.currentY);if(null==i)return;const n={x:i.x,y:i.y,consumed:t,sourceEvent:e.sourceEvent};this.chart.ctx.eventsHub.emit("series-area:hover",n)}emitSeriesAreaClickEvent(e,t){if(!("currentX"in e))return;const i=this.toCanvasCoordinates(e.currentX,e.currentY);if(null==i)return;const n={x:i.x,y:i.y,consumed:t,sourceEvent:e.sourceEvent};this.chart.ctx.eventsHub.emit("series-area:click",n)}toCanvasCoordinates(e,t){var i,n,o,s,r,a,l,d;return{x:e+(null!==(i=null!==(n=null===(o=this.hoverRect)||void 0===o?void 0:o.x)&&void 0!==n?n:null===(s=this.seriesRect)||void 0===s?void 0:s.x)&&void 0!==i?i:0),y:t+(null!==(r=null!==(a=null===(l=this.hoverRect)||void 0===l?void 0:l.y)&&void 0!==a?a:null===(d=this.seriesRect)||void 0===d?void 0:d.y)&&void 0!==r?r:0)}}onFocus(){var e;this.isState(34)&&(this.hoverDevice=null!==(e=this.focusIndicator)&&void 0!==e&&e.isFocusVisible(!0)?"keyboard":"pointer",this.handleFocus(0,0))}onBlur(e){var t;this.isState(34)&&(this.hoverDevice="pointer",this.maybeEnterInteractiveTooltip(e)||this.clearAll(!0),null===(t=this.focusIndicator)||void 0===t||t.overrideFocusVisible(void 0))}onKeyDown(e){if(!this.isState(43))return;const t=function(e){for(const[t,{activatesFocusIndicator:i=!0,bindings:n}]of fu(II))if(AI(e,n))return{name:t,activatesFocusIndicator:i}}(e.sourceEvent);var i;!1===(null===t||void 0===t?void 0:t.activatesFocusIndicator)&&(null===(i=this.focusIndicator)||void 0===i||i.overrideFocusVisible("keyboard"===this.previousInputDevice));switch(null===t||void 0===t?void 0:t.name){case"redo":return this.chart.ctx.eventsHub.emit("series:redo",null);case"undo":return this.chart.ctx.eventsHub.emit("series:undo",null);case"zoomin":return this.chart.ctx.eventsHub.emit("series:keynav-zoom",{delta:1,widgetEvent:e});case"zoomout":return this.chart.ctx.eventsHub.emit("series:keynav-zoom",{delta:-1,widgetEvent:e});case"arrowup":return this.onArrow(-1,0,e);case"arrowdown":return this.onArrow(1,0,e);case"arrowleft":return this.onArrow(0,-1,e);case"arrowright":return this.onArrow(0,1,e);case"submit":return this.onSubmit(e)}}onArrow(e,t,i){var n;this.isState(34)&&(this.hoverDevice="keyboard",this.previousInputDevice="keyboard",null===(n=this.focusIndicator)||void 0===n||n.overrideFocusVisible(!0),this.focus.seriesIndex+=e,this.focus.datumIndex+=t,this.handleFocus(e,t),i.sourceEvent.preventDefault(),this.chart.ctx.eventsHub.emit("series:focus-change",null))}onSubmit(e){if(!this.isState(34))return;const{series:t,datum:i}=this.focus,n=e.sourceEvent;null!=t&&null!=i?t.fireNodeClickEvent(n,i):this.chart.fireEvent({type:"click",event:n}),n.preventDefault()}checkSeriesNodeClick(e){var t,i;const n=this.pickNodes({x:e.currentX,y:e.currentY},"event");if(null==n||0===n.matches.length)return;const o=this.chart.tooltip.pagination?null===(t=this.tooltipCandidates.update(n.matches,this.tooltipCandidates.current))||void 0===t?void 0:t.current:void 0,{series:s,datum:r}=null!==o&&void 0!==o?o:n.matches[0],a=null==o?n.distance:0;if("click"===e.type){const t=s.fireNodeClickEvent(e.sourceEvent,r)&&this.chart.tooltip.pagination?this.tooltipCandidates.next():void 0;if(null!=t){var l,d,c,u,h;e.sourceEvent.preventDefault();const{currentX:n,currentY:o}=e,s=n+(null!==(l=null===(d=this.hoverRect)||void 0===d?void 0:d.x)&&void 0!==l?l:0),r=o+(null!==(c=null===(u=this.hoverRect)||void 0===u?void 0:u.y)&&void 0!==c?c:0);null!==(h=(i=this.highlight).pendingHoverEvent)&&void 0!==h||(i.pendingHoverEvent=this.highlight.appliedHoverEvent),this.handleHoverHighlight(!1),this.showTooltip(t.current,s,r,{index:t.index,length:t.length})}return!0}return"dblclick"===e.type&&(e.preventZoomDblClick=0===a,s.fireNodeDoubleClickEvent(e.sourceEvent,r),!0)}handleFocus(e,t){const i=this.chart.overlays.getFocusInfo(this.chart.ctx.localeManager);var n;null==i?0===this.handleSeriesFocus(e,t)?this.announceMode="when-changed":this.announceMode="always":(null===(n=this.focusIndicator)||void 0===n||n.update(i.rect,this.seriesRect,!1),this.swapChain.update(i.text),this.announceMode="always")}handleSeriesFocus(e,t){if("standalone"===this.chart.chartType)return this.handleSoloSeriesFocus(e,t);const{focus:i}=this,n=i.sortedSeries.filter(e=>e.visible&&e.focusable);if(0===n.length)return 1;const o=i.datumIndex-t,s=i.seriesIndex-e;i.seriesIndex=za(0,i.seriesIndex,n.length-1),i.series=n[i.seriesIndex];const r=this.focus.datumIndex,a=this.focus.seriesIndex;return this.updatePickedFocus(r,t,o,a,e,s)}handleSoloSeriesFocus(e,t){this.focus.series=this.focus.sortedSeries[0];const i=this.focus.datumIndex,n=this.focus.seriesIndex,o=this.focus.datumIndex-t,s=this.focus.seriesIndex-e;return this.updatePickedFocus(i,t,o,n,e,s)}updatePickedFocus(e,t,i,n,o,s){var r,a,l,d;const{focus:c,hoverRect:u,seriesRect:h}=this;if(null==c.series||null==u)return 1;const p=null===c||void 0===c||null===(r=c.series)||void 0===r?void 0:r.pickFocus({datumIndex:e,datumIndexDelta:t,otherIndex:n,otherIndexDelta:o,seriesRect:h});if(!p)return 2;const{datum:g}=p;if(c.datum=g,c.datumIndex=p.datumIndex,null!=p.otherIndex&&(c.seriesIndex=p.otherIndex),null!==(a=this.focusIndicator)&&void 0!==a&&a.isFocusVisible()){this.chart.ctx.animationManager.reset();const e=function(e){let{bounds:t}=e;return t instanceof Pb?t:null!=t?Bx.toCanvas(t):Pb.NaN}(p),{x:t,y:i}=e.computeCenter();if(!u.containsPoint(t,i)){if(this.chart.ctx.zoomManager.panToBBox(u,e))return 3}const{x1:n,x2:o,y1:s,y2:r}=Pv.from(e),a=u.containsPoint(n,s),l=u.containsPoint(o,s),d=u.containsPoint(n,r),c=u.containsPoint(o,r);if(!(a||l||d||c)){const t=Pv.from(u);p.movedBounds=e.clone(),n<t.x1&&o<t.x1?(p.movedBounds.x=t.x1-2,p.movedBounds.width=4):n>t.x2&&o>t.x2&&(p.movedBounds.x=t.x2-2,p.movedBounds.width=4),s<t.y1&&r<t.y1?(p.movedBounds.y=t.y1-2,p.movedBounds.height=4):s>t.y2&&r>t.y2&&(p.movedBounds.y=t.y2-2,p.movedBounds.height=4)}}null===(l=this.focusIndicator)||void 0===l||l.update(null!==(d=p.movedBounds)&&void 0!==d?d:p.bounds,this.seriesRect,p.clipFocusBox);const m=this.getTooltipContent(c.series,g.datumIndex,g,"aria-label"),f=LI(c.series,u,p);if(null!=f&&"keyboard"===this.hoverDevice){this.tooltip.lastHover=void 0,this.highlight.appliedHoverEvent=void 0,this.highlight.pendingHoverEvent=void 0,this.highlight.stashedHoverEvent=void 0;const e=nk.makeTooltipMeta(f,c.series,g,p.movedBounds);this.chart.ctx.highlightManager.updateHighlight(this.id,g),this.isTooltipEnabled(c.series)&&this.chart.ctx.tooltipManager.updateTooltip(this.id,e,m)}return this.maybeAnnouncePickedFocus(t,i,o,s,p,m),0}maybeAnnouncePickedFocus(e,t,i,n,o,s){const{focus:r}=this;let a;if("when-changed"===this.announceMode){var l;a=0===e&&0===i||t!==o.datumIndex||n!==(null!==(l=o.otherIndex)&&void 0!==l?l:r.seriesIndex)?"always":"never"}else a=this.announceMode;"always"===a&&this.swapChain.update(this.getDatumAriaText(o.datum,s))}getDatumAriaText(e,t){var i,n,o;const s=null==t?"":function(e){const t=HI(e),i=[];for(const o of t)if("raw"!==o.type){BI(o.heading)&&i.push(ed(o.heading));for(const e of o.items)if(BI(e.title)&&i.push(ed(e.title)),e.data)for(const t of e.data){var n;!0!==t.missing&&i.push(null!==(n=t.label)&&void 0!==n?n:t.fallbackLabel,ed(t.value))}}return i.filter(e=>""!==e).join("; ")}(t);return this.chart.ctx.localeManager.t("ariaAnnounceHoverDatum",{datum:null!==(i=null===(n=(o=e.series).getDatumAriaText)||void 0===n?void 0:n.call(o,e,s))&&void 0!==i?i:s})}clearHighlight(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.highlight.pendingHoverEvent=void 0,this.highlight.appliedHoverEvent=void 0,this.chart.ctx.highlightManager.updateHighlight(this.id,void 0,e)}clearTooltip(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.chart.ctx.tooltipManager.removeTooltip(this.id,void 0,e),this.tooltip.lastHover=void 0}clearAll(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.clearHighlight(t),this.clearTooltip(t),null===(e=this.focusIndicator)||void 0===e||e.clear()}handleHoverHighlight(e){var t,i,n,o,s,r;this.highlight.appliedHoverEvent=this.highlight.pendingHoverEvent,this.highlight.pendingHoverEvent=void 0;const a=this.highlight.appliedHoverEvent;if(!a||!this.isState(41))return;const{currentX:l,currentY:d}=a,c=a.currentX+(null!==(t=null===(i=this.hoverRect)||void 0===i?void 0:i.x)&&void 0!==t?t:0),u=a.currentY+(null!==(n=null===(o=this.hoverRect)||void 0===o?void 0:o.y)&&void 0!==n?n:0);if(e?this.chart.ctx.animationManager.isActive():null===(s=this.hoverRect)||void 0===s||!s.containsPoint(c,u))return void this.clearHighlight();const{range:h}=this.chart.highlight,p="tooltip"===h?"highlight-tooltip":"highlight",g=this.pickNodes({x:l,y:d},p);if(!g||0===g.matches.length)return void this.chart.ctx.highlightManager.updateHighlight(this.id,void 0,!0);const{current:m}=this.tooltipCandidates,f=null==m?void 0:g.matches.find(e=>eA(e,m)),v=null!==(r=null===f||void 0===f?void 0:f.datum)&&void 0!==r?r:g.matches[0].datum;this.chart.ctx.highlightManager.updateHighlight(this.id,v),this.hoverDevice="pointer"}handleHoverTooltip(e,t){var i,n,o,s,r;const{current:a}=this.tooltipCandidates;if(this.tooltipCandidates.reset(),!this.isState(41))return;const{currentX:l,currentY:d}=e,c=l+(null!==(i=null===(n=this.hoverRect)||void 0===n?void 0:n.x)&&void 0!==i?i:0),u=d+(null!==(o=null===(s=this.hoverRect)||void 0===s?void 0:s.y)&&void 0!==o?o:0),h=e.sourceEvent.target;if(t?this.chart.ctx.animationManager.isActive():null===(r=this.hoverRect)||void 0===r||!r.containsPoint(c,u))return void("pointer"==this.hoverDevice&&this.clearTooltip());if(h&&this.chart.tooltip.interactive&&this.chart.ctx.domManager.isManagedChildDOMElement(h,"canvas-overlay",zI))return;const p=this.pickNodes({x:e.currentX,y:e.currentY},"tooltip");if(p&&0!==p.matches.length)if(this.hoverDevice="pointer",0===p.distance){const{current:e,index:t,length:i}=this.tooltipCandidates.update(p.matches,this.chart.tooltip.pagination?a:void 0);this.showTooltip(e,c,u,{index:t,length:i})}else this.showTooltip(p.matches[0],c,u);else"pointer"==this.hoverDevice&&this.clearTooltip(!0)}showTooltip(e,t,i,n){let{series:o,datum:s,datumIndex:r}=e;const a=this.getTooltipContent(o,r,s,"tooltip");if(null!=a){const e=nk.makeTooltipMeta({type:"pointermove",canvasX:t,canvasY:i},o,s,void 0);this.chart.ctx.tooltipManager.updateTooltip(this.id,e,a,n)}else this.chart.ctx.tooltipManager.removeTooltip(this.id,void 0,!0)}maybeEnterInteractiveTooltip(e){return this.chart.tooltip.maybeEnterInteractiveTooltip(e,()=>{this.tooltip.lastHover=void 0,this.chart.ctx.tooltipManager.removeTooltip(this.id),this.chart.ctx.highlightManager.updateHighlight(this.id,void 0,!0)})}changeHighlightDatum(e){var t,i,n,o;const s=null===(t=e.previousHighlight)||void 0===t?void 0:t.series,r=null===(i=e.currentHighlight)||void 0===i?void 0:i.series;null!==s&&void 0!==s&&s.properties.cursor&&null!==(n=e.previousHighlight)&&void 0!==n&&n.datum&&this.chart.ctx.domManager.updateCursor(s.id),null!==r&&void 0!==r&&r.properties.cursor&&"default"!==r.properties.cursor&&null!==(o=e.currentHighlight)&&void 0!==o&&o.datum&&this.chart.ctx.domManager.updateCursor(r.id,r.properties.cursor),null==r||null==s?this.update(Ku.SERIES_UPDATE,{clearCallbackCache:!0}):this.update(Ku.SERIES_UPDATE,{seriesToUpdate:new Set([s,r].filter(Boolean)),clearCallbackCache:!0})}pickNodes(e,t,i){const n=[...this.series].reverse();let o;for(const r of n){if(!r.visible||!r.contentGroup.visible)continue;const n=r.pickNodes(e,t,i);if(null==n||0===n.datums.length)continue;const{datums:a,distance:l}=n;if(0!==n.datums.length)if(0===l){var s;0!==(null===(s=o)||void 0===s?void 0:s.distance)&&(o={matches:[],distance:0});for(const e of a){const{datumIndex:t}=e;o.matches.push({series:r,datum:e,datumIndex:t})}}else if(null==o||o.distance>l){const[e]=a,{datumIndex:t}=e;o={matches:[{series:r,datum:e,datumIndex:t}],distance:l}}}return o}isTooltipEnabled(e){var t;return null!==(t=e.tooltipEnabled)&&void 0!==t?t:this.chart.tooltip.enabled}getTooltipContent(e,t,i,n){let o;if("aria-label"===n||this.isTooltipEnabled(e)){const{cachedTooltipContent:s}=this;if(null!=s&&s.series===e&&s.datumIndex===t)o=s.content;else{const s=this.chart.getTooltipContent(e,t,i,n);this.cachedTooltipContent={series:e,datumIndex:t,content:s},o=s}}else this.cachedTooltipContent=void 0;return o}};iA.className="SeriesAreaManager";var nA=class{constructor(e){this.seriesRoot=e,this.groups=new Map,this.series=new Map,this.expectedSeriesCount=1,this.mode="normal"}setSeriesCount(e){this.expectedSeriesCount=e}getGroupIndex(e){var t;const{internalId:i,seriesGrouping:n}=e;return null!==(t=null===n||void 0===n?void 0:n.groupIndex)&&void 0!==t?t:i}getGroupType(e,t){return t?"top":e.type}requestGroup(e){const{internalId:t,contentGroup:i}=e,n=e.bringToFront(),o=this.getGroupType(e,n),s=this.getGroupIndex(e),r=this.series.get(t);if(null!=r)throw new Error("AG Charts - series already has an allocated layer: ".concat(JSON.stringify(r)));0===this.series.size&&(this.mode=this.expectedSeriesCount>=30?"aggressive-grouping":"normal");let a=this.groups.get(o);null==a&&(a=new Map,this.groups.set(o,a));const l=this.lookupIdx(s);let d=a.get(l);var c;null==d&&(d={type:o,id:l,seriesIds:[],group:this.seriesRoot.appendChild(new Gx({name:"".concat(null!==(c=e.contentGroup.name)&&void 0!==c?c:o,"-managed-layer"),zIndex:e.contentGroup.zIndex,renderToOffscreenCanvas:!1}))},a.set(l,d));return this.series.set(t,{layerState:d,seriesConfig:e,bringToFront:n}),d.seriesIds.push(t),d.group.appendChild(i),d.group}changeGroup(e){var t;const{internalId:i,contentGroup:n}=e,o=e.bringToFront(),s=this.getGroupType(e,o),r=this.series.get(i),a=r?this.getGroupType(r.seriesConfig,r.bringToFront):void 0,l=this.getGroupIndex(e),d=this.lookupIdx(l),c=null===(t=this.groups.get(s))||void 0===t?void 0:t.get(d);if(a!==s||!0!==(null===c||void 0===c?void 0:c.seriesIds.includes(i)))return this.series.has(i)&&this._releaseGroup({internalId:i,contentGroup:n,type:a}),this.requestGroup(e)}releaseGroup(e){const{internalId:t,contentGroup:i}=e,n=this.getGroupType(e,e.bringToFront());this._releaseGroup({internalId:t,contentGroup:i,type:n})}_releaseGroup(e){var t;const{internalId:i,contentGroup:n,type:o}=e;if(!this.series.has(i))throw new Error("AG Charts - series doesn't have an allocated layer: ".concat(i));const s=null===(t=this.series.get(i))||void 0===t?void 0:t.layerState;var r,a;(s&&(s.seriesIds=s.seriesIds.filter(e=>e!==i),n.remove()),0===(null===s||void 0===s?void 0:s.seriesIds.length))?(s.group.remove(),null===(r=this.groups.get(s.type))||void 0===r||r.delete(s.id),null===(a=this.groups.get(o))||void 0===a||a.delete(i)):null!=s&&s.seriesIds.length>0&&(s.group.zIndex=this.getLowestSeriesZIndex(s.seriesIds));this.series.delete(i)}updateLayerCompositing(){for(const e of this.groups.values())for(const t of e.values()){const{group:e,seriesIds:i}=t;let n;if(0===i.length)n=!1;else if(i.length>1)n=!0;else{const e=this.series.get(i[0]);n=!0===(null===e||void 0===e?void 0:e.seriesConfig.renderToOffscreenCanvas())}e.renderToOffscreenCanvas=n,e.zIndex=this.getLowestSeriesZIndex(i)}}lookupIdx(e){return"normal"===this.mode?e:"string"!==typeof e||(e=Number(e.split("-").at(-1)),Number.isFinite(e))?Math.floor(30*za(0,e/this.expectedSeriesCount,1)):0}destroy(){for(const e of this.groups.values())for(const t of e.values())t.group.remove();this.groups.clear(),this.series.clear()}getLowestSeriesZIndex(e){let t;for(const n of e){var i;const e=this.series.get(n),o=null!==(i=null===e||void 0===e?void 0:e.seriesConfig.contentGroup.zIndex)&&void 0!==i?i:Nh.ANY_CONTENT;null!=t&&null!=o?t=Hb(t,o)<=0?t:o:t=o}return null!==t&&void 0!==t?t:Nh.ANY_CONTENT}},oA=class extends kh{constructor(){super(...arguments),this.dragAction="drag"}};Ab([ru],oA.prototype,"dragAction",2);var sA=class{constructor(e,t,i,n,o,s){this.chart=e,this.eventsHub=t,this.dataService=i,this.updateService=n,this.zoomManager=o,this.animationManager=s,this.dirtyZoom=!1,this.dirtyDataSource=!1,this.lastAxisZooms=new Map,this.cleanup=new Ta,this.cleanup.register(this.eventsHub.on("data:source-change",()=>this.onDataSourceChange()),this.eventsHub.on("data:load",()=>this.onDataLoad()),this.eventsHub.on("data:error",()=>this.onDataError()),this.updateService.addListener("update-complete",e=>this.onUpdateComplete(e)),this.eventsHub.on("zoom:change-complete",()=>this.onZoomChange()))}destroy(){this.cleanup.flush()}onDataLoad(){this.animationManager.skip(),this.updateService.update(Ku.UPDATE_DATA)}onDataError(){this.updateService.update(Ku.PERFORM_LAYOUT)}onDataSourceChange(){this.dirtyDataSource=!0}onUpdateComplete(e){(e.apiUpdate||this.dirtyZoom||this.dirtyDataSource)&&(e.wasShortcut||this.updateWindow(e))}onZoomChange(){this.dirtyZoom=!0}updateWindow(e){var t,i;if(!this.dataService.isLazy())return;const n=this.getValidAxis();let o,s=!0;if(n){const t=this.zoomManager.getAxisZoom(n.id);o=this.getAxisWindow(n,t),s=this.shouldRefresh(e,n,t)}this.dirtyZoom=!1,this.dirtyDataSource=!1,s&&this.dataService.load({windowStart:null===(t=o)||void 0===t?void 0:t.min,windowEnd:null===(i=o)||void 0===i?void 0:i.max})}getValidAxis(){return this.chart.axes.find(e=>"time"===e.type)}shouldRefresh(e,t,i){if(e.apiUpdate)return!0;if(this.dirtyDataSource)return!0;if(!this.dirtyZoom)return!1;const n=this.lastAxisZooms.get(t.id);return(!n||i.min!==n.min||i.max!==n.max)&&(this.lastAxisZooms.set(t.id,i),!0)}getAxisWindow(e,t){const{domain:i}=e.scale;if(!t||0===i.length||Number.isNaN(Number(i[0])))return;const n=Number(i[1])-Number(i[0]);return{min:new Date(Number(i[0])+n*t.min),max:new Date(Number(i[0])+n*t.max)}}},rA=/^((?!chrome|android).)*safari/i,aA=/Version\/(\d+(\.\d+)?)/,lA=/Chrome/,dA=/Chrome\/(\d+)/,cA=/Edg/,uA=/OPR/;var hA=new Set(["map-shape-background","map-line-background"]),pA=class{constructor(e,t,i,n,o,s,r){this.chartLike=e,this.overlays=t,this.eventsHub=i,this.dataService=n,this.localeManager=o,this.animationManager=s,this.domManager=r,this.cleanup=new Ta,this.overlayElem=this.domManager.addChild("canvas-overlay","overlay"),this.overlayElem.role="status",this.overlayElem.ariaAtomic="false",this.overlayElem.ariaLive="polite",this.overlayElem.classList.toggle(hI),this.cleanup.register(this.eventsHub.on("layout:complete",e=>this.onLayoutComplete(e)))}destroy(){this.cleanup.flush(),this.domManager.removeChild("canvas-overlay","overlay")}onLayoutComplete(e){let{series:{rect:t}}=e;const i=this.dataService.isLoading(),n=this.chartLike.series.some(e=>e.hasData),o=this.chartLike.series.some(e=>e.visible&&!hA.has(e.type));this.overlays.darkTheme?this.overlayElem.classList.add(pI):this.overlayElem.classList.remove(pI),this.overlayElem.style.left="".concat(t.x,"px"),this.overlayElem.style.top="".concat(t.y,"px"),this.overlayElem.style.width="".concat(t.width,"px"),this.overlayElem.style.height="".concat(t.height,"px");const s=i,r=!i&&!n,a=n&&!o,l=this.overlays.unsupportedBrowser.enabled&&function(){const{userAgent:e}=Pr("navigator");if(rA.test(e)){const t=aA.exec(e);if(null==t)return!1;const i=Number.parseFloat(t[1]),n=Math.floor(i)>16;return n||jr.warnOnce("Unsupported Safari version: ".concat(i,"; ").concat(e)),!n}if(lA.test(e)&&!cA.test(e)&&!uA.test(e)){const t=dA.exec(e);if(null==t)return!1;const i=Number.parseInt(t[1],10),n=i>126;return n||jr.warnOnce("Unsupported Chrome version: ".concat(i,"; ").concat(e)),!n}return!1}();s?this.showOverlay(this.overlays.loading,t):this.hideOverlay(this.overlays.loading),r?this.showOverlay(this.overlays.noData,t):this.hideOverlay(this.overlays.noData),a?this.showOverlay(this.overlays.noVisibleSeries,t):this.hideOverlay(this.overlays.noVisibleSeries),l?this.showOverlay(this.overlays.unsupportedBrowser,t):this.hideOverlay(this.overlays.unsupportedBrowser);const d=s||r||a||l;Zp(this.overlayElem,"aria-hidden",!d)}showOverlay(e,t){if(!e.enabled)return;const i=e.getElement(this.chartLike,this.animationManager,this.localeManager,t);this.overlayElem.appendChild(i)}hideOverlay(e){e.removeElement(()=>{this.overlayElem.innerText="\xa0"},this.animationManager)}},gA=Cr.create(!0,"opts"),mA=class e extends Kx{constructor(e,t){var i,n,o,s,r,a,l,d,c,u;super(),this.id=xm(this),this.seriesRoot=new jx({name:"".concat(this.id,"-series-root"),zIndex:bp.SERIES_LAYER}),this.annotationRoot=new jx({name:"".concat(this.id,"-annotation-root"),zIndex:bp.SERIES_ANNOTATION}),this.titleGroup=new Gx({name:"titles",zIndex:bp.SERIES_LABEL}),this.debug=Cr.create(),this.extraDebugStats={},this.data=jk.empty(),this._firstAutoSize=!0,this._autoSizeNotify=new _p,this.chartCaptions=new zC,this.padding=new Tm(20),this.keyboard=new Kk,this.touch=new oA,this.mode="standalone",this.styleNonce=void 0,this.formatter=void 0,this.suppressFieldDotNotation=!1,this.loadGoogleFonts=!1,this.destroyed=!1,this.cleanup=new Ta,this.chartAnimationPhase="initial",this.modulesManager=new uI,this.processors=[],this.queuedUserOptions=[],this.queuedChartOptions=[],this.firstApply=!0,this.syncStatus="init",this.fireEventWrapper=e=>super.fireEvent(e),this.apiUpdate=!1,this._pendingFactoryUpdatesCount=0,this._performUpdateSkipAnimations=!1,this._performUpdateNotify=new _p,this.performUpdateType=Ku.NONE,this.runningUpdateType=Ku.NONE,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new _x,this.clearCallbackCacheOnUpdate=!1,this.updateRequestors={},this.performUpdateTrigger=Ux(e=>{let{count:t}=e;this.destroyed||this.updateMutex.acquire(this.tryPerformUpdate.bind(this,t)).catch(e=>jr.errorOnce(e))}),this._performUpdateSplits={},this._previousSplit=0,this.axes=this.createChartAxes(),this.series=[],this._cachedData=void 0,this.onSeriesNodeClick=e=>{this.fireEvent(e)},this.onSeriesNodeDoubleClick=e=>{this.fireEvent(e)},this.onSeriesVisibilityChange=e=>{this.fireEvent(e)},this.seriesGroupingChanged=e=>{if(!(e instanceof CI))return;const{series:t,seriesGrouping:i}=e;if(t.contentGroup.isRoot())return;const n=this.seriesLayerManager.changeGroup({internalId:t.internalId,type:t.type,contentGroup:t.contentGroup,bringToFront:()=>t.bringToFront(),renderToOffscreenCanvas:()=>t.renderToOffscreenCanvas(),seriesGrouping:i});null!=n&&t.attachSeries(n,this.seriesRoot,this.annotationRoot)},this.chartOptions=e;const h=null===t||void 0===t?void 0:t.scene,p=null!==(i=null!==(n=null===t||void 0===t?void 0:t.container)&&void 0!==n?n:e.processedOptions.container)&&void 0!==i?i:void 0,g=null!==(o=null===t||void 0===t?void 0:t.styleContainer)&&void 0!==o?o:e.specialOverrides.styleContainer;h&&(this._firstAutoSize=!1,this._lastAutoSize=[h.width,h.height,h.pixelRatio]);const m=new Gx({name:"root"});m.visible=!1,m.append(this.seriesRoot),m.append(this.annotationRoot),m.append(this.titleGroup),this.titleGroup.append(this.title.node),this.titleGroup.append(this.subtitle.node),this.titleGroup.append(this.footnote.node),this.tooltip=new JI,this.seriesLayerManager=new nA(this.seriesRoot),this.mode=null!==(s=e.userOptions.mode)&&void 0!==s?s:this.mode,this.styleNonce=e.processedOptions.styleNonce;const f=this.ctx=new Ek(this,{chartType:this.getChartType(),scene:h,root:m,container:p,styleContainer:g,domMode:e.optionMetadata.domMode,withDragInterpretation:null===(r=e.optionMetadata.withDragInterpretation)||void 0===r||r,syncManager:new _k(this),fireEvent:e=>this.fireEvent(e),updateCallback:(e,t)=>this.update(e,t),updateMutex:this.updateMutex});"sparkline"===e.optionMetadata.presetType&&(f.highlightManager.unhighlightDelay=0,f.tooltipManager.removeDelay=0),this.cleanup.register(f.eventsHub.on("dom:resize",()=>this.parentResize(f.domManager.containerSize))),this.overlays=new mI,null!==(a=(u=this.overlays.loading).renderer)&&void 0!==a||(u.renderer=()=>function(e,t){const{animationDuration:i}=_S.add,n=i*t,o=zr("div","".concat(hI,"--loading"),{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100%",boxSizing:"border-box",font:"13px Verdana, sans-serif",userSelect:"none",animation:"ag-charts-loading ".concat(n,"ms linear 50ms both")}),s=zr("span",{width:"45px",height:"40px",backgroundImage:["linear-gradient(#0000 calc(1 * 100% / 6), #ccc 0 calc(3 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(2 * 100% / 6), #ccc 0 calc(4 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(3 * 100% / 6), #ccc 0 calc(5 * 100% / 6), #0000 0)"].join(""),backgroundSize:"10px 400%",backgroundRepeat:"no-repeat",animation:"ag-charts-loading-matrix 1s infinite linear"}),r=zr("p",{marginTop:"1em"});r.innerText=e;const a=zr("div","".concat(hI,"__loading-background"),{position:"absolute",inset:"0",opacity:"0.5",zIndex:"-1"}),l=zr("style");return l.innerText=["@keyframes ag-charts-loading { from { opacity: 0 } to { opacity: 1 } }","@keyframes ag-charts-loading-matrix {","0% { background-position: 0% 0%, 50% 0%, 100% 0%; }","100% { background-position: 0% 100%, 50% 100%, 100% 100%; }","}"].join(" "),o.replaceChildren(l,s,r,a),o}(this.overlays.loading.getText(f.localeManager),f.animationManager.defaultDuration)),this.processors=[new sA(this,f.eventsHub,f.dataService,f.updateService,f.zoomManager,f.animationManager),new pA(this,this.overlays,f.eventsHub,f.dataService,f.localeManager,f.animationManager,f.domManager)],this.highlight=new Pk,this.container=p;const v=this.getModuleContext();this.background=null!==(l=null===(d=da.createBackground)||void 0===d?void 0:d.call(da,v))&&void 0!==l?l:new RC(v),this.foreground=null===(c=da.createForeground)||void 0===c?void 0:c.call(da,v),this.seriesArea=new fI(v),f.domManager.setDataBoolean("animating",!1),f.domManager.setDataNumber("animationTimeMs",0),this.seriesAreaManager=new iA(this.initSeriesAreaDependencies()),this.cleanup.register(f.layoutManager.registerElement(0,e=>{e.layoutBox.shrink(this.padding.toJson()),this.chartCaptions.positionCaptions(e)}),f.eventsHub.on("layout:complete",e=>this.chartCaptions.positionAbsoluteCaptions(e)),f.eventsHub.on("data:load",e=>{this.data=new jk(e.data)}),this.title.registerInteraction(v,"beforebegin"),this.subtitle.registerInteraction(v,"beforebegin"),this.footnote.registerInteraction(v,"afterend"),()=>this.title.destroy(),()=>this.subtitle.destroy(),()=>this.footnote.destroy(),lC.addWindowEvent("page-left",()=>this.destroy()),f.animationManager.addListener("animation-frame",()=>{this.update(Ku.SCENE_RENDER),f.domManager.setDataNumber("animationTimeMs",f.animationManager.getCumulativeAnimationTime())}),f.animationManager.addListener("animation-start",()=>f.domManager.setDataBoolean("animating",!0)),f.animationManager.addListener("animation-stop",()=>{f.domManager.setDataBoolean("animating",!1),f.domManager.setDataNumber("animationTimeMs",f.animationManager.getCumulativeAnimationTime())}),f.eventsHub.on("zoom:change-complete",()=>{for(const i of this.series){var e;null===(e=i.animationState)||void 0===e||e.transition("updateData")}const t="initial"!==this.chartAnimationPhase;this.update(Ku.PERFORM_LAYOUT,{forceNodeDataRefresh:!0,skipAnimations:t})})),this.parentResize(f.domManager.containerSize)}static getInstance(t){return e.chartsInstances.get(t)}get canvasElement(){return this.ctx.scene.canvas.element}download(e,t){this.ctx.scene.download(e,t)}getCanvasDataURL(e){return this.ctx.scene.getDataURL(e)}toSVG(){return this.ctx.scene.toSVG()}get seriesAreaBoundingBox(){return this.seriesAreaManager.bbox}getOptions(){var e;return null!==(e=this.queuedUserOptions.at(-1))&&void 0!==e?e:this.chartOptions.userOptions}getChartOptions(){var e;return null!==(e=this.queuedChartOptions.at(-1))&&void 0!==e?e:this.chartOptions}isDataTransactionSupported(){return!0}overrideFocusVisible(e){var t;null===(t=this.seriesAreaManager.focusIndicator)||void 0===t||t.overrideFocusVisible(e)}fireEvent(e){Cp(this,this.fireEventWrapper,e)}initSeriesAreaDependencies(){const{ctx:e,tooltip:t,highlight:i,overlays:n,seriesRoot:o,mode:s}=this,r=this.getChartType();return{fireEvent:this.fireEvent.bind(this),getUpdateType:()=>this.performUpdateType,getTooltipContent:(e,t,i,n)=>this.getTooltipContent(e,t,i,n),chartType:r,ctx:e,tooltip:t,highlight:i,overlays:n,seriesRoot:o,mode:s}}getModuleContext(){return this.ctx}getTooltipContent(e,t,i,n){const o="aria-label"===n||!1!==e.properties.tooltip.enabled?e.getTooltipContent(t,i):void 0,s=null==o?[]:[o];if("shared"!==this.tooltip.mode||1===this.series.length)return s;const r=e.getCategoryValue(t);return null==r?s:this.series.flatMap(t=>{if(t===e)return s;if(!t.isEnabled()||!1===t.properties.tooltip.enabled)return[];const i=t.datumIndexForCategoryValue(r),n=null==i?void 0:t.getTooltipContent(i,void 0);return null==n?[]:[n]})}getCaptionText(){return[this.title,this.subtitle,this.footnote].filter(e=>e.enabled&&e.text).map(e=>e.text).join(". ")}getAriaLabel(){return this.ctx.localeManager.t("ariaAnnounceChart",{seriesCount:this.series.length})}refreshSeriesUserVisibility(e,t){for(let n=0;n<this.series.length;n++){var i;const o=this.series[n],s=null===(i=e.processedOptions.series)||void 0===i?void 0:i[n];(t.identifiers.has(o.id)||t.indices.has(n))&&void 0!==s&&"visible"in s&&(s.visible=o.visible)}}resetAnimations(){this.chartAnimationPhase="initial";for(const e of this.series)e.resetAnimation(this.chartAnimationPhase);for(const e of this.axes)e.resetAnimation(this.chartAnimationPhase);this.animationRect=void 0,this.ctx.animationManager.reset()}skipAnimations(){this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0}detachAndClear(){this.container=void 0,this.ctx.scene.clearCanvas()}destroy(e){var t;if(this.destroyed)return;const i=null===e||void 0===e?void 0:e.keepTransferableResources;let n;this.performUpdateType=Ku.NONE,this.cleanup.flush();for(const o of this.processors)o.destroy();return this.overlays.destroy(),this.modulesManager.destroy(),this.background.destroy(),null===(t=this.foreground)||void 0===t||t.destroy(),this.seriesArea.destroy(),i?(this.ctx.scene.strip(),n={container:this.container,scene:this.ctx.scene}):(this.ctx.scene.destroy(),this.container=void 0),this.destroySeries(this.series),this.seriesLayerManager.destroy(),this.axes.destroy(),this.animationRect=void 0,this.ctx.destroy(),this.destroyed=!0,Object.freeze(this),n}requestFactoryUpdate(e){this.destroyed||(this._pendingFactoryUpdatesCount++,this.updateMutex.acquire(async()=>{if(!this.destroyed)try{await e(this)}finally{this.destroyed||this._pendingFactoryUpdatesCount--}}).catch(e=>jr.errorOnce(e)))}clearCallbackCache(){this.ctx.callbackCache.invalidateCache();for(const e of this.series)e.resetDatumCallbackCache()}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ku.FULL,t=arguments.length>1?arguments[1]:void 0;if(this.destroyed)return;const{forceNodeDataRefresh:i=!1,skipAnimations:n,seriesToUpdate:o=this.series,newAnimationBatch:s,apiUpdate:r=!1,clearCallbackCache:a=!1}=null!==t&&void 0!==t?t:{};if(this.apiUpdate=r,this.ctx.widgets.seriesWidget.setDragTouchEnabled("none"!==this.touch.dragAction),i)for(const d of this.series)d.markNodeDataDirty();for(const d of o)this.seriesToUpdate.add(d);if(n&&(this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),s&&this.ctx.animationManager.isActive()&&(this._performUpdateSkipAnimations=!0),(e===Ku.FULL||a)&&(this.clearCallbackCacheOnUpdate=!0),this.debug.check()){var l;let t=null!==(l=new Error("Stack trace for update tracking").stack)&&void 0!==l?l:"<unknown>";t=t.replaceAll(/\([^)]*/g,""),this.updateRequestors[t]=e}e<this.performUpdateType&&(this.performUpdateType=e,this.ctx.domManager.setDataBoolean("updatePending",!0),this.performUpdateTrigger.schedule(null===t||void 0===t?void 0:t.backOffMs))}updateSplits(e){var t;const i=this._performUpdateSplits;null!==(t=i[e])&&void 0!==t||(i[e]=0),i[e]+=performance.now()-this._previousSplit,this._previousSplit=performance.now()}async tryPerformUpdate(e){try{await this.performUpdate(e)}catch(Ur){jr.error("update error",Ur,Ur.stack)}}async performUpdate(e){var t;const{performUpdateType:i,extraDebugStats:n,_performUpdateSplits:o,ctx:s}=this,r=[...this.seriesToUpdate];switch(this.clearCallbackCacheOnUpdate&&(this.clearCallbackCacheOnUpdate=!1,this.clearCallbackCache()),this.performUpdateType=Ku.NONE,this.seriesToUpdate.clear(),this.runningUpdateType=i,0===this.updateShortcutCount&&i<Ku.SCENE_RENDER&&(s.animationManager.startBatch(this._performUpdateSkipAnimations),s.animationManager.onBatchStop(()=>this.chartAnimationPhase="ready")),this.ctx.scene.updateDebugFlags(),this.debug("Chart.performUpdate() - start",Ku[i]),this._previousSplit=performance.now(),null!==(t=o.start)&&void 0!==t||(o.start=this._previousSplit),i){case Ku.FULL:if(this.checkUpdateShortcut(Ku.FULL))break;this.ctx.updateService.dispatchPreDomUpdate(),this.updateDOM();case Ku.UPDATE_DATA:if(this.checkUpdateShortcut(Ku.UPDATE_DATA))break;this.updateData(),this.updateSplits("\u2b07\ufe0f");case Ku.PROCESS_DATA:if(this.checkUpdateShortcut(Ku.PROCESS_DATA))break;await this.processData(),this.seriesAreaManager.dataChanged(),this.updateSplits("\ud83d\udcca");case Ku.PROCESS_DOMAIN:if(this.checkUpdateShortcut(Ku.PROCESS_DOMAIN))break;await this.processDomains(),this.updateSplits("\u26f0\ufe0f");case Ku.PERFORM_LAYOUT:if(await this.checkFirstAutoSize(),this.checkUpdateShortcut(Ku.PERFORM_LAYOUT))break;await this.processLayout(),this.updateSplits("\u2316");case Ku.SERIES_UPDATE:if(this.checkUpdateShortcut(Ku.SERIES_UPDATE))break;this.seriesRoot.renderToOffscreenCanvas="cutout"===this.highlight.drawingMode,await this.updateSeries(r),this.updateAriaLabels(),this.seriesLayerManager.updateLayerCompositing(),this.updateSplits("\ud83e\udd14");case Ku.PRE_SCENE_RENDER:if(this.checkUpdateShortcut(Ku.PRE_SCENE_RENDER))break;s.updateService.dispatchPreSceneRender(),this.updateSplits("\u2196");case Ku.SCENE_RENDER:if(this.checkUpdateShortcut(Ku.SCENE_RENDER))break;s.animationManager.endBatch(),n.updateShortcutCount=this.updateShortcutCount,s.scene.render({debugSplitTimes:o,extraDebugStats:n,seriesRect:this.seriesRect}),this.extraDebugStats={};for(const e of Object.keys(o))delete o[e];this.ctx.domManager.incrementDataCounter("sceneRenders"),this.ctx.domManager.postRenderUpdate();case Ku.NONE:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=!1,s.animationManager.endBatch()}this.destroyed||(s.updateService.dispatchUpdateComplete(this.apiUpdate,this.updateShortcutCount>0),this.apiUpdate=!1,this.ctx.domManager.setDataBoolean("updatePending",!1),this.runningUpdateType=Ku.NONE,this.syncStatus="ready"),this._performUpdateNotify.notify();const a=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:ja(a-o.start),count:e,performUpdateType:Ku[i]})}updateThemeClassName(){const e="ag-charts-theme-",t=["".concat(e,"default"),"".concat(e,"default-dark")];let i=t[0],n=!1,{theme:o}=this.chartOptions.processedOptions;for(;"string"!==typeof o&&null!=o;)o=o.baseTheme;"string"===typeof o&&(i=o.replace("ag-",e),n=o.includes("-dark")),t.includes(i)||(i=n?t[1]:t[0]),this.ctx.domManager.setThemeClass(i)}updateDOM(){this.updateThemeClassName();const{enabled:e,tabIndex:t}=this.keyboard;this.ctx.domManager.setTabGuardIndex(e?null!==t&&void 0!==t?t:0:-1),this.ctx.domManager.setThemeParameters(this.chartOptions.themeParameters)}updateAriaLabels(){this.ctx.domManager.updateCanvasLabel(this.getAriaLabel())}checkUpdateShortcut(e){return!!this.destroyed||(this.updateShortcutCount>3?(jr.warn("exceeded the maximum number of simultaneous updates (".concat(4,"), discarding changes and rendering"),this.updateRequestors),!1):this.performUpdateType<=e&&(this.updateShortcutCount++,!0))}async checkFirstAutoSize(){if(null!=this.width&&null!=this.height);else if(!this._lastAutoSize){await this._autoSizeNotify.waitForCompletion(500)||this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}}createChartAxes(){return new PC}onAxisChange(e,t){null==t&&0===e.length||this.ctx.axisManager.updateAxes(null!==t&&void 0!==t?t:[],e)}onSeriesChange(e,t){var i,n,o;const s=null!==(i=null===t||void 0===t?void 0:t.filter(t=>!e.includes(t)))&&void 0!==i?i:[];this.destroySeries(s),null===(n=this.seriesLayerManager)||void 0===n||n.setSeriesCount(e.length);for(const r of e){if(null!==t&&void 0!==t&&t.includes(r))continue;const e=this.seriesLayerManager.requestGroup(r);r.attachSeries(e,this.seriesRoot,this.annotationRoot),r.chart={},Object.defineProperty(r.chart,"mode",{get:()=>this.mode}),Object.defineProperty(r.chart,"isMiniChart",{get:()=>!1}),Object.defineProperty(r.chart,"flashOnUpdateEnabled",{get:()=>{var e;return!(null===(e=this.modulesManager.getModule("flashOnUpdate"))||void 0===e||!e.enabled)}}),Object.defineProperty(r.chart,"seriesRect",{get:()=>this.seriesRect}),r.resetAnimation(this.chartAnimationPhase),this.addSeriesListeners(r)}null===(o=this.seriesAreaManager)||void 0===o||o.seriesChanged(e)}destroySeries(e){if(e)for(const t of e)t.removeEventListener("seriesNodeClick",this.onSeriesNodeClick),t.removeEventListener("seriesNodeDoubleClick",this.onSeriesNodeDoubleClick),t.removeEventListener("groupingChanged",this.seriesGroupingChanged),t.destroy(),this.seriesLayerManager.releaseGroup(t),t.detachSeries(void 0,this.seriesRoot,this.annotationRoot),t.chart=void 0}addSeriesListeners(e){this.hasEventListener("seriesNodeClick")&&e.addEventListener("seriesNodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&e.addEventListener("seriesNodeDoubleClick",this.onSeriesNodeDoubleClick),this.hasEventListener("seriesVisibilityChange")&&e.addEventListener("seriesVisibilityChange",this.onSeriesVisibilityChange),e.addEventListener("groupingChanged",this.seriesGroupingChanged)}assignSeriesToAxes(){for(const e of this.axes){let t=function(t){return t.axes[e.direction]===e};e.boundSeries=this.series.filter(t)}}assignAxesToSeries(){for(const t of this.series)for(const i of t.directions){var e;const n=null!==(e=t.getKeyAxis(i))&&void 0!==e?e:i,o=this.axes.findById(n);if(!o)return void jr.warnOnce("no matching axis for direction [".concat(i,"] and id [").concat(n,"]; check series and axes configuration."));t.axes[i]=o}}parentResize(e){var t;if(null==e||null!=this.width&&null!=this.height)return;let{width:i,height:n}=e;const{pixelRatio:o}=e;if(i=Math.floor(i),n=Math.floor(n),0===i&&0===n)return;const[s=0,r=0,a=1]=null!==(t=this._lastAutoSize)&&void 0!==t?t:[];s===i&&r===n&&a===o||(this._lastAutoSize=[i,n,o],this.resize("SizeMonitor",{}))}resize(e,t){var i,n,o,s,r,a;const{scene:l,animationManager:d}=this.ctx,{inWidth:c,inHeight:u,inMinWidth:h,inMinHeight:p,inOverrideDevicePixelRatio:g}=t;this.ctx.domManager.setSizeOptions(null!==h&&void 0!==h?h:this.minWidth,null!==p&&void 0!==p?p:this.minHeight,null!==c&&void 0!==c?c:this.width,null!==u&&void 0!==u?u:this.height);const m=null!==(i=null!==c&&void 0!==c?c:this.width)&&void 0!==i?i:null===(n=this._lastAutoSize)||void 0===n?void 0:n[0],f=null!==(o=null!==u&&void 0!==u?u:this.height)&&void 0!==o?o:null===(s=this._lastAutoSize)||void 0===s?void 0:s[1],v=null!==(r=null!==g&&void 0!==g?g:this.overrideDevicePixelRatio)&&void 0!==r?r:null===(a=this._lastAutoSize)||void 0===a?void 0:a[2];if(this.debug("Chart.resize() from ".concat(e),{width:m,height:f,pixelRatio:v,stack:new Error("Stack trace for resize tracking").stack}),null!=m&&null!=f&&ol(m)&&ol(f)&&l.resize(m,f,v)){d.reset();let e=!0;null!=this.width&&null!=this.height||!this._firstAutoSize||(e=!1,this._firstAutoSize=!1),this.update(Ku.PERFORM_LAYOUT,{forceNodeDataRefresh:!0,skipAnimations:e}),this._autoSizeNotify.notify()}}updateData(){this.ctx.eventsHub.emit("data:update",this.data)}async processData(){this.series.some(e=>e.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes());const e=new Hk(this.mode,this.suppressFieldDotNotation,this.ctx.eventsHub),t=[];for(const o of this.series){var i;t.push(null!==(i=o.processData(e))&&void 0!==i?i:Promise.resolve())}for(const o of this.modulesManager.modules()){var n;if(null!==o&&void 0!==o&&o.processData)t.push(null!==(n=o.processData(e))&&void 0!==n?n:Promise.resolve())}this._cachedData=e.execute(this._cachedData),this.updateSplits("\ud83c\udfed"),await Promise.all(t),this.updateLegends()}async processDomains(){for(const e of this.axes)e.processData();for(const e of this.series)e.updatedDomains()}updateLegends(e){for(const t of ca.listModulesByType(ua.Plugin))switch(t.name){case"legend":this.setCategoryLegendData(e);break;case"gradientLegend":this.modulesManager.getModule("gradientLegend").data=this.series.filter(e=>e.properties.showInLegend).flatMap(e=>e.getLegendData("gradient"))}}setCategoryLegendData(e){const{legendManager:t,stateManager:i}=this.ctx;if(e)for(const s of this.series){const t=e.find(e=>e.seriesId===s.id);s.onLegendInitialState("category",t)}const n=this.series.flatMap(e=>{const i=e.getLegendData("category");return t.updateData(e.id,i),i});if(e)i.setStateAndRestore(t,e);else{if("integrated"!==this.mode){const e={},t=new Map(this.series.map(e=>[e.id,e]));for(const{seriesId:i,symbol:{marker:s},label:r}of n.filter(e=>!e.hideInLegend)){var o;if(null==s.fill)continue;const n=t.get(i);if(null===n||void 0===n||!n.hasData)continue;const a=n.type,l=null!==(o=e[a])&&void 0!==o?o:e[a]=new Map;l.has(r.text)?l.get(r.text)!==s.fill&&jr.warnOnce("legend item '".concat(ed(r.text),"' has multiple fill colors, this may cause unexpected behaviour.")):l.set(r.text,s.fill)}}t.update()}}async processLayout(){var e;const t=this.animationRect,{width:i,height:n}=this.ctx.scene,o=this.ctx.layoutManager.createContext(i,n);await this.performLayout(o),!t||null!==(e=this.animationRect)&&void 0!==e&&e.equals(t)||this.ctx.animationManager.skipCurrentBatch(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)}async updateSeries(e){const{seriesRect:t}=this;await Promise.all(e.map(function(e){return e.update({seriesRect:t})}).filter(e=>null!=e)),this.ctx.seriesLabelLayoutManager.updateLabels(this.series.filter(e=>e.visible&&e.usesPlacedLabels),this.padding,this.seriesRect)}async waitForUpdate(e,t){const i=Pr("agChartsDebugTimeout");null==i?(null!==e&&void 0!==e||(e=1e4),null!==t&&void 0!==t||(t=!1)):(e=i,null!==t&&void 0!==t||(t=!0));const n=performance.now();for(;(this._pendingFactoryUpdatesCount>0||this.performUpdateType!==Ku.NONE||this.runningUpdateType!==Ku.NONE||this.ctx.scene.waitingForUpdate()||this.data.hasPendingTransactions())&&!this.destroyed;){if(this._pendingFactoryUpdatesCount>0&&await this.updateMutex.waitForClearAcquireQueue(),(this.performUpdateType!==Ku.NONE||this.runningUpdateType!==Ku.NONE||this.data.hasPendingTransactions())&&await this._performUpdateNotify.waitForCompletion(),performance.now()-n>e){const i="Chart.waitForUpdate() timeout of ".concat(e," reached - first chart update taking too long.");if(t)throw new Error(i);jr.warnOnce(i)}Dp()&&await Kp(),this.ctx.scene.waitingForUpdate()&&await Kp(50)}}filterMiniChartSeries(e){return null===e||void 0===e?void 0:e.filter(e=>!1!==e.showInMiniChart)}applyOptions(e){var t,i,n;e.seriesWithUserVisibility&&this.refreshSeriesUserVisibility(this.chartOptions,e.seriesWithUserVisibility);const o=Ku.PERFORM_LAYOUT,s=this.firstApply?e.processedOptions:e.diffOptions(this.chartOptions);if(null==s||0===Object.keys(s).length)return gA("Chart.applyOptions() - no delta, forcing re-layout",s),void this.update(o,{apiUpdate:!0,newAnimationBatch:!0});const r=this.firstApply?{}:this.chartOptions.processedOptions,a=e.processedOptions;gA("Chart.applyOptions() - applying delta",s);const l=this.applyModules();"listeners"in s&&this.registerListeners(this,s.listeners),tm(this,s,{skip:["type","data","series","listeners","preset","theme","legend.listeners","navigator.miniChart.series","navigator.miniChart.label","locale.localeText","axes","topology","nodes","initialState","styleContainer","formatter"]});let d=!1,c="no-op";null!=s.series&&(c=this.applySeries(this,s.series,null===r||void 0===r?void 0:r.series),d=!0),"replaced"===c&&this.resetAnimations(),this.applyAxes(this,a,r,c,[])&&(d=!0);const{userDeltaKeys:u}=e,h=void 0===u||u.has("data");if(s.data&&h){const t=s.data,i=e.userOptions.data,n=Array.isArray(t)&&t!==i?t.slice():t;this.data=new jk(n)}if("legend"in s&&s.legend&&"listeners"in s.legend&&this.modulesManager.isEnabled("legend")){const e=s.legend.listeners;e?Object.assign(this.legend.listeners,e):this.legend.listeners.clear()}if(null!==(t=s.locale)&&void 0!==t&&t.localeText){var p;this.modulesManager.getModule("locale").localeText=null===(p=s.locale)||void 0===p?void 0:p.localeText}this.chartOptions=e;const g=this.modulesManager.getModule("navigator"),m=this.modulesManager.getModule("zoom");null!==g&&void 0!==g&&g.enabled||null!==m&&void 0!==m&&m.enabled||this.ctx.zoomManager.updateZoom({source:"chart-update",sourceDetail:"internal-applyOptions"},{x:{min:0,max:1}});const f=null===g||void 0===g?void 0:g.miniChart,v=null!==(i=null===(n=a.navigator)||void 0===n||null===(n=n.miniChart)||void 0===n?void 0:n.series)&&void 0!==i?i:a.series;!0===(null===f||void 0===f?void 0:f.enabled)&&null!=v?this.applyMiniChartOptions(f,v,a,r):!1===(null===f||void 0===f?void 0:f.enabled)&&(f.series=[],f.axes=[]),this.ctx.annotationManager.setAnnotationStyles(e.annotationThemes),d||(d=this.shouldForceNodeDataRefresh(s,c));const y=d||l?Ku.FULL:o;if(this.maybeResetAnimations(c),this.shouldClearLegendData(a,r,c)&&this.ctx.legendManager.clearData(),this.applyInitialState(a),this.ctx.formatManager.setFormatter(a.formatter),gA("Chart.applyOptions() - update type",Ku[y],{seriesStatus:c,forceNodeDataRefresh:d}),void 0!==e.optionsProcessingTime){this._performUpdateSplits["\u2699\ufe0f"]=e.optionsProcessingTime;const t=performance.now()-e.optionsProcessingTime;this._performUpdateSplits.start=t}this.update(y,{apiUpdate:!0,forceNodeDataRefresh:d,newAnimationBatch:!0,clearCallbackCache:!0}),this.firstApply=!1}applyInitialState(e){var t,i,n;const{annotationManager:o,chartTypeOriginator:s,historyManager:r,stateManager:a,zoomManager:l}=this.ctx,{initialState:d}=e;if("annotations"in e&&null!==(t=e.annotations)&&void 0!==t&&t.enabled&&null!=(null===d||void 0===d?void 0:d.annotations)){const e=d.annotations.map(e=>xu(e,o.getAnnotationTypeStyles(e.type)));a.setState(o,e)}null!=(null===d||void 0===d?void 0:d.chartType)&&a.setState(s,d.chartType),(null!==(i=e.navigator)&&void 0!==i&&i.enabled||null!==(n=e.zoom)&&void 0!==n&&n.enabled)&&null!=(null===d||void 0===d?void 0:d.zoom)&&a.setState(l,d.zoom),null!=(null===d||void 0===d?void 0:d.legend)&&this.updateLegends(d.legend),null!=d&&r.clear()}maybeResetAnimations(e){if("standalone"===this.mode)switch(e){case"series-grouping-change":case"replaced":this.resetAnimations()}}shouldForceNodeDataRefresh(e,t){const i=!!e.data||"data-change"===t||"replaced"===t,n=["legend","gradientLegend"].some(t=>null!=e[t]),o=null!=e.title&&null!=e.subtitle||null!=e.formatter;return i||n||o}shouldClearLegendData(e,t,i){var n,o,s;const r="replaced"===i||"series-grouping-change"===i||"updated"===i&&((null===(n=e.series)||void 0===n?void 0:n.length)!==(null===(o=t.series)||void 0===o?void 0:o.length)||!(null!==(s=e.series)&&void 0!==s&&s.every((e,i)=>{var n;return e.type===(null===(n=t.series)||void 0===n?void 0:n[i].type)}))),a=null!=t.legend&&!1!==t.legend.enabled&&(null==e.legend||!1===e.legend.enabled);return r||a}applyMiniChartOptions(e,t,i,n){var o,s;const r=null!==(o=null===n||void 0===n||null===(s=n.navigator)||void 0===s||null===(s=s.miniChart)||void 0===s?void 0:s.series)&&void 0!==o?o:null===n||void 0===n?void 0:n.series,a=this.applySeries(e,this.filterMiniChartSeries(t),this.filterMiniChartSeries(r));this.applyAxes(e,i,n,a,["tick","thickness","title","crosshair","gridLine","label"]);const l=e.series;for(const p of l)p.properties.id=void 0;const d=e.axes,c=d.find(e=>e.direction===_u.X);for(const p of d)p.nice=!1,p.gridLine.enabled=!1,p.label.enabled=p===c,p.tick.enabled=!1,p.interactionEnabled=!1;if(null!=c){var u,h;const e=null===(u=i.navigator)||void 0===u?void 0:u.miniChart,t=null===e||void 0===e?void 0:e.label,n=null===e||void 0===e||null===(h=e.label)||void 0===h?void 0:h.interval;if(c.line.enabled=!1,c.label.set(Mu(t,["interval","autoRotate","autoRotateAngle","itemStyler","minSpacing","rotation"])),"grouped-category"===c.type){c.label.enabled=!1,c.label.rotation=0;const{depthOptions:e}=c;if(0===e.length)e.set([{label:{enabled:!0}}]);else for(let t=1;t<e.length;t++)e[t].label.enabled=!1}else"time"!==c.type&&"unit-time"!==c.type&&"ordinal-time"!==c.type||(c.parentLevel.enabled=!1);c.interval.step=null===n||void 0===n?void 0:n.step,c.interval.values=null===n||void 0===n?void 0:n.values,c.interval.minSpacing=null===n||void 0===n?void 0:n.minSpacing,c.interval.maxSpacing=null===n||void 0===n?void 0:n.maxSpacing}}applyModules(){const{type:e}=this.constructor;let t=!1;for(const i of ca.listModulesByType(ua.Plugin)){const n=!i.chartType||i.chartType===e;if(n!==this.modulesManager.isEnabled(i.name)){if(n){const e=i.create(this.getModuleContext());this.modulesManager.addModule(i.name,e),this[i.name]=e}else this.modulesManager.removeModule(i.name),delete this[i.name];t=!0}}return t}initSeriesDeclarationOrder(e){for(let t=0;t<e.length;t++)e[t].setSeriesIndex(t)}applySeries(e,t,i){if(!t)return"no-change";const n=function(e,t,i){const n=(e,t,i)=>{const n=[e];for(const o of lI)o in t&&null!=t[o]&&n.push("".concat(o,"=").concat(t[o]));return null!==i&&void 0!==i&&i.seriesGrouping&&n.push("seriesGrouping.groupId=".concat(null===i||void 0===i?void 0:i.seriesGrouping.groupId)),n.join(";")},o=new Map;let s=0;for(const h of e){var r;const e=n(h.type,h.properties,null===i||void 0===i?void 0:i[s]);o.has(e)||o.set(e,[]),null===(r=o.get(e))||void 0===r||r.push([h,s++])}const a=new Map;s=0;for(const h of t){var l;const e=n(h.type,h,h);a.has(e)||a.set(e,[]),null===(l=a.get(e))||void 0===l||l.push([h,s++])}if(![...o.keys()].some(e=>a.has(e)))return{status:"no-overlap",oldKeys:o.keys(),newKeys:a.keys()};const d=[];for(const[h,p]of a.entries())for(const[e,t]of p){var c,u;const n=o.get(h);if(null==n||n.length<1){d.push({opts:e,targetIdx:t,idx:t,status:"add"}),o.delete(h);continue}const[s,r]=n.shift(),a=Xg(null!==(c=null===i||void 0===i?void 0:i[r])&&void 0!==c?c:{},null!==e&&void 0!==e?e:{}),{groupIndex:l,stackIndex:p}=null!==(u=null===a||void 0===a?void 0:a.seriesGrouping)&&void 0!==u?u:{};null!=l||null!=p?d.push({opts:e,series:s,diff:a,targetIdx:t,idx:r,status:"series-grouping"}):a?d.push({opts:e,series:s,diff:a,targetIdx:t,idx:r,status:"update"}):d.push({opts:e,series:s,targetIdx:t,idx:r,status:"no-op"}),0===n.length&&o.delete(h)}for(const h of o.values())for(const[e,t]of h)d.push({series:e,idx:t,targetIdx:-1,status:"remove"});return{status:"overlap",changes:d}}(e.series,t,i);if("no-overlap"===n.status){gA("Chart.applySeries() - creating new series instances, status: ".concat(n.status),n);const i=t.map(e=>this.createSeries(e));return this.initSeriesDeclarationOrder(i),e.series=i,"replaced"}gA("Chart.applySeries() - matchResult",n);const o=[];let s=!1,r=!1,a=!1;const l=n.changes.toSorted((e,t)=>e.targetIdx-t.targetIdx);for(const c of l){var d;switch(r||(r="series-grouping"===c.status),s||(s=null!=(null===(d=c.diff)||void 0===d?void 0:d.data)),a||(a="no-op"!==c.status),c.status){case"add":{const e=this.createSeries(c.opts);o.push(e),gA("Chart.applySeries() - created new series",e);break}case"remove":gA("Chart.applySeries() - removing series at previous idx ".concat(c.idx),c.series);break;case"no-op":o.push(c.series),gA("Chart.applySeries() - no change to series at previous idx ".concat(c.idx),c.series);break;default:{const{series:e,diff:t,idx:i}=c;gA("Chart.applySeries() - applying series diff previous idx ".concat(i),t,e),this.applySeriesValues(e,t),e.markNodeDataDirty(),o.push(e)}}}return this.initSeriesDeclarationOrder(o),gA("Chart.applySeries() - final series instances",o),e.series=o,r?"series-grouping-change":s?"data-change":a?"updated":"no-op"}applyAxes(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(!("axes"in t)||!t.axes)return!1;o=["type",...o];const s=t.axes;if(!("replaced"===n)&&e.axes.matches(s)&&"cartesian"===cI(i)){for(const t of e.axes){var r,a;const e=Xg(null!==(r=null===(a=i.axes)||void 0===a?void 0:a[t.id])&&void 0!==r?r:{},s[t.id]);gA("Chart.applyAxes() - applying axis diff idx ".concat(t.id),e),tm(t,e,{skip:o})}return!0}return gA("Chart.applyAxes() - creating new axes instances; seriesStatus: ".concat(n)),e.axes=this.createAxes(s,o),!0}createSeries(e){const t=ca.getSeriesModule(e.type).create(this.getModuleContext());return this.applySeriesOptionModules(t,e),this.applySeriesValues(t,e),t}applySeriesOptionModules(e,t){const i=e.createModuleContext(),n=e.getModuleMap();for(const r of ca.listModulesByType(ua.SeriesPlugin)){var o,s;r.name in t&&(null===(o=null===(s=r.seriesTypes)||void 0===s?void 0:s.includes(e.type))||void 0===o||o)&&n.addModule(r.name,r.create(i))}}applySeriesValues(e,t){const i=e.getModuleMap(),{type:n,data:o,listeners:s,seriesGrouping:r,showInMiniChart:a}=t,d=l(t,db);for(const l of ca.listModulesByType(ua.SeriesPlugin))if(l.name in d){const e=i.getModule(l.name);if(e){const t=d[l.name];e.properties.set(t),delete d[l.name]}}null!=d.visible&&(e.visible=d.visible),e.properties.set(d),"data"in t&&e.setOptionsData(null==o?void 0:jk.wrap(o)),"listeners"in t&&(this.registerListeners(e,s),this.series.includes(e)&&this.addSeriesListeners(e)),"seriesGrouping"in t&&(e.seriesGrouping=null==r?void 0:p(p({},e.seriesGrouping),r))}createAxes(e,t){const i=this.createChartAxes(),n=this.getModuleContext();for(const[o,s]of fu(e)){const e=ca.getAxisModule(s.type).create(n);e.id=o,this.applyAxisModules(e,s),tm(e,s,{skip:t}),i.push(e)}return function(e){const t=[],i=[],n=[...rI];for(const o of e)o instanceof sI&&(aI(o.position)?i.push(o.position):t.push(o));for(const o of t){let e;do{e=n.pop()}while(e&&i.includes(e));if(null==e)break;o.position=e}}(i),i}applyAxisModules(e,t){const i=e.createModuleContext(),n=e.getModuleMap();for(const o of ca.listModulesByType(ua.AxisPlugin)){const s=null!=t[o.name];s!==n.isEnabled(o.name)&&(s?(n.addModule(o.name,o.create(i)),e[o.name]=n.getModule(o.name)):(n.removeModule(o.name),delete e[o.name]))}}registerListeners(e,t){if(e.clearEventListeners(),t&&"object"===typeof t)for(const[i,n]of fu(t))null!=n&&e.addEventListener(i,n)}async applyTransaction(e){await this.updateMutex.acquire(()=>{this.data.addTransaction(e),this.update(Ku.UPDATE_DATA,{apiUpdate:!0,skipAnimations:!0})}),await this.waitForUpdate()}};mA.className="Chart",mA.chartsInstances=new WeakMap,Ab([ng({newValue(e){this.destroyed||(this.ctx.domManager.setContainer(e),mA.chartsInstances.set(e,this))},oldValue(e){mA.chartsInstances.delete(e)}})],mA.prototype,"container",2),Ab([ng({newValue(e){this.resize("width option",{inWidth:e})}})],mA.prototype,"width",2),Ab([ng({newValue(e){this.resize("height option",{inHeight:e})}})],mA.prototype,"height",2),Ab([ng({newValue(e){this.resize("minWidth option",{inMinWidth:e})}})],mA.prototype,"minWidth",2),Ab([ng({newValue(e){this.resize("minHeight option",{inMinHeight:e})}})],mA.prototype,"minHeight",2),Ab([ng({newValue(e){this.resize("overrideDevicePixelRatio option",{inOverrideDevicePixelRatio:e})}})],mA.prototype,"overrideDevicePixelRatio",2),Ab([ru],mA.prototype,"padding",2),Ab([ru],mA.prototype,"keyboard",2),Ab([ru],mA.prototype,"touch",2),Ab([ru],mA.prototype,"mode",2),Ab([ru],mA.prototype,"styleNonce",2),Ab([eg("chartCaptions.title")],mA.prototype,"title",2),Ab([eg("chartCaptions.subtitle")],mA.prototype,"subtitle",2),Ab([eg("chartCaptions.footnote")],mA.prototype,"footnote",2),Ab([ru],mA.prototype,"formatter",2),Ab([ru],mA.prototype,"suppressFieldDotNotation",2),Ab([ru],mA.prototype,"loadGoogleFonts",2),Ab([ng({changeValue(e,t){this.onAxisChange(e,t)}})],mA.prototype,"axes",2),Ab([ng({changeValue(e,t){this.onSeriesChange(e,t)}})],mA.prototype,"series",2);var fA=mA;function vA(e){return null!==e&&void 0!==e&&e.up||null!==e&&void 0!==e&&e.down||null!==e&&void 0!==e&&e.neutral?"user-full":null!==e&&void 0!==e&&e.fills||null!==e&&void 0!==e&&e.strokes?"user-indexed":"inbuilt"}var yA={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},bA={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"},xA={x:{position:Fh.BOTTOM,type:{$if:[{$eq:[{$path:["/series/0/direction",void 0]},"horizontal"]},zh.NUMBER,zh.CATEGORY]}},y:{position:Fh.LEFT,type:{$if:[{$eq:[{$path:["/series/0/direction",void 0]},"horizontal"]},zh.CATEGORY,zh.NUMBER]}}},CA={$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isPattern:{$palette:"fill"}},{$isImage:{$value:"$1"}}]},{$palette:"fillFallback"},{$palette:"fill"}]},SA={$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isPattern:{$palette:"fill"}},{$isImage:{$value:"$1"}}]},{$palette:"fillsFallback"},{$palette:"fills"}]},wA={$if:[{$isGradient:{$palette:"fill"}},{$palette:"fillFallback"},{$if:[{$isPattern:{$palette:"fill"}},{$path:["/stroke",{$palette:"fillFallback"},{$palette:"fill"}]},{$palette:"fill"}]}]},MA={$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isPattern:{$palette:"fill"}},{$isImage:{$value:"$1"}}]},[{$palette:"fillFallback"},{$palette:"fillFallback"}],{$palette:"range2"}]},kA={type:"gradient",gradient:"linear",bounds:"item",colorStops:[{color:"black"}],rotation:0,reverse:!1,colorSpace:"rgb"},DA={type:"gradient",gradient:"linear",bounds:"item",colorStops:{$shallow:{$map:[{color:{$value:"$1"}},{$palette:"gradient"}]}},rotation:0,reverse:!1,colorSpace:"rgb"},IA=p(p({},DA),{},{colorStops:{$shallow:[{color:{$mix:[{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},"black",.15]}},{color:{$mix:[{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},"white",.15]}}]}}),AA=p(p({},DA),{},{colorStops:{$map:[{color:{$value:"$1"}},{$path:["/0",void 0,{$palette:"gradients"}]}]}}),LA=e=>p(p({},DA),{},{colorStops:{$shallow:{$if:[{$or:[{$isGradient:{$palette:"".concat(e,".fill")}},{$isPattern:{$palette:"".concat(e,".fill")}},{$isImage:{$palette:"".concat(e,".fill")}}]},{$path:["/colorStops",void 0,{$palette:"".concat(e,".fill")}]},[{color:{$mix:[{$palette:"".concat(e,".fill")},"black",.15]}},{color:{$mix:[{$palette:"".concat(e,".fill")},"white",.15]}}]]}}}),NA={type:"gradient",gradient:"radial",bounds:"item",colorStops:{$shallow:{$map:[{color:{$value:"$1"}},{$palette:"gradient"}]}},rotation:0,reverse:!1,colorSpace:"rgb"},TA=p(p({},NA),{},{reverse:!0}),RA=p(p({},NA),{},{bounds:"series"}),EA=p(p({},NA),{},{bounds:"series",reverse:!0}),PA={type:"gradient",gradient:"conic",bounds:"series",colorStops:{$map:[{color:{$value:"$1"}},{$palette:"gradient"}]},rotation:0,reverse:!1,colorSpace:"rgb"},OA={type:"pattern",pattern:"forward-slanted-lines",width:{$isUserOption:["./height",{$path:"./height"},10]},height:{$isUserOption:["./width",{$path:"./width"},10]},padding:2,fill:{$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isImage:{$palette:"fill"}}]},{$palette:"fillFallback"},{$if:[{$isPattern:{$palette:"fill"}},{$path:["/fill",{$palette:"fillFallback"},{$palette:"fill"}]},{$palette:"fill"}]}]},fillOpacity:1,stroke:wA,strokeOpacity:1,strokeWidth:{$switch:[{$path:"./pattern"},0,[["backward-slanted-lines","forward-slanted-lines","horizontal-lines","vertical-lines"],4]]},backgroundFill:"none",backgroundFillOpacity:1,rotation:0,scale:1},FA=p(p({},OA),{},{stroke:{$if:[{$isGradient:{$palette:"fill"}},{$path:["/0",void 0,{$palette:"fillsFallback"}]},{$if:[{$isPattern:{$palette:"fill"}},{$path:["/stroke",{$path:["/0",void 0,{$palette:"fillsFallback"}]},{$path:["/0",void 0,{$palette:"fills"}]}]},{$path:["/0",void 0,{$palette:"fills"}]}]}]},fill:{$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isImage:{$palette:"fill"}}]},{$path:["/0",void 0,{$palette:"fillsFallback"}]},{$if:[{$isPattern:{$palette:"fill"}},{$path:["/fill",{$path:["/0",void 0,{$palette:"fillsFallback"}]},{$path:["/0",void 0,{$palette:"fills"}]}]},{$path:["/0",void 0,{$palette:"fills"}]}]}]}}),zA={type:"pattern",pattern:"forward-slanted-lines",width:8,height:8,padding:1,fill:"black",fillOpacity:1,backgroundFill:"white",backgroundFillOpacity:1,stroke:"black",strokeOpacity:1,strokeWidth:1,rotation:0,scale:1},BA=p(p({},OA),{},{fill:{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]}}),VA=e=>p(p({},OA),{},{stroke:{$if:[{$isGradient:{$palette:"".concat(e,".fill")}},{$palette:"fillFallback"},{$if:[{$isPattern:{$palette:"".concat(e,".fill")}},{$path:["/stroke",{$palette:"fillFallback"},{$palette:"".concat(e,".fill")}]},{$palette:"".concat(e,".fill")}]}]}}),GA={type:"image",backgroundFill:{$palette:"fillFallback"},backgroundFillOpacity:1,repeat:"no-repeat",fit:"contain",rotation:0},HA={type:"image",backgroundFill:"black",backgroundFillOpacity:1,rotation:0,repeat:"no-repeat",fit:"contain",width:8,height:8};function jA(e){return wu(e,e=>{const t=yg.fromString(e);return[yg.darken(t,.15).toString(),e,yg.lighten(t,.15).toString()]})}var WA={padding:8,cornerRadius:4,fill:{$if:[{$and:[{$eq:[{$path:"./fill/type"},"image"]},{$isUserOption:["./fill/backgroundFill",!1,!0]}]},{backgroundFill:"transparent"},void 0]},border:{enabled:{$isUserOption:["../border",!0,!1]},strokeWidth:1,stroke:{$foregroundOpacity:.08}}};function _A(){return{enabled:!0,unhighlightedItem:{opacity:.6},unhighlightedSeries:{opacity:.2}}}function KA(){return{enabled:!0,unhighlightedSeries:{opacity:.2}}}function UA(){return{enabled:!0,unhighlightedItem:{opacity:.2}}}var YA={border:{enabled:!1,stroke:{$foregroundBackgroundMix:.25},strokeOpacity:1,strokeWidth:1},cornerRadius:4,fillOpacity:1,padding:{$if:[{$eq:[{$path:"./border/enabled"},!0]},5,{$isUserOption:["./fill",5,0]}]}},$A={enabled:!1,key:"x",segments:{$apply:{fill:{$applySwitch:[{$path:"type"},{$path:"../../../fill"},["gradient",DA],["image",GA],["pattern",OA]]},stroke:{$path:"../../../stroke"},fillOpacity:{$path:"../../../fillOpacity"},strokeWidth:{$isUserOption:["./stroke",{$isUserOption:["../../../strokeWidth",{$path:"../../../strokeWidth"},{$if:[{$greaterThan:[{$path:"../../../strokeWidth"},0]},{$path:"../../../strokeWidth"},2]}]},{$path:"../../../strokeWidth"}]},strokeOpacity:{$path:"../../../strokeOpacity"},lineDash:{$path:"../../../lineDash"},lineDashOffset:{$path:"../../../lineDashOffset"}}}},ZA="white",XA={"radial-gauge":!0,"linear-gauge":!0};function qA(e){return!0===XA[e]}var QA=class e{static getDefaultColors(){return{fills:yA,fillsFallback:Object.values(yA),strokes:bA,sequentialColors:jA(yA),divergingColors:[yA.ORANGE,yA.YELLOW,yA.GREEN],hierarchyColors:["#fff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"],secondSequentialColors:yg.interpolate([yg.fromHexString(yA.BLUE),yg.fromHexString("#cbdef5")],8).map(e=>e.toString()),secondDivergingColors:[yA.GREEN,yA.YELLOW,yA.RED],secondHierarchyColors:["#fff","#c5cbd1","#a4b1bd","#8498a9","#648096"],up:{fill:yA.GREEN,stroke:bA.GREEN},down:{fill:yA.RED,stroke:bA.RED},neutral:{fill:yA.GRAY,stroke:bA.GRAY},altUp:{fill:yA.BLUE,stroke:bA.BLUE},altDown:{fill:yA.ORANGE,stroke:bA.ORANGE},altNeutral:{fill:yA.GRAY,stroke:bA.GRAY}}}static getDefaultPublicParameters(){return{accentColor:"#2196f3",axisColor:{$foregroundBackgroundMix:.325},backgroundColor:ZA,borderColor:{$foregroundOpacity:.15},borderRadius:4,chartBackgroundColor:{$ref:"backgroundColor"},chartPadding:20,focusShadow:"0 0 0 3px var(--ag-charts-accent-color)",foregroundColor:"#181d1f",fontFamily:"Verdana, sans-serif",fontSize:Ph,fontWeight:400,gridLineColor:{$foregroundBackgroundMix:.1},popupShadow:"0 0 16px rgba(0, 0, 0, 0.15)",subtleTextColor:{$mix:[{$ref:"textColor"},{$ref:"chartBackgroundColor"},.38]},textColor:{$ref:"foregroundColor"},separationLinesColor:{$foregroundBackgroundMix:.17},chromeBackgroundColor:{$foregroundBackgroundMix:.02},chromeFontFamily:{$ref:"fontFamily"},chromeFontSize:{$ref:"fontSize"},chromeFontWeight:{$ref:"fontWeight"},chromeTextColor:{$ref:"foregroundColor"},chromeSubtleTextColor:{$mix:[{$ref:"chromeTextColor"},{$ref:"backgroundColor"},.38]},buttonBackgroundColor:{$ref:"backgroundColor"},buttonBorder:!0,buttonFontWeight:400,buttonTextColor:{$ref:"textColor"},inputBackgroundColor:{$ref:"backgroundColor"},inputBorder:!0,inputTextColor:{$ref:"textColor"},menuBackgroundColor:{$ref:"chromeBackgroundColor"},menuBorder:!0,menuTextColor:{$ref:"chromeTextColor"},panelBackgroundColor:{$ref:"chromeBackgroundColor"},panelSubtleTextColor:{$ref:"chromeSubtleTextColor"},tooltipBackgroundColor:{$ref:"chromeBackgroundColor"},tooltipBorder:!0,tooltipTextColor:{$ref:"chromeTextColor"},tooltipSubtleTextColor:{$ref:"chromeSubtleTextColor"},crosshairLabelBackgroundColor:{$ref:"foregroundColor"},crosshairLabelTextColor:{$ref:"chartBackgroundColor"}}}static getAxisDefaults(e){let{title:t,time:i}=e;return xu(t&&{title:{enabled:!1,text:"Axis Title",spacing:25,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:Oh.MEDIUM},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}}},i&&{parentLevel:{enabled:!1,label:{enabled:{$path:"../../label/enabled"},border:{enabled:{$or:[{$isUserOption:["../border",!0,!1]},{$path:"../../../label/border/enabled"}]},strokeWidth:{$path:"../../../label/border/strokeWidth"},stroke:{$path:"../../../label/border/stroke"}},fill:{$path:"../../label/fill"},fontSize:{$path:"../../label/fontSize"},fontFamily:{$path:"../../label/fontFamily"},fontWeight:"bold",spacing:{$path:"../../label/spacing"},color:{$path:"../../label/color"},cornerRadius:{$path:"../../label/cornerRadius"},padding:{$path:"../../label/padding"},avoidCollisions:{$path:"../../label/avoidCollisions"}},tick:{enabled:{$path:"../../tick/enabled"},width:{$path:"../../tick/width"},size:{$path:"../../tick/size"},stroke:{$path:"../../tick/stroke"}}}},{label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},spacing:11,color:{$ref:"textColor"},avoidCollisions:!0,cornerRadius:4,border:{enabled:{$isUserOption:["../border",!0,!1]},strokeWidth:1,stroke:{$foregroundOpacity:.08}},padding:{$if:[{$eq:[{$path:"./border/enabled"},!0]},{left:12,right:12,top:8,bottom:8},void 0]}},line:{enabled:!0,width:1,stroke:{$ref:"axisColor"}},tick:{enabled:!1,size:6,width:1,stroke:{$ref:"axisColor"}},gridLine:{enabled:!0,width:1,style:{$apply:[{fillOpacity:1,stroke:{$ref:"gridLineColor"},strokeWidth:{$path:"../../width"},lineDash:[]},[{fillOpacity:1,stroke:{$ref:"gridLineColor"},strokeWidth:{$path:"../../width"},lineDash:[]}]]}},crossLines:{$apply:[{enabled:!0,fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},fillOpacity:.08,strokeWidth:1,label:{fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},padding:5,color:{$ref:"textColor"}}},void 0,{$pathString:["/common/axes/$axisType/crossLines",{axisType:{$path:["../type"]}}]},{$pathString:["/$seriesType/axes/$axisType/crossLines",{seriesType:{$path:["/series/0/type","line"]},axisType:{$path:["../type"]}}]}]}})}getChartDefaults(){return{minHeight:300,minWidth:300,background:{visible:!0,fill:{$ref:"chartBackgroundColor"}},padding:{top:{$ref:"chartPadding"},right:{$ref:"chartPadding"},bottom:{$ref:"chartPadding"},left:{$ref:"chartPadding"}},seriesArea:{border:{enabled:!1,stroke:{$ref:"foregroundColor"},strokeOpacity:1,strokeWidth:1},cornerRadius:4,padding:{$if:[{$eq:[{$path:"./border/enabled"},!0]},5,0]}},keyboard:{enabled:!0},title:{enabled:!1,text:"Title",spacing:{$if:[{$path:"../subtitle/enabled"},10,20]},fontWeight:{$ref:"fontWeight"},fontSize:{$rem:Oh.LARGEST},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},wrapping:"hyphenate",layoutStyle:jh,textAlign:Wh},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:Oh.MEDIUM},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},wrapping:"hyphenate",layoutStyle:jh,textAlign:Wh},footnote:{enabled:!1,text:"Footnote",spacing:20,fontSize:{$rem:Oh.MEDIUM},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"subtleTextColor"},wrapping:"hyphenate",layoutStyle:jh,textAlign:Wh},tooltip:{enabled:!0,darkTheme:Gh,delay:0,pagination:!1,mode:{$if:[{$or:[{$and:[{$isChartType:"cartesian"},{$not:{$hasSeriesType:"bubble"}},{$not:{$hasSeriesType:"scatter"}},{$greaterThan:[{$size:{$path:"/series"}},1]},{$lessThan:[{$size:{$path:"/series"}},4]}]},{$and:[{$isChartType:"polar"},{$greaterThan:[{$size:{$path:"/series"}},1]},{$lessThan:[{$size:{$path:"/series"}},4]}]}]},"shared","single"]}},overlays:{darkTheme:Gh},listeners:{},series:{tooltip:{range:{$path:["/tooltip/range","exact"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","pointer"]},placement:{$path:["/tooltip/position/placement",void 0]},xOffset:{$path:["/tooltip/position/xOffset",0]},yOffset:{$path:["/tooltip/position/yOffset",0]}}}}}}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{overrides:t,palette:i,params:n}=Qg(e),o=this.createChartConfigPerChartType(this.getDefaults()),s={};t&&this.processOverrides(s,t);const r=this.getDefaultColors(),{fills:a,strokes:d,sequentialColors:c}=r,u=l(r,cb);this.palette=Eu(xu(i,p({fills:Object.values(a),strokes:Object.values(d),sequentialColors:Object.values(c)},u))),this.paletteType=vA(i),this.params=xu(n,this.getPublicParameters()),this.config=Eu(Qg(o)),this.overrides=Eu(t),this.presets=Eu(s)}processOverrides(e,t){for(const i of ca.listModulesByType(ua.Series)){const n=i.name,o=t[n];qA(n)&&(e[n]=o,delete t[n])}}createChartConfigPerChartType(e){var t;for(const n of ca.listModulesByType(ua.Chart))for(const o of ca.listModulesByType(ua.Series)){var i;o.chartType===n.name&&(null!==(i=e[t=o.name])&&void 0!==i||(e[t]=n.themeTemplate))}return e}getDefaults(){const t=(t,i)=>{var n;const o={},s=xu({axes:{}},...Array.from(ca.listModulesByType(ua.Plugin),e=>({[e.name]:e.themeTemplate})),null===(n=ca.getChartModule(t))||void 0===n?void 0:n.themeTemplate,this.getChartDefaults());for(const a of i){var r;o[a]=xu(tL(a),null!==(r=o[a])&&void 0!==r?r:s);const{axes:i}=o[a];for(const n of ca.listModulesByType(ua.Axis))i[n.name]=xu(i[n.name],n.chartType&&n.chartType!==t?null:eL(n.name),e.axisDefault[n.name]);"map-shape-background"!==a&&"map-line-background"!==a||delete o[a].series.tooltip}return o},i=Mr([...ca.listModulesByType(ua.Series)],e=>e.chartType||"unknown");return xu(...Object.keys(i).map(e=>{var n,o;return t(e,null!==(n=null===(o=i[e])||void 0===o?void 0:o.map(e=>e.name))&&void 0!==n?n:[])}))}static applyTemplateTheme(e,t,i){if(Ua(e))for(let n=0;n<e.length;n++){const t=e[n];"symbol"===typeof t&&null!==i&&void 0!==i&&i.has(t)&&(e[n]=i.get(t))}else for(const n of Object.keys(e)){const t=e[n];"symbol"===typeof t&&null!==i&&void 0!==i&&i.has(t)&&(e[n]=i.get(t))}}templateTheme(t){const i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?Qg(t):t,n=this.getTemplateParameters();return em(i,e.applyTemplateTheme,void 0,void 0,n),i}getDefaultColors(){return e.getDefaultColors()}getPublicParameters(){return e.getDefaultPublicParameters()}getTemplateParameters(){var e,t,i,n,o,s,r,a,l,d,c,u,h,p,g,m,f,v,y,b,x,C,S,w;const M=new Map;M.set(Gh,!1),M.set(Hh,"#00000080"),M.set(np,"#aaa"),M.set(jh,"block"),M.set(Wh,"center"),M.set(sp,["#797b86","#e24c4a","#f49d2d","#65ab58","#409682","#4db9d2","#5090dc","#3068f9","#e24c4a","#913aac","#d93e64"]),M.set(ip,ZA),M.set(op,yA.BLUE),M.set(ap,yA.BLUE),M.set(rp,yA.BLUE),M.set(lp,ZA),M.set(dp,"#fafafa"),M.set(cp,"#ddd"),M.set(up,"#000"),M.set(hp,"#181d1f"),M.set(pp,"#e35c5c"),M.set(gp,"#e35c5c"),M.set(mp,"#fafafa"),M.set(fp,"#ddd"),M.set(vp,"#000"),M.set(yp,"top");const k=this.getDefaultColors();return M.set(_h,null!==(e=null===(t=this.palette.up)||void 0===t?void 0:t.stroke)&&void 0!==e?e:k.up.stroke),M.set(Uh,null!==(i=null===(n=this.palette.up)||void 0===n?void 0:n.fill)&&void 0!==i?i:k.up.fill),M.set(Kh,null!==(o=null===(s=this.palette.down)||void 0===s?void 0:s.stroke)&&void 0!==o?o:k.down.stroke),M.set(Yh,null!==(r=null===(a=this.palette.down)||void 0===a?void 0:a.fill)&&void 0!==r?r:k.down.fill),M.set($h,null!==(l=null===(d=this.palette.neutral)||void 0===d?void 0:d.stroke)&&void 0!==l?l:k.neutral.stroke),M.set(Zh,null!==(c=null===(u=this.palette.neutral)||void 0===u?void 0:u.fill)&&void 0!==c?c:k.neutral.fill),M.set(Xh,null!==(h=null===(p=this.palette.altUp)||void 0===p?void 0:p.stroke)&&void 0!==h?h:k.up.stroke),M.set(Qh,null!==(g=null===(m=this.palette.altUp)||void 0===m?void 0:m.fill)&&void 0!==g?g:k.up.fill),M.set(qh,null!==(f=null===(v=this.palette.altDown)||void 0===v?void 0:v.stroke)&&void 0!==f?f:k.down.stroke),M.set(Jh,null!==(y=null===(b=this.palette.altDown)||void 0===b?void 0:b.fill)&&void 0!==y?y:k.down.fill),M.set(ep,null!==(x=null===(C=this.palette.altNeutral)||void 0===C?void 0:C.fill)&&void 0!==x?x:k.altNeutral.fill),M.set(tp,null!==(S=null===(w=this.palette.altNeutral)||void 0===w?void 0:w.stroke)&&void 0!==S?S:k.altNeutral.stroke),M}};QA.axisDefault={[zh.NUMBER]:QA.getAxisDefaults({title:!0,time:!1}),[zh.LOG]:QA.getAxisDefaults({title:!0,time:!1}),[zh.CATEGORY]:QA.getAxisDefaults({title:!0,time:!1}),[zh.GROUPED_CATEGORY]:QA.getAxisDefaults({title:!0,time:!1}),[zh.TIME]:QA.getAxisDefaults({title:!0,time:!0}),[zh.UNIT_TIME]:QA.getAxisDefaults({title:!0,time:!0}),[zh.ORDINAL_TIME]:QA.getAxisDefaults({title:!0,time:!0}),[Bh.ANGLE_CATEGORY]:QA.getAxisDefaults({title:!1,time:!1}),[Bh.ANGLE_NUMBER]:QA.getAxisDefaults({title:!1,time:!1}),[Bh.RADIUS_CATEGORY]:QA.getAxisDefaults({title:!0,time:!1}),[Bh.RADIUS_NUMBER]:QA.getAxisDefaults({title:!0,time:!1})};var JA=QA;function eL(e){var t,i;let n=null!==(t=null===(i=ca.getAxisModule(e))||void 0===i?void 0:i.themeTemplate)&&void 0!==t?t:{};for(const r of ca.listModulesByType(ua.AxisPlugin)){var o,s;(null===(o=null===(s=r.axisTypes)||void 0===s?void 0:s.includes(e))||void 0===o||o)&&(n=xu({[r.name]:r.themeTemplate},n))}return n}function tL(e){var t,i;let n=null!==(t=null===(i=ca.getSeriesModule(e))||void 0===i?void 0:i.themeTemplate)&&void 0!==t?t:{};for(const r of ca.listModulesByType(ua.SeriesPlugin)){var o,s;(null===(o=null===(s=r.seriesTypes)||void 0===s?void 0:s.includes(e))||void 0===o||o)&&(n=xu({series:{[r.name]:r.themeTemplate}},n))}return n}var iL=new Set(["foreground"]);function nL(e){const t=new Map;for(const[g,{type:m}]of dI)ca.hasModule(g)||(t.has(m)?t.get(m).add(g):t.set(m,new Set([g])));if(0===t.size)return e;function i(e){const i=t.get(ua.Plugin);if(Qa(e)&&i)for(const t of i)t in e&&!0!==e[t].enabled&&delete e[t]}function n(e){const i=t.get(ua.AxisPlugin);if(Qa(e)&&i)for(const t of i)t in e&&!0!==e[t].enabled&&delete e[t]}function o(e){if(Qa(e))for(const o of Object.keys(e)){var i;null!==(i=t.get(ua.Axis))&&void 0!==i&&i.has(o)?delete e[o]:n(e[o])}}function s(e){Qa(e)&&(o(e.axes),i(e),function(e){const i=t.get(ua.SeriesPlugin);if(Qa(e)&&i)for(const t of i)t in e&&delete e[t]}(e.series))}const r=Qg(e.config),a=Qg(e.overrides),l=Qg(e.presets);for(const g of Object.keys(r)){var d;null!==(d=t.get(ua.Series))&&void 0!==d&&d.has(g)?delete r[g]:s(r[g])}if(Qa(a)){const e=a;Qa(e.common)&&(o(e.common.axes),i(e.common));for(const i of Object.keys(e)){var c;"common"!==i&&(null!==(c=t.get(ua.Series))&&void 0!==c&&c.has(i)?delete e[i]:s(e[i]))}}if(Qa(l)){const e=l;for(const n of Object.keys(e)){var u,h,p;null!==(u=t.get(ua.Preset))&&void 0!==u&&u.has(n)||null!==(h=t.get(ua.Series))&&void 0!==h&&h.has(n)?delete e[n]:(i(e[n]),o(null===(p=e[n])||void 0===p?void 0:p.axes))}}return Object.create(e,{config:{value:Eu(r),enumerable:!0},overrides:{value:Qa(a)?Eu(a):a,enumerable:!0},presets:{value:Qa(l)?Eu(l):l,enumerable:!0}})}function oL(e,t,i){const n=wr(function(e,t){var i;const n=new Map,o="axes"in t&&Qa(t.axes)?t.axes:{},s=new Set(Object.values(o).map(e=>null===e||void 0===e?void 0:e.type).filter(Ka)),r=new Set(null===(i=t.series)||void 0===i?void 0:i.map(e=>e.type).filter(Ka));function a(e){n.set(e.name,e)}for(const d of dI.values())if(!ca.hasModule(d.name)&&!iL.has(d.name)&&(!e||!d.chartType||e===d.chartType))switch(d.type){case"chart":break;case"axis":if(s.has(d.name)){for(const e of Object.keys(o))(null===o||void 0===o?void 0:o[e].type)===d.name&&delete o[e];a(d)}break;case"series":r.has(d.name)&&(t.series=t.series.filter(e=>e.type!==d.name),a(d));break;case"plugin":const e=d.name,i=t[e];Qa(i)&&(!1!==i.enabled&&a(d),delete t[e]);break;case"axis:plugin":for(const t of Object.values(o)){const e=d.name;null!==t&&void 0!==t&&t[e]&&(!1!==t[e].enabled&&a(d),delete t[e])}break;case"series:plugin":for(const n of null!==(l=t.series)&&void 0!==l?l:[]){var l;n[d.name]&&(delete n[d.name],a(d))}}for(const d of r){const e=dI.get(d);(null===e||void 0===e?void 0:e.type)!==ua.Series||ca.hasModule(e.name)||n.has(e.name)||(t.series=t.series.filter(t=>t.type!==e.name),a(e))}return Array.from(n.values())}(e,t).concat(i));if(!n.length)return;const o=ca.isIntegrated()?"https://www.ag-grid.com/data-grid/integrated-charts-installation/":"https://www.ag-grid.com/charts/r/module-registry/",s=Mr(n,e=>e.enterprise?"enterprise":"community");if(n.length){var r;const e=ca.isEnterprise()||null!==(r=s.enterprise)&&void 0!==r&&r.length?"enterprise":"community";jr.errorOnce(["required modules are not registered. Check if you have registered the modules:","",ca.isUmd()?"Install and register 'ag-charts-enterprise' before creating the chart.":aL(n.map(sL),e),"","See ".concat(o," for more details.")].join("\n"))}}function sL(e){var t;return null!==(t=e.moduleId)&&void 0!==t?t:e.name}function rL(e){return"    ".concat(e,",")}function aL(e,t){const i=function(e,t){return e.length?"import {\n".concat(e.map(rL).join("\n"),"\n} from 'ag-charts-").concat(t,"';"):null}(["ModuleRegistry"].concat(e),t),n=e.map(rL).join("\n");return"".concat(i,"\n\nModuleRegistry.registerModules([\n").concat(n,"\n]);")}function lL(e,t){const i="axes"in t&&Qa(t.axes),n="series"in t&&Ua(t.series),o=t=>null==e||!t.chartType||t.chartType===e,s=[];for(const r of ca.listModules())if(ca.isModuleType(ua.Plugin,r))o(r)||(delete t[r.name],s.push(r.name));else if(ca.isModuleType(ua.AxisPlugin,r)){if(i&&!o(r)){for(const e of Object.values(t.axes))delete e[r.name];s.push(r.name)}}else if(ca.isModuleType(ua.SeriesPlugin,r)&&n&&!o(r)){for(const e of t.series)delete e[r.name];s.push(r.name)}return s}var dL="#192232",cL={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},uL={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},hL=class extends JA{getDefaultColors(){return{fills:cL,fillsFallback:Object.values(cL),strokes:uL,sequentialColors:jA(cL),divergingColors:[cL.ORANGE,cL.YELLOW,cL.GREEN],hierarchyColors:["#192834","#253746","#324859","#3f596c","#4d6a80"],secondSequentialColors:["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"],secondDivergingColors:[cL.GREEN,cL.YELLOW,cL.RED],secondHierarchyColors:["#192834","#3b5164","#496275","#577287","#668399"],up:{fill:cL.GREEN,stroke:uL.GREEN},down:{fill:cL.RED,stroke:uL.RED},neutral:{fill:cL.GRAY,stroke:uL.GRAY},altUp:{fill:cL.BLUE,stroke:uL.BLUE},altDown:{fill:cL.ORANGE,stroke:uL.ORANGE},altNeutral:{fill:cL.GRAY,stroke:uL.GRAY}}}getPublicParameters(){return p(p({},super.getPublicParameters()),{},{axisColor:{$foregroundBackgroundMix:.737},backgroundColor:dL,borderColor:{$foregroundBackgroundMix:.216},chromeBackgroundColor:{$foregroundBackgroundMix:.07},foregroundColor:"#fff",gridLineColor:{$foregroundBackgroundMix:.257},popupShadow:"0 0 16px rgba(0, 0, 0, 0.33)",subtleTextColor:{$mix:[{$ref:"textColor"},{$ref:"chartBackgroundColor"},.57]},separationLinesColor:{$foregroundBackgroundMix:.44},crosshairLabelBackgroundColor:{$foregroundBackgroundMix:.65}})}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(Gh,!0),e.set(ip,dL),e.set(op,cL.BLUE),e.set(rp,"#fff"),e.set(ap,cL.BLUE),e.set(lp,dL),e.set(dp,"#28313e"),e.set(cp,"#4b525d"),e.set(up,"#fff"),e.set(hp,"#fff"),e.set(mp,"#28313e"),e.set(fp,"#4b525d"),e.set(vp,"#fff"),e}constructor(e){super(e)}},pL={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},gL={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},mL=class extends hL{getDefaultColors(){return p(p({},super.getDefaultColors()),{},{fills:p({},pL),fillsFallback:Object.values(p({},pL)),strokes:p({},gL),sequentialColors:jA(pL),divergingColors:[pL.GREEN,pL.BLUE,pL.RED],secondSequentialColors:["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"],up:{fill:pL.GREEN,stroke:gL.GREEN},down:{fill:pL.RED,stroke:gL.RED},neutral:{fill:pL.BLUE,stroke:gL.BLUE},altUp:{fill:pL.GREEN,stroke:gL.GREEN},altDown:{fill:pL.RED,stroke:gL.RED},altNeutral:{fill:pL.GRAY,stroke:gL.GRAY}})}getPublicParameters(){return p(p({},super.getPublicParameters()),{},{chartPadding:0,gridLineColor:{$foregroundBackgroundMix:.12}})}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(op,pL.BLUE),e.set(ap,pL.BLUE),e.set(jh,"overlay"),e.set(Wh,"left"),e.set(yp,"bottom"),e}},fL={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},vL={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},yL=class extends JA{getDefaultColors(){return p(p({},super.getDefaultColors()),{},{fills:p({},fL),fillsFallback:Object.values(p({},fL)),strokes:p({},vL),sequentialColors:jA(fL),divergingColors:[fL.GREEN,fL.BLUE,fL.RED],up:{fill:fL.GREEN,stroke:vL.GREEN},down:{fill:fL.RED,stroke:vL.RED},neutral:{fill:fL.BLUE,stroke:vL.BLUE},altUp:{fill:fL.GREEN,stroke:vL.GREEN},altDown:{fill:fL.RED,stroke:vL.RED},altNeutral:{fill:fL.GRAY,stroke:vL.GRAY}})}getPublicParameters(){return p(p({},super.getPublicParameters()),{},{chartPadding:0,gridLineColor:{$foregroundBackgroundMix:.06}})}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(op,fL.BLUE),e.set(ap,fL.BLUE),e.set(jh,"overlay"),e.set(Wh,"left"),e.set(yp,"bottom"),e}},bL={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},xL={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},CL=class extends hL{getDefaultColors(){return p(p({},super.getDefaultColors()),{},{fills:bL,fillsFallback:Object.values(bL),strokes:xL,sequentialColors:jA(bL),divergingColors:[bL.ORANGE,bL.YELLOW,bL.GREEN],secondSequentialColors:["#2196f3","#208FEC","#1E88E5","#1C7FDC","#1976d2","#176EC9","#1565c0"],secondDivergingColors:[bL.GREEN,bL.YELLOW,bL.RED],up:{fill:bL.GREEN,stroke:xL.GREEN},down:{fill:bL.RED,stroke:xL.RED},neutral:{fill:bL.GRAY,stroke:xL.GRAY},altUp:{fill:bL.BLUE,stroke:xL.BLUE},altDown:{fill:bL.RED,stroke:xL.RED},altNeutral:{fill:bL.GRAY,stroke:xL.GRAY}})}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(op,bL.BLUE),e.set(ap,bL.BLUE),e}},SL={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},wL={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},ML=class extends JA{getDefaultColors(){return p(p({},super.getDefaultColors()),{},{fills:SL,fillsFallback:Object.values(SL),strokes:wL,sequentialColors:jA(SL),divergingColors:[SL.ORANGE,SL.YELLOW,SL.GREEN],secondSequentialColors:["#2196f3","#329EF4","#42a5f5","#53ADF6","#64b5f6","#7AC0F8","#90caf9"],secondDivergingColors:[SL.GREEN,SL.YELLOW,SL.RED],up:{fill:SL.GREEN,stroke:wL.GREEN},down:{fill:SL.RED,stroke:wL.RED},neutral:{fill:SL.GRAY,stroke:wL.GRAY},altUp:{fill:SL.BLUE,stroke:wL.BLUE},altDown:{fill:SL.RED,stroke:wL.RED},altNeutral:{fill:SL.GRAY,stroke:wL.GRAY}})}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(op,SL.BLUE),e.set(ap,SL.BLUE),e}},kL={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},DL={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff",GRAY:"#eeeeee"},IL=class extends hL{getDefaultColors(){return{fills:kL,fillsFallback:Object.values(kL),strokes:DL,sequentialColors:jA(kL),divergingColors:[kL.BLUE,kL.RED],hierarchyColors:[],secondSequentialColors:[kL.BLUE,kL.PURPLE,kL.MAGENTA,kL.PINK,kL.RED,kL.ORANGE,kL.YELLOW,kL.GREEN],secondDivergingColors:[kL.BLUE,kL.RED],secondHierarchyColors:[],up:{fill:kL.GREEN,stroke:DL.GREEN},down:{fill:kL.RED,stroke:DL.RED},neutral:{fill:kL.GRAY,stroke:DL.GRAY},altUp:{fill:kL.BLUE,stroke:DL.BLUE},altDown:{fill:kL.RED,stroke:DL.RED},altNeutral:{fill:kL.GRAY,stroke:DL.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(op,kL.BLUE),e.set(ap,kL.BLUE),e}},AL={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},LL={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb",GRAY:"#888888"},NL=class extends JA{getDefaultColors(){return p(p({},super.getDefaultColors()),{},{fills:AL,fillsFallback:Object.values(AL),strokes:LL,sequentialColors:jA(AL),divergingColors:[AL.BLUE,AL.RED],hierarchyColors:[],secondSequentialColors:[AL.BLUE,AL.PURPLE,AL.MAGENTA,AL.PINK,AL.RED,AL.ORANGE,AL.YELLOW,AL.GREEN],secondDivergingColors:[AL.BLUE,AL.RED],secondHierarchyColors:[],up:{fill:AL.GREEN,stroke:LL.GREEN},down:{fill:AL.RED,stroke:LL.RED},neutral:{fill:AL.GRAY,stroke:LL.GRAY},altUp:{fill:AL.BLUE,stroke:LL.BLUE},altDown:{fill:AL.RED,stroke:LL.RED},altNeutral:{fill:AL.GRAY,stroke:LL.GRAY}})}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(op,AL.BLUE),e.set(ap,AL.BLUE),e}},TL={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},RL={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},EL=class extends hL{getDefaultColors(){return p(p({},super.getDefaultColors()),{},{fills:p(p({},TL),{},{RED:TL.ORANGE}),fillsFallback:Object.values(p(p({},TL),{},{RED:TL.ORANGE})),strokes:p(p({},RL),{},{RED:RL.ORANGE}),sequentialColors:jA(p(p({},TL),{},{RED:TL.ORANGE})),divergingColors:[TL.ORANGE,TL.YELLOW,TL.GREEN],secondSequentialColors:["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"],secondDivergingColors:[TL.GREEN,TL.YELLOW,TL.ORANGE],up:{fill:TL.GREEN,stroke:RL.GREEN},down:{fill:TL.ORANGE,stroke:RL.ORANGE},neutral:{fill:TL.GRAY,stroke:RL.GRAY},altUp:{fill:TL.BLUE,stroke:RL.BLUE},altDown:{fill:TL.ORANGE,stroke:RL.ORANGE},altNeutral:{fill:TL.GRAY,stroke:RL.GRAY}})}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(op,TL.BLUE),e.set(ap,TL.BLUE),e}},PL={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},OL={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},FL=class extends JA{getDefaultColors(){return p(p({},super.getDefaultColors()),{},{fills:p(p({},PL),{},{RED:PL.ORANGE}),fillsFallback:Object.values(p(p({},PL),{},{RED:PL.ORANGE})),strokes:p(p({},OL),{},{RED:OL.ORANGE}),sequentialColors:jA(p(p({},PL),{},{RED:PL.ORANGE})),divergingColors:[PL.ORANGE,PL.YELLOW,PL.GREEN],secondSequentialColors:["#5090dc","#629be0","#73a6e3","#85b1e7","#96bcea","#a8c8ee","#b9d3f1","#cbdef5"],secondDivergingColors:[PL.GREEN,PL.YELLOW,PL.ORANGE],secondHierarchyColors:[],up:{fill:PL.GREEN,stroke:OL.GREEN},down:{fill:PL.ORANGE,stroke:OL.ORANGE},neutral:{fill:OL.GRAY,stroke:OL.GRAY},altUp:{fill:PL.BLUE,stroke:OL.BLUE},altDown:{fill:PL.ORANGE,stroke:OL.ORANGE},altNeutral:{fill:PL.GRAY,stroke:OL.GRAY}})}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(op,PL.BLUE),e.set(ap,PL.BLUE),e}},zL=Gd("millisecond","second","minute","hour","day","month","year"),BL={unit:pd(zL),step:Od,epoch:Md,utc:Cd};BL.every=Sd;var VL=md(BL,"a time interval object"),GL=p({enabled:Cd,text:Ad,padding:Dd},Cc),HL=hd(p(p({enabled:Cd,type:pd(Gd("line","range")),range:vd(hd((e,t)=>{let{options:i}=t;return"range"===i.type},"crossLine type to be 'range'"),_d(kd),Nd(2,2)),value:vd(hd((e,t)=>{let{options:i}=t;return"line"===i.type},"crossLine type to be 'line'"),kd),label:GL,fill:wd,fillOpacity:Fd},ic),dc),"cross-line options"),jL=p(p({},HL),{},{label:p(p({},GL),{},{position:Gd("top","left","right","bottom","top-left","top-right","bottom-left","bottom-right","inside","inside-left","inside-right","inside-top","inside-bottom","inside-top-left","inside-bottom-left","inside-top-right","inside-bottom-right"),rotation:Dd})}),WL=p(p({enabled:Cd,rotation:Dd,avoidCollisions:Cd,minSpacing:Pd,spacing:Pd,formatter:Ud(Ec),itemStyler:Yd(p(p(p({},Cc),kc),{},{spacing:Dd}))},Cc),kc),_L=p({autoRotate:Cd,autoRotateAngle:Dd,wrapping:Gd("never","always","hyphenate","on-space"),truncate:Cd},WL),KL=p({format:_c},_L),UL=p({format:yd(Ad,Id)},_L),YL={enabled:Cd,width:Pd,size:Pd,stroke:wd},$L={enabled:Cd,label:UL,tick:YL},ZL={values:_d(kd),minSpacing:Pd},XL={reverse:Cd,gridLine:{enabled:Cd,width:Pd,style:Kd({fill:wd,fillOpacity:Pd,stroke:yd(wd,Xd),strokeWidth:Pd,lineDash:_d(Pd)},"a grid-line style object array")},interval:ZL,label:WL,line:{enabled:Cd,width:Pd,stroke:wd},tick:YL,context:()=>!0};XL.layoutConstraints=gd({stacked:pd(Cd),align:pd(Gd("start","end")),unit:pd(Gd("percent","px")),width:pd(Pd)});var qL=p(p({},XL),{},{crossAt:{value:pd(yd(Dd,Md,Ad,_d(Ad))),sticky:Cd},crossLines:Kd(jL,"a cross-line options array"),position:Gd("top","right","bottom","left"),thickness:Pd,maxThicknessRatio:Fd,title:p({enabled:Cd,text:Ec,spacing:Pd,formatter:Ud(Ec)},Cc)});qL.title._enabledFromTheme=gd(Cd);var QL=p(p(p({enabled:Cd},lc),ic),dc);function JL(e,t){const i={enabled:Cd,xOffset:Dd,yOffset:Dd,formatter:Ud(Ad),renderer:Ud(yd(Ad,md({text:Ad,color:wd,backgroundColor:wd,opacity:Fd},"crosshair label renderer result object")))};let n;return e&&(n=p(p({},i),{},{format:t?yd(Ad,md({millisecond:Ad,second:Ad,hour:Ad,day:Ad,month:Ad,year:Ad})):Ad})),p(p({enabled:Cd,snap:Cd,label:null!==n&&void 0!==n?n:i},ic),dc)}function eN(e,t){return{min:vd(e,zd("max")),max:vd(e,Vd("min")),preferredMin:vd(e,zd("preferredMax"),zd("max")),preferredMax:vd(e,Vd("preferredMin"),Vd("min")),nice:Cd,interval:{step:t?yd(Od,zL,VL):Od,values:_d(e),minSpacing:vd(Pd,zd("maxSpacing")),maxSpacing:vd(Pd,Vd("minSpacing"))}}}var tN={step:yd(Od,zL,VL),values:_d(yd(Dd,Md)),minSpacing:vd(Pd,zd("maxSpacing")),maxSpacing:vd(Pd,Vd("minSpacing")),placement:Gd("on","between")},iN=p(p({},qL),{},{type:jd("category"),label:_L,paddingInner:Fd,paddingOuter:Fd,groupPaddingInner:Fd,crosshair:JL(),bandHighlight:QL,interval:p(p({},ZL),{},{placement:Gd("on","between")})}),nN=p(p({},qL),{},{type:jd("grouped-category"),label:_L,crosshair:JL(),bandHighlight:QL,paddingInner:Fd,groupPaddingInner:Fd,depthOptions:Kd({label:p(p({enabled:Cd,avoidCollisions:Cd,wrapping:Gd("never","always","hyphenate","on-space"),truncate:Cd,rotation:Dd,spacing:Dd},Cc),kc),tick:{enabled:Cd,stroke:wd,width:Pd}},"depth options objects array")}),oN=p(p(p({},qL),eN(Dd)),{},{type:jd("number"),label:KL,crosshair:JL(!0)}),sN=p(p(p({},qL),eN(Dd)),{},{type:jd("log"),base:vd(Od,hd(e=>1!==e,"not equal to 1")),label:KL,crosshair:JL(!0)}),rN=p(p(p({},qL),eN(yd(Dd,Md),!0)),{},{type:jd("time"),label:UL,parentLevel:$L,crosshair:JL(!0,!0)}),aN=p(p({},qL),{},{type:jd("unit-time"),unit:yd(VL,zL),label:UL,parentLevel:$L,paddingInner:Fd,paddingOuter:Fd,groupPaddingInner:Fd,crosshair:JL(!0,!0),bandHighlight:QL,min:vd(yd(Dd,Md),zd("max")),max:vd(yd(Dd,Md),Vd("min")),preferredMin:vd(yd(Dd,Md),zd("preferredMax"),zd("max")),preferredMax:vd(yd(Dd,Md),Vd("preferredMin"),Vd("min")),interval:tN}),lN=p(p({},qL),{},{type:jd("ordinal-time"),paddingInner:Fd,paddingOuter:Fd,groupPaddingInner:Fd,label:UL,parentLevel:$L,interval:tN,crosshair:JL(!0,!0),bandHighlight:QL}),dN=p(p(p({},XL),eN(Dd)),{},{type:jd("angle-number"),crossLines:Kd(HL),startAngle:Dd,endAngle:Dd,label:p(p({},WL),{},{orientation:Gd("fixed","parallel","perpendicular"),format:_c})}),cN=p(p({},XL),{},{type:jd("angle-category"),shape:Gd("polygon","circle"),crossLines:Kd(HL),startAngle:Dd,endAngle:Dd,paddingInner:Fd,groupPaddingInner:Fd,label:p(p({},WL),{},{orientation:Gd("fixed","parallel","perpendicular")})});cN.innerRadiusRatio=Fd;var uN=p(p(p({},XL),eN(Dd)),{},{type:jd("radius-number"),shape:Gd("polygon","circle"),positionAngle:Dd,innerRadiusRatio:Fd,crossLines:Kd(p(p({},HL),{},{label:p(p({},GL),{},{positionAngle:Dd})}),"cross-line options"),title:p({enabled:Cd,text:Ec,spacing:Pd,formatter:Ud(Ec)},Cc),label:p(p({},WL),{},{format:_c})}),hN=p(p({},XL),{},{type:jd("radius-category"),positionAngle:Dd,innerRadiusRatio:Fd,paddingInner:Fd,paddingOuter:Fd,groupPaddingInner:Fd,label:WL,crossLines:Kd(p(p({},HL),{},{label:p(p({},GL),{},{positionAngle:Dd})}),"cross-line options"),title:p({enabled:Cd,text:Ec,spacing:Pd,formatter:Ud(Ec)},Cc)}),pN=gc(hc,hc),gN=Yd(p(p(p(p({},ic),lc),dc),{},{marker:$c})),mN=p(p(p(p(p({showInMiniChart:Cd,connectMissingData:Cd,interpolation:iu,label:Xc,styler:gN,marker:Zc,tooltip:eu,shadow:tu},Uc),lc),ic),dc),{},{highlight:pN,segmentation:vc}),fN=p(p(p({},mN),Yc),{},{highlight:pN,type:pd(jd("area")),xKey:pd(Ad),yKey:pd(Ad),xKeyAxis:Ad,yKeyAxis:Ad,xName:Ad,yName:Ad,legendItemName:Ad,stacked:Cd,stackGroup:Ad,normalizedTo:Dd});fN.yFilterKey=gd(Ad);var vN=gc(cc,cc),yN=Yd(p(p(p(p({},lc),ic),dc),{},{cornerRadius:Pd})),bN=p(p(p(p(p({direction:Gd("horizontal","vertical"),showInMiniChart:Cd,cornerRadius:Pd,styler:yN,itemStyler:yN,crisp:Cd,label:p(p({},Xc),{},{placement:Gd("inside-center","inside-start","inside-end","outside-start","outside-end"),spacing:Pd}),errorBar:Qc,shadow:tu,tooltip:eu},Uc),{},{highlight:vN},lc),ic),dc),{},{segmentation:vc});bN.sparklineMode=gd(Cd);var xN=p(p(p({},bN),Yc),{},{highlight:vN,type:pd(jd("bar")),xKey:pd(Ad),yKey:pd(Ad),xKeyAxis:Ad,yKeyAxis:Ad,xName:Ad,yName:Ad,direction:Gd("horizontal","vertical"),grouped:Cd,stacked:Cd,stackGroup:Ad,normalizedTo:Dd,legendItemName:Ad,errorBar:Jc});xN.yFilterKey=gd(Ad),xN.pickOutsideVisibleMinorAxis=gd(Cd),xN.focusPriority=gd(Dd),xN.simpleItemStyler=gd(Sd);var CN=p(p(p({title:Ad,domain:_d(Dd),maxSize:Pd,showInMiniChart:Cd,label:p({placement:Gd("top","right","bottom","left")},Xc),tooltip:eu,styler:Yd(p(p({},Zc),{},{maxSize:Pd})),maxRenderedItems:Dd},Uc),Mu(Zc,["enabled"])),{},{highlight:gc(hc,hc)}),SN=p(p(p({},CN),Yc),{},{type:pd(jd("bubble")),xKey:pd(Ad),yKey:pd(Ad),sizeKey:pd(Ad),labelKey:Ad,xName:Ad,yName:Ad,sizeName:Ad,labelName:Ad,legendItemName:Ad,xKeyAxis:Ad,yKeyAxis:Ad,highlight:gc(hc,hc)});SN.xFilterKey=gd(Ad),SN.yFilterKey=gd(Ad),SN.sizeFilterKey=gd(Ad);var wN=p(p(p(p(p({showInMiniChart:Cd,cornerRadius:Pd,label:Xc,tooltip:eu,shadow:tu},Uc),lc),ic),dc),{},{highlight:gc(hc,hc),areaPlot:Cd,aggregation:Gd("count","sum","mean"),bins:_d(_d(Dd)),binCount:Pd}),MN=p(p(p({},Yc),wN),{},{type:pd(jd("histogram")),xKey:pd(Ad),yKey:Ad,xKeyAxis:Ad,yKeyAxis:Ad,xName:Ad,yName:Ad}),kN=gc(hc,uc),DN=Yd(p(p(p({},ic),dc),{},{marker:$c})),IN=p(p(p(p({title:Ad,showInMiniChart:Cd,connectMissingData:Cd,interpolation:iu,label:Xc,styler:DN,marker:Zc,tooltip:eu,errorBar:Qc},Uc),ic),dc),{},{highlight:kN,segmentation:yc});IN.sparklineMode=gd(Cd);var AN=p(p(p({},IN),Yc),{},{highlight:kN,type:pd(jd("line")),xKey:pd(Ad),yKey:pd(Ad),xKeyAxis:Ad,yKeyAxis:Ad,xName:Ad,yName:Ad,stacked:Cd,stackGroup:Ad,normalizedTo:Dd,legendItemName:Ad,errorBar:Jc});AN.yFilterKey=gd(Ad),AN.pickOutsideVisibleMinorAxis=gd(Cd),AN.focusPriority=gd(Dd);var LN=p(p(p({title:Ad,showInMiniChart:Cd,label:p({placement:Gd("top","right","bottom","left")},Xc),tooltip:eu,errorBar:Qc,styler:Yd(Zc),maxRenderedItems:Dd},Uc),Mu(Zc,["enabled"])),{},{highlight:gc(hc,hc)}),NN=p(p(p({},LN),Yc),{},{type:pd(jd("scatter")),xKey:pd(Ad),yKey:pd(Ad),labelKey:Ad,xName:Ad,yName:Ad,labelName:Ad,legendItemName:Ad,xKeyAxis:Ad,yKeyAxis:Ad,errorBar:Jc,highlight:gc(hc,hc)});NN.xFilterKey=gd(Ad),NN.yFilterKey=gd(Ad),NN.sizeFilterKey=gd(Ad);var TN=gc(hc,hc),RN=p(p(p(p({},Uc),{},{radiusMin:Pd,radiusMax:Pd,rotation:Dd,outerRadiusOffset:Dd,outerRadiusRatio:Fd,hideZeroValueSectorsInLegend:Cd,sectorSpacing:Pd,cornerRadius:Pd,itemStyler:Yd(p(p(p(p({},lc),ic),dc),{},{cornerRadius:Pd})),title:p({enabled:Cd,text:Ad,showInLegend:Cd,spacing:Pd},Cc),calloutLabel:p(p({enabled:Cd,offset:Dd,minAngle:Pd,avoidCollisions:Cd,formatter:Ud(Ec),format:Ad,itemStyler:Yd(p(p({enabled:Cd},kc),Cc))},kc),Cc),sectorLabel:p(p({enabled:Cd,positionOffset:Dd,positionRatio:Fd,formatter:Ud(Ec),format:Ad,itemStyler:Yd(p(p({enabled:Cd},kc),Cc))},kc),Cc),calloutLine:{colors:_d(wd),length:Pd,strokeWidth:Pd,itemStyler:Yd({color:wd,length:Pd,strokeWidth:Pd})},fills:_d(ac),strokes:_d(wd),tooltip:eu,shadow:tu,highlight:TN},dc),Mu(lc,["fill"])),Mu(ic,["stroke"])),EN=p(p(p({},RN),Yc),{},{type:pd(jd("pie")),angleKey:pd(Ad),radiusKey:Ad,calloutLabelKey:Ad,sectorLabelKey:Ad,legendItemKey:Ad,angleName:Ad,radiusName:Ad,calloutLabelName:Ad,sectorLabelName:Ad,highlight:TN});EN.angleFilterKey=gd(Ad),EN.defaultColorRange=gd(_d(_d(wd))),EN.defaultPatternFills=gd(_d(wd)),EN.title._enabledFromTheme=gd(Cd),EN.calloutLabel._enabledFromTheme=gd(Cd),EN.sectorLabel._enabledFromTheme=gd(Cd),EN.angleKeyAxis=gd(Ad),EN.radiusKeyAxis=gd(Ad);var PN=p(p({},RN),{},{innerRadiusOffset:Dd,innerRadiusRatio:Fd,innerCircle:{fill:Ad,fillOpacity:Fd},innerLabels:p(p({spacing:Pd},Cc),kc)}),ON=p(p(p({},PN),EN),{},{type:pd(jd("donut")),innerLabels:Kd(p(p({text:pd(Ad),spacing:Pd},Cc),kc),"inner label options array")});ON.angleFilterKey=gd(Ad);var FN=p({lineStyle:Gd("solid","dashed","dotted")},dc),zN=p(p(p({},lc),ic),dc),BN=p({visible:Cd,locked:Cd,readOnly:Cd,handle:zN},Cc),VN=p({position:Gd("top","center","bottom"),alignment:Gd("left","center","right")},Cc),GN=p({position:Gd("top","inside","bottom"),alignment:Gd("left","center","right")},Cc),HN=p(p(p(p({enabled:Cd,cornerRadius:Pd,formatter:Sd},Cc),lc),ic),dc),jN=p(p({visible:Cd},FN),ic),WN=p(p(p({divider:ic},lc),ic),Cc),_N=p(p(p({handle:zN,statistics:WN},FN),lc),ic),KN=p(p({visible:Cd,locked:Cd,readOnly:Cd,extendStart:Cd,extendEnd:Cd,handle:zN,text:VN},FN),ic),UN=p(p({visible:Cd,locked:Cd,readOnly:Cd,axisLabel:HN,handle:zN,text:VN},FN),ic),YN=p(p({visible:Cd,locked:Cd,readOnly:Cd,extendStart:Cd,extendEnd:Cd,handle:zN,text:GN,background:lc},FN),ic),$N=p({},YN),ZN=p(p({},YN),{},{middle:jN}),XN=p({label:Cc,showFill:Cd,isMultiColor:Cd,strokes:_d(wd),rangeStroke:wd,bands:Gd(4,6,10)},KN),qN=p(p(p({},lc),ic),BN),QN=p(p(p({},lc),ic),BN),JN=p(p(p(p({},lc),ic),BN),{},{background:p(p({},lc),ic)}),eT=p({visible:Cd,locked:Cd,readOnly:Cd,handle:zN},lc),tT=p(p({visible:Cd,locked:Cd,readOnly:Cd,extendStart:Cd,extendEnd:Cd,handle:zN,text:VN,background:lc,statistics:WN},FN),ic),iT={visible:Cd,up:_N,down:_N},nT={enabled:Cd,axesButtons:{enabled:Cd,axes:Gd("x","y","xy")},toolbar:{enabled:Cd,padding:Pd,buttons:Kd(p(p({},Hc),{},{value:Gd("line-menu","fibonacci-menu","text-menu","shape-menu","measurer-menu","line","horizontal-line","vertical-line","parallel-channel","disjoint-channel","fibonacci-retracement","fibonacci-retracement-trend-based","text","comment","callout","note","clear")}),"annotation toolbar buttons array")},optionsToolbar:{enabled:Cd,buttons:_d(yd(md(p(p({},Hc),{},{value:pd(Gd("line-stroke-width","line-style-type","line-color","fill-color","text-color","text-size","delete","settings"))})),md(p(p({},Hc),{},{value:pd(Gd("lock")),checkedOverrides:Hc}))))}};nT.data=gd(xd),nT.xKey=gd(Ad),nT.volumeKey=gd(Ad),nT.snap=gd(Cd);var oT=p(p(p({},lc),ic),{},{opacity:Fd}),sT=p(p(p(p({},lc),ic),dc),{},{cornerRadius:Pd,whisker:p(p({},ic),dc),cap:{lengthRatio:Fd}}),rT=p(p({},sT),{},{opacity:Fd}),aT=Yd(p(p(p(p({},lc),ic),dc),{},{cornerRadius:Pd,whisker:p(p({},ic),dc),cap:{lengthRatio:Fd}})),lT=p(p(p({direction:Gd("horizontal","vertical"),showInMiniChart:Cd,styler:aT,itemStyler:aT,tooltip:eu},Uc),sT),{},{highlight:gc(rT,rT),segmentation:vc}),dT=p(p(p({cornerRadius:Pd,wick:p(p({},ic),dc)},lc),ic),dc),cT=p(p({},dT),{},{opacity:Fd}),uT=p(p({item:{up:dT,down:dT},itemStyler:Yd(p(p(p(p({},lc),ic),dc),{},{cornerRadius:Pd,wick:p(p({},ic),dc)})),showInMiniChart:Cd,tooltip:eu},Uc),{},{highlight:gc(cT,cT)}),hT=p({fills:_d(ac),strokes:_d(wd),label:p({spacing:Pd,maxWidth:Pd},Xc),link:p(p(p({tension:Fd,itemStyler:Yd(p(p(p(p({},lc),ic),dc),{},{tension:Fd}))},lc),ic),dc),node:p(p(p({width:Pd,spacing:Pd,itemStyler:Yd(p(p(p({},lc),ic),dc))},lc),ic),dc),tooltip:eu},Uc),pT=p(p(p(p(p({direction:Gd("horizontal","vertical"),fills:_d(ac),strokes:_d(wd),label:p({spacing:Pd,placement:Gd("before","middle","after")},Xc),stageLabel:p({placement:Gd("before","after"),format:_c},WL),tooltip:eu},Mu(Uc,["showInLegend"])),Mu(lc,["fill"])),Mu(ic,["stroke"])),dc),{},{highlight:pc(uc)}),gT=p(p(p(p({direction:Gd("horizontal","vertical"),fills:_d(ac),strokes:_d(wd),itemStyler:Yd(p(p(p({},lc),ic),dc)),spacingRatio:Fd,crisp:Cd,dropOff:p(p(p({enabled:Cd},lc),ic),dc),stageLabel:p({placement:Gd("before","after"),format:_c},WL),label:Xc,tooltip:eu,shadow:tu},Mu(Uc,["showInLegend"])),Mu(lc,["fill"])),Mu(ic,["stroke"])),dc),mT=p(p({title:Ad,textAlign:Gd("left","center","right"),verticalAlign:Gd("top","middle","bottom"),itemPadding:Pd,itemStyler:Yd(p(p({},lc),ic)),showInMiniChart:Cd,label:qc,tooltip:eu},Uc),ic),fT=p(p({showInMiniChart:Cd,itemStyler:Yd(p(p({},ic),dc)),item:{up:p(p({},ic),dc),down:p(p({},ic),dc)},tooltip:eu},Uc),{},{highlight:gc(uc,uc)}),vT=p(p(p(p({maxStrokeWidth:Pd,itemStyler:Yd(p(p({},ic),dc)),sizeDomain:_d(Pd),label:Xc,tooltip:eu},Uc),ic),dc),{},{highlight:gc(uc,uc)}),yT=p(p({},ic),dc),bT=p(p(p({colorRange:_d(wd),maxSize:Pd,sizeDomain:_d(Pd),label:p({placement:Gd("top","bottom","left","right")},Xc),tooltip:eu},Uc),Mu(Zc,["enabled"])),{},{highlight:gc(hc,hc)}),xT=p(p(p(p(p({colorRange:_d(wd),padding:Pd,itemStyler:Yd(p(p(p({},lc),ic),dc)),label:qc,tooltip:eu},Uc),lc),ic),dc),{},{highlight:gc(hc,hc)}),CT=p(p(p(p({},Uc),lc),ic),dc),ST=Yd(p(p(p(p({},lc),ic),dc),{},{cornerRadius:Pd})),wT=p(p(p(p(p({cornerRadius:Pd,styler:ST,itemStyler:ST,label:Xc,tooltip:eu},Uc),lc),ic),dc),{},{highlight:gc(cc,cc)}),MT=p(p(p(p({direction:Gd("horizontal","vertical"),aspectRatio:Pd,spacing:Pd,reverse:Cd,itemStyler:Yd(p(p(p({},lc),ic),dc)),fills:_d(ac),strokes:_d(wd),label:Xc,stageLabel:p({spacing:Pd,placement:Gd("before","after")},Xc),tooltip:eu,shadow:tu},Uc),Mu(lc,["fill"])),Mu(ic,["stroke"])),dc),kT=p(p(p(p(p({connectMissingData:Cd,marker:Zc,styler:Yd(p(p(p({marker:$c},lc),ic),dc)),label:Xc,tooltip:eu},Uc),lc),ic),dc),{},{highlight:gc(hc,hc)}),DT=p(p(p(p({connectMissingData:Cd,marker:Zc,styler:Yd(p(p({marker:$c},ic),dc)),label:Xc,tooltip:eu},Uc),ic),dc),{},{highlight:gc(hc,uc)}),IT=p(p(p(p(p({cornerRadius:Pd,styler:ST,itemStyler:ST,label:Xc,tooltip:eu},Uc),lc),ic),dc),{},{highlight:gc(cc,cc)}),AT=p(p(p(p(p({cornerRadius:Pd,columnWidthRatio:Fd,maxColumnWidthRatio:Fd,styler:ST,itemStyler:ST,label:Xc,tooltip:eu},Uc),lc),ic),dc),{},{highlight:gc(cc,cc)}),LT=p(p({marker:Zc},ic),dc),NT=p(p({marker:p({enabled:Cd},$c)},ic),dc),TT=p(p({marker:$c},ic),dc),RT=p(p(p(p({showInMiniChart:Cd,connectMissingData:Cd,interpolation:iu,label:p(p({},Xc),{},{placement:Gd("inside","outside"),spacing:Pd}),tooltip:eu,shadow:tu},Uc),lc),LT),{},{item:{low:p({},NT),high:p({},NT)},styler:Yd(p(p({},lc),{},{item:{low:p({},TT),high:p({},TT)}})),highlight:gc(hc,hc),segmentation:vc,invertedStyle:p({enabled:Cd},lc)}),ET=Yd(p(p(p(p({},lc),ic),dc),{},{cornerRadius:Pd})),PT=p(p(p(p(p({direction:Gd("horizontal","vertical"),grouped:Cd,showInMiniChart:Cd,cornerRadius:Pd,styler:ET,itemStyler:ET,label:p(p({},Xc),{},{placement:Gd("inside","outside"),spacing:Pd}),tooltip:eu,shadow:tu},Uc),lc),ic),dc),{},{highlight:gc(cc,cc),segmentation:vc}),OT=p({fills:_d(ac),strokes:_d(wd),label:p(p({},Xc),{},{spacing:Pd,placement:Gd("left","right","center"),edgePlacement:Gd("inside","outside")}),link:p(p(p({itemStyler:Yd(p(p(p({},lc),ic),dc))},lc),ic),dc),node:p(p(p({width:Pd,spacing:Pd,minSpacing:vd(Pd,Bd("spacing")),alignment:Gd("left","center","right","justify"),verticalAlignment:Gd("top","bottom","center"),sort:Gd("data","ascending","descending","auto"),itemStyler:Yd(p(p(p({},lc),ic),dc))},lc),ic),dc),tooltip:eu},Uc),FT=p(p(p(p({fills:_d(ac),strokes:_d(wd),colorRange:_d(wd),sectorSpacing:Pd,cornerRadius:Pd,padding:Pd,itemStyler:Yd(p(p({},lc),ic)),label:p({spacing:Pd},qc),secondaryLabel:qc,tooltip:eu},Mu(Uc,["highlight","showInLegend"])),Mu(lc,["fill"])),Mu(ic,["stroke"])),{},{highlight:{highlightedItem:oT,highlightedBranch:oT,unhighlightedItem:oT,unhighlightedBranch:oT}}),zT=p({fills:_d(ac),strokes:_d(wd),colorRange:_d(wd),itemStyler:Yd(p(p({},lc),ic)),group:p(p({gap:Pd,padding:Pd,cornerRadius:Pd,textAlign:Gd("left","center","right"),interactive:Cd,highlight:{highlightedItem:oT,unhighlightedItem:oT},label:p(p({},Xc),{},{spacing:Pd})},lc),ic),tile:p(p({gap:Pd,padding:Pd,cornerRadius:Pd,textAlign:Gd("left","center","right"),verticalAlign:Gd("top","middle","bottom"),label:p(p({},Xc),{},{spacing:Pd,lineHeight:Pd,minimumFontSize:Pd,wrapping:Gd("never","always","hyphenate","on-space"),overflowStrategy:Gd("ellipsis","hide")}),secondaryLabel:p(p({},Xc),{},{lineHeight:Pd,minimumFontSize:Pd,wrapping:Gd("never","always","hyphenate","on-space"),overflowStrategy:Gd("ellipsis","hide")}),highlight:{highlightedItem:oT,highlightedBranch:oT,unhighlightedItem:oT,unhighlightedBranch:oT}},lc),ic),tooltip:eu},Mu(Uc,["highlight","showInLegend"])),BT=p(p(p({name:Ad,cornerRadius:Pd,itemStyler:Yd(p(p(p(p({},lc),ic),dc),{},{cornerRadius:Pd})),label:p(p({},Xc),{},{placement:Gd("inside-start","inside-center","inside-end","outside-start","outside-end"),spacing:Pd}),tooltip:eu,shadow:tu},lc),ic),dc),VT=p({direction:Gd("horizontal","vertical"),showInMiniChart:Cd,item:{positive:BT,negative:BT,total:BT},line:p(p({enabled:Cd},ic),dc),tooltip:eu},Uc),GT=md({__type:pd(jd("date")),value:yd(Ad,Dd)},"a serializable date object"),HT={width:Pd,height:Pd,grip:Cd,fill:wd,stroke:wd,strokeWidth:Pd,cornerRadius:Pd},jT={enabled:Cd,height:Pd,spacing:Pd,cornerRadius:Dd,mask:{fill:wd,fillOpacity:Fd,stroke:wd,strokeWidth:Pd},minHandle:HT,maxHandle:HT,miniChart:{enabled:Cd,padding:{top:Pd,bottom:Pd},label:p({enabled:Cd,avoidCollisions:Cd,spacing:Pd,format:_c,formatter:Ud(Ec),interval:{minSpacing:Pd,maxSpacing:Pd,values:xd,step:Dd}},Cc),series:kd}},WT=Mu(jL,["type","value","range"]),_T={number:p(p({},Mu(oN,["type","crossLines"])),{},{top:Mu(oN,["type","crossLines","position"]),right:Mu(oN,["type","crossLines","position"]),bottom:Mu(oN,["type","crossLines","position"]),left:Mu(oN,["type","crossLines","position"]),crossLines:WT}),log:p(p({},Mu(sN,["type","crossLines"])),{},{top:Mu(sN,["type","crossLines","position"]),right:Mu(sN,["type","crossLines","position"]),bottom:Mu(sN,["type","crossLines","position"]),left:Mu(sN,["type","crossLines","position"]),crossLines:WT}),category:p(p({},Mu(iN,["type","crossLines"])),{},{top:Mu(iN,["type","crossLines","position"]),right:Mu(iN,["type","crossLines","position"]),bottom:Mu(iN,["type","crossLines","position"]),left:Mu(iN,["type","crossLines","position"]),crossLines:WT}),time:p(p({},Mu(rN,["type","crossLines"])),{},{top:Mu(rN,["type","crossLines","position"]),right:Mu(rN,["type","crossLines","position"]),bottom:Mu(rN,["type","crossLines","position"]),left:Mu(rN,["type","crossLines","position"]),crossLines:WT}),"unit-time":p(p({},Mu(aN,["type","crossLines"])),{},{top:Mu(aN,["type","crossLines","position"]),right:Mu(aN,["type","crossLines","position"]),bottom:Mu(aN,["type","crossLines","position"]),left:Mu(aN,["type","crossLines","position"]),crossLines:WT}),"grouped-category":p(p({},Mu(nN,["type"])),{},{top:Mu(nN,["type","position"]),right:Mu(nN,["type","position"]),bottom:Mu(nN,["type","position"]),left:Mu(nN,["type","position"]),crossLines:WT}),"ordinal-time":p(p({},Mu(lN,["type","crossLines"])),{},{top:Mu(lN,["type","crossLines","position"]),right:Mu(lN,["type","crossLines","position"]),bottom:Mu(lN,["type","crossLines","position"]),left:Mu(lN,["type","crossLines","position"]),crossLines:WT})},KT={"angle-category":p(p({},Mu(cN,["type","crossLines"])),{},{crossLines:Mu(HL,["type"])}),"angle-number":p(p({},Mu(dN,["type","crossLines"])),{},{crossLines:Mu(HL,["type"])}),"radius-category":p(p({},Mu(hN,["type","crossLines"])),{},{crossLines:p(p({},Mu(HL,["type"])),{},{label:p(p({},GL),{},{positionAngle:Dd})})}),"radius-number":p(p({},Mu(uN,["type","crossLines"])),{},{crossLines:p(p({},Mu(HL,["type"])),{},{label:p(p({},GL),{},{positionAngle:Dd})})})},UT={visible:gd(Cd)};function YT(e,t){const i={};for(const n of Reflect.ownKeys(e))i[n]=t(e[n],n,e);return i}var $T=YT({common:p(p({},Kc),{},{navigator:jT,axes:p(p({},_T),KT),annotations:p(p({},nT),{},{line:KN,"horizontal-line":UN,"vertical-line":UN,"disjoint-channel":$N,"parallel-channel":ZN,"fibonacci-retracement":XN,"fibonacci-retracement-trend-based":XN,callout:qN,comment:QN,note:JN,text:BN,arrow:KN,"arrow-up":eT,"arrow-down":eT,"date-range":tT,"price-range":tT,"date-price-range":tT,"quick-date-price-range":iT}),chartToolbar:{enabled:Cd},initialState:{legend:Kd({visible:Cd,seriesId:Ad,itemId:Ad,legendItemName:Ad},"legend state array"),zoom:{rangeX:{start:yd(Dd,GT),end:yd(Dd,GT)},rangeY:{start:yd(Dd,GT),end:yd(Dd,GT)},ratioX:{start:Fd,end:Fd},ratioY:{start:Fd,end:Fd},autoScaledAxes:_d(jd("y"))}}}),line:p(p({},Kc),{},{axes:_T,series:IN,navigator:jT},UT),scatter:p(p(p({},Kc),{},{axes:_T,series:LN,navigator:jT},UT),{},{paired:gd(Cd)}),bubble:p(p({},Kc),{},{axes:_T,series:CN,navigator:jT},UT),area:p(p({},Kc),{},{axes:_T,series:mN,navigator:jT},UT),bar:p(p({},Kc),{},{axes:_T,series:bN,navigator:jT},UT),"box-plot":p(p({},Kc),{},{axes:_T,series:lT,navigator:jT},UT),candlestick:p(p({},Kc),{},{axes:_T,series:uT,navigator:jT},UT),"cone-funnel":p(p({},Kc),{},{axes:_T,series:pT,navigator:jT},UT),funnel:p(p({},Kc),{},{axes:_T,series:gT,navigator:jT},UT),ohlc:p(p({},Kc),{},{axes:_T,series:fT,navigator:jT},UT),histogram:p(p({},Kc),{},{axes:Mu(_T,["category","grouped-category","unit-time","ordinal-time"]),series:wN,navigator:jT},UT),heatmap:p(p({},Kc),{},{axes:_T,series:mT,navigator:jT},UT),waterfall:p(p({},Kc),{},{axes:_T,series:VT,navigator:jT},UT),"range-bar":p(p({},Kc),{},{axes:_T,series:PT,navigator:jT},UT),"range-area":p(p({},Kc),{},{axes:_T,series:RT,navigator:jT},UT),donut:p(p({},Kc),{},{series:PN,navigator:jT},UT),pie:p(p({},Kc),{},{series:RN,navigator:jT},UT),"radar-line":p(p({},Kc),{},{axes:KT,series:DT,navigator:jT},UT),"radar-area":p(p({},Kc),{},{axes:KT,series:kT,navigator:jT},UT),"radial-bar":p(p({},Kc),{},{axes:KT,series:IT,navigator:jT},UT),"radial-column":p(p({},Kc),{},{axes:KT,series:AT,navigator:jT},UT),nightingale:p(p({},Kc),{},{axes:KT,series:wT,navigator:jT},UT),sunburst:p(p({},Kc),{},{series:FT,navigator:jT},UT),treemap:p(p({},Kc),{},{series:zT,navigator:jT},UT),"map-shape":p(p({},Kc),{},{series:xT,navigator:jT},UT),"map-line":p(p({},Kc),{},{series:vT,navigator:jT},UT),"map-marker":p(p({},Kc),{},{series:bT,navigator:jT},UT),"map-shape-background":p(p({},Kc),{},{series:CT,navigator:jT},UT),"map-line-background":p(p({},Kc),{},{series:yT,navigator:jT},UT),sankey:p(p({},Kc),{},{series:OT,navigator:jT},UT),chord:p(p({},Kc),{},{series:hT,navigator:jT},UT),pyramid:p(p({},Kc),{},{series:MT,navigator:jT},UT),"radial-gauge":p(p(p({},Kc),Hu),{},{targets:Mu(Bu,["value"]),tooltip:p(p({},Hu.tooltip),Kc.tooltip)}),"linear-gauge":p(p(p({},Kc),Vu),{},{targets:Mu(zu,["value"]),tooltip:p(p({},Vu.tooltip),Kc.tooltip)})},function e(t,i){if(ll(i))return t;if(qa(t))return yd(t,Xd,ll);if(Qa(t))return yd(md(YT(t,sd in t?t=>Qa(t)?YT(t,e):t:e)),Xd,ll);throw new Error("Invalid theme override value: ".concat(String(t)))}),ZT={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},XT={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#fff653",YELLOW:"#c18aff",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},qT=class extends hL{getDefaultColors(){return{fills:ZT,fillsFallback:Object.values(ZT),strokes:XT,sequentialColors:jA(ZT),divergingColors:[ZT.ORANGE,ZT.YELLOW,ZT.GREEN],hierarchyColors:[],secondSequentialColors:["#0083ff","#0076e6","#0069cc","#005cb3","#004f99","#004280","#003466","#00274c"],secondDivergingColors:[ZT.GREEN,ZT.YELLOW,ZT.RED],secondHierarchyColors:[],up:{fill:ZT.GREEN,stroke:XT.GREEN},down:{fill:ZT.RED,stroke:XT.RED},neutral:{fill:ZT.GRAY,stroke:XT.GRAY},altUp:{fill:ZT.BLUE,stroke:XT.BLUE},altDown:{fill:ZT.ORANGE,stroke:XT.ORANGE},altNeutral:{fill:ZT.GRAY,stroke:XT.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(op,ZT.BLUE),e.set(ap,ZT.BLUE),e}},QT={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},JT={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},eR=class extends JA{getDefaultColors(){return p(p({},super.getDefaultColors()),{},{fills:QT,fillsFallback:Object.values(QT),strokes:JT,sequentialColors:jA(QT),divergingColors:[QT.ORANGE,QT.YELLOW,QT.GREEN],hierarchyColors:[],secondSequentialColors:["#0083ff","#1a8fff","#339cff","#4da8ff","#66b5ff","#80c1ff","#99cdff","#b3daff"],secondDivergingColors:[QT.GREEN,QT.YELLOW,QT.RED],secondHierarchyColors:[],up:{fill:QT.GREEN,stroke:JT.GREEN},down:{fill:QT.RED,stroke:JT.RED},neutral:{fill:QT.GRAY,stroke:JT.GRAY},altUp:{fill:QT.BLUE,stroke:JT.BLUE},altDown:{fill:QT.ORANGE,stroke:JT.ORANGE},altNeutral:{fill:QT.GRAY,stroke:JT.GRAY}})}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(op,QT.BLUE),e.set(ap,QT.BLUE),e}},tR=Am(()=>new JA),iR=Cr.create(!0,"perf"),nR=(e,t,i)=>{iR("[CACHE] ChartTheme",e,t.name,i)},oR={"ag-default-dark":Am(()=>new hL),"ag-sheets-dark":Am(()=>new EL,nR),"ag-polychroma-dark":Am(()=>new IL,nR),"ag-vivid-dark":Am(()=>new qT,nR),"ag-material-dark":Am(()=>new CL,nR),"ag-financial-dark":Am(()=>new mL,nR),"ag-default":tR,"ag-sheets":Am(()=>new FL,nR),"ag-polychroma":Am(()=>new NL,nR),"ag-vivid":Am(()=>new eR,nR),"ag-material":Am(()=>new ML,nR),"ag-financial":Am(()=>new yL,nR)},sR=Am(function(e){if(e instanceof JA)return e;if(!function(e){const{invalid:t}=ud({theme:e},{theme:yd(aR,Id)});for(const i of t)jr.warnOnce(String(i));return 0===t.length}(e))return tR();if(null==e||"string"===typeof e){const t=oR[null!==e&&void 0!==e?e:"ag-default"];if(t)return t();throw new Error("Cannot find theme `".concat(e,"`."))}const{cleared:t,invalid:i}=ud(function(e){if(!Qa(e)||!Qa(e.baseTheme))return e;let t,i,n=e;const o=[];for(;"object"===typeof n;)null!==t&&void 0!==t||(t=n.palette),null!==i&&void 0!==i||(i=n.params),n.overrides&&o.push(n.overrides),n=n.baseTheme;return{baseTheme:n,overrides:xu(...o),params:i,palette:t}}(e),rR,"theme");for(const o of i)jr.warnOnce(String(o));const n=null!==t&&void 0!==t&&t.baseTheme?sR(t.baseTheme):tR();return t?new n.constructor(t):n},nR);var rR={baseTheme:yd(Ad,Id),overrides:$T,params:{accentColor:wd,axisColor:wd,backgroundColor:wd,borderColor:wd,borderRadius:Dd,chartBackgroundColor:wd,chartPadding:Dd,focusShadow:Ad,foregroundColor:wd,fontFamily:xc,fontSize:Dd,fontWeight:yd(Ad,Dd),gridLineColor:wd,popupShadow:Ad,subtleTextColor:wd,textColor:wd,separationLinesColor:wd,chromeBackgroundColor:wd,chromeFontFamily:xc,chromeFontSize:Dd,chromeFontWeight:yd(Ad,Dd),chromeSubtleTextColor:wd,chromeTextColor:wd,buttonBackgroundColor:wd,buttonBorder:Cd,buttonFontWeight:Dd,buttonTextColor:wd,inputBackgroundColor:wd,inputBorder:Cd,inputTextColor:wd,menuBackgroundColor:wd,menuBorder:Cd,menuTextColor:wd,panelBackgroundColor:wd,panelSubtleTextColor:wd,tooltipBackgroundColor:wd,tooltipBorder:Cd,tooltipTextColor:wd,tooltipSubtleTextColor:wd,crosshairLabelBackgroundColor:wd,crosshairLabelTextColor:wd},palette:{fills:_d(ac),strokes:_d(wd),up:{fill:yd(wd,tc),stroke:wd},down:{fill:yd(wd,tc),stroke:wd},neutral:{fill:yd(wd,tc),stroke:wd}}},aR=Gd("ag-default","ag-default-dark","ag-sheets","ag-sheets-dark","ag-polychroma","ag-polychroma-dark","ag-vivid","ag-vivid-dark","ag-material","ag-material-dark","ag-financial","ag-financial-dark");var lR="path",dR="pathArray",cR="default",uR="override",hR="user",pR="userPartial",gR="operation",mR="operationValue",fR="dependency",vR="autoEnable",yR="autoEnableValue",bR="prune",xR="childrenSource";function CR(e){return nl(e)&&e>=0&&e<=1}function SR(e,t){let i=e;for(const n of t){if(!("string"===typeof n&&null!=i&&("object"===typeof i||Array.isArray(i))&&n in i))return!1;i=i[n]}return!0}function wR(e,t){let i=e;for(const n of t){if(!("string"===typeof n&&null!=i&&("object"===typeof i||Array.isArray(i))&&n in i))return;i=i[n]}return i}function MR(e,t,i){const n=t.length;if(0===n)return;let o=e;const s=n-1,r=t[s];for(let a=0;a<s;a++){const e=t[a],i=t[a+1];let n=o[e];null!=n&&Ja(n)||(n=Number.isNaN(Number(i))?{}:[],o[e]=n),o=n}o[r]=i}var kR=/^\d+$/;function DR(e){const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0;for(let n=e.length-1;n>=0;n--){const o=e[n];if(kR.test(o)&&(i++,i>t))return n}return-1}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0);return Number(e[t])}function IR(e,t,i){const n=t.split("/");let o=[...e];t.startsWith("/")&&(o=[],n.shift());let s=!1;for(const r of n){if(".."===r)o.pop(),s||o.pop();else if("."===r)o.pop();else if("$index"===r){const t=DR(e);if(Number.isNaN(t))return AR;o.push("".concat(t))}else if("$prevIndex"===r){const t=DR(e);if(Number.isNaN(t)||Number(t)<=0)return AR;o.push("".concat(Number(t)-1))}else if(r.startsWith("$")){const e=null===i||void 0===i?void 0:i[r.slice(1)];if(null==e)return AR;o.push(e)}else 0!==r.length&&o.push(r);s=".."===r}return o}var AR=Symbol("unresolvable-path"),LR=Symbol("resolved-to-branch");function NR(e,t){if(null==e||"object"!==typeof e||Array.isArray(e))return;if(null!==t&&void 0!==t||(t=Object.keys(e)),0===t.length)return;const i=t[0];return _R.has(i)?{operation:i,values:Array.isArray(e[i])?e[i]:[e[i]]}:void 0}var TR={$cacheMax:function(e,t,i){const[n]=i,o=e.getPathArray(t),s=e.getCachedValue(o,"$cacheMax"),r=e.resolveVertexValue(t,n);if("number"!==typeof r)return s;if("number"!==typeof s)return e.setCachedValue(o,"$cacheMax",r),r;const a=Math.max(s,r);return e.setCachedValue(o,"$cacheMax",a),a}};var RR={$hasSeriesType:{dependencies:ER,resolve:function(e,t,i){const[n]=i,o=e.resolveVertexValue(t,n),s=e.getResolvedPath(["series"]);if(!Array.isArray(s))return!1;for(const r of s)if(r.type===o)return!0;return!1}},$isChartType:{dependencies:ER,resolve:function(e,t,i){const[n]=i,o=e.resolveVertexValue(t,n),s=e.getResolvedPath(["series","0","type"]);if("string"!==typeof s)return!1;const r=ca.getSeriesModule(s);if(null==r)return!1;switch(o){case"cartesian":return"cartesian"===r.chartType;case"polar":return"polar"===r.chartType;case"standalone":return"standalone"===r.chartType}return!1}},$isSeriesType:{dependencies:ER,resolve:function(e,t,i){const[n]=i,o=e.resolveVertexValue(t,n);return e.getResolvedPath(["series","0","type"])===o}}};function ER(e,t,i){const n=e.findVertexAtPath(["series","0","type"]);n&&e.addEdge(t,n,fR)}var PR={$foregroundBackgroundMix:function(e,t,i){const[n]=i,o=e.resolveVertexValue(t,n),s=e.getParamValue("foregroundColor"),r=e.getParamValue("backgroundColor");if("string"===typeof s&&"string"===typeof r&&CR(o))return yg.mix(yg.fromString(s),yg.fromString(r),1-o).toString();Cr.inDevelopmentMode(()=>jr.warnOnce("`$foregroundBackgroundMix` json operation failed on [".concat(String(o),"}}] at [").concat(e.getPathArray(t).join("."),"], expecting a number between 0 and 1.")))},$foregroundOpacity:function(e,t,i){const[n]=i,o=e.resolveVertexValue(t,n),s=e.getParamValue("foregroundColor");if("string"===typeof s&&CR(o)){const e=yg.fromString(s);return new yg(e.r,e.g,e.b,o).toString()}Cr.inDevelopmentMode(()=>jr.warnOnce("`$foregroundOpacity` json operation failed on [".concat(String(o),"}}] at [").concat(e.getPathArray(t).join("."),"], expecting a number between 0 and 1.")))},$interpolate:function(e,t,i){const[n,o]=i,s=e.resolveVertexValue(t,n),r=e.resolveVertexValue(t,o);if(!Ua(s)||!nl(r))return;return yg.interpolate(s.map(e=>yg.fromString(e)),r).map(e=>e.toString())},$isGradient:function(e,t,i){const[n]=i;return $v(e.resolveVertexValue(t,n))},$isImage:function(e,t,i){const[n]=i;return Qv(e.resolveVertexValue(t,n))},$isPattern:function(e,t,i){const[n]=i;return qv(e.resolveVertexValue(t,n))},$mix:function(e,t,i){const[n,o,s]=i,r=e.resolveVertexValue(t,n),a=e.resolveVertexValue(t,o),l=e.resolveVertexValue(t,s),d=e.getPathArray(t),c="`$mix` json operation failed on [".concat(String(r),", ").concat(String(a),", ").concat(String(l),"] at [").concat(d.join("."),"], expecting"),u="".concat(c," two colors and a number between 0 and 1.");if("string"!==typeof a||!CR(l))return void Cr.inDevelopmentMode(()=>jr.warnOnce(u));if("string"===typeof r)try{return yg.mix(yg.fromString(r),yg.fromString(a),l).toString()}catch(m){return void Cr.inDevelopmentMode(()=>jr.warnOnce(u))}if(!$v(r))return void Cr.inDevelopmentMode(()=>jr.warnOnce(u));let h=r.colorStops;try{var g;h=null===(g=h)||void 0===g?void 0:g.map(e=>{let t;return"string"===typeof e.color&&(t=yg.mix(yg.fromString(e.color),yg.fromString(a),l).toString()),p(p({},e),{},{color:t})})}catch(f){return void Cr.inDevelopmentMode(()=>jr.warnOnce("".concat(c," a gradient, a color and a number between 0 and 1.")))}return p(p({},r),{},{colorStops:h})}};var OR={$rem:function(e,t,i){const[n]=i,o=e.getVertexValue(n),s=e.getParamValue("fontSize");if("number"===typeof s&&"number"===typeof o)return Math.round(o*s);Cr.inDevelopmentMode(()=>jr.warnOnce("`$rem` json operation failed on [".concat(String(o),"] at [").concat(e.getPathArray(t).join("."),"], expecting a number.")))}};var FR={$and:function(e,t,i){for(const n of i){if(!e.resolveVertexValue(t,n))return!1}return!0},$eq:function(e,t,i){let n,o=!0;for(const s of i){const i=e.resolveVertexValue(t,s);if(o)n=i,o=!1;else if(i!==n)return!1}return!0},$greaterThan:function(e,t,i){const[n,o]=i;return e.resolveVertexValue(t,n)>e.resolveVertexValue(t,o)},$if:function(e,t,i){const[n,o,s]=i,r=e.resolveVertexValue(t,n)?o:s,a=e.neighboursWithEdgeValue(r,lR);if(a)for(const l of a)e.addEdge(t,l,lR);return e.resolveVertexValue(t,r)},$lessThan:function(e,t,i){const[n,o]=i;return e.resolveVertexValue(t,n)<e.resolveVertexValue(t,o)},$not:function(e,t,i){const[n]=i;if(!n)return;return!e.resolveVertexValue(t,n)},$or:function(e,t,i){for(const n of i){if(e.resolveVertexValue(t,n))return!0}return!1},$switch:function(e,t,i){const[n,o,...s]=i,r=e.resolveVertexValue(t,n);for(const a of s){const t=e.getVertexValue(a);if(!Array.isArray(t))continue;const[i,n]=t;if(r===i||Array.isArray(i)&&i.includes(r))return n}return e.resolveVertexValue(t,o)}};var zR={$isUserOption:function(e,t,i){const[n,o,s]=i,r=e.neighboursWithEdgeValue(n,lR);if(r)for(const a of r){const i=e.findNeighbour(a,cR);if(i&&BR(e,t,i))return e.resolveVertexValue(t,o)}else if(BR(e,t,n))return e.resolveVertexValue(t,o);return e.resolveVertexValue(t,s)},$isThemeOverride:function(e,t,i){const[n,o,s]=i,r=e.resolveVertexValue(t,n);if(!il(r))throw new Error("`$isThemeOverride` json operation failed on [".concat(String(r),"], expecting a string."));const a=IR(e.getPathArray(t),r);if(a===AR)return;if(e.hasThemeOverride(a))return e.resolveVertexValue(t,o);return e.resolveVertexValue(t,s)},$palette:function(e,t,i){const[n]=i,o=e.resolveVertexValue(t,n);if(!il(o))return;if(VR.has(o)){const i=DR(e.getPathArray(t));if(Number.isNaN(i))return;switch(o){case"fill":return Dr(e.palette.fills,1,i)[0];case"fillFallback":return Dr(e.palette.fillsFallback,1,i)[0];case"stroke":return Dr(e.palette.strokes,1,i)[0];case"gradient":return Dr(e.palette.sequentialColors,1,i)[0];case"range2":return Dr(e.palette.fills,2,i)}return}if("gradients"===o)return e.palette.sequentialColors;if("type"===o)return e.paletteType;const s=wR(e.palette,o.split("."));return Array.isArray(s)?[...s]:"object"===typeof s?p({},s):s},$mapPalette:function(e,t,i){const[n]=i,o=e.resolveVertexValue(t,n);if(!il(o))return;if(VR.has(o)){let i=DR(e.getPathArray(t)),n=0;const s=["series","0","type"];for(let t=0;t<i;t++){s[1]="".concat(t);const i=e.getResolvedPath(s);"map-shape-background"!==i&&"map-line-background"!==i||n++}if(i-=n,Number.isNaN(i))return;switch(o){case"fill":return Dr(e.palette.fills,1,i)[0];case"fillFallback":return Dr(e.palette.fillsFallback,1,i)[0];case"stroke":return Dr(e.palette.strokes,1,i)[0];case"gradient":return Dr(e.palette.sequentialColors,1,i)[0];case"range2":return Dr(e.palette.fills,2,i)}return}if("gradients"===o)return e.palette.sequentialColors;if("type"===o)return e.paletteType;const s=wR(e.palette,o.split("."));return Array.isArray(s)?[...s]:"object"===typeof s?p({},s):s},$path:{dependencies:GR,resolve:function(e,t,i){const n=i.length>1,o=i.length>2,[s,r,a]=i,l=e.resolveVertexValue(t,s),d=o?e.resolveVertexValue(t,a):null;if(!il(l))throw new Error("`$path` json operation failed on [".concat(String(l),"], expecting a string."));const c=IR(e.getPathArray(t),l);if(c===AR)return;const u=d?wR(d,c):e.getResolvedPath(c);if(null!=u)return u;if(n)return e.resolveVertexValue(t,r)}},$pathString:{dependencies:GR,resolve:function(e,t,i){const[n,o]=i,s=e.resolveVertexValue(t,n);if(!il(s))throw new Error("`$path` json operation failed on [".concat(String(s),"], expecting a string."));let r;o&&(r=e.graftAndResolveOrphan(t,o));const a=e.getPathArray(t),l=IR(a,s,r);if(l===AR)throw new Error("Unresolvable path [".concat(s,"] at [").concat(a.join("."),"]"));return l}},$ref:function(e,t,i){const[n]=i,o=e.getVertexValue(n);return e.getParamValue(o)}};function BR(e,t,i){const n=e.resolveVertexValue(t,i);if(!il(n))throw new Error("`$isUserOption` json operation failed on [".concat(String(n),"], expecting a string."));const o=IR(e.getPathArray(t),n);return o!==AR&&e.hasUserOption(o)}var VR=new Set(["fill","fillFallback","stroke","gradient","range2"]);function GR(e,t,i){const[n]=i,o=e.getVertexValue(n);if(il(o)){const i=IR(e.getPathArray(t),o);if(i===AR)return;const n=e.findVertexAtPath(i);n&&e.addEdge(t,n,fR)}}var HR={$apply:function(e,t,i){const[n,o,s,r]=i,a=e.getVertexValue(n);if(!el(a))return;const l=o?e.getVertexValue(o):void 0,d=e.neighboursWithEdgeValue(t,lR),c=d&&d.length>0;if(!c&&null==l)return LR;const u=s?e.resolveVertexValue(t,s):void 0,h=r?e.resolveVertexValue(t,r):void 0;if(!c&&null!=l)if(NR(l)){const i=e.resolveVertexValue(t,o);el(i)&&e.graftObject(t,i,[u,h])}else e.graftObject(t,l,[u,h]);if(!c)return LR;for(const p of d){const t=e.neighboursWithEdgeValue(p,lR);if(t&&0!==t.length)e.graftObject(p,a,[u,h]);else{const t=e.addVertex({});e.addEdge(p,t,cR)}}return LR},$applyCycle:function(e,t,i){const[n,o,s]=i,r=e.resolveVertexValue(t,n);if("number"!==typeof r)return;const a=e.getPathArray(t),l=e.dangerouslyGetUserOption(a),d=e.hasThemeOverride(a),c=null==l?void 0:hR,u=null!==l&&void 0!==l?l:e.resolveVertexValue(t,o);if(!Array.isArray(u))return;const h=s?e.getVertexValue(s):void 0;for(let p=0;p<r;p++){const i=u[p%u.length];null!=i&&(!l&&d||e.graftValue(t,"".concat(p),i,void 0,c),h&&e.graftValue(t,"".concat(p),h,i,c))}return LR},$applySwitch:function(e,t,i){const[n,o,...s]=i,r=e.resolveVertexValue(t,n);for(const a of s){const i=e.getVertexValue(a);if(!Array.isArray(i))continue;const[n,o]=i;if(r===n||Array.isArray(n)&&n.includes(r))return e.graftObject(t,o,[],cR),LR}return e.resolveVertexValue(t,o)},$applyTheme:function(e,t,i){const[n,o,s]=i;let r=e.getVertexValue(n);"string"===typeof r&&(r=[r]);if(!Array.isArray(r))return;const a=e.neighboursWithEdgeValue(t,lR),l=s?e.getVertexValue(s):[],d=Array.isArray(l)?new Set(l):new Set;if(!a)return LR;for(const c of a){const t=e.graftAndResolveOrphan(c,o);for(const i of r){const n=IR([],i,t);n!==AR&&e.graftConfig(c,n,d)}}return LR},$findFirstSiblingNotOperation:function(e,t,i){const[n]=i,o=e.getPathArray(t),s=IR(o,"..");if(s===AR)return;const r=e.findVertexAtPath(s);if(!r)return e.resolveVertexValue(t,n);const a=e.neighboursWithEdgeValue(r,lR);if(a)for(let l=0;l<a.length;l++){const t=e.getPathArray(a[l]);if(t[s.length]===o[s.length])continue;const i=t.concat(o.slice(s.length+1)),n=e.findVertexAtPath(i);if(!n)continue;const r=e.findNeighbourValue(n,hR);if(null!=r)return r;const d=e.findNeighbourValue(n,uR);if(null!=d)return d}return e.resolveVertexValue(t,n)},$map:function(e,t,i){const[n,o]=i,s=e.getVertexValue(n),r=e.resolveVertexValue(t,o);if(!Array.isArray(r))return;const a=e.neighboursWithEdgeValue(t,lR);if(a&&a.length>0)return;let l=0;for(const d of r)e.graftValue(t,"".concat(l),s,d),l++;return LR},$merge:function(e,t,i){for(const n of i){const i=e.resolveVertexValue(t,n);el(i)&&e.graftObject(t,i)}return LR},$omit:function(e,t,i){const[n,o]=i;let s=e.getVertexValue(n);if(!Array.isArray(s)){const i=function(e,t,i){const n=NR(e.getVertexValue(i));switch(null===n||void 0===n?void 0:n.operation){case"$path":{const[i]=n.values,o=IR(e.getPathArray(t),i);if(o===AR)return;return e.findVertexAtPath(o)}case"$value":return t}}(e,t,o);if(!i)return;s=e.resolveVertexValue(i,n)}const r=e.resolveVertexValue(t,o);if(!Array.isArray(s)||!el(r))return;return Mu(r,s)},$size:function(e,t,i){const[n]=i,o=e.resolveVertexValue(t,n);return Ja(o)?"length"in o?o.length:Object.keys(o).length:0},$shallow:function(e,t,i){const n=e.getPathArray(t),o=e.hasUserOption(n);if(!o&&1===i.length)return e.resolveVertexValue(t,i[0]);const s=[];for(const r of i)s.push(e.getVertexValue(r));if(o)return e.prune(t,[uR,cR]),LR;return e.graftObject(t,s),LR},$shallowSimple:function(e,t,i){const n=[];for(const o of i)n.push(e.getVertexValue(o));return n},$value:function(e,t,i){const[n]=i,o=e.getVertexValue(n),s=e.getPathArray(t);if("$index"===o)return DR(s);if("$parentIndex"===o)return DR(s,1);if("$1"===o)return e.resolveValue$1(s)}};var jR={$isEven:function(e,t,i){const[n]=i,o=e.resolveVertexValue(t,n);return!Number.isNaN(Number(o))&&Number(o)%2===0},$mul:function(e,t,i){let n;for(const o of i){const i=e.resolveVertexValue(t,o);null==n?n=Number(i):n*=Number(i)}return n},$round:function(e,t,i){const[n]=i;if(!n)return;return Math.round(Number(e.resolveVertexValue(t,n)))}};var WR=p(p(p(p(p(p(p(p({},TR),RR),PR),OR),zR),FR),jR),HR),_R=new Set(Object.keys(WR));function KR(e){return _R.has(e)}var UR=Cr.create("opts","options-graph"),YR=Am(function(e,t){return UR.group("OptionsGraph.constructor()",()=>new ZR(e.config,t,e.params,e.palette,e.overrides,e.getTemplateParameters()))});var $R=class e extends Yg{constructor(){var t,i,n,o,s,r,a,l,d,c,u;let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,m=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,v=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Map;super(lR,gR,new Set([pR,hR])),this.config=h,this.userOptions=p,this.palette=m,this.overrides=f,this.internalParams=v,this.edgePriority=[...e.EDGE_PRIORITY],this.graftEdge=e.GRAFT_EDGE,this.resolvedParams={},this.resolvedAnnotations={},this.value$1=new Map,this.cachedPathVertices=new Map,this.hasUnsafeClearKeys=!1,this.rollbackVertices=[],this.rollbackEdgesFrom=[],this.rollbackEdgesTo=[],this.rollbackEdgesValue=[],this.isRollingBack=!1,this.EMPTY_PATH_ARRAY_VERTEX=this.addVertex([]),this.root=this.addVertex("root"),this.params=this.addVertex("params"),this.annotations=this.addVertex("annotations"),this.paletteType=Qa(null===p||void 0===p?void 0:p.theme)?vA(null===(t=p.theme)||void 0===t?void 0:t.palette):"inbuilt";const y=null!==(i=null===(n=p.series)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.type)&&void 0!==i?i:"line";UR("build user"),this.buildGraphFromObject(this.root,hR,Mu(p,["theme"])),UR("build defaults"),this.buildGraphFromObject(this.root,cR,Mu(h[y],e.COMPLEX_KEYS));const b=f?Mu(f[y],e.COMPLEX_KEYS):{};Object.keys(b).length>0&&(UR("build series overrides"),this.buildGraphFromObject(this.root,uR,b));const x=f?Mu(f.common,e.COMPLEX_KEYS):{};var C;Object.keys(x).length>0&&(UR("build common overrides"),this.buildGraphFromObject(this.root,uR,"cartesian"===(null===(C=ca.getSeriesModule(y))||void 0===C?void 0:C.chartType)?x:Mu(x,["zoom","navigator"])));g&&(UR("build params"),this.buildGraphFromObject(this.params,cR,g));const S=this.findNeighbourWithValue(this.root,"axes",lR),w=this.findNeighbourWithValue(this.root,"series",lR);S&&(UR("build axes"),this.buildGraphFromObject(S,cR,{$applyTheme:[["/$seriesType/axes/$axisType/$position","/$seriesType/axes/$axisType"],{seriesType:{$path:["/series/0/type","line"]},axisType:{$path:["./type","category"]},position:{$path:["./position"]}},["top","right","bottom","left"]]})),w&&(UR("build series"),this.buildGraphFromObject(w,cR,{$applyTheme:["/$seriesType/series",{seriesType:{$path:["./type","line"]}}]}));const M=Mu(null!==(o=null===(s=h[y])||void 0===s?void 0:s.annotations)&&void 0!==o?o:{},e.ANNOTATIONS_OPTIONS_KEYS);Object.keys(M).length>0&&(UR("build annotations type config"),this.buildGraphFromObject(this.annotations,cR,M));const k=Mu(null!==(r=null===f||void 0===f||null===(a=f.common)||void 0===a?void 0:a.annotations)&&void 0!==r?r:{},e.ANNOTATIONS_OPTIONS_KEYS);Object.keys(k).length>0&&(UR("build annotations type overrides"),this.buildGraphFromObject(this.annotations,uR,k));const D=ku(null!==(l=null===(d=h[y])||void 0===d?void 0:d.annotations)&&void 0!==l?l:{},e.ANNOTATIONS_OPTIONS_KEYS);Object.keys(D).length>0&&(UR("build annotations config"),this.buildGraphFromObject(this.root,cR,{annotations:D}));const I=ku(null!==(c=null===f||void 0===f||null===(u=f.common)||void 0===u?void 0:u.annotations)&&void 0!==c?c:{},e.ANNOTATIONS_OPTIONS_KEYS);Object.keys(I).length>0&&(UR("build annotations overrides"),this.buildGraphFromObject(this.root,uR,{annotations:I})),this.buildDependencyGraph()}static clearValueCache(){e.valueCache.clear()}clear(){UR.group("OptionsGraph.clear()",()=>{super.clear(),this.cachedPathVertices.clear(),this.root=void 0,this.params=void 0,this.annotations=void 0,UR("cleared")})}clearSafe(){this.hasUnsafeClearKeys||this.clear()}resolve(){return UR.group("OptionsGraph.resolve()",()=>(this.resolved={},this.resolvedParams={},this.resolvedAnnotations={},UR("resolve params"),this.resolveVertex(this.params,this.resolvedParams),UR("resolve annotations"),this.resolveVertex(this.annotations,this.resolvedAnnotations),UR("resolve root"),this.resolveVertex(this.root),UR("resolved root",this.resolved),UR("vertex count",this.getVertexCount()),UR("edge count",this.getEdgeCount()),this.resolved))}resolveParams(){return this.resolvedParams}resolveAnnotationThemes(){return this.resolvedAnnotations}addVertex(e){const t=super.addVertex(e);return this.isRollingBack&&this.rollbackVertices.push(t),t}addEdge(e,t,i){var n,o;const s=-1!==(null!==(n=null===(o=this.neighboursWithEdgeValue(e,i))||void 0===o?void 0:o.indexOf(t))&&void 0!==n?n:-1);this.isRollingBack&&!s&&(this.rollbackEdgesFrom.push(e),this.rollbackEdgesTo.push(t),this.rollbackEdgesValue.push(i)),super.addEdge(e,t,i)}resolvePartial(t,i,n){var o;if(!i)return;if(!this.root)return;const{permissivePath:s,proxyPaths:r}=null!==n&&void 0!==n?n:{},a=Object.keys(i);if(UR.check()&&console.groupCollapsed("OptionsGraph.resolvePartial() - ".concat(t.join(".")," [").concat(a,"]")),0===a.length)return{};const l=this.findVertexAtPath(t);if(!l){if(s)return;throw new Error("Could not find vertex in OptionsGraph at path [".concat(t.join("."),"]."))}const d=this.findNeighbour(l,dR);if(this.userPartialOptions={},MR(this.userPartialOptions,t,i),r)for(const e of Object.keys(r)){const n=r[e],o=wR(i,[e]);null!=o&&(MR(i,n,o),MR(this.userPartialOptions,[...t,...n],o),delete i[e],delete this.userPartialOptions[e])}this.graftEdge=pR,this.edgePriority=[pR,...e.EDGE_PRIORITY],this.snapshot(),this.buildGraphFromObject(l,pR,i,d);for(const e of a){const i=null!==r&&void 0!==r&&r[e]?this.findVertexAtPath([...t,...r[e]]):this.findNeighbourWithValue(l,e,lR);i&&this.refreshPendingProcessingEdges(i)}this.buildDependencyGraph();const c={};if(this.resolveVertex(l,c),this.rollback(),this.graftEdge=e.GRAFT_EDGE,this.edgePriority=e.EDGE_PRIORITY,this.userPartialOptions=void 0,r)for(const e of Object.keys(r)){const i=r[e],n=wR(c,[...t,...i]);MR(c,[...t,e],n)}const u=wR(c,t),h=null===(o=null===n||void 0===n?void 0:n.pick)||void 0===o||o?ku(wR(c,t),a):u;return UR("vertex count",this.getVertexCount()),UR("edge count",this.getEdgeCount()),UR("resolved partial",h),UR.check()&&console.groupEnd(),h}findVertexAtPath(e){const t=e.join(".");if(this.cachedPathVertices.has(t))return this.cachedPathVertices.get(t);const i=this.findVertexAlongEdge(this.root,e,lR);return i?(this.cachedPathVertices.set(t,i),i):void 0}hasUserOption(e){if(SR(this.userOptions,e))return!0;const t=this.findVertexAtPath(e);if(t){if(null!=this.findNeighbour(t,hR))return!0;if(null!=this.findNeighbour(t,pR))return!0;const e=this.findNeighbourValue(t,xR);return e===hR||e===pR}return!1}dangerouslyGetUserOption(e){if(this.userPartialOptions){const t=wR(this.userPartialOptions,e);if(null!=t)return t}return wR(this.userOptions,e)}hasThemeOverride(e){if(null==this.overrides)return!1;if("axes"===e[0]&&e.length>1){const t=this.getResolvedPath(["axes",e[1],"type"]);if(SR(this.overrides,["common","axes",t,...e.slice(2)]))return!0;const i=this.getResolvedPath(["series","0","type"]);return SR(this.overrides,[i,"axes",t,...e.slice(2)])}if("series"===e[0]&&e.length>1){const t=this.getResolvedPath(["series",e[1],"type"]);return SR(this.overrides,[t,"series",...e.slice(2)])}return SR(this.overrides,e)}getParamValue(e){if(null!=this.resolvedParams[e])return this.resolvedParams[e];const t=this.findVertexAlongEdge(this.params,[e],lR);if(!t)return;const i=this.findNeighbour(t,cR);if(!i)return;const n=this.resolveVertexValue(t,i);return this.resolvedParams[e]=n,n}getPathArray(e){var t;return null!==(t=this.findNeighbourValue(e,dR))&&void 0!==t?t:[]}getResolvedPath(e){return wR(this.resolved,e)}getCachedValue(t,i){const n=[...t,i].join(".");return e.valueCache.get(n)}setCachedValue(t,i,n){const o=[...t,i].join(".");e.valueCache.set(o,n)}prune(e,t){this.addEdge(e,this.addVertex(t),bR)}resolveVertexValue(e,t){this.resolveVertexDependencies(t);const i=this.findNeighbourValue(t,gR);if(i&&KR(i)){const n=this.neighboursWithEdgeValue(t,mR),o=WR[i],s="function"===typeof o?o:o.resolve,r=null===s||void 0===s?void 0:s(this,e,null!==n&&void 0!==n?n:[]);return r===LR?void 0:r}let n=this.getVertexValue(t);if(Array.isArray(n)){const i={};this.resolveVertexChildren(t,i),n=wR(i,this.getPathArray(e))}return this.resolveValueOrSymbol(n)}resolveValue$1(e){for(let t=e.length;t>=0;t--){const i=e.slice(0,t).join("."),n=this.value$1.get(i);if(void 0!=n)return n}}graftConfig(e,t,i){const n=wR(this.config,t),o=this.findNeighbour(e,dR);if(Qa(n)&&this.buildGraphFromObject(e,cR,n,o,void 0,i),this.overrides){const n=wR(this.overrides,t);Qa(n)&&this.buildGraphFromObject(e,uR,n,o,void 0,i);const s=wR(this.overrides,["common",...t.slice(1)]);Qa(s)&&this.buildGraphFromObject(e,uR,s,o,void 0,i)}this.buildDependencyGraph()}graftObject(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.graftEdge;const o=this.findNeighbour(e,dR);if(this.buildGraphFromObject(e,n,t,o),this.overrides&&i)for(const s of i){if(null==s)continue;const t=wR(this.overrides,s);t&&this.buildGraphFromObject(e,uR,t,o)}this.buildDependencyGraph()}graftValue(e,t,i,n){var o;let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.graftEdge;const r=[...this.getPathArray(e),t];this.value$1.set(r.join("."),n);const a=null!==(o=this.findVertexAtPath(r))&&void 0!==o?o:this.addVertex(t);this.buildGraphFromValue(e,a,s,r,i),this.buildDependencyGraph()}graftAndResolveOrphan(e,t){const i={},n=this.addVertex(i),o=this.getPathArray(e);return this.graftAndResolveChildren(t,n,o,[]),this.resolveVertex(n,i),wR(i,o)}buildGraphFromObject(t,i,n,o){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.SHALLOW_KEYS,r=arguments.length>5?arguments[5]:void 0;const a=Object.keys(n),l=NR(n,a);if(l){const e=this.addVertex(n);return this.addEdge(t,e,i),void this.buildGraphFromOperation(e,i,l,o)}if(0===a.length)return this.addEdge(t,this.addVertex(Array.isArray(n)?[]:{}),i),void this.buildGraphAutoEnable(t,i,n,void 0);const d=this.getVertexChildrenByKey(t),c=o?this.getVertexValue(o):[];let u;Array.isArray(n)&&this.addEdge(t,this.addVertex(i),xR);const h=[...c],p=c.length;for(const e of a){var g;if(null!==r&&void 0!==r&&r.has(e))continue;const o=null!==(g=null===d||void 0===d?void 0:d.get(e))&&void 0!==g?g:this.addVertex(e);h[p]=e,null!==s&&void 0!==s&&s.has(e)?this.buildShallowGraphFromValue(t,o,i,h,n[e]):this.buildGraphFromValue(t,o,i,h,n[e],s),"enabled"===e&&(u=o)}this.buildGraphAutoEnable(t,i,n,u)}buildGraphAutoEnable(e,t,i,n){if(t===cR&&!n)return;if(t===hR&&n)return;if(t!==cR&&t!==hR&&t!==pR&&t!==uR)return;let o=this.findNeighbour(e,vR);o||(o=this.addVertex(vR),this.addEdge(e,o,vR)),n&&this.addEdge(n,o,yR);const{enabled:s,_enabledFromTheme:r}=i;this.addEdge(o,this.addVertex({enabled:s,_enabledFromTheme:r,keys:Object.keys(i).length}),t)}getVertexChildrenByKey(e){const t=this.neighboursWithEdgeValue(e,lR);if(!t)return;const i=new Map;for(const n of t)i.set(this.getVertexValue(n),n);return i}buildGraphFromValue(e,t,i,n,o,s){this.addEdge(e,t,lR);let r=this.findNeighbour(t,dR);r||(r=this.addVertex([...n]),this.addEdge(t,r,dR));const a=NR(o);if(a){const e=this.addVertex(o);this.addEdge(t,e,i),this.addEdge(e,r,dR),this.buildGraphFromOperation(e,i,a,r)}else if(Ja(o))this.buildGraphFromObject(t,i,o,r,s);else{const e=this.findNeighbour(t,i);if(e&&this.getVertexValue(e)===o)return;const n=this.addVertex(o);this.addEdge(t,n,i)}}buildShallowGraphFromValue(e,t,i,n,o){this.addEdge(e,t,lR);let s=this.findNeighbour(t,dR);s||(s=this.addVertex([...n]),this.addEdge(t,s,dR));const r=this.addVertex(o);this.addEdge(t,r,i)}buildGraphFromOperation(e,t,i,n){const o=this.addVertex(i.operation);this.addEdge(e,o,gR);for(const s of i.values)this.buildGraphFromOperationValue(e,s,t,n)}buildGraphFromOperationValue(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.EMPTY_PATH_ARRAY_VERTEX;const o=this.addVertex(t);this.addEdge(e,n,dR),this.addEdge(e,o,mR);const s=NR(t);s?this.buildGraphFromOperation(o,i,s,n):Ja(t)&&this.buildGraphFromObject(o,i,t,n)}buildDependencyGraph(){for(let e=0;e<this.pendingProcessingEdgesFrom.length;e++){const t=this.pendingProcessingEdgesFrom[e],i=this.pendingProcessingEdgesTo[e],n=this.getVertexValue(i);if(!KR(n))continue;const o=this.neighboursWithEdgeValue(t,mR),s=WR[n],r="function"===typeof s?void 0:s.dependencies;null===r||void 0===r||r(this,t,null!==o&&void 0!==o?o:[])}this.pendingProcessingEdgesFrom=[],this.pendingProcessingEdgesTo=[]}refreshPendingProcessingEdges(e){const t=this.findNeighbour(e,cR),i=null!==t&&void 0!==t?t:e,n=this.findNeighbour(i,gR);if(n){this.pendingProcessingEdgesFrom.push(i),this.pendingProcessingEdgesTo.push(n);const e=this.neighboursWithEdgeValue(i,mR);if(e)for(const t of e)this.refreshPendingProcessingEdges(t)}const o=this.neighboursWithEdgeValue(e,lR);if(o)for(const s of o)this.refreshPendingProcessingEdges(s)}resolveVertex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.resolved,i=arguments.length>2?arguments[2]:void 0;const n=this.getPathArray(e);this.resolveVertexInEdgePriority(e,t,n,i),this.resolveVertexAutoEnable(e,t,n),this.resolveVertexChildren(e,t,i)}resolveVertexInEdgePriority(t,i,n,o){const s=this.neighboursWithEdgeValue(t,lR),[r]=this.edgePriority;for(const a of this.edgePriority){const l=this.findNeighbour(t,a);if(null==l)continue;const d=this.resolveVertexValueInternal(t,l);if((null!=d||a===r)&&(!(s&&s.length>0&&a!==r)&&(!Array.isArray(o)||!o.includes(a)))){if(this.hasUnsafeClearKeys||(this.hasUnsafeClearKeys=null!=d&&e.UNSAFE_CLEAR_KEYS.has(n.at(-1))),0===n.length){if(null==d)continue;this.resolved=d}else MR(i,n,d);break}}}resolveVertexValueInternal(e,t){this.resolveVertexDependencies(t);const i=this.findNeighbourValue(t,gR);if(i&&KR(i)){const n=this.neighboursWithEdgeValue(t,mR),o=WR[i],s="function"===typeof o?o:o.resolve,r=null===s||void 0===s?void 0:s(this,e,null!==n&&void 0!==n?n:[]);return r===LR?void 0:r}return this.resolveValueOrSymbol(this.getVertexValue(t))}resolveVertexAutoEnable(e,t,i){var n;const o=null===(n=this.neighboursWithEdgeValue(e,yR))||void 0===n?void 0:n[0];if(!o)return;const s=this.findVertexAtPath(i),r=this.findNeighbourValue(o,cR),a=this.findNeighbourValue(o,uR),l=this.findNeighbourValue(o,hR),d=s&&null!=this.findNeighbour(s,hR)?void 0:this.findNeighbourValue(o,pR);!(null!=l&&null==l.enabled||null!=d&&null==d.enabled)||null!==r&&void 0!==r&&r._enabledFromTheme||null!==a&&void 0!==a&&a._enabledFromTheme||MR(t,i,!0)}resolveVertexChildren(e,t,i){const n=this.neighboursWithEdgeValue(e,lR);if(n){null!==i&&void 0!==i||(i=this.findNeighbourValue(e,bR));for(const e of n){const o=this.getVertexValue(e);n.length>1&&KR(o)||"_enabledFromTheme"!==o&&this.resolveVertex(e,t,i)}}}resolveVertexDependencies(e){const t=this.neighboursWithEdgeValue(e,fR);if(t)for(const i of t)this.resolveVertex(i)}graftAndResolveChildren(e,t,i,n){const o=this.neighboursWithEdgeValue(e,lR);if(o)for(const s of o){const e=this.getVertexValue(s),o=[...i,e],r=[...n,e],a=this.addVertex(e),l=this.findNeighbourValue(s,cR);this.addEdge(t,a,lR);const d=this.addVertex(o);if(this.addEdge(a,d,dR),Qa(l)){this.buildGraphFromObject(a,cR,l,d);const e=this.findNeighbour(a,cR);this.addEdge(e,this.addVertex(o),dR);const t=this.findNeighbourValue(e,gR);if(KR(t)){const i=this.neighboursWithEdgeValue(e,mR),n=WR[t],o="function"===typeof n?void 0:n.dependencies;null===o||void 0===o||o(this,e,null!==i&&void 0!==i?i:[])}}this.graftAndResolveChildren(s,a,o,r)}}resolveValueOrSymbol(e){var t;return"symbol"===typeof e&&null!==(t=this.internalParams)&&void 0!==t&&t.has(e)?this.internalParams.get(e):e}snapshot(){UR("snapshot"),this.isRollingBack=!0}rollback(){UR("rollback ".concat(this.rollbackEdgesFrom.length," edges and ").concat(this.rollbackVertices.length," vertices"));for(let e=0;e<this.rollbackEdgesFrom.length;e++){const t=this.rollbackEdgesFrom[e],i=this.rollbackEdgesTo[e],n=this.rollbackEdgesValue[e];this.removeEdge(t,i,n)}for(const e of this.rollbackVertices)this.removeVertex(e);this.cachedPathVertices.clear(),this.rollbackVertices=[],this.rollbackEdgesFrom=[],this.rollbackEdgesTo=[],this.rollbackEdgesValue=[],this.isRollingBack=!1}};$R.EDGE_PRIORITY=[hR,uR,cR],$R.GRAFT_EDGE=cR,$R.SHALLOW_KEYS=new Set(["context","data","topology"]),$R.COMPLEX_KEYS=["annotations","axes","series"],$R.ANNOTATIONS_OPTIONS_KEYS=["axesButtons","data","enabled","optionsToolbar","snap","toolbar","xKey","volumeKey"],$R.UNSAFE_CLEAR_KEYS=new Set(["itemStyler","styler"]),$R.valueCache=new Map;var ZR=$R,XR=e=>"'".concat(e,"'"),qR="__AXIS_ID_",QR={top:_u.X,bottom:_u.X,left:_u.Y,right:_u.Y},JR=class e{constructor(t,i,n,o,s,r){var a,l,d;let c=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7?arguments[7]:void 0;this.themeParameters={},this.optionMetadata=null!==s&&void 0!==s?s:{},this.processedOverrides=null!==n&&void 0!==n?n:{};let h=null;t instanceof e?(h=t,this.specialOverrides=h.specialOverrides,r&&(this.userDeltaKeys=new Set(Object.keys(r))),null!==r&&void 0!==r||(r=Xg(h.userOptions,i,e.JSON_DIFF_OPTS)),this.userOptions=Qg(Cu(r,h.userOptions),p(p({},e.OPTIONS_CLONE_OPTS_SLOW),{},{seen:[]}))):(this.userOptions=Qg(null!==t&&void 0!==t?t:i,p(p({},e.OPTIONS_CLONE_OPTS_SLOW),{},{seen:[]})),this.specialOverrides=this.specialOverridesDefaults(p({},o))),this.findSeriesWithUserVisiblity(i,r),c&&this.removeLeftoverSymbols(this.userOptions);const g=t instanceof e&&void 0!==(null===(a=r)||void 0===a?void 0:a.data)&&(null===(l=r)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.length)!==(null===(d=t.userOptions.data)||void 0===d?void 0:d.length);let m,f,v,y,b,x,C;if(c||void 0!=this.seriesWithUserVisibility||void 0===r||!e.isFastPathDelta(r)||null==h||g?(e.perfDebug("ChartOptions.slowSetup()"),({activeTheme:m,processedOptions:f,themeParameters:y,annotationThemes:b,googleFonts:x,optionsGraph:C}=this.slowSetup(n,r,c))):(({activeTheme:m,processedOptions:f,fastDelta:v}=this.fastSetup(r,h)),y=h.themeParameters,b=h.annotationThemes),this.activeTheme=m,this.processedOptions=f,this.fastDelta=null!==v&&void 0!==v?v:void 0,this.themeParameters=y,this.annotationThemes=b,this.googleFonts=x,this.optionsGraph=C,void 0!==u&&"number"===typeof u&&!Number.isNaN(u)){const e=performance.now();this.optionsProcessingTime=e-u}Cr.inDevelopmentMode(()=>Eu(this))}static isFastPathDelta(t){for(const i of Object.keys(null!==t&&void 0!==t?t:{}))if(!this.FAST_PATH_OPTIONS.has(i))return e.perfDebug("ChartOptions.isFastPathDelta() - slow path required due to presence of: ",i),!1;return e.perfDebug("ChartOptions.isFastPathDelta() - fast path possible."),!0}findSeriesWithUserVisiblity(e,t){for(const n of[e,t]){const e=null===n||void 0===n?void 0:n.series;if(Array.isArray(e))for(let t=0;t<e.length;t++){var i;const n=e[t];"visible"in n&&(null!==(i=this.seriesWithUserVisibility)&&void 0!==i||(this.seriesWithUserVisibility={identifiers:new Set,indices:new Set}),n.id?this.seriesWithUserVisibility.identifiers.add(n.id):this.seriesWithUserVisibility.indices.add(t))}}}fastSetup(t,i){var n;const{activeTheme:o,processedOptions:s}=i,{presetType:r}=this.optionMetadata;if(null!=r&&null!=(null===(n=t)||void 0===n?void 0:n.data)){const e=ca.getPresetModule(r);if(null!==e&&void 0!==e&&e.processData){const{series:i,data:n}=e.processData(t.data);t=xu({series:i,data:n},t)}}this.fastSeriesSetup(t,s);const a=xu(t,s);return e.debug("ChartOptions.fastSetup() - processed options",a),{activeTheme:o,processedOptions:a,fastDelta:t}}fastSeriesSetup(e,t){var i;null!==e&&void 0!==e&&e.series&&(null!==(i=e.series)&&void 0!==i&&i.every((e,i)=>{var n,o;return qg(e,null!==(n=null===(o=t.series)||void 0===o?void 0:o[i])&&void 0!==n?n:{})})?delete e.series:e.series=e.series.map((e,i)=>{var n,o;return Cu(e,null!==(n=null===(o=t.series)||void 0===o?void 0:o[i])&&void 0!==n?n:{})}))}slowSetup(t,i){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Qg(this.userOptions,e.OPTIONS_CLONE_OPTS_FAST);i&&(o=xu(i,o),n&&this.removeLeftoverSymbols(o));let s=nL(sR(o.theme));const{presetType:r}=this.optionMetadata;if(null!=r){const t=ca.getPresetModule(r);if(t){const{validate:i=ud}=t,n=o,r=o.type,a=null==r?void 0:s.presets[r],{cleared:l,invalid:d}=i(n,t.options,"");for(const e of d)jr.warn(e);$d(d,"")?o={}:(e.debug(">>> AgCharts.createOrUpdate() - applying preset",l),o=t.create(l,a,()=>this.activeTheme),s=nL(sR(o.theme)))}}this.soloSeriesIntegrity(o),null!=r&&s.templateTheme(o,!1),lL(void 0,o);const a=this.validateSeriesOptions(o),l=cI(o);if(this.chartDef=ca.getChartModule(l),!this.chartDef.placeholder){const{validate:e=ud}=this.chartDef,{cleared:t,invalid:i}=e(o,this.chartDef.options,"");for(const n of i)jr.warn(n);o=t}this.validateAxesOptions(o),this.removeDisabledOptions(o);let d=this.processFonts(s.params);d=this.processFonts(o,d),this.processSeriesOptions(o);const c=this.processAxesOptions(o,l),u=YR(s,o),h=u.resolve(),p=u.resolveParams(),g=u.resolveAnnotationThemes();u.clearSafe();const m=xu(t,h);return lL(this.chartDef.name,m),oL(this.chartDef.name,m,a),this.validateSeriesOptions(m),this.validateAxesOptions(m,c),this.validatePluginOptions(m),this.processMiniChartSeriesOptions(m),m.loadGoogleFonts||d.clear(),e.debug(()=>["ChartOptions.slowSetup() - processed options",Qg(m)]),{activeTheme:s,processedOptions:m,themeParameters:p,annotationThemes:g,googleFonts:d,optionsGraph:u}}validatePluginOptions(e){for(const i of ca.listModulesByType(ua.Plugin)){var t;const n=i.name;if(n in e&&null!=i.options&&(!i.chartType||i.chartType===(null===(t=this.chartDef)||void 0===t?void 0:t.name))){const{cleared:t,invalid:o}=ud(e[n],i.options,i.name);for(const e of o)jr.warn(e);e[n]=t}}}validateSeriesOptions(e){var t,i,n;const o=null===(t=this.chartDef)||void 0===t?void 0:t.name,s=[],r=null!==(i=null===(n=e.series)||void 0===n?void 0:n.length)&&void 0!==i?i:0,a=[];let l;for(let d=0;d<r;d++){const t="series[".concat(d,"]"),i=e.series[d],n=ca.getSeriesModule(i.type);if(null==n){const e=ca.isEnterprise();null!==l&&void 0!==l||(l=$l(Array.from(dI.values()).filter(t=>t.type===ua.Series&&(e||!t.enterprise)&&(!o||t.chartType===o)).map(e=>e.name),"or",XR));const n=dI.get(i.type);if(null!=i.type&&(null===n||void 0===n?void 0:n.type)===ua.Series){a.push(n);continue}jr.warn(null==i.type?"Option `".concat(t,".type` is required and has not been provided; expecting ").concat(l,", ignoring."):"Unknown type `".concat(i.type,"` at `").concat(t,".type`; expecting ").concat(l,", ignoring."));continue}if(o&&n.chartType!==o){jr.warn("Series type `".concat(n.name,"` at `").concat(t,".type` is not supported by chart type `").concat(o,"`, ignoring."));continue}if(null==n.options){s.push(i);continue}const{validate:r=ud}=n,{cleared:c,invalid:u}=r(i,n.options,t);for(const e of u)jr.warn(e);$d(u,t)||s.push(c)}return e.series=s,a}validateAxesOptions(e,t){var i;if(!("axes"in e)||!e.axes)return;const n=null===(i=this.chartDef)||void 0===i?void 0:i.name,o={};let s;for(const[a,l]of fu(e.axes)){var r;if(!l)continue;if(null==l.type){o[a]=l;continue}const e="axes.".concat(null!==(r=null===t||void 0===t?void 0:t.get(a))&&void 0!==r?r:a),i=ca.getAxisModule(l.type);if(null==i){const t=ca.isEnterprise();null!==s&&void 0!==s||(s=$l(Array.from(dI.values()).filter(e=>e.type===ua.Axis&&(t||!e.enterprise)&&e.chartType===n).map(e=>e.name),"or",XR));const i=dI.get(l.type);(null===i||void 0===i?void 0:i.type)!==ua.Axis&&jr.warn("Unknown type `".concat(l.type,"` at `").concat(e,".type`; expecting one of ").concat(s,", ignoring."));continue}if(i.chartType!==n){jr.warn("Axis type `".concat(i.name,"` at  `").concat(e,".type` is not supported by chart type `").concat(n,"`, ignoring."));break}const{validate:d=ud}=i,{cleared:c,invalid:u}=d(l,i.options,e);for(const t of u)jr.warn(t);$d(u,e)||(o[a]=c)}e.axes=o}diffOptions(t){var i;return this===t?{}:null==t?this.processedOptions:null!==(i=this.fastDelta)&&void 0!==i?i:Xg(t.processedOptions,this.processedOptions,e.JSON_DIFF_OPTS)}optionsType(e){var t,i;return null!==(t=null===(i=e.series)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.type)&&void 0!==t?t:"line"}processSeriesOptions(e){var t;const i=null===(t=e.series)||void 0===t?void 0:t.map(e=>{var t;const i=ca.getSeriesModule(e.type),n=Boolean(null===i||void 0===i||null===(t=i.options)||void 0===t?void 0:t.visible);return xu(this.getSeriesGroupingOptions(e),e,n&&{visible:!0})});e.series=this.setSeriesGroupingOptions(null!==i&&void 0!==i?i:[])}processAxesOptions(e,t){var i,n,o,s,r,a,l;const d="polar"===t?[_u.Angle,_u.Radius]:[_u.X,_u.Y],c="axes"in e&&Object.keys(null!==(i=e.axes)&&void 0!==i?i:{}).length>0,u=this.countNonDefaultSeriesAxisKeys(e,d),h=u>0,p=h&&u<(null!==(n=null===e||void 0===e||null===(o=e.series)||void 0===o?void 0:o.length)&&void 0!==n?n:0),g=null===(s=e.series)||void 0===s?void 0:s[0],m=this.optionsType(e),f=null!==(r=this.predictAxes(m,d,g,e.data))&&void 0!==r?r:this.cloneDefaultAxes(m),v=Qa(g)&&"direction"in g&&"horizontal"===g.direction&&null!=(null===(a=ca.getSeriesModule(g.type))||void 0===a?void 0:a.axisKeysFlipped);if(!c&&!h&&!v)return void(e.axes=f);const y="axes"in e?new Set(Object.keys(null!==(l=e.axes)&&void 0!==l?l:{})):new Set,b=this.getPrimaryAxisKeys(e,d,y,h),x=this.getRemappedAxisKeys(y,b,d,p),C={},S=new Map;for(const[M,k]of x){var w;C[k]="axes"in e?Jg(null===(w=e.axes)||void 0===w?void 0:w[M]):void 0,S.set(k,M)}return this.remapSeriesAxisKeys(e,d,C,x,f,p),this.predictAxesMissingTypesAndPositions(e,d,C,f),this.alternateSecondaryAxisPositions(e,C,S),e.axes=C,S}getSeriesDirectionAxisKey(e,t){var i;const n=ca.getSeriesModule(e.type);if(!n)return;return"direction"in e&&"horizontal"===e.direction&&n.axisKeysFlipped?n.axisKeysFlipped[t]:null===(i=n.axisKeys)||void 0===i?void 0:i[t]}countNonDefaultSeriesAxisKeys(e,t){let i=0;for(const o of null!==(n=e.series)&&void 0!==n?n:[]){var n;for(const e of t){const t=this.getSeriesDirectionAxisKey(o,e);t&&cl(t,o)&&(o[t]!==e&&i++)}}return i}getPrimaryAxisKeys(e,t,i,n){var o,s;const r=new Map;for(const d of t){let t=!1;if("axes"in e&&e.axes&&(!(d in e.axes)||!Qa(e.axes[d])||"position"in e.axes[d]))for(const[i,n]of fu(e.axes))if("position"in n&&n.position&&d===QR[n.position]){r.set(d,i),t=!0;break}if(!t&&n)for(const n of null!==(a=e.series)&&void 0!==a?a:[]){var a;const e=this.getSeriesDirectionAxisKey(n,d);if(!e)continue;const t=n[e];if(!i.has(t)){if(!t){r.set(d,d);break}r.set(d,t);break}}}if(0===i.size||!("axes"in e)||!e.axes)return r;if(0===r.size)for(const d of t)d in e.axes&&r.set(d,d);if(0===r.size)for(const d of t)for(const[t,i]of fu(e.axes)){var l;if(null!==(l=i.type)&&void 0!==l&&l.startsWith(d)){r.set(d,t);break}}if(0===r.size&&(null!==(o=null===(s=e.series)||void 0===s?void 0:s.length)&&void 0!==o?o:0)>0)for(const d of t)for(const t of e.series){const e=this.getSeriesDirectionAxisKey(t,d);if(!e)continue;const n=t[e];if(i.has(n)){r.set(d,n);break}}if(r.size<2){const i=new Set(r.values());for(const[n,o]of fu(e.axes))if(!i.has(n)&&!("position"in o)){for(const e of t)if(!r.has(e)){r.set(e,n),i.add(n);break}if(2===r.size)break}}return r}getRemappedAxisKeys(e,t,i,n){const o=new Map;for(const[s,r]of t)o.set(r,s);for(const s of e)o.has(s)||o.set(s,"".concat(qR).concat(o.size));if(n)for(const s of i)o.has(s)||o.set(s,"".concat(qR).concat(o.size));return o}remapSeriesAxisKeys(e,t,i,n,o,s){for(const d of null!==(r=e.series)&&void 0!==r?r:[]){var r;for(const e of t){var a;const t=this.getSeriesDirectionAxisKey(d,e);if(!t)continue;null!==(a=i[e])&&void 0!==a||(i[e]=Jg(o[e]));let r=e;if(t in d){const s=d[t];n.has(s)?r=n.get(s):(r="".concat(qR).concat(n.size),n.set(s,r),i[r]=Jg(o[e]))}else if(n.has(e)&&s){var l;r=n.get(e),null!==(l=i[r])&&void 0!==l||(i[r]=Jg(o[e]))}d[t]=r}}}predictAxes(e,t,i,n){var o,s;if(!i)return;const r=null!==(o=null===i||void 0===i?void 0:i.data)&&void 0!==o?o:n;if(null===r||void 0===r||!r.length)return;const a=null===(s=ca.getSeriesModule(e))||void 0===s?void 0:s.predictAxis;if(!a)return;const l=new Map,d=Nr(0,r.length-1,5);for(const c of d){const e=r[c];for(const n of t){const t=a(n,e,i);if(!l.has(n)){l.set(n,t);continue}const o=l.get(n);if(t||o){if(!t||!o)return;for(const e of Object.keys(o))if(o[e]!==t[e])return}}}for(const[c,u]of l)u||l.delete(c);if(0!==l.size){if(1===l.size){const[t]=l.values(),i=this.cloneDefaultAxes(e);if(!("position"in t))return;return wu(i,e=>"position"in e&&e.position===t.position?t:e)}return Object.fromEntries(l)}}cloneDefaultAxes(e){const t=ca.getSeriesModule(e);return null!==t&&void 0!==t&&t.defaultAxes?Qg(t.defaultAxes):{}}predictAxesMissingTypesAndPositions(e,t,i,n){for(const[r,a]of fu(i)){if(!el(a))continue;if("type"in a&&"position"in a)continue;if(r in n){var o,s;null!==(o=a.type)&&void 0!==o||(a.type=n[r].type),null!==(s=a.position)&&void 0!==s||(a.position=n[r].position);continue}this.predictAxisMissingTypeFromPosition(a,n)||(this.predictAxisMissingTypeAndPositionFromSeries(e,t,r,a,n),"type"in a||delete i[r])}}predictAxisMissingTypeFromPosition(e,t){if(!("position"in e)||!cl(e.position,QR))return!1;for(const i of Object.values(t))if(cl(i.position,QR)&&QR[e.position]===QR[i.position])return e.type=i.type,!0;for(const[i,n]of fu(QR))if(e.position!==i&&n===QR[e.position])return e.type=t[n].type,!0;return!1}predictAxisMissingTypeAndPositionFromSeries(e,t,i,n,o){for(const l of null!==(s=e.series)&&void 0!==s?s:[]){var s;for(const e of t){var r,a;const t=this.getSeriesDirectionAxisKey(l,e);if(t&&cl(t,l)&&l[t]===i)return null!==(r=n.type)&&void 0!==r||(n.type=o[e].type),null!==(a=n.position)&&void 0!==a||(n.position=o[e].position),e===_u.Y}}return!1}alternateSecondaryAxisPositions(e,t,i){let n=0,o=0;for(const[s,r]of fu(t)){if(!el(r)||!("position"in r))continue;const t=i.get(s),a="axes"in e&&e.axes&&t&&t in e.axes?e.axes[t]:void 0,l=a&&"position"in a?a.position:void 0;if("top"===r.position||"bottom"===r.position?(n+=1,2===n&&null==l&&(r.position="top")):"left"!==r.position&&"right"!==r.position||(o+=1,2===o&&null==l&&(r.position="right")),n>1&&o>1)break}}processMiniChartSeriesOptions(e){var t;const i=null===(t=e.navigator)||void 0===t||null===(t=t.miniChart)||void 0===t?void 0:t.series;null!=i&&(e.navigator.miniChart.series=this.setSeriesGroupingOptions(i))}getSeriesGroupingOptions(e){const{groupable:t,stackable:i,stackedByDefault:n=!1}=ca.getSeriesModule(e.type);e.grouped&&!t&&jr.warnOnce('unsupported grouping of series type "'.concat(e.type,'".')),!e.stacked&&!e.stackGroup||i||jr.warnOnce('unsupported stacking of series type "'.concat(e.type,'".'));let{grouped:o,stacked:s}=e;return null!==s&&void 0!==s||(s=(n||null!=e.stackGroup)&&!(t&&o)),null!==o&&void 0!==o||(o=!0),{stacked:i&&s,grouped:t&&o&&!(i&&s)}}setSeriesGroupingOptions(t){const i=this.getSeriesGrouping(t);e.debug("ChartOptions.setSeriesGroupingOptions() - series grouping: ",i);const n={},o=i.reduce((e,t)=>{var i,n;return"default"===t.groupType||(null!==(i=e[n=t.seriesType])&&void 0!==i||(e[n]=0),e[t.seriesType]+="stack"===t.groupType?1:t.series.length),e},{});return i.flatMap(e=>{var t,i;switch(null!==(t=n[i=e.seriesType])&&void 0!==t||(n[i]=0),e.groupType){case"stack":{const t=n[e.seriesType]++;return e.series.map((i,n)=>Object.assign(i,{seriesGrouping:{groupId:e.groupId,groupIndex:t,groupCount:o[e.seriesType],stackIndex:n,stackCount:e.series.length}}))}case"group":return e.series.map(t=>Object.assign(t,{seriesGrouping:{groupId:e.groupId,groupIndex:n[e.seriesType]++,groupCount:o[e.seriesType],stackIndex:0,stackCount:0}}))}return e.series}).map(e=>{let{stacked:t,grouped:i}=e;return l(e,ub)})}getSeriesGroupId(e){var t;return[e.type,e.xKey,e.stacked?null!==(t=e.stackGroup)&&void 0!==t?t:"stacked":"grouped"].filter(Boolean).join("-")}getSeriesGrouping(e){const t=new Map;return e.reduce((e,i)=>{const n=i.type;if(i.stacked||i.grouped){const o=this.getSeriesGroupId(i);if(!t.has(o)){const s={groupType:i.stacked?"stack":"group",seriesType:n,series:[],groupId:o};t.set(o,s),e.push(s)}t.get(o).series.push(i)}else e.push({groupType:"default",seriesType:n,series:[i],groupId:"__default__"});return e},[])}soloSeriesIntegrity(e){if(!Ua(e.series))return;const t=e=>{var t,i;return null!==(t=null===(i=ca.getSeriesModule(e))||void 0===i?void 0:i.solo)&&void 0!==t&&t},i=e.series;if(i&&i.length>1&&i.some(e=>t(e.type))){const n=this.optionsType(e);if(t(n))jr.warn("series[0] of type '".concat(n,"' is incompatible with other series types. Only processing series[0]")),e.series=i.slice(0,1);else{const{solo:n,nonSolo:o}=Mr(i,e=>t(e.type)?"solo":"nonSolo"),s=wr(n.map(e=>e.type)).join(", ");jr.warn("Unable to mix these series types with the lead series type: ".concat(s)),e.series=o}}}static processFontOptions(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if("object"===typeof e&&"fontFamily"in e)if(Array.isArray(e.fontFamily)){const t=[];for(const i of e.fontFamily)"object"===typeof i&&"googleFont"in i?(t.push(i.googleFont),null===n||void 0===n||n.add(i.googleFont)):t.push(i);e.fontFamily=t.join(", ")}else"object"===typeof e.fontFamily&&"googleFont"in e.fontFamily&&(e.fontFamily=e.fontFamily.googleFont,null===n||void 0===n||n.add(e.fontFamily));return n}processFonts(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;return em(t,e.processFontOptions,new Set(["data","theme"]),void 0,void 0,i)}static removeDisabledOptionJson(e){if("enabled"in e&&!1===e.enabled)for(const t of Object.keys(e))"enabled"!==t&&delete e[t]}removeDisabledOptions(t){em(t,e.removeDisabledOptionJson,new Set(["data","theme","contextMenu"]))}static removeLeftoverSymbolsJson(e){if(e&&Qa(e))for(const t of Object.keys(e)){ll(e[t])&&delete e[t]}}removeLeftoverSymbols(t){em(t,e.removeLeftoverSymbolsJson,new Set(["data"]))}specialOverridesDefaults(e){if(null==e.window?e.window=Pr():Fr(e.window),null==e.document?e.document=Er():Or(e.document),null==e.window)throw new Error("AG Charts - unable to resolve global window");if(null==e.document)throw new Error("AG Charts - unable to resolve global document");return e}};JR.OPTIONS_CLONE_OPTS_SLOW={shallow:new Set(["data","container"]),assign:new Set(["context","theme"])},JR.OPTIONS_CLONE_OPTS_FAST={shallow:new Set(["container"]),assign:new Set(["data","context","theme"])},JR.JSON_DIFF_OPTS=new Set(["data"]),JR.perfDebug=Cr.create(!0,"perf"),JR.FAST_PATH_OPTIONS=new Set(["data","width","height","container"]),JR.debug=Cr.create(!0,"opts");var eE=JR,tE=Cr.create(!0,"opts"),iE="AG Charts - Chart was destroyed, cannot perform request.",nE=class{constructor(e,t,i){this.factoryApi=t,this.licenseManager=i,this.chart=e}async update(e){if(!this.chart)throw new Error(iE);return tE.group("AgChartInstance.update()",async()=>{var t;const i=Cr.check("scene:stats","scene:stats:verbose")?performance.now():void 0;this.factoryApi.update(e,this,void 0,i),await(null===(t=this.chart)||void 0===t?void 0:t.waitForUpdate())})}async updateDelta(e){if(!this.chart)throw new Error(iE);return tE.group("AgChartInstance.updateDelta()",async()=>{var t;const i=Cr.check("scene:stats","scene:stats:verbose")?performance.now():void 0;this.factoryApi.updateUserDelta(this,e,i),await(null===(t=this.chart)||void 0===t?void 0:t.waitForUpdate())})}getOptions(){if(!this.chart)throw new Error(iE);const e=Qg(this.chart.getOptions(),eE.OPTIONS_CLONE_OPTS_FAST);for(const t of Object.keys(e))t.startsWith("_")&&delete e[t];return e}waitForUpdate(){if(!this.chart)throw new Error(iE);return this.chart.waitForUpdate()}applyTransaction(e){const{chart:t}=this;if(!t)throw new Error(iE);if(null==e||"object"!==typeof e)throw new Error("AG Charts - applyTransaction expects a transaction object.");const{add:i,addIndex:n,remove:o,update:s}=e;if(null!=i&&!Array.isArray(i))throw new Error('AG Charts - transaction "add" must be an array.');if(null!=n){if("number"!==typeof n||!Number.isSafeInteger(n)||n<0)throw new Error('AG Charts - transaction "addIndex" must be a safe non-negative integer (0 to 9007199254740991).');if(null==i||0===i.length)throw new Error('AG Charts - transaction "addIndex" requires a non-empty "add" array.')}if(null!=o&&!Array.isArray(o))throw new Error('AG Charts - transaction "remove" must be an array.');if(null!=s&&!Array.isArray(s))throw new Error('AG Charts - transaction "update" must be an array.');return tE.group("AgChartInstance.applyTransaction()",async()=>{var i;if(!t.isDataTransactionSupported()){const i=t.data.deepClone();return i.addTransaction(e),i.commitPendingTransactions(),this.updateDelta({data:i.data})}return tE("transaction",e),await(null===(i=this.chart)||void 0===i?void 0:i.applyTransaction(e))})}async download(e){if(!this.chart)throw new Error(iE);const t=await this.prepareResizedChart(this,this.chart,e);try{var i;null===(i=t.chart)||void 0===i||i.download(null===e||void 0===e?void 0:e.fileName,null===e||void 0===e?void 0:e.fileFormat)}finally{t.destroy()}}async __toSVG(e){if(!this.chart)throw new Error(iE);const t=await this.prepareResizedChart(this,this.chart,p({width:600,height:300},e));try{var i;return null===t||void 0===t||null===(i=t.chart)||void 0===i?void 0:i.toSVG()}finally{null===t||void 0===t||t.destroy()}}async getImageDataURL(e){if(!this.chart)throw new Error(iE);const t=await this.prepareResizedChart(this,this.chart,e);try{return t.chart.getCanvasDataURL(null===e||void 0===e?void 0:e.fileFormat)}finally{t.destroy()}}getState(){return this.factoryApi.caretaker.save(...this.getEnabledOriginators())}async setState(e){const{chart:t}=this;if(!t)return;const i=this.getEnabledOriginators();i.includes(t.ctx.legendManager)?(await this.setStateOriginators(e,i.filter(e=>e!==t.ctx.zoomManager)),await this.setStateOriginators(e,[t.ctx.zoomManager])):await this.setStateOriginators(e,i)}resetAnimations(){var e;null===(e=this.chart)||void 0===e||e.resetAnimations()}skipAnimations(){var e;null===(e=this.chart)||void 0===e||e.skipAnimations()}destroy(){this.releaseChart?(this.releaseChart(),this.releaseChart=void 0):this.chart&&(this.chart.publicApi=void 0,this.chart.destroy()),this.chart=void 0}async prepareResizedChart(e,t){var i,n,o,s,r,a,l,d,c;let u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const h=null!==(i=null!==(n=u.width)&&void 0!==n?n:t.width)&&void 0!==i?i:t.ctx.scene.canvas.width,g=null!==(o=null!==(s=u.height)&&void 0!==s?s:t.height)&&void 0!==o?o:t.ctx.scene.canvas.height,m=e.getState(),f=p(p({},t.chartOptions.processedOverrides),{},{container:document.createElement("div"),width:h,height:g});null!=u.width&&null!=u.height&&(f.overrideDevicePixelRatio=1);const v=t.getOptions();var y;ca.isEnterprise()&&(f.animation={enabled:!1},null!==(y=this.licenseManager)&&void 0!==y&&y.isDisplayWatermark()&&(f.foreground={text:this.licenseManager.getWatermarkMessage(),image:{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=",width:170,height:25,right:25,bottom:50,opacity:.7}}));const b=p({},t.chartOptions.specialOverrides),x=p({},t.chartOptions.optionMetadata),C=await(null===(r=this.chart)||void 0===r?void 0:r.ctx.dataService.getData()),S=this.factoryApi.create(v,f,b,x,C);await S.setState(m);null===(a=S.chart)||void 0===a||a.ctx.zoomManager.updateZoom({source:"chart-update",sourceDetail:"internal-prepareResizedChart"},t.ctx.zoomManager.getZoom()),null===(l=S.chart)||void 0===l||l.ctx.legendManager.clearData(),null===(d=S.chart)||void 0===d||d.ctx.legendManager.update(t.ctx.legendManager.getData());for(const[p,I]of t.series.entries())S.chart.series[p].visible=I.visible;const w=[];for(const p of t.modulesManager.legends()){var M,k;w.push(null!==(M=null===(k=p.legend.pagination)||void 0===k?void 0:k.currentPage)&&void 0!==M?M:0)}for(const p of S.chart.modulesManager.legends()){var D;const e=null!==(D=w.shift())&&void 0!==D?D:0;p.legend.pagination&&p.legend.pagination.setPage(e)}return null===(c=S.chart)||void 0===c||c.update(Ku.FULL,{forceNodeDataRefresh:!0}),await S.waitForUpdate(),S}getEnabledOriginators(){var e,t,i,n;if(!this.chart)return[];const{chartOptions:{processedOptions:o,optionMetadata:s},ctx:{annotationManager:r,chartTypeOriginator:a,zoomManager:l,legendManager:d},modulesManager:c}=this.chart,u=[];"annotations"in o&&null!==(e=o.annotations)&&void 0!==e&&e.enabled&&u.push(r);"price-volume"===s.presetType&&u.push(a),(null!==(t=o.navigator)&&void 0!==t&&t.enabled||null!==(i=o.zoom)&&void 0!==i&&i.enabled)&&u.push(l);return c.isEnabled("legend")&&!1!==(null===(n=o.legend)||void 0===n?void 0:n.enabled)&&u.push(d),u}async setStateOriginators(e,t){var i,n;this.factoryApi.caretaker.restore(e,...t),null===(i=this.chart)||void 0===i||i.ctx.updateService.update(Ku.PROCESS_DATA,{forceNodeDataRefresh:!0}),await(null===(n=this.chart)||void 0===n?void 0:n.waitForUpdate())}};nE.chartInstances=new WeakMap,Ab([ng({oldValue(e){e.destroyed||(e.publicApi=void 0),nE.chartInstances.delete(e)},newValue(e){e&&(e.publicApi=this,nE.chartInstances.set(e,this))}})],nE.prototype,"chart",2);var oE=nE,sE=class e{constructor(e,t,i,n,o){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1e3;this.name=e,this.buildItem=t,this.releaseItem=i,this.destroyItem=n,this.maxPoolSize=o,this.cleanupTimeMs=s,this.freePool=[],this.busyPool=new Set}static getPool(t,i,n,o,s){return this.pools.has(t)||this.pools.set(t,new e(t,i,n,o,s)),this.pools.get(t)}isFull(){return this.freePool.length+this.busyPool.size>=this.maxPoolSize}hasFree(){return this.freePool.length>0}obtain(t){if(!this.hasFree()&&this.isFull())throw new Error("AG Charts - pool exhausted");let i=this.freePool.pop();return null==i?(i=this.buildItem(t),e.debug(()=>["Pool[name=".concat(this.name,"]: Created instance (").concat(this.freePool.length," / ").concat(this.busyPool.size+1," / ").concat(this.maxPoolSize,")"),i])):e.debug(()=>["Pool[name=".concat(this.name,"]: Re-used instance (").concat(this.freePool.length," / ").concat(this.busyPool.size+1," / ").concat(this.maxPoolSize,")"),i]),this.busyPool.add(i),{item:i,release:()=>this.release(i)}}obtainFree(){const t=this.freePool.pop();if(null==t)throw new Error("AG Charts - pool has no free instances");return e.debug(()=>["Pool[name=".concat(this.name,"]: Re-used instance (").concat(this.freePool.length," / ").concat(this.busyPool.size+1," / ").concat(this.maxPoolSize,")"),t]),this.busyPool.add(t),{item:t,release:()=>this.release(t)}}release(t){var i;if(!this.busyPool.has(t))throw new Error("AG Charts - cannot free item from pool which is not tracked as busy.");e.debug(()=>["Pool[name=".concat(this.name,"]: Releasing instance (").concat(this.freePool.length," / ").concat(this.busyPool.size," / ").concat(this.maxPoolSize,")"),t]),this.releaseItem(t),this.busyPool.delete(t),this.freePool.push(t),e.debug(()=>["Pool[name=".concat(this.name,"]: Returned instance to free pool (").concat(this.freePool.length," / ").concat(this.busyPool.size," / ").concat(this.maxPoolSize,")"),t]);const n=Date.now(),o=n+.5*this.cleanupTimeMs;this.cleanPoolTimer&&(null!==(i=this.cleanPoolDue)&&void 0!==i?i:1/0)<o&&(clearTimeout(this.cleanPoolTimer),this.cleanPoolTimer=void 0),this.cleanPoolTimer||(this.cleanPoolDue=n+this.cleanupTimeMs,this.cleanPoolTimer=setTimeout(this.cleanPool.bind(this),this.cleanupTimeMs))}cleanPool(){const t=this.freePool.splice(0);for(const e of t)this.destroyItem(e);e.debug(()=>["Pool[name=".concat(this.name,"]: Cleaned pool of ").concat(t.length," items (").concat(this.freePool.length," / ").concat(this.busyPool.size," / ").concat(this.maxPoolSize,")")])}destroy(){this.cleanPool();for(const e of this.busyPool.values())this.destroyItem(e);this.busyPool.clear()}};sE.pools=new Map,sE.debug=Cr.create(!0,"pool");var rE=sE,aE=Cr.create(!0,"opts"),lE=class{static licenseCheck(e){var t,i;this.licenseChecked||(this.licenseManager=null===(t=da.licenseManager)||void 0===t?void 0:t.call(da,e),null===(i=this.licenseManager)||void 0===i||i.validateLicense(),this.licenseChecked=!0)}static getLicenseDetails(e){var t;return null===(t=da.licenseManager)||void 0===t?void 0:t.call(da,{}).getLicenseDetails(e)}static getInstance(e){return cE.getInstance(e)}static create(e,t){const i=Cr.check("scene:stats","scene:stats:verbose")?performance.now():void 0;return aE.group("AgCharts.create()",()=>{var n,o;e=null!==(n=Cr.inDevelopmentMode(()=>Eu(Qg(e))))&&void 0!==n?n:e,this.licenseCheck(e);const s=cE.createOrUpdate({userOptions:e,licenseManager:this.licenseManager,optionsMetadata:t,apiStartTime:i});var r;null!==(o=this.licenseManager)&&void 0!==o&&o.isDisplayWatermark()&&this.licenseManager&&(null===(r=da.injectWatermark)||void 0===r||r.call(da,s.chart.ctx.domManager,this.licenseManager.getWatermarkMessage()));return s})}static createFinancialChart(e){return aE.group("AgCharts.createFinancialChart()",()=>this.create(e,{presetType:"price-volume"}))}static createGauge(e){return aE.group("AgCharts.createGauge()",()=>this.create(e,{presetType:"gauge-preset"}))}static __createSparkline(e){return aE.group("AgCharts.__createSparkline()",()=>{const{pool:t}=e,i=l(e,hb);return this.create(i,{presetType:"sparkline",pool:null===t||void 0===t||t,domMode:"minimal",withDragInterpretation:!1})})}};lE.licenseChecked=!1;var dE=class e{static getInstance(e){const t=fA.getInstance(e);return t?oE.chartInstances.get(t):void 0}static createOrUpdate(t){var i,n,o,s,r,a,d,c;let{proxy:u}=t;const{userOptions:h,licenseManager:g,processedOverrides:m=(null!==(i=null===(n=u)||void 0===n||null===(n=n.chart)||void 0===n?void 0:n.chartOptions.processedOverrides)&&void 0!==i?i:{}),specialOverrides:f=(null!==(o=null===(s=u)||void 0===s||null===(s=s.chart)||void 0===s?void 0:s.chartOptions.specialOverrides)&&void 0!==o?o:{}),optionsMetadata:v=(null!==(r=null===(a=u)||void 0===a||null===(a=a.chart)||void 0===a?void 0:a.chartOptions.optionMetadata)&&void 0!==r?r:{}),deltaOptions:y,data:b,stripSymbols:x=!1,apiStartTime:C}=t,S=null==da.styles?[]:[["ag-charts-enterprise",da.styles]];if(ca.listModules().next().done)throw new Error(["AG Charts - No modules have been registered.","","Call ModuleRegistry.registerModules(...) with the modules you need before using AgCharts.create().","","See https://www.ag-grid.com/charts/r/module-registry/ for more details."].join("\n"));aE(()=>[">>> AgCharts.createOrUpdate() user options",Qg(h)]);const{presetType:w}=v;let M=h;lE.optionsMutationFn&&M&&(M=lE.optionsMutationFn(Qg(M,eE.OPTIONS_CLONE_OPTS_FAST),w),aE(()=>[">>> AgCharts.createOrUpdate() MUTATED user options",Qg(M)]));const k=this.getPool(v);let D,I=!1,A=null===(d=u)||void 0===d?void 0:d.chart;null==A&&null!==k&&void 0!==k&&k.hasFree()&&(D=k.obtainFree(),A=D.item);const L=null!==M&&void 0!==M?M:{},{document:N,window:T,styleContainer:R}=L,E=l(L,pb),P=null===(c=A)||void 0===c?void 0:c.getChartOptions(),O=new eE(P,E,m,p(p({},f),{},{document:N,window:T,styleContainer:R}),v,y,x,C);var F,z,B,V;null!=A&&cI(O.processedOptions)===cI(A.chartOptions.processedOptions)||(null===(F=D)||void 0===F||F.release(),D=null===(z=this.getPool(O.optionMetadata))||void 0===z?void 0:z.obtain(O),D?A=D.item:(I=!0,A=e.createChartInstance(O,A)));O.optionsGraph&&A.ctx.optionsGraphService.updateCallback((e,t,i)=>{var n;return null===(n=O.optionsGraph)||void 0===n?void 0:n.resolvePartial(e,t,i)});for(const[e,l]of S)A.ctx.domManager.addStyles(e,l);if(A.ctx.fontManager.updateFonts(O.googleFonts),null!=b&&A.ctx.dataService.restoreData(b),null==u)u=new oE(A,e.callbackApi,g),u.releaseChart=null===(B=D)||void 0===B?void 0:B.release;else if(D||I){var G,H,j;null===(G=(H=u).releaseChart)||void 0===G||G.call(H),u.chart=A,u.releaseChart=null===(j=D)||void 0===j?void 0:j.release}aE.check()&&"undefined"!==typeof globalThis.window&&(null!==(V=globalThis.agChartInstances)&&void 0!==V||(globalThis.agChartInstances={}),globalThis.agChartInstances[A.id]=A);return A.queuedUserOptions.push(O.userOptions),A.queuedChartOptions.push(O),A.requestFactoryUpdate(e=>{aE.group(">>>> Chart.applyOptions()",()=>{e.applyOptions(O);const t=e.queuedUserOptions.indexOf(O.userOptions)+1;e.queuedUserOptions.splice(0,t),e.queuedChartOptions.splice(0,t)})}),u}static updateUserDelta(t,i,n){const o=em(i=Qg(i,eE.OPTIONS_CLONE_OPTS_FAST),e.markRemovedProperties,new Set(["data"]),void 0,void 0,!1);aE(()=>[">>> AgCharts.updateUserDelta() user delta",Qg(i)]),e.createOrUpdate({proxy:t,deltaOptions:i,stripSymbols:o,apiStartTime:n})}static createChartInstance(e,t){const i=null===t||void 0===t?void 0:t.destroy({keepTransferableResources:!0}),n=cI(e.processedOptions);return ca.getChartModule(n).create(e,i)}static getPool(e){var t;if(!0===e.pool)return rE.getPool(null!==(t=e.presetType)&&void 0!==t?t:"default",this.createChartInstance,this.detachAndClear,this.destroy,1/0)}};dE.caretaker=new Wu(GC),dE.callbackApi={caretaker:dE.caretaker,create:(e,t,i,n,o)=>dE.createOrUpdate({userOptions:e,processedOverrides:t,specialOverrides:i,optionsMetadata:n,data:o}),update:(e,t,i,n)=>dE.createOrUpdate({userOptions:e,proxy:t,specialOverrides:i,apiStartTime:n}),updateUserDelta:(e,t,i)=>dE.updateUserDelta(e,t,i)},dE.markRemovedProperties=(e,t,i,n)=>{let o=null!==n&&void 0!==n&&n;if("object"!==typeof e||null==e)return o;for(const s of vu(e)){void 0===e[s]&&(Object.assign(e,{[s]:Symbol("UNSET")}),o||(o=!0))}return o},dE.detachAndClear=e=>e.detachAndClear(),dE.destroy=e=>e.destroy();var cE=dE,uE={};Db(uE,{APPROXIMATE_THRESHOLD:()=>1e3,AbstractBarSeries:()=>TP,AbstractBarSeriesProperties:()=>NP,AggregationManager:()=>JO,AnchoredPopover:()=>RF,ApproximateOrdinalTimeScale:()=>vF,Arc:()=>xF,Axis:()=>LD,AxisGroupZIndexMap:()=>kD,AxisInterval:()=>mD,AxisLabel:()=>fD,AxisTick:()=>yD,BBox:()=>Pb,Background:()=>RC,BandScale:()=>pk,BaseToolbar:()=>BF,Caption:()=>EC,CartesianAxis:()=>sI,CartesianCrossLine:()=>pD,CartesianSeries:()=>XE,CartesianSeriesNodeEvent:()=>$E,CartesianSeriesProperties:()=>ZE,CategoryAxis:()=>uP,CategoryScale:()=>TD,Chart:()=>fA,ChartAxes:()=>PC,ChartOptions:()=>eE,CollapseMode:()=>WP,ColorScale:()=>Jb,ContextMenuRegistry:()=>zM,ContinuousScale:()=>ck,DEFAULT_CARTESIAN_DIRECTION_KEYS:()=>UE,DEFAULT_CARTESIAN_DIRECTION_NAMES:()=>YE,DEFAULT_POLAR_DIRECTION_KEYS:()=>zO,DEFAULT_POLAR_DIRECTION_NAMES:()=>BO,DIRECTION_SWAP_AXES:()=>xA,DOMManager:()=>nS,DataController:()=>Hk,DataModel:()=>Qw,DataModelSeries:()=>KE,DataSet:()=>jk,DiscreteTimeAxis:()=>tF,DraggablePopover:()=>PF,DropShadow:()=>rF,ExtendedPath2D:()=>yx,FILL_GRADIENT_BLANK_DEFAULTS:()=>kA,FILL_GRADIENT_CONIC_SERIES_DEFAULTS:()=>PA,FILL_GRADIENT_LINEAR_DEFAULTS:()=>DA,FILL_GRADIENT_LINEAR_HIERARCHY_DEFAULTS:()=>IA,FILL_GRADIENT_LINEAR_KEYED_DEFAULTS:()=>LA,FILL_GRADIENT_LINEAR_SINGLE_DEFAULTS:()=>AA,FILL_GRADIENT_RADIAL_REVERSED_DEFAULTS:()=>TA,FILL_GRADIENT_RADIAL_REVERSED_SERIES_DEFAULTS:()=>EA,FILL_GRADIENT_RADIAL_SERIES_DEFAULTS:()=>RA,FILL_IMAGE_BLANK_DEFAULTS:()=>HA,FILL_IMAGE_DEFAULTS:()=>GA,FILL_PATTERN_BLANK_DEFAULTS:()=>zA,FILL_PATTERN_DEFAULTS:()=>OA,FILL_PATTERN_HIERARCHY_DEFAULTS:()=>BA,FILL_PATTERN_KEYED_DEFAULTS:()=>VA,FILL_PATTERN_SINGLE_DEFAULTS:()=>FA,FillGradientDefaults:()=>YM,FillImageDefaults:()=>ZM,FillPatternDefaults:()=>$M,FloatingToolbar:()=>HF,FormatManager:()=>HS,Group:()=>Gx,HierarchyHighlightState:()=>GO,HierarchyNode:()=>_O,HierarchySeries:()=>KO,HierarchySeriesProperties:()=>jO,HighlightManager:()=>VM,HighlightProperties:()=>_M,HighlightState:()=>GM,Image:()=>bF,InteractionManager:()=>TM,InteractionState:()=>NM,LABEL_BOXING_DEFAULTS:()=>WA,LARGEST_KEY_INTERVAL:()=>pM,LEGEND_CONTAINER_THEME:()=>YA,Label:()=>iD,LayoutElement:()=>Dk,Line:()=>eD,LinearScale:()=>VE,LogScale:()=>TE,Marker:()=>FI,Menu:()=>EF,MercatorScale:()=>qO,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>Yk,NativeWidget:()=>uS,NiceMode:()=>xD,Node:()=>_b,OrdinalTimeScale:()=>VD,Path:()=>cC,PointerEvents:()=>jb,PolarAxis:()=>eF,PolarSeries:()=>VO,QuadtreeNearest:()=>OE,RadialColumnShape:()=>SF,Range:()=>sD,Rect:()=>pC,Rotatable:()=>Ex,RotatableText:()=>NC,SAFE_FILLS_OPERATION:()=>SA,SAFE_FILL_OPERATION:()=>CA,SAFE_RANGE2_OPERATION:()=>MA,SAFE_STROKE_FILL_OPERATION:()=>wA,SEGMENTATION_DEFAULTS:()=>$A,SMALLEST_KEY_INTERVAL:()=>hM,Scalable:()=>Ox,ScalableGroup:()=>Hx,Scene:()=>kS,Sector:()=>kF,SectorBox:()=>yF,SegmentedPath:()=>RE,Selection:()=>Jk,Series:()=>MI,SeriesItemHighlightStyle:()=>WM,SeriesMarker:()=>sP,SeriesNodeEvent:()=>xI,SeriesNodePickMode:()=>bI,SeriesProperties:()=>XM,SeriesTooltip:()=>lP,Shape:()=>Dx,SliderWidget:()=>pS,StopProperties:()=>ox,SvgPath:()=>mF,Text:()=>LC,TimeAxisParentLevel:()=>HE,TimeScale:()=>OD,Toolbar:()=>VF,ToolbarButtonWidget:()=>FF,ToolbarWidget:()=>mS,TooltipManager:()=>nk,Transformable:()=>Bx,TransformableGroup:()=>Wx,TransformableText:()=>TC,Translatable:()=>Fx,TranslatableGroup:()=>jx,TranslatableSvgPath:()=>fF,UnitTimeScale:()=>jD,ZoomManager:()=>kk,accumulativeValueProperty:()=>dM,addHitTestersToQuadtree:()=>AP,adjustLabelPlacement:()=>tP,angleCategoryAxisOptionsDefs:()=>cN,angleNumberAxisOptionsDefs:()=>dN,animationValidation:()=>SM,annotationCalloutStylesDefs:()=>qN,annotationChannelTextDefs:()=>GN,annotationCommentStylesDefs:()=>QN,annotationCrossLineStyleDefs:()=>UN,annotationDisjointChannelStyleDefs:()=>$N,annotationFibonacciStylesDefs:()=>XN,annotationLineStyleDefs:()=>KN,annotationLineTextDefs:()=>VN,annotationMeasurerStylesDefs:()=>tT,annotationNoteStylesDefs:()=>JN,annotationOptionsDef:()=>nT,annotationParallelChannelStyleDefs:()=>ZN,annotationQuickMeasurerStylesDefs:()=>iT,annotationShapeStylesDefs:()=>eT,annotationTextStylesDef:()=>BN,boxPlotSeriesThemeableOptionsDef:()=>lT,buildResetPathFn:()=>OO,calculateDataDiff:()=>wO,calculateLabelTranslation:()=>oF,calculateSegments:()=>yE,candlestickSeriesThemeableOptionsDef:()=>uT,checkCrisp:()=>hO,chordSeriesThemeableOptionsDef:()=>hT,clippedRoundRect:()=>hC,collapsedStartingBarPosition:()=>gO,computeBarFocusBounds:()=>bO,computeMarkerFocusBounds:()=>NO,coneFunnelSeriesThemeableOptionsDef:()=>pT,createDatumId:()=>AM,diff:()=>IM,drawCorner:()=>dC,drawMarkerUnitPolygon:()=>EI,findQuadtreeMatch:()=>LP,fixNumericExtent:()=>lw,fromToMotion:()=>$k,funnelSeriesThemeableOptionsDef:()=>gT,generateTicks:()=>eI,getColorStops:()=>rx,getCrossLineValue:()=>rD,getItemStyles:()=>tk,getItemStylesPerItemId:()=>ik,getLabelStyles:()=>QE,getMarkerStyles:()=>RO,getMissCount:()=>dw,getRadialColumnWidth:()=>wF,getShapeFill:()=>vI,getShapeStyle:()=>yI,groupAccumulativeValueProperty:()=>uM,heatmapSeriesThemeableOptionsDef:()=>mT,interpolatePoints:()=>rO,isTooltipValueMissing:()=>VI,keyProperty:()=>sM,makeSeriesTooltip:()=>dP,mapLineBackgroundSeriesThemeableOptionsDef:()=>yT,mapLineSeriesThemeableOptionsDef:()=>vT,mapMarkerSeriesThemeableOptionsDef:()=>bT,mapShapeBackgroundSeriesThemeableOptionsDef:()=>CT,mapShapeSeriesThemeableOptionsDef:()=>xT,markerEnabled:()=>TO,markerFadeInAnimation:()=>kO,markerSeriesHighlightStyle:()=>KA,markerSwipeScaleInAnimation:()=>DO,midpointStartingBarPosition:()=>mO,minimumTimeAxisDatumGranularity:()=>WE,motion:()=>WF,multiSeriesHighlightStyle:()=>_A,nightingaleSeriesThemeableOptionsDef:()=>wT,normaliseGroupTo:()=>fM,ohlcSeriesThemeableOptionsDef:()=>fT,ordinalTimeAxisOptionsDefs:()=>lN,pairUpSpans:()=>sO,pathFadeInAnimation:()=>PO,pathMotion:()=>sF,pathSwipeInAnimation:()=>EO,plotAreaPathFill:()=>xO,plotInterpolatedLinePathStroke:()=>dO,plotLinePathStroke:()=>lO,predictCartesianFinancialAxis:()=>SE,predictCartesianNonPrimitiveAxis:()=>CE,prepareAreaFillAnimationFns:()=>SO,prepareBarAnimationFunctions:()=>fO,prepareLinePathPropertyAnimation:()=>uO,processedDataIsAnimatable:()=>eM,pyramidSeriesThemeableOptionsDef:()=>MT,radarAreaSeriesThemeableOptionsDef:()=>kT,radarLineSeriesThemeableOptionsDef:()=>DT,radialBarSeriesThemeableOptionsDef:()=>IT,radialColumnSeriesThemeableOptionsDef:()=>AT,radiusCategoryAxisOptionsDefs:()=>hN,radiusNumberAxisOptionsDefs:()=>uN,rangeAreaSeriesThemeableOptionsDef:()=>RT,rangeBarSeriesThemeableOptionsDef:()=>PT,resetAxisLabelSelectionFn:()=>MD,resetBarSelectionsDirect:()=>yO,resetBarSelectionsFn:()=>vO,resetLabelFn:()=>oP,resetMarkerFn:()=>IO,resetMarkerPositionFn:()=>LO,resetMarkerSelectionsDirect:()=>AO,resetMotion:()=>Qk,sankeySeriesThemeableOptionsDef:()=>OT,sectorBox:()=>aF,seriesLabelFadeInAnimation:()=>iP,seriesLabelFadeOutAnimation:()=>nP,singleSeriesHighlightStyle:()=>UA,stackCartesianSeries:()=>qE,standaloneChartOptionsDefs:()=>fE,sunburstSeriesThemeableOptionsDef:()=>FT,toHierarchyHighlightString:()=>HO,toHighlightString:()=>jM,topologyChartOptionsDefs:()=>mE,trailingAccumulatedValueProperty:()=>cM,treemapSeriesThemeableOptionsDef:()=>zT,updateClipPath:()=>FO,updateLabelNode:()=>JE,userInteraction:()=>Mk,validateCrossLineValue:()=>aD,valueProperty:()=>rM,visibleRangeIndices:()=>JM,waterfallSeriesThemeableOptionsDef:()=>VT});var hE={mode:gd(Gd("integrated","standalone")),container:Ld,context:()=>!0,theme:kd,series:xd,annotations:kd,navigator:kd,initialState:{chartType:Ad,annotations:kd,legend:Kd({visible:Cd,seriesId:Ad,itemId:Ad,legendItemName:Ad},"legend state array"),zoom:kd}},pE=p(p(p({},Kc),hE),{},{axes:Id,data:xd}),gE=p(p(p({},Kc),hE),{},{axes:Id,data:xd}),mE=p(p(p({},Kc),hE),{},{data:xd,topology:Ug}),fE=p(p(p({},Kc),hE),{},{data:xd});function vE(e){return e.isReversed()!==e.range[1]<e.range[0]}function yE(e,t,i,n,o){var s,r;let a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(0===t.scale.domain.length||0===i.scale.domain.length)return;const d=e.key===_u.X?t:i,{scale:c,direction:u}=d,h=u===_u.X,g=null!==(s=c.bandwidth)&&void 0!==s?s:0,m=a?((null!==(r=c.step)&&void 0!==r?r:0)-g)/2:0,f=Math.max(n.x,o.width-(n.x+n.width)),v=Math.max(n.y,o.height-(n.y+n.height)),y=()=>vE(h?t:i)?h?n.width+f:n.height+v:h?-f:-v,b=()=>vE(h?t:i)?h?-f:-v:h?n.width+f:n.height+v;return(e=>{const t=[];let i=-1;for(let s=0;s<e.length;s++){var n,o;if(tl(e[s]))continue;const r=e[s],{start:a,stop:d}=r,u=l(r,gb),h=null===(n=e[i])||void 0===n?void 0:n.stop,g=null===(o=e.slice(s+1).find(e=>null!=e.start))||void 0===o?void 0:o.start;let f=c.convert(null!==a&&void 0!==a?a:h)-m,v=c.convert(null!==d&&void 0!==d?d:g)+2*m;const x=null!=a&&Number.isNaN(f),C=null!=d&&Number.isNaN(v);x||C||(Number.isNaN(f)&&(f=y()),Number.isNaN(v)&&(v=b()),null!=d&&(i=s),t.push(p({start:f,stop:v},u)))}return t})(e.segments).map(e=>{let{stop:t,start:i}=e,o=l(e,mb);return p({clipRect:{x0:h?i:-f,y0:h?-v:i,x1:h?t+g:n.width+f,y1:h?n.height+v:t+g}},o)})}var bE=new Set(["time","timestamp","date","datetime"]);function xE(e,t,i){let{allowPrimitiveTypes:n=!0}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e!==_u.X&&e!==_u.Y)return;if(!Qa(t))return;const o=wE(e,i);if(null==o||!(o in t))return;const s=t[o],r=ME(e,i),a=function(e){if(Ua(e)&&e.every(il))return zh.GROUPED_CATEGORY}(s);if(a)return{type:a,position:r};const l=function(e,t){if($a(t)||bE.has(e)&&nl(t))return zh.TIME}(o,s);return l?{type:l,position:r}:n?"number"===typeof s?{type:zh.NUMBER,position:r}:{type:zh.CATEGORY,position:r}:void 0}function CE(e,t,i){return xE(e,t,i,{allowPrimitiveTypes:!1})}function SE(e,t,i){if(e!==_u.X)return;if(!Qa(t))return;const n=wE(e,i);if(null==n||!(n in t))return;const o=t[n],s=ME(e,i),r=function(e,t){if($a(t)||bE.has(e)&&nl(t))return zh.ORDINAL_TIME}(n,o);return r?{type:r,position:s}:il(o)?{type:"category",position:s}:void 0}function wE(e,t){return e===_u.X&&"xKey"in t?t.xKey:e===_u.Y&&"yKey"in t?t.yKey:void 0}function ME(e,t){return"direction"in t&&"horizontal"===t.direction?e===_u.X?Fh.LEFT:Fh.BOTTOM:e===_u.X?Fh.BOTTOM:Fh.LEFT}var kE={2:(e,t)=>Math.log2(t),[Math.E]:(e,t)=>Math.log(t),10:(e,t)=>Math.log10(t)},DE=(e,t)=>Math.log(t)/Math.log(e);function IE(e,t,i){var n;const o=Math.min(...t),s=null!==(n=kE[e])&&void 0!==n?n:DE;return o>=0?s(e,i):-s(e,-i)}var AE={[Math.E]:(e,t)=>Math.exp(t),10:(e,t)=>t>=0?10**t:1/10**-t},LE=(e,t)=>e**t;function NE(e,t,i){var n;const o=Math.min(...t),s=null!==(n=AE[e])&&void 0!==n?n:LE;return o>=0?s(e,i):-s(e,-i)}var TE=class e extends ck{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1,10],arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,1]),this.type="log",this.defaultClamp=!0,this.base=10,this.log=e=>IE(this.base,this.domain,e),this.pow=e=>NE(this.base,this.domain,e)}static is(t){return t instanceof e}transform(e){const[t,i]=$u(this.domain);return t>=0!==i>=0?Number.NaN:t>=0?Math.log(e):-Math.log(-e)}transformInvert(e){const[t,i]=$u(this.domain);return t>=0!==i>=0?Number.NaN:t>=0?Math.exp(e):-Math.exp(-e)}toDomain(e){return e}niceDomain(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.domain;if(t.length<2)return[];const{base:i}=this,[n,o]=t,s=n>o?Math.ceil:Math.floor,r=n>o?Math.floor:Math.ceil,a=NE(i,t,s(IE(i,t,n))),l=NE(i,t,r(IE(i,t,o)));return[e.nice[0]?a:t[0],e.nice[1]?l:t[1]]}ticks(e){let{interval:t,tickCount:i=ck.defaultTickCount}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.domain,o=arguments.length>2?arguments[2]:void 0;if(!n||n.length<2||i<1)return;const s=this.base,[r,a]=n,l=Math.min(r,a),d=Math.max(r,a);let c=this.log(l),u=this.log(d);if(t){const e=e=>e>=l&&e<=d,i=Math.min(Math.abs(t),Math.abs(u-c)),{ticks:n,count:s,firstTickIndex:r}=qf(c,u,i,o),a=n.map(this.pow).filter(e);if(!Qf(a.length,this.getPixelRange()))return{ticks:a,count:s,firstTickIndex:r}}if(!Ha(s)||u-c>=i){const e=Math.min(u-c,i),{ticks:t,count:n,firstTickIndex:s}=Wf(c,u,e,void 0,void 0,o);return{ticks:t.map(this.pow),count:n,firstTickIndex:s}}const h=[],p=l>0;c=Math.floor(c)-1,u=Math.round(u)+1;const g=Zu(this.range)/i;let m=1/0;for(let f=c;f<=u;f++){const e=this.convert(this.pow(f+1));for(let t=1;t<s;t++){const i=p?t:s-t+1,n=this.pow(f)*i,o=this.convert(n),r=Math.abs(m-o),a=Math.abs(o-e);n>=l&&n<=d&&(1===t||r>=g&&a>=g||0===h.length)&&(h.push(n),m=o)}}return $b(h,p,o)}},RE=class extends cC{constructor(){super(...arguments),this.segmentPath=new cC}drawPath(e){if(!this.segments||0===this.segments.length)return void super.drawPath(e);e.save();const t=new Path2D;EE(t,{x0:0,y0:0,x1:e.canvas.width,y1:e.canvas.height},!1);for(const n of this.segments)EE(t,n.clipRect);e.clip(t),super.drawPath(e),e.restore();const{segmentPath:i}=this;i.setProperties({opacity:this.opacity,visible:this.visible,lineCap:this.lineCap,lineJoin:this.lineJoin,pointerEvents:this.pointerEvents});for(const n of this.segments){const{clipRect:t,fill:o,stroke:s}=n,r=l(n,fb);e.save(),i.path=this.path,i.setProperties(r),i.fill=null==this.fill?"none":o,i.stroke=null==this.stroke?"none":s;const a=new Path2D;EE(a,t),e.clip(a),i.drawPath(e),e.restore()}}};function EE(e,t){let{x0:i,y0:n,x1:o,y1:s}=t,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=Math.min(i,o),l=Math.min(n,s),d=Math.max(i,o),c=Math.max(n,s);e.moveTo(a,l),r?(e.lineTo(d,l),e.lineTo(d,c),e.lineTo(a,c)):(e.lineTo(a,c),e.lineTo(d,c),e.lineTo(d,l)),e.closePath()}Ab([Ky()],RE.prototype,"segments",2);var PE=class extends jx{constructor(){super(...arguments),this.segments=[],this.scalablePath=new(Ox(cC))}renderInContext(e){var t;if(!this.visible)return;const{ctx:i}=e;if(!this.segments||0===(null===(t=this.segments)||void 0===t?void 0:t.length))return super.renderInContext(e);i.save();const n=new Path2D;EE(n,{x0:0,y0:0,x1:i.canvas.width,y1:i.canvas.height},!1);for(const s of this.segments)EE(n,s.clipRect);i.clip(n);for(const s of this.children())s.visible&&s.render(e);i.restore();const{scalablePath:o}=this;for(const s of this.segments){const{clipRect:t}=s,n=l(s,vb);i.save();const r=new Path2D;EE(r,t),i.clip(r),o.setProperties(n);for(const i of this.children())i.visible&&i instanceof cC&&(o.path=i.path,o.setProperties(p({opacity:i.opacity,lineCap:i.lineCap,lineJoin:i.lineJoin},Px(i)&&{scalingX:i.scalingX,scalingY:i.scalingY,scalingCenterX:i.scalingCenterX,scalingCenterY:i.scalingCenterY})),o.render(e));i.restore()}}};Ab([Ky()],PE.prototype,"segments",2);var OE=class{constructor(e,t,i){this.root=new BE(e,t,i)}clear(e){this.root.clear(e)}addValue(e,t){const i={hitTester:e,value:t,distanceSquared:(t,i)=>e.distanceSquared(t,i)};this.root.addElem(i)}find(e,t){const i={best:{nearest:void 0,distanceSquared:1/0}};return this.root.find(e,t,i),i.best}},FE=class{constructor(e,t,i,n){this.nw=e,this.ne=t,this.sw=i,this.se=n}addElem(e){this.nw.addElem(e),this.ne.addElem(e),this.sw.addElem(e),this.se.addElem(e)}find(e,t,i){this.nw.find(e,t,i),this.ne.find(e,t,i),this.sw.find(e,t,i),this.se.find(e,t,i)}},zE=class{constructor(e,t,i){this.capacity=e,this.maxdepth=t,this.boundary=null!==i&&void 0!==i?i:Pb.NaN,this.elems=[],this.subdivisions=void 0}clear(e){this.elems.length=0,this.boundary=e,this.subdivisions=void 0}addElem(e){this.addCondition(e)&&(void 0===this.subdivisions?0===this.maxdepth||this.elems.length<this.capacity?this.elems.push(e):this.subdivide(e):this.subdivisions.addElem(e))}find(e,t,i){this.findCondition(e,t,i)&&(void 0===this.subdivisions?this.findAction(e,t,i):this.subdivisions.find(e,t,i))}subdivide(e){this.subdivisions=this.makeSubdivisions();for(const t of this.elems)this.subdivisions.addElem(t);this.subdivisions.addElem(e),this.elems.length=0}makeSubdivisions(){const{x:e,y:t,width:i,height:n}=this.boundary,{capacity:o}=this,s=this.maxdepth-1,r=i/2,a=n/2,l=new Pb(e,t,r,a),d=new Pb(e+r,t,r,a),c=new Pb(e,t+a,r,a),u=new Pb(e+r,t+a,r,a);return new FE(this.child(o,s,l),this.child(o,s,d),this.child(o,s,c),this.child(o,s,u))}},BE=class e extends zE{addCondition(e){const{x:t,y:i}=e.hitTester.midPoint;return this.boundary.containsPoint(t,i)}findCondition(e,t,i){const{best:n}=i;return 0!==n.distanceSquared&&this.boundary.distanceSquared(e,t)<n.distanceSquared}findAction(e,t,i){const n=Lm(e,t,this.elems,i.best.distanceSquared);void 0!==n.nearest&&n.distanceSquared<i.best.distanceSquared&&(i.best=n)}child(t,i,n){return new e(t,i,n)}},VE=class e extends ck{constructor(){super([0,1],[0,1]),this.type="number"}static is(t){return t instanceof e}static getTickStep(e,t,i){const{interval:n,tickCount:o=ck.defaultTickCount,minTickCount:s,maxTickCount:r}=i;return null!==n&&void 0!==n?n:$f(e,t,o,s,r)}toDomain(e){return e}ticks(e){let{interval:t,tickCount:i=ck.defaultTickCount,minTickCount:n,maxTickCount:o}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.domain,r=arguments.length>2?arguments[2]:void 0;if(!s||s.length<2||i<1||!s.every(Number.isFinite))return{ticks:[],count:0,firstTickIndex:0};const[a,l]=s;if(t){const e=Math.abs(t);if(!Qf((l-a)/e,this.getPixelRange()))return qf(a,l,e,r)}return Wf(a,l,i,n,o,r)}niceDomain(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.domain;if(i.length<2)return[];const{tickCount:n=ck.defaultTickCount}=t;let[o,s]=i;if(1===n)[o,s]=Jf(o,s);else if(n>1){const n=o>s?Math.ceil:Math.floor,r=o>s?Math.floor:Math.ceil,a=4;for(let l=0;l<a;l++){const a=o,l=s,d=e.getTickStep(o,s,t),[c,u]=i;if(o=n(c/d)*d,s=r(u/d)*d,o===a&&s===l)break}}return[t.nice[0]?o:i[0],t.nice[1]?s:i[1]]}},GE=class extends sI{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:new VE)}hasDefinedDomain(){const{min:e,max:t}=this;return null!=e&&null!=t&&e<t}normaliseDataDomain(e){var t;const{min:i,max:n,preferredMin:o,preferredMax:s}=this,{extent:r,clipped:a}=Eg(e.domain,i,n,o,s,void 0,null===(t=e.sortMetadata)||void 0===t?void 0:t.sortOrder);return{domain:r,clipped:a}}getDomainExtentsNice(){return[null==this.min&&this.nice,null==this.max&&this.nice]}tickFormatParams(e,t,i){return{type:"number",fractionDigits:i}}datumFormatParams(e,t,i){const{datum:n,seriesId:o,legendItemName:s,key:r,source:a,property:l,domain:d,boundSeries:c}=t;return{type:"number",value:e,datum:n,seriesId:o,legendItemName:s,key:r,source:a,property:l,domain:d,boundSeries:c,fractionDigits:i}}};GE.className="NumberAxis",GE.type="number",Ab([ru],GE.prototype,"min",2),Ab([ru],GE.prototype,"max",2),Ab([ru],GE.prototype,"preferredMin",2),Ab([ru],GE.prototype,"preferredMax",2);var HE=class extends kh{constructor(){super(...arguments),this.enabled=!1,this.label=new fD,this.tick=new yD}};Ab([ru],HE.prototype,"enabled",2),Ab([ru],HE.prototype,"label",2),Ab([ru],HE.prototype,"tick",2);var jE=class extends sI{constructor(e){super(e,new OD),this.parentLevel=new HE,this.min=void 0,this.max=void 0,this.preferredMin=void 0,this.preferredMax=void 0}get _unit(){}set _unit(e){jr.warnOnce("To use 'unit', use an axis with type 'unit-time' instead of 'time'.")}hasDefinedDomain(){const{min:e,max:t}=this;return null!=e&&null!=t&&e<t}isCategoryLike(){return!1}get primaryLabel(){return this.parentLevel.enabled?this.parentLevel.label:void 0}get primaryTick(){return this.parentLevel.enabled?this.parentLevel.tick:void 0}normaliseDataDomain(e){const{extent:t,clipped:i}=Pg(e,this.min,this.max,this.preferredMin,this.preferredMax);return{domain:t,clipped:i}}processData(){super.processData();const{boundSeries:e,direction:t,min:i,max:n}=this;this.minimumTimeGranularity=WE(e,t,i,n)}tickFormatParams(e,t,i,n){null!==n&&void 0!==n||(n=nv(t));const o=sv(e);return{type:"date",unit:Rf(n),step:Ef(n),epoch:Pf(n),truncateDate:o}}datumFormatParams(e,t,i,n,o){if("number"===typeof e&&(e=new Date(e)),null==n){const{minimumTimeGranularity:t}=this,i=ov(e);n=null!=t&&Ff(t)<Ff(i)?t:i}const{datum:s,seriesId:r,legendItemName:a,key:l,source:d,property:c,domain:u,boundSeries:h}=t;return{type:"date",value:e,datum:s,seriesId:r,legendItemName:a,key:l,source:d,property:c,domain:u,boundSeries:h,unit:Rf(n),step:Ef(n),epoch:Pf(n),style:o}}};function WE(e,t,i,n){const o=e.reduce((e,t)=>{var i;return Math.min(null!==(i=t.minTimeInterval())&&void 0!==i?i:1/0,e)},1/0);return Number.isFinite(o)?iv(o):null===(s=_E(e,t,i,n))||void 0===s?void 0:s.unit;var s}function _E(e,t,i,n){var o,s,r,a;let l,d=1/0,c=-1/0,u=0;const h=[];for(const m of e){if(!m.visible)continue;const{extent:e}=Pg(m.getDomain(t));if(0===e.length)continue;const i=e[0].valueOf(),n=e.at(-1).valueOf();h.push(i,n),d=Math.min(null!==d&&void 0!==d?d:1/0,i,n),c=Math.max(null!==c&&void 0!==c?c:-1/0,i,n);const o=Math.abs(n-i);if(0===o)continue;const s=m.dataCount();if(u=Math.max(u,s),s<=1)continue;const r=o/(s-1);l=Math.min(null!==l&&void 0!==l?l:1/0,r)}if(d=Math.min(d,null!==(o=null===i||void 0===i?void 0:i.valueOf())&&void 0!==o?o:1/0,null!==(s=null===n||void 0===n?void 0:n.valueOf())&&void 0!==s?s:1/0),c=Math.max(c,null!==(r=null===i||void 0===i?void 0:i.valueOf())&&void 0!==r?r:-1/0,null!==(a=null===n||void 0===n?void 0:n.valueOf())&&void 0!==a?a:-1/0),!Number.isFinite(d)||!Number.isFinite(c))return;null!==l&&void 0!==l||(l=Math.abs(c-d)),l=Math.min(l,function(e){e.sort((e,t)=>e-t);let t=1/0;for(let i=1;i<e.length;i++){const n=e[i-1],o=e[i];o-n>0&&(t=Math.min(t,Math.abs(o-n)))}return t}(h));const p=iv(l);let g=l/Ff(p);g=u<=2?Math.floor(g):Math.round(g),g=Math.max(g,1);return{unit:p,step:g,epoch:1===g?void 0:ff(p,d)}}jE.className="TimeAxis",jE.type="time",Ab([ru],jE.prototype,"parentLevel",2),Ab([ru],jE.prototype,"min",2),Ab([ru],jE.prototype,"max",2),Ab([ru],jE.prototype,"preferredMin",2),Ab([ru],jE.prototype,"preferredMax",2),Ab([ru,ig("_unit")],jE.prototype,"unit",2);var KE=class extends MI{constructor(e){let{clipFocusBox:t,categoryKey:i}=e;super(l(e,yb)),this.categoryKey=i,this.clipFocusBox=null===t||void 0===t||t}dataCount(){var e,t;return null!==(e=null===(t=this.processedData)||void 0===t||null===(t=t.dataSources)||void 0===t||null===(t=t.get(this.id))||void 0===t||null===(t=t.data)||void 0===t?void 0:t.length)&&void 0!==e?e:0}invalidDataCount(){var e,t;return null!==(e=null===(t=this.processedData)||void 0===t||null===(t=t.invalidDataCount)||void 0===t?void 0:t.get(this.id))&&void 0!==e?e:0}missingDataCount(){var e,t;return null!==(e=null===(t=this.dataModel)||void 0===t?void 0:t.resolveMissingDataCount(this))&&void 0!==e?e:0}get hasData(){return Math.max(0,this.dataCount()-this.invalidDataCount()-this.missingDataCount())>0}getScaleInformation(e){let{xScale:t,yScale:i}=e;return{isContinuousX:ck.is(t),isContinuousY:ck.is(i),xScaleType:null===t||void 0===t?void 0:t.type,yScaleType:null===i||void 0===i?void 0:i.type}}getModulePropertyDefinitions(){var e,t;const i=null===(e=this.axes[_u.X])||void 0===e?void 0:e.scale,n=null===(t=this.axes[_u.Y])||void 0===t?void 0:t.scale;return this.moduleMap.mapModules(e=>e.getPropertyDefinitions(this.getScaleInformation({xScale:i,yScale:n}))).flat()}async requestDataModel(e,t,i){i.props.push(...this.getModulePropertyDefinitions());const{dataModel:n,processedData:o}=await e.request(this.id,null!==t&&void 0!==t?t:jk.empty(),i);return this.dataModel=n,this.processedData=o,this.events.emit("data-processed",{dataModel:n,processedData:o}),{dataModel:n,processedData:o}}isProcessedDataAnimatable(){var e;const{processedData:t,ctx:i}=this;if(!t)return!1;const n=this.getNodeData();if(null!=n&&n.length>i.animationManager.maxAnimatableItems)return!1;const o=null===(e=t.reduced)||void 0===e?void 0:e.animationValidation;if(!o)return!0;const{orderedKeys:s,uniqueKeys:r}=o;return s&&r}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}pickFocus(e){const t=this.getNodeData();if(void 0===t||0===t.length)return;const i=this.computeFocusDatumIndex(e,t);if(void 0===i)return;const{clipFocusBox:n}=this,o=t[i],s=p(p({},e),{},{datumIndex:i}),r=this.computeFocusBounds(s);return void 0!==r?{bounds:r,clipFocusBox:n,datum:o,datumIndex:i}:void 0}pickNodesExactShape(e){const t=super.pickNodesExactShape(e);return t.sort((e,t)=>e.datumIndex-t.datumIndex),t}isDatumEnabled(e,t){const{missing:i=!1,enabled:n=!0,focusable:o=!0}=e[t];return!i&&n&&o}computeFocusDatumIndex(e,t){const i=(e,i)=>{for(;e>=0&&!this.isDatumEnabled(t,e);)e+=i;return-1===e?void 0:e},n=(e,i)=>{for(;e<t.length&&!this.isDatumEnabled(t,e);)e+=i;return e===t.length?void 0:e};let o;const s=za(0,e.datumIndex,t.length-1);if(e.datumIndexDelta<0)o=i(s,e.datumIndexDelta);else if(e.datumIndexDelta>0)o=n(s,e.datumIndexDelta);else{var r;o=null!==(r=n(s,1))&&void 0!==r?r:i(s,-1)}return void 0===o?0===e.datumIndexDelta?void 0:e.datumIndex-e.datumIndexDelta:o}dataModelPropertyIsKey(e){const{processedData:t}=this;return!!t&&t.defs.keys.some(t=>{var i;return t.id===e&&!0===(null===(i=t.idsMap)||void 0===i||null===(i=i.get(this.id))||void 0===i?void 0:i.has(e))})}keysOrValues(e){const{dataModel:t,processedData:i}=this;return t&&i?this.dataModelPropertyIsKey(e)?t.resolveKeysById(this,e,i):t.resolveColumnById(this,e,i):[]}sortOrder(e){const{dataModel:t,processedData:i}=this;if(t&&i)return this.dataModelPropertyIsKey(e)?t.getKeySortOrder(this,e,i):t.getColumnSortOrder(this,e,i)}getCategoryKey(){return this.categoryKey}getCategoryValue(e){var t,i;const{processedData:n,dataModel:o}=this,s=this.getCategoryKey();if(!n||!o||!s)return;return null!==(t=null===(i=n.invalidData)||void 0===i||null===(i=i.get(this.id))||void 0===i?void 0:i[e])&&void 0!==t&&t?void 0:this.keysOrValues(s)[e]}datumIndexForCategoryValue(e){var t;const{processedData:i,dataModel:n}=this,o=this.getCategoryKey();if(!i||!n||!o)return;e=e.valueOf();const s=null===(t=i.invalidData)||void 0===t?void 0:t.get(this.id),r=this.keysOrValues(o);for(let l=0;l<r.length;l+=1){var a;if(!0===(null===s||void 0===s?void 0:s[l]))continue;if(yu(e,null===(a=r[l])||void 0===a?void 0:a.valueOf()))return l}}},UE={[_u.X]:["xKey"],[_u.Y]:["yKey"]},YE={[_u.X]:["xName"],[_u.Y]:["yName"]},$E=class extends xI{constructor(e,t,i,n){super(e,t,i,n),this.xKey=n.properties.xKey,this.yKey=n.properties.yKey}},ZE=class extends XM{constructor(){super(...arguments),this.xKeyAxis="x",this.yKeyAxis="y",this.pickOutsideVisibleMinorAxis=!1,this.segmentation=new UM}};Ab([ru],ZE.prototype,"xKeyAxis",2),Ab([ru],ZE.prototype,"yKeyAxis",2),Ab([ru],ZE.prototype,"legendItemName",2),Ab([ru],ZE.prototype,"pickOutsideVisibleMinorAxis",2),Ab([ru],ZE.prototype,"segmentation",2);var XE=class extends KE{constructor(e){let{pathsPerSeries:t=["path"],pathsZIndexSubOrderOffset:i=[],datumSelectionGarbageCollection:n=!0,animationAlwaysUpdateSelections:o=!1,segmentedDataNodes:s=!0,animationResetFns:r,propertyKeys:a,propertyNames:d}=e;if(super(p({propertyKeys:a,propertyNames:d,canHaveAxes:!0},l(e,bb))),this.NodeEvent=$E,this.dataNodeGroup=this.contentGroup.appendChild(new PE({name:"".concat(this.id,"-series-dataNodes"),zIndex:1})),this.labelGroup=this.contentGroup.appendChild(new jx({name:"".concat(this.id,"-series-labels")})),this.labelSelection=Jk.select(this.labelGroup,LC),this.highlightSelection=Jk.select(this.highlightNodeGroup,()=>this.nodeFactory()),this.highlightLabelSelection=Jk.select(this.highlightLabelGroup,LC),this.annotationSelections=new Set,this.seriesBelowStackContext=void 0,this.debug=Cr.create(),!a||!d)throw new Error("Unable to initialise series type ".concat(this.type));this.opts={pathsPerSeries:t,pathsZIndexSubOrderOffset:i,propertyKeys:a,propertyNames:d,animationResetFns:r,animationAlwaysUpdateSelections:o,datumSelectionGarbageCollection:n,segmentedDataNodes:s},this.paths=t.map(e=>new RE({name:"".concat(this.id,"-").concat(e)})),this.datumSelection=Jk.select(this.dataNodeGroup,()=>this.nodeFactory(),n),this.animationState=new Vm("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)},reset:"empty",skip:"ready",disable:"disabled"},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),resize:e=>this.animateReadyResize(e),reset:"empty",skip:"ready",disable:"disabled"},waiting:{update:{target:"ready",action:e=>{this.ctx.animationManager.isSkipped()?this.resetAllAnimation(e):this.animateWaitingUpdateReady(e)}},reset:"empty",skip:"ready",disable:"disabled"},disabled:{update:e=>this.resetAllAnimation(e),reset:"empty"},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)},reset:"empty",skip:"ready"}},this.checkProcessedDataAnimatable.bind(this)),this.cleanup.register(this.ctx.eventsHub.on("legend:item-click",e=>this.onLegendItemClick(e)),this.ctx.eventsHub.on("legend:item-double-click",e=>this.onLegendItemDoubleClick(e)))}get contextNodeData(){return this._contextNodeData}getNodeData(){var e;return null===(e=this.contextNodeData)||void 0===e?void 0:e.nodeData}getKeyAxis(e){if(this.shouldFlipXY()){if(e===_u.X)return this.properties.yKeyAxis;if(e===_u.Y)return this.properties.xKeyAxis}return e===_u.X?this.properties.xKeyAxis:e===_u.Y?this.properties.yKeyAxis:void 0}attachSeries(e,t,i){super.attachSeries(e,t,i),this.attachPaths(this.paths)}detachSeries(e,t,i){super.detachSeries(e,t,i),this.detachPaths(this.paths)}updatedDomains(){this.animationState.transition("updateData")}attachPaths(e){for(const t of e)this.contentGroup.appendChild(t)}detachPaths(e){for(const t of e)t.remove()}renderToOffscreenCanvas(){const e=this.getNodeData();return null!=e&&e.length>100}resetAnimation(e){"initial"===e?this.animationState.transition("reset"):"ready"===e?this.animationState.transition("skip"):"disabled"===e&&this.animationState.transition("disable")}destroy(){super.destroy(),this._contextNodeData=void 0}isSeriesHighlighted(e){const{series:t,legendItemName:i}=null!==e&&void 0!==e?e:{},{legendItemName:n}=this.properties;return t===this||null!=n&&n===i}strokewidthChange(){var e,t,i,n;const o=null!==(e="strokeWidth"in this.properties&&this.properties.strokeWidth)&&void 0!==e?e:0,s=null!==(t=this.properties.highlight.highlightedSeries.strokeWidth)&&void 0!==t?t:o,r=null!==(i=null===(n=this.properties.highlight.highlightedItem)||void 0===n?void 0:n.strokeWidth)&&void 0!==i?i:o;return o>r||s>r}update(e){let{seriesRect:t}=e;const{_contextNodeData:i}=this,n=this.checkResize(t),o=this.updateHighlightSelection(),s=this;this.contentGroup.batchedUpdate(function(){var e;const t=s.updateSelections(),i=null===(e=s.contextNodeData)||void 0===e?void 0:e.segments;s.opts.segmentedDataNodes?s.dataNodeGroup.segments=null!==i&&void 0!==i?i:s.dataNodeGroup.segments:s.dataNodeGroup.segments=void 0,s.updateNodes(o,n||t)});const r=this.getAnimationData(t,i);r&&(n&&this.animationState.transition("resize",r),this.animationState.transition("update",r),this.processedDataUpdated=!1)}createStackContext(){}updateSelections(){var e;const t=!this.opts.animationAlwaysUpdateSelections&&this.ctx.animationManager.isSkipped();if(!this.visible&&t)return!1;const{nodeDataRefresh:i}=this;if(!i&&!this.isPathOrSelectionDirty())return!1;if(i){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this.markQuadtreeDirty(),this._contextNodeData=this.createNodeData();const t=this.isProcessedDataAnimatable();if(this._contextNodeData){var n,o;null!==(n=(e=this._contextNodeData).animationValid)&&void 0!==n||(e.animationValid=t);const i=null===(o=this._contextNodeData.nodeData)||void 0===o?void 0:o.length;null!=i&&sa.record("".concat(this.type,":nodeData"),i)}const{dataModel:i,processedData:s}=this;void 0!==i&&void 0!==s&&this.events.emit("data-update",{dataModel:i,processedData:s}),this.updateSeriesSelections()}return i}updateSeriesSelections(){const{datumSelection:e,labelSelection:t,paths:i}=this,n=this._contextNodeData;if(!n)return;const{nodeData:o,labelData:s,itemId:r}=n;this.updatePaths({itemId:r,contextData:n,paths:i}),this.datumSelection=this.updateDatumSelection({nodeData:o,datumSelection:e}),this.labelGroup.batchedUpdate(()=>{var e;this.labelSelection=null!==(e=this.updateLabelSelection({labelData:s,labelSelection:t}))&&void 0!==e?e:t})}getShapeFillBBox(){var e,t;const{axes:i}=this,n=i[_u.X],o=i[_u.Y],[s,r]=$u(null!==(e=null===n||void 0===n?void 0:n.range)&&void 0!==e?e:[0,1]),[a,l]=$u(null!==(t=null===o||void 0===o?void 0:o.range)&&void 0!==t?t:[0,1]),d=Ea(this.getSeriesDomain(_u.X)),c=[null===n||void 0===n?void 0:n.scale.convert(d.at(0)),null===n||void 0===n?void 0:n.scale.convert(d.at(-1))],u=Ea(this.getSeriesDomain(_u.Y)),h=[null===o||void 0===o?void 0:o.scale.convert(u.at(0)),null===o||void 0===o?void 0:o.scale.convert(u.at(-1))],[p,g]=$u(c),[m,f]=$u(h);return{axis:new Pb(s,a,r-s,l-a),series:new Pb(p,m,g-p,f-m)}}updateNodes(e,t){var i,n,o;const{highlightSelection:s,datumSelection:r}=this,a=!this.ctx.animationManager.isSkipped(),l=this.visible&&null!=this._contextNodeData;this.contentGroup.visible=a||l,this.highlightGroup.visible=(a||l)&&e,this.updateDatumStyles({datumSelection:s,isHighlight:!0});const d=null!==(i=null===(n=this.ctx.chartService.highlight)||void 0===n?void 0:n.drawingMode)&&void 0!==i?i:"overlay";this.updateDatumNodes({datumSelection:s,isHighlight:!0,drawingMode:d}),this.highlightLabelGroup.batchedUpdate(()=>{this.updateLabelNodes({labelSelection:this.highlightLabelSelection,isHighlight:!0})}),this.animationState.transition("highlight",s);const{dataNodeGroup:c,labelSelection:u,paths:h,labelGroup:p}=this,{itemId:g}=null!==(o=this.contextNodeData)&&void 0!==o?o:{};if(this.updatePathNodes({itemId:g,paths:h,visible:l,animationEnabled:a}),c.visible=a||l,p.visible=l,!c.visible)return;this.hasItemStylers()&&this.updateDatumStyles({datumSelection:r,isHighlight:!1});const m=this.strokewidthChange()||this.hasChangesOnHighlight;(t||m)&&(this.updateDatumNodes({datumSelection:r,isHighlight:!1,drawingMode:"overlay"}),this.usesPlacedLabels||this.labelGroup.batchedUpdate(()=>{this.updateLabelNodes({labelSelection:u,isHighlight:!1})}))}getHighlightData(e,t){return t?[p({},t)]:void 0}getHighlightLabelData(e,t){const i=e.filter(e=>e.datum===t.datum&&e.itemId===t.itemId);return 0===i.length?void 0:i}updateHighlightSelection(){var e,t,i;const{highlightSelection:n,highlightLabelSelection:o,_contextNodeData:s}=this;if(!s)return!1;const r=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),a=this.isSeriesHighlighted(r)&&null!==r&&void 0!==r&&r.datum?r:void 0;if(null==a)return!1;const{nodeData:l,labelData:d}=s,c=this.getHighlightData(l,a);this.highlightSelection=this.updateHighlightSelectionItem({items:c,highlightSelection:n});const u=null!==(t=this.getHighlightLabelData(d,a))&&void 0!==t?t:[];return this.highlightLabelSelection=null!==(i=this.updateLabelSelection({labelData:u,labelSelection:o}))&&void 0!==i?i:o,!0}markQuadtreeDirty(){this.quadtree=void 0}*datumNodesIter(){for(const{node:e}of this.datumSelection)!0!==e.datum.missing&&(yield e)}getQuadTree(){if(void 0===this.quadtree){const{width:e,height:t}=this.ctx.scene.canvas,i=new Pb(0,0,e,t);this.quadtree=new OE(100,10,i),this.initQuadTree(this.quadtree)}return this.quadtree}initQuadTree(e){}pickNodeDataExactShape(e){const{x:t,y:i}=e,{dataNodeGroup:n}=this,o=n.pickNodes(t,i).filter(e=>!0!==e.datum.missing);if(0!==o.length){return o.map(e=>e.datum)}}pickModulesExactShape(e){for(const i of this.moduleMap.modules()){var t;const{datum:n}=null!==(t=i.pickNodeExact(e))&&void 0!==t?t:{};if(null!=n&&!0!==(null===n||void 0===n?void 0:n.missing))return[n]}}pickNodesExactShape(e){var t,i;const n=super.pickNodesExactShape(e);return 0!==n.length?n:null!==(t=null!==(i=this.pickNodeDataExactShape(e))&&void 0!==i?i:this.pickModulesExactShape(e))&&void 0!==t?t:[]}pickNodeDataClosestDatum(e){const{x:t,y:i}=e,{axes:n,_contextNodeData:o}=this;if(!o)return;const s=n[_u.X],r=n[_u.Y],a=t,l=i;let d,c=1/0;for(const u of o.nodeData){const{point:{x:e=Number.NaN,y:t=Number.NaN}={}}=u;if(Number.isNaN(e)||Number.isNaN(t))continue;if(!((null===s||void 0===s?void 0:s.inRange(e))&&(null===r||void 0===r?void 0:r.inRange(t))))continue;const i=Math.max((a-e)**2+(l-t)**2,0);i<c&&(c=i,d=u)}return null!=c?{datum:d,distance:Math.sqrt(c)}:void 0}pickModulesClosestDatum(e){let t,i=1/0;for(const n of this.moduleMap.modules()){const o=n.pickNodeNearest(e);void 0!==o&&o.distanceSquared<i&&(i=o.distanceSquared,t=o.datum)}if(null!=i)return{datum:t,distance:Math.sqrt(i)}}pickNodeClosestDatum(e){let t,i=1/0;const n=this.pickNodeDataClosestDatum(e);null!=n&&n.distance<i&&(i=n.distance,t=n.datum);const o=this.pickModulesClosestDatum(e);if(null!=o&&o.distance<i&&(i=o.distance,t=o.datum),t){var s,r;return{datum:t,distance:Math.max(i-(null!==(s=null===(r=t.point)||void 0===r?void 0:r.size)&&void 0!==s?s:0)/2,0)}}}pickNodeMainAxisFirst(e,t){const{x:i,y:n}=e,{axes:o,_contextNodeData:s}=this,{pickOutsideVisibleMinorAxis:r}=this.properties;if(!s)return;const a=o[_u.X],l=o[_u.Y];if(null==a||null==l)return;const d=[a,l].filter(e=>e.isCategoryLike()).map(e=>e.direction);if(t&&0===d.length)return;const[c=_u.X]=d,u=[i,n];c!==_u.X&&u.reverse();const h=[1/0,1/0];let p;for(const y of s.nodeData){var g,m;const{x:e=Number.NaN,y:t=Number.NaN}=null!==(g=null!==(m=y.point)&&void 0!==m?m:y.midPoint)&&void 0!==g?g:{};if(Number.isNaN(e)||Number.isNaN(t)||!0===y.missing)continue;const i=[null===a||void 0===a?void 0:a.inRange(e,1),null===l||void 0===l?void 0:l.inRange(t,1)];if(c!==_u.X&&i.reverse(),!i[0]||!r&&!i[1])continue;const n=[e,t];c!==_u.X&&n.reverse();let o=!0;for(let s=0;s<n.length;s++){const e=Math.abs(n[s]-u[s]);if(e>h[s]){o=!1;break}e<h[s]&&(h[s]=e,h.fill(1/0,s+1,h.length))}o&&(p=y)}if(p){var f,v;let t=Math.max(h[0]**2+h[1]**2-(null!==(f=null===(v=p.point)||void 0===v?void 0:v.size)&&void 0!==f?f:0),0);for(const i of this.moduleMap.modules()){const n=i.pickNodeMainAxisFirst(e,c);if(null!=n&&n.distanceSquared<t){p=n.datum,t=n.distanceSquared;break}}return{datum:p,distance:Math.sqrt(t)}}}isPathOrSelectionDirty(){return!1}shouldFlipXY(){return!1}visibleRangeIndices(e,t,i,n){var o;let s;if(null==n){var r;const{processedData:t,dataModel:i}=this;s=null!==(r=i.getColumnSortOrder(this,e,t))&&void 0!==r?r:1}else s=n.sortOrder;const a=this.keysOrValues(e),[l,d]=JM(s,null!==(o=null===i||void 0===i?void 0:i.length)&&void 0!==o?o:a.length,t,e=>{var t;const n=null!==(t=null===i||void 0===i?void 0:i[e])&&void 0!==t?t:e;return this.xCoordinateRange(a[n],0,n)});return l<d?[l,d]:[d,l]}domainForVisibleRange(e,t,i,n,o){const{processedData:s,dataModel:r}=this,[a,l]=n,d=this.keysOrValues(i),c=this.sortOrder(i);if(null!=c){const e=this.visibleRangeIndices(i,n,o,{sortOrder:c});return r.getDomainBetweenRange(this,t,e,s)}const u=t.map(e=>this.keysOrValues(e));let h=1/0,p=-1/0;for(const[g,m]of d.entries()){const[e,i]=this.xCoordinateRange(m,0,g);if(!(i<a||e>l))for(let n=0;n<t.length;n++){const e=u[n][g];h=Math.min(h,e),p=Math.max(p,e)}}return h>p?[Number.NaN,Number.NaN]:[h,p]}domainForClippedRange(e,t,i){const{processedData:n,dataModel:o,axes:s}=this,r=function(e){let t,i;(e instanceof GE||e instanceof jE)&&({min:t,max:i}=e);if(null==t&&null==i)return;return null!==t&&void 0!==t||(t=-1/0),null!==i&&void 0!==i||(i=1/0),[t,i]}(s[e===_u.X?_u.Y:_u.X]);if(!r)return t.flatMap(e=>o.getDomain(this,e,"value",n).domain);const a=this.keysOrValues(i),l=o.getColumnSortOrder(this,i,n);if(null!=l){const e=function(e,t,i,n){const o=i[0].valueOf(),s=i[1].valueOf();let r=ug(0,t-1,i=>{var s;const r=null===(s=n(1===e?i:t-i))||void 0===s?void 0:s.valueOf();return!Number.isFinite(r)||r>=o}),a=cg(0,t-1,i=>{var o;const r=null===(o=n(1===e?i:t-i))||void 0===o?void 0:o.valueOf();return!Number.isFinite(r)||r<=s});if(null==r||null==a)return[0,0];-1===e&&([r,a]=[t-a,t-r]);return r=Math.max(r,0),a=Math.min(a+1,t),[r,a]}(l,a.length,r,e=>a[e]);return o.getDomainBetweenRange(this,t,e,n)}const d=t.map(e=>this.keysOrValues(e)),c=r[0].valueOf(),u=r[1].valueOf(),h=[];for(const[p,g]of a.entries()){const e=g.valueOf();if(e<c||e>u)continue;const t=d.map(e=>e[p]);e>=c&&h.push(...t),e<=u&&h.push(...t)}return h}zoomFittingVisibleItems(e,t,i,n,o){const{dataModel:s,processedData:r}=this;if(!s||!r)return;const a=this.axes[_u.X];if(null!=n)return;const l=this.sortOrder(e);if(null==l)return;const d=this.keysOrValues(e);if(o>d.length)return{x:[0,1],y:void 0};const c=a.scale,u=c.range;c.range=[0,1];let[h,p]=this.visibleRangeIndices(e,i,void 0,{sortOrder:l});p-=1;let g;if(this.xCoordinateRange(d[h],0,h)[0]<i[0]&&(h+=1),this.xCoordinateRange(d[p],0,p)[1]>i[1]&&(p-=1),Math.abs(p-h)>=o-1)g=i;else{const e=(i[0]+i[1])/2;for(;Math.abs(p-h)<o-1&&(h>0||p<d.length-1);)if(0===h)p+=1;else if(p===d.length-1)h-=1;else{const t=this.xCoordinateRange(d[h-1],0,h-1)[0],i=this.xCoordinateRange(d[p+1],0,p+1)[1];Math.abs(t-e)<Math.abs(i-e)?h-=1:p+=1}const t=this.xCoordinateRange(d[h],0,h)[0],n=this.xCoordinateRange(d[p],0,p)[1];g=[Math.min(i[0],t),Math.max(i[1],n)]}return c.range=u,{x:g,y:void 0}}countVisibleItems(e,t,i,n,o){const{dataModel:s,processedData:r}=this;if(!s||!r)return 1/0;const a=this.keysOrValues(e),l=t.map(e=>s.resolveColumnById(this,e,r)),d=this.shouldFlipXY(),c=d?this.axes[_u.Y]:this.axes[_u.X],u=d?this.axes[_u.X]:this.axes[_u.Y],h=d?null!==n&&void 0!==n?n:[0,1]:i,p=d?i:null!==n&&void 0!==n?n:[0,1];if(null==n){const t=this.sortOrder(e);if(null!=t){const i=c.scale,n=i.range;i.range=[0,1];const o=this.keysOrValues(e);let[s,r]=this.visibleRangeIndices(e,h,void 0,{sortOrder:t});if(r-=1,r<s)return 0;const a=0;this.xCoordinateRange(o[s],a,s)[0]<h[0]&&(s+=1),this.xCoordinateRange(o[r],a,r)[1]>h[1]&&(r-=1);const l=Math.abs(r-s)+1;return i.range=n,l}}const g=(e,t,i)=>e[0]+(i-t[0])/(t[1]-t[0])*(e[1]-e[0]),m=c.range.toSorted(),f=u.range.toSorted(),v=g(m,c.visibleRange,h[0]),y=g(m,c.visibleRange,h[1]),b=g(f,u.visibleRange,Math.min(...p)),x=g(f,u.visibleRange,Math.max(...p)),C=Math.round((h[0]+(h[1]-h[0])/2)*a.length);return function(e,t,i,n,o){let s=-1,r=0,a=0,l=!1;for(;r<n&&s<=t-e;){s+=1;const n=i+a;l||(a*=-1),a>=0&&(a+=1),l&&a<0&&(a-=1),n<e||n>t?l=!0:o(n)&&(r+=1)}return r}(0,a.length-1,C,o,e=>{const[t,i]=this.xCoordinateRange(a[e],0,e),[n,o]=this.yCoordinateRange(l.map(t=>t[e]),0,e);return!!(ol(t)&&ol(i)&&ol(n)&&ol(o))&&(t>=v&&i<=y&&n>=b&&o<=x)})}minTimeInterval(){let e;try{e=this.keysOrValues("xValue")}catch(o){}if(null==e||e.length>1e3)return;let t,i=1/0,n=e[0];for(let s=1;s<e.length;s++){const o=e[s];if(null!=o&&null!=n){const e=o.valueOf()-n.valueOf(),s=Math.sign(e);if(0===s)continue;if(void 0!==t&&s!==t)return;i=Math.min(i,Math.abs(e)),t=s}n=o}return Number.isFinite(i)?i:void 0}updateHighlightSelectionItem(e){const{items:t,highlightSelection:i}=e,n=null!==t&&void 0!==t?t:[];return this.updateDatumSelection({nodeData:n,datumSelection:i})}updateDatumSelection(e){return e.datumSelection}updateDatumNodes(e){}updateDatumStyles(e){}updatePaths(e){for(const t of e.paths)t.visible=!1}updatePathNodes(e){const{paths:t,visible:i}=e;for(const n of t)n.visible=i}resetPathAnimation(e){var t,i;const{path:n}=null!==(t=null===(i=this.opts)||void 0===i?void 0:i.animationResetFns)&&void 0!==t?t:{};if(n)for(const o of e.paths)Qk([o],n)}resetDatumAnimation(e){var t,i;const{datum:n}=null!==(t=null===(i=this.opts)||void 0===i?void 0:i.animationResetFns)&&void 0!==t?t:{};n&&Qk([e.datumSelection],n)}resetLabelAnimation(e){var t,i;const{label:n}=null!==(t=null===(i=this.opts)||void 0===i?void 0:i.animationResetFns)&&void 0!==t?t:{};n&&Qk([e.labelSelection],n)}resetAllAnimation(e){var t;this.ctx.animationManager.stopByAnimationGroupId(this.id),this.resetPathAnimation(e),this.resetDatumAnimation(e),this.resetLabelAnimation(e),!1===(null===(t=e.contextData)||void 0===t?void 0:t.animationValid)&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateReadyHighlight(e){var t,i;const{datum:n}=null!==(t=null===(i=this.opts)||void 0===i?void 0:i.animationResetFns)&&void 0!==t?t:{};n&&Qk([e],n)}animateReadyResize(e){this.resetAllAnimation(e)}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}getAnimationData(e,t){const{_contextNodeData:i}=this;if(!i)return;return{datumSelection:this.datumSelection,labelSelection:this.labelSelection,annotationSelections:[...this.annotationSelections],contextData:i,previousContextData:t,paths:this.paths,seriesRect:e}}updateLabelSelection(e){return e.labelSelection}getScaling(e){if(e instanceof TE){const{range:t,domain:i}=e;return{type:"log",convert:t=>e.convert(t),domain:[i[0],i[1]],range:[t[0],t[1]]}}if(e instanceof ck){const{range:t,domain:i}=e;return{type:"continuous",domain:[i[0],i[1]],range:[t[0],t[1]]}}if(e instanceof pk){if(e instanceof jD){const t=e.getLinearParams(),i=e.getBandCountForUpdate();if(null!=t&&i>0)return{type:"category",variant:"unit-time",firstBandTime:t.firstBandTime,lastBandTime:t.firstBandTime+(i-1)*t.intervalMs,bandCount:i,intervalMs:t.intervalMs,inset:e.inset,step:e.step}}return{type:"category",domain:e.domain,inset:e.inset,step:e.step}}}calculateScaling(){const e={};for(const t of Object.values(_u)){const i=this.axes[t];if(!i)continue;const n=this.getScaling(i.scale);null!=n&&(e[t]=n)}return e}};function qE(e){const t=new Map;for(const s of e){var i,n,o;if(!(s instanceof XE))continue;const e=(null!==(i=null===(n=s.seriesGrouping)||void 0===n?void 0:n.stackCount)&&void 0!==i?i:0)>0?null===(o=s.seriesGrouping)||void 0===o?void 0:o.groupIndex:void 0;if(null==e){s.seriesBelowStackContext=void 0,s.createStackContext();continue}const r="".concat(s.type,"-").concat(e);let a=t.get(r);null==a&&(a=[],t.set(r,a)),a.push(s)}for(const s of t.values()){let e;s.sort((e,t)=>{var i,n,o,s;return(null!==(i=null===(n=e.seriesGrouping)||void 0===n?void 0:n.stackIndex)&&void 0!==i?i:0)-(null!==(o=null===(s=t.seriesGrouping)||void 0===s?void 0:s.stackIndex)&&void 0!==o?o:0)});for(const t of s)t.seriesBelowStackContext=e,e=t.createStackContext()}}function QE(e,t,i,n,o,s){let r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:["series","".concat(e.declarationOrder),"label"];if(e.visible&&n.itemStyler){var a;const l=e.getHighlightStateString(s,o||null!=t&&(null===s||void 0===s?void 0:s.series)===t.series&&(null===s||void 0===s?void 0:s.datumIndex)===t.datumIndex,null===t||void 0===t?void 0:t.datumIndex),d={border:n.border,color:n.color,cornerRadius:n.cornerRadius,datum:null===t||void 0===t?void 0:t.datum,enabled:n.enabled,fill:n.fill,fillOpacity:n.fillOpacity,fontFamily:n.fontFamily,fontSize:n.fontSize,fontStyle:n.fontStyle,fontWeight:n.fontWeight,itemId:null===t||void 0===t?void 0:t.itemId,itemType:null===t||void 0===t?void 0:t.itemType,seriesId:e.id,padding:n.padding,highlightState:l};return xu(null!==(a=e.ctx.optionsGraphService.resolvePartial(r,e.cachedCallWithContext(n.itemStyler,p(p({},i),d)),{pick:!1}))&&void 0!==a?a:{},d)}return n}function JE(e,t,i,n,o,s,r){if(e.visible&&n.enabled&&o){const a=QE(e,t.datum,i,n,s,r);t.visible=!0,t.x=o.x,t.y=o.y,t.text=o.text,t.fill=a.color,t.setAlign(o),t.setFont(a),t.setBoxing(a)}else t.visible=!1}var eP={"inside-start":{inside:!0,direction:-1,textAlignment:1},"inside-end":{inside:!0,direction:1,textAlignment:-1},"outside-start":{inside:!1,direction:-1,textAlignment:-1},"outside-end":{inside:!1,direction:1,textAlignment:1}};function tP(e){let{isUpward:t,isVertical:i,placement:n,spacing:o=0,rect:s}=e,r=s.x+s.width/2,a=s.y+s.height/2,l="center",d="middle";if("inside-center"!==n){const e=(t?1:-1)*(i?-1:1),{direction:c,textAlignment:u}=eP[n],h=.5*(c+1);if(i){a=(t?s.y+s.height:s.y)+s.height*e*h+o*u*e,d=u===e?"top":"bottom"}else{r=(t?s.x:s.x+s.width)+s.width*e*h+o*u*e,l=u===e?"left":"right"}}return{x:r,y:a,textAlign:l,textBaseline:d}}function iP(e,t,i){let{id:n}=e;for(var o=arguments.length,s=new Array(o>3?o-3:0),r=3;r<o;r++)s[r-3]=arguments[r];for(const a of s)a.cleanup();Zk(n,t,i,s,{opacity:0},{opacity:1},{phase:"trailing"})}function nP(e,t,i){let{id:n}=e;for(var o=arguments.length,s=new Array(o>3?o-3:0),r=3;r<o;r++)s[r-3]=arguments[r];Zk(n,t,i,s,{opacity:1},{opacity:0},{phase:"remove"})}function oP(e){return{opacity:1}}var sP=class extends Iy{constructor(){super(...arguments),this.enabled=!0,this.shape="circle",this.size=0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}getStyle(){const{size:e,shape:t,fill:i,fillOpacity:n,stroke:o,strokeWidth:s,strokeOpacity:r,lineDash:a,lineDashOffset:l}=this;return{size:e,shape:t,fill:i,fillOpacity:n,stroke:o,strokeWidth:s,strokeOpacity:r,lineDash:a,lineDashOffset:l}}getDiameter(){return this.size+this.strokeWidth}};function rP(e,t){var i,n,o,s,r,a,l,d,c;if(null!=e)return{enabled:null===(i=e.enabled)||void 0===i||i,stroke:null!==(n=null!==(o=e.stroke)&&void 0!==o?o:null===t||void 0===t?void 0:t.stroke)&&void 0!==n?n:"transparent",strokeWidth:null!==(s=null!==(r=e.strokeWidth)&&void 0!==r?r:null===t||void 0===t?void 0:t.strokeWidth)&&void 0!==s?s:1,strokeOpacity:null!==(a=null!==(l=e.strokeOpacity)&&void 0!==l?l:null===t||void 0===t?void 0:t.strokeOpacity)&&void 0!==a?a:1,lineDash:null!==(d=null!==(c=e.lineDash)&&void 0!==c?c:null===t||void 0===t?void 0:t.lineDash)&&void 0!==d?d:[]}}Ab([ru,_y()],sP.prototype,"enabled",2),Ab([ru,Uy({equals:Wy})],sP.prototype,"shape",2),Ab([ru,_y()],sP.prototype,"size",2),Ab([ru,Uy({equals:yu})],sP.prototype,"fill",2),Ab([ru,_y()],sP.prototype,"fillOpacity",2),Ab([ru,_y()],sP.prototype,"stroke",2),Ab([ru,_y()],sP.prototype,"strokeWidth",2),Ab([ru,_y()],sP.prototype,"strokeOpacity",2),Ab([ru],sP.prototype,"lineDash",2),Ab([ru],sP.prototype,"lineDashOffset",2),Ab([ru,Uy({equals:Wy})],sP.prototype,"itemStyler",2);var aP=class extends kh{constructor(){super(...arguments),this.enabled=!1}};Ab([ru],aP.prototype,"enabled",2);var lP=class extends kh{constructor(){super(...arguments),this.interaction=new aP,this.position=new QI,this.range=void 0,this.class=void 0}formatTooltip(e,t,i){const n=null==this.renderer?void 0:Cp(e,this.renderer,i);if(il(n)||nl(n)||$a(n))return{type:"raw",rawHtmlString:Gl(n)};if(null!=n){var o,s,r,a,l,d,c;const e=xu(null===(o=n.symbol)||void 0===o?void 0:o.marker,null===(s=t.symbol)||void 0===s?void 0:s.marker),i=(null!==(r=null===(a=n.symbol)||void 0===a?void 0:a.line)&&void 0!==r?r:null===(l=t.symbol)||void 0===l?void 0:l.line)?xu(null===(d=n.symbol)||void 0===d?void 0:d.line,null===(c=t.symbol)||void 0===c?void 0:c.line):void 0,u=t.symbol||n.symbol?{marker:e,line:rP(i,e)}:void 0;return p(p(p({type:"structured"},t),n),{},{symbol:u})}return p({type:"structured"},t)}};function dP(){return new lP}Ab([ru],lP.prototype,"enabled",2),Ab([ru],lP.prototype,"showArrow",2),Ab([ru],lP.prototype,"renderer",2),Ab([ru],lP.prototype,"interaction",2),Ab([ru],lP.prototype,"position",2),Ab([ru],lP.prototype,"range",2),Ab([ru],lP.prototype,"class",2);var cP=class e extends sI{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new TD,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super(e,t),this.groupPaddingInner=.1,this.includeInvisibleDomains=i,this.nice=!1}static is(t){return t instanceof e}isCategoryLike(){return!0}hasDefinedDomain(){return!1}normaliseDataDomain(e){return{domain:e.domain,clipped:!1}}updateScale(){super.updateScale();let{paddingInner:e,paddingOuter:t}=this;if(!ol(e)||!ol(t)){const i=this.reduceBandScalePadding();null!==e&&void 0!==e||(e=i.inner),null!==t&&void 0!==t||(t=i.outer)}this.scale.paddingInner=null!==e&&void 0!==e?e:0,this.scale.paddingOuter=null!==t&&void 0!==t?t:0}calculateGridLines(e,t,i){const n=super.calculateGridLines(e,t,i);return"between"===this.interval.placement&&e.length>0&&n.push(super.calculateGridLine({index:e.at(-1).index+1,tickId:"after:".concat(e.at(-1).tickId),translation:this.range[1]},e.length,t,i,e)),n}calculateGridLine(e,t,i,n,o){var s;let{index:r,tickId:a,translation:l}=e;const{gridLine:d,horizontal:c,interval:u,scale:h}=this;if("between"!==u.placement)return super.calculateGridLine({index:r,tickId:a,translation:l},t,i,n,o);const p=l-(l<h.step?Math.floor(h.step/2):h.step/2),[g,m,f,v]=c?[p,Math.max(i,n),p,Math.min(i,n)]:[Math.min(i,n),p,Math.max(i,n),p],{style:y}=d,{stroke:b,strokeWidth:x=0,lineDash:C}=null!==(s=y[r%y.length])&&void 0!==s?s:{};return{tickId:a,offset:p,x1:g,y1:m,x2:f,y2:v,stroke:b,strokeWidth:x,lineDash:C}}calculateGridFills(e,t,i){const{horizontal:n,range:o,scale:s}=this;if("between"!==this.interval.placement)return super.calculateGridFills(e,t,i);const r=[];if(0==e.length)return r;const a=e[0],l=a.translation>o[0]+s.step/2,d=e.at(-1),c=n&&d.translation<o[1]-s.step/2;if(l){const n={tickId:"before:".concat(a.tickId),translation:a.translation-s.step};r.push(this.calculateGridFill(n,-1,a.index-1,t,i,e))}if(r.push(...e.map((n,o)=>this.calculateGridFill(n,o,n.index,t,i,e))),c){const n={tickId:"after:".concat(d.tickId),translation:d.translation+s.step};r.push(this.calculateGridFill(n,e.length,d.index+1,t,i,e))}return r}calculateGridFill(e,t,i,n,o,s){var r;let{tickId:a,translation:l}=e;const{gridLine:d,horizontal:c,interval:u,scale:h}=this;if("between"!==u.placement)return super.calculateGridFill({tickId:a,translation:l},t,i,n,o,s);const p=l-h.step/2,g=l+h.step/2,[m,f,v,y]=c?[p,Math.max(n,o),g,Math.min(n,o)]:[Math.min(n,o),p,Math.max(n,o),g],{fill:b,fillOpacity:x}=null!==(r=d.style[i%d.style.length])&&void 0!==r?r:{};return{tickId:a,x1:m,y1:f,x2:v,y2:y,fill:b,fillOpacity:x}}calculateTickLines(e,t){const i=super.calculateTickLines(e,t);var n;"between"===this.interval.placement&&e.length>0&&i.push(super.calculateTickLine({isPrimary:!1,tickId:"after:".concat(null===(n=e.at(-1))||void 0===n?void 0:n.tickId),translation:this.range[1]},e.length,t,e));return i}calculateTickLine(e,t,i,n){let{isPrimary:o,tickId:s,translation:r}=e;const{horizontal:a,interval:l,primaryTick:d,scale:c,tick:u}=this;if("between"!==l.placement)return super.calculateTickLine({isPrimary:o,tickId:s,translation:r},t,i,n);const h=o&&null!==d&&void 0!==d&&d.enabled?d:u,p=-i*this.getTickSize(h),g=r-(r<c.step?Math.floor(c.step/2):c.step/2),[m,f,v,y]=a?[g,0,g,p]:[0,g,p,g],{stroke:b,width:x}=h;return{tickId:s,offset:g,x1:m,y1:f,x2:v,y2:y,stroke:b,strokeWidth:x,lineDash:void 0}}reduceBandScalePadding(){return this.boundSeries.reduce((e,t)=>{var i;const n=null===(i=t.getBandScalePadding)||void 0===i?void 0:i.call(t);return n&&(e.inner>n.inner&&(e.inner=n.inner),e.outer<n.outer&&(e.outer=n.outer)),e},{inner:1/0,outer:-1/0})}tickFormatParams(e,t,i,n){return{type:"category"}}datumFormatParams(e,t,i,n,o){const{datum:s,seriesId:r,legendItemName:a,key:l,source:d,property:c,domain:u,boundSeries:h}=t;return Array.isArray(e)&&e.some(e=>"string"!==typeof e)?e=e.map(String):Array.isArray(e)||"string"===typeof e||"number"===typeof e||e instanceof Date||(e=String(e)),{type:"category",value:e,datum:s,seriesId:r,legendItemName:a,key:l,source:d,property:c,domain:u,boundSeries:h}}};cP.className="CategoryAxis",cP.type="category",Ab([ru],cP.prototype,"groupPaddingInner",2),Ab([ru],cP.prototype,"paddingInner",2),Ab([ru],cP.prototype,"paddingOuter",2);var uP=cP,hP=class e extends TD{constructor(){super(...arguments),this.previousDomainJson=void 0,this.animatable=!0}static is(t){return t instanceof e}set domain(e){if(e.length<=1e3){const t=JSON.stringify(e);this.animatable=void 0===this.previousDomainJson||this.previousDomainJson===t,this.previousDomainJson=t}else this.animatable=void 0===this.previousDomainJson,this.previousDomainJson="";super.domain=e}get domain(){return super.domain}normalizeDomains(){const{domain:e}=super.normalizeDomains(...arguments);return{domain:e,animatable:!1}}findIndex(e){var t;return null!==(t=super.findIndex(e))&&void 0!==t?t:this.getMatchIndex(e)}getMatchIndex(e){const t=JSON.stringify(e),i=this._domain.find(e=>JSON.stringify(e)===t);if(null!=i)return super.findIndex(i)}},pP=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(e,t){e>this.right&&(this.right=e),e<this.left&&(this.left=e),t>this.bottom&&(this.bottom=t),t<this.top&&(this.top=t)}},gP=class e{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;this.label=e,this.parent=t,this.refId=i,this.position=0,this.subtreeLeft=Number.NaN,this.subtreeRight=Number.NaN,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.index=0,this.screen=0,this.depth=t?t.depth+1:0}insertTick(t,i){let n,o=this;for(let s=0;s<t.length;s++){const r=t[s],a=s!==t.length-1,{children:l}=o,d=l.find(e=>e.label===r);if(d&&a)o=d,n=d;else{const t=new e(r,o,i);t.index=l.length,l.push(t),a&&(o=t),n=t}}return n}getLeftSibling(){var e;return this.index>0?null===(e=this.parent)||void 0===e?void 0:e.children[this.index-1]:void 0}getLeftmostSibling(){var e;return this.index>0?null===(e=this.parent)||void 0===e?void 0:e.children[0]:void 0}nextLeft(){return this.children[0]}nextRight(){return this.children.at(-1)}getSiblings(){var e,t;return null!==(e=null===(t=this.parent)||void 0===t?void 0:t.children.filter((e,t)=>t!==this.index))&&void 0!==e?e:[]}};function mP(e,t,i){const n=i/(t.index-e.index);t.change-=n,t.shift+=i,e.change+=n,t.prelim+=i,t.mod+=i}function fP(e,t,i){return t.getSiblings().includes(e.ancestor)?e.ancestor:i}function vP(e,t){const i=e.getLeftSibling();if(i){let n=e,o=e,s=i,r=o.getLeftmostSibling(),a=o.mod,l=n.mod,d=s.mod,c=r.mod;for(;s.nextRight()&&o.nextLeft();){s=s.nextRight(),o=o.nextLeft(),r=r.nextLeft(),n=n.nextRight(),n.ancestor=e;const i=s.prelim+d-(o.prelim+a)+1;i>0&&(mP(fP(s,e,t),e,i),a+=i,l+=i),d+=s.mod,a+=o.mod,c+=r.mod,l+=n.mod}s.nextRight()&&!n.nextRight()?n.mod+=d-l:(o.nextLeft()&&!r.nextLeft()&&(r.mod+=a-c),t=e)}return t}function yP(e){const{children:t}=e;if(t.length){let[i]=t;for(const e of t)yP(e),i=vP(e,i);!function(e){let{children:t}=e,i=0,n=0;for(let o=t.length-1;o>=0;o--){const e=t[o];e.prelim+=i,e.mod+=i,n+=e.change,i+=e.shift+n}}(e);const n=(t[0].prelim+t.at(-1).prelim)/2,o=e.getLeftSibling();o?(e.prelim=o.prelim+1,e.mod=e.prelim-n):e.prelim=n}else{const t=e.getLeftSibling();e.prelim=t?t.prelim+1:0}}function bP(e,t,i){e.position=e.prelim+t,i.insertNode(e);for(const n of e.children)bP(n,t+e.mod,i)}function xP(e){const{children:t}=e;let i=0;for(const n of t)xP(n),n.children.length?i+=n.leafCount:i++;e.leafCount=i,t.length?(e.subtreeLeft=t[0].subtreeLeft,e.subtreeRight=t.at(-1).subtreeRight,e.position=(e.subtreeLeft+e.subtreeRight)/2):(e.subtreeLeft=e.position,e.subtreeRight=e.position)}function CP(e){const t=new SP,{root:i,tickNodes:n}=function(e){const t=e.reduce((e,t)=>Math.max(e,t.length),0),i=new gP,n=new Map;for(let o=0;o<e.length;o++){const s=e[o];for(;s.length<t;)s.push("");const r=i.insertTick(s,o);null!=r&&n.set(s,r)}return{root:i,tickNodes:n}}(e);return yP(i),bP(i,-i.prelim,t),xP(i),{layout:t,tickNodes:n}}var SP=class{constructor(){this.dimensions=new pP,this.nodes=[],this.depth=0}insertNode(e){this.depth<e.depth&&(this.depth=e.depth),this.dimensions.update(e.position,e.depth),this.nodes.push(e)}scaling(e,t){let i=1;if(e>0){const{left:t,right:n}=this.dimensions;n!==t&&(i=e/(n-t))}return t&&(i*=-1),i}},wP=class extends kh{constructor(){super(...arguments),this.enabled=!0,this.border=new tD}};Ab([ru],wP.prototype,"enabled",2),Ab([ru],wP.prototype,"avoidCollisions",2),Ab([ru],wP.prototype,"border",2),Ab([ru],wP.prototype,"color",2),Ab([ru],wP.prototype,"cornerRadius",2),Ab([ru],wP.prototype,"spacing",2),Ab([ru],wP.prototype,"rotation",2),Ab([ru],wP.prototype,"wrapping",2),Ab([ru],wP.prototype,"truncate",2),Ab([ru],wP.prototype,"fill",2),Ab([ru],wP.prototype,"fontStyle",2),Ab([ru],wP.prototype,"fontWeight",2),Ab([ru],wP.prototype,"fontSize",2),Ab([ru],wP.prototype,"fontFamily",2),Ab([ru],wP.prototype,"padding",2);var MP=class extends kh{constructor(){super(...arguments),this.enabled=!0}};Ab([ru],MP.prototype,"enabled",2),Ab([ru],MP.prototype,"width",2),Ab([ru],MP.prototype,"stroke",2);var kP=class extends kh{constructor(){super(...arguments),this.label=new wP,this.tick=new MP}};Ab([ru],kP.prototype,"label",2),Ab([ru],kP.prototype,"tick",2);var DP=class extends uP{constructor(e){super(e,new hP),this.tickScale=new hP,this.computedLayout=void 0,this.tickTreeLayout=void 0,this.tickNodes=void 0,this.depthOptions=new Dh(kP),this.includeInvisibleDomains=!0,this.tickScale.paddingInner=1,this.tickScale.paddingOuter=0}resizeTickTree(){if(!this.tickTreeLayout)return;const{nodes:e}=this.tickTreeLayout,{range:t,step:i,inset:n,bandwidth:o}=this.scale,s=Math.abs(t[1]-t[0])-i,r=this.tickTreeLayout.scaling(s,t[0]>t[1]),a=n+o/2;let l=0;for(const d of e){const e=d.position*r;l>e&&(l=e),d.screen=e+a}for(const d of e)d.screen-=l}getDepthOptionsMap(e){const t=[],{depthOptions:i,label:n}=this,o=this.horizontal?0:-90;for(let v=0;v<e;v++){var s,r,a,l,d,c,u,h,p,g,m,f;t.push((null!==(s=null===(r=i[v])||void 0===r?void 0:r.label.enabled)&&void 0!==s?s:n.enabled)?{enabled:!0,spacing:null!==(a=null===(l=i[v])||void 0===l?void 0:l.label.spacing)&&void 0!==a?a:n.spacing,wrapping:null!==(d=null===(c=i[v])||void 0===c?void 0:c.label.wrapping)&&void 0!==d?d:n.wrapping,truncate:null!==(u=null===(h=i[v])||void 0===h?void 0:h.label.truncate)&&void 0!==u?u:n.truncate,rotation:null!==(p=null===(g=i[v])||void 0===g?void 0:g.label.rotation)&&void 0!==p?p:v?o:n.rotation,avoidCollisions:null!==(m=null===(f=i[v])||void 0===f?void 0:f.label.avoidCollisions)&&void 0!==m?m:n.avoidCollisions}:{enabled:!1,spacing:0,rotation:0,avoidCollisions:!1})}return t}updateCategoryLabels(){this.computedLayout&&this.tickLabelGroupSelection.update(this.computedLayout.tickLabelLayout).each((e,t)=>{var i;e.fill=t.color,e.text=t.text,e.textBaseline=t.textBaseline,e.textAlign=null!==(i=t.textAlign)&&void 0!==i?i:"center",e.pointerEvents=null==t.textUntruncated?1:0,e.setFont(t),e.setBoxing(t)})}updateAxisLine(){this.computedLayout&&(this.lineNode.visible=this.line.enabled,this.lineNode.stroke=this.line.stroke,this.lineNode.strokeWidth=this.line.width)}computeLayout(){var e;this.updateDirection(),this.updateScale();const{step:t}=this.scale,{title:i,label:n,range:o,depthOptions:s,horizontal:r,line:a}=this;if(this.lineNode.datum=r?{x1:o[0],x2:o[1],y1:0,y2:0}:{x1:0,x2:0,y1:o[0],y2:o[1]},this.lineNode.setProperties({stroke:a.stroke,strokeWidth:a.enabled?a.width:0}),this.resizeTickTree(),null===(e=this.tickTreeLayout)||void 0===e||!e.depth)return{bbox:Pb.zero,spacing:0,depthLabelMaxSize:{},tickLabelLayout:[]};const{depth:l,nodes:d}=this.tickTreeLayout,c=r?-n.getSideFlag():n.getSideFlag(),u=[],h=new Map,p=new Map,g=new TC,m=this.getDepthOptionsMap(l),f=c*m[0].spacing,v=this.tickFormatter(this.scale.domain,this.scale.domain,!1),y=(e,i)=>{var a,d;const c=l-e.depth;if(null===(a=m[c])||void 0===a||!a.enabled||!Ba(e.screen,o))return!1;let u=(e.leafCount||1)*t;if(u<5)return!1;const h=v(e.label,i-1);let y=h;const b=this.getLabelStyles({value:e.index,formattedValue:y,depth:c},null===(d=s[c])||void 0===d?void 0:d.label);if(n.avoidCollisions){const e=m[c].rotation;let t=this.thickness;if(null!=e){const i=Lp(e,u,t);u=i.width,t=i.height}y=Um(y,{font:b,textWrap:m[c].wrapping,overflow:m[c].truncate?"ellipsis":"hide",maxWidth:u,maxHeight:t})||y}return y!==h&&Kl(y)?p.set(i,ed(h)):p.delete(i),g.x=r?e.screen:f,g.y=r?f:e.screen,g.rotation=0,g.fill=b.color,g.text=y,g.textAlign="center",g.textBaseline=n.parallel?"top":"bottom",g.setFont(b),g.setBoxing(b),!0},b={};for(const[A,L]of d.entries()){var x,C;const e=l-L.depth;null!==(x=b[e])&&void 0!==x||(b[e]=0);if(!L.children.length&&t<5)continue;if(!y(L,A)||!g.getBBox())continue;h.set(A,g.getBBox()),g.rotation=Wp(null===(C=m[e])||void 0===C?void 0:C.rotation);const{width:i,height:n}=g.getBBox(),o=r?n:i;b[e]<o&&(b[e]=o)}const S=rv(),w=e=>{if(0===e)return 0;let t=b[0];for(let i=1;i<=e;i++)t+=m[i].spacing,i!==e&&(t+=b[i]);return t};for(const[A,L]of d.entries()){if(0===A)continue;const e=y(L,A),i=!L.children.length,o=l-L.depth;if(i&&t<5)continue;if(!e)continue;const s=Wp(m[o].rotation),a=h.get(A);if(!a)continue;const{width:d,height:f}=a,v=w(o);if(g.textAlign="center",g.textBaseline="middle",g.rotation=s,r?(g.y+=(v+jp(d/2,f/2,s))*c,g.rotationCenterX=L.screen,g.rotationCenterY=g.y):(g.x+=v*c+jp((m[o].spacing*c+d)/2,n.mirrored?d:0,s)-d/2,g.rotationCenterX=g.x,g.rotationCenterY=L.screen),m[o].avoidCollisions){const{width:e,height:n}=g.getBBox();if((r?e:n)>(i?t:L.leafCount*t)){h.delete(A);continue}}const b=g.getPlainText(),x=g.getBoxingProperties();u.push({text:b,textUntruncated:p.get(A),visible:!0,tickId:S(b),range:this.scale.range,border:x.border,color:g.fill,cornerRadius:x.cornerRadius,fill:x.fill,fontFamily:g.fontFamily,fontSize:g.fontSize,fontStyle:g.fontStyle,fontWeight:g.fontWeight,padding:x.padding,rotation:g.rotation,rotationCenterX:g.rotationCenterX,rotationCenterY:g.rotationCenterY,textAlign:g.textAlign,textBaseline:g.textBaseline,x:g.x,y:g.y}),h.set(A,Bx.toCanvas(g))}let M=b[0];for(let A=0;A<l;A++)M+=m[A].spacing,0!==A&&(M+=b[A]);const k=[this.lineNodeBBox(),Pb.merge(h.values()),new Pb(0,0,M*c,0)];let D=0;if(i.enabled){const e=Pb.merge(k);D=r?e.height:e.width,k.push(this.titleBBox(this.scale.domain,D))}const I=Pb.merge(k);return this.layoutCrossLines(),{bbox:I,spacing:D,depthLabelMaxSize:b,tickLabelLayout:u}}update(){if(!this.computedLayout)return;this.scale.animatable||this.moduleCtx.animationManager.skipCurrentBatch();const{tickScale:e,tick:t,gridLine:i,gridLength:n,visibleRange:o,tickTreeLayout:s}=this;if(!s)return;const{depthLabelMaxSize:r,spacing:a}=this.computedLayout,{depth:l}=s,d=this.getDepthOptionsMap(l),{position:c,horizontal:u,gridPadding:h}=this,p="bottom"===c||"right"===c?-1:1,g=h,m=p*n-h;let f;if(e.step>5){const t={nice:[!1,!1],interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0};f=e.ticks(t,void 0,o).ticks}else f=[];const v=f.map((t,i)=>({index:e.findIndex(t),tickId:AM(i,...t),translation:Math.round(e.convert(t))}));this.gridLineGroupSelection.update(i.enabled&&n?this.calculateGridLines(v,g,m):[]),this.gridFillGroupSelection.update(i.enabled&&n?this.calculateGridFills(v,g,m):[]),this.tickLineGroupSelection.update(t.enabled?f.map((e,i)=>{var n,o,s,a;const{tickId:c,translation:h}=v[i],g=null===(n=this.tickNodes)||void 0===n?void 0:n.get(e),m=null==g?l-1:Math.min(function(e){let t=0,i=e;for(;0===(null===(n=i)||void 0===n?void 0:n.index);){var n;t+=1,i=i.parent}return t}(g),l-1),f=null===(o=this.depthOptions[m])||void 0===o?void 0:o.tick;let y=r[0];for(let t=0;t<=m;t++)y+=d[t].spacing,0!==t&&(y+=r[t]);const b=null!==(s=null===f||void 0===f?void 0:f.stroke)&&void 0!==s?s:t.stroke,x=!1===(null===f||void 0===f?void 0:f.enabled)?0:null!==(a=null===f||void 0===f?void 0:f.width)&&void 0!==a?a:t.width,C=-p*y,[S,w,M,k]=u?[h,h,0,C]:[0,C,h,h];return{tickId:c,offset:h,x1:S,y1:M,x2:w,y2:k,stroke:b,strokeWidth:x,lineDash:void 0}}):[]),this.updatePosition(),this.updateCategoryLabels(),this.updateAxisLine(),this.updateGridLines(),this.updateGridFills(),this.updateTickLines(),this.updateTitle(this.scale.domain,a),this.updateCrossLines(),this.resetSelectionNodes()}calculateLayout(){const{depthLabelMaxSize:e,tickLabelLayout:t,spacing:i,bbox:n}=this.computeLayout();return this.computedLayout={depthLabelMaxSize:e,tickLabelLayout:t,spacing:i},{bbox:n,niceDomain:this.scale.domain}}onGridVisibilityChange(){super.onGridVisibilityChange(),this.tickLabelGroupSelection.clear()}updateScale(){super.updateScale(),this.tickScale.range=this.scale.range,this.scale.paddingOuter=this.scale.paddingInner/2}processData(){var e;const{direction:t}=this,i=this.boundSeries.filter(e=>e.visible).flatMap(e=>Ea(e.getDomain(t)));this.dataDomain={domain:null!==(e=Rg(i))&&void 0!==e?e:this.filterDuplicateArrays(i),clipped:!1},this.isReversed()&&this.dataDomain.domain.reverse();const n=this.dataDomain.domain.map(IP),{layout:o,tickNodes:s}=CP(n);this.tickTreeLayout=o,this.tickNodes=s;const r=[];for(const d of this.tickTreeLayout.nodes)d.leafCount||null==d.refId||r.push(this.dataDomain.domain[d.refId]);const a=Ir(this.dataDomain.domain,r);this.scale.domain=a;const l=a.map(IP);l.push([""]),this.tickScale.domain=l}filterDuplicateArrays(e){const t=new Set;return e.filter(e=>{const i=Ua(e)?JSON.stringify(e):e;return!t.has(i)&&(t.add(i),!0)})}};function IP(e){return Sr(Qa(e)&&"value"in e?e.value:e)}function AP(e,t){for(const i of t){const t=i.datum;void 0===t?jr.error("undefined datum"):e.addValue(i,t)}}function LP(e,t){const{x:i,y:n}=t,{nearest:o,distanceSquared:s}=e.getQuadTree().find(i,n);if(void 0!==o)return{datum:o.value,distance:Math.sqrt(s)}}DP.className="GroupedCategoryAxis",DP.type="grouped-category",Ab([ru],DP.prototype,"depthOptions",2);var NP=class extends ZE{constructor(){super(...arguments),this.direction="vertical"}};Ab([ru],NP.prototype,"direction",2);var TP=class extends XE{constructor(){super(...arguments),this.groupScale=new TD,this.smallestDataInterval=void 0,this.largestDataInterval=void 0}padBandExtent(e,t){var i;const n="boolean"===typeof t?1:.5,o=ol(this.smallestDataInterval)?this.smallestDataInterval*n:0,s=null!==(i=Rg(e))&&void 0!==i?i:[Number.NaN,Number.NaN];return"boolean"===typeof t?s[t?0:1]-=(t?1:-1)*o:(s[0]-=o,s[1]+=o),lw(s)}getBandScalePadding(){return{inner:.3,outer:.15}}shouldFlipXY(){return!this.isVertical()}isVertical(){return"vertical"===this.properties.direction}getBarDirection(){return this.shouldFlipXY()?_u.X:_u.Y}getCategoryDirection(){return this.shouldFlipXY()?_u.Y:_u.X}getValueAxis(){const e=this.getBarDirection();return this.axes[e]}getCategoryAxis(){const e=this.getCategoryDirection();return this.axes[e]}getBandwidth(e,t){return ck.is(e.scale)?e.scale.calcBandwidth(this.smallestDataInterval,t):e.scale.bandwidth}xCoordinateRange(e){var t;const i=this.axes[this.getCategoryDirection()],n=i.scale,o=null!==(t=this.getBandwidth(i,0))&&void 0!==t?t:0,s=ck.is(n)?-.5*o:0,r=n.convert(e)+s;return[r,r+o]}yCoordinateRange(e){const t=this.axes[this.getBarDirection()].scale,i=e.map(e=>t.convert(e));if(1===i.length){const e=t.convert(0);return[Math.min(i[0],e),Math.max(i[0],e)]}return[Math.min(...i),Math.max(...i)]}updateGroupScale(e){const t=[],{groupScale:i}=this,n=this.getBandwidth(e),{index:o,visibleGroupCount:s}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);for(let r=0;r<s;r++)t.push(String(r));i.domain=t,i.range=[0,null!==n&&void 0!==n?n:0],e instanceof DP?i.paddingInner=e.groupPaddingInner:e instanceof uP?(i.paddingInner=e.groupPaddingInner,i.round=0!==i.padding):i.padding=0;return{barWidth:i.bandwidth>=1?i.bandwidth:i.rawBandwidth,groupIndex:o}}resolveKeyDirection(e){return this.getBarDirection()===_u.X?e===_u.X?_u.Y:_u.X:e}initQuadTree(e){AP(e,this.datumNodesIter())}pickNodeClosestDatum(e){return LP(this,e)}};function RP(e,t,i){return(t-e)*i+e}function EP(e,t){const{x0:i,y0:n,x1:o,y1:s}=e,r=(s-n)/(o-i)*(t-i)+n;return{leftCp1x:i,leftCp1y:n,leftCp2x:t,leftCp2y:r,stepX:t,stepY0:r,stepY1:r,rightCp1x:t,rightCp1y:r,rightCp2x:o,rightCp2y:s}}function PP(e,t){return"linear"===e.type?EP(e,t):"cubic"===e.type?function(e,t){const{cp0x:i,cp0y:n,cp1x:o,cp1y:s,cp2x:r,cp2y:a,cp3x:l,cp3y:d}=e,c=ty(i,o,r,l,t),[u,h]=iy(i,n,o,s,r,a,l,d,c),p=u[3].y;return{leftCp1x:u[1].x,leftCp1y:u[1].y,leftCp2x:u[2].x,leftCp2y:u[2].y,stepX:t,stepY0:p,stepY1:p,rightCp1x:h[1].x,rightCp1y:h[1].y,rightCp2x:h[2].x,rightCp2y:h[2].y}}(e,t):"step"===e.type?function(e){const{x0:t,y0:i,x1:n,y1:o,stepX:s}=e;return{leftCp1x:(t+s)/2,leftCp1y:i,leftCp2x:(t+s)/2,leftCp2y:i,stepX:s,stepY0:i,stepY1:o,rightCp1x:(s+n)/2,rightCp1y:o,rightCp2x:(s+n)/2,rightCp2y:o}}(e):EP(e,t)}function OP(e,t,i,n,o,s,r){switch(t){case Sy.MoveTo:r?e.moveTo(o,s):e.moveTo(i,n);break;case Sy.LineTo:r?e.lineTo(o,s):e.lineTo(i,n);case Sy.Skip:}}function FP(e,t,i,n,o,s){s?e.lineTo(t,i):e.lineTo(n,o)}function zP(e,t,i,n,o,s,r,a,l,d){d?e.cubicCurveTo(s,r,n,o,t,i):e.cubicCurveTo(n,o,s,r,a,l)}function BP(e,t,i,n,o,s,r){r?(e.lineTo(s,o),e.lineTo(s,i),e.lineTo(t,i)):(e.lineTo(s,i),e.lineTo(s,o),e.lineTo(n,o))}function VP(e,t,i,n){const[o,s]=yy(t);switch(OP(e,i,o.x,o.y,s.x,s.y,n),t.type){case"linear":FP(e,t.x0,t.y0,t.x1,t.y1,n);break;case"cubic":zP(e,t.cp0x,t.cp0y,t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.cp3x,t.cp3y,n);break;case"step":BP(e,t.x0,t.y0,t.x1,t.y1,t.stepX,n);break;case"multi-line":!function(e,t,i,n,o,s,r){if(r){for(let t=s.length-1;t>=0;t--){const{x:i,y:n}=s[t];e.lineTo(i,n)}e.lineTo(t,i)}else{for(const{x:t,y:i}of s)e.lineTo(t,i);e.lineTo(n,o)}}(e,t.x0,t.y0,t.x1,t.y1,t.midPoints,n)}}function GP(e,t,i){const[n,o]=yy(e),[s,r]=yy(t);return[{x:RP(n.x,s.x,i),y:RP(n.y,s.y,i)},{x:RP(o.x,r.x,i),y:RP(o.y,r.y,i)}]}function HP(e,t,i,n,o,s){const[{x:r,y:a},{x:l,y:d}]=GP(t,i,n);if(OP(e,o,r,a,l,d,s),"cubic"===t.type&&"cubic"===i.type){zP(e,r,a,RP(t.cp1x,i.cp1x,n),RP(t.cp1y,i.cp1y,n),RP(t.cp2x,i.cp2x,n),RP(t.cp2y,i.cp2y,n),l,d,s)}else if("step"===t.type&&"step"===i.type){BP(e,r,a,l,d,RP(t.stepX,i.stepX,n),s)}else if("linear"===t.type&&"linear"===i.type)FP(e,r,a,l,d,s);else{let o;o="step"===t.type?t.stepX:"step"===i.type?i.stepX:(r+l)/2;const c=PP(t,o),u=PP(i,o),h=RP(c.leftCp1x,u.leftCp1x,n),p=RP(c.leftCp1y,u.leftCp1y,n),g=RP(c.leftCp2x,u.leftCp2x,n),m=RP(c.leftCp2y,u.leftCp2y,n),f=RP(c.stepX,u.stepX,n),v=RP(c.stepY0,u.stepY0,n),y=RP(c.stepY1,u.stepY1,n),b=RP(c.rightCp1x,u.rightCp1x,n),x=RP(c.rightCp1y,u.rightCp1y,n),C=RP(c.rightCp2x,u.rightCp2x,n),S=RP(c.rightCp2y,u.rightCp2y,n);s?(e.cubicCurveTo(C,S,b,x,f,y),e.lineTo(f,v),e.cubicCurveTo(g,m,h,p,r,a)):(e.cubicCurveTo(h,p,g,m,f,v),e.lineTo(f,y),e.cubicCurveTo(b,x,C,S,l,d))}}var jP=1e3,WP=(e=>(e[e.Zero=0]="Zero",e[e.Split=1]="Split",e))(WP||{});function _P(e){return uv(e).valueOf()}function KP(e,t){if(!t)return Number.NaN;if(e instanceof Date&&(e=e.getTime()),"continuous"===t.type&&"number"===typeof e){return(e-t.domain[0])/(t.domain[1]-t.domain[0])*(t.range[1]-t.range[0])+t.range[0]}if("log"===t.type&&"number"===typeof e)return t.convert(e);if("category"!==t.type)return Number.NaN;if(gy(t)){if("number"===typeof e){const{firstBandTime:i,intervalMs:n,bandCount:o,inset:s,step:r}=t,a=Math.round((e-i)/n);if(a>=0&&a<o)return s+r*a}return Number.NaN}const i=_P(e);let n=t.domain.findIndex(e=>_P(e)===i);return-1===n&&(n=t.domain.findIndex(t=>{return n=t,null!=(i=e)&&null!=n&&"object"===typeof i&&"object"===typeof n&&("id"in i&&"id"in n?i.id===n.id:i.toString()===n.toString());var i,n})),n>=0?t.inset+t.step*n:Number.NaN}function UP(e,t){let{data:i}=e;return i.map((e,i)=>({xValue0Index:t.indexOf(_P(e.xValue0)),xValue1Index:t.indexOf(_P(e.xValue1)),datumIndex:i}))}function YP(e){return Object.values(e.scales).every(e=>"category"!==e.type||(gy(e)?e.bandCount<jP:e.domain.length<jP))}function $P(e,t){const i=new Map;for(const{xValue0:l,xValue1:d}of e.data){const e=_P(l),t=_P(d);i.set(e,l).set(t,d)}const n=Array.from(i,e=>{let[t,i]=e;return{axisValue:t,value:i}});n.sort((t,i)=>KP(t.value,e.scales.x)-KP(i.value,e.scales.x));const o=[];for(const{xValue0:l,xValue1:d}of t.data){const e=_P(l),t=_P(d);i.has(e)||(i.set(e,l),o.push({axisValue:e,value:l})),i.has(t)||(i.set(t,d),o.push({axisValue:t,value:d}))}o.sort((e,i)=>KP(e.value,t.scales.x)-KP(i.value,t.scales.x));const s=n;let r=0;for(const l of o){for(let e=s.length-1;e>=r;e-=1){if(KP(l.value,t.scales.x)>KP(s[e].value,t.scales.x)){r=e+1;break}}s.splice(r,0,l),r+=1}if(!function(e,t){let i=-1/0;for(const n of e){const e=KP(n.value,t.scales.x);if(Number.isFinite(e)){if(e<i)return!1;i=e}}return!0}(s,t))return;const a=s.map(e=>e.axisValue);return{axisValues:a,oldDataAxisIndices:UP(t,a),newDataAxisIndices:UP(e,a)}}function ZP(e,t,i,n,o){var s;if(o.xValue1Index===o.xValue0Index+1)return e;const r=yy(e);let a,l;if("category"===(null===(s=t.scales.x)||void 0===s?void 0:s.type)){const e=(r[1].x-r[0].x)/(o.xValue1Index-o.xValue0Index);a=r[0].x+(n-o.xValue0Index)*e,l=a+e}else{const e=i[n],o=i[n+1];a=KP(e,t.scales.x),l=KP(o,t.scales.x)}return Cy(e,a,l)}function XP(e,t){const[i,n]=yy(e),o=KP(0,t.scales.y);return xy(e,{x:i.x,y:o},{x:n.x,y:o})}function qP(e){const[t,i]=yy(e);return by(e,{x:(t.x+i.x)/2,y:(t.y+i.y)/2})}function QP(e,t,i,n,o,s){let r,a;if(o.xValue0Index>=s.xValue1Index){var l;const e=null===(l=n.findLast(e=>e.xValue1Index<=s.xValue1Index))||void 0===l?void 0:l.datumIndex,t=null==e?void 0:i.data[e];r=null===t||void 0===t?void 0:t.xValue1,a=null===t||void 0===t?void 0:t.yValue1}else if(o.xValue0Index<=s.xValue0Index){var d;const e=null===(d=n.find(e=>e.xValue0Index>=s.xValue0Index))||void 0===d?void 0:d.datumIndex,t=null==e?void 0:i.data[e];r=null===t||void 0===t?void 0:t.xValue0,a=null===t||void 0===t?void 0:t.yValue0}if(null==r||null==a)switch(t){case 0:return XP(e,i);case 1:return qP(e)}const c={x:KP(r,i.scales.x),y:KP(a,i.scales.y)};return xy(e,c,c)}function JP(e,t){var i;if(null==t)return;const n=_P(e.xValue0),o=_P(e.xValue1);return null===(i=t.find(e=>_P(e.xValue0)===n&&_P(e.xValue1)===o))||void 0===i?void 0:i.span}function eO(e,t,i,n,o,s,r){const a=e.data[n.datumIndex],l=a.span,d=JP(a,o);if(null==d){const o=QP(l,t,e,i,n,s);r.added.push({from:o,to:l})}else r.removed.push({from:d,to:d}),r.moved.push({from:d,to:l}),r.added.push({from:l,to:l})}function tO(e,t,i,n,o,s,r){const a=e.data[n.datumIndex],l=a.span,d=JP(a,o);if(null==d){const o=QP(l,t,e,i,n,s);r.removed.push({from:l,to:o})}else r.removed.push({from:l,to:l}),r.moved.push({from:l,to:d}),r.added.push({from:d,to:d})}function iO(e,t,i,n,o){const s=n.scales.x,r=t[o.xValue0Index],a=t[o.xValue1Index];let l,d;if("continuous"===(null===s||void 0===s?void 0:s.type)||"log"===(null===s||void 0===s?void 0:s.type)?(l=i.data.findLast(e=>_P(e.xValue0)<=r),d=i.data.find(e=>_P(e.xValue1)>=a)):(l=i.data.find(e=>_P(e.xValue0)===r),d=i.data.find(e=>_P(e.xValue1)===a)),null==l||null==d)return;const[{x:c},{x:u}]=yy(e),h=KP(l.xValue0,i.scales.x),p=KP(l.yValue0,i.scales.y),g=KP(d.xValue1,i.scales.x),m=KP(d.yValue1,i.scales.y);let f=n.data[o.datumIndex].span;return f=xy(f,{x:h,y:p},{x:g,y:m}),f=Cy(f,c,u),f}function nO(e,t,i,n,o,s,r,a,l){const d=o+1,c=r.find(e=>e.xValue0Index<=o&&e.xValue1Index>=d),u=s.find(e=>e.xValue0Index<=o&&e.xValue1Index>=d),h=t.zeroData,p=e.zeroData;if(null==c&&null!=u)return void eO(e,i,s,u,h,a,l);if(null!=c&&null==u)return void tO(t,i,r,c,p,a,l);if(null==c||null==u)return;let g;g=c.xValue0Index===u.xValue0Index&&c.xValue1Index===u.xValue1Index?0:c.xValue0Index<=u.xValue0Index&&c.xValue1Index>=u.xValue1Index?-1:c.xValue0Index>=u.xValue0Index&&c.xValue1Index<=u.xValue1Index?1:0;const m=ZP(t.data[c.datumIndex].span,t,n,o,c),f=ZP(e.data[u.datumIndex].span,e,n,o,u);if(1===g){const o=iO(m,n,t,e,u);null==o?tO(t,i,r,c,p,a,l):(l.removed.push({from:m,to:o}),l.moved.push({from:o,to:f}),l.added.push({from:f,to:f}))}else if(-1===g){const o=iO(f,n,e,t,c);null==o?eO(e,i,s,u,h,a,l):(l.removed.push({from:m,to:m}),l.moved.push({from:m,to:o}),l.added.push({from:o,to:f}))}else l.removed.push({from:m,to:m}),l.moved.push({from:m,to:f}),l.added.push({from:f,to:f})}function oO(e,t,i){var n;const{span:o}=t;switch(i){case 0:return null!==(n=JP(t,e.zeroData))&&void 0!==n?n:XP(o,e);case 1:return qP(o)}}function sO(e,t,i){if(!YP(e)||!YP(t))return;if(!function(e,t){const i=t.scales.x,n=e.scales.x;if("category"!==(null===i||void 0===i?void 0:i.type)||"category"!==(null===n||void 0===n?void 0:n.type))return!0;if(gy(i)||gy(n))return!0;let o=-1/0;for(const s of i.domain){const e=KP(s,n);if(Number.isFinite(e)){if(e<o)return!1;o=e}}return!0}(e,t))return;const n=$P(e,t);return null==n?function(e,t,i){const n=[],o=[];for(const s of t.data){const e=s.span,n=oO(t,s,i);o.push({from:e,to:n})}for(const s of e.data){const t=s.span,o=oO(e,s,i);n.push({from:o,to:t})}return{removed:o,moved:[],added:n}}(e,t,i):n.axisValues.length===n.oldDataAxisIndices.length+n.newDataAxisIndices.length+2?function(e,t){const i=[],n=[],o=[];for(let s=0;s<t.data.length;s+=1){const r=t.data[s].span,a=e.data[s].span;i.push({from:r,to:r}),n.push({from:r,to:a}),o.push({from:a,to:a})}return{removed:i,moved:n,added:o}}(e,t):function(e,t,i,n){var o,s,r,a,l,d,c,u;const h={removed:[],moved:[],added:[]},{axisValues:p,oldDataAxisIndices:g,newDataAxisIndices:m}=e,f={xValue0Index:Math.max(null!==(o=null===(s=g.at(0))||void 0===s?void 0:s.xValue0Index)&&void 0!==o?o:-1/0,null!==(r=null===(a=m.at(0))||void 0===a?void 0:a.xValue0Index)&&void 0!==r?r:-1/0),xValue1Index:Math.min(null!==(l=null===(d=g.at(-1))||void 0===d?void 0:d.xValue1Index)&&void 0!==l?l:1/0,null!==(c=null===(u=m.at(-1))||void 0===u?void 0:u.xValue1Index)&&void 0!==c?c:1/0)};for(let v=0;v<p.length-1;v+=1)nO(t,i,n,p,v,m,g,f,h);return h}(n,e,t,i)}function rO(e,t){const i=e.map(e=>e.point);let n=wy(i);switch(t.type){case"linear":break;case"smooth":n=Dy(i,t.tension);break;case"step":n=ky(i,t.position)}return n.map(function(t,i){return{span:t,xValue0:e[i].xDatum,yValue0:e[i].yDatum,xValue1:e[i+1].xDatum,yValue1:e[i+1].yDatum}})}function aO(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.001;return Math.abs(e.x-t.x)<i&&Math.abs(e.y-t.y)<i}function lO(e,t){let i,{path:n}=e;for(const{span:o}of t){const[e,t]=yy(o);VP(n,o,null!=i&&aO(i,e)?Sy.Skip:Sy.MoveTo,!1),i=t}}function dO(e,t,i){let n;for(const o of i){const[i,s]=GP(o.from,o.to,e),r=null!=n&&aO(n,i)?Sy.Skip:Sy.MoveTo;HP(t.path,o.from,o.to,e,r,!1),n=s}}function cO(e,t,i){return{status:e,path:{addPhaseFn:(e,i)=>dO(e,i,t.added),updatePhaseFn:(e,i)=>dO(e,i,t.moved),removePhaseFn:(e,i)=>dO(e,i,t.removed)},pathProperties:uO(e,i)}}function uO(e,t){const i="none"===t?"updated":e,n={fromFn(t,n){var o;const s={phase:Yk[i]},r=null!==(o=t.previousDatum)&&void 0!==o?o:n;return null!=r&&(s.segments=r),"removed"===e?s.finish={visible:!1}:"added"===e&&(s.start={visible:!0}),s},toFn(e,t){const n={phase:Yk[i]},o=t;return null!=o&&(n.segments=o),n}};return"fade"===t?{fromFn(t,i){var o;const s="added"===e?0:t.opacity,r="removed"===e&&null!==(o=t.previousDatum)&&void 0!==o?o:i;return p(p({},n.fromFn(t,i)),{},{opacity:s,segments:r})},toFn(t,i){var o;const s="removed"===e?0:1,r="removed"===e&&null!==(o=t.previousDatum)&&void 0!==o?o:i;return p(p({},n.toFn(t,i)),{},{opacity:s,segments:r})}}:n}function hO(e,t,i,n){if(null!=t){const[e,i]=t;if(0!==e||1!==i)return!1}if(ck.is(e)){const t=e.calcBandwidth(n)-e.calcBandwidth(i);if(t>0&&t<1)return!1}if(pk.is(e)){const{bandwidth:t,step:i}=e;if(t>0&&t<1)return!1;const n=i-t;if(n>0&&n<1)return!1}return!0}var pO=e=>{var t;return Ga(null!==(t=e.yValue)&&void 0!==t?t:0)};function gO(e,t,i){const{startingX:n,startingY:o}=function(e,t){const i=t[e?_u.Y:_u.X];let n=1/0,o=0;if(!i)return{startingX:n,startingY:o};e?o=i.scale.convert(ck.is(i.scale)?0:Math.max(...i.range)):n=i.scale.convert(ck.is(i.scale)?0:Math.min(...i.range));return{startingX:n,startingY:o}}(e,t);return{isVertical:e,calculate:(t,i)=>{let s=e?t.x:n,r=e?o:t.y,a=e?t.width:0,l=e?0:t.height;const{opacity:d=1}=t;let c;return i&&(Number.isNaN(s)||Number.isNaN(r))&&(({x:s,y:r}=i),a=e?i.width:0,l=e?0:i.height,e&&!pO(i)?r+=i.height:!e&&pO(i)&&(s+=i.width)),c=null==t.clipBBox?void 0:pO(t)?e?new Pb(s,r-l,a,l):new Pb(s-a,r,a,l):new Pb(s,r,a,l),{x:s,y:r,width:a,height:l,clipBBox:c,opacity:d}},mode:i}}function mO(e,t){return{isVertical:e,calculate:t=>{var i;return{x:e?t.x:t.x+t.width/2,y:e?t.y+t.height/2:t.y,width:e?t.width:0,height:e?0:t.height,clipBBox:t.clipBBox,opacity:null!==(i=t.opacity)&&void 0!==i?i:1}},mode:t}}function fO(e,t){const i=e=>null==e||Number.isNaN(e.x)||Number.isNaN(e.y);return{toFn:(t,n,o)=>{return"removed"===o&&null==t.datum&&"fade"===e.mode?p(p({},vO(t,n)),{},{opacity:0}):"removed"===o||i(n)?e.calculate(n,t.previousDatum):{x:n.x,y:n.y,width:n.width,height:n.height,clipBBox:n.clipBBox,opacity:null!==(s=n.opacity)&&void 0!==s?s:1};var s},fromFn:(n,o,s)=>{let r;var a;("updated"===s&&i(o)?s="removed":"updated"===s&&i(n.previousDatum)&&(s="added"),"unknown"===s||"added"===s)?(r=null==n.previousDatum&&"fade"===e.mode?p(p({},vO(n,o)),{},{opacity:0}):e.calculate(o,n.previousDatum),"unknown"===s&&(s=t)):r={x:n.x,y:n.y,width:n.width,height:n.height,clipBBox:n.clipBBox,opacity:null!==(a=n.opacity)&&void 0!==a?a:1};const l=Yk[s];return p(p({},r),{},{phase:l})},applyFn:(e,t,i)=>{var n,o,s;e.resetAnimationProperties(t.x,t.y,t.width,t.height,null!==(n=t.opacity)&&void 0!==n?n:1,t.clipBBox),e.crisp="end"===i&&null!==(o=null===(s=e.datum)||void 0===s?void 0:s.crisp)&&void 0!==o&&o}}}function vO(e,t){var i,n;let{x:o,y:s,width:r,height:a,clipBBox:l,opacity:d=1}=t;return{x:o,y:s,width:r,height:a,clipBBox:l,opacity:d,crisp:null!==(i=null===(n=e.datum)||void 0===n?void 0:n.crisp)&&void 0!==i&&i}}function yO(e){for(const t of e){const e=t.nodes();t.batchedUpdate(function(){for(const t of e){var i,n;const e=t.datum;null!=e&&(t.resetAnimationProperties(e.x,e.y,e.width,e.height,null!==(i=e.opacity)&&void 0!==i?i:1,e.clipBBox),t.crisp=null!==(n=e.crisp)&&void 0!==n&&n)}t.cleanup()})}}function bO(e,t){if(void 0===t)return;const{x:i,y:n,width:o,height:s}=t;return Bx.toCanvas(e.contentGroup,new Pb(i,n,o,s))}function xO(e,t){let{path:i}=e,{spans:n,phantomSpans:o}=t,s=0,r={x:Number.NaN,y:Number.NaN},a={x:Number.NaN,y:Number.NaN};for(let l=0;l<n.length;l+=1){const{span:e}=n[l],{span:t}=o[l],{0:d,1:c}=yy(e),{0:u,1:h}=yy(t);if(aO(r,d)&&aO(a,u))VP(i,e,Sy.Skip,!1);else{for(let e=l-1;e>=s;e-=1)VP(i,o[e].span,Sy.LineTo,!0);i.closePath(),VP(i,e,Sy.MoveTo,!1),s=l}r=c,a=h}for(let l=n.length-1;l>=s;l-=1)VP(i,o[l].span,Sy.LineTo,!0);i.closePath()}function CO(e,t,i,n){let{path:o}=t;for(let s=0;s<i.length;s+=1){const t=i[s],r=n[s];HP(o,t.from,t.to,e,Sy.MoveTo,!1),HP(o,r.from,r.to,e,Sy.LineTo,!0),o.closePath()}}function SO(e,t,i,n){return{status:e,path:{addPhaseFn:(e,n)=>CO(e,n,t.added,i.added),updatePhaseFn:(e,n)=>CO(e,n,t.moved,i.moved),removePhaseFn:(e,n)=>CO(e,n,t.removed,i.removed)},pathProperties:uO(e,n)}}function wO(e,t,i,n,o,s,r){var a,l,d;let c=null===s||void 0===s||null===(a=s.reduced)||void 0===a||null===(a=a.diff)||void 0===a?void 0:a[e];if(null!==(l=c)&&void 0!==l&&l.changed)return c;if(!r)return{changed:!1,added:new Set,updated:new Set,removed:new Set,moved:new Set};const u=function(e,t){if(!t)return!1;const i=e.scales,n=t.scales;if(!fy(i.x,n.x))return!0;if(!fy(i.y,n.y))return!0;if(!MO(e)||!MO(t))return!1;const o=e.groupScale,s=t.groupScale;return!fy(o,s)}(n,o);return null==c&&null!=(null===s||void 0===s||null===(d=s.reduced)||void 0===d?void 0:d.diff)?(c={changed:!0,added:new Set,updated:new Set,removed:new Set,moved:new Set},u?c.updated=new Set(Array.from(t,e=>{let{datum:t}=e;return i(t)})):c.added=new Set(Array.from(t,e=>{let{datum:t}=e;return i(t)}))):u&&(c={changed:!0,added:new Set,updated:new Set(Array.from(t,e=>{let{datum:t}=e;return i(t)})),removed:new Set,moved:new Set}),c}function MO(e){return"object"===typeof e&&null!==e&&"groupScale"in e}function kO(e,t,i){let{id:n}=e;const o={phase:i?Yk[i]:"trailing"};for(var s=arguments.length,r=new Array(s>3?s-3:0),a=3;a<s;a++)r[a-3]=arguments[a];Zk(n,"markers",t,r,{opacity:0},{opacity:1},o);for(const l of r)l.cleanup()}function DO(e,t){let{id:i,nodeDataDependencies:n}=e;const o=n.seriesRectWidth;for(var s=arguments.length,r=new Array(s>2?s-2:0),a=2;a<s;a++)r[a-2]=arguments[a];$k(i,"markers",t,r,{fromFn:(e,t)=>{var i,n;const s=null!==(i=null===(n=t.midPoint)||void 0===n?void 0:n.x)&&void 0!==i?i:o;let r=za(0,jy(s/o),1);return Number.isNaN(r)&&(r=0),{scalingX:0,scalingY:0,delay:r,duration:.2,phase:"initial"}},toFn:()=>({scalingX:1,scalingY:1})})}function IO(e){return{opacity:1,scalingX:1,scalingY:1}}function AO(e){for(const t of e){const e=t.nodes();t.batchedUpdate(function(){for(const t of e){const e=t.datum;if(null==(null===e||void 0===e?void 0:e.point))continue;const{x:i,y:n}=e.point;Number.isFinite(i)&&Number.isFinite(n)&&t.resetAnimationProperties(i,n,t.size,1,1,1)}t.cleanup()})}}function LO(e,t){var i,n,o,s,r,a,l,d;return{x:null!==(i=null===(n=t.point)||void 0===n?void 0:n.x)&&void 0!==i?i:Number.NaN,y:null!==(o=null===(s=t.point)||void 0===s?void 0:s.y)&&void 0!==o?o:Number.NaN,scalingCenterX:null!==(r=null===(a=t.point)||void 0===a?void 0:a.x)&&void 0!==r?r:Number.NaN,scalingCenterY:null!==(l=null===(d=t.point)||void 0===d?void 0:d.y)&&void 0!==l?l:Number.NaN}}function NO(e,t){var i;let{datumIndex:n}=t;const o=e.getNodeData();if(void 0===o)return;const s=o[n],{point:r}=null!==s&&void 0!==s?s:{};if(null==s||null==r)return;const a=e.getFormattedMarkerStyle(s),l=FI.anchor(a.shape),d=null!==(i=r.focusSize)&&void 0!==i?i:a.size,c=4+d,u=c/2,h=(l.x-.5)*d,p=(l.y-.5)*d,g=s.point.x-u-h,m=s.point.y-u-p;return Bx.toCanvas(e.contentGroup,new Pb(g,m,c,c))}function TO(e,t,i){var n,o;if(!(null!==(n=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:i).enabled)&&void 0!==n?n:i.enabled))return!1;return(null!==(o=t.step)&&void 0!==o?o:Zu(t.range)/Math.max(1,e))>1}function RO(e,t,i,n){return null!==n&&void 0!==n||(n={stroke:t.stroke,strokeOpacity:t.strokeOpacity,strokeWidth:t.strokeWidth}),HM.reduce((t,o)=>(t[o]=e.getMarkerStyle(i,{},void 0,{highlightState:o},void 0,n),t),{})}function EO(e,t){let{id:i,visible:n,nodeDataDependencies:o}=e;const{seriesRectWidth:s,seriesRectHeight:r}=o;for(var a=arguments.length,l=new Array(a>2?a-2:0),d=2;d<a;d++)l[d-2]=arguments[d];Zk(i,"path_properties",t,l,{clipX:0},{clipX:s},{phase:"initial",start:{clip:!0,clipY:r,visible:n},finish:{clip:!1,visible:n}})}function PO(e,t,i){let{id:n}=e,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"add";for(var s=arguments.length,r=new Array(s>4?s-4:0),a=4;a<s;a++)r[a-4]=arguments[a];Zk(n,t,i,r,{opacity:0},{opacity:1},{phase:o})}function OO(e){return t=>({visible:e.getVisible(),opacity:e.getOpacity(),clipScalingX:1,clip:!1})}function FO(e,t){let{nodeDataDependencies:i}=e;const n=e=>Number.isFinite(e)?e:0;t.clipX=n(i.seriesRectWidth),t.clipY=n(i.seriesRectHeight)}var zO={[_u.Angle]:["angleKey"],[_u.Radius]:["radiusKey"]},BO={[_u.Angle]:["angleName"],[_u.Radius]:["radiusName"]},VO=class extends KE{constructor(e){let{categoryKey:t,pickModes:i=[1,0],canHaveAxes:n=!1,animationResetFns:o}=e;super(p(p({},l(e,xb)),{},{categoryKey:t,pickModes:i,canHaveAxes:n})),this.directions=[_u.Angle,_u.Radius],this.itemGroup=this.contentGroup.appendChild(new Gx({name:"items"})),this.nodeData=[],this.itemSelection=Jk.select(this.itemGroup,()=>this.nodeFactory(),!1),this.labelSelection=Jk.select(this.labelGroup,()=>this.labelFactory(),!1),this.highlightSelection=Jk.select(this.highlightNodeGroup,()=>this.nodeFactory()),this.highlightLabelSelection=Jk.select(this.highlightLabelGroup,()=>this.labelFactory()),this.centerX=0,this.centerY=0,this.radius=0,this.maxChartMarkerSize=0,this.animationResetFns=o,this.animationState=new Vm("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),highlightMarkers:e=>this.animateReadyHighlightMarkers(e),resize:e=>this.animateReadyResize(e),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:e=>this.animateWaitingUpdateReady(e)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable()),this.cleanup.register(this.ctx.eventsHub.on("legend:item-click",e=>this.onLegendItemClick(e)),this.ctx.eventsHub.on("legend:item-double-click",e=>this.onLegendItemDoubleClick(e)))}getItemNodes(){return[...this.itemGroup.children()]}getNodeData(){return this.nodeData}getKeyAxis(e){return e===_u.Angle?this.properties.angleKeyAxis:e===_u.Radius?this.properties.radiusKeyAxis:void 0}setZIndex(e){super.setZIndex(e),this.contentGroup.zIndex=[e,Lh.FOREGROUND],this.highlightGroup.zIndex=[e,Lh.HIGHLIGHT],this.labelGroup.zIndex=[e,Lh.LABEL]}resetAnimation(e){"initial"===e?this.animationState.transition("reset"):"ready"===e&&this.animationState.transition("skip")}labelFactory(){const e=new LC;return e.pointerEvents=1,e}getInnerRadius(){return 0}computeLabelsBBox(e,t){return null}getShapeFillBBox(){const e=this.radius;return{series:new Pb(-e,-e,2*e,2*e),axis:new Pb(-e,-e,2*e,2*e)}}resetAllAnimation(){var e;const{item:t,label:i}=null!==(e=this.animationResetFns)&&void 0!==e?e:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),t&&Qk([this.itemSelection,this.highlightSelection],t),i&&Qk([this.labelSelection,this.highlightLabelSelection],i),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup(),this.highlightLabelSelection.cleanup()}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(e){var t;const{item:i,label:n}=null!==(t=this.animationResetFns)&&void 0!==t?t:{};i&&Qk([this.highlightSelection],i),n&&Qk([this.highlightLabelSelection],n)}animateReadyHighlightMarkers(e){}animateReadyResize(e){this.resetAllAnimation()}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}computeFocusBounds(e){var t;const i=null===(t=this.getNodeData())||void 0===t?void 0:t[e.datumIndex];if(void 0!==i)return this.itemSelection.select(e=>e instanceof cC&&e.datum===i)[0]}getSeriesRange(){return[Number.NaN,Number.NaN]}isSeriesHighlighted(e,t){const{series:i,legendItemName:n,itemId:o}=null!==e&&void 0!==e?e:{},s="number"===typeof o?null===t||void 0===t?void 0:t[o]:void 0;return i===this||null!=s&&s===n}},GO=(e=>(e[e.None=0]="None",e[e.Item=1]="Item",e[e.OtherItem=2]="OtherItem",e[e.Branch=3]="Branch",e[e.OtherBranch=4]="OtherBranch",e))(GO||{});function HO(e){switch(e){case 1:return"highlighted-item";case 2:return"unhighlighted-item";case 3:return"highlighted-branch";case 4:return"unhighlighted-branch";case 0:return"none";default:return e}}var jO=class extends XM{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values(yA),this.strokes=Object.values(bA)}};Ab([ru],jO.prototype,"childrenKey",2),Ab([ru],jO.prototype,"sizeKey",2),Ab([ru],jO.prototype,"colorKey",2),Ab([ru],jO.prototype,"colorName",2),Ab([ru],jO.prototype,"fills",2),Ab([ru],jO.prototype,"strokes",2),Ab([ru],jO.prototype,"colorRange",2);var WO=class e{constructor(e,t,i,n,o,s,r,a,l,d){this.series=e,this.datumIndex=t,this.datum=i,this.sizeValue=n,this.colorValue=o,this.sumSize=s,this.depth=r,this.parent=a,this.children=l,this.style=d,this.midPoint={x:0,y:0}}get hasChildren(){return this.children.length>0}walk(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.Walk.PreOrder;i===e.Walk.PreOrder&&t(this);for(const e of this.children)e.walk(t,i);i===e.Walk.PostOrder&&t(this)}*[Symbol.iterator](){yield this;for(const e of this.children)yield*e}};WO.Walk={PreOrder:0,PostOrder:1};var _O=WO,KO=class extends MI{constructor(e){super({moduleCtx:e,pickModes:[1,0]}),this.colorDomain=[0,0],this.maxDepth=0,this.colorScale=new Jb,this.animationState=new Vm("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),resize:e=>this.animateReadyResize(e),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:e=>this.animateWaitingUpdateReady(e)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}resetAnimation(e){"initial"===e?this.animationState.transition("reset"):"ready"===e&&this.animationState.transition("skip")}processData(){var e;const{NodeClass:t}=this,{childrenKey:i,sizeKey:n,colorKey:o,colorRange:s}=this.properties;let r=0,a=1/0,l=-1/0;const d=(e,s,d)=>{const u=null==d.depth?0:d.depth+1,h=null==i?void 0:e[i],p=null==h||0===h.length;let g=null==n?void 0:e[n];g=Number.isFinite(g)?Math.max(g,0):p?1:0;const m=g;r=Math.max(r,u);const f=null==o?void 0:e[o];"number"===typeof f&&(a=Math.min(a,f),l=Math.max(l,f));const v=this.getItemStyle({datumIndex:s,datum:e,depth:u,colorValue:f},p,!1);return c(new t(this,s,e,g,f,m,u,d,[],v),h)},c=(e,t)=>{const{datumIndex:i}=e;if(t)for(const[n,o]of t.entries()){const t=d(o,i.concat(n),e);e.children.push(t),e.sumSize+=t.sumSize}return e},u=c(new t(this,[],void 0,0,void 0,0,void 0,void 0,[],{}),null===(e=this.data)||void 0===e?void 0:e.data),h=[a,l];this.colorScale.domain=a<l?[a,l]:[0,1],this.colorScale.range=null!==s&&void 0!==s?s:["black"],this.colorScale.update(),this.rootNode=u,this.maxDepth=r,this.colorDomain=h}update(e){let{seriesRect:t}=e;this.updateSelections(),this.updateNodes();const i=this.getAnimationData();this.checkResize(t)&&this.animationState.transition("resize",i),this.animationState.transition("update",i)}resetAllAnimation(e){this.ctx.animationManager.stopByAnimationGroupId(this.id)}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateReadyHighlight(e){}animateReadyResize(e){this.resetAllAnimation(e)}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}getAnimationData(){return{}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}dataCount(){return Number.NaN}getSeriesDomain(){return{domain:[Number.NaN,Number.NaN]}}getSeriesRange(){return[Number.NaN,Number.NaN]}getLegendData(e){const{colorKey:t,colorRange:i}=this.properties,{id:n,ctx:{legendManager:o},visible:s}=this;return"gradient"===e&&null!=t&&null!=i?[{legendType:"gradient",enabled:s&&o.getItemEnabled({seriesId:n}),seriesId:n,series:this.getFormatterContext("color"),colorRange:i,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(e){return e.datumIndex.join(":")}getDatumId(e){return this.getDatumIdFromData(e)}removeMeIndexPathForIndex(e){var t,i;return null!==(t=null===(i=this.datumSelection.at(e+1))||void 0===i?void 0:i.datum.datumIndex)&&void 0!==t?t:[]}removeMeIndexForIndexPath(e){for(const{index:t,datum:i}of this.datumSelection)if(kr(i.datumIndex,e))return t-1;return 0}pickFocus(e){var t;if(null===(t=this.rootNode)||void 0===t||!t.children.length)return;const i=za(0,e.datumIndex-e.datumIndexDelta,this.datumSelection.length-1),{datumIndexDelta:n,otherIndexDelta:o}=e;let s=this.removeMeIndexPathForIndex(i);const r=s.reduce((e,t)=>e.children[t],this.rootNode);if(o>0&&r.hasChildren)s=[...s,0];else if(o<0&&s.length>1)s=s.slice(0,-1);else if(0===o&&0!==n){const e=r.parent.children.length-1;s=s.slice(),s[s.length-1]=za(0,s.at(-1)+n,e)}const a=s.reduce((e,t)=>e.children[t],this.rootNode),l=this.computeFocusBounds(this.datumSelection.at(i+1));return null!=l?{datum:a,datumIndex:this.removeMeIndexForIndexPath(s),otherIndex:a.depth,bounds:l,clipFocusBox:!0}:void 0}getDatumAriaText(e,t){var i;if(e instanceof this.NodeClass)return this.ctx.localeManager.t("ariaAnnounceHierarchyDatum",{level:(null!==(i=e.depth)&&void 0!==i?i:-1)+1,count:e.children.length,description:t});jr.error("datum is not HierarchyNode: ".concat(JSON.stringify(e)))}getCategoryValue(e){}datumIndexForCategoryValue(e){}getActiveHighlightNode(){var e;const t=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight();if(null!=t&&t.series===this)return t}getHierarchyHighlightState(e,t,i){var n,o;if(e)return 1;if(null==t)return 0;const s=null===(n=i.datumIndex)||void 0===n?void 0:n[0],r=null===(o=t.datumIndex)||void 0===o?void 0:o[0];return null==s||null==r?0:s===r?3:4}getHierarchyHighlightStyles(e,t){switch(e){case 1:return xu(t.highlightedItem,t.highlightedBranch);case 3:return xu(t.unhighlightedItem,t.highlightedBranch);case 4:return t.unhighlightedBranch;default:return}}getHighlightStateString(e,t,i,n){if(null==i)return HO(0);const o=i.reduce((e,t)=>null===e||void 0===e?void 0:e.children[t],this.rootNode),s=this.getActiveHighlightNode();if(null==o)return HO(0);return HO(this.getHierarchyHighlightState(null!==t&&void 0!==t&&t,s,o))}},UO=Math.PI/180,YO=e=>e*UO,$O=e=>-Math.log(Math.tan(.25*Math.PI+e*UO*.5)),ZO=e=>e/UO,XO=e=>(Math.atan(Math.exp(-e))-.25*Math.PI)/(.5*UO),qO=class e extends Kb{constructor(t,i){super(),this.domain=t,this.range=i,this.type="mercator",this.defaultTickCount=0,this.bounds=e.bounds(t)}static bounds(e){const[[t,i],[n,o]]=e,s=YO(t),r=$O(i),a=YO(n),l=$O(o);return new Pb(Math.min(s,a),Math.min(r,l),Math.abs(a-s),Math.abs(l-r))}static fixedScale(){return new e([[ZO(0),XO(0)],[ZO(1),XO(1)]],[[0,0],[1,1]])}toDomain(){}normalizeDomains(){let e=-1/0,t=1/0,i=-1/0,n=1/0;for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];for(const a of s){const o=a.domain;for(const[s,r]of o)e=Math.min(s,e),t=Math.max(s,t),i=Math.min(r,i),n=Math.max(r,n)}return{domain:[[e,i],[t,n]],animatable:!0}}convert(e){let[t,i]=e;const[[n,o],[s,r]]=this.range,a=(s-n)/this.bounds.width,l=(r-o)/this.bounds.height;return[(YO(t)-this.bounds.x)*a+n,($O(i)-this.bounds.y)*l+o]}invert(e){let[t,i]=e;const[[n,o],[s,r]]=this.range,a=(s-n)/this.bounds.width,l=(r-o)/this.bounds.height;return[ZO((t-n)/a+this.bounds.x),XO((i-o)/l+this.bounds.y)]}getDomainMinMax(){return Zb(this.domain)}},QO=class{constructor(e){var t,i;this.minimumDelay=null!==(t=null===e||void 0===e?void 0:e.minimumDelay)&&void 0!==t?t:50,this.timeout=null!==(i=null===e||void 0===e?void 0:e.timeout)&&void 0!==i?i:100}schedule(e,t){this.cancel(),this.pending={computation:e,onComplete:t},this.minimumDelay>0?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=void 0,this.scheduleIdleCallback()},this.minimumDelay):this.scheduleIdleCallback()}demand(){if(this.pending)return this.cancelScheduled(),this.execute()}cancel(){this.cancelScheduled(),this.pending=void 0}isPending(){return null!=this.pending}scheduleIdleCallback(){const e=Pr(),t=Math.max(0,this.timeout-this.minimumDelay);"function"===typeof e.requestIdleCallback?this.idleCallbackId=e.requestIdleCallback(this.execute.bind(this),{timeout:t}):this.idleCallbackId=setTimeout(()=>this.execute(),t)}cancelScheduled(){if(null!=this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=void 0),null==this.idleCallbackId)return;const e=Pr();"function"===typeof e.cancelIdleCallback?e.cancelIdleCallback(this.idleCallbackId):clearTimeout(this.idleCallbackId),this.idleCallbackId=void 0}execute(){const e=this.pending;if(!e)return;this.pending=void 0,this.delayTimeoutId=void 0,this.idleCallbackId=void 0;const t=e.computation();return e.onComplete(t),t}},JO=class{constructor(){this.executor=new QO}get filters(){return this._filters}aggregate(e){if(this.executor.cancel(),e.targetRange>1&&e.computePartial){const t=e.computePartial(this._filters);if(t){const{immediate:e,computeRemaining:i}=t;return i&&this.executor.schedule(i,e=>{this.mergeFilters(e)}),this._filters=e,e}}return this._filters=e.computeFull(this._filters),this._filters}ensureLevelForRange(e){var t;if(!(null===(t=this._filters)||void 0===t?void 0:t.some(t=>t.maxRange>e))&&this.executor.isPending()){const e=this.executor.demand();e&&this.mergeFilters(e)}}getFilterForRange(e){var t;return null===(t=this._filters)||void 0===t?void 0:t.find(t=>t.maxRange>e)}cancel(){this.executor.cancel()}markStale(){if(this._filters)for(const e of this._filters)e.stale=!0;this.executor.cancel()}mergeFilters(e){if(!this._filters||0===e.length)return;const t=[...this._filters,...e];t.sort((e,t)=>e.maxRange-t.maxRange),this._filters=t}},eF=class extends LD{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}update(){super.update(),this.tickLineGroup.visible=this.tick.enabled,this.tickLabelGroup.visible=this.label.enabled}layoutCrossLines(){const e=this.label.getSideFlag(),t=this.hasDefinedDomain()||this.hasVisibleSeries(),{rotation:i,parallelFlipRotation:n,regularFlipRotation:o}=this.calculateRotations();for(const r of this.crossLines){var s;r.sideFlag=-e,r.direction=i===-Math.PI/2?_u.Angle:_u.Radius,r.parallelFlipRotation=n,r.regularFlipRotation=o,null===(s=r.calculateLayout)||void 0===s||s.call(r,t,this.reverse)}}updatePosition(){super.updatePosition();const e=Math.floor(this.translation.x),t=Math.floor(this.translation.y);this.tickLineGroup.translationX=e,this.tickLineGroup.translationY=t,this.tickLabelGroup.translationX=e,this.tickLabelGroup.translationY=t,this.crossLineRangeGroup.translationX=e,this.crossLineRangeGroup.translationY=t,this.crossLineLineGroup.translationX=e,this.crossLineLineGroup.translationY=t,this.crossLineLabelGroup.translationX=e,this.crossLineLabelGroup.translationY=t,this.tickLabelGroupSelection.each((e,t)=>({x:t.x,y:t.y,rotationCenterX:t.rotationCenterX,rotationCenterY:t.rotationCenterY,rotation:t.rotation}))}computeLabelsBBox(e,t){return null}computeRange(){}getAxisLinePoints(){}};Ab([ru],eF.prototype,"shape",2),Ab([ru],eF.prototype,"innerRadiusRatio",2);var tF=class extends uP{calculateGridLine(e,t,i,n,o){var s;let{index:r,tickId:a,translation:l}=e;const{gridLine:d,horizontal:c,interval:u,range:h}=this;if("between"!==u.placement)return super.calculateGridLine({index:r,tickId:a,translation:l},t,i,n,o);const p=o[t-1],g=p?l-(l-p.translation)/2:h[0],[m,f,v,y]=c?[g,Math.max(i,n),g,Math.min(i,n)]:[Math.min(i,n),g,Math.max(i,n),g],{style:b}=d,{stroke:x,strokeWidth:C=0,lineDash:S}=null!==(s=b[r%b.length])&&void 0!==s?s:{};return{tickId:a,offset:g,x1:m,y1:f,x2:v,y2:y,stroke:x,strokeWidth:C,lineDash:S}}calculateGridFills(e,t,i){return"between"!==this.interval.placement?super.calculateGridFills(e,t,i):e.map((n,o)=>this.calculateGridFill(n,o,n.index,t,i,e))}calculateGridFill(e,t,i,n,o,s){var r;let{tickId:a,translation:l}=e;const{gridLine:d,horizontal:c,interval:u,range:h}=this;if("between"!==u.placement)return super.calculateGridFill({tickId:a,translation:l},t,i,n,o,s);const p=s[t-1],g=s[t+1],m=p?l-(l-p.translation)/2:h[0],f=g?l+(g.translation-l)/2:h[1],[v,y,b,x]=c?[m,Math.max(n,o),f,Math.min(n,o)]:[Math.min(n,o),m,Math.max(n,o),f],{fill:C,fillOpacity:S}=null!==(r=d.style[i%d.style.length])&&void 0!==r?r:{};return{tickId:a,x1:v,y1:y,x2:b,y2:x,fill:C,fillOpacity:S}}calculateTickLine(e,t,i,n){let{isPrimary:o,tickId:s,translation:r}=e;const{horizontal:a,interval:l,primaryTick:d,range:c,tick:u}=this;if("between"!==l.placement)return super.calculateTickLine({isPrimary:o,tickId:s,translation:r},t,i,n);const h=o&&null!==d&&void 0!==d&&d.enabled?d:u,p=-i*this.getTickSize(h),g=n[t-1],m=g?r-(r-g.translation)/2:c[0],[f,v,y,b]=a?[m,0,m,p]:[0,m,p,m],{stroke:x,width:C}=h;return{tickId:s,offset:m,x1:f,y1:v,x2:y,y2:b,stroke:x,strokeWidth:C,lineDash:void 0}}},iF={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},"top-left":{xTranslationDirection:1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"bottom-right":{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:1,yTranslationDirection:0},"inside-right":{xTranslationDirection:-1,yTranslationDirection:0},"inside-top":{xTranslationDirection:0,yTranslationDirection:1},"inside-bottom":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-right":{xTranslationDirection:-1,yTranslationDirection:-1}},nF={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},"top-left":{xTranslationDirection:-1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"bottom-right":{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:0,yTranslationDirection:1},"inside-right":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top":{xTranslationDirection:-1,yTranslationDirection:0},"inside-bottom":{xTranslationDirection:1,yTranslationDirection:0},"inside-top-left":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"inside-bottom-right":{xTranslationDirection:1,yTranslationDirection:-1}};function oF(e){let{yDirection:t,padding:i=0,position:n="top",bbox:o}=e;const s=t?iF:nF,{xTranslationDirection:r,yTranslationDirection:a}=s[n];return{xTranslation:r*(i+o.width/2),yTranslation:a*(i+o.height/2)}}function sF(e,t,i,n,o){const s=(n,o,s,r)=>{i.animate({id:"".concat(e,"_").concat(t,"_").concat(o.id,"_").concat(n),groupId:e,from:s?1:0,to:1,ease:zy,collapsable:s,onUpdate(e,t){t&&"removed"!==n||(o.path.clear(!0),r(e,o),o.checkPathDirty())},onStop(){"added"===n&&(o.path.clear(!0),r(1,o),o.checkPathDirty())},phase:Yk[n]})},r=new cC,a=e=>(r.resetPathDirty(),e(0,r),r.resetPathDirty(),e(1,r),r.checkPathDirty(),r.isPathDirty()),{addPhaseFn:l,updatePhaseFn:d,removePhaseFn:c}=o;for(const u of n)i.isSkipped()||(s("removed",u,!a(c),c),s("updated",u,!a(d),d)),s("added",u,!a(l),l)}var rF=class extends Iy{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}};function aF(e){let{startAngle:t,endAngle:i,innerRadius:n,outerRadius:o}=e,s=1/0,r=1/0,a=-1/0,l=-1/0;const d=(e,t)=>{s=Math.min(e,s),r=Math.min(t,r),a=Math.max(e,a),l=Math.max(t,l)};return d(n*Math.cos(t),n*Math.sin(t)),d(n*Math.cos(i),n*Math.sin(i)),d(o*Math.cos(t),o*Math.sin(t)),d(o*Math.cos(i),o*Math.sin(i)),zp(0,t,i)&&d(o,0),zp(.5*Math.PI,t,i)&&d(0,o),zp(Math.PI,t,i)&&d(-o,0),zp(1.5*Math.PI,t,i)&&d(0,-o),new Pb(s,r,a-s,l-r)}function lF(e,t,i){const n=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),{innerRadius:o,outerRadius:s}=i;if(i.startAngle===i.endAngle||n<Math.min(o,s)||n>Math.max(o,s))return!1;const r=Fp(i.startAngle),a=Fp(i.endAngle),l=Math.atan2(t,e);return r<a?l<=a&&l>=r:l<=a&&l>=-Math.PI||l>=r&&l<=Math.PI}function dF(e,t){const{startAngle:i,endAngle:n,innerRadius:o,outerRadius:s}=t,r={x:s*Math.cos(i),y:s*Math.sin(i)},a={x:s*Math.cos(n),y:s*Math.sin(n)},l=0===o?{x:0,y:0}:{x:o*Math.cos(i),y:o*Math.sin(i)},d=0===o?{x:0,y:0}:{x:o*Math.cos(n),y:o*Math.sin(n)};return mx(e.start.x,e.start.y,e.end.x,e.end.y,r.x,r.y,l.x,l.y)||mx(e.start.x,e.start.y,e.end.x,e.end.y,a.x,a.y,d.x,d.y)||function(e,t,i,n,o,s,r,a,l,d){if(Number.isNaN(e)||Number.isNaN(t))return 0;s&&([o,n]=[n,o]);const c=(d-a)/(l-r),u=a-c*r,h=Math.pow(c,2)+1,p=2*(c*(u-t)-e),g=Math.pow(e,2)+Math.pow(u-t,2)-Math.pow(i,2),m=Math.pow(p,2)-4*h*g;if(m<0)return 0;const f=(-p+Math.sqrt(m))/2/h,v=(-p-Math.sqrt(m))/2/h;let y=0;for(const b of[f,v]){if(!(b>=Math.min(r,l)&&b<=Math.max(r,l)))continue;const i=b-e,s=c*b+u-t;zp(Math.atan2(s,i),n,o)&&y++}return y}(0,0,s,i,n,!0,e.start.x,e.start.y,e.end.x,e.end.y)}function cF(e,t,i,n){if(0===i&&0===n)return 0;if(Math.asin(Math.abs(1*i)/(e+1*i))+Math.asin(Math.abs(1*n)/(e+1*n))-t<0)return 1;let o=0,s=1;for(let r=0;r<8;r+=1){const r=(o+s)/2;Math.asin(Math.abs(r*i)/(e+r*i))+Math.asin(Math.abs(r*n)/(e+r*n))-t<0?o=r:s=r}return o}Ab([ru,_y()],rF.prototype,"enabled",2),Ab([ru,_y()],rF.prototype,"color",2),Ab([ru,_y()],rF.prototype,"xOffset",2),Ab([ru,_y()],rF.prototype,"yOffset",2),Ab([ru,_y()],rF.prototype,"blur",2);function uF(e,t){return Gp(e,t)<1e-6?t:Pp(e-t)+t}function hF(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=Math.abs(t-e)>=2*Math.PI?2*Math.PI:Pp(t-e);return{startAngle:e=uF(e,i),endAngle:t=e+n}}function pF(e,t,i,n,o,s){const r=Math.sin(s),a=Math.cos(s),l=e**2+t**2-i**2;let d,c,u,h;if(a>.5){const i=r/a,n=1+i**2,o=-2*(e+t*i),s=o**2-4*n*l;if(s<0)return;const p=(-o+Math.sqrt(s))/(2*n),g=(-o-Math.sqrt(s))/(2*n);d=p,c=p*i,u=g,h=g*i}else{const i=a/r,n=1+i**2,o=-2*(t+e*i),s=o**2-4*n*l;if(s<0)return;const p=(-o+Math.sqrt(s))/(2*n),g=(-o-Math.sqrt(s))/(2*n);d=p*i,c=p,u=g*i,h=g}const p=u*a+h*r,g=d*a+c*r>0?uF(Math.atan2(c-t,d-e),n):Number.NaN,m=p>0?uF(Math.atan2(h-t,u-e),n):Number.NaN;return g>=n&&g<=o?g:m>=n&&m<=o?m:void 0}function gF(e,t,i,n,o,s){const r=Math.hypot(e,t),a=r-(r**2-i**2+s**2)/(2*r),l=Math.atan2(t,e),d=Math.acos(-a/i),c=uF(l+d,n),u=uF(l-d,n);return c>=n&&c<=o?c:u>=n&&u<=o?u:void 0}var mF=class extends cC{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";super(),this._d="",this.d=e}get d(){return this._d}set d(e){e!==this._d&&(this._d=e,this.path.clear(),this.path.appendSvg(e),this.checkPathDirty())}},fF=class extends(Fx(mF)){isPointInPath(e,t){return super.isPointInPath(e-this.translationX,t-this.translationY)}},vF=class e extends VD{static is(t){return t instanceof e}setSourceScale(e){this._sourceScale=e;const t=t=>{Object.defineProperty(this,t,{get:()=>e[t],set:i=>{e[t]=i},configurable:!0})};t("domain"),t("range"),t("paddingInner"),t("paddingOuter"),t("round");const i=t=>{Object.defineProperty(this,t,{get:()=>e[t],configurable:!0})};i("bandwidth"),i("step"),i("inset"),i("rawBandwidth")}get bands(){var e,t;return null!==(e=null===(t=this._sourceScale)||void 0===t?void 0:t.bands)&&void 0!==e?e:super.bands}refresh(){var e,t;null===(e=this._sourceScale)||void 0===e||null===(t=e.refresh)||void 0===t||t.call(e)}ordinalRange(e){return this._sourceScale?this._sourceScale.ordinalRange(e):super.ordinalRange(e)}convert(e,t){this.refresh();const i=this.findIndex(e,null===t||void 0===t?void 0:t.alignment);return null==i||i<0||i>=this.bands.length?Number.NaN:this.ordinalRange(i)}findIndex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pa.Leading;if(null==e)return;const{bands:i,reversed:n}=this,o=i.length;if(0===o)return;if(1===o)return 0;const s=i[0],r=i[o-1];var a;if(null==s||null==r)return null===(a=this._sourceScale)||void 0===a?void 0:a.findIndex(e,t);const l=e.valueOf(),d=s.valueOf(),c=(l-d)/(r.valueOf()-d),u=n?(1-c)*(o-1):c*(o-1);return t===Pa.Leading?Math.max(0,Math.min(o-1,Math.floor(u))):Math.max(0,Math.min(o-1,Math.ceil(u)))}},yF=class e{constructor(e,t,i,n){this.startAngle=e,this.endAngle=t,this.innerRadius=i,this.outerRadius=n}clone(){const{startAngle:t,endAngle:i,innerRadius:n,outerRadius:o}=this;return new e(t,i,n,o)}equals(e){return this.startAngle===e.startAngle&&this.endAngle===e.endAngle&&this.innerRadius===e.innerRadius&&this.outerRadius===e.outerRadius}[Nb](t,i){return new e(this.startAngle*(1-i)+t.startAngle*i,this.endAngle*(1-i)+t.endAngle*i,this.innerRadius*(1-i)+t.innerRadius*i,this.outerRadius*(1-i)+t.outerRadius*i)}},bF=class extends _b{constructor(e){super(),this.sourceImage=e,this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1}render(e){const{ctx:t}=e,i=this.sourceImage;i&&(t.globalAlpha=this.opacity,t.drawImage(i,0,0,i.width,i.height,this.x,this.y,this.width,this.height)),super.render(e)}};Ab([_y()],bF.prototype,"x",2),Ab([_y()],bF.prototype,"y",2),Ab([_y()],bF.prototype,"width",2),Ab([_y()],bF.prototype,"height",2),Ab([_y()],bF.prototype,"opacity",2);var xF=class extends cC{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=!1,this.type=0}get fullPie(){return Va(Pp(this.startAngle),Pp(this.endAngle))}updatePath(){const e=this.path;e.clear(),e.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),1===this.type?e.closePath():2!==this.type||this.fullPie||(e.lineTo(this.centerX,this.centerY),e.closePath())}computeBBox(){return new Pb(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)}isPointInPath(e,t){const i=this.getBBox();return 0!==this.type&&i.containsPoint(e,t)&&this.path.isPointInPath(e,t)}};function CF(e,t,i){const n=Math.hypot(e,t),o=Math.atan2(t,e)+i;return{x:Math.cos(o)*n,y:Math.sin(o)*n}}xF.className="Arc",Ab([_y()],xF.prototype,"centerX",2),Ab([_y()],xF.prototype,"centerY",2),Ab([_y()],xF.prototype,"radius",2),Ab([_y()],xF.prototype,"startAngle",2),Ab([_y()],xF.prototype,"endAngle",2),Ab([_y()],xF.prototype,"counterClockwise",2),Ab([_y()],xF.prototype,"type",2);var SF=class extends cC{constructor(){super(...arguments),this.isBeveled=!0,this.columnWidth=0,this.startAngle=0,this.endAngle=0,this.outerRadius=0,this.innerRadius=0,this.axisInnerRadius=0,this.axisOuterRadius=0}set cornerRadius(e){}computeBBox(){const{columnWidth:e}=this,[t,i]=this.normalizeRadii(this.innerRadius,this.outerRadius),n=this.getRotation(),o=-e/2,s=e/2,r=-i,a=-t;let l=1/0,d=1/0,c=-1/0,u=-1/0;for(let h=0;h<4;h+=1){const{x:e,y:t}=CF(h%2===0?o:s,h<2?r:a,n);l=Math.min(e,l),d=Math.min(t,d),c=Math.max(e,c),u=Math.max(t,u)}return new Pb(l,d,c-l,u-d)}getRotation(){const{startAngle:e,endAngle:t}=this;return Pp(e+Gp(e,t)/2+Math.PI/2)}normalizeRadii(e,t){return e>t?[t,e]:[e,t]}updatePath(){const{isBeveled:e}=this;e?this.updateBeveledPath():this.updateRectangularPath(),this.checkPathDirty()}updateRectangularPath(){const{columnWidth:e,path:t}=this,[i,n]=this.normalizeRadii(this.innerRadius,this.outerRadius),o=-e/2,s=e/2,r=-n,a=-i,l=this.getRotation(),d=[[o,a],[o,r],[s,r],[s,a]].map(e=>{let[t,i]=e;return CF(t,i,l)});t.clear(!0),t.moveTo(d[0].x,d[0].y),t.lineTo(d[1].x,d[1].y),t.lineTo(d[2].x,d[2].y),t.lineTo(d[3].x,d[3].y),t.closePath()}calculateCircleIntersection(e,t){const i=e*e;if(t<i)return null;const n=-Math.sqrt(t-i);return{y:n,angle:Math.atan2(n,e)}}calculateBothIntersections(e,t,i){const n=i*i,o=this.calculateCircleIntersection(e,n),s=this.calculateCircleIntersection(t,n);return o&&s?{left:o,right:s}:null}calculateAxisOuterIntersections(e,t,i){const n=i*i,o=this.calculateCircleIntersection(e,n),s=this.calculateCircleIntersection(t,n);return o&&s?{left:o,right:s,radiusSquared:n}:null}moveToRotated(e,t,i){const n=CF(e,t,i);this.path.moveTo(n.x,n.y)}lineToRotated(e,t,i){const n=CF(e,t,i);this.path.lineTo(n.x,n.y)}renderTopWithCornerClipping(e,t,i){const{path:n}=this,{right:o,top:s,rotation:r}=i,a=s*s,l=t.radiusSquared-a;if(l<=0)this.lineToRotated(o,t.right.y,r),n.arc(0,0,e,r+t.right.angle,r+t.left.angle,!0);else{const i=Math.sqrt(l),a=Math.atan2(s,i),d=Math.atan2(s,-i);this.lineToRotated(o,t.right.y,r),n.arc(0,0,e,r+t.right.angle,r+a,!0),this.lineToRotated(-i,s,r),n.arc(0,0,e,r+d,r+t.left.angle,!0)}}updateBeveledPath(){const{columnWidth:e,path:t,axisInnerRadius:i,axisOuterRadius:n}=this,[o,s]=this.normalizeRadii(this.innerRadius,this.outerRadius),r=-e/2,a=e/2,l=-s,d=-o,c=this.getRotation(),u=Va(o,i),h=Va(s,n),p=Math.hypot(r,l)>n||Math.hypot(a,l)>n;if(!u&&!h&&!p)return void this.updateRectangularPath();const g=u?this.calculateBothIntersections(r,a,o):null,m=h?this.calculateBothIntersections(r,a,s):null,f=p?this.calculateAxisOuterIntersections(r,a,n):null;if(u&&!g||h&&!m||p&&!f)return void this.updateRectangularPath();t.clear(!0);const v={left:r,right:a,top:l,bottom:d,rotation:c};g?this.moveToRotated(r,g.left.y,c):this.moveToRotated(r,d,c),g?t.arc(0,0,o,c+g.left.angle,c+g.right.angle,!1):this.lineToRotated(a,d,c),m?(this.lineToRotated(a,m.right.y,c),t.arc(0,0,s,c+m.right.angle,c+m.left.angle,!0)):f?this.renderTopWithCornerClipping(n,f,v):(this.lineToRotated(a,l,c),this.lineToRotated(r,l,c)),t.closePath()}};function wF(e,t,i,n,o){const s=Gp(e,t),r=s*(1-n)/2;if(e+=r,t-=r,s<.001)return 2*i*o;if(s>=2*Math.PI){const i=e+s/2;e=i-Math.PI,t=i+Math.PI}const a=i*Math.cos(e),l=i*Math.sin(e),d=i*Math.cos(t),c=i*Math.sin(t),u=Math.floor(Math.hypot(a-d,l-c)),h=2*i*o;return Math.max(1,Math.min(h,u))}SF.className="RadialColumnShape",Ab([_y()],SF.prototype,"isBeveled",2),Ab([_y()],SF.prototype,"columnWidth",2),Ab([_y()],SF.prototype,"startAngle",2),Ab([_y()],SF.prototype,"endAngle",2),Ab([_y()],SF.prototype,"outerRadius",2),Ab([_y()],SF.prototype,"innerRadius",2),Ab([_y()],SF.prototype,"axisInnerRadius",2),Ab([_y()],SF.prototype,"axisOuterRadius",2);var MF=class{constructor(e,t,i,n,o){this.cx=e,this.cy=t,this.r=i,this.a0=n,this.a1=o,this.a0>=this.a1&&(this.a0=Number.NaN,this.a1=Number.NaN)}isValid(){return Number.isFinite(this.a0)&&Number.isFinite(this.a1)}pointAt(e){return{x:this.cx+this.r*Math.cos(e),y:this.cy+this.r*Math.sin(e)}}clipStart(e){null==e||!this.isValid()||e<this.a0||(this.a0=e,(Number.isNaN(e)||this.a0>=this.a1)&&(this.a0=Number.NaN,this.a1=Number.NaN))}clipEnd(e){null==e||!this.isValid()||e>this.a1||(this.a1=e,(Number.isNaN(e)||this.a0>=this.a1)&&(this.a0=Number.NaN,this.a1=Number.NaN))}},kF=class extends cC{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=2*Math.PI,this.clipSector=void 0,this.concentricEdgeInset=0,this.radialEdgeInset=0,this.startOuterCornerRadius=0,this.endOuterCornerRadius=0,this.startInnerCornerRadius=0,this.endInnerCornerRadius=0}set inset(e){this.concentricEdgeInset=e,this.radialEdgeInset=e}set cornerRadius(e){this.startOuterCornerRadius=e,this.endOuterCornerRadius=e,this.startInnerCornerRadius=e,this.endInnerCornerRadius=e}computeBBox(){return aF(this).translate(this.centerX,this.centerY)}normalizedRadii(){const{concentricEdgeInset:e}=this;let{innerRadius:t,outerRadius:i}=this;return t=t>0?t+e:0,i=Math.max(i-e,0),{innerRadius:t,outerRadius:i}}normalizedClipSector(){const{clipSector:e}=this;if(null==e)return;const{startAngle:t,endAngle:i}=hF(this.startAngle,this.endAngle),{innerRadius:n,outerRadius:o}=this.normalizedRadii(),s=hF(e.startAngle,e.endAngle,t);return new yF(Math.max(t,s.startAngle),Math.min(i,s.endAngle),Math.max(n,e.innerRadius),Math.min(o,e.outerRadius))}getAngleOffset(e){return e>0?this.radialEdgeInset/e:0}arc(e,t,i,n,o,s,r,a){if(e<=0)return;const{startAngle:l,endAngle:d}=hF(this.startAngle,this.endAngle),{innerRadius:c,outerRadius:u}=this.normalizedRadii(),h=this.normalizedClipSector();if(a&&c<=0)return;const p=a?this.getAngleOffset(c+e):this.getAngleOffset(u-e),g=r?l+p+t:d-p-t,m=a?c+e:u-e,f=m*Math.cos(g),v=m*Math.sin(g);if(null!=h){const e=1e-6;if(!r&&!(g>=l-e&&g<=h.endAngle-e))return;if(r&&!(g>=h.startAngle+e&&g<=d-e))return;if(a&&m<h.innerRadius-e)return;if(!a&&m>h.outerRadius+e)return}const y=new MF(f,v,e,i,n);if(null!=h){let t,d;if(a?(y.clipStart(pF(f,v,e,i,n,h.endAngle)),y.clipEnd(pF(f,v,e,i,n,h.startAngle))):(y.clipStart(pF(f,v,e,i,n,h.startAngle)),y.clipEnd(pF(f,v,e,i,n,h.endAngle))),r?(t=gF(f,v,e,i,n,h.innerRadius),d=gF(f,v,e,i,n,h.outerRadius)):(t=gF(f,v,e,i,n,h.outerRadius),d=gF(f,v,e,i,n,h.innerRadius)),y.clipStart(t),y.clipEnd(d),null!=t){const{x:e,y:i}=y.pointAt(t),n=uF(Math.atan2(i,e),l);r?null===s||void 0===s||s.clipStart(n):o.clipEnd(n)}if(null!=d){const{x:e,y:t}=y.pointAt(d),i=uF(Math.atan2(t,e),l);r?o.clipStart(i):null===s||void 0===s||s.clipEnd(i)}}if(null!=h){const{x:e,y:t}=y.pointAt((y.a0+y.a1)/2);if(!lF(e,t,h))return}const{x:b,y:x}=y.pointAt(r===a?y.a0:y.a1),C=uF(Math.atan2(x,b),l),S=a?s:o;return r?null===S||void 0===S||S.clipStart(C):null===S||void 0===S||S.clipEnd(C),y}updatePath(){var e,t,i,n,o;const s=1e-6,{path:r,centerX:a,centerY:l,concentricEdgeInset:d,radialEdgeInset:c}=this;let{startOuterCornerRadius:u,endOuterCornerRadius:h,startInnerCornerRadius:p,endInnerCornerRadius:g}=this;const{startAngle:m,endAngle:f}=hF(this.startAngle,this.endAngle),{innerRadius:v,outerRadius:y}=this.normalizedRadii(),b=this.normalizedClipSector(),x=f-m,C=x>=2*Math.PI-s;r.clear();const S=this.getAngleOffset(v),w=x-2*S,M=y-v,k=v>0&&w>0?2*v*Math.sin(w/2):0,D=y>0&&w>0?2*y*Math.sin(w/2):0;u=Math.floor(Math.max(0,Math.min(u,D/2,M/2))),h=Math.floor(Math.max(0,Math.min(h,D/2,M/2))),p=Math.floor(Math.max(0,Math.min(p,k/2,M/2))),g=Math.floor(Math.max(0,Math.min(g,k/2,M/2)));if(0===v&&0===y||v>y||k<0||D<=0)return;if((null!==(e=null===b||void 0===b?void 0:b.startAngle)&&void 0!==e?e:m)===(null!==(t=null===b||void 0===b?void 0:b.endAngle)&&void 0!==t?t:f))return;if(C&&null==this.clipSector&&0===u&&0===h&&0===p&&0===g)return r.moveTo(a+y*Math.cos(m),l+y*Math.sin(m)),r.arc(a,l,y,m,f),v>d&&(r.moveTo(a+v*Math.cos(f),l+v*Math.sin(f)),r.arc(a,l,v,f,m,!0)),void r.closePath();if(null==this.clipSector&&Math.abs(v-y)<1e-6)return r.arc(a,l,y,m,f,!1),r.arc(a,l,y,f,m,!0),void r.closePath();const I=this.getAngleOffset(y);if(x<2*I)return;const A=(null!==(i=null===b||void 0===b?void 0:b.innerRadius)&&void 0!==i?i:v)>d,L=v<d||x<2*S,N=Math.max(u,p,h,g),T=N>0?Math.min(M/N,1):1;u*=T,h*=T,p*=T,g*=T;const R=cF(y,x-2*I,-u,-h);if(u*=R,h*=R,!L&&A){const e=cF(v,x-2*S,p,g);p*=e,g*=e}else p=0,g=0;const E=Math.max(u+p,h+g),P=E>0?Math.min(M/E,1):1;u*=P,h*=P,p*=P,g*=P;let O=0,F=0;const z=u/(y-u),B=h/(y-h);if(z>=0&&z<.999999)O=Math.asin(z);else{O=x/2;const e=y/(1/Math.sin(O)+1);u=Math.min(e,u)}if(B>=0&&B<.999999)F=Math.asin(B);else{F=x/2;const e=y/(1/Math.sin(F)+1);h=Math.min(e,h)}const V=Math.asin(p/(v+p)),G=Math.asin(g/(v+g)),H=null!==(n=null===b||void 0===b?void 0:b.outerRadius)&&void 0!==n?n:y,j=this.getAngleOffset(H),W=new MF(0,0,H,m+j,f-j),_=null!==(o=null===b||void 0===b?void 0:b.innerRadius)&&void 0!==o?o:v,K=this.getAngleOffset(_),U=A?new MF(0,0,_,m+K,f-K):void 0;null!=b&&(W.clipStart(b.startAngle),W.clipEnd(b.endAngle),null===U||void 0===U||U.clipStart(b.startAngle),null===U||void 0===U||U.clipEnd(b.endAngle));const Y=this.arc(u,O,m-.5*Math.PI,m+O,W,U,!0,!1),$=this.arc(h,F,f-F,f+.5*Math.PI,W,U,!1,!1),Z=this.arc(g,G,f+.5*Math.PI,f+Math.PI-G,W,U,!1,!0),X=this.arc(p,V,m+Math.PI+V,m+1.5*Math.PI,W,U,!0,!0);if(L&&A);else if(L){const e=x<.5*Math.PI?c*(1+Math.cos(x))/Math.sin(x):Number.NaN;let t;t=e>0&&e<y?Math.max(Math.hypot(c,e),v):c,t=Math.max(t,v);const i=m+.5*x;r.moveTo(a+t*Math.cos(i),l+t*Math.sin(i))}else if(!0===(null===X||void 0===X?void 0:X.isValid())||!0===(null===U||void 0===U?void 0:U.isValid()));else{const e=m+x/2,t=v*Math.cos(e),i=v*Math.sin(e);r.moveTo(a+t,l+i)}if(!0===(null===Y||void 0===Y?void 0:Y.isValid())){const{cx:e,cy:t,r:i,a0:n,a1:o}=Y;r.arc(a+e,l+t,i,n,o)}if(W.isValid()){const{r:e,a0:t,a1:i}=W;r.arc(a,l,e,t,i)}if(!0===(null===$||void 0===$?void 0:$.isValid())){const{cx:e,cy:t,r:i,a0:n,a1:o}=$;r.arc(a+e,l+t,i,n,o)}if(!L){if(!0===(null===Z||void 0===Z?void 0:Z.isValid())){const{cx:e,cy:t,r:i,a0:n,a1:o}=Z;r.arc(a+e,l+t,i,n,o)}if(!0===(null===U||void 0===U?void 0:U.isValid())){const{r:e,a0:t,a1:i}=U;r.arc(a,l,e,i,t,!0)}if(!0===(null===X||void 0===X?void 0:X.isValid())){const{cx:e,cy:t,r:i,a0:n,a1:o}=X;r.arc(a+e,l+t,i,n,o)}}r.closePath()}isPointInPath(e,t){var i;const{startAngle:n,endAngle:o,innerRadius:s,outerRadius:r}=null!==(i=this.clipSector)&&void 0!==i?i:this;return lF(e-this.centerX,t-this.centerY,{startAngle:n,endAngle:o,innerRadius:Math.min(s,r),outerRadius:Math.max(s,r)})}};kF.className="Sector",Ab([_y()],kF.prototype,"centerX",2),Ab([_y()],kF.prototype,"centerY",2),Ab([_y()],kF.prototype,"innerRadius",2),Ab([_y()],kF.prototype,"outerRadius",2),Ab([_y()],kF.prototype,"startAngle",2),Ab([_y()],kF.prototype,"endAngle",2),Ab([Uy({equals:(e,t)=>e.equals(t)})],kF.prototype,"clipSector",2),Ab([_y()],kF.prototype,"concentricEdgeInset",2),Ab([_y()],kF.prototype,"radialEdgeInset",2),Ab([_y()],kF.prototype,"startOuterCornerRadius",2),Ab([_y()],kF.prototype,"endOuterCornerRadius",2),Ab([_y()],kF.prototype,"startInnerCornerRadius",2),Ab([_y()],kF.prototype,"endInnerCornerRadius",2);var DF=class extends rS{constructor(){super(zr("div"),"menuitem")}},IF=class extends rS{constructor(){super(zr("div"),"menuitemradio")}setChecked(e){Zp(this.elem,"aria-checked",e)}},AF=["Escape","ArrowLeft"],LF=class e extends dS{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vertical","menu"),this.handleMouseEnter=(e,t)=>{t.hasPopup()||this.expandSubMenu(e,void 0)},this.handleMouseMove=(e,t)=>{t.focus({preventScroll:!0})}}destructor(){this.collapse({mode:"2"})}addSeparator(){const e=Er().createElement("div");return Zp(e,"role","separator"),this.elem.appendChild(e),e}onChildAdded(e){super.onChildAdded(e),e.addListener("mouseenter",this.handleMouseEnter),e.addListener("mousemove",this.handleMouseMove)}onChildRemoved(e){super.onChildRemoved(e),e.removeListener("mouseenter",this.handleMouseEnter),e.removeListener("mousemove",this.handleMouseMove)}addSubMenu(){const t=new DF,i=new e(this.orientation);i.id=Cm();const n=()=>{this.collapseExpandedSubMenu(i),t.expandControlled()};return t.setControlled(i),t.setAriaHasPopup("menu"),t.addListener("click",n),t.addListener("mouseenter",n),t.addListener("keydown",e=>{lm(e.sourceEvent)&&"ArrowRight"===e.sourceEvent.code&&(this.collapseExpandedSubMenu(i),t.expandControlled())}),this.addChild(t),{subMenuButton:t,subMenu:i}}expandSubMenu(e,t){const{expansionScope:i}=this;i&&(this.collapseExpandedSubMenu(t),null===t||void 0===t||t.expand(e))}collapseExpandedSubMenu(e){var t;const{expansionScope:i}=this;i&&(null===(t=i.expandedSubMenu)||void 0===t||t.collapse({mode:"4"}),i.expandedSubMenu=e)}expand(e){var t,i;if(null!=this.expansionScope)return;this.expansionScope={lastFocus:mm(e.sourceEvent),expandedSubMenu:void 0,abort:()=>this.collapse({mode:"1"}),close:()=>this.collapse({mode:"0"}),removers:new Ta};const n=this.expansionScope,o=this.children.map(e=>e.getElement());Zp(n.lastFocus,"aria-expanded",!0),n.removers.register(om(this.elem,n.abort),sm(this.elem,n.abort),...this.children.map(e=>nm(e.getElement(),n.close,AF)),(null===e||void 0===e?void 0:e.overrideFocusVisible)&&am(this.elem,o,e.overrideFocusVisible)),null===(t=this.internalListener)||void 0===t||t.dispatch("expand-widget",this,{type:"expand-widget"}),null===(i=this.children[0])||void 0===i||i.focus({preventScroll:!0})}collapse(e){var t;const{mode:i="0"}=null!==e&&void 0!==e?e:{};if(void 0===this.expansionScope)return;const{lastFocus:n,removers:o,expandedSubMenu:s}=this.expansionScope;this.expansionScope=void 0,null===s||void 0===s||s.collapse({mode:"3"}),Zp(n,"aria-expanded",!1),"0"===i&&(null===n||void 0===n||n.focus({preventScroll:!0})),o.flush(),null===(t=this.internalListener)||void 0===t||t.dispatch("collapse-widget",this,{type:"collapse-widget",mode:i})}},NF="canvas-overlay",TF=class extends Ra{constructor(e,t,i){super(),this.ctx=e,this.hideFns=[],this.setOwnedWidget=(()=>{let e;return t=>{var i;null===(i=e)||void 0===i||i.destroy(),e=t}})(),this.moduleId="popover-".concat(t),null!==i&&void 0!==i&&i.detached?this.element=zr("div"):this.element=e.domManager.addChild(NF,this.moduleId),this.element.setAttribute("role","presentation"),this.hideFns.push(()=>this.setOwnedWidget(void 0)),this.cleanup.register(()=>e.domManager.removeChild(NF,this.moduleId))}attachTo(e){this.element.parentElement||e.element.append(this.element)}hide(e){const{lastFocus:t=this.lastFocus}=null!==e&&void 0!==e?e:{};if(0!==this.element.children.length){for(const e of this.hideFns)e();null===t||void 0===t||t.focus(),this.lastFocus=void 0}}removeChildren(){this.element.replaceChildren()}initPopoverElement(e,t){if(!this.element.parentElement)throw new Error("Can not show popover that has not been attached to a parent.");return null!==e&&void 0!==e||(e=zr("div","ag-charts-popover")),e.classList.toggle("ag-charts-popover",!0),null!=t.ariaLabel&&e.setAttribute("aria-label",t.ariaLabel),null!=t.class&&e.classList.add(t.class),this.element.replaceChildren(e),e}showWidget(e,t,i){this.setOwnedWidget(t),this.initPopoverElement(t.getElement(),i),t.addListener("collapse-widget",()=>{e.setControlled(void 0),this.setOwnedWidget(void 0)}),e.setControlled(t),e.expandControlled()}showWithChildren(e,t){const i=this.initPopoverElement(void 0,t);if(i.replaceChildren(...e),this.hideFns.push(()=>this.removeChildren()),t.onHide&&this.hideFns.push(t.onHide),t.initialFocus&&t.sourceEvent){const e=mm(t.sourceEvent);void 0!==e&&(this.lastFocus=e,this.initialFocus=t.initialFocus)}return i}getPopoverElement(){return this.element.firstElementChild}updatePosition(e){var t;const i=this.getPopoverElement();i&&(i.style.setProperty("right","unset"),i.style.setProperty("bottom","unset"),null!=e.x&&i.style.setProperty("left","".concat(Math.floor(e.x),"px")),null!=e.y&&i.style.setProperty("top","".concat(Math.floor(e.y),"px")),null===(t=this.initialFocus)||void 0===t||t.focus(),this.initialFocus=void 0)}},RF=class extends TF{setAnchor(e,t){this.anchor=e,this.fallbackAnchor=t,this.updatePosition(e),this.repositionWithinBounds()}updateAnchor(e){var t,i;const n=null!==(t=e.anchor)&&void 0!==t?t:this.anchor,o=null!==(i=e.fallbackAnchor)&&void 0!==i?i:this.fallbackAnchor;n&&this.setAnchor(n,o)}showWidget(e,t,i){super.showWidget(e,t,i),this.updateAnchor(i)}showWithChildren(e,t){const i=super.showWithChildren(e,t);return this.updateAnchor(t),Pr().requestAnimationFrame(()=>{this.repositionWithinBounds()}),i}repositionWithinBounds(){const{anchor:e,ctx:t,fallbackAnchor:i}=this,n=this.getPopoverElement();if(!e||!n)return;const o=t.domManager.getBoundingClientRect(),{offsetWidth:s,offsetHeight:r}=n;let a=za(0,e.x,o.width-s),l=za(0,e.y,o.height-r);a!==e.x&&null!=(null===i||void 0===i?void 0:i.x)&&(a=za(0,i.x-s,o.width-s)),l!==e.y&&null!=(null===i||void 0===i?void 0:i.y)&&(l=za(0,i.y-r,o.height-r)),this.updatePosition({x:a,y:l})}},EF=class extends RF{show(e,t){const i=new LF("vertical");for(const n of t.items)i.addChild(this.createRow(t,n,i));i.addClass("ag-charts-menu"),this.showWidget(e,i,t)}allocRow(e,t){if(null==e.menuItemRole||"menuitem"===e.menuItemRole)return new DF;{e.menuItemRole;const i=new IF;return i.setChecked(e.value===t.value),i}}createRow(e,t,i){const n=t.value===e.value,o=this.allocRow(e,t);if(o.addClass("ag-charts-menu__row"),o.toggleClass("ag-charts-menu__row--active",n),"string"===typeof t.value&&(o.getElement().dataset.popoverId=t.value),null!=t.icon){const e=zr("span","ag-charts-menu__icon ".concat(Ip(t.icon)));o.getElement().appendChild(e)}const s=null!=t.strokeWidth;if(s&&(o.toggleClass("ag-charts-menu__row--stroke-width-visible",s),o.setCSSVariable("--strokeWidth",s?"".concat(t.strokeWidth,"px"):null)),null!=t.label){const e=zr("span","ag-charts-menu__label");e.textContent=this.ctx.localeManager.t(t.label),o.getElement().appendChild(e)}return"altText"in t&&o.setAriaLabel(this.ctx.localeManager.t(t.altText)),o.addListener("click",n=>{var o;let{sourceEvent:s}=n;null===(o=e.onPress)||void 0===o||o.call(e,t),s.preventDefault(),s.stopPropagation(),i.collapse()}),o}},PF=class extends TF{constructor(){super(...arguments),this.dragged=!1}setDragHandle(e){e.addListener("drag-start",t=>{e.addClass(this.dragHandleDraggingClass),this.onDragStart(t)}),e.addListener("drag-move",this.onDragMove.bind(this)),e.addListener("drag-end",()=>{e.removeClass(this.dragHandleDraggingClass),this.onDragEnd.bind(this)})}onDragStart(e){const t=this.getPopoverElement();t&&(e.sourceEvent.preventDefault(),this.dragged=!0,this.dragStartState={client:pv.from(e.clientX,e.clientY),position:pv.from(Number(t.style.getPropertyValue("left").replace("px","")),Number(t.style.getPropertyValue("top").replace("px","")))})}onDragMove(e){const{dragStartState:t}=this,i=this.getPopoverElement();if(!t||!i)return;const n=pv.sub(pv.from(e.clientX,e.clientY),t.client),o=pv.add(t.position,n),s=this.ctx.domManager.getBoundingClientRect(),r={};o.x>=0&&o.x+i.offsetWidth<=s.width&&(r.x=o.x),o.y>=0&&o.y+i.offsetHeight<=s.height&&(r.y=o.y),this.updatePosition(r)}onDragEnd(){this.dragStartState=void 0}},OF={"disjoint-channel":"false","fibonacci-menu":"menu","fibonacci-retracement":"false","fibonacci-retracement-trend-based":"false","fill-color":"dialog","horizontal-line":"false","line-color":"dialog","line-menu":"menu","line-stroke-width":"menu","line-style-type":"menu","measurer-menu":"menu","pan-end":"false","pan-left":"false","pan-right":"false","pan-start":"false","parallel-channel":"false","shape-menu":"menu","text-color":"dialog","text-menu":"menu","text-size":"menu","vertical-line":"false","zoom-in":"false","zoom-out":"false",callout:"false",clear:"false",comment:"false",delete:"false",line:"false",lock:"false",menu:"menu",note:"false",reset:"false",settings:"dialog",text:"false"};var FF=class extends aS{constructor(e){super(),this.localeManager=e}update(e){const{localeManager:t}=this;if(e.tooltip){const i=t.t(e.tooltip);i!==this.lastTooltip&&(this.elem.title=i,this.lastTooltip=i)}let i="";if(null!=e.icon&&(i='<span class="'.concat(Ip(e.icon),' ag-charts-toolbar__icon"></span>')),null!=e.label){const n=t.t(e.label);i="".concat(i,'<span class="ag-charts-toolbar__label">').concat(n,"</span>")}const n="string"!==typeof(o=e.value)?"false":OF[o];var o;"false"==n?(this.setAriaHasPopup(void 0),this.setAriaExpanded(void 0)):(this.setAriaHasPopup(n),this.setAriaExpanded(!1)),i!==this.lastInnerHTML&&(this.elem.innerHTML=i,this.lastInnerHTML=i)}setChecked(e){Zp(this.elem,"aria-checked",e)}},zF="ag-charts-toolbar__button--active",BF=class extends mS{constructor(e,t,i){let{eventsHub:n,localeManager:o}=e;super(i),this.ariaLabelId=t,this.horizontalSpacing=10,this.verticalSpacing=10,this.events=new NS,this.hasPrefix=!1,this.buttonWidgets=[],this.updateAriaLabel=()=>this.setAriaLabel(this.localeManager.t(this.ariaLabelId)),this.eventsHub=n,this.localeManager=o,this.addClass("ag-charts-toolbar"),this.toggleClass("ag-charts-toolbar--horizontal","horizontal"===i),this.toggleClass("ag-charts-toolbar--vertical","vertical"===i),this.eventsHub.on("locale:change",this.updateAriaLabel),this.updateAriaLabel()}setAriaLabelId(e){this.ariaLabelId=e,this.updateAriaLabel()}addToolbarListener(e,t){return this.events.addListener(e,t)}clearButtons(){var e;null===(e=this.expanded)||void 0===e||e.collapse({mode:"2"});for(const t of this.buttonWidgets)t.destroy();this.buttonWidgets.splice(0)}updateButtons(e){const{buttonWidgets:t}=this;for(const[n,o]of e.entries()){var i;(null!==(i=this.buttonWidgets.at(n))&&void 0!==i?i:this.createButton(n,o)).update(o)}for(let n=e.length;n<t.length;n++){const e=this.buttonWidgets.at(n);null===e||void 0===e||e.destroy()}this.buttonWidgets.splice(e.length),this.refreshButtonClasses()}updateButtonByIndex(e,t){var i;null===(i=this.buttonWidgets.at(e))||void 0===i||i.update(t)}clearActiveButton(){for(const e of this.buttonWidgets)e.toggleClass(zF,!1)}toggleActiveButtonByIndex(e){if(-1!==e)for(const[t,i]of this.buttonWidgets.entries())i.toggleClass(zF,null!=e&&e===t)}toggleButtonEnabledByIndex(e,t){var i;-1!==e&&(null===(i=this.buttonWidgets.at(e))||void 0===i||i.setEnabled(t))}toggleSwitchCheckedByIndex(e,t){var i;-1!==e&&(null===(i=this.buttonWidgets.at(e))||void 0===i||i.setChecked(t))}getButtonBounds(){return this.buttonWidgets.map(e=>this.getButtonWidgetBounds(e))}setButtonHiddenByIndex(e,t){var i;null===(i=this.buttonWidgets.at(e))||void 0===i||i.setHidden(t)}getButtonWidgetBounds(e){const t=this.getBounds(),i=e.getBounds();return new Pb(i.x+t.x,i.y+t.y,i.width,i.height)}refreshButtonClasses(){const{buttonWidgets:e,hasPrefix:t}=this;let i,n,o;for(const[r,a]of e.entries()){var s;i=!t&&0===r||o!=a.section,n=r===e.length-1||a.section!=(null===(s=e.at(r+1))||void 0===s?void 0:s.section),a.toggleClass("ag-charts-toolbar__button--first",i),a.toggleClass("ag-charts-toolbar__button--last",n),a.toggleClass("ag-charts-toolbar__button--gap",r>0&&i),o=a.section}}createButton(e,t){const i=this.createButtonWidget();return i.addClass("ag-charts-toolbar__button"),i.addListener("click",n=>{const o={event:n,button:p({index:e},t instanceof kh?t.toJson():t),buttonBounds:this.getButtonWidgetBounds(i),buttonWidget:i};this.events.dispatch("button-pressed",o)}),i.addListener("focus",()=>{const t={button:{index:e}};this.events.dispatch("button-focused",t)}),i.addListener("expand-controlled-widget",e=>{var t;null===(t=this.expanded)||void 0===t||t.collapse({mode:"4"}),this.expanded=e.controlled;const i=this.expanded.addListener("collapse-widget",()=>{this.expanded=void 0,i()})}),t.section&&(i.section=t.section),this.buttonWidgets.push(i),this.addChild(i),i}},VF=class extends BF{createButtonWidget(){return new FF(this.localeManager)}},GF=class extends PF{constructor(e,t,i){super(e,t),this.onPopoverMoved=i,this.dragHandleDraggingClass="ag-charts-floating-toolbar__drag-handle--dragging"}show(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.showWithChildren(e,p(p({},t),{},{class:"ag-charts-floating-toolbar"}))}hide(){this.dragged=!1,super.hide()}getBounds(){var e,t,i,n;const o=this.getPopoverElement();return new Pb(null!==(e=null===o||void 0===o?void 0:o.offsetLeft)&&void 0!==e?e:0,null!==(t=null===o||void 0===o?void 0:o.offsetTop)&&void 0!==t?t:0,null!==(i=null===o||void 0===o?void 0:o.offsetWidth)&&void 0!==i?i:0,null!==(n=null===o||void 0===o?void 0:o.offsetHeight)&&void 0!==n?n:0)}hasBeenDragged(){return this.dragged}setAnchor(e,t,i){var n;const o=this.getPopoverElement();if(!o)return;const s=null!==(n=e.position)&&void 0!==n?n:"above",{offsetWidth:r,offsetHeight:a}=o;let l=e.y-a-i,d=e.x-r/2;"below"===s?l=e.y+i:"right"===s?(l=e.y-a/2,d=e.x+t):"above-left"===s&&(d=e.x),this.updatePosition({x:d,y:l})}ignorePointerEvents(){const e=this.getPopoverElement();e&&(e.style.pointerEvents="none")}capturePointerEvents(){const e=this.getPopoverElement();e&&(e.style.pointerEvents="unset")}updatePosition(e){const t=this.getBounds(),i=this.ctx.domManager.getBoundingClientRect();e.x=Math.floor(za(0,e.x,i.width-t.width)),e.y=Math.floor(za(0,e.y,i.height-t.height)),super.updatePosition(e),this.onPopoverMoved()}},HF=class extends BF{constructor(e,t,i){super(e,t,"horizontal"),this.hasPrefix=!0,this.popover=new GF(e,i,this.onPopoverMoved.bind(this)),this.dragHandle=new jF(e.localeManager.t("toolbarAnnotationsDragHandle")),this.popover.setDragHandle(this.dragHandle)}destroy(){super.destroy(),this.popover.destroy()}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.popover.show([this.dragHandle.getElement(),this.getElement()],e)}hide(){this.popover.hide()}setAnchor(e){this.popover.setAnchor(e,this.horizontalSpacing,this.verticalSpacing)}hasBeenDragged(){return this.popover.hasBeenDragged()}ignorePointerEvents(){this.popover.ignorePointerEvents()}capturePointerEvents(){this.popover.capturePointerEvents()}onPopoverMoved(){var e;const t=this.popover.getBounds();if(null!==(e=this.popoverBounds)&&void 0!==e&&e.equals(t))return;this.popoverBounds=t.clone();const i=this.getButtonBounds();this.events.dispatch("toolbar-moved",{popoverBounds:t,buttonBounds:i})}getButtonWidgetBounds(e){const t=this.popover.getBounds(),i=super.getButtonWidgetBounds(e),n=this.dragHandle.getBounds();return new Pb(i.x+t.x-n.width,i.y+t.y,i.width,i.height)}},jF=class extends uS{constructor(e){super(zr("div","ag-charts-floating-toolbar__drag-handle"));const t=new uS(zr("span","".concat(Ip("drag-handle")," ag-charts-toolbar__icon")));t.setAriaHidden(!0),this.addChild(t),this.elem.title=e}},WF=p(p({},Uk),qk),_F={};Db(_F,{ButtonWidget:()=>aS,MenuItemRadioWidget:()=>IF,MenuItemWidget:()=>DF,MenuWidget:()=>LF,NativeWidget:()=>uS,SliderWidget:()=>pS,ToolbarWidget:()=>mS,WIDGET_HTML_EVENTS:()=>$x,Widget:()=>lC,WidgetEventUtil:()=>Qx});var KF={title:{enabled:!1},label:{enabled:!1},line:{enabled:!1},gridLine:{enabled:!1},crosshair:{enabled:!1,stroke:np,lineDash:[0],label:{enabled:!1}}},UF=p(p({},KF),{},{nice:!1}),YF={mode:"compact",position:{anchorTo:"node",placement:["right","left"]},showArrow:!1},$F={style:[{stroke:{$ref:"gridLineColor"}}],width:2},ZF={number:{gridLine:$F},time:{gridLine:$F},category:{gridLine:$F}},XF={overrides:{common:{animation:{enabled:!1},contextMenu:{enabled:!1},keyboard:{enabled:!1},background:{visible:!1},navigator:{enabled:!1},padding:{top:0,right:0,bottom:0,left:0},axes:{number:p(p({},UF),{},{interval:{values:[0]}}),log:p({},UF),time:p({},UF),category:p({},KF)}},bar:{series:{crisp:!1,label:{placement:"inside-end",padding:4},sparklineMode:!0},tooltip:p(p({},YF),{},{position:p(p({},YF.position),{},{anchorTo:"pointer"}),range:"nearest"}),axes:ZF},line:{seriesArea:{padding:{top:2,right:2,bottom:2,left:2}},series:{sparklineMode:!0,strokeWidth:1,marker:{enabled:!1,size:3}},tooltip:YF},area:{seriesArea:{padding:{top:1,right:0,bottom:1,left:0}},series:{strokeWidth:1,fillOpacity:.4},tooltip:YF}}},qF=Am(function(e,t){if("string"===typeof e)return p(p({},t),{},{baseTheme:e});if(null!=e)return p(p({},e),{},{baseTheme:qF(e.baseTheme,t)});return t});function QF(e){if(Array.isArray(e)&&0!==e.length){const t=e.find(e=>null!=e);if("number"===typeof t){return{data:e.map((e,t)=>({x:t,y:e})),series:[{xKey:"x",yKey:"y"}],datumKey:"y"}}if(Array.isArray(t)){return{data:e.map(e=>({x:null===e||void 0===e?void 0:e[0],y:null===e||void 0===e?void 0:e[1],datum:e})),series:[{xKey:"x",yKey:"y"}],datumKey:"datum"}}}else if(0===(null===e||void 0===e?void 0:e.length))return{data:e,series:[{xKey:"x",yKey:"y"}],datumKey:"y"};return{data:e}}function JF(e,t,i){var n;const o={};var s,r,a;null!=(null===e||void 0===e?void 0:e.stroke)&&(o.style=[{stroke:null===e||void 0===e?void 0:e.stroke}],null!==(s=o.enabled)&&void 0!==s||(o.enabled=!0));null!=(null===e||void 0===e?void 0:e.strokeWidth)&&(o.width=null===e||void 0===e?void 0:e.strokeWidth,null!==(r=o.enabled)&&void 0!==r||(o.enabled=!0));"bar"===i.type&&"horizontal"!==i.direction&&(null!==(a=o.enabled)&&void 0!==a||(o.enabled=!0));return null!=(null===e||void 0===e?void 0:e.visible)&&(o.enabled=e.visible),null!==(n=o.enabled)&&void 0!==n||(o.enabled=t),o}var ez=Am((e,t,i)=>n=>{var o,s;const r=n.datum[n.xKey],a=n.datum[n.yKey],l=null==i?n.datum:n.datum[i],d=null===t||void 0===t||null===(o=t.renderer)||void 0===o?void 0:o.call(t,{context:e,datum:l,xValue:r,yValue:a});if(il(d)||nl(d)||$a(d))return Gl(d);const c=null!==(s=null===d||void 0===d?void 0:d.content)&&void 0!==s?s:a.toFixed(2);return null!==d&&void 0!==d&&d.title?{heading:void 0,title:void 0,data:[{label:d.title,value:c}]}:{heading:void 0,title:c,data:[]}});var tz=["showInLegend","showInMiniChart","grouped","stacked","stackGroup","tooltip","listeners","errorBar","xKey","yKey","type"],iz={visible:Cd,reverse:Cd,stroke:wd,strokeWidth:Pd},nz={context:()=>!0,tooltip:kd,theme:kd,background:kd,container:kd,width:kd,height:kd,minWidth:kd,minHeight:kd,padding:kd,listeners:kd,locale:kd,data:kd,styleNonce:Ad,axis:fd({number:p(p({},iz),{},{min:vd(Dd,zd("max")),max:vd(Dd,Vd("min"))}),category:p(p({},iz),{},{paddingInner:Fd,paddingOuter:Fd}),time:p(p({},iz),{},{min:vd(yd(Dd,Md),zd("max")),max:vd(yd(Dd,Md),Vd("min"))})},"axis options","category"),min:vd(Dd,zd("max")),max:vd(Dd,Vd("min")),crosshair:p(p({enabled:Cd,snap:Cd},ic),dc),xKey:Ad,yKey:Ad};nz.overrideDevicePixelRatio=gd(Dd);var oz={type:"preset",name:"sparkline",version:GC,options:fd({area:p(p({},nz),Mu(fN,tz)),bar:p(p({},nz),Mu(xN,tz)),line:p(p({},nz),Mu(AN,tz))},"sparkline options"),create:function(e){const{background:t,container:i,height:n,listeners:o,locale:s,minHeight:r,minWidth:a,overrideDevicePixelRatio:d,padding:c,width:u,theme:h,data:g,crosshair:m,axis:f,min:v,max:y,tooltip:b,context:x,styleNonce:C}=e,S=l(e,Cb),w={background:t,container:i,height:n,listeners:o,locale:s,minHeight:r,minWidth:a,overrideDevicePixelRatio:d,padding:c,width:u,styleNonce:C},{data:M,series:[k]=[],datumKey:D}=QF(g),I=S;null!=k&&Object.assign(I,k),I.tooltip=p(p({},b),{},{renderer:ez(x,b,D)}),w.theme=qF(h,XF),w.data=M,w.series=[I];const A="bar"===I.type&&"horizontal"===I.direction,[L,N]=A?["left","bottom"]:["bottom","left"],T=p(p({},function(e){switch(null===e||void 0===e?void 0:e.type){case"number":{const{reverse:t,min:i,max:n}=null!==e&&void 0!==e?e:{};return{type:"number",reverse:t,min:i,max:n}}case"time":{const{reverse:t,min:i,max:n}=null!==e&&void 0!==e?e:{};return{type:"time",reverse:t,min:i,max:n}}default:{if(null==e)return{type:"category"};const{reverse:t,paddingInner:i,paddingOuter:n}=e;return{type:"category",reverse:t,paddingInner:i,paddingOuter:n}}}}(f)),{},{position:L},null==m?{}:{crosshair:m}),R=p(p({type:"number",gridLine:JF(f,!1,e),position:N},null==v?{}:{min:v}),null==y?{}:{max:y});return w.axes=A?{x:R,y:T}:{x:T,y:R},w},processData:QF},sz=["top","right","bottom","left"],rz=class e extends fA{constructor(e,t){super(e,t),this.paired=!0,this.axes=this.createChartAxes(),this.lastUpdateClipRect=void 0,this.lastLayoutWidth=Number.NaN,this.lastLayoutHeight=Number.NaN}createChartAxes(){return new OC}onAxisChange(e,t){super.onAxisChange(e,t),this.syncAxisChanges(e,t),null!=this.ctx&&this.ctx.zoomManager.setAxes(e)}destroySeries(e){super.destroySeries(e),this.lastLayoutWidth=Number.NaN,this.lastLayoutHeight=Number.NaN}getChartType(){return"cartesian"}setRootClipRects(e){const{seriesRoot:t,annotationRoot:i}=this;t.setClipRect(e),i.setClipRect(e)}async processData(){await super.processData(),"init"===this.syncStatus&&(this.syncStatus="domains-calculated"),this.ctx.updateService.dispatchProcessData({series:{shouldFlipXY:this.shouldFlipXY()}})}async processDomains(){await super.processDomains();for(const e of this.axes){const t=await this.getSyncedDomain(e);null!=t&&e.setDomains({domain:t})}}performLayout(e){var t;const{seriesRoot:i,annotationRoot:n}=this,{clipSeries:o,seriesRect:s,visible:r}=this.updateAxes(e.layoutBox);this.seriesRoot.visible=r,this.seriesRect=s,this.animationRect=e.layoutBox;const{x:a,y:l}=s;if(e.width!==this.lastLayoutWidth||e.height!==this.lastLayoutHeight)for(const p of[i,n])p.translationX=Math.floor(a),p.translationY=Math.floor(l);else{const{translationX:e,translationY:t}=i;Zk(this.id,"seriesRect",this.ctx.animationManager,[i,n],{translationX:e,translationY:t},{translationX:Math.floor(a),translationY:Math.floor(l)},{phase:"update"})}this.lastLayoutWidth=e.width,this.lastLayoutHeight=e.height;const d=s.clone().grow(this.seriesArea.getPadding()),c=this.series.some(e=>e.alwaysClip),u=c||null!==(t=this.seriesArea.clip)&&void 0!==t&&t||o?d:void 0,{lastUpdateClipRect:h}=this;this.lastUpdateClipRect=u,this.ctx.animationManager.isActive()&&null!=h?this.ctx.animationManager.animate({id:this.id,groupId:"clip-rect",phase:"update",from:h,to:d,onUpdate:e=>this.setRootClipRects(e),onComplete:()=>this.setRootClipRects(u)}):this.setRootClipRects(u),this.ctx.layoutManager.emitLayoutComplete(e,{axes:Iu(this.axes.map(e=>[e.id,e.getLayoutState()])),series:{visible:r,rect:s,paddedRect:d},clipSeries:o}),qE(this.series)}updateAxes(e){const{clipSeries:t,seriesRect:i,overflows:n}=this.resolveAxesLayout(e);for(const o of this.axes)o.update(),o.setCrossLinesVisible(!n),this.clipAxis(o,i,e);return{clipSeries:t,seriesRect:i,visible:!n}}resolveAxesLayout(e){let t,i,n=0;const o=this.axes.filter(e=>{var t;return null!=(null===(t=e.crossAt)||void 0===t?void 0:t.value)});do{if(i=null!==t&&void 0!==t?t:this.getDefaultState(),t=this.updateAxesPass(new Map(i.axisAreaWidths),e.clone(),o),n++>10){jr.warn("Max iterations reached. Unable to stabilize axes layout.");break}}while(!this.isLayoutStable(t,i));return this.lastAreaWidths=t.axisAreaWidths,t}updateAxesPass(t,i,n){var o,s,r,a;const l=new Map,d={};let c=!1,u=!1;const h=this.seriesArea.getPadding();for(const e of sz){var p;const t=null!==(p=h[e])&&void 0!==p?p:0,n=this.axes.findLast(t=>t.position===e);n?n.seriesAreaPadding=t:i.shrink(t,e)}const g=(null!==(o=t.get("left"))&&void 0!==o?o:0)+(null!==(s=t.get("right"))&&void 0!==s?s:0),m=(null!==(r=t.get("top"))&&void 0!==r?r:0)+(null!==(a=t.get("bottom"))&&void 0!==a?a:0),f=this.buildCrossLinePadding(t),v=f.left+f.right,y=f.top+f.bottom;i.width<=g+v||i.height<=m+y?c=!0:i.shrink(f);const{scene:b}=this.ctx,x=i.clone().shrink(Object.fromEntries(t));for(const e of this.axes){var C;const{position:t="left",direction:i}=e,n=i===_u.Y;let o;if(this.sizeAxis(e,x,t),null==e.thickness){var S;o=lz(n,b)*(null!==(S=e.maxThicknessRatio)&&void 0!==S?S:1)}else o=e.thickness;const{primaryTickCount:s,bbox:r}=e.calculateLayout(e.nice?d[i]:void 0,{sizeLimit:o-e.label.spacing,padding:this.padding});var w;if(null!==(C=d[i])&&void 0!==C||(d[i]=s),u||(u=e.dataDomain.clipped||e.visibleRange[0]>0||e.visibleRange[1]<1),null==e.thickness)o=Math.min(null!==(w=lz(n,r))&&void 0!==w?w:0,o);l.set(e.id,Math.ceil(o))}let M;n.length>0&&(M=this.calculateAxesCrossPositions(l,x,n));const k=Mr(this.axes,e=>{var t;return null!==(t=e.position)&&void 0!==t?t:"left"}),D=new Map,I=new Map;for(const[L,N]of fu(k)){let t=lz("left"!==L&&"right"!==L,b)%b.pixelRatio,i=0;for(const n of null!==N&&void 0!==N?N:[]){var A;I.set(n.id,t);const o=null!==(A=l.get(n.id))&&void 0!==A?A:0;i=Math.max(i,t+o),n.layoutConstraints.stacked&&(t+=o+e.AxesPadding)}D.set(L,Math.ceil(i))}for(const[e,L]of fu(k))this.positionAxes({axes:null!==L&&void 0!==L?L:[],position:e,axisWidths:l,axisOffsets:I,axisAreaWidths:D,axisBound:i,seriesRect:x});return null!=M&&this.applyAxisCrossing(x,M),{clipSeries:u,seriesRect:x,axisAreaWidths:D,overflows:c}}calculateAxesCrossPositions(e,t,i){const n=new Map;for(const o of i){const{crossPosition:i,visible:s}=this.calculateAxisCrossPosition(o);o.setAxisVisible(s),this.adjustAxisWidth(o,e,i,t,s),void 0!=i&&n.set(o.id,i)}return n}calculateAxisCrossPosition(e){var t,i;const n=this.axes.perpendicular(e),{scale:{domain:o,bandwidth:s},range:r}=n,a=(null!==s&&void 0!==s?s:0)/2,l=n.scale.convert(null===(t=e.crossAt)||void 0===t?void 0:t.value,{clamp:!1})+a;if(n.inRange(l))return{crossPosition:l,visible:!0};if(!1===(null===(i=e.crossAt)||void 0===i?void 0:i.sticky))return{crossPosition:void 0,visible:!1};return{crossPosition:Number.isNaN(l)?r[o[0]]:Yu(l,r),visible:!0}}adjustAxisWidth(e,t,i,n,o){var s;const r=e.getModuleMap().getModule("crosshair");if(null!==r&&void 0!==r&&r.enabled)return;const a=this.modulesManager.getModule("annotations");if(!0===(null===a||void 0===a?void 0:a.enabled)||this.ctx.annotationManager.createMemento().some(t=>{switch(t.type){case"vertical-line":return e.direction===_u.X;case"horizontal-line":return e.direction===_u.Y}}))return;const l=null!==(s=t.get(e.id))&&void 0!==s?s:0,d=o?this.calculateAxisBleedingWidth(e,l,i,n):0;t.set(e.id,d)}calculateAxisBleedingWidth(e,t,i,n){if(null==i)return t;switch(e.position){case"left":case"top":return Math.max(0,t-i);case"right":return Math.max(0,i+t-n.width);case"bottom":return Math.max(0,i+t-n.height);default:return t}}applyAxisCrossing(e,t){for(const i of this.axes){const n=t.get(i.id);if(null==n){i.crossAxisTranslation.x=0,i.crossAxisTranslation.y=0;continue}const o=i.direction===_u.X;i.crossAxisTranslation.x=o?0:e.x+n-i.translation.x,i.crossAxisTranslation.y=o?e.y+n-i.translation.y:0}}buildCrossLinePadding(e){var t;const i={top:0,right:0,bottom:0,left:0};for(const r of this.axes){const{position:e,label:s}=r;if(r.crossLines)for(const a of r.crossLines){var n,o;if(a instanceof pD)a.position=null!==e&&void 0!==e?e:"top",null!==(o=(t=a.label).parallel)&&void 0!==o||(t.parallel=s.parallel);null===(n=a.calculatePadding)||void 0===n||n.call(a,i)}}for(const[r,a=0]of fu(i)){var s;i[r]=Math.max(a-(null!==(s=e.get(r))&&void 0!==s?s:0),0)}return i}clampToOutsideSeriesRect(e,t,i,n){const o="x"===i?e.x:e.y,s="x"===i?e.width:e.height;return 1===n?Math.min(t,o+s):Math.max(t,o)}async getSyncedDomain(e){const t=this.modulesManager.getModule("sync");if(null!==t&&void 0!==t&&t.enabled)return await t.getSyncedDomain(e)}syncAxisChanges(e,t){const i=this.modulesManager.getModule("sync");if(null===i||void 0===i||!i.enabled)return;const n=new Set(null!==t&&void 0!==t?t:[]);for(const o of e)n.delete(o);for(const o of n)i.removeAxis(o)}sizeAxis(e,t,i){const n=e instanceof GE,o="left"===i||"right"===i,{width:s,height:r}=t,a=o?r:s;let l=0,d=a,{min:c,max:u}=this.ctx.zoomManager.getAxisZoom(e.id);const{width:h,unit:p,align:g}=e.layoutConstraints;d="px"===p?l+h:d*h/100,"end"===g&&(l=a-(d-l),d=a),o&&(n?[l,d]=[d,l]:[c,u]=[1-u,1-c]),e.range=[l,d],e.visibleRange=[c,u],e.gridLength=o?s:r}positionAxes(e){var t;const{axes:i,axisBound:n,axisWidths:o,axisOffsets:s,axisAreaWidths:r,seriesRect:a,position:l}=e,d=null!==(t=r.get(l))&&void 0!==t?t:0;let c="x",u="y",h=1;"top"!==l&&"bottom"!==l||(c="y",u="x");let p=n[c];"right"!==l&&"bottom"!==l||(h=-1,p+="x"===c?n.width:n.height);for(const v of i){var g,m,f;const e=null!==(g=r.get("x"===u?"left":"top"))&&void 0!==g?g:0,t=null!==(m=o.get(v.id))&&void 0!==m?m:0,i=null!==(f=s.get(v.id))&&void 0!==f?f:0;v.gridPadding=d-i-t,v.translation[u]=n[u]+e,v.translation[c]=this.clampToOutsideSeriesRect(a,p+h*(i+t),c,h)}}shouldFlipXY(){return this.series.every(e=>e instanceof XE&&e.shouldFlipXY())}getDefaultState(){const e=new Map;if(this.lastAreaWidths)for(const{position:t="left"}of this.axes){const i=this.lastAreaWidths.get(t);null!=i&&e.set(t,i)}return{axisAreaWidths:e,clipSeries:!1,overflows:!1}}isLayoutStable(e,t){if(t.overflows!==e.overflows||t.clipSeries!==e.clipSeries)return!1;for(const i of e.axisAreaWidths.keys())if(!t.axisAreaWidths.has(i))return!1;for(const[i,n]of t.axisAreaWidths.entries()){const t=e.axisAreaWidths.get(i);if((null!=n||null!=t)&&n!==t)return!1}return!0}clipAxis(e,t,i){var n,o,s,r;const a=Math.ceil(null!==(n=null===(o=e.gridLine)||void 0===o?void 0:o.width)&&void 0!==n?n:0),l=Math.ceil(null!==(s=null===(r=e.line)||void 0===r?void 0:r.width)&&void 0!==s?s:0);let{width:d,height:c}=t;switch(d+=e.direction===_u.X?a:l,c+=e.direction===_u.Y?a:l,e.clipGrid(t.x,t.y,d,c),e.position){case"left":case"right":e.clipTickLines(i.x,t.y-a,i.width+a,t.height+2*a);break;case"top":case"bottom":e.clipTickLines(t.x-a,i.y,t.width+2*a,i.height+a)}}};rz.className="CartesianChart",rz.type="cartesian",rz.AxesPadding=15,Ab([ng({changeValue(e,t){this.onAxisChange(e,t)}})],rz.prototype,"axes",2);var az=rz;function lz(e,t){return e?null===t||void 0===t?void 0:t.width:null===t||void 0===t?void 0:t.height}var dz=new Set(["number","log","time"]),cz=e=>Qa(e)&&null!=e.type&&!dz.has(e.type),uz={type:"chart",name:"cartesian",version:GC,options:pE,create:(e,t)=>new az(e,t),validate(e,t,i){var n;const o=[];var s,r;"histogram"===(null===(n=e)||void 0===n||null===(n=n.series)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.type)&&(Object.values(null!==(s=null===(r=e)||void 0===r?void 0:r.axes)&&void 0!==s?s:{}).some(cz)&&(o.push(new dd("invalid","only continuous axis types when histogram series is used",e.axes,i,"axes")),e=Mu(e,["axes"])));const a=ud(e,t,i);return a.invalid.push(...o),a}},hz=class extends fA{constructor(e,t){super(e,t),this.axes=this.createChartAxes(),this.padding=new Tm(40),this.ctx.axisManager.axisGroup.zIndex=bp.AXIS_FOREGROUND}createChartAxes(){return new FC}getChartType(){return"polar"}isDataTransactionSupported(){return!this.series.some(e=>"pie"===e.type||"donut"===e.type)}async performLayout(e){const t=e.layoutBox.clone().shrink(this.seriesArea.getPadding());this.seriesRect=t,this.animationRect=t,this.seriesRoot.translationX=t.x,this.seriesRoot.translationY=t.y,await this.computeCircle(t);for(const s of this.axes)s.update();let i=0;for(const s of this.series){var n,o;i=Math.max(i,null!==(n=null===(o=s.properties.marker)||void 0===o?void 0:o.size)&&void 0!==n?n:0)}for(const s of this.series.filter(pz))s.maxChartMarkerSize=i;this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:!0,rect:t,paddedRect:e.layoutBox}})}updateAxes(e,t,i,n){var o;if(0===this.axes.length)return;const s=this.axes[_u.Angle],r=this.axes[_u.Radius],a=s.scale,l=r.innerRadiusRatio;s.innerRadiusRatio=l,s.computeRange(),s.gridLength=n,r.gridAngles=null===(o=a.ticks({nice:[s.nice,s.nice],interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0}))||void 0===o||null===(o=o.ticks)||void 0===o?void 0:o.map(e=>a.convert(e)),r.gridRange=s.range,r.range=[n,n*l];for(const d of[s,r])d.translation.x=e.x+t,d.translation.y=e.y+i,d.calculateLayout()}async computeCircle(e){var t=this;const i=this.series.filter(pz),n=(t,n,o)=>{this.updateAxes(e,t,n,o);for(const e of i)e.centerX=t,e.centerY=n,e.radius=o;const s=i.filter(e=>"donut"===e.type||"pie"===e.type);if(s.length>1){const e=s.map(e=>{const t=e.getInnerRadius();return{series:e,innerRadius:t}}).sort((e,t)=>e.innerRadius-t.innerRadius);e.at(-1).series.surroundingRadius=void 0;for(let t=0;t<e.length-1;t++)e[t].series.surroundingRadius=e[t+1].innerRadius}},o=e.width/2,s=e.height/2,r=Math.max(0,Math.min(e.width,e.height)/2);let a=r;n(o,s,a);const l=async function(){let{hideWhenNecessary:l=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const d=[];for(const n of pu(t.axes,i)){const t=await n.computeLabelsBBox({hideWhenNecessary:l},e);t&&d.push(t)}if(0===d.length)return void n(o,s,r);const c=Pb.merge(d),u=t.refineCircle(c,a,e);n(u.centerX,u.centerY,u.radius),a=u.radius};await l(),await l(),await l(),await l({hideWhenNecessary:!0}),await l({hideWhenNecessary:!0});for(const d of pu(this.axes,i))await d.computeLabelsBBox({hideWhenNecessary:!0},e);return{radius:a,centerX:o,centerY:s}}refineCircle(e,t,i){const n=-t,o=-t,s=t,r=t;let a=Math.max(0,n-e.x),l=Math.max(0,o-e.y),d=Math.max(0,e.x+e.width-s),c=Math.max(0,e.y+e.height-r);a=d=Math.max(a,d),l=c=Math.max(l,c);const u=i.width-a-d,h=i.height-l-c;let p=Math.min(u,h)/2;const g=.5*i.width/2,m=.5*i.height/2,f=Math.min(g,m);if(p<f){p=f;const e=a+d;if(2*p+(l+c)>i.height){const e=i.height-2*p;2*Math.min(l,c)>e?(l=e/2,c=e/2):l>c?l=e-c:c=e-l}if(2*p+e>i.width){const e=i.width-2*p;2*Math.min(a,d)>e?(a=e/2,d=e/2):a>d?a=e-d:d=e-a}}const v=a+2*p+d,y=l+2*p+c;return{centerX:(i.width-v)/2+a+p,centerY:(i.height-y)/2+l+p,radius:p}}};function pz(e){return e instanceof VO}hz.className="PolarChart",hz.type="polar";var gz={type:"chart",name:"polar",version:GC,options:gE,create:(e,t)=>new hz(e,t),validate(e,t,i){var n;const o=[],s=null===(n=e)||void 0===n||null===(n=n.series)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.type;var r;"pie"!==s&&"donut"!==s||null!==(r=e)&&void 0!==r&&r.axes&&(o.push(new cd([],e.axes,i,"axes")),e=Mu(e,["axes"]));const a=ud(e,t,i);return a.invalid.push(...o),a}};function mz(e){let{orientation:t,bboxes:i,maxHeight:n,maxWidth:o,itemPaddingY:s=0,itemPaddingX:r=0,forceResult:a=!1}=e;const l="horizontal"===t,d={max:l?o:n,fn:l?e=>e.width:e=>e.height,padding:l?r:s},c={max:l?n:o,fn:l?e=>e.height:e=>e.width,padding:l?s:r};let u=0;const h=[];for(;u<i.length;){const e=fz(i.slice(u),u,d,c,a);if(!e)return;u+=e.processedBBoxCount,h.push(e.pageIndices)}return function(e,t,i,n,o){let s=0,r=0;const a=e.map(e=>{"horizontal"===t&&(e=function(e){const t=[];for(const i of e[0])t.push([]);for(const[i,n]of e.entries())for(const[e,o]of n.entries())t[e][i]=o;return t}(e));let a=0;const l=e.map(e=>{const t=e.map(e=>(a=Math.max(e,a),i[e]));let s=0,r=0;for(const i of t)s+=i.height+n,r=Math.max(r,i.width+o);return{indices:e,bboxes:t,columnHeight:Math.ceil(s),columnWidth:Math.ceil(r)}});let d=0,c=0;for(const t of l)d+=t.columnWidth,c=Math.max(c,t.columnHeight);return s=Math.max(d,s),r=Math.max(c,r),{columns:l,startIndex:e[0][0],endIndex:a,pageWidth:d,pageHeight:c}});return{pages:a,maxPageWidth:s,maxPageHeight:r}}(h,t,i,s,r)}function fz(e,t,i,n,o){let s=function(e,t){const i=e.length;let n=0;for(let o=0;o<i;o++)if(n+=t.fn(e[o])+t.padding,n>t.max){return i/o<2?Math.ceil(i/2):o}return i}(e,i);if(s<1){if(!o)return;s=1}let r=s;for(;r>=1;){const s=vz(e,t,r,i,n,o);if(null==s&&r<=1)return;if(null==s){r--;continue}if("number"===typeof s){if(s<=1)return;r=s<r&&s>1?s:r,r--;continue}return{processedBBoxCount:s.length*s[0].length,pageIndices:s}}}function vz(e,t,i,n,o,s){const r=[];let a=0,l=0,d=[];const c=[];for(let h=0;h<e.length;h++){var u;const p=(h+i)%i;0===p&&(a+=l,l=0,d.length>0&&r.push(d),d=[]);const g=n.fn(e[h])+n.padding;c[p]=Math.max(null!==(u=c[p])&&void 0!==u?u:0,g),l=Math.max(l,o.fn(e[h])+o.padding);const m=a+l,f=!s||r.length>0;if(m>o.max&&f){d=[];break}const v=c.reduce((e,t)=>e+t,0);if(v>n.max&&!s)return c.length<i?c.length:void 0;d.push(h+t)}return d.length>0&&r.push(d),r.length>0?r:void 0}var yz=class extends kh{constructor(){super(...arguments),this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=Eh.SMALL,this.fontFamily="Verdana, sans-serif"}};Ab([ru],yz.prototype,"color",2),Ab([ru],yz.prototype,"fontStyle",2),Ab([ru],yz.prototype,"fontWeight",2),Ab([ru],yz.prototype,"fontSize",2),Ab([ru],yz.prototype,"fontFamily",2);var bz=class extends kh{constructor(){super(...arguments),this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}};Ab([ru],bz.prototype,"size",2),Ab([ru],bz.prototype,"fill",2),Ab([ru],bz.prototype,"fillOpacity",2),Ab([ru],bz.prototype,"stroke",2),Ab([ru],bz.prototype,"strokeWidth",2),Ab([ru],bz.prototype,"strokeOpacity",2);var xz=class extends kh{constructor(e){super(),this.parent=e,this.shape="triangle",this.size=15,this.padding=8}};Ab([ng({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],xz.prototype,"shape",2),Ab([ru],xz.prototype,"size",2),Ab([ru],xz.prototype,"padding",2);var Cz=class extends kh{constructor(e,t){super(),this.chartUpdateCallback=e,this.pageUpdateCallback=t,this.id=xm(this),this.marker=new xz(this),this.activeStyle=new bz,this.inactiveStyle=new bz,this.highlightStyle=new bz,this.label=new yz,this.group=new jx({name:"pagination"}),this.labelNode=new LC,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this.nextButton=new FI,this.previousButton=new FI,this.labelNode.setProperties({textBaseline:"middle",fontSize:Eh.SMALL,fontFamily:"Verdana, sans-serif",fill:"black",y:1}),this.group.append([this.nextButton,this.previousButton,this.labelNode]),this.update(),this.updateMarkers()}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(e){this._enabled=e,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(e){if(this._orientation=e,"horizontal"===e)this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;else this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}get orientation(){return this._orientation}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:e,padding:t}=this.marker;this.nextButton.size=e,this.previousButton.size=e,this.labelNode.x=e/2+t}updateNextButtonPosition(){const e=this.labelNode.getBBox();this.nextButton.translationX=e.width+2*(this.marker.size/2+this.marker.padding)}updateLabel(){const{currentPage:e,totalPages:t,labelNode:i,label:{color:n,fontStyle:o,fontWeight:s,fontSize:r,fontFamily:a}}=this;i.text="".concat(e+1," / ").concat(t),i.fill=n,i.fontStyle=o,i.fontWeight=s,i.fontSize=r,i.fontFamily=a}updateMarkers(){const{nextButton:e,previousButton:t,nextButtonDisabled:i,previousButtonDisabled:n,activeStyle:o,inactiveStyle:s,highlightStyle:r,highlightActive:a}=this,l=(e,t)=>t?s:e===a?r:o;this.updateMarker(e,l("next",i)),this.updateMarker(t,l("previous",n))}updateMarker(e,t){var i;const{shape:n,size:o}=this.marker;e.shape=n,e.size=o,e.fill=t.fill,e.fillOpacity=null!==(i=t.fillOpacity)&&void 0!==i?i:1,e.stroke=t.stroke,e.strokeWidth=t.strokeWidth,e.strokeOpacity=t.strokeOpacity}enableOrDisableButtons(){const{currentPage:e,totalPages:t}=this,i=0===t,n=e===t-1,o=0===e;this.nextButtonDisabled=n||i,this.previousButtonDisabled=o||i}setPage(e){e=za(0,e,Math.max(0,this.totalPages-1)),this.currentPage!==e&&(this.currentPage=e,this.onPaginationChanged())}getCursor(e){return{previous:this.previousButtonDisabled,next:this.nextButtonDisabled}[e]?void 0:"pointer"}onClick(e,t){e.preventDefault(),"next"!==t||this.nextButtonDisabled?"previous"!==t||this.previousButtonDisabled||(this.decrementPage(),this.onPaginationChanged()):(this.incrementPage(),this.onPaginationChanged())}onMouseHover(e){this.highlightActive=e,this.updateMarkers(),this.chartUpdateCallback(Ku.SCENE_RENDER)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(Ku.SCENE_RENDER)}attachPagination(e){e.append(this.group)}getBBox(){return this.group.getBBox()}computeCSSBounds(){return{prev:Bx.toCanvas(this.previousButton),next:Bx.toCanvas(this.nextButton)}}};Cz.className="Pagination",Ab([ru],Cz.prototype,"marker",2),Ab([ru],Cz.prototype,"activeStyle",2),Ab([ru],Cz.prototype,"inactiveStyle",2),Ab([ru],Cz.prototype,"highlightStyle",2),Ab([ru],Cz.prototype,"label",2);var Sz=class{constructor(e,t){this.dirty=!0,this.itemList=e.proxyInteractionService.createProxyContainer({type:"list",domManagerId:"".concat(t,"-toolbar"),classList:["ag-charts-proxy-legend-toolbar"],ariaLabel:{id:"ariaLabelLegend"}}),this.paginationGroup=e.proxyInteractionService.createProxyContainer({type:"group",domManagerId:"".concat(t,"-pagination"),classList:["ag-charts-proxy-legend-pagination"],ariaLabel:{id:"ariaLabelLegendPagination"}}),this.itemDescription=zr("p"),this.itemDescription.style.display="none",this.itemDescription.id=Cm(),this.itemDescription.textContent=this.getItemAriaDescription(e.localeManager),this.itemList.getElement().append(this.itemDescription)}initLegendList(e){if(!this.dirty)return;const{ctx:t,itemSelection:i,datumReader:n,itemListener:o}=e,s=t.localeManager,r=i.length;i.each((e,i,a)=>{var l;null===(l=e.proxyButton)||void 0===l||l.destroy(),e.proxyButton=t.proxyInteractionService.createProxyElement({type:"listswitch",textContent:this.getItemAriaText(s,ed(n.getItemLabel(i)),a,r),ariaChecked:!!e.datum.enabled,ariaDescribedBy:this.itemDescription.id,parent:this.itemList});const d=e.proxyButton;d.addListener("click",t=>o.onClick(t.sourceEvent,e.datum,d)),d.addListener("dblclick",t=>o.onDoubleClick(t.sourceEvent,e.datum)),d.addListener("mouseenter",t=>o.onHover(t.sourceEvent,e)),d.addListener("mouseleave",()=>o.onLeave()),d.addListener("contextmenu",t=>o.onContextClick(t,e)),d.addListener("blur",()=>o.onLeave()),d.addListener("focus",t=>o.onHover(t.sourceEvent,e)),d.addListener("drag-start",()=>{})}),this.dirty=!1}update(e){e.visible&&(this.initLegendList(e),this.updateItemProxyButtons(e),this.updatePaginationProxyButtons(e,!0)),this.updateVisibility(e.visible)}updateVisibility(e){this.itemList.setHidden(!e),this.paginationGroup.setHidden(!e)}updateItemProxyButtons(e){let{itemSelection:t,group:i,pagination:n,interactive:o}=e;const s=Bx.toCanvas(i);this.itemList.setBounds(s);const r=Math.max(...t.nodes().map(e=>e.getBBox().height));t.each((e,t)=>{if(e.proxyButton){const t=e.pageIndex===n.currentPage,{x:i,y:a,height:l,width:d}=Bx.toCanvas(e),c=(r-l)/2,u={x:i-s.x,y:a-c-s.y,height:r,width:d},h=o&&t;e.proxyButton.setCursor("pointer"),e.proxyButton.setEnabled(h),e.proxyButton.setPointerEvents(h?void 0:"none"),e.proxyButton.setBounds(u)}})}updatePaginationProxyButtons(e,t){const{pagination:i}=e;if(this.paginationGroup.setHidden(!i.visible),t&&"ctx"in e){var n;const{oldPages:t,newPages:i}=e,o=(null!==(n=null===t||void 0===t?void 0:t.length)&&void 0!==n?n:i.length)>1,s=i.length>1;o!==s&&(s?this.createPaginationButtons(e):this.destroyPaginationButtons()),this.paginationGroup.setAriaHidden(!s||void 0)}if(this.prevButton&&this.nextButton){const{prev:e,next:t}=i.computeCSSBounds(),n=Pb.merge([e,t]);e.x-=n.x,e.y-=n.y,t.x-=n.x,t.y-=n.y,this.paginationGroup.setBounds(n),this.prevButton.setBounds(e),this.nextButton.setBounds(t),this.prevButton.setEnabled(0!==i.currentPage),this.nextButton.setEnabled(i.currentPage!==i.totalPages-1),this.nextButton.setCursor(i.getCursor("next")),this.prevButton.setCursor(i.getCursor("previous"))}}createPaginationButtons(e){const{ctx:t,pagination:i}=e;this.prevButton||(this.prevButton=t.proxyInteractionService.createProxyElement({type:"button",textContent:{id:"ariaLabelLegendPagePrevious"},tabIndex:0,parent:this.paginationGroup}),this.prevButton.addListener("click",t=>this.onPageButton(e,t,"previous")),this.prevButton.addListener("mouseenter",()=>i.onMouseHover("previous")),this.prevButton.addListener("mouseleave",()=>i.onMouseHover(void 0))),this.nextButton||(this.nextButton=t.proxyInteractionService.createProxyElement({type:"button",textContent:{id:"ariaLabelLegendPageNext"},tabIndex:0,parent:this.paginationGroup}),this.nextButton.addListener("click",t=>this.onPageButton(e,t,"next")),this.nextButton.addListener("mouseenter",()=>i.onMouseHover("next")),this.nextButton.addListener("mouseleave",()=>i.onMouseHover(void 0)))}destroyPaginationButtons(){var e,t;null===(e=this.nextButton)||void 0===e||e.destroy(),null===(t=this.prevButton)||void 0===t||t.destroy(),this.nextButton=void 0,this.prevButton=void 0}onPageButton(e,t,i){e.pagination.onClick(t.sourceEvent,i),this.updatePaginationProxyButtons(e,!1)}onDataUpdate(e,t){this.dirty=e.length!==t.length||e.some((i,n,o)=>{const[s,r]=[t[n],e[n]];return s.id!==r.id})}onLocaleChanged(e,t,i){const n=t.length;t.each((t,o,s)=>{let{proxyButton:r}=t;const a=null===r||void 0===r?void 0:r.getElement();if(null!=a){const t=ed(i.getItemLabel(o));a.textContent=this.getItemAriaText(e,t,s,n)}}),this.itemDescription.textContent=this.getItemAriaDescription(e)}onPageChange(e){this.updateItemProxyButtons(e),this.updatePaginationProxyButtons(e,!1)}getItemAriaText(e,t,i,n){return i>=0&&t?(i++,e.t("ariaLabelLegendItem",{label:t,index:i,count:n})):e.t("ariaLabelLegendItemUnknown")}getItemAriaDescription(e){return e.t("ariaDescriptionLegendItem")}};function wz(e,t,i){let{itemId:n,seriesId:o,label:{text:s}}=t;const r={defaultPrevented:!1,apiEvent:{type:e,itemId:n,seriesId:o,event:i,text:ed(s),preventDefault:()=>r.defaultPrevented=!0}};return r}var Mz=class extends jx{constructor(){super({name:"markerLabelGroup"}),this.symbolsGroup=this.appendChild(new Gx({name:"legend-markerLabel-symbols",renderToOffscreenCanvas:!0,optimizeForInfrequentRedraws:!0})),this.label=this.appendChild(new LC),this.enabled=!0,this.pageIndex=Number.NaN,this.spacing=0,this.length=0,this.isCustomMarker=!1,this.marker=this.symbolsGroup.appendChild(new FI({zIndex:1})),this.line=this.symbolsGroup.appendChild(new eD({zIndex:0})),this.line.visible=!1,this.label.textBaseline="middle",this.label.y=1}destroy(){var e;super.destroy(),null===(e=this.proxyButton)||void 0===e||e.destroy()}setEnabled(e){this.enabled=e,this.refreshVisibilities()}getTextMeasureBBox(){return this.layout(),Pb.merge([this.symbolsGroup.getBBox(),this.label.getTextMeasureBBox()])}refreshVisibilities(){const e=this.enabled?1:.5;this.label.opacity=e,this.opacity=e}layout(){const{marker:e,line:t,length:i,isCustomMarker:n}=this;let o=0,s=0;if(e.visible){const{size:t}=e,r=FI.anchor(e.shape);o=(r.x-.5)*t+i/2,s=(r.y-.5)*t,n?(e.x=0,e.y=0,e.translationX=o,e.translationY=s):(e.x=o,e.y=s,e.translationX=0,e.translationY=0)}t.visible&&(t.x1=0,t.x2=i,t.y1=0,t.y2=0)}preRender(e){const t=super.preRender(e);return this.layout(),t}layoutLabel(){const{length:e,spacing:t}=this;this.label.x=e+t}computeBBox(){return this.layout(),super.computeBBox()}};Mz.className="MarkerLabel",Ab([ig("label")],Mz.prototype,"text",2),Ab([ig("label")],Mz.prototype,"fontStyle",2),Ab([ig("label")],Mz.prototype,"fontWeight",2),Ab([ig("label")],Mz.prototype,"fontSize",2),Ab([ig("label")],Mz.prototype,"fontFamily",2),Ab([ig("label","fill")],Mz.prototype,"color",2),Ab([og(e=>e.layoutLabel())],Mz.prototype,"spacing",2),Ab([og(e=>e.layoutLabel())],Mz.prototype,"length",2),Ab([_y()],Mz.prototype,"isCustomMarker",2);var kz=class extends kh{constructor(){super(...arguments),this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=Eh.SMALL,this.fontFamily="Verdana, sans-serif"}};Ab([ru],kz.prototype,"maxLength",2),Ab([ru],kz.prototype,"color",2),Ab([ru],kz.prototype,"fontStyle",2),Ab([ru],kz.prototype,"fontWeight",2),Ab([ru],kz.prototype,"fontSize",2),Ab([ru],kz.prototype,"fontFamily",2),Ab([ru],kz.prototype,"formatter",2);var Dz=class extends kh{constructor(){super(...arguments),this.shape=void 0,this.size=15,this.padding=8}};Ab([ru],Dz.prototype,"shape",2),Ab([ru],Dz.prototype,"size",2),Ab([ru],Dz.prototype,"padding",2),Ab([ru],Dz.prototype,"strokeWidth",2),Ab([ru],Dz.prototype,"enabled",2);var Iz=class extends kh{};Ab([ru],Iz.prototype,"strokeWidth",2),Ab([ru],Iz.prototype,"length",2);var Az=class extends kh{constructor(){super(...arguments),this.paddingX=16,this.paddingY=8,this.showSeriesStroke=!1,this.marker=new Dz,this.label=new kz,this.line=new Iz}};Ab([ru],Az.prototype,"maxWidth",2),Ab([ru],Az.prototype,"paddingX",2),Ab([ru],Az.prototype,"paddingY",2),Ab([ru],Az.prototype,"showSeriesStroke",2),Ab([ru],Az.prototype,"marker",2),Ab([ru],Az.prototype,"label",2),Ab([ru],Az.prototype,"line",2);var Lz=class extends kh{};Ab([ru],Lz.prototype,"legendItemClick",2),Ab([ru],Lz.prototype,"legendItemDoubleClick",2);var Nz={type:"gradient",bounds:"item",gradient:"linear",colorStops:[{color:"black"}],rotation:0,reverse:!1,colorSpace:"rgb"},Tz={type:"pattern",pattern:"forward-slanted-lines",width:8,height:8,padding:1,fill:"black",fillOpacity:1,backgroundFill:"white",backgroundFillOpacity:1,stroke:"black",strokeOpacity:1,strokeWidth:1,rotation:0,scale:1},Rz={type:"image",backgroundFill:"black",backgroundFillOpacity:1,rotation:0,repeat:"no-repeat",fit:"contain",width:8,height:8},Ez=class extends kh{constructor(e){super(),this.ctx=e,this.id=xm(this),this.group=new jx({name:"legend",zIndex:bp.LEGEND}),this.itemSelection=Jk.select(this.group,Mz),this.containerNode=this.group.appendChild(new pC({name:"legend-container"})),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.truncatedItems=new Set,this._data=[],this.toggleSeries=!0,this.item=new Az,this.listeners=new Lz,this.enabled=!1,this.position="bottom",this.border=new sg(this.containerNode),this.cornerRadius=0,this.fillOpacity=1,this.padding=4,this.spacing=0,this.cleanup=new Ta,this.size=[0,0],this._visible=!0,this.pagination=new Cz(t=>e.updateService.update(t),e=>this.updatePageNumber(e)),this.pagination.attachPagination(this.group);const{items:t}=e.contextMenuRegistry.builtins;t["toggle-series-visibility"].action=e=>this.contextToggleVisibility(e),t["toggle-other-series"].action=e=>this.contextToggleOtherSeries(e),this.cleanup.register(e.eventsHub.on("legend:change",this.onLegendDataChange.bind(this)),e.eventsHub.on("legend:change-partial",this.onLegendDataChangePartial.bind(this)),e.layoutManager.registerElement(1,e=>this.positionLegend(e)),e.eventsHub.on("locale:change",()=>this.onLocaleChanged()),()=>delete t["toggle-series-visibility"].action,()=>delete t["toggle-other-series"].action,()=>this.group.remove()),this.domProxy=new Sz(this.ctx,this.id),this.ctx.historyManager.addMementoOriginator(e.legendManager)}set data(e){yu(e,this._data)||(this.domProxy.onDataUpdate(this._data,e),this._data=e,this.updateGroupVisibility())}get data(){return this._data}onLegendDataChange(e){let{legendData:t=[]}=e;this.enabled&&(this.data=t.filter(e=>!e.hideInLegend))}onLegendDataChangePartial(e){this.itemSelection.each((t,i)=>{let{proxyButton:n}=t,{itemId:o}=i;if(null!=n)for(const s of e.legendData)s.itemId===o&&n.setChecked(s.enabled)})}destroy(){this.ctx.domManager.removeChild("canvas-overlay","".concat(this.id,"-toolbar")),this.ctx.domManager.removeChild("canvas-overlay","".concat(this.id,"-pagination")),this.cleanup.flush(),this.itemSelection.clear()}getOrientation(){var e;return null!==(e=this.orientation)&&void 0!==e?e:"horizontal"}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}isInteractive(){const{toggleSeries:e,listeners:{legendItemClick:t,legendItemDoubleClick:i}}=this;return e||null!=i||null!=t}attachLegend(e){e.appendChild(this.group)}getItemLabel(e){const{formatter:t}=this.item.label;if(t){const i=e.datum;return this.cachedCallWithContext(t,p({itemId:e.itemId,value:e.label.text,seriesId:e.seriesId},i&&{datum:i}))}return e.label.text}calcLayout(e,t){const{paddingX:i,paddingY:n,label:o,maxWidth:s,label:{maxLength:r=1/0,fontStyle:a,fontWeight:l,fontSize:d,fontFamily:c}}=this.item,u=[...this.data];this.reverseOrder&&u.reverse(),this.itemSelection.update(u);const h=[],p=Wm(o),g=null!==s&&void 0!==s?s:.8*e,{markerWidth:m,anyLineEnabled:f}=this.calculateMarkerWidth();if(this.itemSelection.each((e,t)=>{var i;e.fontStyle=a,e.fontWeight=l,e.fontSize=d,e.fontFamily=c;const n=this.updateMarkerLabel(e,t,m,f),o=null!==(i=t.itemId)&&void 0!==i?i:t.id,s=ed(this.getItemLabel(t),"<unknown>").replace(Fl," ");e.text=this.truncate(s,r,g,n,p,o),h.push(e.getTextMeasureBBox())}),e=Math.max(1,e),t=Math.max(1,t),!Number.isFinite(e))return{};[e,t]=this.updateContainer(e,t);const v=this.size,y=this.oldSize;v[0]=e,v[1]=t,v[0]===y[0]&&v[1]===y[1]||(y[0]=v[0],y[1]=v[1]);const{pages:b,maxPageHeight:x,maxPageWidth:C}=this.updatePagination(h,e,t),S=this.pages;this.pages=b,this.maxPageSize=[C-i,x-n];const w=this.pagination.currentPage,M=this.pages[w];return this.pages.length<1||!M?(this.visible=!1,{oldPages:S}):(this.visible=!0,this.updatePositions(w),this.update(),{oldPages:S})}isCustomMarker(e,t){return e&&void 0!==t&&"string"!==typeof t}calcSymbolsEnabled(e){var t;const{showSeriesStroke:i,marker:n}=this.item,o=!!n.enabled||!i||null===(t=e.marker.enabled)||void 0===t||t;return{markerEnabled:o,lineEnabled:!(!e.line||!i),isCustomMarker:this.isCustomMarker(o,e.marker.shape)}}calcSymbolsLengths(e,t,i){var n;const{marker:o,line:s}=this.item;let r;const{shape:a}=e.marker;if(this.isCustomMarker(t,a)){const e=new FI;e.shape=a,e.updatePath();const t=e.getBBox();r=Math.max(t.width,t.height)}return{markerLength:t?o.size:0,lineLength:i?null!==(n=s.length)&&void 0!==n?n:25:0,customMarkerSize:r}}calculateMarkerWidth(){let e=0,t=!1;return this.itemSelection.each((i,n)=>{const{symbol:o}=n,{lineEnabled:s,markerEnabled:r}=this.calcSymbolsEnabled(o),{markerLength:a,lineLength:l,customMarkerSize:d=-1/0}=this.calcSymbolsLengths(o,r,s);e=Math.max(e,l,d,a),t||(t=s)}),{markerWidth:e,anyLineEnabled:t}}updateMarkerLabel(e,t,i,n){const{marker:o,paddingX:s}=this.item,{symbol:r}=t;let a=s;const{markerEnabled:l,isCustomMarker:d}=this.calcSymbolsEnabled(r),c=o.padding;(l||n)&&(a+=c+i);const{marker:u,line:h}=e;var p,g;(u.visible=l,u.visible)&&(u.shape=null!==(p=null!==(g=o.shape)&&void 0!==g?g:r.marker.shape)&&void 0!==p?p:"square",u.size=o.size,u.setStyleProperties(this.getMarkerStyles(Qg(r))));return h.visible=n,h.visible&&h.setStyleProperties(this.getLineStyles(r)),e.length=i,e.spacing=c,e.isCustomMarker=d,a}updateContainer(e,t){const i=this.getContainerStyles();return this.containerNode.width=0,this.containerNode.height=0,this.containerNode.setStyleProperties(i),this.containerNode.cornerRadius=i.cornerRadius,[e-=2*i.strokeWidth+i.padding.left+i.padding.right,t-=2*i.strokeWidth+i.padding.top+i.padding.bottom]}truncate(e,t,i,n,o,s){let r=!1;e.length>t&&(e=e.substring(0,t),r=!0);const a=Zm(e,o,i-n,r);return Ul(a)?this.truncatedItems.add(s):this.truncatedItems.delete(s),a}updatePagination(e,t,i){const n=this.getOrientation(),o=Math.min(this.paginationTrackingIndex,e.length);this.pagination.orientation=n,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:s,maxPageHeight:r,maxPageWidth:a,paginationBBox:l,paginationVertical:d}=this.calculatePagination(e,t,i),c=s.findIndex(e=>e.endIndex>=o);this.pagination.currentPage=za(0,c,s.length-1);const{paddingX:u,paddingY:h}=this.item,p=a-u,g=r-h;let m=0,f=-l.y-this.item.marker.size/2;d?f+=g+8:(m+=-l.x+p+8,f+=(g-l.height)/2),this.pagination.translationX=m,this.pagination.translationY=f,this.pagination.update(),this.pagination.updateMarkers();let v=0;return this.itemSelection.each((e,t,i)=>{var n,o;i>(null!==(n=null===(o=s[v])||void 0===o?void 0:o.endIndex)&&void 0!==n?n:1/0)&&v++,e.pageIndex=v}),{maxPageHeight:r,maxPageWidth:a,pages:s}}calculatePagination(e,t,i){const{paddingX:n,paddingY:o}=this.item,{placement:s}=Uu(this.position),r=this.getOrientation(),a=["left","left-top","left-bottom","right","right-top","right-bottom"].includes(s);let l=this.pagination.getBBox(),d=new Pb(0,0,0,0),c=[],u=0,h=0,p=0;const g=e=>e.width===l.width&&e.height===l.height,m=void 0!==this.maxWidth&&void 0!==this.maxHeight;do{var f,v,y;if(p++>10){jr.warn("unable to find stable legend layout.");break}l=d;const s=t-(a?0:l.width),g=mz({orientation:r,bboxes:e,maxHeight:i-(a?l.height:0),maxWidth:s,itemPaddingY:o,itemPaddingX:n,forceResult:m});c=null!==(f=null===g||void 0===g?void 0:g.pages)&&void 0!==f?f:[],u=null!==(v=null===g||void 0===g?void 0:g.maxPageWidth)&&void 0!==v?v:0,h=null!==(y=null===g||void 0===g?void 0:g.maxPageHeight)&&void 0!==y?y:0;const b=c.length;if(this.pagination.visible=b>1,this.pagination.totalPages=b,this.pagination.update(),this.pagination.updateMarkers(),d=this.pagination.getBBox(),!this.pagination.visible)break}while(!g(d));return{maxPageWidth:u,maxPageHeight:h,pages:c,paginationBBox:d,paginationVertical:a}}updatePositions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{item:{paddingY:t},itemSelection:i,pages:n}=this;if(n.length<1||!n[e])return;const{columns:o,startIndex:s,endIndex:r}=n[e];let a=0,l=0;const d=o.length,c=o[0].indices.length,u="horizontal"===this.getOrientation(),h=o[0].bboxes[0].height+t,p=[];i.each((e,t,i)=>{var n,g;if(i<s||i>r)return void(e.visible=!1);const m=i-s;let f,v;u?(f=m%d,v=Math.floor(m/d)):(f=Math.floor(m/c),v=m%c),e.visible=!0;const y=o[f];y&&(l=Math.floor(h*v),a=Math.floor(null!==(n=p[v])&&void 0!==n?n:0),p[v]=(null!==(g=p[v])&&void 0!==g?g:0)+y.columnWidth,e.translationX=a,e.translationY=l)})}updatePageNumber(e){const{itemSelection:t,group:i,pagination:n,pages:o}=this,{startIndex:s,endIndex:r}=o[e];0===s?this.paginationTrackingIndex=0:e===o.length-1?this.paginationTrackingIndex=r:this.paginationTrackingIndex=Math.floor((s+r)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(e),this.domProxy.onPageChange({itemSelection:t,group:i,pagination:n,interactive:this.isInteractive()}),this.ctx.updateService.update(Ku.SCENE_RENDER)}update(){const{label:{color:e}}=this.item;this.itemSelection.each((t,i)=>{t.setEnabled(i.enabled),t.color=e}),this.updateContextMenu()}updateContextMenu(){const e=this.toggleSeries?"show":"hide";this.ctx.contextMenuRegistry.toggle("toggle-series-visibility",e),this.ctx.contextMenuRegistry.toggle("toggle-other-series",e)}getLineStyles(e){var t,i;const{stroke:n,strokeOpacity:o=1,strokeWidth:s,lineDash:r}=null!==(t=e.line)&&void 0!==t?t:{},a=Math.min(2,null!==s&&void 0!==s?s:1);return{stroke:n,strokeOpacity:o,strokeWidth:null!==(i=this.item.line.strokeWidth)&&void 0!==i?i:a,lineDash:r}}getMarkerStyles(e){var t;let{marker:i}=e;const{fill:n,stroke:o,strokeOpacity:s=1,fillOpacity:r=1,strokeWidth:a,lineDash:l,lineDashOffset:d}=i,c=Math.min(2,null!==a&&void 0!==a?a:1);var u;qv(n)&&(n.width=8,n.height=8,n.padding=1,n.strokeWidth=Math.min(2,null!==(u=n.strokeWidth)&&void 0!==u?u:2));return Qv(n)&&(n.fit="contain",n.width=void 0,n.height=void 0,n.repeat="no-repeat"),yI({fill:n,stroke:o,strokeOpacity:s,fillOpacity:r,strokeWidth:null!==(t=this.item.marker.strokeWidth)&&void 0!==t?t:c,lineDash:l,lineDashOffset:d},Nz,Tz,Rz)}getContainerStyles(){var e,t,i,n;const{stroke:o,strokeOpacity:s,strokeWidth:r}=this.border,{cornerRadius:a,fill:l,fillOpacity:d,padding:c}=this,u="number"===typeof c;return yI({cornerRadius:a,fill:l,fillOpacity:d,padding:{top:u?c:null!==(e=c.top)&&void 0!==e?e:0,right:u?c:null!==(t=c.right)&&void 0!==t?t:0,bottom:u?c:null!==(i=c.bottom)&&void 0!==i?i:0,left:u?c:null!==(n=c.left)&&void 0!==n?n:0},stroke:o,strokeOpacity:s,strokeWidth:this.border.enabled?r:0},Nz,Tz,Rz)}computePagedBBox(){const e=Gx.computeChildrenBBox(this.group.excludeChildren({name:"legend-container"}));if(this.pages.length>1){const[t,i]=this.maxPageSize;e.height=Math.max(i,e.height),e.width=Math.max(t,e.width)}const{strokeWidth:t,padding:i}=this.getContainerStyles();return e.grow(i).grow(t),e}findNode(e){var t;const{datum:i,proxyButton:n}=null!==(t=this.itemSelection.select(t=>{var i;return(null===(i=t.datum)||void 0===i?void 0:i.itemId)===e.itemId})[0])&&void 0!==t?t:{};if(void 0===i||void 0===n)throw new Error("AG Charts - Missing required properties { datum: ".concat(i,", proxyButton: ").concat(JSON.stringify(n)," }"));return{datum:i,proxyButton:n}}contextToggleVisibility(e){const{datum:t,proxyButton:i}=this.findNode(e);this.doClick(e.event,t,i),this.updateHighlight()}contextToggleOtherSeries(e){this.doDoubleClick(e.event,this.findNode(e).datum),this.updateHighlight()}onContextClick(e,t){var i,n;const{sourceEvent:o}=e,s=t.datum;this.updateHighlight(),this.preventHidingAll&&null!==(i=this.contextMenuDatum)&&void 0!==i&&i.enabled&&this.getVisibleItemCount()<=1?this.ctx.contextMenuRegistry.builtins.items["toggle-series-visibility"].enabled=!1:this.ctx.contextMenuRegistry.builtins.items["toggle-series-visibility"].enabled=!0;const r=this.ctx.chartService.series.length>1&&!0!==(null===(n=this.ctx.chartService.series[0])||void 0===n||null===(n=n.getLegendData("category")[0])||void 0===n?void 0:n.hideToggleOtherSeries)?"show":"hide";this.ctx.contextMenuRegistry.toggle("toggle-other-series",r);const{offsetX:a,offsetY:l}=o,{x:d,y:c}=Bx.toCanvasPoint(t,a,l);this.ctx.contextMenuRegistry.dispatchContext("legend-item",{widgetEvent:e,canvasX:d,canvasY:c},{legendItem:s})}onClick(e,t,i){this.doClick(e,t,i)&&e.preventDefault()}getVisibleItemCount(){return this.ctx.chartService.series.flatMap(e=>e.getLegendData("category")).filter(e=>e.enabled).length}doClick(e,t,i){var n;const{listeners:{legendItemClick:o},ctx:{chartService:s,highlightManager:r},preventHidingAll:a,toggleSeries:l}=this;if(!t)return!1;const{legendType:d,seriesId:c,itemId:u,enabled:h,legendItemName:p}=t,g=s.series.find(e=>e.id===c);if(!g)return!1;let m=h;const f=wz("click",t,e);if(o&&Cp([g.properties,this.ctx.chartService],o,f.apiEvent),f.defaultPrevented)return!0;if(l){if(m=!h,a&&!m){this.getVisibleItemCount()<2&&(m=!0)}i.setChecked(m),this.ctx.eventsHub.emit("legend:item-click",{legendType:d,series:g,itemId:u,enabled:m,legendItemName:p})}return m?r.updateHighlight(this.id,{series:g,itemId:u,datum:void 0,datumIndex:"number"===typeof u?u:void 0,legendItemName:p}):r.updateHighlight(this.id),this.ctx.legendManager.update(),this.ctx.updateService.update(Ku.PROCESS_DATA,{forceNodeDataRefresh:!0,skipAnimations:null!==(n=t.skipAnimations)&&void 0!==n&&n}),!0}onDoubleClick(e,t){this.doDoubleClick(e,t)&&e.preventDefault()}doDoubleClick(e,t){const{listeners:{legendItemDoubleClick:i},ctx:{chartService:n},toggleSeries:o}=this;if(!t)return!1;const{legendType:s,id:r,itemId:a,seriesId:l}=t,d=n.series.find(e=>e.id===r);if(!d)return!1;const c=wz("dblclick",t,e);if(i&&Cp([d.properties,this.ctx.chartService],i,c.apiEvent),c.defaultPrevented)return!0;if(o){var u;const e=n.series.flatMap(e=>e.getLegendData("category"));let t=0;const i=new Set;for(const n of e)n.enabled&&(t+=1,null!=n.legendItemName&&i.add(n.legendItemName));i.size>0&&(t=i.size);const o=e.find(e=>e.itemId===a&&e.seriesId===l);this.ctx.eventsHub.emit("legend:item-double-click",{legendType:s,series:d,itemId:a,numVisibleItems:t,enabled:null!==(u=null===o||void 0===o?void 0:o.enabled)&&void 0!==u&&u,legendItemName:null===o||void 0===o?void 0:o.legendItemName})}return this.ctx.legendManager.update(),this.ctx.updateService.update(Ku.PROCESS_DATA,{forceNodeDataRefresh:!0}),!0}toTooltipMeta(e,t){let i;return e instanceof FocusEvent?i=Bx.toCanvas(t).computeCenter():(e.preventDefault(),i=Bx.toCanvasPoint(t,e.offsetX,e.offsetY)),{canvasX:i.x,canvasY:i.y,showArrow:!1}}onHover(e,t){var i;if(!this.enabled)throw new Error("AG Charts - onHover handler called on disabled legend");this.pagination.setPage(t.pageIndex);const n=t.datum,o=n?this.ctx.chartService.series.find(e=>e.id===(null===n||void 0===n?void 0:n.id)):void 0;if(n&&this.truncatedItems.has(null!==(i=n.itemId)&&void 0!==i?i:n.id)){const i=this.toTooltipMeta(e,t);this.ctx.tooltipManager.updateTooltip(this.id,i,[{type:"structured",title:this.getItemLabel(n)}])}else this.ctx.tooltipManager.removeTooltip(this.id,void 0,!0);null!==n&&void 0!==n&&n.enabled&&o?this.updateHighlight({series:o,itemId:null===n||void 0===n?void 0:n.itemId,datum:void 0,datumIndex:"number"===typeof(null===n||void 0===n?void 0:n.itemId)?n.itemId:void 0,legendItemName:null===n||void 0===n?void 0:n.legendItemName}):this.updateHighlight()}onLeave(){this.ctx.tooltipManager.removeTooltip(this.id,void 0,!0),this.updateHighlight()}updateHighlight(e){this.ctx.interactionManager.isState(32)||null==e?this.ctx.highlightManager.updateHighlight(this.id,e):this.ctx.interactionManager.isState(2)&&(this.pendingHighlightDatum=e,this.ctx.animationManager.onBatchStop(()=>{this.ctx.highlightManager.updateHighlight(this.id,this.pendingHighlightDatum)}))}onLocaleChanged(){this.domProxy.onLocaleChanged(this.ctx.localeManager,this.itemSelection,this)}positionLegend(e){const t=this.positionLegendScene(e);this.positionLegendDOM(t)}positionLegendScene(e){if(!this.enabled||!this.data.length)return;const{placement:t,floating:i,xOffset:n,yOffset:o}=Uu(this.position),s=i?new Pb(0,0,e.width,e.height):e.layoutBox,{x:r,y:a,width:l,height:d}=s,[c,u]=this.calculateLegendDimensions(s),{oldPages:h}=this.calcLayout(c,u),p=this.computePagedBBox();if(this.visible){let e=function(e){};const c=this.spacing;let u,h;switch(t){case"top":u=(l-p.width)/2,h=0;break;case"bottom":u=(l-p.width)/2,h=d-p.height;break;case"right":u=l-p.width,h=(d-p.height)/2;break;case"left":u=0,h=(d-p.height)/2;break;case"top-right":case"right-top":u=l-p.width,h=0;break;case"top-left":case"left-top":u=0,h=0;break;case"bottom-right":case"right-bottom":u=l-p.width,h=d-p.height;break;case"bottom-left":case"left-bottom":u=0,h=d-p.height;break;default:e(t)}if(!i){let i,n;switch(t){case"top":case"top-right":case"top-left":i=p.height+c,n="top";break;case"bottom":case"bottom-right":case"bottom-left":i=p.height+c,n="bottom";break;case"left":case"left-top":case"left-bottom":i=p.width+c,n="left";break;case"right":case"right-top":case"right-bottom":i=p.width+c,n="right";break;default:e(t)}s.shrink(i,n)}u+=n,h+=o,this.group.translationX=Math.floor(r+u-p.x),this.group.translationY=Math.floor(a+h-p.y),this.containerNode.x=p.x,this.containerNode.y=p.y,this.containerNode.width=p.width,this.containerNode.height=p.height}return h}positionLegendDOM(e){const{ctx:t,itemSelection:i,pagination:n,pages:o,group:s}=this,r=this.visible&&this.enabled,a=this.isInteractive();this.domProxy.update({visible:r,interactive:a,ctx:t,itemSelection:i,group:s,pagination:n,oldPages:e,newPages:o,datumReader:this,itemListener:this})}calculateLegendDimensions(e){const{width:t,height:i}=e,{placement:n}=Uu(this.position),o=t/i;let s,r;switch(n){case"top":case"top-left":case"top-right":case"bottom":case"bottom-left":case"bottom-right":{const e=o<1?Math.min(.5,1/o*.2):.2;s=this.maxWidth?Math.min(this.maxWidth,t):t,r=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*e);break}case"left":case"left-top":case"left-bottom":case"right":case"right-top":case"right-bottom":{const e=o>1?Math.min(.5,.25*o):.25;s=this.maxWidth?Math.min(this.maxWidth,t):Math.round(t*e),r=this.maxHeight?Math.min(this.maxHeight,i):i;break}}return[s,r]}cachedCallWithContext(e,t){const{callbackCache:i,chartService:n}=this.ctx;return i.call([this,n],e,t)}};Ez.className="Legend",Ab([ru],Ez.prototype,"toggleSeries",2),Ab([ru],Ez.prototype,"pagination",2),Ab([ru],Ez.prototype,"item",2),Ab([ru],Ez.prototype,"listeners",2),Ab([og((e,t,i)=>{if(e.updateGroupVisibility(),t===i)return;const{ctx:{legendManager:n,stateManager:o}}=e;!1===i&&!0===t&&o.restoreState(n)}),ru],Ez.prototype,"enabled",2),Ab([ru],Ez.prototype,"position",2),Ab([ru],Ez.prototype,"maxWidth",2),Ab([ru],Ez.prototype,"maxHeight",2),Ab([ru],Ez.prototype,"reverseOrder",2),Ab([ru],Ez.prototype,"orientation",2),Ab([ru],Ez.prototype,"preventHidingAll",2),Ab([ru],Ez.prototype,"border",2),Ab([ru],Ez.prototype,"cornerRadius",2),Ab([ru],Ez.prototype,"fill",2),Ab([ru],Ez.prototype,"fillOpacity",2),Ab([ru],Ez.prototype,"padding",2),Ab([ru],Ez.prototype,"spacing",2),Ab([ru],Ez.prototype,"xOffset",2),Ab([ru],Ez.prototype,"yOffset",2);var Pz={type:"plugin",name:"legend",version:GC,options:{enabled:Cd,position:Ac,orientation:Gd("horizontal","vertical"),maxWidth:Pd,maxHeight:Pd,spacing:Pd,border:Mc,cornerRadius:Dd,padding:wc,fill:ac,fillOpacity:Fd,preventHidingAll:Cd,reverseOrder:Cd,toggleSeries:Cd,item:{marker:{size:Pd,shape:Lc,padding:Pd,strokeWidth:Pd},line:{length:Pd,strokeWidth:Pd},label:p({maxLength:Pd,formatter:Sd},Cc),maxWidth:Pd,paddingX:Pd,paddingY:Pd,showSeriesStroke:Cd},pagination:{marker:{size:Pd,shape:Lc,padding:Pd},activeStyle:p(p({},lc),ic),inactiveStyle:p(p({},lc),ic),highlightStyle:p(p({},lc),ic),label:Cc},listeners:{legendItemClick:Sd,legendItemDoubleClick:Sd}},themeTemplate:p(p({},YA),{},{enabled:{$and:[{$greaterThan:[{$size:{$path:"/series"}},1]},{$or:[{$isChartType:"cartesian"},{$isChartType:"standalone"},{$and:[{$isChartType:"polar"},{$not:{$isSeriesType:"pie"}},{$not:{$isSeriesType:"donut"}}]}]}]},position:Fh.BOTTOM,orientation:{$if:[{$or:[{$eq:[{$path:"./position"},Fh.LEFT]},{$eq:[{$path:"./position"},Fh.LEFT_TOP]},{$eq:[{$path:"./position"},Fh.LEFT_BOTTOM]},{$eq:[{$path:"./position"},Fh.RIGHT]},{$eq:[{$path:"./position"},Fh.RIGHT_TOP]},{$eq:[{$path:"./position"},Fh.RIGHT_BOTTOM]},{$eq:[{$path:"./position/placement"},Fh.LEFT]},{$eq:[{$path:"./position/placement"},Fh.LEFT_TOP]},{$eq:[{$path:"./position/placement"},Fh.LEFT_BOTTOM]},{$eq:[{$path:"./position/placement"},Fh.RIGHT]},{$eq:[{$path:"./position/placement"},Fh.RIGHT_TOP]},{$eq:[{$path:"./position/placement"},Fh.RIGHT_BOTTOM]}]},"vertical","horizontal"]},spacing:30,listeners:{},toggleSeries:!0,item:{paddingX:16,paddingY:8,marker:{size:15,padding:8},showSeriesStroke:!0,label:{color:{$ref:"textColor"},fontSize:{$rem:Oh.SMALL},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"}}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:{$ref:"foregroundColor"}},inactiveStyle:{fill:{$ref:"subtleTextColor"}},highlightStyle:{fill:{$ref:"foregroundColor"}},label:{color:{$ref:"textColor"}}},fill:{$if:[{$path:["./position/floating",!1]},{$ref:"chartBackgroundColor"},"transparent"]}}),create:e=>{const t=new Ez(e);return t.attachLegend(e.scene),t}},Oz=class extends GE{normaliseDataDomain(e){var t;const{min:i,max:n,preferredMin:o,preferredMax:s}=this,{extent:r,clipped:a}=Eg(e.domain,i,n,o,s,void 0,null===(t=e.sortMetadata)||void 0===t?void 0:t.sortOrder);return r[0]<0&&r[1]>0||e.domain[0]<0&&e.domain[1]>0?(jr.warn("The log axis domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:a}):0===r[0]||0===r[1]||0===e.domain[0]||0===e.domain[1]?(jr.warn("The log axis domain contains a value of 0, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:a}):{domain:r,clipped:a}}set base(e){this.scale.base=e}get base(){return this.scale.base}constructor(e){super(e,new TE)}};Oz.className="LogAxis",Oz.type="log";function Fz(e,t,i,n,o,s,r){const a=e[s];if(null==a)return-1;const l=fh(Number.isFinite(t)?mh(a,t,i,r):gh(s,e.length),o);return s===n[l+Qu]||s===n[l+Ju]||s===n[l+eh]||s===n[l+th]?l:-1}function zz(e,t,i,n,o,s,r,a,l){let d=0,c=0,u=-1;for(let f=0;f<r;f++){const r=Fz(e,t,i,n,o,f,s);-1!==r&&(d++,r!==u&&(c++,u=r))}c++;const h=(null===a||void 0===a?void 0:a.length)===d?a:new Uint32Array(d),p=(null===l||void 0===l?void 0:l.length)===c?l:new Uint32Array(c);let g=0,m=0;u=-1;for(let f=0;f<r;f++){const r=Fz(e,t,i,n,o,f,s);-1!==r&&(r!==u&&(p[m++]=g,u=r),h[g++]=f)}return p[m]=d-1,{indices:h,metaIndices:p}}function Bz(e,t,i,n){const o=t.length;if(o<nh)return;const[s,r]=e,{xNeedsValueOf:a,yNeedsValueOf:l,existingFilters:d}=n;let c=hh(t,s,r,{xNeedsValueOf:a});const u=null===d||void 0===d?void 0:d.find(e=>e.maxRange===c);let{indexData:h,valueData:p}=bh(t,i,i,s,r,c,{xNeedsValueOf:a,yNeedsValueOf:l,reuseIndexData:null===u||void 0===u?void 0:u.indexData,reuseValueData:null===u||void 0===u?void 0:u.valueData}),{indices:g,metaIndices:m}=zz(t,s,r,h,c,a,o,null===u||void 0===u?void 0:u.indices,null===u||void 0===u?void 0:u.metaIndices);const f=[{maxRange:c,metaIndices:m,indices:g,indexData:h,valueData:p}];for(;g.length>10&&c>sh;){var v,y;const e=c,i=Math.trunc(e/2),n=null===d||void 0===d?void 0:d.find(e=>e.maxRange===i),o=xh(h,p,e,{reuseIndexData:null===n||void 0===n?void 0:n.indexData,reuseValueData:null===n||void 0===n?void 0:n.valueData});c=o.maxRange,h=o.indexData,p=o.valueData;const l=g;let u=0,b=0,x=-1;for(let d=0;d<l.length;d++){const e=l[d],i=Fz(t,s,r,h,c,e,a);-1!==i&&(u++,i!==x&&(b++,x=i))}b++;const C=(null===n||void 0===n||null===(v=n.indices)||void 0===v?void 0:v.length)===u?n.indices:new Uint32Array(u),S=(null===n||void 0===n||null===(y=n.metaIndices)||void 0===y?void 0:y.length)===b?n.metaIndices:new Uint32Array(b);let w=0,M=0;x=-1;for(let d=0;d<l.length;d++){const e=l[d],i=Fz(t,s,r,h,c,e,a);-1!==i&&(i!==x&&(S[M++]=w,x=i),C[w++]=e)}S[M]=u-1,g=C,m=S,f.push({maxRange:c,metaIndices:m,indices:g,indexData:h,valueData:p})}return f.reverse(),f}var Vz=Im(function(e,t,i,n,o,s){const[r,a]=ph(e,n);return Bz([r,a],t,i,{xNeedsValueOf:o,yNeedsValueOf:s})});function Gz(e,t,i,n,o,s,r){const a=t.resolveKeysById(o,"xValue",i),l=t.resolveColumnById(o,n,i),d=t.getDomain(o,"xValue","key",i),c=t.resolveColumnNeedsValueOf(o,"xValue",i),u=t.resolveColumnNeedsValueOf(o,n,i),[h,p]=ph(e,d);return function(e,t,i,n){const o=t.length;if(o<nh)return;const[s,r]=e,{xNeedsValueOf:a,yNeedsValueOf:l,targetRange:d,existingFilters:c}=n,u=hh(t,s,r,{xNeedsValueOf:a}),h=Math.min(u,Xu(Math.max(d,sh))),p=null===c||void 0===c?void 0:c.find(e=>e.maxRange===h),{indexData:g,valueData:m}=bh(t,i,i,s,r,h,{xNeedsValueOf:a,yNeedsValueOf:l,reuseIndexData:null===p||void 0===p?void 0:p.indexData,reuseValueData:null===p||void 0===p?void 0:p.valueData}),{indices:f,metaIndices:v}=zz(t,s,r,g,h,a,o,null===p||void 0===p?void 0:p.indices,null===p||void 0===p?void 0:p.metaIndices);return{immediate:[{maxRange:h,indices:f,metaIndices:v,indexData:g,valueData:m}],computeRemaining:function(){var e;const n=Bz([s,r],t,i,{xNeedsValueOf:a,yNeedsValueOf:l,existingFilters:c});return null!==(e=null===n||void 0===n?void 0:n.filter(e=>e.maxRange!==h))&&void 0!==e?e:[]}}}([h,p],a,l,{xNeedsValueOf:c,yNeedsValueOf:u,targetRange:s,existingFilters:r})}var Hz=class extends ZE{constructor(){super(...arguments),this.xName=void 0,this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new Ah,this.shadow=new rF,this.marker=new sP,this.label=new iD,this.tooltip=dP(),this.connectMissingData=!1}};Ab([ru],Hz.prototype,"xKey",2),Ab([ru],Hz.prototype,"xName",2),Ab([ru],Hz.prototype,"yKey",2),Ab([ru],Hz.prototype,"yName",2),Ab([ru],Hz.prototype,"yFilterKey",2),Ab([ru],Hz.prototype,"normalizedTo",2),Ab([ru],Hz.prototype,"fill",2),Ab([ru],Hz.prototype,"fillOpacity",2),Ab([ru],Hz.prototype,"stroke",2),Ab([ru],Hz.prototype,"strokeWidth",2),Ab([ru],Hz.prototype,"strokeOpacity",2),Ab([ru],Hz.prototype,"lineDash",2),Ab([ru],Hz.prototype,"lineDashOffset",2),Ab([ru],Hz.prototype,"interpolation",2),Ab([ru],Hz.prototype,"styler",2),Ab([ru],Hz.prototype,"shadow",2),Ab([ru],Hz.prototype,"marker",2),Ab([ru],Hz.prototype,"label",2),Ab([ru],Hz.prototype,"tooltip",2),Ab([ru],Hz.prototype,"connectMissingData",2);var jz=class extends XE{constructor(e){super({moduleCtx:e,propertyKeys:UE,propertyNames:YE,categoryKey:"xValue",pathsPerSeries:["fill","stroke"],pathsZIndexSubOrderOffset:[0,1e3],datumSelectionGarbageCollection:!1,segmentedDataNodes:!1,pickModes:[2,0],animationResetFns:{path:OO({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:oP,datum:(e,t)=>p(p({},{opacity:1,scalingX:1,scalingY:1}),LO(0,t))},clipFocusBox:!1}),this.properties=new Hz,this.connectsToYAxis=!0,this.aggregationManager=new JO,this.backgroundGroup=new Gx({name:"".concat(this.id,"-background"),zIndex:Nh.BACKGROUND}),this._isStacked=void 0,this.fillSpans=[],this.phantomSpans=[],this.strokeSpans=[]}get pickModeAxis(){return"main"}renderToOffscreenCanvas(){return super.renderToOffscreenCanvas()||null!=this.contextNodeData&&(this.contextNodeData.fillData.spans.length>100||this.contextNodeData.strokeData.spans.length>100)}attachSeries(e,t,i){super.attachSeries(e,t,i),e.appendChild(this.backgroundGroup)}detachSeries(e,t,i){super.detachSeries(e,t,i),this.backgroundGroup.remove()}attachPaths(e){let[t,i]=e;this.backgroundGroup.appendChild(t),this.contentGroup.appendChild(i),i.zIndex=-1}detachPaths(e){let[t,i]=e;t.remove(),i.remove()}isStacked(){var e,t;return(null!==(e=null===(t=this.seriesGrouping)||void 0===t?void 0:t.stackCount)&&void 0!==e?e:1)>1}isNormalized(){return null!=this.properties.normalizedTo}setSeriesIndex(e){const t=this.isStacked()===this._isStacked;return this._isStacked=t,super.setSeriesIndex(e,t)}setZIndex(e){super.setZIndex(e),this.isStacked()?(this.backgroundGroup.zIndex=[Nh.BACKGROUND,e],this.contentGroup.zIndex=[Nh.ANY_CONTENT,e,Th.FOREGROUND]):(this.backgroundGroup.zIndex=[Nh.ANY_CONTENT,e,Th.FOREGROUND,0],this.contentGroup.zIndex=[Nh.ANY_CONTENT,e,Th.FOREGROUND,1])}async processData(e){var t,i;if(null==this.data)return;const{data:n,visible:o,seriesGrouping:{groupIndex:s=this.id,stackCount:r=1}={}}=this,{xKey:a,yKey:l,yFilterKey:d,connectMissingData:c,normalizedTo:u}=this.properties,h=!this.ctx.animationManager.isSkipped(),g=null===(t=this.axes[_u.X])||void 0===t?void 0:t.scale,m=null===(i=this.axes[_u.Y])||void 0===i?void 0:i.scale,{xScaleType:f,yScaleType:v}=this.getScaleInformation({xScale:g,yScale:m}),y=r>1||null!=u,b={value:"area-stack-".concat(s,"-yValue"),marker:"area-stack-".concat(s,"-yValues-marker")},x={invalidValue:null};(Ka(u)||c)&&r>1&&(x.invalidValue=0),o||(x.forceValue=0);const C=[sM(a,f,{id:"xValue"}),rM(l,v,p({id:"yValueRaw"},x)),...null==d?[]:[rM(d,v,{id:"yFilterRaw"})]];y&&C.push(...uM(l,"normal",p(p({id:"yValueCumulative"},x),{},{groupId:b.marker}),v)),Ka(u)&&C.push(rM(l,v,p(p({id:"yValue"},x),{},{groupId:b.value})),fM(Object.values(b),u)),h&&C.push(SM());const{dataModel:S,processedData:w}=await this.requestDataModel(e,n,{props:C,groupByKeys:y,groupByData:!y});this.aggregateData(S,w),this.animationState.transition("updateData")}xCoordinateRange(e,t){const{marker:i}=this.properties,n=this.axes[_u.X].scale.convert(e),o=i.enabled?.5*i.size*t:0;return[n-o,n+o]}yCoordinateRange(e,t){const{marker:i}=this.properties,n=this.axes[_u.Y].scale.convert(e[0]),o=i.enabled?.5*i.size*t:0;return[n-o,n+o]}yValueKey(){return this.isNormalized()?"yValue":"yValueRaw"}yCumulativeKey(e){return"grouped"===e.type?"yValueCumulative":this.yValueKey()}getSeriesDomain(e){const{dataModel:t,processedData:i,axes:n}=this;if(!t||!i)return{domain:[]};const o=n[_u.Y];if(e===_u.X){const e=t.resolveProcessedDataDefById(this,"xValue"),n=t.getDomain(this,"xValue","key",i);return"key"===(null===e||void 0===e?void 0:e.def.type)&&"category"===e.def.valueType?n:{domain:lw(Rg(n.domain))}}const s=this.domainForClippedRange(_u.Y,[this.yCumulativeKey(i)],"xValue");if(o instanceof GE&&!(o instanceof Oz)){return{domain:lw(Number.isFinite(s[1]-s[0])?[Math.min(s[0],0),Math.max(s[1],0)]:[])}}return{domain:lw(s)}}getSeriesRange(e,t){const[i,n]=this.domainForVisibleRange(_u.Y,[this.yCumulativeKey(this.processedData)],"xValue",t);return[Math.min(i,0),Math.max(n,0)]}getZoomRangeFittingItems(e,t,i){return this.zoomFittingVisibleItems("xValue",[this.yCumulativeKey(this.processedData)],e,t,i)}getVisibleItems(e,t,i){return this.countVisibleItems("xValue",[this.yCumulativeKey(this.processedData)],e,t,i)}aggregateData(e,t){if(this.aggregationManager.markStale(),eM(t))return;const i=this.axes[_u.X];if(null==i)return;const n=this.estimateTargetRange();this.aggregationManager.aggregate({computePartial:o=>Gz(i.scale.type,e,t,this.yCumulativeKey(t),this,n,o),computeFull:n=>function(e,t,i,n,o,s){const r=t.resolveKeysById(o,"xValue",i),a=t.resolveColumnById(o,n,i),l=t.getDomain(o,"xValue","key",i),d=t.resolveColumnNeedsValueOf(o,"xValue",i),c=t.resolveColumnNeedsValueOf(o,n,i);if(s){const[t,i]=ph(e,l);return Bz([t,i],r,a,{xNeedsValueOf:d,yNeedsValueOf:c,existingFilters:s})}return Vz(e,r,a,l,d,c)}(i.scale.type,e,t,this.yCumulativeKey(t),this,n),targetRange:n});const o=this.aggregationManager.filters;o&&o.length>0&&sa.record("".concat(this.type,":aggregation"),o.map(e=>e.maxRange))}estimateTargetRange(){var e,t,i;const n=this.axes[_u.X];if(null!==n&&void 0!==n&&null!==(e=n.scale)&&void 0!==e&&e.range){const[e,t]=n.scale.range;return Math.abs(t-e)}return null!==(t=null===(i=this.ctx.scene)||void 0===i||null===(i=i.canvas)||void 0===i?void 0:i.width)&&void 0!==t?t:800}stackAggregatedData(e){var t,i;const{indices:n,metaIndices:o}=e,{visible:s,axes:r,dataModel:a,processedData:l,seriesBelowStackContext:d}=this,c=r[_u.X],u=r[_u.Y];if(!s)return this.phantomSpans=[],this.fillSpans=[],this.strokeSpans=[],d;if(null==c||null==u||null==a||null==l)return;const{scale:h}=c,{scale:p}=u,g=(null!==(t=h.bandwidth)&&void 0!==t?t:0)/2,m=!this.isStacked()&&this.properties.connectMissingData,f=null===(i=l.invalidData)||void 0===i?void 0:i.get(this.id),v=a.resolveKeysById(this,"xValue",l),y=a.resolveColumnById(this,this.yCumulativeKey(l),l);let[b,x]=JM(1,o.length-1,c.range,e=>{const t=o[e],i=o[e+1],s=n[t],r=n[i],a=v[s],l=v[r],{0:d}=this.xCoordinateRange(a,0),{1:c}=this.xCoordinateRange(l,0);return[d,c]});b=Math.max(b-1,0),x=Math.min(x+1,o.length-1);let C=[];if(null!==d&&void 0!==d&&d.fillSpans)C=null===d||void 0===d?void 0:d.fillSpans;else for(let k=b;k<x;k+=1){const e=o[k],t=o[k+1],i=n[e],s=n[t],r=v[i],a=v[s],l={type:"linear",moveTo:!1,x0:h.convert(r)+g,y0:p.convert(0),x1:h.convert(a)+g,y1:p.convert(0)};C.push({span:l,xValue0:r,xValue1:a,yValue0:0,yValue1:0})}this.phantomSpans=C;const S=[],w=[];let M=0;for(let k=b;k<x;k+=1){const e=o[k],t=o[k+1],i=n[e],s=n[t],r=!m&&this.hasInvalidDatumsInRange(f,y,i,s),a=C[M++];if(r){S.push(a),w.push(a);continue}const l=[];for(let o=e;o<=t;o++){const e=n[o];if(null!==f&&void 0!==f&&f[e])continue;const t=y[e];if(!Number.isFinite(t))continue;const i=v[e];l.push({point:{x:h.convert(i)+g,y:p.convert(t)},xDatum:i,yDatum:t})}if(l.length<2){S.push(a),w.push(a);continue}const d=l[0],c=l.at(-1),u=l.slice(1,-1).map(e=>e.point),b={span:{type:"multi-line",moveTo:!1,x0:d.point.x,y0:d.point.y,x1:c.point.x,y1:c.point.y,midPoints:u},xValue0:d.xDatum,xValue1:c.xDatum,yValue0:d.yDatum,yValue1:c.yDatum};S.push(b),w.push(b)}return this.fillSpans=S,this.strokeSpans=w,{stack:[],fillSpans:S,strokeSpans:w}}hasInvalidDatumsInRange(e,t,i,n){const o=Math.min(i,n),s=Math.max(i,n);for(let r=o;r<=s;r++){if(null!==e&&void 0!==e&&e[r])return!0;const i=t[r];if(!Number.isFinite(i))return!0}return!1}stackYValueData(){var e,t,i;const{visible:n,axes:o,dataModel:s,processedData:r,seriesBelowStackContext:a,properties:l}=this,d=o[_u.X],c=o[_u.Y];if(null==d||null==c||null==s||null==r)return;const{interpolation:u}=l,{scale:h}=d,{scale:p}=c,g=(null!==(e=h.bandwidth)&&void 0!==e?e:0)/2;let m=s.resolveKeysById(this,"xValue",r),f=s.resolveColumnById(this,this.yValueKey(),r);const v=!this.isStacked()&&this.properties.connectMissingData,y=null===(t=r.invalidKeys)||void 0===t?void 0:t.get(this.id),b=v?null===(i=r.invalidData)||void 0===i?void 0:i.get(this.id):void 0,x=null!==b&&void 0!==b?b:y;null!=x&&(m=m.filter((e,t)=>!1===x[t]),f=f.filter((e,t)=>!1===x[t]));let C,[S,w]=JM(1,m.length,d.range,e=>this.xCoordinateRange(m[e],0));if(S=Math.max(S-2,0),w=Math.min(w+2,m.length),null!==a&&void 0!==a&&a.fillSpans)C=null===a||void 0===a?void 0:a.fillSpans;else{const e=[];for(let t=S;t<w;t+=1){const i=m[t];e.push({point:{x:h.convert(i)+g,y:p.convert(0)},xDatum:i,yDatum:0})}C=rO(e,{type:"linear"})}if(this.phantomSpans=C,!n)return this.fillSpans=C,this.strokeSpans=[],a;let M=null===a||void 0===a?void 0:a.stack;if(null==M){M=[];for(let e=S;e<w-1;e+=1)M.push({leading:0,trailing:0,dataValid:!0,breakBefore:!1})}const k=M.slice();let D=!1;for(let N=0;N<k.length;N+=1){const e=S+N,t=S+N+1;let{leading:i,trailing:n,breakBefore:o}=M[N];const s=f[e],r=f[t],a=!Number.isFinite(s),l=!Number.isFinite(r),d=!a&&!l;d&&(i+=s,n+=r),0!==N&&d!==D&&(o=!0),D=d,k[N]={leading:i,trailing:n,dataValid:d,breakBefore:o}}const I=[],A=[],L=[];for(let N=0;N<k.length;N+=1){const{leading:e,dataValid:t,breakBefore:i}=k[N],n=S+N;if(i){if(0!==L.length){const e=k[N-1],t={point:{x:h.convert(m[n])+g,y:p.convert(e.trailing)},xDatum:m[n],yDatum:e.trailing};L.push(t);const i=rO(L,u);I.push(...i),A.push(...i)}L.length=0}if(t){const t={point:{x:h.convert(m[n])+g,y:p.convert(e)},xDatum:m[n],yDatum:e};L.push(t)}else I.push(C[N])}if(0!==L.length){const e=k.at(-1),t=S+k.length,i={point:{x:h.convert(m[t])+g,y:p.convert(e.trailing)},xDatum:m[t],yDatum:e.trailing};L.push(i);const n=rO(L,u);I.push(...n),A.push(...n),L.length=0}return this.fillSpans=I,this.strokeSpans=A,{stack:k,fillSpans:I,strokeSpans:A}}createStackContext(){const e=this.axes[_u.X];if(null==e)return;const{scale:t}=e,[i,n]=t.range,o=Math.abs(n-i);this.aggregationManager.ensureLevelForRange(o);const s=this.aggregationManager.getFilterForRange(o);return s?this.stackAggregatedData(s):this.stackYValueData()}createNodeDatumContext(e,t){var i,n,o,s,r,a,l,d;const{dataModel:c,processedData:u}=this;if(!c||!u)return;const{xKey:h,xName:p,yFilterKey:g,yKey:m,yName:f,legendItemName:v,marker:y,label:b,fill:x,stroke:C,normalizedTo:S}=this.properties,w=e.scale,M=t.scale,{isContinuousY:k}=this.getScaleInformation({xScale:w,yScale:M}),D="grouped"===u.type,[I,A]=w.range,L=Math.abs(A-I);this.aggregationManager.ensureLevelForRange(L);const N=this.aggregationManager.getFilterForRange(L),T=null===(i=this.contextNodeData)||void 0===i?void 0:i.nodeData,R=null!=T&&(null!=u.changeDescription||!eM(u)||null!=N);return{rawData:null!==(n=null===(o=u.dataSources.get(this.id))||void 0===o?void 0:o.data)&&void 0!==n?n:[],xValues:c.resolveKeysById(this,"xValue",u),yRawValues:c.resolveColumnById(this,"yValueRaw",u),yCumulativeValues:D?c.resolveColumnById(this,"yValueCumulative",u):c.resolveColumnById(this,"yValueRaw",u),yFilterValues:null==g?void 0:c.resolveColumnById(this,"yFilterRaw",u),invalidData:null===(s=u.invalidData)||void 0===s?void 0:s.get(this.id),xScale:w,yScale:M,xOffset:(null!==(r=w.bandwidth)&&void 0!==r?r:0)/2,indices:null===N||void 0===N?void 0:N.indices,isContinuousY:k,labelsEnabled:b.enabled,normalizedTo:S,canIncrementallyUpdate:R,xKey:h,yKey:m,xName:p,yName:f,legendItemName:v,markerSize:y.size,markerFill:null!==(a=y.fill)&&void 0!==a?a:x,markerStroke:null!==(l=y.stroke)&&void 0!==l?l:C,markerStrokeWidth:null!==(d=y.strokeWidth)&&void 0!==d?d:this.properties.strokeWidth,yDomain:this.getSeriesDomain(_u.Y).domain,markerData:R?T:[],labelData:[],nodeIndex:0,crossFiltering:!1}}computeMarkerCoordinate(e,t){let i;(Ka(e.normalizedTo)?e.isContinuousY&&dv(t.yDatum):!Number.isNaN(t.yDatum))&&(i=t.yCumulative),t.x=e.xScale.convert(t.xDatum)+e.xOffset,t.y=e.yScale.convert(i)}handleDatum(e,t,i){var n;if(t.xDatum=e.xValues[i],null!=t.xDatum){if(t.datum=e.rawData[i],t.yDatum=e.yRawValues[i],t.yCumulative=+e.yCumulativeValues[i],t.validPoint=Number.isFinite(t.yDatum)&&!0!==(null===(n=e.invalidData)||void 0===n?void 0:n[i]),this.computeMarkerCoordinate(e,t),t.selected=null==e.yFilterValues?void 0:e.yFilterValues[i]===t.yDatum,!1===t.selected&&(e.crossFiltering=!0),t.validPoint){if(e.canIncrementallyUpdate&&e.nodeIndex<e.markerData.length){const n=e.markerData[e.nodeIndex];n.datum=t.datum,n.datumIndex=i,n.midPoint={x:t.x,y:t.y},n.cumulativeValue=t.yCumulative,n.yValue=t.yDatum,n.xValue=t.xDatum,n.point={x:t.x,y:t.y,size:e.markerSize},n.selected=t.selected}else e.markerData.push({series:this,itemId:e.yKey,datum:t.datum,datumIndex:i,midPoint:{x:t.x,y:t.y},cumulativeValue:t.yCumulative,yValue:t.yDatum,xValue:t.xDatum,yKey:e.yKey,xKey:e.xKey,point:{x:t.x,y:t.y,size:e.markerSize},fill:e.markerFill,stroke:e.markerStroke,strokeWidth:e.markerStrokeWidth,selected:t.selected});e.nodeIndex++}if(e.labelsEnabled&&t.validPoint){const n=this.getLabelText(t.yDatum,t.datum,e.yKey,"y",e.yDomain,this.properties.label,{value:t.yDatum,datum:t.datum,xKey:e.xKey,yKey:e.yKey,xName:e.xName,yName:e.yName,legendItemName:e.legendItemName});e.labelData.push({series:this,itemId:e.yKey,datum:t.datum,datumIndex:i,x:t.x,y:t.y,labelText:n})}}}createNodeData(){var e,t;const{axes:i,data:n,processedData:o}=this,s=i[_u.X],r=i[_u.Y];if(!s||!r||!n||!o)return;const a=this.createNodeDatumContext(s,r);if(!a)return;const l={datum:void 0,xDatum:void 0,yDatum:void 0,yCumulative:0,selected:void 0,x:0,y:0,validPoint:!1};let[d,c]=this.visibleRangeIndices("xValue",s.range,a.indices);d=Math.max(d-2,0),c=Math.min(c+2,null!==(e=null===(t=a.indices)||void 0===t?void 0:t.length)&&void 0!==e?e:a.xValues.length),o.input.count<1e3&&(d=0,c=o.input.count);for(let m=d;m<c;m+=1){var u,h;const e=null!==(u=null===(h=a.indices)||void 0===h?void 0:h[m])&&void 0!==u?u:m;this.handleDatum(a,l,e)}a.canIncrementallyUpdate&&a.nodeIndex<a.markerData.length&&(a.markerData.length=a.nodeIndex);const{visibleSameStackCount:p}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this),g=yE(this.properties.segmentation,s,r,this.chart.seriesRect,this.ctx.scene,!1);return{itemId:a.yKey,fillData:{spans:this.fillSpans,phantomSpans:this.phantomSpans},strokeData:{spans:this.strokeSpans},labelData:a.labelData,nodeData:a.markerData,scales:this.calculateScaling(),visible:this.visible,stackVisible:p>0,crossFiltering:a.crossFiltering,styles:RO(this,this.properties,this.properties.marker),segments:g}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(e){var t,i;const{paths:[n,o],visible:s,animationEnabled:r}=e,a=!0===(null===(t=this.contextNodeData)||void 0===t?void 0:t.crossFiltering),l=null===(i=this.contextNodeData)||void 0===i?void 0:i.segments,d=xu(this.getHighlightStyle(),this.getStyle()),{strokeWidth:c,stroke:u,strokeOpacity:h,lineDash:p,lineDashOffset:g,fill:m,fillOpacity:f,opacity:v}=d;o.setProperties({segments:l,fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:1,stroke:u,strokeWidth:c,strokeOpacity:h*(a?.25:1),lineDash:p,lineDashOffset:g,opacity:v,visible:s||r}),o.datum=l,n.setStyleProperties({fill:m,stroke:void 0,fillOpacity:f*(a?.125:1)},this.getShapeFillBBox()),n.setProperties({segments:l,lineJoin:"round",pointerEvents:1,fillShadow:this.properties.shadow,opacity:v,visible:s||r}),n.datum=l,FO(this,o),FO(this,n)}updatePaths(e){this.updateAreaPaths(e.paths,e.contextData)}updateAreaPaths(e,t){for(const i of e)i.visible=t.visible;if(t.visible)this.updateFillPath(e,t),this.updateStrokePath(e,t);else for(const i of e)i.path.clear(),i.markDirty("AreaSeries")}updateFillPath(e,t){const[i]=e;i.path.clear(),xO(i,t.fillData),i.markDirty("AreaSeries")}updateStrokePath(e,t){const{spans:i}=t.strokeData,[,n]=e;n.path.clear(),lO(n,i),n.markDirty("AreaSeries")}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,{contextNodeData:n,processedData:o,axes:s,properties:r}=this,{marker:a,styler:l}=r,d=l?this.getStyle().marker:void 0,c=!0===(null===n||void 0===n?void 0:n.crossFiltering)||TO(o.input.count,s[_u.X].scale,a,d);a.isDirty()&&(i.clear(),i.cleanup());const u=c?t:[];return eM(this.processedData)?i.update(u,void 0,e=>AM(e.xValue)):i.update(u)}updateDatumStyles(e){const{datumSelection:t,isHighlight:i}=e,{marker:n}=this.properties,o=this.ctx.highlightManager.getActiveHighlight();t.each((s,r)=>{if(!t.isGarbage(s)){const t=this.getHighlightState(o,e.isHighlight,r.datumIndex),s=this.getStyle(t),{stroke:a,strokeWidth:l,strokeOpacity:d}=s,c=this.makeItemStylerParams(this.dataModel,this.processedData,r.datumIndex,s.marker);r.style=this.getMarkerStyle(n,r,c,{isHighlight:i,highlightState:t},s.marker,{stroke:a,strokeWidth:l,strokeOpacity:d})}})}updateDatumNodes(e){const{contextNodeData:t}=this;if(!t)return;const{datumSelection:i,isHighlight:n}=e,o=this.getShapeFillBBox(),s=this.ctx.highlightManager.getActiveHighlight();i.each((e,i)=>{var r;const a=null!==(r=i.style)&&void 0!==r?r:t.styles[this.getHighlightState(s,n,i.datumIndex)];this.applyMarkerStyle(a,e,i.point,o,{selected:i.selected})}),n||this.properties.marker.markClean()}updateLabelSelection(e){return e.labelSelection.update(this.isLabelEnabled()?e.labelData:[])}updateLabelNodes(e){var t;const{isHighlight:i=!1}=e,n=null===(t=this.ctx.highlightManager)||void 0===t?void 0:t.getActiveHighlight(),o=this.makeLabelFormatterParams();e.labelSelection.each((e,t)=>{const s=QE(this,t,o,this.properties.label,i,n),{enabled:r,fontStyle:a,fontWeight:l,fontSize:d,fontFamily:c,color:u}=s;var h;r&&null!==t&&void 0!==t&&t.labelText?(e.fontStyle=a,e.fontWeight=l,e.fontSize=d,e.fontFamily=c,e.textAlign="center",e.textBaseline="bottom",e.text=t.labelText,e.x=t.x,e.y=t.y-10,e.fill=u,e.visible=!0,e.fillOpacity=null!==(h=this.getHighlightStyle(i,t.datumIndex).opacity)&&void 0!==h?h:1,e.setBoxing(s)):e.visible=!1})}makeStylerParams(e){const{id:t}=this,{marker:i,fill:n,fillOpacity:o,lineDash:s,lineDashOffset:r,stroke:a,strokeOpacity:l,strokeWidth:d,xKey:c,yKey:u}=this.properties,h=jM(null!==e&&void 0!==e?e:0);return{marker:{fill:i.fill,fillOpacity:i.fillOpacity,size:i.size,shape:i.shape,stroke:i.stroke,strokeOpacity:i.strokeOpacity,strokeWidth:i.strokeWidth,lineDash:i.lineDash,lineDashOffset:i.lineDashOffset},highlightState:h,fill:n,fillOpacity:o,lineDash:s,lineDashOffset:r,seriesId:t,stroke:a,strokeOpacity:l,strokeWidth:d,xKey:c,yKey:u}}makeItemStylerParams(e,t,i,n){var o;const{xKey:s,yKey:r}=this.properties,a=e.resolveKeysById(this,"xValue",t)[i],l=e.resolveColumnById(this,"yValueRaw",t)[i],d=e.getDomain(this,"xValue","key",t).domain,c=e.getDomain(this,this.yCumulativeKey(t),"value",t).domain,u=null!==(o=this.filterItemStylerFillParams(n.fill))&&void 0!==o?o:n.fill;return p(p(p({},QM(a,l,s,r,d,c)),{},{xValue:a,yValue:l},n),{},{fill:u})}makeLabelFormatterParams(){const{xKey:e,xName:t,yKey:i,yName:n,legendItemName:o}=this.properties;return{xKey:e,xName:t,yKey:i,yName:n,legendItemName:o}}getTooltipContent(e){var t;const{id:i,dataModel:n,processedData:o,axes:s,properties:r}=this,{xKey:a,xName:l,yKey:d,yName:c,tooltip:u,legendItemName:h}=r,g=s[_u.X],m=s[_u.Y];if(!n||!o||!g||!m)return;const f=null===(t=o.dataSources.get(this.id))||void 0===t||null===(t=t.data)||void 0===t?void 0:t[e],v=n.resolveKeysById(this,"xValue",o)[e],y=n.resolveColumnById(this,"yValueRaw",o)[e];if(null==v)return;const b=this.getStyle(),x=this.makeItemStylerParams(n,o,e,b.marker),C=this.getMarkerStyle(this.properties.marker,{datumIndex:e,datum:f},x,{isHighlight:!1},b.marker);return this.formatTooltipWithContext(u,{heading:this.getAxisValueText(g,"tooltip",v,f,a,h),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:d,value:this.getAxisValueText(m,"tooltip",y,f,d,h),missing:VI(y)}]},p(p({seriesId:i,datum:f,title:c,xKey:a,xName:l,yKey:d,yName:c},C),this.getModuleTooltipParams()))}legendItemSymbol(){const{fill:e,stroke:t,fillOpacity:i,strokeOpacity:n,strokeWidth:o,lineDash:s,marker:r}=this.getStyle(),a=!r.enabled||null==r.fill,l=a?e:r.fill;return{marker:p(p({},this.getMarkerStyle(this.properties.marker,{},void 0,{isHighlight:!1,checkForHighlight:!1},{size:r.size,shape:r.shape,fill:l,fillOpacity:a?i:r.fillOpacity,stroke:r.stroke})),{},{enabled:r.enabled||o<=0}),line:{enabled:!0,stroke:t,strokeOpacity:n,strokeWidth:o,lineDash:s}}}getLegendData(e){var t;if("category"!==e)return[];const{id:i,ctx:{legendManager:n},visible:o}=this,{yKey:s,yName:r,legendItemName:a,showInLegend:l}=this.properties;return[{legendType:e,id:i,itemId:s,legendItemName:a,seriesId:i,enabled:o&&n.getItemEnabled({seriesId:i,itemId:s}),label:{text:null!==(t=null!==a&&void 0!==a?a:r)&&void 0!==t?t:s},symbol:this.legendItemSymbol(),hideInLegend:!l}]}resetDatumAnimation(e){AO([e.datumSelection])}animateEmptyUpdateReady(e){const{datumSelection:t,labelSelection:i,contextData:n,paths:o}=e,{animationManager:s}=this.ctx;this.updateAreaPaths(o,n),EO(this,s,...o),Qk([t],LO),DO(this,s,t),iP(this,"labels",s,i)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateAreaPaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){const{animationManager:t}=this.ctx,{datumSelection:i,labelSelection:n,contextData:o,paths:s,previousContextData:r}=e,[a,l]=s;if(!1===o.visible&&!1===(null===r||void 0===r?void 0:r.visible))return;if(null==a&&null==l)return;this.resetDatumAnimation(e),this.resetLabelAnimation(e);const d=()=>{this.resetPathAnimation(e),this.updateAreaPaths(s,o)},c=()=>{t.skipCurrentBatch(),d()};if(null==o||null==r)return d(),kO(this,t,"added",i),PO(this,"fill_path_properties",t,"add",a),PO(this,"stroke_path_properties",t,"add",l),void iP(this,"labels",t,n);if(o.crossFiltering!==r.crossFiltering)return void c();const u=function(e,t){var i,n;if("category"===(null===(i=e.scales.x)||void 0===i?void 0:i.type)!==("category"===(null===(n=t.scales.x)||void 0===n?void 0:n.type))||!vy(e.scales.x)||!vy(t.scales.x))return;let o="updated";t.visible&&!e.visible?o="removed":!t.visible&&e.visible&&(o="added");const s=sO({scales:e.scales,data:e.fillData.spans},{scales:t.scales,data:t.fillData.spans},0);if(null==s)return;const r=sO({scales:e.scales,data:e.fillData.phantomSpans},{scales:t.scales,data:t.fillData.phantomSpans},0);if(null==r)return;const a=sO({scales:e.scales,data:e.strokeData.spans,zeroData:e.fillData.phantomSpans},{scales:t.scales,data:t.strokeData.spans,zeroData:t.fillData.phantomSpans},0);if(null==a)return;const l="none";return{status:o,fill:SO(o,s,r,l),stroke:cO(o,a,l)}}(o,r);void 0!==u?"no-op"!==u.status&&(kO(this,t,void 0,i),$k(this.id,"fill_path_properties",t,[a],u.fill.pathProperties),sF(this.id,"fill_path_update",t,[a],u.fill.path),$k(this.id,"stroke_path_properties",t,[l],u.stroke.pathProperties),sF(this.id,"stroke_path_update",t,[l],u.stroke.path),iP(this,"labels",t,n),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(s,o)})):c()}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new FI}getStyle(e){var t,i,n,o,s,r,a,l,d,c,u,h,p,g,m,f,v,y,b,x,C,S,w;const{styler:M,marker:k,fill:D,fillOpacity:I,lineDash:A,lineDashOffset:L,stroke:N,strokeOpacity:T,strokeWidth:R}=this.properties,{size:E,shape:P,fill:O="transparent",fillOpacity:F}=k;let z={};if(M){var B;const t=this.makeStylerParams(e),i=null!==(B=this.cachedCallWithContext(M,t))&&void 0!==B?B:{},n=this.ctx.optionsGraphService.resolvePartial(["series","".concat(this.declarationOrder)],i,{pick:!1});z=null!==n&&void 0!==n?n:{}}return null!==(t=z.marker)&&void 0!==t||(z.marker={}),{fill:null!==(i=z.fill)&&void 0!==i?i:D,fillOpacity:null!==(n=z.fillOpacity)&&void 0!==n?n:I,lineDash:null!==(o=z.lineDash)&&void 0!==o?o:A,lineDashOffset:null!==(s=z.lineDashOffset)&&void 0!==s?s:L,stroke:null!==(r=z.stroke)&&void 0!==r?r:N,strokeOpacity:null!==(a=z.strokeOpacity)&&void 0!==a?a:T,strokeWidth:null!==(l=z.strokeWidth)&&void 0!==l?l:R,marker:{enabled:null!==(d=z.marker.enabled)&&void 0!==d?d:k.enabled,fill:null!==(c=z.marker.fill)&&void 0!==c?c:O,fillOpacity:null!==(u=z.marker.fillOpacity)&&void 0!==u?u:F,shape:null!==(h=z.marker.shape)&&void 0!==h?h:P,size:null!==(p=z.marker.size)&&void 0!==p?p:E,lineDash:null!==(g=null!==(m=z.marker.lineDash)&&void 0!==m?m:k.lineDash)&&void 0!==g?g:A,lineDashOffset:null!==(f=null!==(v=z.marker.lineDashOffset)&&void 0!==v?v:k.lineDashOffset)&&void 0!==f?f:L,stroke:null!==(y=null!==(b=z.marker.stroke)&&void 0!==b?b:k.stroke)&&void 0!==y?y:N,strokeOpacity:null!==(x=null!==(C=z.marker.strokeOpacity)&&void 0!==C?C:k.strokeOpacity)&&void 0!==x?x:T,strokeWidth:null!==(S=null!==(w=z.marker.strokeWidth)&&void 0!==w?w:k.strokeWidth)&&void 0!==S?S:R}}}getFormattedMarkerStyle(e){const t=this.getStyle(),i=this.makeItemStylerParams(this.dataModel,this.processedData,e.datumIndex,t.marker);return this.getMarkerStyle(this.properties.marker,e,i,{isHighlight:!0},void 0,t)}computeFocusBounds(e){return NO(this,e)}hasItemStylers(){return null!=this.properties.styler||null!=this.properties.marker.itemStyler||null!=this.properties.label.itemStyler}};jz.className="AreaSeries",jz.type="area";var Wz={series:{nodeClickRange:"nearest",fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",DA],["image",GA],["pattern",OA]]},stroke:{$palette:"stroke"},fillOpacity:.8,strokeOpacity:1,strokeWidth:{$isUserOption:["./stroke",2,0]},lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:Hh,xOffset:3,yOffset:3,blur:5},interpolation:{type:"linear"},marker:{enabled:!1,shape:"circle",size:7,strokeWidth:{$isUserOption:["./stroke",1,0]},fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",TA],["pattern",OA]]},stroke:{$palette:"stroke"}},label:p(p({},WA),{},{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}),tooltip:{range:{$path:["/tooltip/range","nearest"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","node"]}}},highlight:{enabled:!0,unhighlightedSeries:{opacity:.2}},segmentation:$A}},_z={type:"series",name:"area",chartType:"cartesian",stackable:!0,version:GC,dependencies:[uz],options:fN,predictAxis:CE,defaultAxes:{y:{type:zh.NUMBER,position:Fh.LEFT},x:{type:zh.CATEGORY,position:Fh.BOTTOM}},axisKeys:{[_u.X]:"xKeyAxis",[_u.Y]:"yKeyAxis"},themeTemplate:Wz,create:e=>new jz(e)},Kz=class extends pC{constructor(){super(...arguments),this.direction="x",this.featherRatio=0}setStaticProperties(e,t,i,n,o,s,r,a,l,d){this.__direction=null!==l&&void 0!==l?l:"x",this.__featherRatio=null!==d&&void 0!==d?d:0,super.setStaticProperties(e,t,i,n,o,s,r,a)}get feathered(){return Math.abs(this.featherRatio)>.001}isPointInPath(e,t){if(!this.feathered)return super.isPointInPath(e,t);return this.getBBox().containsPoint(e,t)}updatePath(){if(!this.feathered)return void super.updatePath();const{path:e,borderPath:t,__direction:i,__featherRatio:n,__x:o,__y:s,__width:r,__height:a}=this;if(e.clear(),t.clear(),"x"===i){const t=Math.abs(n)*r;n>0?(e.moveTo(o,s),e.lineTo(o+r-t,s),e.lineTo(o+r,s+a/2),e.lineTo(o+r-t,s+a),e.lineTo(o,s+a),e.closePath()):(e.moveTo(o+t,s),e.lineTo(o+r,s),e.lineTo(o+r,s+a),e.lineTo(o+t,s+a),e.lineTo(o,s+a/2),e.closePath())}else{const t=Math.abs(n)*a;n>0?(e.moveTo(o,s+t),e.lineTo(o+r/2,s),e.lineTo(o+r,s+t),e.lineTo(o+r,s+a),e.lineTo(o,s+a),e.closePath()):(e.moveTo(o,s),e.lineTo(o+r,s),e.lineTo(o+r,s+a-t),e.lineTo(o+r/2,s+a),e.lineTo(o,s+a-t),e.closePath())}}renderStroke(e){if(!this.feathered)return void super.renderStroke(e);const{__stroke:t,__strokeWidth:i,__lineDash:n,__lineDashOffset:o,__lineCap:s,__lineJoin:r,path:a}=this;if(t&&i){const{globalAlpha:t}=e;this.applyStrokeAndAlpha(e),e.lineWidth=i,n&&e.setLineDash(n),o&&(e.lineDashOffset=o),s&&(e.lineCap=s),r&&(e.lineJoin=r),e.stroke(a.getPath2D()),e.globalAlpha=t}}};function Uz(e,t,i,n,o){if(t.length<nh)return;const[s,r]=e,{smallestKeyInterval:a,xNeedsValueOf:l,yNeedsValueOf:d,existingFilters:c}=o;let u=hh(t,s,r,{smallestKeyInterval:a,xNeedsValueOf:l});const h=null===c||void 0===c?void 0:c.find(e=>e.maxRange===u);let{indexData:p,valueData:g,negativeIndexData:m,negativeValueData:f}=bh(t,n,null!==i&&void 0!==i?i:n,s,r,u,{split:!0,xNeedsValueOf:l,yNeedsValueOf:d,reuseIndexData:null===h||void 0===h?void 0:h.positiveIndexData,reuseValueData:null===h||void 0===h?void 0:h.positiveValueData,reuseNegativeIndexData:null===h||void 0===h?void 0:h.negativeIndexData,reuseNegativeValueData:null===h||void 0===h?void 0:h.negativeValueData});if(!m||!f)throw new Error("Negative aggregation data missing in split mode");let v=Ch(u,p,null===h||void 0===h?void 0:h.positiveIndices),y=Ch(u,m,null===h||void 0===h?void 0:h.negativeIndices);const b=[{maxRange:u,positiveIndices:v,positiveIndexData:p,positiveValueData:g,negativeIndices:y,negativeIndexData:m,negativeValueData:f}];for(;u>64;){var x,C;const e=u,t=Math.trunc(e/2),i=null===c||void 0===c?void 0:c.find(e=>e.maxRange===t),n=xh(p,g,e,{reuseIndexData:null===i||void 0===i?void 0:i.positiveIndexData,reuseValueData:null===i||void 0===i?void 0:i.positiveValueData}),o=xh(m,f,e,{reuseIndexData:null===i||void 0===i?void 0:i.negativeIndexData,reuseValueData:null===i||void 0===i?void 0:i.negativeValueData});u=n.maxRange,p=n.indexData,g=n.valueData,v=null!==(x=n.midpointData)&&void 0!==x?x:Ch(u,p,null===i||void 0===i?void 0:i.positiveIndices),m=o.indexData,f=o.valueData,y=null!==(C=o.midpointData)&&void 0!==C?C:Ch(u,m,null===i||void 0===i?void 0:i.negativeIndices),b.push({maxRange:u,positiveIndices:v,positiveIndexData:p,positiveValueData:g,negativeIndices:y,negativeIndexData:m,negativeValueData:f})}return b.reverse(),b}Ab([$y()],Kz.prototype,"direction",2),Ab([$y()],Kz.prototype,"featherRatio",2);var Yz=Im(function(e,t,i,n,o,s,r,a){const[l,d]=ph(e,o);return Uz([l,d],t,i,n,{smallestKeyInterval:s,xNeedsValueOf:r,yNeedsValueOf:a})});function $z(e,t,i,n,o,s){var r;const a=t.resolveKeysById(n,"xValue",i),l=t.hasColumnById(n,"yValue-start"),d=l?t.resolveColumnById(n,"yValue-start",i):void 0,c=l?t.resolveColumnById(n,"yValue-end",i):t.resolveColumnById(n,"yValue-raw",i),u=t.getDomain(n,"xValue","key",i),h=t.resolveColumnNeedsValueOf(n,"xValue",i),p=t.resolveColumnNeedsValueOf(n,l?"yValue-end":"yValue-raw",i),[g,m]=ph(e,u);return function(e,t,i,n,o){if(t.length<nh)return;const[s,r]=e,{smallestKeyInterval:a,xNeedsValueOf:l,yNeedsValueOf:d,targetRange:c,existingFilters:u}=o,h=hh(t,s,r,{smallestKeyInterval:a,xNeedsValueOf:l}),p=Math.min(h,Xu(Math.max(c,sh))),g=null===u||void 0===u?void 0:u.find(e=>e.maxRange===p),{indexData:m,valueData:f,negativeIndexData:v,negativeValueData:y}=bh(t,n,null!==i&&void 0!==i?i:n,s,r,p,{split:!0,xNeedsValueOf:l,yNeedsValueOf:d,reuseIndexData:null===g||void 0===g?void 0:g.positiveIndexData,reuseValueData:null===g||void 0===g?void 0:g.positiveValueData,reuseNegativeIndexData:null===g||void 0===g?void 0:g.negativeIndexData,reuseNegativeValueData:null===g||void 0===g?void 0:g.negativeValueData});if(!v||!y)throw new Error("Negative aggregation data missing in split mode");return{immediate:[{maxRange:p,positiveIndices:Ch(p,m,null===g||void 0===g?void 0:g.positiveIndices),positiveIndexData:m,positiveValueData:f,negativeIndices:Ch(p,v,null===g||void 0===g?void 0:g.negativeIndices),negativeIndexData:v,negativeValueData:y}],computeRemaining:function(){var e;const o=Uz([s,r],t,i,n,{smallestKeyInterval:a,xNeedsValueOf:l,yNeedsValueOf:d,existingFilters:u});return null!==(e=null===o||void 0===o?void 0:o.filter(e=>e.maxRange!==p))&&void 0!==e?e:[]}}}([g,m],a,d,c,{smallestKeyInterval:null===(r=i.reduced)||void 0===r?void 0:r.smallestKeyInterval,xNeedsValueOf:h,yNeedsValueOf:p,targetRange:o,existingFilters:s})}var Zz=class extends iD{constructor(){super(...arguments),this.placement="inside-center",this.spacing=0}};Ab([ru],Zz.prototype,"placement",2),Ab([ru],Zz.prototype,"spacing",2);var Xz=class extends NP{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.crisp=void 0,this.shadow=new rF,this.label=new Zz,this.tooltip=dP(),this.sparklineMode=!1}};Ab([ru],Xz.prototype,"xKey",2),Ab([ru],Xz.prototype,"xName",2),Ab([ru],Xz.prototype,"yKey",2),Ab([ru],Xz.prototype,"yName",2),Ab([ru],Xz.prototype,"yFilterKey",2),Ab([ru],Xz.prototype,"stackGroup",2),Ab([ru],Xz.prototype,"normalizedTo",2),Ab([ru],Xz.prototype,"fill",2),Ab([ru],Xz.prototype,"fillOpacity",2),Ab([ru],Xz.prototype,"stroke",2),Ab([ru],Xz.prototype,"strokeWidth",2),Ab([ru],Xz.prototype,"strokeOpacity",2),Ab([ru],Xz.prototype,"lineDash",2),Ab([ru],Xz.prototype,"lineDashOffset",2),Ab([ru],Xz.prototype,"cornerRadius",2),Ab([ru],Xz.prototype,"crisp",2),Ab([ru],Xz.prototype,"styler",2),Ab([ru],Xz.prototype,"itemStyler",2),Ab([ru],Xz.prototype,"simpleItemStyler",2),Ab([ru],Xz.prototype,"shadow",2),Ab([ru],Xz.prototype,"label",2),Ab([ru],Xz.prototype,"tooltip",2),Ab([ru],Xz.prototype,"sparklineMode",2);var qz=class extends TP{constructor(e){super({moduleCtx:e,propertyKeys:UE,propertyNames:YE,categoryKey:"xValue",pickModes:[2,1,0],pathsPerSeries:[],datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:vO,label:oP}}),this.properties=new Xz,this.connectsToYAxis=!0,this.aggregationManager=new JO,this.phantomGroup=this.contentGroup.appendChild(new Gx({name:"phantom",zIndex:-1})),this.phantomSelection=Jk.select(this.phantomGroup,()=>this.nodeFactory(),!1),this.phantomHighlightGroup=this.highlightGroup.appendChild(new Gx({name:"".concat(this.internalId,"-highlight-node")})),this.phantomHighlightSelection=Jk.select(this.phantomHighlightGroup,()=>this.nodeFactory(),!1),this.phantomGroup.opacity=.2,this.phantomHighlightGroup.opacity=.2}get pickModeAxis(){return this.properties.sparklineMode?"main":void 0}crossFilteringEnabled(){return null!=this.properties.yFilterKey&&(null==this.seriesGrouping||0===this.seriesGrouping.stackIndex)}async processData(e){var t,i,n,o,s,r;if(!this.data)return;const{xKey:a,yKey:l,yFilterKey:d,normalizedTo:c}=this.properties,{seriesGrouping:{groupIndex:u=this.id}={},data:h}=this,g=(null!==(t=null===(i=this.seriesGrouping)||void 0===i?void 0:i.stackCount)&&void 0!==t?t:0)>1||null!=c,m=g,f=!this.ctx.animationManager.isSkipped(),v=null===(n=this.getCategoryAxis())||void 0===n?void 0:n.scale,y=null===(o=this.getValueAxis())||void 0===o?void 0:o.scale,{isContinuousX:b,xScaleType:x,yScaleType:C}=this.getScaleInformation({xScale:v,yScale:y}),S="bar-stack-".concat(u,"-yValues"),w="".concat(S,"-trailing"),M=this.visible?{}:{forceValue:0},k=[sM(a,x,{id:"xValue"}),rM(l,C,p({id:"yValue-raw",invalidValue:null},M))];this.crossFilteringEnabled()&&k.push(rM(d,C,p({id:"yFilterValue",invalidValue:null},M))),g&&k.push(...uM(l,"normal",p({id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:S,separateNegative:!0},M),C),...uM(l,"trailing",p({id:"yValue-start",invalidValue:null,missingValue:0,groupId:w,separateNegative:!0},M),C)),b&&k.push(hM,pM),ol(c)&&k.push(fM([S,w],Math.abs(c))),this.needsDataModelDiff()&&this.processedData&&k.push(IM(this.id,this.processedData)),!f&&m||k.push(SM());const{dataModel:D,processedData:I}=await this.requestDataModel(e,h,{props:k,groupByKeys:m,groupByData:!m});this.aggregateData(D,I),this.smallestDataInterval=null===(s=I.reduced)||void 0===s?void 0:s.smallestKeyInterval,this.largestDataInterval=null===(r=I.reduced)||void 0===r?void 0:r.largestKeyInterval,this.animationState.transition("updateData")}yCumulativeKey(e){return e.hasColumnById(this,"yValue-end")?"yValue-end":"yValue-raw"}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(null==i||null==t)return{domain:[]};if(e===this.getCategoryDirection()){const e=i.resolveProcessedDataDefById(this,"xValue"),n=i.getDomain(this,"xValue","key",t);return"key"===(null===e||void 0===e?void 0:e.def.type)&&"category"===e.def.valueType?n:{domain:this.padBandExtent(n.domain)}}const n=this.yCumulativeKey(i);let o=this.domainForClippedRange(e,[n],"xValue");const s=this.crossFilteringEnabled()?i.getDomain(this,"yFilterValue","value",t).domain:void 0;null!=s&&(o=[Math.min(o[0],s[0]),Math.max(o[1],s[1])]);const r=this.getValueAxis();if(r instanceof GE&&!(r instanceof Oz)){return{domain:lw(Number.isFinite(o[1]-o[0])?[Math.min(0,o[0]),Math.max(0,o[1])]:[])}}return{domain:lw(o)}}getSeriesRange(e,t){if(("horizontal"===this.properties.direction?_u.X:_u.Y)!==e)return[];const i=this.yCumulativeKey(this.dataModel),[n,o]=this.domainForVisibleRange(_u.Y,[i],"xValue",t);return[Math.min(n,0),Math.max(o,0)]}getZoomRangeFittingItems(e,t,i){const n=this.yCumulativeKey(this.dataModel);return this.zoomFittingVisibleItems("xValue",[n],e,t,i)}getVisibleItems(e,t,i){const n=this.yCumulativeKey(this.dataModel);return this.countVisibleItems("xValue",[n],e,t,i)}aggregateData(e,t){if(this.aggregationManager.markStale(),eM(t))return;const i=this.axes[_u.X];if(null==i)return;const n=this.estimateTargetRange();this.aggregationManager.aggregate({computePartial:o=>$z(i.scale.type,e,t,this,n,o),computeFull:n=>function(e,t,i,n,o){var s;const r=t.resolveKeysById(n,"xValue",i),a=t.hasColumnById(n,"yValue-start"),l=a?t.resolveColumnById(n,"yValue-start",i):void 0,d=a?t.resolveColumnById(n,"yValue-end",i):t.resolveColumnById(n,"yValue-raw",i),c=t.getDomain(n,"xValue","key",i),u=t.resolveColumnNeedsValueOf(n,"xValue",i),h=t.resolveColumnNeedsValueOf(n,a?"yValue-end":"yValue-raw",i);if(o){var p;const[t,n]=ph(e,c);return Uz([t,n],r,l,d,{smallestKeyInterval:null===(p=i.reduced)||void 0===p?void 0:p.smallestKeyInterval,xNeedsValueOf:u,yNeedsValueOf:h,existingFilters:o})}return Yz(e,r,l,d,c,null===(s=i.reduced)||void 0===s?void 0:s.smallestKeyInterval,u,h)}(i.scale.type,e,t,this,n),targetRange:n});const o=this.aggregationManager.filters;o&&o.length>0&&sa.record("".concat(this.type,":aggregation"),o.map(e=>e.maxRange))}estimateTargetRange(){var e,t,i;const n=this.axes[_u.X];if(null!==n&&void 0!==n&&null!==(e=n.scale)&&void 0!==e&&e.range){const[e,t]=n.scale.range;return Math.abs(t-e)}return null!==(t=null===(i=this.ctx.scene)||void 0===i||null===(i=i.canvas)||void 0===i?void 0:i.width)&&void 0!==t?t:800}createNodeDatumContext(e,t){var i,n,o,s;const{dataModel:r,processedData:a,groupScale:l}=this;if(!r||!a)return;const d=null===(i=a.dataSources)||void 0===i?void 0:i.get(this.id);if(null==d)return;const c=e.scale,u=t.scale,{barWidth:h,groupIndex:p}=this.updateGroupScale(e),g=Math.abs(c.range[1]-c.range[0]);this.aggregationManager.ensureLevelForRange(g);const m=this.aggregationManager.getFilterForRange(g),f=r.hasColumnById(this,"yValue-start"),{label:v}=this.properties,y=null!=(null===(n=this.contextNodeData)||void 0===n?void 0:n.nodeData)&&(null!=a.changeDescription||!eM(a)||null!=m);return{rawData:d,xValues:r.resolveKeysById(this,"xValue",a),yRawValues:r.resolveColumnById(this,"yValue-raw",a),yFilterValues:this.crossFilteringEnabled()?r.resolveColumnById(this,"yFilterValue",a):void 0,yStartValues:f?r.resolveColumnById(this,"yValue-start",a):void 0,yEndValues:f?r.resolveColumnById(this,"yValue-end",a):void 0,xScale:c,yScale:u,xAxis:e,yAxis:t,groupOffset:l.convert(String(p)),barOffset:ck.is(c)?-.5*h:0,barWidth:h,range:g,yReversed:t.isReversed(),bboxBottom:u.convert(0),labelSpacing:v.spacing+("number"===typeof v.padding?v.padding:0),crisp:null==m&&(null!==(o=this.properties.crisp)&&void 0!==o?o:hO(null===e||void 0===e?void 0:e.scale,null===e||void 0===e?void 0:e.visibleRange,this.smallestDataInterval,this.largestDataInterval)),isStacked:f,animationEnabled:!this.ctx.animationManager.isSkipped(),dataAggregationFilter:m,canIncrementallyUpdate:y,phantomNodes:y&&null!==(s=this.contextNodeData.phantomNodeData)&&void 0!==s?s:[],nodes:y?this.contextNodeData.nodeData:[],labels:y?this.contextNodeData.nodeData:[],nodeIndex:0,phantomIndex:0,barAlongX:this.getBarDirection()===_u.X,shouldFlipXY:this.shouldFlipXY(),xKey:this.properties.xKey,yKey:this.properties.yKey,xName:this.properties.xName,yName:this.properties.yName,legendItemName:this.properties.legendItemName,label:v,yDomain:this.getSeriesDomain(_u.Y).domain}}computeXPosition(e,t){return e.xScale.convert(e.xValues[t])+e.groupOffset+e.barOffset}prepareNodeDatumState(e,t,i,n,o){var s;if(!Number.isFinite(o))return;const r=e.xValues[i];if(null==r)return;const a=null===(s=e.rawData)||void 0===s?void 0:s.data[i],l=e.yRawValues[i],d=null==e.yFilterValues?void 0:Number(e.yFilterValues[i]);if(null!=d&&!Number.isFinite(d))return;const c=e.label.enabled&&null!=l?this.getLabelText(null!==d&&void 0!==d?d:l,a,e.yKey,"y",e.yDomain,e.label,{datum:a,value:null!==d&&void 0!==d?d:l,xKey:e.xKey,yKey:e.yKey,xName:e.xName,yName:e.yName,legendItemName:e.legendItemName}):void 0,u=l>=0&&!Object.is(l,-0);return t.datum=a,t.xValue=r,t.yRawValue=l,t.yFilterValue=d,t.labelText=c,t.inset=null!=d&&d>l,t.isPositive=u,t.precomputedBottomY=null==d?void 0:e.yScale.convert(n),t.precomputedIsUpward=null==d?void 0:u!==e.yReversed,t}createSkeletonNodeDatum(e,t,i){var n;const o=t.nodeDatumScratch;return{series:this,itemId:i?AM(e.yKey,i):e.yKey,datum:o.datum,datumIndex:t.datumIndex,cumulativeValue:0,phantom:i,xValue:null!==(n=o.xValue)&&void 0!==n?n:"",yValue:0,yKey:e.yKey,xKey:e.xKey,capDefaults:{lengthRatioMultiplier:0,lengthMax:0},x:0,y:0,width:0,height:0,midPoint:{x:0,y:0},opacity:t.opacity,featherRatio:t.featherRatio,topLeftCornerRadius:!1,topRightCornerRadius:!1,bottomRightCornerRadius:!1,bottomLeftCornerRadius:!1,clipBBox:void 0,crisp:e.crisp,label:void 0,missing:!1,focusable:!i}}createNodeDatum(e,t){const i=this.prepareNodeDatumState(e,t.nodeDatumScratch,t.datumIndex,t.yStart,t.yEnd);if(!i)return{nodeData:void 0,phantomNodeData:void 0};const n=this.createSkeletonNodeDatum(e,t,!1);let o;return this.updateNodeDatum(e,n,t,i),null!=i.yFilterValue&&(o=this.createSkeletonNodeDatum(e,t,!0),this.updateNodeDatum(e,o,t)),{nodeData:n,phantomNodeData:o}}updateNodeDatum(e,t,i,n){var o,s,r,a;if(null!==n&&void 0!==n||(n=this.prepareNodeDatumState(e,i.nodeDatumScratch,i.datumIndex,i.yStart,i.yEnd)),!n)return;const l=t,d=t.phantom,c=i.yStart,u=d?n.yFilterValue:null!==(o=n.yFilterValue)&&void 0!==o?o:n.yRawValue,h=d?n.yFilterValue:null!==(s=n.yFilterValue)&&void 0!==s?s:i.yEnd,g=d?void 0:n.labelText;let m,f;var v;(m=d||null==n.yFilterValue?i.yEnd:i.yStart+n.yFilterValue,d)?f=i.yRange:f=Math.max(i.yStart+(null!==(v=n.yFilterValue)&&void 0!==v?v:-1/0),i.yRange);let y;y=d?void 0:n.inset?.6:void 0;const b=null!==(r=n.precomputedIsUpward)&&void 0!==r?r:n.isPositive!==e.yReversed,x=e.yScale.convert(m),C=null!==(a=n.precomputedBottomY)&&void 0!==a?a:e.yScale.convert(c),S=e.yScale.convert(f),w=.5*i.width*(1-(null!==y&&void 0!==y?y:1)),M=e.barAlongX?Math.min(x,C):i.x+w,k=e.barAlongX?i.x+w:Math.min(x,C),D=e.barAlongX?Math.abs(C-x):i.width*(null!==y&&void 0!==y?y:1),I=e.barAlongX?i.width*(null!==y&&void 0!==y?y:1):Math.abs(C-x),A=e.barAlongX?Math.min(e.bboxBottom,S):i.x+w,L=e.barAlongX?i.x+w:Math.min(e.bboxBottom,S),N=e.barAlongX?Math.abs(e.bboxBottom-S):i.width*(null!==y&&void 0!==y?y:1),T=e.barAlongX?i.width*(null!==y&&void 0!==y?y:1):Math.abs(e.bboxBottom-S);l.datum=n.datum,l.datumIndex=i.datumIndex,l.cumulativeValue=h,l.xValue=n.xValue,l.yValue=u,l.x=A,l.y=L,l.width=N,l.height=T;const R=l.midPoint;R.x=M+D/2,R.y=k+I/2;const E=e.shouldFlipXY?I:D;l.capDefaults.lengthRatioMultiplier=E,l.capDefaults.lengthMax=E,l.opacity=i.opacity,l.featherRatio=i.featherRatio,l.topLeftCornerRadius=e.barAlongX!==b,l.topRightCornerRadius=b,l.bottomRightCornerRadius=e.barAlongX===b,l.bottomLeftCornerRadius=!b;const P=l.clipBBox;if(P?(P.x=M,P.y=k,P.width=D,P.height=I):l.clipBBox=new Pb(M,k,D,I),l.crisp=e.crisp,null==g)l.label=void 0;else{const t=tP({isUpward:b,isVertical:!e.barAlongX,placement:e.label.placement,spacing:e.labelSpacing,rect:{x:M,y:k,width:D,height:I}}),i=l.label;i?(i.text=g,i.x=t.x,i.y=t.y,i.textAlign=t.textAlign,i.textBaseline=t.textBaseline):l.label=p({text:g},t)}l.missing=VI(u)}createNodeDataWithAggregation(e,t,i){const n=e.yReversed?-1:1;for(let o=0;o<2;o+=1){const s=0===o,r=s?e.dataAggregationFilter.positiveIndices:e.dataAggregationFilter.negativeIndices,a=s?e.dataAggregationFilter.positiveIndexData:e.dataAggregationFilter.negativeIndexData,l=s?eh:th,d=s?th:eh,c=this.visibleRangeIndices("xValue",e.xAxis.range,r),u=c[0],h=c[1];for(let o=u;o<h;o+=1){const r=o*ih,c=a[r+Qu],u=a[r+Ju],h=a[r+l],p=a[r+d];if(c===rh)continue;if(null==e.xValues[p]||null==e.xValues[h])continue;const g=t(Math.trunc((c+u)/2)),m=Math.abs(t(u)-t(c))+e.barWidth;if(g-m<0||g>e.range)continue;const f=Math.abs(u-c)+1,v=pk.is(e.xScale)?Math.min(e.xScale.bandwidth*Math.max(f-1,1)/(e.xScale.step*f),1):1;if(i.datumIndex=p,i.x=g,i.width=m,i.opacity=v,e.isStacked)i.yStart=Number(e.yStartValues[h]),i.yEnd=Number(e.yEndValues[p]),i.featherRatio=0;else{const t=Number(e.yRawValues[p]),o=Number(e.yRawValues[h]);i.yStart=0,i.yEnd=t,i.featherRatio=(s?1:-1)*n*(1-o/t)}i.yRange=i.yEnd,this.upsertNodeDatum(e,i)}}}createNodeDataGrouped(e,t,i){var n;const o=this.processedData,s=null===(n=o.invalidData)||void 0===n?void 0:n.get(this.id),r=e.barWidth,a=e.isStacked?this.dataModel.resolveProcessedDataIndexById(this,"yValue-range"):-1,l=o.columnScopes.findIndex(e=>e.has(this.id)),d=o.groups,c=JM(1,d.length,e.xAxis.range,e=>{const t=d[e].keys[0];return this.xCoordinateRange(t)}),u=c[0],h=c[1];for(let m=u;m<h;m+=1){const n=d[m],o=n.aggregation,c=n.datumIndices[l];if(null!=c)for(const l of c){var p,g;const n=m+l,d=t(n);if(!0===(null===s||void 0===s?void 0:s[n]))continue;const c=e.yRawValues[n];if(null==c)continue;const u=c>=0&&!Object.is(c,-0),h=e.isStacked?Number(null===(p=e.yStartValues)||void 0===p?void 0:p[n]):0,f=e.isStacked?Number(null===(g=e.yEndValues)||void 0===g?void 0:g[n]):c;let v=f;e.isStacked&&(v=o[a][u?1:0]),i.datumIndex=n,i.x=d,i.width=r,i.yStart=h,i.yEnd=f,i.yRange=v,i.featherRatio=0,i.opacity=1,this.upsertNodeDatum(e,i)}}}createNodeDataSimple(e,t,i){var n;const o=null===(n=this.processedData.invalidData)||void 0===n?void 0:n.get(this.id),s=e.barWidth,r=this.visibleRangeIndices("xValue",e.xAxis.range);let a=r[0],l=r[1];this.processedData.input.count<1e3&&(a=0,l=this.processedData.input.count);for(let d=a;d<l;d+=1){if(!0===(null===o||void 0===o?void 0:o[d]))continue;const n=e.yRawValues[d];if(null==n)continue;const r=t(d),a=Number(n);i.datumIndex=d,i.x=r,i.width=s,i.yStart=0,i.yEnd=a,i.yRange=a,i.featherRatio=0,i.opacity=1,this.upsertNodeDatum(e,i)}}upsertNodeDatum(e,t){const i=e.canIncrementallyUpdate&&e.nodeIndex<e.nodes.length,n=null!=e.yFilterValues,o=n&&e.canIncrementallyUpdate&&e.phantomIndex<e.phantomNodes.length;let s,r;if(i)s=e.nodes[e.nodeIndex],this.updateNodeDatum(e,s,t),e.nodeIndex>=e.labels.length&&e.labels.push(s);else{const i=this.createNodeDatum(e,t);i.nodeData&&(e.nodes.push(i.nodeData),e.labels.push(i.nodeData)),r=i.phantomNodeData}if(e.nodeIndex++,!n)return{nodeData:e.nodes[e.nodeIndex]};if(o)r=e.phantomNodes[e.phantomIndex],this.updateNodeDatum(e,r,t);else if(r)e.phantomNodes.push(r);else{const i=this.createNodeDatum(e,t);i.phantomNodeData&&e.phantomNodes.push(i.phantomNodeData)}return e.phantomIndex++,{nodeData:s,phantomNodeData:r}}createNodeData(){const e=this.getCategoryAxis(),t=this.getValueAxis();if(!this.dataModel||!this.processedData||!e||!t)return;const i=this.createNodeDatumContext(e,t);if(!i)return;const n=e=>this.computeXPosition(i,e),o={nodeDatumScratch:{datum:void 0,xValue:void 0,yRawValue:0,yFilterValue:void 0,labelText:void 0,inset:!1,isPositive:!1,precomputedBottomY:void 0,precomputedIsUpward:void 0},datumIndex:0,x:0,width:0,yStart:0,yEnd:0,yRange:0,featherRatio:0,opacity:1};null!=i.dataAggregationFilter?this.createNodeDataWithAggregation(i,n,o):"grouped"===this.processedData.type?this.createNodeDataGrouped(i,n,o):this.createNodeDataSimple(i,n,o),i.canIncrementallyUpdate&&(i.nodeIndex<i.nodes.length&&(i.nodes.length=i.nodeIndex),i.phantomIndex<i.phantomNodes.length&&(i.phantomNodes.length=i.phantomIndex),i.labels.length>i.nodes.length&&(i.labels.length=i.nodes.length));const s=yE(this.properties.segmentation,i.xAxis,i.yAxis,this.chart.seriesRect,this.ctx.scene);return{itemId:this.properties.yKey,nodeData:i.nodes,phantomNodeData:i.phantomNodes,labelData:i.labels,scales:this.calculateScaling(),visible:this.visible||i.animationEnabled,groupScale:this.getScaling(this.groupScale),styles:tk(this.getItemStyle.bind(this)),segments:s}}nodeFactory(){return new Kz}updateSeriesSelections(){var e,t;super.updateSeriesSelections(),this.phantomSelection=this.updateDatumSelection({nodeData:null!==(e=null===(t=this.contextNodeData)||void 0===t?void 0:t.phantomNodeData)&&void 0!==e?e:[],datumSelection:this.phantomSelection})}updateHighlightSelectionItem(e){var t,i,n,o;const s=super.updateHighlightSelectionItem(e),r=null===(t=this.ctx.highlightManager)||void 0===t?void 0:t.getActiveHighlight(),a=this.isSeriesHighlighted(r)&&null!==r&&void 0!==r&&r.datum?r:void 0;return this.phantomHighlightSelection=this.updateDatumSelection({nodeData:a&&null!==(i=this.getHighlightData(null!==(n=null===(o=this.contextNodeData)||void 0===o?void 0:o.phantomNodeData)&&void 0!==n?n:[],a))&&void 0!==i?i:[],datumSelection:this.phantomHighlightSelection}),s}updateNodes(e,t){super.updateNodes(e,t),this.updateDatumNodes({datumSelection:this.phantomSelection,isHighlight:!1,drawingMode:"overlay"}),this.updateDatumNodes({datumSelection:this.phantomHighlightSelection,isHighlight:!0,drawingMode:"overlay"})}getHighlightData(e,t){const i=e.find(e=>e.datum===t.datum);return null==i?void 0:[p({},i)]}updateDatumSelection(e){return eM(this.processedData)?e.datumSelection.update(e.nodeData,void 0,this.getDatumId.bind(this)):e.datumSelection.update(e.nodeData)}makeStylerParams(e){const{id:t}=this,{cornerRadius:i,fill:n,fillOpacity:o,lineDash:s,lineDashOffset:r,stackGroup:a,stroke:l,strokeOpacity:d,strokeWidth:c,xKey:u,yKey:h}=this.properties;return{cornerRadius:i,fill:n,fillOpacity:o,highlightState:jM(null!==e&&void 0!==e?e:0),lineDash:s,lineDashOffset:r,seriesId:t,stackGroup:a,stroke:l,strokeOpacity:d,strokeWidth:c,xKey:u,yKey:h}}makeItemStylerParams(e,t,i,n,o,s){var r,a,l;const{id:d}=this,{xKey:c,yKey:u,stackGroup:h}=this.properties,g=null===(r=t.dataSources.get(d))||void 0===r||null===(r=r.data)||void 0===r?void 0:r[i],m=e.resolveColumnById(this,"yValue-raw",t)[i],f=e.getDomain(this,"xValue","key",t).domain,v=e.getDomain(this,this.yCumulativeKey(e),"value",t).domain,y=null===(a=this.ctx.highlightManager)||void 0===a?void 0:a.getActiveHighlight(),b=this.getHighlightStateString(y,o,i),x=null!==(l=this.filterItemStylerFillParams(s.fill))&&void 0!==l?l:s.fill;return p(p(p({seriesId:d},QM(n,m,c,u,f,v)),{},{datum:g,xValue:n,yValue:m,stackGroup:h,highlightState:b},s),{},{fill:x})}getStyle(e,t){var i,n,o,s,r,a,l,d;const{cornerRadius:c,fill:u,fillOpacity:h,lineDash:p,lineDashOffset:g,stroke:m,strokeOpacity:f,strokeWidth:v,styler:y}=this.properties;let b={};if(!e&&y){var x,C;const e=this.makeStylerParams(t);b=null!==(x=this.ctx.optionsGraphService.resolvePartial(["series","".concat(this.declarationOrder)],null!==(C=this.cachedCallWithContext(y,e))&&void 0!==C?C:{},{pick:!1}))&&void 0!==x?x:{}}return{cornerRadius:null!==(i=b.cornerRadius)&&void 0!==i?i:c,fill:null!==(n=b.fill)&&void 0!==n?n:u,fillOpacity:null!==(o=b.fillOpacity)&&void 0!==o?o:h,lineDash:null!==(s=b.lineDash)&&void 0!==s?s:p,lineDashOffset:null!==(r=b.lineDashOffset)&&void 0!==r?r:g,opacity:1,stroke:null!==(a=b.stroke)&&void 0!==a?a:m,strokeOpacity:null!==(l=b.strokeOpacity)&&void 0!==l?l:f,strokeWidth:null!==(d=b.strokeWidth)&&void 0!==d?d:v}}getItemStyle(e,t,i){const{properties:n,dataModel:o,processedData:s}=this,{itemStyler:r,simpleItemStyler:a}=n,l=this.getHighlightStyle(t,e,i);if(a&&null!=s&&null!=e){var d;return xu(a(null===(d=s.dataSources.get(this.id))||void 0===d||null===(d=d.data)||void 0===d?void 0:d[e]),l,this.getStyle(!1,i))}let c=xu(l,this.getStyle(void 0===e,i));if(r&&null!=o&&null!=s&&null!=e){const i=o.resolveKeysById(this,"xValue",s)[e],n=this.cachedDatumCallback(AM(this.getDatumId({xValue:i,phantom:!1}),t?"highlight":"node"),()=>{const n=this.makeItemStylerParams(o,s,e,i,t,c);return this.ctx.optionsGraphService.resolvePartial(["series","".concat(this.declarationOrder)],this.callWithContext(r,n))});n&&(c=xu(n,c))}return c}updateDatumStyles(e){const t=this.ctx.highlightManager.getActiveHighlight(),i=this;e.datumSelection.each(function(n,o){if(!e.datumSelection.isGarbage(n)){const n=i.getHighlightState(t,e.isHighlight,o.datumIndex);o.style=i.getItemStyle(o.datumIndex,e.isHighlight,n)}})}updateDatumNodes(e){const{contextNodeData:t}=this;if(!t)return;const i=this.ctx.highlightManager.getActiveHighlight(),{shadow:n}=this.properties,o=this.getCategoryDirection()===_u.X,s=this.getShapeFillBBox(),r=this.getBarDirection(),{drawingMode:a,isHighlight:l}=e,d=this,c=t.styles;e.datumSelection.each(function(e,t){var u,h,p,g,m,f;const v=null!==(u=t.style)&&void 0!==u?u:c[d.getHighlightState(i,l,t.datumIndex)];e.setStyleProperties(v,s);const y=null!==(h=v.cornerRadius)&&void 0!==h?h:0,b=o?(null!==(p=null===(g=t.clipBBox)||void 0===g?void 0:g.width)&&void 0!==p?p:t.width)>0:(null!==(m=null===(f=t.clipBBox)||void 0===f?void 0:f.height)&&void 0!==m?m:t.height)>0;e.setStaticProperties(a,t.topLeftCornerRadius?y:0,t.topRightCornerRadius?y:0,t.bottomRightCornerRadius?y:0,t.bottomLeftCornerRadius?y:0,b,t.crisp,n,r,t.featherRatio)})}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t,e=>{e.pointerEvents=1})}updateLabelNodes(e){var t,i,n,o,s;const{isHighlight:r=!1}=e,a={xKey:this.properties.xKey,xName:null!==(t=this.properties.xName)&&void 0!==t?t:this.properties.xKey,yKey:this.properties.yKey,yName:null!==(i=this.properties.yName)&&void 0!==i?i:this.properties.yKey,legendItemName:null!==(n=null!==(o=this.properties.legendItemName)&&void 0!==o?o:this.properties.xName)&&void 0!==n?n:this.properties.xKey},l=null===(s=this.ctx.highlightManager)||void 0===s?void 0:s.getActiveHighlight();e.labelSelection.each((e,t)=>{var i;e.fillOpacity=null!==(i=this.getHighlightStyle(r,null===t||void 0===t?void 0:t.datumIndex).opacity)&&void 0!==i?i:1,JE(this,e,a,this.properties.label,t.label,r,l)})}getTooltipContent(e){var t;const{id:i,dataModel:n,processedData:o,properties:s}=this,{xKey:r,xName:a,yKey:l,yName:d,legendItemName:c,stackGroup:u,tooltip:h}=s,g=this.getCategoryAxis(),m=this.getValueAxis();if(!n||!o||!g||!m)return;const f=null===(t=o.dataSources.get(this.id))||void 0===t||null===(t=t.data)||void 0===t?void 0:t[e],v=n.resolveKeysById(this,"xValue",o)[e],y=n.resolveColumnById(this,"yValue-raw",o)[e];if(null==v)return;const b=this.getItemStyle(e,!1);return this.formatTooltipWithContext(h,{heading:this.getAxisValueText(g,"tooltip",v,f,r,c),symbol:this.legendItemSymbol(),data:[{label:d,fallbackLabel:l,value:this.getAxisValueText(m,"tooltip",y,f,l,c),missing:VI(y)}]},p(p({seriesId:i,datum:f,title:d,xKey:r,xName:a,yKey:l,yName:d,legendItemName:c,stackGroup:u},b),this.getModuleTooltipParams()))}legendItemSymbol(){const{fill:e,stroke:t,strokeWidth:i,fillOpacity:n,strokeOpacity:o,lineDash:s,lineDashOffset:r}=this.getStyle(!1,0);return{marker:{fill:null!==e&&void 0!==e?e:"rgba(0, 0, 0, 0)",stroke:null!==t&&void 0!==t?t:"rgba(0, 0, 0, 0)",fillOpacity:n,strokeOpacity:o,strokeWidth:i,lineDash:s,lineDashOffset:r}}}getLegendData(e){var t;const{showInLegend:i}=this.properties;if("category"!==e)return[];const{id:n,ctx:{legendManager:o},visible:s}=this,{yKey:r,yName:a,legendItemName:l}=this.properties;return[{legendType:"category",id:n,itemId:r,seriesId:n,enabled:s&&o.getItemEnabled({seriesId:n,itemId:r}),label:{text:null!==(t=null!==l&&void 0!==l?l:a)&&void 0!==t?t:r},symbol:this.legendItemSymbol(),legendItemName:l,hideInLegend:!i}]}resetDatumAnimation(e){yO([e.datumSelection,this.phantomSelection])}animateReadyHighlight(e){yO([e,this.phantomHighlightSelection])}animateEmptyUpdateReady(e){let{datumSelection:t,labelSelection:i,annotationSelections:n}=e;const{phantomSelection:o}=this,s=fO(gO(this.isVertical(),this.axes,"normal"),"unknown");$k(this.id,"nodes",this.ctx.animationManager,[t,o],s),iP(this,"labels",this.ctx.animationManager,i),iP(this,"annotations",this.ctx.animationManager,...n)}animateWaitingUpdateReady(e){const{phantomSelection:t}=this,{datumSelection:i,labelSelection:n,annotationSelections:o,contextData:s,previousContextData:r}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id);const a=wO(this.id,i,this.getDatumId.bind(this),e.contextData,r,this.processedData,this.processedDataUpdated),l=null==r?"fade":"normal",d=fO(gO(this.isVertical(),this.axes,l),"added");$k(this.id,"nodes",this.ctx.animationManager,[i,t],d,(e,t)=>this.getDatumId(t),a),(!a||null!==a&&void 0!==a&&a.changed||!fy(s.groupScale,null===r||void 0===r?void 0:r.groupScale))&&(iP(this,"labels",this.ctx.animationManager,n),iP(this,"annotations",this.ctx.animationManager,...o))}getDatumId(e){return AM(e.xValue,e.phantom)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds(e){var t;let{datumIndex:i}=e;return bO(this,null===(t=this.contextNodeData)||void 0===t?void 0:t.nodeData[i].clipBBox)}hasItemStylers(){return null!=this.properties.styler||null!=this.properties.itemStyler||null!=this.properties.simpleItemStyler||null!=this.properties.label.itemStyler}};qz.className="BarSeries",qz.type="bar";var Qz={series:{direction:"vertical",fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",DA],["image",GA],["pattern",OA]]},stroke:{$palette:"stroke"},fillOpacity:1,strokeWidth:{$isUserOption:["./stroke",2,0]},lineDash:[0],lineDashOffset:0,label:p(p({},WA),{},{padding:{$isUserOption:["./spacing",0,8]},enabled:!1,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$if:[{$or:[{$eq:[{$path:"./placement"},"outside-start"]},{$eq:[{$path:"./placement"},"outside-end"]}]},{$ref:"textColor"},{$ref:"chartBackgroundColor"}]},placement:"inside-center"}),shadow:{enabled:!1,color:Hh,xOffset:3,yOffset:3,blur:5},highlight:{enabled:!0,unhighlightedItem:{opacity:.6},unhighlightedSeries:{opacity:.2}},segmentation:$A}},Jz={type:"series",name:"bar",chartType:"cartesian",stackable:!0,groupable:!0,version:GC,dependencies:[uz],options:xN,predictAxis:CE,defaultAxes:xA,axisKeys:{[_u.X]:"xKeyAxis",[_u.Y]:"yKeyAxis"},axisKeysFlipped:{[_u.X]:"yKeyAxis",[_u.Y]:"xKeyAxis"},themeTemplate:Qz,create:e=>new qz(e)};function eB(e,t,i){const{xValues:n,yValues:o,xDomain:s,yDomain:r,xNeedsValueOf:a,yNeedsValueOf:l}=e,{x0:d,y0:c,x1:u,y1:h}=i;let p=0;for(const g of t){const e=n[g],t=o[g];if(null==e||null==t)continue;const i=mh(e,s.min,s.max,a),m=mh(t,r.min,r.max,l);i>=d&&i<=u&&m>=c&&m<=h&&(p+=1)}return p}function tB(e,t,i){var n,o;const{x0:s,y0:r,x1:a,y1:l}=i;let d=t.length<5&&a-s<.05&&l-r<.05||s===a&&r===l?null:function(e,t,i){const{xValues:n,yValues:o,xDomain:s,yDomain:r,xNeedsValueOf:a,yNeedsValueOf:l}=e,{x0:d,y0:c,x1:u,y1:h}=i,p=[{x0:1,y0:1,x1:0,y1:0,indices:[]},{x0:1,y0:1,x1:0,y1:0,indices:[]},{x0:1,y0:1,x1:0,y1:0,indices:[]},{x0:1,y0:1,x1:0,y1:0,indices:[]}],g=(d+u)/2,m=(c+h)/2;for(const v of t){const e=n[v],t=o[v];if(null==e||null==t)continue;const i=mh(e,s.min,s.max,a),d=mh(t,r.min,r.max,l),c=p[(i>g?1:0)+(d>m?2:0)];c.indices.push(v),c.x0=Math.min(c.x0,i),c.y0=Math.min(c.y0,d),c.x1=Math.max(c.x1,i),c.y1=Math.max(c.y1,d)}const f=[];for(const v of p){const{indices:t,x0:i,x1:n,y0:o,y1:s}=v;if(0===t.length)continue;const r=tB(e,t,{x0:i,y0:o,x1:n,y1:s});f.push(r)}return f}(e,t,i);if(1===(null===(n=d)||void 0===n?void 0:n.length))return d[0];0===(null===(o=d)||void 0===o?void 0:o.length)&&(d=null);const c=Math.hypot(a-s,l-r),u=function(e,t,i){const{xValues:n,yValues:o,xDomain:s,yDomain:r,xNeedsValueOf:a,yNeedsValueOf:l}=e,{x0:d,y0:c,x1:u,y1:h}=i;let p=0,g=1/0;const m=(d+u)/2,f=(c+h)/2;for(const v of t){const e=n[v],t=o[v];if(null==e||null==t)continue;const i=(mh(e,s.min,s.max,a)-m)**2+(mh(t,r.min,r.max,l)-f)**2;i<g&&(g=i,p=v)}return p}(e,t,i);return{scale:c,x0:s,y0:r,x1:a,y1:l,indices:t,primaryDatumIndex:u,children:d}}function iB(e,t,i,n,o,s,r,a,l,d){const[c,u]=ph(e,s),[h,p]=ph(t,r);return function(e,t,i,n,o,s,r){const[a,l]=e,[d,c]=t,[u,h]=s,{xNeedsValueOf:p,yNeedsValueOf:g}=r,m={xValues:i,yValues:n,xDomain:{min:a,max:l},yDomain:{min:d,max:c},xNeedsValueOf:p,yNeedsValueOf:g},f=[];if(null!=o&&h>u){const e=Array.from({length:3},()=>[]);for(let t=0;t<o.length;t+=1){const i=(o[t]-u)/(h-u),n=Math.trunc(3*i);n>=0&&n<3&&e[n].push(t)}for(let t=0;t<e.length;t+=1){const i=tB(m,e[t],{x0:0,y0:0,x1:1,y1:1});if(null!=i){const e=t/3;f.push({sizeRatio:e,node:i})}}}else{const e=tB(m,i.map((e,t)=>t),{x0:0,y0:0,x1:1,y1:1});null!=e&&f.push({sizeRatio:0,node:e})}return f.length>0?{xValues:i,yValues:n,xd0:a,xd1:l,yd0:d,yd1:c,filters:f,xNeedsValueOf:p,yNeedsValueOf:g}:void 0}([c,u],[h,p],i,n,o,[a[0],a[1]],{xNeedsValueOf:l,yNeedsValueOf:d})}function nB(e,t,i,n,o,s){const{xRange:r,yRange:a,xVisibleRange:[l,d],yVisibleRange:[c,u],minSize:h,maxSize:p}=i,{xValues:g,yValues:m,xd0:f,xd1:v,yd0:y,yd1:b,xNeedsValueOf:x,yNeedsValueOf:C}=t,S=1/Math.min(r/(d-l),a/(u-c)),w={xValues:g,yValues:m,xDomain:{min:f,max:v},yDomain:{min:y,max:b},xNeedsValueOf:x,yNeedsValueOf:C};for(const{sizeRatio:M,node:k}of t.filters){const t=.5*(h+M*(p-h)),i=t*S,g=e*i,m=l-t/r,f=d+t/r,v=c-t/a,y=u+t/a,b=[k];for(;b.length>0;){const t=b.pop();if(!(t.x1<m||t.x0>f||t.y1<v||t.y0>y))if(1!==e&&t.scale<=g)null!=n&&(n.count+=1),null===o||void 0===o||o.push({datumIndex:t.primaryDatumIndex,count:t.indices.length,area:(t.x1-t.x0)*(t.y1-t.y0),dilation:za(1,t.scale/i,e)});else if(null==t.children){const{indices:e}=t;if(null!=n){const i=t.x0>=l&&t.x1<=d&&t.y0>=c&&t.y1<=u?e.length:eB(w,e,{x0:l,y0:c,x1:d,y1:u});n.count+=i}null===s||void 0===s||s.push(...e)}else b.push(...t.children)}}}function oB(e,t,i){const n={count:0};return nB(e,t,i,n,void 0,void 0),n.count}var sB=class extends sP{constructor(){super(...arguments),this.maxSize=30}};Ab([ru,_y()],sB.prototype,"maxSize",2),Ab([ru,Yy()],sB.prototype,"domain",2);var rB=class extends iD{constructor(){super(...arguments),this.placement="top"}};Ab([ru],rB.prototype,"placement",2);var aB=class extends ZE{constructor(){super(...arguments),this.label=new rB,this.tooltip=dP(),this.maxRenderedItems=1/0,this.marker=new sB}};Ab([ru],aB.prototype,"xKey",2),Ab([ru],aB.prototype,"yKey",2),Ab([ru],aB.prototype,"sizeKey",2),Ab([ru],aB.prototype,"labelKey",2),Ab([ru],aB.prototype,"xFilterKey",2),Ab([ru],aB.prototype,"yFilterKey",2),Ab([ru],aB.prototype,"sizeFilterKey",2),Ab([ru],aB.prototype,"xName",2),Ab([ru],aB.prototype,"yName",2),Ab([ru],aB.prototype,"sizeName",2),Ab([ru],aB.prototype,"labelName",2),Ab([ru],aB.prototype,"title",2),Ab([eg("marker.shape")],aB.prototype,"shape",2),Ab([eg("marker.size")],aB.prototype,"size",2),Ab([eg("marker.maxSize")],aB.prototype,"maxSize",2),Ab([eg("marker.domain")],aB.prototype,"domain",2),Ab([eg("marker.fill")],aB.prototype,"fill",2),Ab([eg("marker.fillOpacity")],aB.prototype,"fillOpacity",2),Ab([eg("marker.stroke")],aB.prototype,"stroke",2),Ab([eg("marker.strokeWidth")],aB.prototype,"strokeWidth",2),Ab([eg("marker.strokeOpacity")],aB.prototype,"strokeOpacity",2),Ab([eg("marker.lineDash")],aB.prototype,"lineDash",2),Ab([eg("marker.lineDashOffset")],aB.prototype,"lineDashOffset",2),Ab([eg("marker.itemStyler")],aB.prototype,"itemStyler",2),Ab([ru],aB.prototype,"styler",2),Ab([ru],aB.prototype,"label",2),Ab([ru],aB.prototype,"tooltip",2),Ab([ru],aB.prototype,"maxRenderedItems",2);var lB=class extends $E{constructor(e,t,i,n){super(e,t,i,n),this.sizeKey=n.properties.sizeKey}},dB=class extends XE{constructor(e){super({moduleCtx:e,propertyKeys:p(p({},UE),{},{label:["labelKey"],size:["sizeKey"]}),propertyNames:p(p({},YE),{},{label:["labelName"],size:["sizeName"]}),categoryKey:void 0,pickModes:[2,1,0],pathsPerSeries:[],datumSelectionGarbageCollection:!1,animationResetFns:{label:oP,datum:IO},usesPlacedLabels:!0,clipFocusBox:!1}),this.NodeEvent=lB,this.properties=new aB,this.dataAggregation=void 0,this.sizeScale=new VE,this.placedLabelData=[]}get pickModeAxis(){return"main-category"}get type(){return super.type}async processData(e){var t,i,n;if(null==this.data||!this.visible)return;const o=null===(t=this.axes[_u.X])||void 0===t?void 0:t.scale,s=null===(i=this.axes[_u.Y])||void 0===i?void 0:i.scale,{xScaleType:r,yScaleType:a}=this.getScaleInformation({xScale:o,yScale:s}),l=this.sizeScale.type,{xKey:d,yKey:c,sizeKey:u,xFilterKey:h,yFilterKey:p,sizeFilterKey:g,labelKey:m,marker:f}=this.properties,{dataModel:v,processedData:y}=await this.requestDataModel(e,this.data,{props:[rM(d,r,{id:"xValue"}),rM(c,a,{id:"yValue"}),...null==h?[]:[rM(h,r,{id:"xFilterValue"})],...null==p?[]:[rM(p,a,{id:"yFilterValue"})],...null==g?[]:[rM(g,l,{id:"sizeFilterValue"})],...u?[rM(u,l,{id:"sizeValue"})]:[],...m?[rM(m,"category",{id:"labelValue"})]:[]]}),b=u?v.resolveProcessedDataIndexById(this,"sizeValue"):void 0,x=f.domain?[f.domain[0],f.domain[1]]:void 0;this.sizeScale.domain=null!==(n=null!==x&&void 0!==x?x:null==b?void 0:y.domain.values[b])&&void 0!==n?n:[],this.dataAggregation=this.aggregateData(v,y),this.animationState.transition("updateData")}xCoordinateRange(e,t,i){const{properties:n,sizeScale:o}=this,{size:s,sizeKey:r}=n,a=this.axes[_u.X].scale.convert(e),l=null==r?void 0:this.dataModel.resolveColumnById(this,"sizeValue",this.processedData),d=.5*(null==l?s:o.convert(l[i]))*t;return[a-d,a+d]}yCoordinateRange(e,t,i){const{properties:n,sizeScale:o}=this,{size:s,sizeKey:r}=n,a=this.axes[_u.Y].scale.convert(e[0]),l=null==r?void 0:this.dataModel.resolveColumnById(this,"sizeValue",this.processedData),d=.5*(null==l?s:o.convert(l[i]))*t;return[a-d,a+d]}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return{domain:[]};const n={[_u.X]:"xValue",[_u.Y]:"yValue"},o=n[e],s=t.resolveProcessedDataDefById(this,o),r=t.getDomain(this,o,"value",i);if("value"===(null===s||void 0===s?void 0:s.def.type)&&"category"===(null===s||void 0===s?void 0:s.def.valueType))return{domain:r.domain};const a=n[e===_u.X?_u.Y:_u.X];return{domain:lw(Rg(this.domainForClippedRange(e,[o],a)))}}getSeriesRange(e,t){return this.domainForVisibleRange(_u.Y,["yValue"],"xValue",t)}getVisibleItems(e,t,i){const{dataAggregation:n,axes:o}=this,s=o[_u.X],r=o[_u.Y];if(null==n||null==s||null==r)return this.countVisibleItems("xValue",["yValue"],e,t,i);return oB(0,n,this.aggregationOptions(s,r,e,null!==t&&void 0!==t?t:[0,1]))}aggregateData(e,t){if("grouped"===t.type)return;if(t.input.count<=this.properties.maxRenderedItems)return;const i=this.axes[_u.X],n=this.axes[_u.Y];if(null==i||null==n)return;const o=i.scale,s=n.scale;return ck.is(o)&&ck.is(s)?function(e,t,i,n,o,s,r){return iB(e,t,i.resolveColumnById(r,"xValue",n),i.resolveColumnById(r,"yValue",n),s?i.resolveColumnById(r,"sizeValue",n):void 0,i.getDomain(r,"xValue","value",n),i.getDomain(r,"yValue","value",n),s?o.domain:[0,0],i.resolveColumnNeedsValueOf(r,"xValue",n),i.resolveColumnNeedsValueOf(r,"yValue",n))}(o.type,s.type,e,t,this.sizeScale,null!=this.properties.sizeKey,this):void 0}aggregationOptions(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.visibleRange,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.visibleRange;const{processedData:o,dataModel:s}=this,{sizeKey:r}=this.properties,[a,l]=this.getSizeRange(),d=Math.abs(e.range[1]-e.range[0]),c=Math.abs(t.range[1]-t.range[0]),u=Math.max(a,1),h=r?Math.max(l,1):u,p=e.scale,g=t.scale;return null!=o&&null!=s&&(ck.is(p)&&(i=zf(i,p.domain.map(tv),s.getDomain(this,"xValue","value",o).domain.map(tv))),ck.is(g)&&(n=zf(n,g.domain.map(tv),s.getDomain(this,"yValue","value",o).domain.map(tv)))),{xRange:d,yRange:c,minSize:u,maxSize:h,xVisibleRange:i,yVisibleRange:n}}createNodeData(){var e,t,i;const{axes:n,dataModel:o,processedData:s,sizeScale:r,visible:a}=this,{xKey:l,yKey:d,sizeKey:c,xFilterKey:u,yFilterKey:h,sizeFilterKey:p,labelKey:g,xName:m,yName:f,sizeName:v,labelName:y,label:b,legendItemName:x,marker:C,maxRenderedItems:S}=this.properties,{enabled:w,placement:M}=b,k=FI.anchor(C.shape),D=n[_u.X],I=n[_u.Y];if(!(o&&s&&D&&I))return;const A=!this.ctx.animationManager.isSkipped(),L=o.resolveColumnById(this,"xValue",s),N=o.resolveColumnById(this,"yValue",s),T=null==c?void 0:o.resolveColumnById(this,"sizeValue",s),R=null==g?void 0:o.resolveColumnById(this,"labelValue",s),E=null==u?void 0:o.resolveColumnById(this,"xFilterValue",s),P=null==h?void 0:o.resolveColumnById(this,"yFilterValue",s),O=null==p?void 0:o.resolveColumnById(this,"sizeFilterValue",s);let F;F=g?[]:c?o.getDomain(this,"sizeValue","value",s).domain:[];const z=D.scale,B=I.scale,V=(null!==(e=z.bandwidth)&&void 0!==e?e:0)/2,G=(null!==(t=B.bandwidth)&&void 0!==t?t:0)/2,H=[];r.range=this.getSizeRange();const j=Wm(b),W=null===(i=s.dataSources.get(this.id))||void 0===i?void 0:i.data;if(null==W)return;const _=nD(b),K=(e,t,i,n)=>{const o=W[e],s=L[e],a=N[e],u=null===T||void 0===T?void 0:T[e],h=z.convert(s)+V,p=B.convert(a)+G;let S,D;if(null!=E&&null!=P&&(S=E[e]===s&&P[e]===a,null!=O&&S&&(S=O[e]===u)),w){let t,i,n;g&&R?(t=R[e],i=g,n="label"):c?(t=u,i=c,n="size"):(t=a,i=d,n="y");const s=this.getLabelText(t,o,i,n,F,b,{value:t,datum:o,xKey:l,yKey:d,sizeKey:c,labelKey:g,xName:m,yName:f,sizeName:v,labelName:y,legendItemName:x});let{width:r,height:h}=Ua(s)?_m(s,b):j.measureLines(String(s));r+=_.left+_.right,h+=_.bottom+_.top,D={text:s,width:r,height:h}}else D={text:"",width:0,height:0};const I=null==u?r.range[0]:r.convert(u),A={x:h,y:p,size:Math.sqrt(i)*I};H.push({series:this,itemId:d,yKey:d,xKey:l,datum:o,datumIndex:e,xValue:s,yValue:a,sizeValue:u,capDefaults:{lengthRatioMultiplier:C.getDiameter(),lengthMax:1/0},point:A,midPoint:{x:h,y:p},label:D,anchor:k,placement:M,count:t,dilation:i,area:n,selected:S})},{dataAggregation:U}=this;if(a)if(null==U)for(let Y=0;Y<W.length;Y++)K(Y,1,1,0);else{const e=this.aggregationOptions(D,I),t=function(e,t,i){if(oB(1,e,t)<=i)return 1;let n=1,o=2;for(;oB(o,e,t)>i&&o<100;)n*=2,o*=2;for(let s=0;s<12;s+=1){const s=(o+n)/2;oB(s,e,t)>i?n=s:o=s}return(n+o)/2}(U,e,S),{groupedAggregation:i,singleDatumIndices:n}=function(e,t,i){const n=[],o=[];return nB(e,t,i,void 0,n,o),{groupedAggregation:n,singleDatumIndices:o}}(t,U,e);for(const{datumIndex:o,count:s,dilation:r,area:a}of i)K(o,s,r,a);for(const o of n)K(o,1,1,0)}else;return{itemId:d,nodeData:H,labelData:w?H:[],scales:this.calculateScaling(),visible:this.visible||A,styles:RO(this,this.properties,C)}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var e,t;return this.isLabelEnabled()&&null!==(e=null===(t=this.contextNodeData)||void 0===t?void 0:t.labelData)&&void 0!==e?e:[]}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,{sizeKey:n}=this.properties;let o;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),n&&(o=e=>AM(e.xValue,e.yValue,e.sizeValue,ed(e.label.text))),i.update(t,void 0,o)}updateDatumStyles(e){const{datumSelection:t,isHighlight:i}=e,{xKey:n,yKey:o,sizeKey:s,labelKey:r,marker:a}=this.properties,l={xKey:n,yKey:o,sizeKey:s,labelKey:r},d=this.ctx.highlightManager.getActiveHighlight();t.each((n,o)=>{if(!t.isGarbage(n)){const t=this.getHighlightState(d,e.isHighlight,o.datumIndex),n=this.getStyle(t);o.style=this.getMarkerStyle(a,o,l,{isHighlight:i,highlightState:t,resolveMarkerSubPath:[]},n)}})}updateDatumNodes(e){const{contextNodeData:t}=this;if(!t)return;const{datumSelection:i,isHighlight:n,drawingMode:o}=e;this.sizeScale.range=this.getSizeRange();const s=this.getShapeFillBBox(),r=null!=this.dataAggregation,a=this.ctx.highlightManager.getActiveHighlight();i.each((e,i,l)=>{var d;const{point:{size:c},count:u,area:h,dilation:g}=i;let m=null!==(d=i.style)&&void 0!==d?d:t.styles[this.getHighlightState(a,n,i.datumIndex)];if(m=p({},m),m.size=c,g>1){var f;const e=null!==(f=m.fillOpacity)&&void 0!==f?f:0,t=.269669+683e-6*u+-37.534348*h+.004449*u*h+-0*u**2+44.428603*h**2;m.fillOpacity=za(e/g,e/.1*t,1)}this.applyMarkerStyle(m,e,i.point,s,{selected:i.selected}),e.drawingMode=o,e.zIndex=r?[-u,l]:0}),n||this.properties.marker.markClean()}updatePlacedLabelData(e){this.placedLabelData=e,this.labelSelection.update(e.map(e=>p(p({},e.datum),{},{point:{x:e.x,y:e.y,size:e.datum.point.size}})),e=>{e.pointerEvents=1}),this.updateLabelNodes({labelSelection:this.labelSelection}),this.updateHighlightLabelSelection()}updateHighlightLabelSelection(){var e,t;const i=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),n=this.isSeriesHighlighted(i)&&null!==i&&void 0!==i&&i.datum?i:void 0,o=null==n?[]:this.placedLabelData.filter(e=>e.datum.datumIndex===n.datumIndex).map(e=>p(p({},e.datum),{},{point:{x:e.x,y:e.y,size:e.datum.point.size}}));this.highlightLabelSelection=null!==(t=this.updateLabelSelection({labelData:o,labelSelection:this.highlightLabelSelection}))&&void 0!==t?t:this.highlightLabelSelection,this.highlightLabelGroup.visible=o.length>0,this.highlightLabelGroup.batchedUpdate(()=>{this.updateLabelNodes({labelSelection:this.highlightLabelSelection,isHighlight:!0})})}updateLabelNodes(e){var t;const{isHighlight:i=!1}=e,n=null===(t=this.ctx.highlightManager)||void 0===t?void 0:t.getActiveHighlight(),o=this.makeLabelFormatterParams();e.labelSelection.each((e,t)=>{var s,r,a,l,d;const c=QE(this,t,o,this.properties.label,i,n);e.text=t.label.text,e.fill=c.color,e.x=null!==(s=null===(r=t.point)||void 0===r?void 0:r.x)&&void 0!==s?s:0,e.y=null!==(a=null===(l=t.point)||void 0===l?void 0:l.y)&&void 0!==a?a:0,e.fontStyle=c.fontStyle,e.fontWeight=c.fontWeight,e.fontSize=c.fontSize,e.fontFamily=c.fontFamily,e.textBaseline="top",e.fillOpacity=null!==(d=this.getHighlightStyle(i,t.datumIndex).opacity)&&void 0!==d?d:1,e.setBoxing(c)})}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t,e=>{e.pointerEvents=1})}makeStylerParams(e){const{id:t,properties:{size:i,maxSize:n,shape:o,fill:s,fillOpacity:r,lineDash:a,lineDashOffset:l,stroke:d,strokeOpacity:c,strokeWidth:u,xKey:h,yKey:p,sizeKey:g,labelKey:m}}=this,f=jM(null!==e&&void 0!==e?e:0);return"bubble"===this.type?{highlightState:f,size:i,maxSize:n,shape:o,fill:s,fillOpacity:r,lineDash:a,lineDashOffset:l,seriesId:t,sizeKey:g,stroke:d,strokeOpacity:c,strokeWidth:u,xKey:h,yKey:p,labelKey:m}:"scatter"===this.type?{highlightState:f,size:i,shape:o,fill:s,fillOpacity:r,lineDash:a,lineDashOffset:l,seriesId:t,stroke:d,strokeOpacity:c,strokeWidth:u,xKey:h,yKey:p,labelKey:m}:this.type}makeLabelFormatterParams(){const{xKey:e,xName:t,yKey:i,yName:n,sizeKey:o,sizeName:s,labelKey:r,labelName:a,legendItemName:l}=this.properties;return{xKey:e,xName:t,yKey:i,yName:n,sizeKey:o,sizeName:s,labelKey:r,labelName:a,legendItemName:l}}getTooltipContent(e){var t;const{id:i,dataModel:n,processedData:o,axes:s,properties:r,ctx:a}=this,{formatManager:l}=a,{xKey:d,xName:c,yKey:u,yName:h,sizeKey:g,sizeName:m,labelKey:f,labelName:v,title:y,tooltip:b,marker:x,legendItemName:C}=r,S=s[_u.X],w=s[_u.Y];if(!n||!o||!S||!w)return;const M=null===(t=o.dataSources.get(this.id))||void 0===t||null===(t=t.data)||void 0===t?void 0:t[e],k=n.resolveColumnById(this,"xValue",o)[e],D=n.resolveColumnById(this,"yValue",o)[e];if(null==k)return;const I=[];if(this.isLabelEnabled()&&null!=f){const t=n.resolveColumnById(this,"labelValue",o)[e],s=l.format(this.callWithContext.bind(this),{type:"category",value:t,datum:M,seriesId:i,legendItemName:C,key:f,source:"tooltip",property:"label",domain:[],boundSeries:this.getFormatterContext("label")});I.push({label:v,fallbackLabel:f,value:null!==s&&void 0!==s?s:Fg(t)})}if(I.push({label:c,fallbackLabel:d,value:this.getAxisValueText(S,"tooltip",k,M,d,C),missing:VI(k)},{label:h,fallbackLabel:u,value:this.getAxisValueText(w,"tooltip",D,M,u,C),missing:VI(D)}),null!=g){const t=n.resolveColumnById(this,"sizeValue",o)[e];if(null!=t){const e=n.getDomain(this,"sizeValue","value",o).domain,s=l.format(this.callWithContext.bind(this),{type:"number",value:t,datum:M,seriesId:i,legendItemName:C,key:g,source:"tooltip",property:"size",boundSeries:this.getFormatterContext("size"),domain:e,fractionDigits:void 0});I.push({label:m,fallbackLabel:g,value:null!==s&&void 0!==s?s:Fg(t)})}}const A=this.getMarkerStyle(x,{datum:M,datumIndex:e},{xKey:d,yKey:u,sizeKey:g,labelKey:f},{resolveMarkerSubPath:[]});return this.formatTooltipWithContext(b,{title:y,symbol:this.legendItemSymbol(),data:I},p(p({seriesId:i,datum:M,title:u,xKey:d,xName:c,yKey:u,yName:h,sizeKey:g,sizeName:m,labelKey:f,labelName:v,legendItemName:C},A),this.getModuleTooltipParams()))}legendItemSymbol(){const e=this.getStyle();return{marker:this.getMarkerStyle(this.properties.marker,{},void 0,{isHighlight:!1,checkForHighlight:!1,resolveMarkerSubPath:[]},e)}}getLegendData(){var e,t;const{id:i,ctx:{legendManager:n},visible:o}=this,{yKey:s,yName:r,legendItemName:a,title:l,showInLegend:d}=this.properties;return[{legendType:"category",id:i,itemId:s,seriesId:i,enabled:o&&n.getItemEnabled({seriesId:i,itemId:s}),label:{text:null!==(e=null!==(t=null!==a&&void 0!==a?a:l)&&void 0!==t?t:r)&&void 0!==e?e:s},symbol:this.legendItemSymbol(),legendItemName:a,hideInLegend:!d}]}animateEmptyUpdateReady(e){let{datumSelection:t,labelSelection:i}=e;!function(e,t){let{id:i}=e;for(var n=arguments.length,o=new Array(n>2?n-2:0),s=2;s<n;s++)o[s-2]=arguments[s];Zk(i,"markers",t,o,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1},{phase:"initial"});for(const r of o)r.cleanup()}(this,this.ctx.animationManager,t),iP(this,"labels",this.ctx.animationManager,i)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new FI}getStyle(e){var t,i,n,o,s,r,a,l,d,c;const{properties:u}=this;let h={};if(u.styler){var p;const t=this.makeStylerParams(e),i=null!==(p=this.cachedCallWithContext(u.styler,t))&&void 0!==p?p:{},n=this.ctx.optionsGraphService.resolvePartial(["series","".concat(this.declarationOrder)],i,{pick:!1});h=null!==n&&void 0!==n?n:{}}return{fill:null!==(t=h.fill)&&void 0!==t?t:u.fill,fillOpacity:null!==(i=h.fillOpacity)&&void 0!==i?i:u.fillOpacity,lineDash:null!==(n=h.lineDash)&&void 0!==n?n:u.lineDash,lineDashOffset:null!==(o=h.lineDashOffset)&&void 0!==o?o:u.lineDashOffset,shape:null!==(s=h.shape)&&void 0!==s?s:u.shape,size:null!==(r=h.size)&&void 0!==r?r:u.size,maxSize:null!==(a=h.maxSize)&&void 0!==a?a:u.maxSize,stroke:null!==(l=h.stroke)&&void 0!==l?l:u.stroke,strokeOpacity:null!==(d=h.strokeOpacity)&&void 0!==d?d:u.strokeOpacity,strokeWidth:null!==(c=h.strokeWidth)&&void 0!==c?c:u.strokeWidth}}getSizeRange(){const{size:e,maxSize:t}=this.getStyle();return[e,t]}getFormattedMarkerStyle(e){const{xKey:t,yKey:i,sizeKey:n,labelKey:o,marker:s}=this.properties;return this.getMarkerStyle(s,e,{xKey:t,yKey:i,sizeKey:n,labelKey:o},{resolveMarkerSubPath:[]})}computeFocusBounds(e){return NO(this,e)}hasItemStylers(){var e,t;const{styler:i,itemStyler:n,marker:o,label:s}=this.properties;return!!(null!==(e=null!==(t=null!==i&&void 0!==i?i:n)&&void 0!==t?t:o.itemStyler)&&void 0!==e?e:s.itemStyler)}initQuadTree(e){AP(e,this.datumNodesIter())}pickNodeDataClosestDatum(e){return LP(this,e)}};dB.className="BubbleSeries",dB.type="bubble";var cB={series:{shape:"circle",size:7,maxSize:30,fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",TA],["image",GA],["pattern",OA]]},stroke:{$palette:"stroke"},fillOpacity:.8,maxRenderedItems:2e3,label:p(p({},WA),{},{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}),tooltip:{range:{$path:["/tooltip/range","nearest"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","node"]}}},highlight:{enabled:!0,unhighlightedItem:{opacity:.6},unhighlightedSeries:{opacity:.2}}}},uB={type:"series",name:"bubble",chartType:"cartesian",version:GC,dependencies:[uz],options:SN,predictAxis:xE,defaultAxes:{x:{type:zh.NUMBER,position:Fh.BOTTOM},y:{type:zh.NUMBER,position:Fh.LEFT}},axisKeys:{[_u.X]:"xKeyAxis",[_u.Y]:"yKeyAxis"},themeTemplate:cB,create:e=>new dB(e)},hB=class extends ZE{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new rF,this.label=new iD,this.tooltip=dP()}getStyle(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:o,lineDash:s,lineDashOffset:r,cornerRadius:a}=this;return{fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:o,lineDash:s,lineDashOffset:r,cornerRadius:a,opacity:1}}};Ab([ru],hB.prototype,"xKey",2),Ab([ru],hB.prototype,"yKey",2),Ab([ru],hB.prototype,"xName",2),Ab([ru],hB.prototype,"yName",2),Ab([ru],hB.prototype,"fill",2),Ab([ru],hB.prototype,"fillOpacity",2),Ab([ru],hB.prototype,"stroke",2),Ab([ru],hB.prototype,"strokeWidth",2),Ab([ru],hB.prototype,"strokeOpacity",2),Ab([ru],hB.prototype,"lineDash",2),Ab([ru],hB.prototype,"lineDashOffset",2),Ab([ru],hB.prototype,"cornerRadius",2),Ab([ru],hB.prototype,"areaPlot",2),Ab([ru],hB.prototype,"bins",2),Ab([ru],hB.prototype,"aggregation",2),Ab([ru],hB.prototype,"binCount",2),Ab([ru],hB.prototype,"shadow",2),Ab([ru],hB.prototype,"label",2),Ab([ru],hB.prototype,"tooltip",2);var pB=class extends XE{constructor(e){super({moduleCtx:e,propertyKeys:UE,propertyNames:YE,categoryKey:void 0,pickModes:[1,0],datumSelectionGarbageCollection:!0,alwaysClip:!0,animationResetFns:{datum:vO,label:oP}}),this.properties=new hB,this.calculatedBins=[]}get hasData(){return this.calculatedBins.length>0}deriveBins(e){const t=Wf(e[0],e[1],10).ticks,i=$f(e[0],e[1],10),[n]=t;return[[n-i,n],...t.map(e=>[e,e+i])]}calculateNiceBins(e,t){const i=Math.floor(e[0]),n=e[1],o=t||1,{start:s,binSize:r}=this.calculateNiceStart(i,n,o);return this.getBins(s,n,r,o)}getBins(e,t,i,n){const o=[],s=this.calculatePrecision(i);for(let r=0;r<n;r++){const a=Math.round((e+r*i)*s)/s;let l=Math.round((e+(r+1)*i)*s)/s;r===n-1&&(l=Math.max(l,t)),o[r]=[a,l]}return o}calculatePrecision(e){let t=10;if(Number.isFinite(e)&&e>0)for(;e<1;)t*=10,e*=10;return t}calculateNiceStart(e,t,i){const n=Math.abs(t-e)/i,o=Math.floor(Math.log10(n)),s=Math.pow(10,o);return{start:Math.floor(e/s)*s,binSize:n}}async processData(e){var t,i;const{visible:n}=this,{xKey:o,yKey:s,areaPlot:r,aggregation:a}=this.properties,l=null===(t=this.axes[_u.X])||void 0===t?void 0:t.scale,d=null===(i=this.axes[_u.Y])||void 0===i?void 0:i.scale,{xScaleType:c,yScaleType:u}=this.getScaleInformation({yScale:d,xScale:l}),h=n?{}:{forceValue:0},g=[sM(o,c),gM];if(s){let e=ow("groupAgg",{visible:n});"count"===a||("sum"===a?e=function(e,t){var i;const n=null===(i=null===t||void 0===t?void 0:t.visible)||void 0===i||i;return{id:e,type:"aggregate",matchGroupIds:null!==t&&void 0!==t&&t.matchGroupId?[null===t||void 0===t?void 0:t.matchGroupId]:void 0,aggregateFunction:e=>iw(e),groupAggregateFunction:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];var i,o;return n&&(t[0]+=null!==(i=null===e||void 0===e?void 0:e[0])&&void 0!==i?i:0,t[1]+=null!==(o=null===e||void 0===e?void 0:e[1])&&void 0!==o?o:0),t}}}("groupAgg",{visible:n}):"mean"===a&&(e=function(e,t){var i;const n=null===(i=null===t||void 0===t?void 0:t.visible)||void 0===i||i,o={id:e,matchGroupIds:null!==t&&void 0!==t&&t.matchGroupId?[null===t||void 0===t?void 0:t.matchGroupId]:void 0,type:"aggregate",aggregateFunction:e=>iw(e),groupAggregateFunction:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,-1];var i,o;return n&&(t[0]+=null!==(i=null===e||void 0===e?void 0:e[0])&&void 0!==i?i:0,t[2]++,t[1]+=null!==(o=null===e||void 0===e?void 0:e[1])&&void 0!==o?o:0),t},finalFunction:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0];const t=e[0]+e[1];return t>=0?[0,t/e[2]]:[t/e[2],0]}};return o}("groupAgg",{visible:n}))),r&&(e=sw("groupAgg",e)),g.push(rM(s,u,p({invalidValue:void 0},h)),e)}else{g.push(function(e){return p({property:e,type:"value",valueType:"range",missingValue:1,processor:function(){return function(){return 1}}},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}("count"));let e=ow("groupAgg",{visible:n});r&&(e=sw("groupAgg",e)),g.push(e)}let m=[];const{dataModel:f,processedData:v}=await this.requestDataModel(e,this.data,{props:g,groupByFn:e=>{var t;const i=lw(e.domain.keys[0]);if(0===i.length)return e.domain.groups=[],()=>[];const n=nl(this.properties.binCount)?this.calculateNiceBins(i,this.properties.binCount):null!==(t=this.properties.bins)&&void 0!==t?t:this.deriveBins(i),o=n.length;return m=[...n],e=>{let t=e[0];if($a(t)&&(t=t.getTime()),!nl(t))return[];for(let i=0;i<o;i++){const e=n[i];if(t>=e[0]&&t<e[1])return e;if(i===o-1&&t<=e[1])return e}return[]}}}),y=v,b=new Map;for(const[p,x]of y.groups.entries()){const e=x.keys;b.set(AM(...e),{group:x,groupIndex:p})}this.calculatedBins=m.map(e=>{const t=b.get(AM(...e));if(t){const{group:i,groupIndex:n}=t,[[o,s]=[0,0]]=i.aggregation;return{domain:e,datum:[...f.forEachDatum(this,y,i,n)],groupIndex:n,frequency:this.frequency(i),total:o+s}}return{domain:e,datum:[],groupIndex:-1,frequency:0,total:0}}),this.animationState.transition("updateData")}xCoordinateRange(){return[Number.NaN,Number.NaN]}yCoordinateRange(){return[Number.NaN,Number.NaN]}getSeriesDomain(e){var t,i;const{processedData:n,dataModel:o}=this;if(!n||!o||!this.calculatedBins.length)return{domain:[]};const s=o.getDomain(this,"groupAgg","aggregate",n).domain,r=this.calculatedBins[0].domain[0],a=this.calculatedBins[(null!==(t=null===(i=this.calculatedBins)||void 0===i?void 0:i.length)&&void 0!==t?t:0)-1].domain[1];return e===_u.X?{domain:lw([r,a])}:{domain:lw(s)}}getSeriesRange(e,t){let[i,n]=t;const{dataModel:o,processedData:s}=this;if(!o||"grouped"!==(null===s||void 0===s?void 0:s.type))return[Number.NaN,Number.NaN];const r=this.axes[_u.X].scale;let a=-1/0;for(const{keys:l,aggregation:d}of s.groups){const[[e,t]=[0,0]]=d,[o,s]=l,[c,u]=$u([r.convert(o),r.convert(s)]);if(u>=i&&c<=n){const i=e+t;a=Math.max(a,i)}}return 0>a?[Number.NaN,Number.NaN]:[0,a]}frequency(e){return e.datumIndices.reduce((e,t)=>e+t.length,0)}createNodeData(){var e;const{axes:t,processedData:i,dataModel:n}=this,o=t[_u.X],s=t[_u.Y];if(!o||!s||!n)return;const{scale:r}=o,{scale:a}=s,{xKey:l,yKey:d,xName:c,yName:u,label:h}=this.properties,p=!this.ctx.animationManager.isSkipped(),g=[],m={itemId:null!==(e=this.properties.yKey)&&void 0!==e?e:this.id,nodeData:g,labelData:g,scales:this.calculateScaling(),animationValid:!0,visible:this.visible||p,styles:tk(this.getItemStyle.bind(this))};if(null==i||"grouped"!==i.type)return m;for(const{domain:f,datum:v,groupIndex:y,frequency:b,total:x}of this.calculatedBins){const[e,t]=f,i=r.convert(e),n=r.convert(t),o=a.convert(0),p=a.convert(x),m=Math.abs(n-i),C=Math.abs(p-o),S=Math.min(i,n),w=Math.min(o,p);let M;h.enabled&&0!==x&&(M={x:S+m/2,y:w+C/2,text:this.getLabelText(x,v,d,"y",[],h,{value:x,datum:v,xKey:l,yKey:d,xName:c,yName:u})});const k={x:S+m/2,y:w+C/2},D=s.isReversed();g.push({series:this,datumIndex:y,datum:v,aggregatedValue:x,frequency:b,domain:f,yKey:d,xKey:l,x:S,y:w,xValue:i,yValue:p,width:m,height:C,midPoint:k,topLeftCornerRadius:!D,topRightCornerRadius:!D,bottomRightCornerRadius:D,bottomLeftCornerRadius:D,label:M,crisp:!0})}return g.sort((e,t)=>e.x-t.x),m}nodeFactory(){return new pC}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e;return i.update(t,void 0,e=>AM(...e.domain))}getItemStyle(e,t,i){const{properties:n}=this;return xu(this.getHighlightStyle(t,e,i),n.getStyle())}updateDatumStyles(e){const{datumSelection:t,isHighlight:i}=e;t.each((e,n)=>{t.isGarbage(e)||(n.style=this.getItemStyle(n.datumIndex,i))})}updateDatumNodes(e){const{contextNodeData:t}=this;if(!t)return;const i=this.ctx.highlightManager.getActiveHighlight(),{shadow:n}=this.properties,o=this.getShapeFillBBox();e.datumSelection.each((s,r)=>{var a;const l=null!==(a=r.style)&&void 0!==a?a:t.styles[this.getHighlightState(i,e.isHighlight,r.datumIndex)],{cornerRadius:d=0}=l,{topLeftCornerRadius:c,topRightCornerRadius:u,bottomRightCornerRadius:h,bottomLeftCornerRadius:p}=r;s.setStyleProperties(l,o),s.topLeftCornerRadius=c?d:0,s.topRightCornerRadius=u?d:0,s.bottomRightCornerRadius=h?d:0,s.bottomLeftCornerRadius=p?d:0,s.crisp=r.crisp,s.fillShadow=n})}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t,e=>{e.pointerEvents=1,e.textAlign="center",e.textBaseline="middle"})}updateLabelNodes(e){var t;const i=this.isLabelEnabled(),{isHighlight:n=!1}=e,o=null===(t=this.ctx.highlightManager)||void 0===t?void 0:t.getActiveHighlight();e.labelSelection.each((e,t)=>{const s=QE(this,t,this.properties,this.properties.label,n,o),{enabled:r,fontStyle:a,fontWeight:l,fontSize:d,fontFamily:c,color:u}=s;var h;r&&i&&null!==t&&void 0!==t&&t.label?(e.text=t.label.text,e.x=t.label.x,e.y=t.label.y,e.fontStyle=a,e.fontWeight=l,e.fontFamily=c,e.fontSize=d,e.fill=u,e.visible=!0,e.fillOpacity=null!==(h=this.getHighlightStyle(n,t.datumIndex).opacity)&&void 0!==h?h:1,e.setBoxing(s)):e.visible=!1})}initQuadTree(e){const{value:t}=this.contentGroup.children().next();t instanceof Gx&&AP(e,t.children())}pickNodeClosestDatum(e){return LP(this,e)}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,axes:o,properties:s,ctx:{localeManager:r}}=this,{xKey:a,xName:l,yKey:d,yName:c,tooltip:u,legendItemName:h}=s,g=o[_u.X],m=o[_u.Y];if(!i||"grouped"!==(null===n||void 0===n?void 0:n.type)||!g||!m)return;const f=n.groups[e],{aggregation:v,keys:y}=f,[[b,x]=[0,0]]=v,C=this.frequency(f),S=y,[w,M]=S,k=b+x,D={data:[...i.forEachDatum(this,n,f,e)],aggregatedValue:k,frequency:C,domain:S},I=[{label:l,fallbackLabel:a,value:"".concat(this.getAxisValueText(g,"tooltip",w,D,a,h)," - ").concat(this.getAxisValueText(g,"tooltip",M,D,a,h))},{label:r.t("seriesHistogramTooltipFrequency"),value:this.getAxisValueText(m,"tooltip",C,D,d,h)}];if(null!=d){let e;switch(s.aggregation){case"sum":e=r.t("seriesHistogramTooltipSum",{yName:null!==c&&void 0!==c?c:d});break;case"mean":e=r.t("seriesHistogramTooltipMean",{yName:null!==c&&void 0!==c?c:d});break;case"count":e=r.t("seriesHistogramTooltipCount",{yName:null!==c&&void 0!==c?c:d})}I.push({label:e,value:this.getAxisValueText(m,"tooltip",k,D,d,h)})}return this.formatTooltipWithContext(u,{symbol:this.legendItemSymbol(),data:I},p({seriesId:t,datum:D,title:c,xKey:a,xName:l,yKey:d,yName:c,xRange:[w,M],frequency:C},this.getItemStyle(e,!1)))}legendItemSymbol(){var e;const{fill:t,fillOpacity:i,stroke:n,strokeWidth:o,strokeOpacity:s,lineDash:r,lineDashOffset:a}=this.properties;return{marker:{fill:null!==(e=Qg(t))&&void 0!==e?e:"rgba(0, 0, 0, 0)",stroke:null!==n&&void 0!==n?n:"rgba(0, 0, 0, 0)",fillOpacity:i,strokeOpacity:s,strokeWidth:o,lineDash:r,lineDashOffset:a}}}getLegendData(e){var t;if("category"!==e)return[];const{id:i,ctx:{legendManager:n},visible:o}=this,{xKey:s,yName:r,showInLegend:a}=this.properties;return[{legendType:"category",id:i,itemId:s,seriesId:i,enabled:o&&n.getItemEnabled({seriesId:i,itemId:s}),label:{text:null!==(t=null!==r&&void 0!==r?r:s)&&void 0!==t?t:"Frequency"},symbol:this.legendItemSymbol(),hideInLegend:!a}]}animateEmptyUpdateReady(e){let{datumSelection:t,labelSelection:i}=e;const n=fO(gO(!0,this.axes,"normal"),"unknown");$k(this.id,"datums",this.ctx.animationManager,[t],n),iP(this,"labels",this.ctx.animationManager,i)}animateWaitingUpdateReady(e){const t=fO(gO(!0,this.axes,"normal"),"added"),i={changed:!0,added:new Set,updated:new Set,removed:new Set,moved:new Set};$k(this.id,"datums",this.ctx.animationManager,[e.datumSelection],t,(e,t)=>AM(...t.domain),i),null!==i&&void 0!==i&&i.changed&&iP(this,"labels",this.ctx.animationManager,e.labelSelection)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds(e){var t;let{datumIndex:i}=e;return bO(this,null===(t=this.contextNodeData)||void 0===t?void 0:t.nodeData[i])}hasItemStylers(){return null!=this.properties.label.itemStyler}};pB.className="HistogramSeries",pB.type="histogram";var gB={series:{fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",DA],["image",GA],["pattern",OA]]},stroke:{$palette:"stroke"},strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:p(p({},WA),{},{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"}}),shadow:{enabled:!1,color:Hh,xOffset:3,yOffset:3,blur:5},highlight:{enabled:!0,unhighlightedItem:{opacity:.6},unhighlightedSeries:{opacity:.2}}}},mB={type:"series",name:"histogram",chartType:"cartesian",version:GC,dependencies:[uz],options:MN,predictAxis:CE,defaultAxes:{x:{type:zh.NUMBER,position:Fh.BOTTOM},y:{type:zh.NUMBER,position:Fh.LEFT}},axisKeys:{[_u.X]:"xKeyAxis",[_u.Y]:"yKeyAxis"},themeTemplate:gB,create:e=>new pB(e)};function fB(e,t,i,n,o,s,r,a){const l=e[s];if(null==l)return!1;const d=fh(Number.isFinite(t)?mh(l,t,i,r):gh(s,a),o);return s===n[d+Qu]||s===n[d+Ju]||s===n[d+eh]||s===n[d+th]}function vB(e,t,i,n,o,s,r,a){let l=0;for(let u=0;u<r;u++)fB(e,t,i,n,o,u,s,r)&&l++;const d=(null===a||void 0===a?void 0:a.length)===l?a:new Uint32Array(l);let c=0;for(let u=0;u<r;u++)fB(e,t,i,n,o,u,s,r)&&(d[c++]=u);return d}function yB(e,t,i,n,o,s,r,a,l){let d=0;for(let h=0;h<e.length;h++){fB(t,i,n,o,s,e[h],r,a)&&d++}const c=(null===l||void 0===l?void 0:l.length)===d?l:new Uint32Array(d);let u=0;for(let h=0;h<e.length;h++){const l=e[h];fB(t,i,n,o,s,l,r,a)&&(c[u++]=l)}return c}function bB(e,t,i,n){const o=t.length;if(o<nh)return;const[s,r]=e,{xNeedsValueOf:a,yNeedsValueOf:l,existingFilters:d}=n;let c=hh(t,s,r,{xNeedsValueOf:a});const u=null===d||void 0===d?void 0:d.find(e=>e.maxRange===c);let{indexData:h,valueData:p}=bh(t,i,i,s,r,c,{xNeedsValueOf:a,yNeedsValueOf:l,reuseIndexData:null===u||void 0===u?void 0:u.indexData,reuseValueData:null===u||void 0===u?void 0:u.valueData}),g=vB(t,s,r,h,c,a,o,null===u||void 0===u?void 0:u.indices);const m=[{maxRange:c,indices:g,indexData:h,valueData:p}];for(;g.length>10&&c>64;){const e=c,i=Math.trunc(e/2),n=null===d||void 0===d?void 0:d.find(e=>e.maxRange===i),l=xh(h,p,e,{reuseIndexData:null===n||void 0===n?void 0:n.indexData,reuseValueData:null===n||void 0===n?void 0:n.valueData});c=l.maxRange,h=l.indexData,p=l.valueData,g=yB(g,t,s,r,h,c,a,o,null===n||void 0===n?void 0:n.indices),m.push({maxRange:c,indices:g,indexData:h,valueData:p})}return m.reverse(),m}var xB=Im(function(e,t,i,n,o,s){const[r,a]=ph(e,n);return bB([r,a],t,i,{xNeedsValueOf:o,yNeedsValueOf:s})});function CB(e,t,i,n,o,s,r){const a=t.resolveColumnById(o,"xValue",i),l=t.resolveColumnById(o,n,i),d=t.getDomain(o,"xValue","value",i),c=t.resolveColumnNeedsValueOf(o,"xValue",i),u=t.resolveColumnNeedsValueOf(o,n,i),[h,p]=ph(e,d);return function(e,t,i,n){const o=t.length;if(o<nh)return;const[s,r]=e,{xNeedsValueOf:a,yNeedsValueOf:l,targetRange:d,existingFilters:c}=n,u=hh(t,s,r,{xNeedsValueOf:a}),h=Math.min(u,Xu(Math.max(d,sh))),p=null===c||void 0===c?void 0:c.find(e=>e.maxRange===h),{indexData:g,valueData:m}=bh(t,i,i,s,r,h,{xNeedsValueOf:a,yNeedsValueOf:l,reuseIndexData:null===p||void 0===p?void 0:p.indexData,reuseValueData:null===p||void 0===p?void 0:p.valueData}),f=vB(t,s,r,g,h,a,o,null===p||void 0===p?void 0:p.indices);return{immediate:[{maxRange:h,indices:f,indexData:g,valueData:m}],computeRemaining:function(){var e;const n=bB([s,r],t,i,{xNeedsValueOf:a,yNeedsValueOf:l,existingFilters:c});return null!==(e=null===n||void 0===n?void 0:n.filter(e=>e.maxRange!==h))&&void 0!==e?e:[]}}}([h,p],a,l,{xNeedsValueOf:c,yNeedsValueOf:u,targetRange:s,existingFilters:r})}var SB=class extends ZE{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new Ah,this.marker=new sP,this.label=new iD,this.tooltip=dP(),this.connectMissingData=!1,this.sparklineMode=!1}};Ab([ru],SB.prototype,"xKey",2),Ab([ru],SB.prototype,"yKey",2),Ab([ru],SB.prototype,"xName",2),Ab([ru],SB.prototype,"yName",2),Ab([ru],SB.prototype,"yFilterKey",2),Ab([ru],SB.prototype,"stackGroup",2),Ab([ru],SB.prototype,"normalizedTo",2),Ab([ru],SB.prototype,"title",2),Ab([ru],SB.prototype,"stroke",2),Ab([ru],SB.prototype,"strokeWidth",2),Ab([ru],SB.prototype,"strokeOpacity",2),Ab([ru],SB.prototype,"lineDash",2),Ab([ru],SB.prototype,"lineDashOffset",2),Ab([ru],SB.prototype,"interpolation",2),Ab([ru],SB.prototype,"styler",2),Ab([ru],SB.prototype,"marker",2),Ab([ru],SB.prototype,"label",2),Ab([ru],SB.prototype,"tooltip",2),Ab([ru],SB.prototype,"connectMissingData",2),Ab([ru],SB.prototype,"sparklineMode",2);var wB=class extends XE{constructor(e){super({moduleCtx:e,propertyKeys:UE,propertyNames:YE,categoryKey:"xValue",pickModes:[2,1,0],datumSelectionGarbageCollection:!1,segmentedDataNodes:!1,animationResetFns:{path:OO({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:oP,datum:(e,t)=>p(p({},{opacity:1,scalingX:1,scalingY:1}),LO(0,t))},clipFocusBox:!1}),this.properties=new SB,this.aggregationManager=new JO}get pickModeAxis(){return this.properties.sparklineMode?"main":"main-category"}isNormalized(){return null!=this.properties.normalizedTo}async processData(e){var t,i;if(null==this.data)return;const{data:n,visible:o,seriesGrouping:{groupIndex:s=this.id,stackCount:r=0}={}}=this,{xKey:a,yKey:l,yFilterKey:d,connectMissingData:c,normalizedTo:u}=this.properties,h=null===(t=this.axes[_u.X])||void 0===t?void 0:t.scale,g=null===(i=this.axes[_u.Y])||void 0===i?void 0:i.scale,{isContinuousX:m,xScaleType:f,yScaleType:v}=this.getScaleInformation({xScale:h,yScale:g}),y=r>1||null!=u,b={invalidValue:null};c&&y&&(b.invalidValue=0),y&&!o&&(b.forceValue=0);const x={value:"area-stack-".concat(s,"-yValue"),marker:"area-stack-".concat(s,"-yValues-marker")},C=[];m&&!y||C.push(sM(a,f,{id:"xKey"})),C.push(rM(a,f,{id:"xValue"}),rM(l,v,p(p({id:"yValueRaw"},b),{},{invalidValue:void 0}))),null!=d&&C.push(rM(d,v,{id:"yFilterRaw"})),y&&C.push(...uM(l,"normal",p(p({id:"yValueCumulative"},b),{},{groupId:x.marker}),v)),Ka(u)&&C.push(rM(l,v,p(p({id:"yValue"},b),{},{groupId:x.value})),fM(Object.values(x),u)),this.needsDataModelDiff()&&(C.push(SM(m?["xValue"]:void 0)),this.processedData&&C.push(IM(this.id,this.processedData)));const{dataModel:S,processedData:w}=await this.requestDataModel(e,n,{props:C,groupByKeys:y,groupByData:!y});this.aggregateData(S,w),this.animationState.transition("updateData")}yValueKey(){return this.isNormalized()?"yValue":"yValueRaw"}yCumulativeKey(e){return"grouped"===e.type?"yValueCumulative":this.yValueKey()}xCoordinateRange(e,t){const{marker:i}=this.properties,n=this.axes[_u.X].scale.convert(e),o=i.enabled?.5*i.size*t:0;return[n-o,n+o]}yCoordinateRange(e,t){const{marker:i}=this.properties,n=this.axes[_u.Y].scale.convert(e[0]),o=i.enabled?.5*i.size*t:0;return[n-o,n+o]}getSeriesDomain(e){const{dataModel:t,processedData:i,axes:n}=this;if(!t||!i)return{domain:[]};const o=n[_u.Y];if(e===_u.X){const e=t.resolveProcessedDataDefById(this,"xValue"),n=t.getDomain(this,"xValue","value",i);if("value"===(null===e||void 0===e?void 0:e.def.type)&&"category"===e.def.valueType){const e=t.getKeySortMetadata(this,"xValue",i);return{domain:n.domain,sortMetadata:e}}return{domain:lw(Rg(n.domain))}}const s=this.domainForClippedRange(_u.Y,[this.yCumulativeKey(i)],"xValue");if(this.isNormalized()&&o instanceof GE&&!(o instanceof Oz)){return{domain:lw(Number.isFinite(s[1]-s[0])?[Math.min(s[0],0),Math.max(s[1],0)]:[])}}return{domain:lw(s)}}getSeriesRange(e,t){return this.domainForVisibleRange(_u.Y,[this.yCumulativeKey(this.processedData)],"xValue",t)}getZoomRangeFittingItems(e,t,i){return this.zoomFittingVisibleItems("xValue",[this.yCumulativeKey(this.processedData)],e,t,i)}getVisibleItems(e,t,i){return this.countVisibleItems("xValue",[this.yCumulativeKey(this.processedData)],e,t,i)}aggregateData(e,t){if(this.aggregationManager.markStale(),"ungrouped"!==t.type)return;if(eM(t))return;const i=this.axes[_u.X];if(null==i)return;const n=this.estimateTargetRange();this.aggregationManager.aggregate({computePartial:o=>CB(i.scale.type,e,t,this.yCumulativeKey(t),this,n,o),computeFull:n=>function(e,t,i,n,o,s){const r=t.resolveColumnById(o,"xValue",i),a=t.resolveColumnById(o,n,i),l=t.getDomain(o,"xValue","value",i),d=t.resolveColumnNeedsValueOf(o,"xValue",i),c=t.resolveColumnNeedsValueOf(o,n,i);if(s){const[t,i]=ph(e,l);return bB([t,i],r,a,{xNeedsValueOf:d,yNeedsValueOf:c,existingFilters:s})}return xB(e,r,a,l,d,c)}(i.scale.type,e,t,this.yCumulativeKey(t),this,n),targetRange:n});const o=this.aggregationManager.filters;o&&o.length>0&&sa.record("".concat(this.type,":aggregation"),o.map(e=>e.maxRange))}estimateTargetRange(){var e,t,i;const n=this.axes[_u.X];if(null!==n&&void 0!==n&&null!==(e=n.scale)&&void 0!==e&&e.range){const[e,t]=n.scale.range;return Math.abs(t-e)}return null!==(t=null===(i=this.ctx.scene)||void 0===i||null===(i=i.canvas)||void 0===i?void 0:i.width)&&void 0!==t?t:800}createNodeDatumContext(e,t){var i,n,o,s,r;const{dataModel:a,processedData:l}=this;if(!a||!l)return;const d=null!==(i=null===(n=l.dataSources.get(this.id))||void 0===n?void 0:n.data)&&void 0!==i?i:[],[c,u]=e.range,h=Math.abs(u-c);this.aggregationManager.ensureLevelForRange(h);const p=this.aggregationManager.getFilterForRange(h),g=null!=(null===(o=this.contextNodeData)||void 0===o?void 0:o.nodeData)&&(null!=l.changeDescription||!eM(l)||null!=p);return{rawData:d,xValues:a.resolveColumnById(this,"xValue",l),yRawValues:a.resolveColumnById(this,"yValueRaw",l),yCumulativeValues:a.resolveColumnById(this,this.yCumulativeKey(l),l),selectionValues:this.properties.yFilterKey?a.resolveColumnById(this,"yFilterRaw",l):void 0,xScale:e,yScale:t,xOffset:(null!==(s=e.bandwidth)&&void 0!==s?s:0)/2,yOffset:(null!==(r=t.bandwidth)&&void 0!==r?r:0)/2,size:this.properties.marker.enabled?this.properties.marker.size:0,yDomain:this.getSeriesDomain(_u.Y).domain,labelsEnabled:this.properties.label.enabled,animationEnabled:!this.ctx.animationManager.isSkipped(),canIncrementallyUpdate:g,dataAggregationFilter:p,range:h,xKey:this.properties.xKey,yKey:this.properties.yKey,xName:this.properties.xName,yName:this.properties.yName,legendItemName:this.properties.legendItemName,connectMissingData:this.properties.connectMissingData,capDefaults:{lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},nodeData:g?this.contextNodeData.nodeData:[],spanPoints:[],nodeIndex:0}}handleDatum(e,t,i){var n;if(t.datum=e.rawData[i],t.xDatum=e.xValues[i],t.yDatum=e.yRawValues[i],t.yCumulative=e.yCumulativeValues[i],t.selected=null===(n=e.selectionValues)||void 0===n?void 0:n[i],t.x=e.xScale.convert(t.xDatum)+e.xOffset,t.y=e.yScale.convert(t.yCumulative)+e.yOffset,Number.isFinite(t.x)){if(null!=t.yDatum){const n=e.labelsEnabled?this.getLabelText(t.yDatum,t.datum,e.yKey,"y",e.yDomain,this.properties.label,{value:t.yDatum,datum:t.datum,xKey:e.xKey,yKey:e.yKey,xName:e.xName,yName:e.yName,legendItemName:e.legendItemName}):void 0;if(e.canIncrementallyUpdate&&e.nodeIndex<e.nodeData.length){const o=e.nodeData[e.nodeIndex];o.datum=t.datum,o.datumIndex=i,o.point={x:t.x,y:t.y,size:e.size},o.midPoint={x:t.x,y:t.y},o.cumulativeValue=t.yCumulative,o.yValue=t.yDatum,o.xValue=t.xDatum,o.labelText=n,o.selected=t.selected}else e.nodeData.push({series:this,datum:t.datum,datumIndex:i,yKey:e.yKey,xKey:e.xKey,point:{x:t.x,y:t.y,size:e.size},midPoint:{x:t.x,y:t.y},cumulativeValue:t.yCumulative,yValue:t.yDatum,xValue:t.xDatum,capDefaults:e.capDefaults,labelText:n,selected:t.selected});e.nodeIndex++}this.updateSpanPoints(e,t)}}updateSpanPoints(e,t){const i=e.spanPoints.at(-1);if(null!=t.yDatum){const n={point:{x:t.x,y:t.y},xDatum:t.xDatum,yDatum:t.yCumulative};Array.isArray(i)?i.push(n):(null==i||(i.skip+=1),e.spanPoints.push([n]))}else e.connectMissingData||(Array.isArray(i)||null==i?e.spanPoints.push({skip:0}):i.skip+=1)}createNodeData(){var e,t,i,n;const{processedData:o,axes:s}=this,r=s[_u.X],a=s[_u.Y];if(!o||!r||!a)return;const l=r.scale,d=a.scale,c=this.createNodeDatumContext(l,d);if(!c)return;const u={datum:void 0,xDatum:void 0,yDatum:void 0,yCumulative:0,selected:void 0,x:0,y:0},h=null===(e=c.dataAggregationFilter)||void 0===e?void 0:e.indices;let[p,g]=this.visibleRangeIndices("xValue",r.range,h);p=Math.max(p-1,0),g=Math.min(g+1,null!==(t=null===h||void 0===h?void 0:h.length)&&void 0!==t?t:c.xValues.length),o.input.count<1e3&&(p=0,g=o.input.count);for(let x=p;x<g;x+=1){var m;this.handleDatum(c,u,null!==(m=null===h||void 0===h?void 0:h[x])&&void 0!==m?m:x)}c.canIncrementallyUpdate&&c.nodeIndex<c.nodeData.length&&(c.nodeData.length=c.nodeIndex);const f=c.spanPoints.flatMap(e=>Array.isArray(e)?rO(e,this.properties.interpolation):[]),v={itemId:c.yKey,spans:f},y=null!==(i=null===(n=c.selectionValues)||void 0===n?void 0:n.some((e,t)=>e===c.yRawValues[t]))&&void 0!==i&&i,b=yE(this.properties.segmentation,r,a,this.chart.seriesRect,this.ctx.scene,!1);return{itemId:c.yKey,nodeData:c.nodeData,labelData:c.nodeData,strokeData:v,scales:this.calculateScaling(),visible:this.visible,crossFiltering:y,styles:RO(this,this.properties,this.properties.marker),segments:b}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(e){var t,i;const{paths:[n],visible:o,animationEnabled:s}=e,r=!0===(null===(t=this.contextNodeData)||void 0===t?void 0:t.crossFiltering),a=xu(this.getHighlightStyle(),this.getStyle()),{strokeWidth:l,stroke:d,strokeOpacity:c,lineDash:u,lineDashOffset:h,opacity:p}=a,g=null===(i=this.contextNodeData)||void 0===i?void 0:i.segments;n.setProperties({segments:g,fill:void 0,lineJoin:"round",pointerEvents:1,opacity:p,stroke:d,strokeWidth:l,strokeOpacity:c*(r?.25:1),lineDash:u,lineDashOffset:h}),n.datum=g,s||(n.visible=o),FO(this,n)}updateDatumSelection(e){let{nodeData:t}=e;const{datumSelection:i}=e,{contextNodeData:n,processedData:o,axes:s,properties:r}=this,{marker:a}=r;return t=!0===(null===n||void 0===n?void 0:n.crossFiltering)||TO(o.input.count,s[_u.X].scale,a)?t:[],a.isDirty()&&(i.clear(),i.cleanup()),eM(this.processedData)?i.update(t,void 0,e=>AM(e.xValue)):i.update(t)}updateDatumStyles(e){const{datumSelection:t,isHighlight:i}=e,{marker:n}=this.properties,o=this.ctx.highlightManager.getActiveHighlight();t.each((s,r)=>{if(!t.isGarbage(s)){const t=this.getHighlightState(o,e.isHighlight,r.datumIndex),s=this.getStyle(t),{stroke:a,strokeWidth:l,strokeOpacity:d}=s,c=this.makeItemStylerParams(this.dataModel,this.processedData,r.datumIndex,s.marker);r.style=this.getMarkerStyle(n,r,c,{isHighlight:i,highlightState:t},s.marker,{stroke:a,strokeWidth:l,strokeOpacity:d})}})}updateDatumNodes(e){const{contextNodeData:t}=this;if(!t)return;const{datumSelection:i,isHighlight:n,drawingMode:o}=e,s=this.ctx.animationManager.isSkipped(),r=this.getShapeFillBBox(),a=this.ctx.highlightManager.getActiveHighlight();i.each((e,i)=>{var l;const d=this.getHighlightState(a,n,i.datumIndex),c=null!==(l=i.style)&&void 0!==l?l:t.styles[d];this.applyMarkerStyle(c,e,i.point,r,{applyTranslation:s,selected:i.selected}),e.drawingMode=o}),n||this.properties.marker.markClean()}updateLabelSelection(e){return e.labelSelection.update(this.isLabelEnabled()?e.labelData:[])}updateLabelNodes(e){var t;const{isHighlight:i=!1}=e,n=null===(t=this.ctx.highlightManager)||void 0===t?void 0:t.getActiveHighlight(),o=this.makeLabelFormatterParams();e.labelSelection.each((e,t)=>{const s=QE(this,t,o,this.properties.label,i,n),{enabled:r,fontStyle:a,fontWeight:l,fontSize:d,fontFamily:c,color:u}=s;var h;r&&null!==t&&void 0!==t&&t.labelText?(e.fontStyle=a,e.fontWeight=l,e.fontSize=d,e.fontFamily=c,e.textAlign="center",e.textBaseline="bottom",e.text=t.labelText,e.x=t.point.x,e.y=t.point.y-10,e.fill=u,e.visible=!0,e.fillOpacity=null!==(h=this.getHighlightStyle(i,t.datumIndex).opacity)&&void 0!==h?h:1,e.setBoxing(s)):e.visible=!1})}makeStylerParams(e){const{id:t}=this,{marker:i,lineDash:n,lineDashOffset:o,stroke:s,strokeOpacity:r,strokeWidth:a,xKey:l,yKey:d}=this.properties,c=jM(null!==e&&void 0!==e?e:0);return{marker:{fill:i.fill,fillOpacity:i.fillOpacity,size:i.size,shape:i.shape,stroke:i.stroke,strokeOpacity:i.strokeOpacity,strokeWidth:i.strokeWidth,lineDash:i.lineDash,lineDashOffset:i.lineDashOffset},highlightState:c,lineDash:n,lineDashOffset:o,seriesId:t,stroke:s,strokeOpacity:r,strokeWidth:a,xKey:l,yKey:d}}makeItemStylerParams(e,t,i,n){var o;const{xKey:s,yKey:r}=this.properties,a=e.resolveColumnById(this,"xValue",t)[i],l=e.resolveColumnById(this,"yValueRaw",t)[i],d=e.getDomain(this,"xValue","key",t).domain,c=e.getDomain(this,this.yCumulativeKey(t),"value",t).domain,u=null!==(o=this.filterItemStylerFillParams(n.fill))&&void 0!==o?o:n.fill;return p(p(p({},QM(a,l,s,r,d,c)),{},{xValue:a,yValue:l},n),{},{fill:u})}makeLabelFormatterParams(){const{xKey:e,xName:t,yKey:i,yName:n,legendItemName:o}=this.properties;return{xKey:e,xName:t,yKey:i,yName:n,legendItemName:o}}getTooltipContent(e){var t;const{id:i,dataModel:n,processedData:o,axes:s,properties:r}=this,{xKey:a,xName:l,yKey:d,yName:c,tooltip:u,legendItemName:h}=r,g=s[_u.X],m=s[_u.Y];if(!n||!o||!g||!m)return;const f=null===(t=o.dataSources.get(this.id))||void 0===t||null===(t=t.data)||void 0===t?void 0:t[e],v=n.resolveColumnById(this,"xValue",o)[e],y=n.resolveColumnById(this,"yValueRaw",o)[e];if(null==v)return;const b=this.getStyle(),x=this.makeItemStylerParams(n,o,e,b.marker),C=this.getMarkerStyle(this.properties.marker,{datumIndex:e,datum:f},x,{isHighlight:!1},b.marker);return this.formatTooltipWithContext(u,{heading:this.getAxisValueText(g,"tooltip",v,f,a,h),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:d,value:this.getAxisValueText(m,"tooltip",y,f,d,h),missing:VI(y)}]},p(p({seriesId:i,datum:f,title:c,xKey:a,xName:l,yKey:d,yName:c},C),this.getModuleTooltipParams()))}legendItemSymbol(){const{stroke:e,strokeOpacity:t,strokeWidth:i,lineDash:n,marker:o}=this.getStyle();return{marker:p(p({},this.getMarkerStyle(this.properties.marker,{},void 0,{isHighlight:!1,checkForHighlight:!1},{size:o.size,shape:o.shape,fill:o.fill,fillOpacity:o.fillOpacity,stroke:o.stroke,strokeOpacity:o.strokeOpacity,strokeWidth:o.strokeWidth,lineDash:o.lineDash,lineDashOffset:o.lineDashOffset})),{},{enabled:this.properties.marker.enabled}),line:{enabled:!0,stroke:e,strokeOpacity:t,strokeWidth:i,lineDash:n}}}getLegendData(e){var t,i;if("category"!==e)return[];const{id:n,ctx:{legendManager:o},visible:s}=this,{yKey:r,yName:a,title:l,legendItemName:d,showInLegend:c}=this.properties;return[{legendType:e,id:n,itemId:r,legendItemName:d,seriesId:n,enabled:s&&o.getItemEnabled({seriesId:n,itemId:r}),label:{text:null!==(t=null!==(i=null!==d&&void 0!==d?d:l)&&void 0!==i?i:a)&&void 0!==t?t:r},symbol:this.legendItemSymbol(),hideInLegend:!c}]}updatePaths(e){this.updateLinePaths(e.paths,e.contextData)}updateLinePaths(e,t){const i=t.strokeData.spans,[n]=e;n.path.clear(),lO(n,i),n.markDirty("LineSeries")}resetDatumAnimation(e){AO([e.datumSelection])}animateEmptyUpdateReady(e){const{datumSelection:t,labelSelection:i,annotationSelections:n,contextData:o,paths:s}=e,{animationManager:r}=this.ctx;this.updateLinePaths(s,o),EO(this,r,...s),Qk([t],LO),DO(this,r,t),iP(this,"labels",r,i),iP(this,"annotations",r,...n)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateLinePaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){var t;const{animationManager:i}=this.ctx,{datumSelection:n,labelSelection:o,annotationSelections:s,contextData:r,paths:a,previousContextData:l}=e,[d]=a;if(!1===r.visible&&!1===(null===l||void 0===l?void 0:l.visible))return;this.resetDatumAnimation(e),this.resetLabelAnimation(e);const c=()=>{this.resetPathAnimation(e),this.updateLinePaths(a,r)},u=()=>{i.skipCurrentBatch(),c()};if(null==r||null==l)return c(),kO(this,i,"added",n),PO(this,"path_properties",i,"add",d),iP(this,"labels",i,o),void iP(this,"annotations",i,...s);if(r.crossFiltering!==l.crossFiltering)return void u();const h=function(e,t,i){var n,o,s;if("category"===(null===(n=e.scales.x)||void 0===n?void 0:n.type)!==("category"===(null===(o=t.scales.x)||void 0===o?void 0:o.type))||!vy(e.scales.x)||!vy(t.scales.x))return;if(null==e.strokeData||null==t.strokeData)return;let r="updated";t.visible&&!e.visible?r="removed":!t.visible&&e.visible&&(r="added");const a=sO({scales:e.scales,data:e.strokeData.spans},{scales:t.scales,data:t.strokeData.spans},1);if(null==a)return;return{status:r,stroke:cO(r,a,"fade"),hasMotion:null===(s=null===i||void 0===i?void 0:i.changed)||void 0===s||s||!fy(e.scales.x,t.scales.x)||!fy(e.scales.y,t.scales.y)||"updated"!==r}}(r,l,null===(t=this.processedData)||void 0===t||null===(t=t.reduced)||void 0===t||null===(t=t.diff)||void 0===t?void 0:t[this.id]);void 0!==h?"no-op"!==h.status&&($k(this.id,"path_properties",i,[d],h.stroke.pathProperties),"added"===h.status?this.updateLinePaths(a,r):"removed"===h.status?this.updateLinePaths(a,l):sF(this.id,"path_update",i,[d],h.stroke.path),h.hasMotion&&(kO(this,i,void 0,n),iP(this,"labels",i,o),iP(this,"annotations",i,...s)),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateLinePaths(a,r)})):u()}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new FI}getStyle(e){var t,i,n,o,s,r,a,l,d,c,u,h,p,g,m,f,v,y,b,x;const{styler:C,marker:S,lineDash:w,lineDashOffset:M,stroke:k,strokeOpacity:D,strokeWidth:I}=this.properties,{size:A,shape:L,fill:N="transparent",fillOpacity:T}=S;let R={};if(C){var E;const t=this.makeStylerParams(e),i=null!==(E=this.cachedCallWithContext(C,t))&&void 0!==E?E:{},n=this.ctx.optionsGraphService.resolvePartial(["series","".concat(this.declarationOrder)],i,{pick:!1});R=null!==n&&void 0!==n?n:{}}return null!==(t=R.marker)&&void 0!==t||(R.marker={}),{lineDash:null!==(i=R.lineDash)&&void 0!==i?i:w,lineDashOffset:null!==(n=R.lineDashOffset)&&void 0!==n?n:M,stroke:null!==(o=R.stroke)&&void 0!==o?o:k,strokeOpacity:null!==(s=R.strokeOpacity)&&void 0!==s?s:D,strokeWidth:null!==(r=R.strokeWidth)&&void 0!==r?r:I,marker:{fill:null!==(a=R.marker.fill)&&void 0!==a?a:N,fillOpacity:null!==(l=R.marker.fillOpacity)&&void 0!==l?l:T,shape:null!==(d=R.marker.shape)&&void 0!==d?d:L,size:null!==(c=R.marker.size)&&void 0!==c?c:A,lineDash:null!==(u=null!==(h=R.marker.lineDash)&&void 0!==h?h:S.lineDash)&&void 0!==u?u:w,lineDashOffset:null!==(p=null!==(g=R.marker.lineDashOffset)&&void 0!==g?g:S.lineDashOffset)&&void 0!==p?p:M,stroke:null!==(m=null!==(f=R.marker.stroke)&&void 0!==f?f:S.stroke)&&void 0!==m?m:k,strokeOpacity:null!==(v=null!==(y=R.marker.strokeOpacity)&&void 0!==y?y:S.strokeOpacity)&&void 0!==v?v:D,strokeWidth:null!==(b=null!==(x=R.marker.strokeWidth)&&void 0!==x?x:S.strokeWidth)&&void 0!==b?b:I}}}getFormattedMarkerStyle(e){const t=this.getStyle(),i=this.makeItemStylerParams(this.dataModel,this.processedData,e.datumIndex,t.marker);return this.getMarkerStyle(this.properties.marker,e,i,{isHighlight:!0},void 0,t)}computeFocusBounds(e){return NO(this,e)}hasItemStylers(){return null!=this.properties.styler||null!=this.properties.marker.itemStyler||null!=this.properties.label.itemStyler}};wB.className="LineSeries",wB.type="line";var MB={series:{stroke:wA,strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,interpolation:{type:"linear"},marker:{shape:"circle",size:7,strokeWidth:{$isUserOption:["./stroke",1,0]},fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",TA],["image",GA],["pattern",OA]]},stroke:{$palette:"stroke"}},label:p(p({},WA),{},{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}),tooltip:{range:{$path:["/tooltip/range","nearest"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","node"]}}},highlight:{enabled:!0,unhighlightedSeries:{opacity:.2}},segmentation:$A}},kB={type:"series",name:"line",chartType:"cartesian",stackable:!0,version:GC,dependencies:[uz],options:AN,predictAxis:CE,defaultAxes:{y:{type:zh.NUMBER,position:Fh.LEFT},x:{type:zh.CATEGORY,position:Fh.BOTTOM}},axisKeys:{[_u.X]:"xKeyAxis",[_u.Y]:"yKeyAxis"},themeTemplate:MB,create:e=>new wB(e)},DB=class extends dB{};DB.className="ScatterSeries",DB.type="scatter";var IB={series:{shape:"circle",size:7,fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",TA],["image",GA],["pattern",OA]]},stroke:{$palette:"stroke"},fillOpacity:.8,maxRenderedItems:2e3,label:p(p({},WA),{},{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}),tooltip:{range:{$path:["/tooltip/range","nearest"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","node"]}}},highlight:{enabled:!0,unhighlightedItem:{opacity:.6},unhighlightedSeries:{opacity:.2}}}},AB={type:"series",name:"scatter",chartType:"cartesian",version:GC,dependencies:[uz],options:NN,predictAxis:xE,defaultAxes:{x:{type:zh.NUMBER,position:Fh.BOTTOM},y:{type:zh.NUMBER,position:Fh.LEFT}},axisKeys:{[_u.X]:"xKeyAxis",[_u.Y]:"yKeyAxis"},themeTemplate:IB,create:e=>new DB(e)},LB=class extends EC{constructor(){super(...arguments),this.showInLegend=!1}};Ab([ru],LB.prototype,"showInLegend",2);var NB=class extends iD{constructor(){super(...arguments),this.spacing=2}set(e,t){return super.set(e)}};Ab([ru],NB.prototype,"text",2),Ab([ru],NB.prototype,"spacing",2);var TB=class extends kh{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}};Ab([ru],TB.prototype,"fill",2),Ab([ru],TB.prototype,"fillOpacity",2);var RB=class extends iD{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};Ab([ru],RB.prototype,"offset",2),Ab([ru],RB.prototype,"minAngle",2),Ab([ru],RB.prototype,"minSpacing",2),Ab([ru],RB.prototype,"maxCollisionOffset",2),Ab([ru],RB.prototype,"avoidCollisions",2);var EB=class extends iD{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};Ab([ru],EB.prototype,"positionOffset",2),Ab([ru],EB.prototype,"positionRatio",2);var PB=class extends kh{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};Ab([ru],PB.prototype,"colors",2),Ab([ru],PB.prototype,"length",2),Ab([ru],PB.prototype,"strokeWidth",2),Ab([ru],PB.prototype,"itemStyler",2);var OB=class extends XM{constructor(){super(...arguments),this.defaultColorRange=[],this.defaultPatternFills=[],this.fills=Object.values(yA),this.strokes=Object.values(bA),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.hideZeroValueSectorsInLegend=!1,this.innerLabels=new Dh(NB),this.title=new LB,this.innerCircle=new TB,this.shadow=new rF,this.calloutLabel=new RB,this.sectorLabel=new EB,this.calloutLine=new PB,this.tooltip=dP()}};function FB(e,t,i,n){const o=[i.convert(0),i.convert(1)],s=[n.convert(0),n.convert(1)],r=Math.PI/-2+Bp(t),a=e?"initial":"update";return{nodes:{toFn:(e,t,i,n)=>{let{prevLive:s}=n,{startAngle:a,endAngle:l,innerRadius:d,outerRadius:c}=t;const{stroke:u,fill:h}=t.sectorFormat;var p,g;"removed"===i&&s?(a=null===(p=s.datum)||void 0===p?void 0:p.endAngle,l=null===(g=s.datum)||void 0===g?void 0:g.endAngle):"removed"!==i||s||(a=r,l=r);if("removed"===i){const e=(e=>{let{radius:t}=e;return{innerRadius:o[0],outerRadius:o[0]+(o[1]-o[0])*t}})(t);d=e.innerRadius,c=e.outerRadius}return{startAngle:a,endAngle:l,outerRadius:c,innerRadius:d,stroke:u,fill:h}},fromFn:(t,i,n,o)=>{let{prevFromProps:l}=o,{startAngle:d,endAngle:c,innerRadius:u,outerRadius:h}=t,{fill:p,stroke:g}=i.sectorFormat;if("updated"===n&&null==t.previousDatum&&(n="added"),"unknown"===n||"added"===n&&!l)d=r,c=r,u=i.innerRadius,h=i.outerRadius;else if("added"===n&&l){var m,f,v,y;d=null!==(m=l.endAngle)&&void 0!==m?m:r,c=null!==(f=l.endAngle)&&void 0!==f?f:r,u=null!==(v=l.innerRadius)&&void 0!==v?v:i.innerRadius,h=null!==(y=l.outerRadius)&&void 0!==y?y:i.outerRadius}if("added"===n&&!e){const e=(e=>{let{radius:t}=e;return{innerRadius:s[0],outerRadius:s[0]+(s[1]-s[0])*t}})(i);u=e.innerRadius,h=e.outerRadius}var b,x;"updated"===n&&(p=null!==(b=t.fill)&&void 0!==b?b:p,g=null!==(x="string"===typeof t.stroke?t.stroke:void 0)&&void 0!==x?x:g);return{startAngle:d,endAngle:c,innerRadius:u,outerRadius:h,fill:p,stroke:g,phase:a}}},innerCircle:{fromFn:(e,t)=>{var i,n,o;return{size:null!==(i=null!==(n=null===(o=e.previousDatum)||void 0===o?void 0:o.radius)&&void 0!==n?n:e.size)&&void 0!==i?i:0,phase:a}},toFn:(e,t)=>{var i;return{size:null!==(i=t.radius)&&void 0!==i?i:0}}}}}function zB(e,t){return{startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,stroke:t.sectorFormat.stroke}}Ab([ru],OB.prototype,"angleKey",2),Ab([ru],OB.prototype,"angleName",2),Ab([ru],OB.prototype,"angleFilterKey",2),Ab([ru],OB.prototype,"radiusKey",2),Ab([ru],OB.prototype,"radiusName",2),Ab([ru],OB.prototype,"radiusMin",2),Ab([ru],OB.prototype,"radiusMax",2),Ab([ru],OB.prototype,"calloutLabelKey",2),Ab([ru],OB.prototype,"calloutLabelName",2),Ab([ru],OB.prototype,"sectorLabelKey",2),Ab([ru],OB.prototype,"sectorLabelName",2),Ab([ru],OB.prototype,"legendItemKey",2),Ab([ru],OB.prototype,"defaultColorRange",2),Ab([ru],OB.prototype,"defaultPatternFills",2),Ab([ru],OB.prototype,"fills",2),Ab([ru],OB.prototype,"strokes",2),Ab([ru],OB.prototype,"fillOpacity",2),Ab([ru],OB.prototype,"strokeOpacity",2),Ab([ru],OB.prototype,"lineDash",2),Ab([ru],OB.prototype,"lineDashOffset",2),Ab([ru],OB.prototype,"cornerRadius",2),Ab([ru],OB.prototype,"itemStyler",2),Ab([ru],OB.prototype,"rotation",2),Ab([ru],OB.prototype,"outerRadiusOffset",2),Ab([ru],OB.prototype,"outerRadiusRatio",2),Ab([ru],OB.prototype,"innerRadiusOffset",2),Ab([ru],OB.prototype,"innerRadiusRatio",2),Ab([ru],OB.prototype,"strokeWidth",2),Ab([ru],OB.prototype,"sectorSpacing",2),Ab([ru],OB.prototype,"hideZeroValueSectorsInLegend",2),Ab([ru],OB.prototype,"innerLabels",2),Ab([ru],OB.prototype,"title",2),Ab([ru],OB.prototype,"innerCircle",2),Ab([ru],OB.prototype,"shadow",2),Ab([ru],OB.prototype,"calloutLabel",2),Ab([ru],OB.prototype,"sectorLabel",2),Ab([ru],OB.prototype,"calloutLine",2),Ab([ru],OB.prototype,"tooltip",2);var BB=class extends xI{constructor(e,t,i,n){super(e,t,i,n),this.angleKey=n.properties.angleKey,this.radiusKey=n.properties.radiusKey,this.calloutLabelKey=n.properties.calloutLabelKey,this.sectorLabelKey=n.properties.sectorLabelKey}},VB=class extends VO{constructor(e){super({moduleCtx:e,categoryKey:void 0,propertyKeys:p(p({},zO),{},{sectorLabel:["sectorLabelKey"],calloutLabel:["calloutLabelKey"]}),propertyNames:p(p({},BO),{},{sectorLabel:["sectorLabelName"],calloutLabel:["calloutLabelName"]}),pickModes:[1,0],animationResetFns:{item:zB,label:oP}}),this.properties=new OB,this.phantomNodeData=void 0,this.backgroundGroup=new jx({name:"".concat(this.id,"-background"),zIndex:Lh.BACKGROUND}),this.noVisibleData=!1,this.previousRadiusScale=new VE,this.radiusScale=new VE,this.phantomGroup=this.contentGroup.appendChild(new Gx({name:"phantom",zIndex:-1})),this.phantomSelection=Jk.select(this.phantomGroup,()=>this.nodeFactory(),!1),this.phantomHighlightGroup=this.highlightGroup.appendChild(new Gx({name:"phantom",zIndex:-1})),this.phantomHighlightSelection=Jk.select(this.phantomHighlightGroup,()=>this.nodeFactory(),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new Gx({name:"pieCalloutLabels"})),this.calloutLabelSelection=new Jk(this.calloutLabelGroup,Gx),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new Gx({name:"".concat(this.id,"-zerosumRings")})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new FI({shape:"circle"})),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new FI({shape:"circle"})),this.innerLabelsGroup=this.contentGroup.appendChild(new Gx({name:"innerLabels"})),this.innerCircleGroup=this.backgroundGroup.appendChild(new Gx({name:"".concat(this.id,"-innerCircle")})),this.innerLabelsSelection=Jk.select(this.innerLabelsGroup,LC),this.innerCircleSelection=Jk.select(this.innerCircleGroup,()=>new FI({shape:"circle"})),this.surroundingRadius=void 0,this.NodeEvent=BB,this.angleScale=new VE,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(e=>e+Math.PI/2),this.phantomGroup.opacity=.2,this.phantomHighlightGroup.opacity=.2,this.innerLabelsGroup.pointerEvents=1}get calloutNodeData(){var e;return null!==(e=this.phantomNodeData)&&void 0!==e?e:this.nodeData}attachSeries(e,t,i){super.attachSeries(e,t,i),null===e||void 0===e||e.appendChild(this.backgroundGroup)}detachSeries(e,t,i){super.detachSeries(e,t,i),this.backgroundGroup.remove()}setZIndex(e){super.setZIndex(e),this.backgroundGroup.zIndex=[Lh.BACKGROUND,e]}nodeFactory(){const e=new kF;return e.miterLimit=1e9,e}getSeriesDomain(e){return e===_u.Angle?{domain:this.angleScale.domain}:{domain:this.radiusScale.domain}}async processData(e){var t;if(null==this.data)return;const{visible:i,id:n,ctx:{legendManager:o}}=this,{angleKey:s,angleFilterKey:r,radiusKey:a,calloutLabelKey:d,sectorLabelKey:c,legendItemKey:u}=this.properties,h=()=>(e,t)=>i&&o.getItemEnabled({seriesId:n,itemId:t})?e:0,g=!this.ctx.animationManager.isSkipped(),m=[],f=[];u?m.push(sM(u,"category",{id:"legendItemKey"})):d?m.push(sM(d,"category",{id:"calloutLabelKey"})):c&&m.push(sM(c,"category",{id:"sectorLabelKey"}));const v=this.radiusScale.type,y=this.angleScale.type;var b,x,C;a&&f.push(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{min:i=-1/0,max:n=1/0,processor:o}=t,s=l(t,eb);return p({type:"value",property:e,valueType:"range",validation:tM,processor:lM(o,function(){return function(e){return ol(e)?za(i,e,n):e}})},s)}(a,{id:"radiusValue",min:null!==(b=this.properties.radiusMin)&&void 0!==b?b:0,max:this.properties.radiusMax,missingValue:null!==(x=this.properties.radiusMax)&&void 0!==x?x:1,processor:h}),rM(a,v,{id:"radiusRaw",processor:h}),yM("radiusValue",[0,1],1,null!==(C=this.properties.radiusMin)&&void 0!==C?C:0,this.properties.radiusMax));d&&f.push(rM(d,"category",{id:"calloutLabelValue"})),c&&f.push(rM(c,"category",{id:"sectorLabelValue"})),u&&f.push(rM(u,"category",{id:"legendItemValue"})),r&&f.push(dM(r,y,{id:"angleFilterValue",onlyPositive:!0,invalidValue:0,processor:h}),rM(r,y,{id:"angleFilterRaw"}),yM("angleFilterValue",[0,1],0,0)),g&&null!==(t=this.processedData)&&void 0!==t&&null!==(t=t.reduced)&&void 0!==t&&null!==(t=t.animationValidation)&&void 0!==t&&t.uniqueKeys&&m.length>0&&f.push(IM(this.id,this.processedData)),f.push(SM()),await this.requestDataModel(e,this.data,{props:[...m,dM(s,y,{id:"angleValue",onlyPositive:!0,invalidValue:0,processor:h}),rM(s,y,{id:"angleRaw"}),yM("angleValue",[0,1],0,0),...f]});for(const l of null!==(S=null===(w=this.processedData)||void 0===w||null===(w=w.defs)||void 0===w?void 0:w.values)&&void 0!==S?S:[]){var S,w;const{id:e,missing:t,property:i}=l,n=dw(this,t);"angleRaw"!==e&&n>0&&jr.warnOnce("no value was found for the key '".concat(String(i),"' on ").concat(n," data element").concat(n>1?"s":""))}this.animationState.transition("updateData")}maybeRefreshNodeData(){var e;if(!this.nodeDataRefresh)return;const{nodeData:t=[],phantomNodeData:i}=null!==(e=this.createNodeData())&&void 0!==e?e:{};this.nodeData=t,this.phantomNodeData=i,t.length>0&&sa.record("".concat(this.type,":nodeData"),t.length),this.nodeDataRefresh=!1}getProcessedDataValues(e,t){return{angleValues:e.resolveColumnById(this,"angleValue",t),angleRawValues:e.resolveColumnById(this,"angleRaw",t),angleFilterValues:null==this.properties.angleFilterKey?void 0:e.resolveColumnById(this,"angleFilterValue",t),angleFilterRawValues:null==this.properties.angleFilterKey?void 0:e.resolveColumnById(this,"angleFilterRaw",t),radiusValues:this.properties.radiusKey?e.resolveColumnById(this,"radiusValue",t):void 0,radiusRawValues:this.properties.radiusKey?e.resolveColumnById(this,"radiusRaw",t):void 0,calloutLabelValues:this.properties.calloutLabelKey?e.resolveColumnById(this,"calloutLabelValue",t):void 0,sectorLabelValues:this.properties.sectorLabelKey?e.resolveColumnById(this,"sectorLabelValue",t):void 0,legendItemValues:this.properties.legendItemKey?e.resolveColumnById(this,"legendItemValue",t):void 0}}createNodeData(){var e,t,i,n;const{id:o,processedData:s,dataModel:r,angleScale:a,ctx:{legendManager:l},visible:d}=this,{rotation:c,innerRadiusRatio:u}=this.properties;if(!r||"ungrouped"!==(null===s||void 0===s?void 0:s.type))return;const h=this.getProcessedDataValues(r,s),{angleValues:g,angleRawValues:m,angleFilterValues:f,angleFilterRawValues:v,radiusValues:y,radiusRawValues:b,legendItemValues:x}=h,C=null!==(e=null===v||void 0===v?void 0:v.some((e,t)=>e>m[t]))&&void 0!==e&&e;let S=0,w=0;const M=[],k=null==v?void 0:[],D=null!==(t=null===(i=s.dataSources.get(this.id))||void 0===i?void 0:i.data)&&void 0!==t?t:[],I=null===(n=s.invalidData)||void 0===n?void 0:n.get(this.id);for(const[L,N]of D.entries()){var A;if(!0===(null===I||void 0===I?void 0:I[L]))continue;const e=C?f[L]:g[L],t=null==v||C?1:Math.sqrt(v[L]/m[L]),i=a.convert(S)+Bp(c);S=e,w+=e;const n=a.convert(S)+Bp(c),s=Math.abs(n-i),r=i+s/2,u=m[L],D=(null!==(A=null===y||void 0===y?void 0:y[L])&&void 0!==A?A:1)*t,T=null===b||void 0===b?void 0:b[L],R=null===x||void 0===x?void 0:x[L],E=this.getLabels(L,N,r,s,h),P=this.getItemStyle({datum:N,datumIndex:L},!1),O=p({itemId:L,series:this,datum:N,datumIndex:L,angleValue:u,midAngle:r,midCos:Math.cos(r),midSin:Math.sin(r),startAngle:i,endAngle:n,radius:D,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(D),0),sectorFormat:P,radiusValue:T,legendItemValue:R,enabled:d&&l.getItemEnabled({seriesId:o,itemId:L}),focusable:!0},E);M.push(O),null!=k&&k.push(p(p({},O),{},{radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0),focusable:!1}))}return this.zerosumOuterRing.visible=0===w,this.zerosumInnerRing.visible=0===w&&null!=u&&1!==u&&u>0,{itemId:o,nodeData:M,labelData:M,phantomNodeData:k}}getLabelContent(e,t,i){var n,o,s;const{id:r,ctx:a,properties:l}=this,{formatManager:d}=a,{calloutLabel:c,sectorLabel:u,calloutLabelKey:h,sectorLabelKey:g,legendItemKey:m}=l,f=null===(n=i.calloutLabelValues)||void 0===n?void 0:n[e],v=null===(o=i.sectorLabelValues)||void 0===o?void 0:o[e],y=null===(s=i.legendItemValues)||void 0===s?void 0:s[e],b={datum:t,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},x={callout:void 0,sector:void 0,legendItem:void 0};var C;(h&&(x.callout=this.getLabelText(f,t,h,"calloutLabel",[],c,p(p({},b),{},{value:f}))),g&&(x.sector=this.getLabelText(v,t,g,"sectorLabel",[],u,p(p({},b),{},{value:v}))),null!=m&&null!=y)&&(x.legendItem=null!==(C=d.format(this.callWithContext.bind(this),{type:"category",value:y,datum:t,seriesId:r,legendItemName:void 0,key:m,source:"legend-label",property:"legendItem",domain:[],boundSeries:this.getFormatterContext("legendItem")}))&&void 0!==C?C:y);return x}getLabels(e,t,i,n,o){const{properties:s}=this,{calloutLabel:r,sectorLabel:a,legendItemKey:l}=s,d=this.getLabelContent(e,t,o),c={};return r.enabled&&d.callout&&n>=Bp(r.minAngle)&&(c.calloutLabel=p(p({},this.getTextAlignment(i)),{},{text:d.callout,hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),a.enabled&&d.sector&&(c.sectorLabel={text:d.sector}),l&&d.legendItem&&(c.legendItem={key:l,text:d.legendItem}),c}getTextAlignment(e){const t=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"top"},{textAlign:"right",textBaseline:"middle"}],i=Fp(e)- -.75*Math.PI;return t[Wa(Math.floor(i/(Math.PI/2)),t.length)]}getFillParams(e,t,i){if($v(e)&&"item"!==e.bounds)return{centerX:0,centerY:0,innerRadius:t,outerRadius:i}}getItemStyle(e,t,i,n){var o,s,r,a,l,d,c,u,h,p,g,m,f,v,y,b;let{datum:x,datumIndex:C}=e;const{fills:S,strokes:w,itemStyler:M}=this.properties,k=w[C],D=S[C],{fill:I,fillOpacity:A,stroke:L,strokeWidth:N,strokeOpacity:T,lineDash:R,lineDashOffset:E,cornerRadius:P,opacity:O}=xu(this.getHighlightStyle(t,C,i,n),{fill:D,stroke:k},this.properties);let F;return M&&(F=this.cachedDatumCallback(this.getDatumId(C)+(t?"-highlight":"-hide"),()=>{const e=this.makeItemStylerParams(x,C,t,{fill:I,fillOpacity:A,stroke:L,strokeWidth:N,strokeOpacity:T,lineDash:R,lineDashOffset:E,cornerRadius:P});return this.ctx.optionsGraphService.resolvePartial(["series","".concat(this.declarationOrder)],this.callWithContext(M,e),{proxyPaths:{fill:["fills","".concat(C)],stroke:["strokes","".concat(C)]}})})),{fill:null!==(o=null===(s=F)||void 0===s?void 0:s.fill)&&void 0!==o?o:I,fillOpacity:null!==(r=null===(a=F)||void 0===a?void 0:a.fillOpacity)&&void 0!==r?r:A,stroke:null!==(l=null===(d=F)||void 0===d?void 0:d.stroke)&&void 0!==l?l:L,strokeWidth:null!==(c=null===(u=F)||void 0===u?void 0:u.strokeWidth)&&void 0!==c?c:N,strokeOpacity:null!==(h=null===(p=F)||void 0===p?void 0:p.strokeOpacity)&&void 0!==h?h:T,lineDash:null!==(g=null===(m=F)||void 0===m?void 0:m.lineDash)&&void 0!==g?g:R,lineDashOffset:null!==(f=null===(v=F)||void 0===v?void 0:v.lineDashOffset)&&void 0!==f?f:E,cornerRadius:null!==(y=null===(b=F)||void 0===b?void 0:b.cornerRadius)&&void 0!==y?y:P,opacity:O}}makeItemStylerParams(e,t,i,n){var o,s;const{angleKey:r,radiusKey:a,calloutLabelKey:l,sectorLabelKey:d,legendItemKey:c}=this.properties,u=null!==(o=this.filterItemStylerFillParams(n.fill))&&void 0!==o?o:n.fill;return p(p({datum:e,angleKey:r,radiusKey:a,calloutLabelKey:l,sectorLabelKey:d,legendItemKey:c},n),{},{fill:u,highlightState:this.getHighlightStateString(null===(s=this.ctx.highlightManager)||void 0===s?void 0:s.getActiveHighlight(),i,t),seriesId:this.id})}getCalloutLineStyle(e,t){var i,n;const{properties:o}=this;let s={};if(o.calloutLine.itemStyler){var r,a,l,d,c,u;const i=this.getHighlightStateString(null===(r=this.ctx.highlightManager)||void 0===r?void 0:r.getActiveHighlight(),t,e.datumIndex),n={angleKey:o.angleKey,angleName:null!==(a=o.angleName)&&void 0!==a?a:o.angleKey,calloutLabelKey:o.calloutLabelKey,calloutLabelName:null!==(l=o.calloutLabelName)&&void 0!==l?l:o.calloutLabelKey,datum:e.datum,highlightState:i,legendItemKey:o.legendItemKey,radiusKey:o.radiusKey,radiusName:null!==(d=o.radiusName)&&void 0!==d?d:o.radiusKey,sectorLabelKey:o.sectorLabelKey,sectorLabelName:null!==(c=o.sectorLabelName)&&void 0!==c?c:o.sectorLabelKey,seriesId:this.id};s=null!==(u=this.cachedCallWithContext(o.calloutLine.itemStyler,n))&&void 0!==u?u:{}}return{length:null!==(i=s.length)&&void 0!==i?i:o.calloutLine.length,strokeWidth:null!==(n=s.strokeWidth)&&void 0!==n?n:o.calloutLine.strokeWidth,color:s.color,colors:o.calloutLine.colors}}getInnerRadius(){const{radius:e}=this,{innerRadiusRatio:t=1,innerRadiusOffset:i=0}=this.properties,n=e*t+i;return n===e||n<0?0:n}getOuterRadius(){const{outerRadiusRatio:e,outerRadiusOffset:t}=this.properties;return Math.max(this.radius*e+t,0)}updateRadiusScale(e){var t;const i=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=i,e&&(this.previousRadiusScale.range=i);const n=e=>p(p({},e),{},{innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(e.radius),0)});this.nodeData=this.nodeData.map(n),this.phantomNodeData=null===(t=this.phantomNodeData)||void 0===t?void 0:t.map(n)}getTitleTranslationY(){var e,t;const i=Math.max(0,this.radiusScale.range[1]);if(0===i)return Number.NaN;return-i-(2+(null!==(e=null===(t=this.properties.title)||void 0===t?void 0:t.spacing)&&void 0!==e?e:0))-Math.max(0,-i)}update(e){let{seriesRect:t}=e;const{title:i}=this.properties,n={seriesRectWidth:null===t||void 0===t?void 0:t.width,seriesRectHeight:null===t||void 0===t?void 0:t.height},o=null!=Xg(this.nodeDataDependencies,n);if(o&&(this._nodeDataDependencies=n),this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(o),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),i){const e=this.getTitleTranslationY();i.node.y=Number.isFinite(e)?e:0;const t=i.node.getBBox();i.node.visible=i.enabled&&Number.isFinite(e)&&!this.bboxIntersectsSurroundingSeries(t)}for(const s of[this.zerosumInnerRing,this.zerosumOuterRing])s.fillOpacity=0,s.stroke=this.properties.calloutLabel.color,s.strokeWidth=1,s.strokeOpacity=1;this.updateNodeMidPoint(),this.updateSelections(),this.updateNodes(t)}updateTitleNodes(){const{oldTitle:e}=this,{title:t}=this.properties;if(e!==t){var i;if(e&&e.node.remove(),t)t.node.textBaseline="bottom",null===(i=this.labelGroup)||void 0===i||i.appendChild(t.node);this.oldTitle=t}}updateNodeMidPoint(){const e=e=>{const t=e.innerRadius+(e.outerRadius-e.innerRadius)/2;e.midPoint={x:e.midCos*Math.max(0,t),y:e.midSin*Math.max(0,t)}};for(const t of this.nodeData)e(t);if(this.phantomNodeData)for(const t of this.phantomNodeData)e(t)}updateSelections(){this.updateGroupSelection(),this.updateInnerCircleSelection()}updateGroupSelection(){var e,t;const{itemSelection:i,highlightSelection:n,phantomSelection:o,phantomHighlightSelection:s,calloutLabelSelection:r,labelSelection:a,highlightLabelSelection:l,innerLabelsSelection:d}=this,c=this.nodeData.map(e=>p(p({},e),{},{sectorFormat:p({},e.sectorFormat)})),u=null===(e=this.phantomNodeData)||void 0===e?void 0:e.map(e=>p(p({},e),{},{sectorFormat:p({},e.sectorFormat)})),h=(e,t)=>{e.update(t,void 0,e=>this.getDatumId(e.datumIndex)),this.ctx.animationManager.isSkipped()&&e.cleanup()};h(i,this.nodeData),h(n,c),h(o,null!==(t=this.phantomNodeData)&&void 0!==t?t:[]),h(s,null!==u&&void 0!==u?u:[]),r.update(this.calloutNodeData,e=>{const t=new eD;t.tag=0,t.pointerEvents=1,e.appendChild(t);const i=new LC;i.tag=1,i.pointerEvents=1,e.appendChild(i)}),a.update(this.nodeData),l.update(c),d.update(this.properties.innerLabels,e=>{e.pointerEvents=1})}updateInnerCircleSelection(){const{innerCircle:e}=this.properties;let t=0;const i=this.getInnerRadius();if(i>0){const e=Math.min(i,this.getOuterRadius()),n=1;t=Math.ceil(2*e+n)}const n=e?[{radius:t}]:[];this.innerCircleSelection.update(n)}updateNodes(e){var t,i;const n=this.ctx.highlightManager.getActiveHighlight(),{visible:o,dataModel:s,processedData:r}=this;if(this.backgroundGroup.visible=o,this.contentGroup.visible=o,!s||!r)return;const{legendItemValues:a}=this.getProcessedDataValues(s,r),l=this.isSeriesHighlighted(n,a),d=null!==(t=null===(i=this.ctx.chartService.highlight)||void 0===i?void 0:i.drawingMode)&&void 0!==t?t:"overlay";this.highlightGroup.visible=o&&l,this.labelGroup.visible=o,this.innerCircleSelection.each((e,t)=>{var i,n;let{radius:o}=t;e.setProperties({fill:null===(i=this.properties.innerCircle)||void 0===i?void 0:i.fill,opacity:null===(n=this.properties.innerCircle)||void 0===n?void 0:n.fillOpacity,size:o})});const c=this.radiusScale.range[0],u=this.radiusScale.range[1],h=this.getShapeFillBBox(),p=this.ctx.animationManager.isSkipped(),g=(e,t,i,n,o)=>{const s=this.getItemStyle(t,n,void 0,a);t.sectorFormat.fill=s.fill,t.sectorFormat.stroke=s.stroke,p&&(e.startAngle=t.startAngle,e.endAngle=t.endAngle,e.innerRadius=t.innerRadius,e.outerRadius=t.outerRadius),(n||p)&&(e.fill=s.fill,e.stroke=s.stroke);const r=this.getFillParams(s.fill,c,u);e.setStyleProperties(s,h,r),e.drawingMode=o,e.cornerRadius=s.cornerRadius,e.fillShadow=this.properties.shadow;const l=Math.max((this.properties.sectorSpacing+(null==s.stroke?0:s.strokeWidth))/2,0);e.inset=l,e.lineJoin=this.properties.sectorSpacing>=0||l>0?"miter":"round"};this.itemSelection.each((e,t,i)=>g(e,t,0,!1,"overlay")),this.phantomSelection.each((e,t,i)=>g(e,t,0,!1,"overlay")),this.highlightSelection.each((e,t,i)=>{g(e,t,0,!0,d),e.visible=t.itemId===(null===n||void 0===n?void 0:n.itemId)}),this.phantomHighlightSelection.each((e,t,i)=>{g(e,t,0,!0,d),e.visible=t.itemId===(null===n||void 0===n?void 0:n.itemId)}),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(e),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){const{strokes:e}=this.properties,{offset:t}=this.properties.calloutLabel;for(const o of this.calloutLabelSelection.selectByTag(0)){const s=o.closestDatum(),{length:r,strokeWidth:a,color:l,colors:d}=this.getCalloutLineStyle(s,!1),c=a,u=Xv(d)?d:e,{calloutLabel:h,outerRadius:p,datumIndex:g}=s;if(null!==h&&void 0!==h&&h.text&&!h.hidden&&0!==p){var i,n;o.visible=!0,o.strokeWidth=c,o.stroke=null!==l&&void 0!==l?l:u[g%u.length],o.strokeOpacity=null!==(i=this.getHighlightStyle(!1,s.datumIndex).opacity)&&void 0!==i?i:1,o.fill=void 0;const e=s.midCos*p,a=s.midSin*p;let d=s.midCos*(p+r),m=s.midSin*(p+r);if((null!==(n=h.collisionTextAlign)&&void 0!==n?n:0!==h.collisionOffsetY)&&null!=h.box){const e=h.box;let i=d,n=m;d<e.x?i=e.x:d>e.x+e.width&&(i=e.x+e.width),m<e.y?n=e.y:m>e.y+e.height&&(n=e.y+e.height);const o=i-d,s=n-m,r=Math.sqrt(Math.pow(o,2)+Math.pow(s,2)),a=r-t;a>0&&(d+=o*a/r,m+=s*a/r)}o.x1=e,o.y1=a,o.x2=d,o.y2=m}else o.visible=!1}}getLabelOverflow(e,t){const i=-this.centerX,n=i+t.width,o=-this.centerY,s=o+t.height;let r=e.width;e.x+1<i?r=(e.x+e.width-i)/e.width:e.x+e.width-1>n&&(r=(n-e.x)/e.width);return{maxWidth:r,hasVerticalOverflow:e.y+1<o||e.y+e.height-1>s,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}}bboxIntersectsSurroundingSeries(e){const{surroundingRadius:t}=this;if(null==t)return!1;const i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],n=t**2;return i.some(e=>e.x**2+e.y**2>n)}computeCalloutLabelCollisionOffsets(){const{radiusScale:e}=this,{calloutLabel:t}=this.properties,{offset:i,minSpacing:n}=t,o=e.convert(0),s=this.calloutNodeData,r=s.filter(e=>{return!(!(t=e).calloutLabel||0===t.outerRadius);var t});for(const m of r){const e=m.calloutLabel;null!=e&&(e.hidden=!1,e.collisionTextAlign=void 0,e.collisionOffsetY=0)}if(r.length<=1)return;const a=r.filter(e=>e.midCos<0).sort((e,t)=>e.midSin-t.midSin),l=r.filter(e=>e.midCos>=0).sort((e,t)=>e.midSin-t.midSin),d=r.filter(e=>{var t;return e.midSin<0&&"center"===(null===(t=e.calloutLabel)||void 0===t?void 0:t.textAlign)}).sort((e,t)=>e.midCos-t.midCos),c=r.filter(e=>{var t;return e.midSin>=0&&"center"===(null===(t=e.calloutLabel)||void 0===t?void 0:t.textAlign)}).sort((e,t)=>e.midCos-t.midCos),u=e=>{var n;const o=e.calloutLabel;if(null==o)return Pb.zero.clone();const s=nD(this.getLabelStyle(e,t,"calloutLabel")),r=this.getCalloutLineStyle(e,!1).length,a=e.outerRadius+r+i,l=e.midCos*a,d=e.midSin*a+o.collisionOffsetY,c=null!==(n=o.collisionTextAlign)&&void 0!==n?n:o.textAlign,u=o.textBaseline;return LC.measureBBox(o.text,l,d,{font:this.properties.calloutLabel,textAlign:c,textBaseline:u}).grow(s)},h=(e,t,i)=>{const o=u(e).grow(n/2),s=u(t).grow(n/2);o.x<s.x+s.width&&o.x+o.width>s.x&&("to-top"===i?o.y<s.y+s.height:o.y+o.height>s.y)&&(t.calloutLabel.collisionOffsetY="to-top"===i?o.y-s.y-s.height:o.y+o.height-s.y)},p=e=>{const t=e.slice().sort((e,t)=>Math.abs(e.midSin)-Math.abs(t.midSin))[0],i=e.indexOf(t);for(let n=i-1;n>=0;n--){const t=e[n+1],i=e[n];h(t,i,"to-top")}for(let n=i+1;n<e.length;n++){const t=e[n-1],i=e[n];h(t,i,"to-bottom")}},g=e=>{const t=r.some(e=>0!==e.calloutLabel.collisionOffsetY),i=e.map(e=>u(e)),a=i.map(e=>e.clone().grow(n/2));let l=!1;for(let n=0;n<a.length&&!l;n++){const t=a[n];for(let i=n+1;i<e.length;i++){const e=a[i];if(t.collidesBBox(e)){l=!0;break}}}const d=s.map(e=>{const{startAngle:t,endAngle:i,outerRadius:n}=e;return{startAngle:t,endAngle:i,innerRadius:o,outerRadius:n}}),c=i.some(e=>d.some(t=>function(e,t){const i={x:e.x,y:e.y},n={x:e.x+e.width,y:e.y},o={x:e.x,y:e.y+e.height},s={x:e.x+e.width,y:e.y+e.height};return dF({start:i,end:n},t)||dF({start:o,end:s},t)}(e,t)));if(l||t||c)for(const n of e){if("center"!==n.calloutLabel.textAlign)continue;const e=n.calloutLabel;n.midCos<0?e.collisionTextAlign="right":n.midCos>0?e.collisionTextAlign="left":e.collisionTextAlign="center"}};p(a),p(l),g(d),g(c)}getLabelStyle(e,t,i){var n;let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=null===(n=this.ctx.highlightManager)||void 0===n?void 0:n.getActiveHighlight();return QE(this,e,this.properties,t,o,s,["series","".concat(this.declarationOrder),i])}updateCalloutLabelNodes(e){var t;const{radiusScale:i}=this,{calloutLabel:n}=this.properties,o=new LC,s=null===(t=this.ctx.highlightManager)||void 0===t?void 0:t.getActiveHighlight(),r=this.isSeriesHighlighted(s);for(const d of this.calloutLabelSelection.selectByTag(1)){var a,l;const t=d.closestDatum(),c=t.calloutLabel,u=i.convert(t.radius),h=Math.max(0,u);if(null===c||void 0===c||!c.text||0===h||c.hidden){d.visible=!1;continue}const p=r&&!0===this.isItemHighlighted(s,t.datumIndex),g=this.getLabelStyle(t,n,"calloutLabel",p),m=h+this.getCalloutLineStyle(t,!1).length+n.offset,f=t.midCos*m,v=t.midSin*m+c.collisionOffsetY,y={textAlign:null!==(a=c.collisionTextAlign)&&void 0!==a?a:c.textAlign,textBaseline:c.textBaseline};o.text=c.text,o.x=f,o.y=v,o.setFont(g),o.setAlign(y),o.setBoxing(g);const b=o.getBBox();let x=c.text,C=!0;if(n.avoidCollisions){const{maxWidth:t,hasVerticalOverflow:i}=this.getLabelOverflow(b,e);if(b.width>t){const e={font:this.properties.calloutLabel,textWrap:"on-space",overflow:"hide",maxWidth:t};x=Um(c.text,e)}C=!i}d.text=x,d.x=f,d.y=v,d.setFont(g),d.setAlign(y),d.setBoxing(g),d.fill=g.color,d.fillOpacity=null!==(l=this.getHighlightStyle(p,t.datumIndex).opacity)&&void 0!==l?l:1,d.visible=C}}computeLabelsBBox(e,t){const{calloutLabel:i}=this.properties,{offset:n,maxCollisionOffset:o,minSpacing:s}=i;if(!i.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const r=[],a=new LC;let l;const{title:d}=this.properties;if(null!==d&&void 0!==d&&d.text&&d.enabled){const e=this.getTitleTranslationY();Number.isFinite(e)&&(a.text=d.text,a.x=0,a.y=e,a.setFont(d),a.setAlign({textBaseline:"bottom",textAlign:"center"}),l=a.getBBox(),r.push(l))}for(const u of this.calloutNodeData){var c;const d=u.calloutLabel;if(!d||0===u.outerRadius)continue;const h=this.getLabelStyle(u,i,"calloutLabel"),p=this.getCalloutLineStyle(u,!1).length,g=u.outerRadius+p+n,m=u.midCos*g,f=u.midSin*g+d.collisionOffsetY;a.text=d.text,a.x=m,a.y=f,a.setFont(h),a.setAlign({textAlign:null!==(c=d.collisionTextAlign)&&void 0!==c?c:d.textAlign,textBaseline:d.textBaseline}),a.setBoxing(h);const v=a.getBBox();if(d.box=v,Math.abs(d.collisionOffsetY)>o)d.hidden=!0;else{if(l){const e=-this.centerY,t=new Pb(l.x-s,e,l.width+2*s,l.y+l.height+s-e);if(v.collidesBBox(t)){d.hidden=!0;continue}}if(e.hideWhenNecessary){const{maxWidth:e,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:n}=this.getLabelOverflow(v,t),o=v.width>e;if(i||o||n){d.hidden=!0;continue}}d.hidden=!1,r.push(v)}}return 0===r.length?null:Pb.merge(r)}updateSectorLabelNodes(){var e;const{properties:t}=this,{positionOffset:i,positionRatio:n}=this.properties.sectorLabel,o=this.radiusScale.convert(0),s=o<=0&&1===(null===(e=this.ctx.legendManager.getData(this.id))||void 0===e?void 0:e.filter(e=>e.enabled).length),r={textAlign:"center",textBaseline:"middle"},a=(e,a)=>e.each((e,l)=>{const{outerRadius:d,startAngle:c,endAngle:u}=l;let h=!1;if(l.sectorLabel&&0!==d){var p;const g=this.getLabelStyle(l,t.sectorLabel,"sectorLabel",a),m=o*(1-n)+d*n+i;e.fill=g.color,e.fillOpacity=null!==(p=this.getHighlightStyle(a,l.datumIndex).opacity)&&void 0!==p?p:1,e.text=l.sectorLabel.text,s?(e.x=0,e.y=0):(e.x=l.midCos*m,e.y=l.midSin*m),e.setFont(g),e.setAlign(r),e.setBoxing(g);const f=e.getBBox(),v=[[f.x,f.y],[f.x+f.width,f.y],[f.x+f.width,f.y+f.height],[f.x,f.y+f.height]],y={startAngle:c,endAngle:u,innerRadius:o,outerRadius:d};v.every(e=>{let[t,i]=e;return lF(t,i,y)})&&(h=!0)}e.visible=h});a(this.labelSelection,!1),a(this.highlightLabelSelection,!0)}updateInnerLabelNodes(){const e=[],t=[];this.innerLabelsSelection.each((i,n)=>{const{fontStyle:o,fontWeight:s,fontSize:r,fontFamily:a,color:l}=n;i.fontStyle=o,i.fontWeight=s,i.fontSize=r,i.fontFamily=a,i.text=n.text,i.x=0,i.y=0,i.fill=l,i.textAlign="center",e.push(i.getBBox()),t.push(n.spacing)});const i=e=>0===e?0:t[e],n=e=>e===t.length-1?0:t[e],o=e.reduce((e,t)=>Math.max(e,t.width),0),s=e.reduce((e,t,o)=>e+t.height+i(o)+n(o),0),r=this.getInnerRadius(),a=Math.sqrt(Math.pow(o/2,2)+Math.pow(s/2,2))<=(r>0?r:this.getOuterRadius()),l=[];for(let d=0,c=-s/2;d<e.length;d++){const t=e[d].height+c+i(d);l.push(t),c=t+n(d)}this.innerLabelsSelection.each((t,i,n)=>{t.visible=a,Array.isArray(t.text)?t.y=l[n]-e[n].height:t.y=l[n]})}updateZerosumRings(){this.zerosumOuterRing.size=2*this.getOuterRadius(),this.zerosumInnerRing.size=2*this.getInnerRadius()}pickNodeClosestDatum(e){return function(e,t){const i=t.y-e.centerY,n=t.x-e.centerX,o=Math.atan2(i,n),s=e.getItemNodes();for(const r of s)if(!0!==r.datum.missing&&zp(o,r.startAngle,r.endAngle)){const e=Math.hypot(n,i);let t=0;return e<r.innerRadius?t=r.innerRadius-e:e>r.outerRadius&&(t=e-r.outerRadius),{datum:r.datum,distance:t}}}(this,e)}getTooltipContent(e){var t,i,n,o,s;const{id:r,dataModel:a,processedData:l,properties:d,ctx:{formatManager:c}}=this,{legendItemKey:u,calloutLabelKey:h,calloutLabelName:g,sectorLabelKey:m,sectorLabelName:f,angleKey:v,angleName:y,radiusKey:b,radiusName:x,tooltip:C}=d,S=this.properties.title.node.getPlainText();if(!a||!l)return;const w=null===(t=l.dataSources.get(this.id))||void 0===t||null===(t=t.data)||void 0===t?void 0:t[e],M=this.getProcessedDataValues(a,l),{angleRawValues:k}=M,D=k[e],I=this.getLabelContent(e,w,M),A=null!==(i=null!==(n=null!==(o=I.legendItem)&&void 0!==o?o:I.callout)&&void 0!==n?n:I.sector)&&void 0!==i?i:y,L=Ea(a.getDomain(this,"angleRaw","value",l)),N=null!==(s=c.format(this.callWithContext.bind(this),{type:"number",value:D,datum:w,seriesId:r,legendItemName:void 0,key:v,source:"tooltip",property:"angle",domain:L,boundSeries:this.getFormatterContext("angle"),fractionDigits:void 0}))&&void 0!==s?s:Fg(D,3);return this.formatTooltipWithContext(C,{title:S,symbol:this.legendItemSymbol(e),data:[{label:ed(A),fallbackLabel:v,value:N}]},p({seriesId:r,datum:w,title:y,legendItemKey:u,calloutLabelKey:h,calloutLabelName:g,sectorLabelKey:m,sectorLabelName:f,angleKey:v,angleName:y,radiusKey:b,radiusName:x},this.getItemStyle({datum:w,datumIndex:e},!1)))}legendItemSymbol(e){var t;const i=null===(t=this.processedData)||void 0===t||null===(t=t.dataSources.get(this.id))||void 0===t||null===(t=t.data)||void 0===t?void 0:t[e],n=this.getItemStyle({datum:i,datumIndex:e},!1),{fillOpacity:o,strokeOpacity:s,strokeWidth:r,lineDash:a,lineDashOffset:l}=this.properties;let{fill:d}=n;const{stroke:c}=n;return $v(d)&&(d=p(p({},d),{},{gradient:"linear",rotation:0,reverse:!1})),{marker:{fill:d,stroke:c,fillOpacity:o,strokeOpacity:s,strokeWidth:r,lineDash:a,lineDashOffset:l}}}getLegendData(e){var t,i,n;const{visible:o,processedData:s,dataModel:r,id:a,ctx:{legendManager:l}}=this;if(!r||!s||"category"!==e)return[];const{angleKey:d,calloutLabelKey:c,sectorLabelKey:u,legendItemKey:h,showInLegend:p}=this.properties;if(!h&&(!c||c===d)&&(!u||u===d))return[];const g=this.getProcessedDataValues(r,s),{angleRawValues:m}=g,f=(null===(t=this.properties.title)||void 0===t?void 0:t.showInLegend)&&this.properties.title.text,v=[],y=this.properties.hideZeroValueSectorsInLegend,b=null===(i=s.dataSources.get(this.id))||void 0===i?void 0:i.data,x=null===(n=s.invalidData)||void 0===n?void 0:n.get(this.id);for(let C=0;C<s.input.count;C++){const e=null===b||void 0===b?void 0:b[C],t=m[C];if(!0===(null===x||void 0===x?void 0:x[C])||y&&0===t)continue;const i=[];f&&i.push(f);const n=this.getLabelContent(C,e,g);h&&void 0!==n.legendItem?i.push(n.legendItem):c&&c!==d&&void 0!==n.callout?i.push(n.callout):u&&u!==d&&void 0!==n.sector&&i.push(n.sector),0!==i.length&&v.push({legendType:"category",id:a,datum:e,itemId:C,seriesId:a,hideToggleOtherSeries:!0,enabled:o&&l.getItemEnabled({seriesId:a,itemId:C}),label:{text:i.map(e=>ed(e)).join(" - ")},symbol:this.legendItemSymbol(C),legendItemName:null==h?void 0:e[h],hideInLegend:!p})}return v}setLegendState(e){const{id:t,ctx:{legendManager:i,updateService:n}}=this;for(const[o,s]of e.entries())i.toggleItem(s,t,o);i.update(),n.update(Ku.SERIES_UPDATE)}animateEmptyUpdateReady(e){const{animationManager:t}=this.ctx,i=FB(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);$k(this.id,"nodes",t,[this.itemSelection,this.highlightSelection,this.phantomSelection,this.phantomHighlightSelection],i.nodes,(e,t)=>this.getDatumId(t.datumIndex)),$k(this.id,"innerCircle",t,[this.innerCircleSelection],i.innerCircle),iP(this,"callout",t,this.calloutLabelSelection),iP(this,"sector",t,this.labelSelection,this.highlightLabelSelection),iP(this,"inner",t,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var e,t,i,n,o;const{itemSelection:s,highlightSelection:r,phantomSelection:a,phantomHighlightSelection:l,processedData:d,radiusScale:c,previousRadiusScale:u}=this,{animationManager:h}=this.ctx,p=null===d||void 0===d||null===(e=d.reduced)||void 0===e||null===(e=e.diff)||void 0===e?void 0:e[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);const g=0===(null!==(t=null===p||void 0===p?void 0:p.moved.size)&&void 0!==t?t:0),m=(null!==(i=null===d||void 0===d?void 0:d.defs.keys.length)&&void 0!==i?i:0)>0,f=null===(n=null===d||void 0===d||null===(o=d.reduced)||void 0===o||null===(o=o.animationValidation)||void 0===o?void 0:o.uniqueKeys)||void 0===n||n;g&&m&&f||this.ctx.animationManager.skipCurrentBatch();const v=!this.nodeData.some(e=>e.enabled),y=FB(!1,this.properties.rotation,c,u);$k(this.id,"nodes",h,[s,r,a,l],y.nodes,(e,t)=>this.getDatumId(t.datumIndex),p),$k(this.id,"innerCircle",h,[this.innerCircleSelection],y.innerCircle),iP(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),iP(this,"sector",this.ctx.animationManager,this.labelSelection,this.highlightLabelSelection),this.noVisibleData!==v&&(this.noVisibleData=v,iP(this,"inner",this.ctx.animationManager,this.innerLabelsSelection)),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,phantomHighlightSelection:n,radiusScale:o,previousRadiusScale:s}=this,{animationManager:r}=this.ctx,a=FB(!1,this.properties.rotation,o,s);$k(this.id,"nodes",r,[e,t,i,n],a.nodes,(e,t)=>this.getDatumId(t.datumIndex)),$k(this.id,"innerCircle",r,[this.innerCircleSelection],a.innerCircle),nP(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),nP(this,"sector",this.ctx.animationManager,this.labelSelection,this.highlightLabelSelection),nP(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumId(e){var t;const{dataModel:i,processedData:n}=this;if(!i||!n)return"".concat(e);const{calloutLabelKey:o,sectorLabelKey:s,legendItemKey:r}=this.properties;if(null===(t=n.reduced)||void 0===t||null===(t=t.animationValidation)||void 0===t||!t.uniqueKeys)return"".concat(e);if(r){return AM(i.resolveKeysById(this,"legendItemKey",n)[e])}if(o){return AM(i.resolveKeysById(this,"calloutLabelKey",n)[e])}if(s){return AM(i.resolveKeysById(this,"sectorLabelKey",n)[e])}return"".concat(e)}hasItemStylers(){return!(null==this.properties.itemStyler&&null==this.properties.calloutLabel.itemStyler&&null==this.properties.sectorLabel.itemStyler&&this.properties.innerLabels.every(e=>null==e.itemStyler))}};VB.className="DonutSeries",VB.type="donut";var GB={series:{title:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:Oh.LARGE},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},spacing:5},calloutLabel:p(p({},WA),{},{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},offset:3,minAngle:.001}),sectorLabel:p(p({},WA),{},{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"chartBackgroundColor"},positionOffset:0,positionRatio:.5}),calloutLine:{length:10,strokeWidth:2,colors:{$map:[{$if:[{$or:[{$isGradient:{$value:"$1"}},{$isPattern:{$value:"$1"}},{$isImage:{$value:"$1"}}]},{$path:["../../strokes/$index",{$ref:"foregroundColor"}]},{$value:"$1"}]},{$if:[{$eq:[{$path:"../strokeWidth"},0]},{$path:"../fills"},{$path:"../strokes"}]}]}},fills:{$applyCycle:[{$cacheMax:{$size:{$path:["./data",{$path:"/data"}]}}},{$palette:"fills"},{$applySwitch:[{$path:["/type",void 0,{$value:"$1"}]},{$value:"$1"},["gradient",EA],["pattern",OA],["image",GA]]}]},strokes:{$applyCycle:[{$cacheMax:{$size:{$path:["./data",{$path:"/data"}]}}},{$palette:"strokes"}]},fillOpacity:1,strokeOpacity:1,strokeWidth:{$isUserOption:["./strokes/0",2,0]},lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:Hh,xOffset:3,yOffset:3,blur:5},highlight:{enabled:!0,unhighlightedItem:{opacity:.2},unhighlightedSeries:{opacity:.2}}},legend:{enabled:!0}},HB=p(p({},GB),{},{series:p(p({},GB.series),{},{innerRadiusRatio:{$if:[{$eq:[{$path:["./innerRadiusOffset",void 0]},void 0]},.7,void 0]},innerLabels:{$apply:p(p({},WA),{},{fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:2})},highlight:{enabled:!0,unhighlightedItem:{opacity:.2},unhighlightedSeries:{opacity:.2}}})}),jB={type:"series",name:"donut",chartType:"polar",version:GC,dependencies:[gz],options:ON,themeTemplate:HB,create:e=>new VB(e)},WB=class extends VB{};WB.className="PieSeries",WB.type="pie";var _B={type:"series",name:"pie",chartType:"polar",version:GC,dependencies:[gz],options:EN,themeTemplate:GB,create:e=>new WB(e)},KB=class extends Ra{constructor(e){super(),this.ctx=e,this.localeText=void 0}};Ab([og(e=>{e.ctx.localeManager.setLocaleText(e.localeText)}),ru],KB.prototype,"localeText",2),Ab([og(e=>{e.ctx.localeManager.setLocaleTextFormatter(e.getLocaleText)}),ru],KB.prototype,"getLocaleText",2);var UB={type:"plugin",name:"locale",version:GC,options:{localeText:Id,getLocaleText:Ud(Ad)},create:e=>new KB(e)},YB={type:"axis",name:"number",chartType:"cartesian",version:GC,dependencies:[uz],options:oN,themeTemplate:{line:{enabled:!1}},create:e=>new GE(e)},$B={type:"axis",name:"log",chartType:"cartesian",version:GC,dependencies:[uz],options:sN,themeTemplate:{base:10,line:{enabled:!1}},create:e=>new Oz(e)},ZB={type:"axis",name:"time",chartType:"cartesian",version:GC,dependencies:[uz],options:rN,themeTemplate:{gridLine:{enabled:!1}},create:e=>new jE(e)},XB={type:"axis",name:"category",chartType:"cartesian",version:GC,dependencies:[uz],options:iN,themeTemplate:{groupPaddingInner:.1,label:{autoRotate:!0,wrapping:"on-space"},gridLine:{enabled:!1},interval:{placement:"between"}},create:e=>new uP(e)},qB={type:"axis",name:"grouped-category",chartType:"cartesian",version:GC,dependencies:[uz],options:nN,themeTemplate:{tick:{enabled:!0,stroke:{$ref:"separationLinesColor"}},label:{spacing:10,rotation:270,wrapping:"on-space"},maxThicknessRatio:.5,paddingInner:.4,groupPaddingInner:.2},create:e=>new DP(e)},QB=class extends tF{constructor(e){super(e,new jD,!1),this.parentLevel=new HE,this.min=void 0,this.max=void 0,this.preferredMin=void 0,this.preferredMax=void 0,this.unit=void 0,this.defaultUnit=void 0}get primaryLabel(){return this.parentLevel.enabled?this.parentLevel.label:void 0}get primaryTick(){return this.parentLevel.enabled?this.parentLevel.tick:void 0}hasDefinedDomain(){const{min:e,max:t}=this;return null!=e&&null!=t&&e<t}isCategoryLike(){return!0}processData(){let e;super.processData();const{domain:t}=this.dataDomain;if(2===t.length&&t[0].valueOf()===t[1].valueOf())e=ov(t[0]);else{const{boundSeries:t,direction:i,min:n,max:o}=this;e=_E(t,i,n,o)}yu(this.defaultUnit,e)||(this.defaultUnit=e)}updateScale(){var e;super.updateScale(),this.scale.interval=null!==(e=this.unit)&&void 0!==e?e:this.defaultUnit}normaliseDataDomain(e){const{extent:t,clipped:i}=Pg(e,this.min,this.max,this.preferredMin,this.preferredMax);return{domain:t,clipped:i}}tickFormatParams(e,t,i,n){null!==n&&void 0!==n||(n=nv(t));const o=sv(e);return{type:"date",unit:Rf(n),step:Ef(n),epoch:Pf(n),truncateDate:o}}datumFormatParams(e,t,i,n,o){var s,r;const a=null!==(s=null!==(r=this.unit)&&void 0!==r?r:this.defaultUnit)&&void 0!==s?s:"millisecond";null!==n&&void 0!==n||(n=a);const{datum:l,seriesId:d,legendItemName:c,key:u,source:h,property:p,domain:g,boundSeries:m}=t,f=Rf(n),v=Ef(n),y=Pf(n);return{type:"date",value:ff(a,e),datum:l,seriesId:d,legendItemName:c,key:u,source:h,property:p,domain:g,boundSeries:m,unit:f,step:v,epoch:y,style:o}}};QB.className="UnitTimeAxis",QB.type="unit-time",Ab([ru],QB.prototype,"parentLevel",2),Ab([ru],QB.prototype,"min",2),Ab([ru],QB.prototype,"max",2),Ab([ru],QB.prototype,"preferredMin",2),Ab([ru],QB.prototype,"preferredMax",2),Ab([ru],QB.prototype,"unit",2);var JB=[YB,$B,ZB,XB,qB,{type:"axis",name:"unit-time",chartType:"cartesian",version:GC,dependencies:[uz],options:aN,themeTemplate:{groupPaddingInner:.1,label:{autoRotate:!1},gridLine:{enabled:!1},parentLevel:{enabled:!0},interval:{placement:"between"}},create:e=>new QB(e)}],eV=[_z,Jz,uB,mB,kB,AB],tV=[JB,eV,Pz,UB].flat(),iV=[gz,jB,_B,Pz,UB],nV=[tV,iV,oz].flat(),oV={};Db(oV,{Arc:()=>xF,BBox:()=>Pb,Caption:()=>EC,CategoryScale:()=>TD,Group:()=>Gx,Line:()=>eD,LinearScale:()=>VE,Marker:()=>FI,Path:()=>cC,RadialColumnShape:()=>SF,Rect:()=>pC,Scene:()=>kS,Sector:()=>kF,Shape:()=>Dx,TranslatableGroup:()=>jx,getRadialColumnWidth:()=>wF,toRadians:()=>Bp});var sV={};Db(sV,{ChartTheme:()=>JA,getChartTheme:()=>sR,resolveOperation:()=>lV,themeNames:()=>aV,themeSymbols:()=>rV,themes:()=>oR}),((e,t,i)=>{Ib(e,t,"default"),i&&Ib(i,t,"default")})(sV,n);var rV={DEFAULT_ANNOTATION_HANDLE_FILL:lp,DEFAULT_ANNOTATION_STATISTICS_COLOR:up,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:hp,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:pp,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:gp,DEFAULT_ANNOTATION_STATISTICS_FILL:dp,DEFAULT_ANNOTATION_STATISTICS_STROKE:cp,DEFAULT_CAPTION_ALIGNMENT:Wh,DEFAULT_CAPTION_LAYOUT_STYLE:jh,DEFAULT_FIBONACCI_STROKES:sp,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL:ap,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR:op,DEFAULT_POLAR_SERIES_STROKE:ip,DEFAULT_SHADOW_COLOUR:Hh,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:np,DEFAULT_TEXTBOX_COLOR:vp,DEFAULT_TEXTBOX_FILL:mp,DEFAULT_TEXTBOX_STROKE:fp,DEFAULT_TEXT_ANNOTATION_COLOR:rp,DEFAULT_TOOLBAR_POSITION:yp,IS_DARK_THEME:Gh,PALETTE_ALT_DOWN_FILL:Jh,PALETTE_ALT_DOWN_STROKE:qh,PALETTE_ALT_NEUTRAL_FILL:ep,PALETTE_ALT_NEUTRAL_STROKE:tp,PALETTE_ALT_UP_FILL:Qh,PALETTE_ALT_UP_STROKE:Xh,PALETTE_DOWN_FILL:Yh,PALETTE_DOWN_STROKE:Kh,PALETTE_NEUTRAL_FILL:Zh,PALETTE_NEUTRAL_STROKE:$h,PALETTE_UP_FILL:Uh,PALETTE_UP_STROKE:_h},aV=Object.keys(oR);function lV(e){const t=JA.getDefaultPublicParameters(),i=JA.getDefaultColors();return new ZR({line:{operation:e}},{series:[{type:"line"}]},t,i).resolve().operation}var dV={};Db(dV,{Color:()=>yg,interpolateColor:()=>jS});var cV={VERSION:GC,_Scene:oV,_Theme:sV,_Util:dV,create:lE.create.bind(lE),createSparkline:lE.__createSparkline.bind(lE),setup:()=>{ca.setRegistryMode(ca.RegistryMode.Integrated),ca.registerModules(nV)},isEnterprise:!1};function uV(e,t){return p(p({},e),{},{container:t.current})}function hV(e,t){const i=(0,o.forwardRef)(function(t,i){const{options:n,style:s,className:r}=t,a=(0,o.useRef)(null),l=(0,o.useRef)();(0,o.useLayoutEffect)(()=>{const t=e(uV(n,a));return l.current=t,()=>{t.destroy()}},[]);const d=void 0===l.current;return(0,o.useEffect)(()=>{var e;d||(null===(e=l.current)||void 0===e||e.update(uV(n,a)).catch(e=>console.error(e)))},[n]),(0,o.useImperativeHandle)(i,()=>l.current,[]),(0,o.useMemo)(()=>(0,o.createElement)("div",{ref:a,style:s,className:r}),[s,r])});return i.displayName=t,i}var pV=hV(e=>lE.create(e),"AgCharts");const gV=["text"],mV=["text"],fV=["x","y","angle"],vV=["cap"],yV=["enabled","mode","showArrow","range","position","pagination","delay","wrapping","interaction","renderer"],bV=["animation","background","container","contextMenu","context","footnote","height","listeners","locale","minHeight","minWidth","overrideDevicePixelRatio","padding","subtitle","theme","title","width","type","cursor","nodeClickRange","tooltip","value","scale","startAngle","endAngle","highlight","segmentation","bar","needle","targets","outerRadius","innerRadius","outerRadiusRatio","innerRadiusRatio","cornerRadius","cornerMode","label","secondaryLabel","spacing"],xV=["animation","background","container","contextMenu","context","footnote","height","listeners","locale","minHeight","minWidth","overrideDevicePixelRatio","padding","subtitle","theme","title","width","type","cursor","nodeClickRange","tooltip","value","scale","direction","thickness","highlight","segmentation","bar","targets","cornerRadius","cornerMode","label"],CV=["targets"],SV=["dateKey","highKey","openKey","lowKey","closeKey","volumeKey","chartType","navigator","volume","rangeButtons","statusBar","toolbar","zoom","sync","theme","data","formatter"];var wV=Object.defineProperty,MV=Object.getOwnPropertyDescriptor,kV=(e,t,i,n)=>{for(var o,s=n>1?void 0:n?MV(t,i):t,r=e.length-1;r>=0;r--)(o=e[r])&&(s=(n?o(t,i,s):o(s))||s);return n&&s&&wV(t,i,s),s},DV=class extends kh{constructor(){super(),this.opacity=1,this.loadedSynchronously=!0,this.containerWidth=0,this.containerHeight=0,this.onLoad=void 0,this.onImageLoad=()=>{var e;this.loadedSynchronously||(this.node.visible=!1,this.performLayout(this.containerWidth,this.containerHeight),null===(e=this.onLoad)||void 0===e||e.call(this))},this.imageElement=zr("img"),this.imageElement.onload=this.onImageLoad,this.node=new uE.Image(this.imageElement)}get complete(){return this.imageElement.width>0&&this.imageElement.height>0}performLayout(e,t){this.containerWidth=e,this.containerHeight=t;const i={width:e,height:t},n=Rm(this.imageElement.width,this.imageElement.height,i,this);return this.node.setProperties(this.complete?p({visible:!0,opacity:this.opacity},n):{visible:!1}),n}};kV([ru],DV.prototype,"top",2),kV([ru],DV.prototype,"right",2),kV([ru],DV.prototype,"bottom",2),kV([ru],DV.prototype,"left",2),kV([ru],DV.prototype,"width",2),kV([ru],DV.prototype,"height",2),kV([ru],DV.prototype,"opacity",2),kV([eg("imageElement.src"),og(e=>e.loadedSynchronously=e.complete)],DV.prototype,"url",2);var IV=class extends uE.Background{constructor(){super(...arguments),this.image=new DV}onLayoutComplete(e){if(super.onLayoutComplete(e),this.image){const{width:t,height:i}=e.chart;this.image.performLayout(t,i)}}onImageLoad(){this.ctx.updateService.update(Ku.SCENE_RENDER)}};kV([ru,ng({newValue(e){this.node.appendChild(e.node),e.onLoad=()=>this.onImageLoad()},oldValue(e){e.node.remove(),e.onLoad=void 0}})],IV.prototype,"image",2);var AV=class extends uE.Background{constructor(){super(...arguments),this.image=new DV,this.fill="transparent",this.fillOpacity=void 0}createNode(){return new uE.Group({name:"foreground",zIndex:bp.FOREGROUND})}onLayoutComplete(e){super.onLayoutComplete(e);const{width:t,height:i}=e.chart,n=this.image.performLayout(t,i);this.text&&this.updateTextNode(n)}onImageLoad(){this.ctx.updateService.update(Ku.SCENE_RENDER)}updateTextNode(e){const{textNode:t}=this;t.fontWeight="bold",t.fontFamily="Impact, sans-serif",t.fontSize=19,t.opacity=.7,t.fill="#9b9b9b",t.textBaseline="top";const{width:i}=t.getBBox();t.x=e.x+e.width/2-i/2,t.y=e.y+e.height+10}};kV([ru,ng({newValue(e){this.node.appendChild(e.node),e.onLoad=()=>this.onImageLoad()},oldValue(e){e.node.remove(),e.onLoad=void 0}})],AV.prototype,"image",2),kV([ru,ig("rectNode","fill")],AV.prototype,"fill",2),kV([ru,ig("rectNode","fillOpacity")],AV.prototype,"fillOpacity",2);var LV=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility="5d41402abc4b2a76b9719d911017c592"!=this.md5("hello")}md5cycle(e,t){let i=e[0],n=e[1],o=e[2],s=e[3];i=this.ff(i,n,o,s,t[0],7,-680876936),s=this.ff(s,i,n,o,t[1],12,-389564586),o=this.ff(o,s,i,n,t[2],17,606105819),n=this.ff(n,o,s,i,t[3],22,-1044525330),i=this.ff(i,n,o,s,t[4],7,-176418897),s=this.ff(s,i,n,o,t[5],12,1200080426),o=this.ff(o,s,i,n,t[6],17,-1473231341),n=this.ff(n,o,s,i,t[7],22,-45705983),i=this.ff(i,n,o,s,t[8],7,1770035416),s=this.ff(s,i,n,o,t[9],12,-1958414417),o=this.ff(o,s,i,n,t[10],17,-42063),n=this.ff(n,o,s,i,t[11],22,-1990404162),i=this.ff(i,n,o,s,t[12],7,1804603682),s=this.ff(s,i,n,o,t[13],12,-40341101),o=this.ff(o,s,i,n,t[14],17,-1502002290),n=this.ff(n,o,s,i,t[15],22,1236535329),i=this.gg(i,n,o,s,t[1],5,-165796510),s=this.gg(s,i,n,o,t[6],9,-1069501632),o=this.gg(o,s,i,n,t[11],14,643717713),n=this.gg(n,o,s,i,t[0],20,-373897302),i=this.gg(i,n,o,s,t[5],5,-701558691),s=this.gg(s,i,n,o,t[10],9,38016083),o=this.gg(o,s,i,n,t[15],14,-660478335),n=this.gg(n,o,s,i,t[4],20,-405537848),i=this.gg(i,n,o,s,t[9],5,568446438),s=this.gg(s,i,n,o,t[14],9,-1019803690),o=this.gg(o,s,i,n,t[3],14,-187363961),n=this.gg(n,o,s,i,t[8],20,1163531501),i=this.gg(i,n,o,s,t[13],5,-1444681467),s=this.gg(s,i,n,o,t[2],9,-51403784),o=this.gg(o,s,i,n,t[7],14,1735328473),n=this.gg(n,o,s,i,t[12],20,-1926607734),i=this.hh(i,n,o,s,t[5],4,-378558),s=this.hh(s,i,n,o,t[8],11,-2022574463),o=this.hh(o,s,i,n,t[11],16,1839030562),n=this.hh(n,o,s,i,t[14],23,-35309556),i=this.hh(i,n,o,s,t[1],4,-1530992060),s=this.hh(s,i,n,o,t[4],11,1272893353),o=this.hh(o,s,i,n,t[7],16,-155497632),n=this.hh(n,o,s,i,t[10],23,-1094730640),i=this.hh(i,n,o,s,t[13],4,681279174),s=this.hh(s,i,n,o,t[0],11,-358537222),o=this.hh(o,s,i,n,t[3],16,-722521979),n=this.hh(n,o,s,i,t[6],23,76029189),i=this.hh(i,n,o,s,t[9],4,-640364487),s=this.hh(s,i,n,o,t[12],11,-421815835),o=this.hh(o,s,i,n,t[15],16,530742520),n=this.hh(n,o,s,i,t[2],23,-995338651),i=this.ii(i,n,o,s,t[0],6,-198630844),s=this.ii(s,i,n,o,t[7],10,1126891415),o=this.ii(o,s,i,n,t[14],15,-1416354905),n=this.ii(n,o,s,i,t[5],21,-57434055),i=this.ii(i,n,o,s,t[12],6,1700485571),s=this.ii(s,i,n,o,t[3],10,-1894986606),o=this.ii(o,s,i,n,t[10],15,-1051523),n=this.ii(n,o,s,i,t[1],21,-2054922799),i=this.ii(i,n,o,s,t[8],6,1873313359),s=this.ii(s,i,n,o,t[15],10,-30611744),o=this.ii(o,s,i,n,t[6],15,-1560198380),n=this.ii(n,o,s,i,t[13],21,1309151649),i=this.ii(i,n,o,s,t[4],6,-145523070),s=this.ii(s,i,n,o,t[11],10,-1120210379),o=this.ii(o,s,i,n,t[2],15,718787259),n=this.ii(n,o,s,i,t[9],21,-343485551),e[0]=this.add32(i,e[0]),e[1]=this.add32(n,e[1]),e[2]=this.add32(o,e[2]),e[3]=this.add32(s,e[3])}cmn(e,t,i,n,o,s){return t=this.add32(this.add32(t,e),this.add32(n,s)),this.add32(t<<o|t>>>32-o,i)}ff(e,t,i,n,o,s,r){return this.cmn(t&i|~t&n,e,t,o,s,r)}gg(e,t,i,n,o,s,r){return this.cmn(t&n|i&~n,e,t,o,s,r)}hh(e,t,i,n,o,s,r){return this.cmn(t^i^n,e,t,o,s,r)}ii(e,t,i,n,o,s,r){return this.cmn(i^(t|~n),e,t,o,s,r)}md51(e){const t=e.length,i=[1732584193,-271733879,-1732584194,271733878];let n;for(n=64;n<=e.length;n+=64)this.md5cycle(i,this.md5blk(e.substring(n-64,n)));e=e.substring(n-64);const o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<e.length;n++)o[n>>2]|=e.charCodeAt(n)<<(n%4<<3);if(o[n>>2]|=128<<(n%4<<3),n>55)for(this.md5cycle(i,o),n=0;n<16;n++)o[n]=0;return o[14]=8*t,this.md5cycle(i,o),i}md5blk(e){const t=[];for(let i=0;i<64;i+=4)t[i>>2]=e.charCodeAt(i)+(e.charCodeAt(i+1)<<8)+(e.charCodeAt(i+2)<<16)+(e.charCodeAt(i+3)<<24);return t}rhex(e){const t="0123456789abcdef".split("");let i="",n=0;for(;n<4;n++)i+=t[e>>8*n+4&15]+t[e>>8*n&15];return i}hex(e){for(let t=0;t<e.length;t++)e[t]=this.rhex(e[t]);return e.join("")}md5(e){return this.hex(this.md51(e))}add32(e,t){return this.ieCompatibility?this.add32Compat(e,t):this.add32Std(e,t)}add32Std(e,t){return e+t&4294967295}add32Compat(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}};function NV(e){return null==e||0===e.length}var TV={"01":"GRID","02":"CHARTS","0102":"BOTH"},RV="https://www.ag-grid.com/charts/licensing/",EV=class e{constructor(e){this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=e,this.md5=new LV,this.md5.init()}validateLicense(){const t=this.getLicenseDetails(e.licenseKey,e.gridContext),i="AG ".concat("BOTH"===t.currentLicenseType?"Grid and ":"","Charts Enterprise");let n="";if("BOTH"===t.suppliedLicenseType?n="AG Grid and AG Charts Enterprise":"GRID"===t.suppliedLicenseType?n="AG Grid Enterprise":void 0!==t.suppliedLicenseType&&(n="AG Charts Enterprise"),t.missing)this.isWebsiteUrl()&&!this.isForceWatermark()||this.outputMissingLicenseKey(i);else if(t.expired){const i=e.getChartsReleaseDate(),o=e.formatDate(i);this.outputExpiredKey(t.expiry,o,n)}else t.valid?t.isTrial&&t.trialExpired&&this.outputExpiredTrialKey(t.expiry,i,n):this.outputInvalidLicenseKey(!!t.incorrectLicenseType,i,n)}static extractExpiry(t){const i=t.substring(t.lastIndexOf("_")+1,t.length);return new Date(Number.parseInt(e.decode(i),10))}static extractLicenseComponents(t){let i=t.replaceAll(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replaceAll(/\r?\n|\r/g,""),t.length<=32)return{md5:null,license:t,version:null,isTrial:null};const n=i.length-32,o=i.substring(n),s=i.substring(0,n),[r,a,l]=e.extractBracketedInformation(i);return{md5:o,license:s,version:r,isTrial:a,type:l}}getLicenseDetails(t){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n="CHARTS";if(NV(t))return{licenseKey:t,valid:!1,missing:!0,currentLicenseType:n};const o=e.getChartsReleaseDate(),{md5:s,license:r,version:a,isTrial:l,type:d}=e.extractLicenseComponents(t);let c,u,h,p=s===this.md5.md5(r)&&!t.includes("For_Trialing_ag-Grid_Only"),g=null,m=!1;if(p&&(g=e.extractExpiry(r),p=!Number.isNaN(g.getTime()),p))switch(u=o>g,a){case"legacy":case"2":p=!1;break;case"3":NV(d)?p=!1:(h=d,d!==TV["02"]&&d!==TV["0102"]?(p=!1,m=!0):l&&(c=g<new Date,u=void 0))}return p?{licenseKey:t,valid:p,expiry:e.formatDate(g),expired:u,version:a,isTrial:l,trialExpired:c,invalidLicenseTypeForCombo:i?"BOTH"!==h:void 0,incorrectLicenseType:m,currentLicenseType:n,suppliedLicenseType:h}:{licenseKey:t,valid:p,incorrectLicenseType:m,currentLicenseType:n,suppliedLicenseType:h}}isDisplayWatermark(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isE2ETest()&&!this.isWebsiteUrl()&&!NV(this.watermarkMessage)}getWatermarkMessage(){var e;return null!==(e=this.watermarkMessage)&&void 0!==e?e:""}getHostname(){var e;if(!this.document)return"localhost";const t=null!==(e=this.document.defaultView)&&void 0!==e?e:globalThis;if(!t)return"localhost";const i=t.location,{hostname:n=""}=i;return n}isForceWatermark(){var e,t;if(!this.document)return!1;const i=(null!==(e=null===(t=this.document)||void 0===t?void 0:t.defaultView)&&void 0!==e?e:void 0!=globalThis.window)?globalThis:void 0;if(!i)return!1;const{pathname:n}=i.location;return!!n&&n.includes("forceWatermark")}isWebsiteUrl(){const e=this.getHostname();return null!==/^((?:[\w-]+\.)?ag-grid\.com)$/.exec(e)}isLocalhost(){const e=this.getHostname();return null!==/^(?:127\.0\.0\.1|localhost)$/.exec(e)}isE2ETest(){const e=this.getHostname();return null!==/^(?:172\.17\.0\.1|host\.docker\.internal)$/.exec(e)}static formatDate(e){const t=e.getDate(),i=e.getMonth(),n=e.getFullYear();return t+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][i]+" "+n}static getChartsReleaseDate(){return new Date(Number.parseInt(e.decode(e.RELEASE_INFORMATION),10))}static decode(t){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n,o,s,r,a,l,d,c="",u=0;const h=t.replaceAll(/[^A-Za-z0-9+/=]/g,"");for(;u<h.length;)r=i.indexOf(h.charAt(u++)),a=i.indexOf(h.charAt(u++)),l=i.indexOf(h.charAt(u++)),d=i.indexOf(h.charAt(u++)),n=r<<2|a>>4,o=(15&a)<<4|l>>2,s=(3&l)<<6|d,c+=String.fromCodePoint(n),64!=l&&(c+=String.fromCodePoint(o)),64!=d&&(c+=String.fromCodePoint(s));return c=e.utf8_decode(c),c}static utf8_decode(e){e=e.replaceAll("rn","n");let t="";for(let i=0;i<e.length;i++){const n=e.codePointAt(i);n<128?t+=String.fromCodePoint(n):n>127&&n<2048?(t+=String.fromCodePoint(n>>6|192),t+=String.fromCodePoint(63&n|128)):(t+=String.fromCodePoint(n>>12|224),t+=String.fromCodePoint(n>>6&63|128),t+=String.fromCodePoint(63&n|128))}return t}static setGridContext(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.gridContext=t}static setLicenseKey(t){this.licenseKey&&this.licenseKey!==t&&console.warn("License Key being set multiple times with different values. This can result in an incorrect license key being used."),e.licenseKey=t}static extractBracketedInformation(e){if(!e.includes("["))return["legacy",!1,void 0];const t=e.match(/\[(.*?)\]/g).map(e=>e.replace("[","").replace("]",""));if(!t||0===t.length)return["legacy",!1,void 0];const i=1===t.filter(e=>"TRIAL"===e).length,n=t.find(e=>e.startsWith("v"));return[n?n.replace("v",""):"legacy",i,TV[t.find(e=>TV[e])]]}centerPadAndOutput(e){const t=this.totalMessageLength-e.length;console.error(e.padStart(t/2+e.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";console.error(e.padEnd(this.totalMessageLength-i.length,t)+i)}outputInvalidLicenseKey(t,i,n){e.gridContext||(t?(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(i," License ")),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput("* Your license key is for ".concat(n," only and does not cover you for ").concat(i,".")," ","*"),this.padAndOutput("* To troubleshoot your license key visit ".concat(RV,".")," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(i," License ")),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid."," ","*"),this.padAndOutput("* To troubleshoot your license key visit ".concat(RV,".")," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""))),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(t,i,n){e.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(i," License ")),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput("* Your trial only license for ".concat(n," expired on ").concat(t,".")," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(t){e.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(t," License ")),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput("* All ".concat(t," features are unlocked for trial.")," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(t,i,n){e.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(n," License ")),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput("* Your license key works with versions of ".concat(n," released before ").concat(t,".")," ","*"),this.padAndOutput("* The version you are trying to use was released on ".concat(i,".")," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="License Expired"}};EV.RELEASE_INFORMATION="MTc2OTA5ODIyNjI1MQ==",EV.gridContext=!1;var PV=EV;function OV(e,t){const i=e.addChild("canvas-overlay","watermark"),n=zr("span");n.innerText=t,i.addEventListener("animationend",()=>{e.removeChild("canvas-overlay","watermark"),e.removeStyles("watermark")}),i.classList.add("ag-watermark"),i.appendChild(n)}var FV='.ag-watermark{position:absolute;bottom:20px;right:25px;font-weight:700;font-family:Impact,sans-serif;font-size:19px;opacity:.7;animation:1s ease-out 3s ag-watermark-fadeout;color:#9b9b9b;pointer-events:none;&:before{content:"";display:block;height:40px;width:170px;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=);background-repeat:no-repeat;background-size:170px 40px}>span{padding-left:.7rem}}@keyframes ag-watermark-fadeout{0%{opacity:.5}to{opacity:0}}.ag-charts-dialog{display:flex;flex-direction:column;font-size:var(--ag-charts-chrome-font-size-large)}.ag-charts-dialog__tabs{display:flex;flex-direction:column}.ag-charts-dialog__header{border-bottom:1px solid var(--ag-charts-border-color);display:flex}.ag-charts-dialog__tab-list{display:flex;gap:calc(var(--ag-charts-spacing) * 2)}.ag-charts-dialog__drag-handle{align-items:center;color:inherit;cursor:grab;display:flex;padding:1px 6px;text-align:center}.ag-charts-dialog__drag-handle--dragging{cursor:grabbing}.ag-charts-dialog__tab-button{background:none;border:0;border-bottom:2px solid transparent;border-radius:0;color:var(--ag-charts-panel-subtle-text-color);margin-bottom:-1px;padding:var(--input-padding) calc(var(--input-padding) / 2)}.ag-charts-dialog__tab-button:hover{background:none}.ag-charts-dialog__tab-button--active{border-color:var(--ag-charts-accent-color);color:inherit}.ag-charts-dialog__drag-handle+.ag-charts-dialog__tab-button{margin-left:calc(var(--ag-charts-spacing) * -2)}.ag-charts-button.ag-charts-dialog__close-button{background:none;border:0;margin-left:auto;padding:1px 6px}.ag-charts-dialog__close-button:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-dialog__tab-panel{display:none;flex-direction:column;gap:calc(var(--ag-charts-spacing) * 4);margin:0 calc(var(--ag-charts-spacing) * 4);padding:calc(var(--ag-charts-spacing) * 4) 0}.ag-charts-dialog__tab-panel--active{display:flex}.ag-charts-dialog__input-group-line{display:flex;gap:16px 18px;flex-wrap:wrap}.ag-charts-dialog__input-group{align-items:center;display:flex;font-size:var(--ag-charts-chrome-font-size)}.ag-charts-dialog__input-group-label{color:var(--ag-charts-panel-subtle-text-color);margin-right:5px}.ag-charts-dialog__input-group-label[for]{cursor:pointer}.ag-charts-dialog__button{border-radius:0;margin-right:-1px}.ag-charts-dialog__button.ag-charts-dialog__button--active{background:var(--ag-charts-button-focus-background-color);border-color:var(--ag-charts-input-focus-border-color);color:var(--ag-charts-input-focus-text-color);z-index:var(--input-layer-active)}.ag-charts-dialog__button:first-child,.ag-charts-dialog__input-group-label+.ag-charts-dialog__button{border-bottom-left-radius:var(--ag-charts-input-border-radius);border-top-left-radius:var(--ag-charts-input-border-radius)}.ag-charts-dialog__button:last-child{border-bottom-right-radius:var(--ag-charts-input-border-radius);border-top-right-radius:var(--ag-charts-input-border-radius)}.ag-charts-dialog__color-picker-button{--color: #000;background:var(--color);border:none;color:transparent;height:26px;width:26px}.ag-charts-dialog__color-picker-button:hover{background:var(--color)}.ag-charts-dialog__color-picker-button--multi-color,.ag-charts-dialog__color-picker-button--multi-color:hover{background:linear-gradient(135deg,red 0%,#ff0 calc(100% * 1 / 6),#0f0 calc(100% * 2 / 6),#0ff 50%,#00f calc(100% * 4 / 6),#f0f calc(100% * 5 / 6),red 100%)}.ag-charts-color-picker{width:190px;padding:8px;cursor:default;--h: 0;--s: 0;--v: 0;--a: 0;--color: #000;--color-a: #000;--thumb-size: 18px;--inner-width: 172px;--track-height: 12px;--palette-height: 136px;--checker: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="4" height="4"><rect x="0" y="0" width="4" height="4" fill="%23fff"/><path d="M0 0H2V4H4V2H0Z" fill="%23b2b2b2"/></svg>\');--multi-color: linear-gradient( 135deg, #f00 0% , #ff0 calc(100% * 1 / 6), #0f0 calc(100% * 2 / 6), #0ff 50% , #00f calc(100% * 4 / 6), #f0f calc(100% * 5 / 6), #f00 100% )}.ag-charts-color-picker__content{display:flex;flex-direction:column}.ag-charts-color-picker__palette{position:relative;width:100%;height:var(--palette-height);margin-bottom:8px;background:linear-gradient(to bottom,#0000,#000),linear-gradient(to right,#fff,#fff0) hsl(var(--h),100%,50%);border-radius:calc(var(--ag-charts-border-radius) * 1.5);box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__palette:after{content:"";position:absolute;display:block;top:calc(var(--thumb-size) * -.5 + (1 - var(--v)) * 100%);left:calc(var(--thumb-size) * -.5 + var(--s) * 100%);background:var(--color);width:var(--thumb-size);height:var(--thumb-size);border-radius:calc(var(--ag-charts-border-radius) * 99);box-shadow:var(--box-shadow);--box-shadow: inset 0 0 0 3px white, inset 0 0 1px 3px #0006, 0 0 5px #00000038}.ag-charts-color-picker__palette:focus-visible:after{outline:var(--ag-charts-focus-border);box-shadow:var(--box-shadow),0 0 0 2px #fff8,var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__color-row{display:flex;gap:8px;align-items:center;margin-bottom:4px;--inset: calc((var(--thumb-size) - var(--track-height)) / 2)}.ag-charts-color-picker__hue-input,.ag-charts-color-picker__alpha-input{-webkit-appearance:none;display:block;position:relative;padding:0;margin:0 calc(var(--inset) * -1);border:0;height:var(--thumb-size);width:auto;background:transparent;--inset: calc((var(--thumb-size) - var(--track-height)) / 2)}.ag-charts-color-picker__hue-input::-moz-range-thumb,.ag-charts-color-picker__alpha-input::-moz-range-thumb{appearance:none;width:var(--thumb-size);height:var(--thumb-size);border-radius:calc(var(--ag-charts-border-radius) * 99);box-shadow:var(--box-shadow);--box-shadow: inset 0 0 0 3px white, inset 0 0 1px 3px #0006, 0 0 5px #00000038}.ag-charts-color-picker__hue-input::-webkit-slider-thumb,.ag-charts-color-picker__alpha-input::-webkit-slider-thumb{-webkit-appearance:none;width:var(--thumb-size);height:var(--thumb-size);border-radius:calc(var(--ag-charts-border-radius) * 99);box-shadow:var(--box-shadow);--box-shadow: inset 0 0 0 3px white, inset 0 0 1px 3px #0006, 0 0 5px #00000038;transform:translateZ(0)}.ag-charts-color-picker__hue-input::-moz-range-thumb{background:hsl(var(--h),100%,50%)}.ag-charts-color-picker__hue-input::-webkit-slider-thumb{background:hsl(var(--h),100%,50%)}.ag-charts-color-picker__alpha-input::-moz-range-thumb{background:transparent}.ag-charts-color-picker__alpha-input::-webkit-slider-thumb{background:transparent}.ag-charts-color-picker__alpha-input--opaque::-moz-range-thumb{background:var(--color)}.ag-charts-color-picker__alpha-input--opaque::-webkit-slider-thumb{background:var(--color)}.ag-charts-color-picker__hue-input:focus-visible::-moz-range-thumb,.ag-charts-color-picker__alpha-input:focus-visible::-moz-range-thumb{outline:var(--ag-charts-focus-border);box-shadow:var(--box-shadow),var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__hue-input:focus-visible::-webkit-slider-thumb,.ag-charts-color-picker__alpha-input:focus-visible::-webkit-slider-thumb{outline:var(--ag-charts-focus-border);box-shadow:var(--box-shadow),var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__hue-input::-moz-range-track,.ag-charts-color-picker__alpha-input::-moz-range-track{position:absolute;content:"";display:block;top:calc(50% - var(--track-height) / 2);left:var(--inset);right:var(--inset);height:var(--track-height);border-radius:calc(var(--ag-charts-border-radius) * 99);box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__hue-input:before,.ag-charts-color-picker__alpha-input:before{position:absolute;content:"";display:block;top:calc(50% - var(--track-height) / 2);left:var(--inset);right:var(--inset);height:var(--track-height);border-radius:calc(var(--ag-charts-border-radius) * 99);box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__multi-color-button{width:36px;margin-left:var(--inset);height:var(--track-height);border-radius:calc(var(--ag-charts-border-radius) * 99);border:0;background:var(--multi-color);box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__multi-color-button--hidden{display:none}.ag-charts-color-picker__multi-color-button--active{box-shadow:inset 0 0 0 1px #0003;outline-offset:1px;outline:2px solid #2196f3}.ag-charts-color-picker__hue-input{flex:1 0 0}.ag-charts-color-picker__hue-input::-moz-range-track{background:linear-gradient(to right,red,red calc((100% - var(--track-height)) * 0 / 6 + var(--track-height) / 2),#ff0 calc((100% - var(--track-height)) * 1 / 6 + var(--track-height) / 2),#0f0 calc((100% - var(--track-height)) * 2 / 6 + var(--track-height) / 2),#0ff calc((100% - var(--track-height)) * 3 / 6 + var(--track-height) / 2),#00f calc((100% - var(--track-height)) * 4 / 6 + var(--track-height) / 2),#f0f calc((100% - var(--track-height)) * 5 / 6 + var(--track-height) / 2),red calc((100% - var(--track-height)) * 6 / 6 + var(--track-height) / 2))}.ag-charts-color-picker__hue-input:before{background:linear-gradient(to right,red,red calc((100% - var(--track-height)) * 0 / 6 + var(--track-height) / 2),#ff0 calc((100% - var(--track-height)) * 1 / 6 + var(--track-height) / 2),#0f0 calc((100% - var(--track-height)) * 2 / 6 + var(--track-height) / 2),#0ff calc((100% - var(--track-height)) * 3 / 6 + var(--track-height) / 2),#00f calc((100% - var(--track-height)) * 4 / 6 + var(--track-height) / 2),#f0f calc((100% - var(--track-height)) * 5 / 6 + var(--track-height) / 2),red calc((100% - var(--track-height)) * 6 / 6 + var(--track-height) / 2))}.ag-charts-color-picker__alpha-input{margin-bottom:7px}.ag-charts-color-picker__alpha-input::-moz-range-track{background:linear-gradient(to right,transparent,var(--color)),var(--checker) top left / 4px 4px}.ag-charts-color-picker__alpha-input:before{background:linear-gradient(to right,transparent,var(--color)),var(--checker) top left / 4px 4px}.ag-charts-color-picker__color-field{display:flex;border:var(--ag-charts-border);background:var(--ag-charts-background-color);border-radius:var(--ag-charts-border-radius);overflow:hidden}.ag-charts-color-picker__color-field:has(:focus-visible){border-color:var(--ag-charts-accent-color);box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__color-label{width:16px;height:16px;margin:7px 0 7px 7px;color:transparent;background:linear-gradient(to right,var(--color-a),var(--color-a)),var(--checker) top left / 4px 4px;border-radius:calc(var(--ag-charts-border-radius) / 2);box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__color-label--multi-color{background:var(--multi-color)}.ag-charts-color-picker__color-input{flex:1;min-width:0;padding:7px 7px 7px 8px;border:0;margin:0;color:inherit;background:transparent;font-variant:tabular-nums}.ag-charts-color-picker__color-input:focus-visible{border:none;outline:none}.ag-charts-annotations__line-stroke-width-menu,.ag-charts-annotations__line-style-type-menu,.ag-charts-annotations__text-size-menu{border-top-left-radius:0;border-top-right-radius:0;.ag-charts-menu__row:first-child{border-radius:0}}.ag-charts-annotations__text-size-menu{--item-padding: 4px 8px;min-width:34px;text-align:center}.ag-charts-annotations__line-stroke-width-menu{--item-padding: 6px;column-gap:6px}.ag-charts-annotations__line-style-type-menu{--item-padding: 6px;column-gap:0}.ag-charts-annotations__stroke-width-button:before{background:var(--ag-charts-foreground-color);content:"";margin-right:var(--toolbar-button-padding);height:min(var(--stroke-width),20px);width:12px}.ag-charts-annotations__stroke-width-button[aria-disabled=true]:before{filter:grayscale(1);opacity:.5}.ag-charts-annotations__color-picker-button{--emblem: var(--color)}.ag-charts-annotations__color-picker-button--multi-color{--emblem: linear-gradient( to right, #f00 0% , #ff0 calc(100% * 1 / 6), #0f0 calc(100% * 2 / 6), #0ff 50% , #00f calc(100% * 4 / 6), #f0f calc(100% * 5 / 6), #f00 100% )}.ag-charts-annotations__color-picker-button:after{content:"";display:block;position:absolute;bottom:3px;left:5px;right:5px;height:4px;border-radius:99px;box-shadow:inset 0 0 0 1px color-mix(in srgb,var(--ag-charts-foreground-color) 10%,transparent);background:var(--emblem)}.ag-charts-annotations__color-picker-button[aria-disabled=true]:after{filter:grayscale(1);opacity:.5}.ag-charts-annotations__toolbar-menu{min-width:200px}.ag-charts-annotations__axis-button--hidden{display:none}.ag-charts-annotations__axis-button{background-color:var(--ag-charts-crosshair-label-background-color);border-radius:calc(var(--ag-charts-border-radius) / 2);border:none;box-sizing:border-box;color:var(--ag-charts-crosshair-label-text-color);cursor:pointer;font-family:var(--ag-charts-button-font-family);font-size:var(--ag-charts-button-font-size);font-weight:var(--ag-charts-button-font-weight);left:0;line-height:16px;overflow:hidden;padding:0;position:absolute;top:0;user-select:none;white-space:nowrap;z-index:var(--ag-charts-layer-annotations)}.ag-charts-annotations__axis-button:hover{opacity:.8;color:var(--ag-charts-background-color)}.ag-charts-dialog--annotation-settings{min-height:233px;width:289px}.ag-charts-dialog--annotation-settings .ag-charts-textarea{height:calc(10px * 2 + var(--textarea-line-height) * 1em * 3 + 2px);overflow-y:auto;resize:vertical}.ag-charts-context-menu{font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);z-index:var(--ag-charts-layer-ui-overlay)}.ag-charts-context-menu__cover{position:fixed;left:0;top:0}.ag-charts-context-menu__menu{background:var(--ag-charts-menu-background-color);border-radius:var(--ag-charts-border-radius);border:var(--ag-charts-menu-border);box-shadow:var(--ag-charts-popup-shadow);color:var(--ag-charts-menu-text-color);display:flex;flex-direction:column;padding:.5em 0;transition:transform .1s ease;white-space:nowrap}.ag-charts-context-menu__menu:focus{outline:none}.ag-charts-context-menu__item{align-items:center;background:none;border:none;box-sizing:border-box;color:inherit;cursor:pointer;display:flex;font:inherit;justify-content:space-between;text-align:left;width:100%;-webkit-appearance:none;-moz-appearance:none}.ag-charts-context-menu__icon>img{width:var(--ag-charts-icon-size);height:var(--ag-charts-icon-size)}.ag-charts-context-menu__icon,.ag-charts-context-menu__cell{display:flex;align-items:center;flex-shrink:0}.ag-charts-context-menu__cell{flex-grow:1}.ag-charts-context-menu__cellpadding{padding:.5em 1em}.ag-charts-context-menu__icon{padding-right:0}.ag-charts-context-menu__item[data-focus-override=true],.ag-charts-context-menu__item:focus,.ag-charts-context-menu__item:active{background:var(--ag-charts-focus-color)}.ag-charts-context-menu__item[data-focus-override=false]{background:inherit}.ag-charts-context-menu__item[data-focus-visible-override=true]:focus,.ag-charts-context-menu__item:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-context-menu__item[data-focus-visible-override=false]{outline:inherit;box-shadow:inherit;z-index:inherit}.ag-charts-context-menu__item[aria-disabled=true]{border:none;color:color-mix(in srgb,var(--ag-charts-input-text-color) 50%,transparent)}.ag-charts-context-menu__item[aria-disabled=true]:focus{background:inherit;cursor:inherit}.ag-charts-context-menu__divider{padding:5px 0}.ag-charts-context-menu__divider:after{content:"";display:block;border-top:1px solid var(--ag-charts-border-color)}.ag-charts-crosshair-label{position:absolute;left:0;top:0;user-select:none;pointer-events:none;font-family:var(--ag-charts-font-family);font-size:var(--ag-charts-font-size);font-weight:var(--ag-charts-font-weight);overflow:hidden;white-space:nowrap;z-index:var(--ag-charts-layer-crosshair);box-sizing:border-box}.ag-charts-crosshair-label-content{padding:0 8px;border-radius:calc(var(--ag-charts-border-radius) / 2);line-height:calc(var(--ag-charts-font-size) + 8px);background-color:var(--ag-charts-crosshair-label-background-color);color:var(--ag-charts-crosshair-label-text-color)}.ag-charts-crosshair-label--hidden{visibility:hidden!important}.ag-charts-text-input{position:absolute}.ag-charts-text-input__textarea{--placeholder-text-color: var(--ag-charts-input-placeholder-text-color);display:block;height:100%;width:100%;border:0;background:none;line-height:1.38;outline:none;transform:translateY(.09em)}.ag-charts-text-input__textarea[placeholder]:empty:before{content:attr(placeholder);color:var(--placeholder-text-color);font-weight:400}.ag-charts-text-input__textarea[placeholder]:not(:empty):before{content:""}.ag-charts-chart-toolbar__menu{min-width:200px}.ag-charts-range-buttons .ag-charts-toolbar__button{padding:var(--toolbar-button-padding) calc(var(--toolbar-button-padding) * 1.5)}.ag-charts-zoom-buttons{align-items:center;display:flex;height:44px;justify-content:center;overflow:hidden;padding-bottom:10px;pointer-events:none;width:100%;.ag-charts-toolbar{--toolbar-size: 24px;--toolbar-button-padding: 1px;display:flex;font-size:var(--ag-charts-chrome-font-size);height:var(--toolbar-size);justify-content:center;opacity:1;pointer-events:auto;transition:opacity .2s ease-in-out,transform .4s ease-in-out;.ag-charts-toolbar__button--first{border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius)}.ag-charts-toolbar__button--last{border-bottom-right-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius)}.ag-charts-toolbar__label{padding-left:var(--ag-charts-spacing);padding-right:var(--ag-charts-spacing)}.ag-charts-toolbar__icon+.ag-charts-toolbar__label{padding-left:0}.ag-charts-toolbar__button--gap{margin-left:var(--toolbar-gap)}&.ag-charts-zoom-buttons__toolbar--hidden{opacity:0;transition:opacity .4s ease-in-out,transform .4s ease-in-out}}}.ag-charts-shared-toolbar{gap:var(--toolbar-gap);.ag-charts-toolbar__button{border-radius:var(--ag-charts-border-radius);margin:0}.ag-charts-toolbar__button--active+.ag-charts-toolbar__button{border-left-color:var(--ag-charts-border-color)}}\n';function zV(e,t,i){const n=(t,i,n,o)=>{let s=e[0];for(let r=t;n>0?r<=i:r>i;r+=n){const t=e[r];if(o(s,t))return!0;s=t}return!1},o=Math.floor(e.length/2);return!!n(t,o,t,i)||n(e.length-t,o,-t,i)}var{AxisInterval:BV}=uE,VV=class extends BV{};kV([ru],VV.prototype,"minSpacing",2);var{Group:GV}=uE,HV=class extends kh{constructor(){super(...arguments),this.fontSize=Eh.LARGE,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};kV([ru],HV.prototype,"enabled",2),kV([ru],HV.prototype,"text",2),kV([ru],HV.prototype,"fontStyle",2),kV([ru],HV.prototype,"fontWeight",2),kV([ru],HV.prototype,"fontSize",2),kV([ru],HV.prototype,"fontFamily",2),kV([ru],HV.prototype,"padding",2),kV([ru],HV.prototype,"color",2),kV([ru],HV.prototype,"parallel",2);var jV=class extends kh{constructor(){super(...arguments),this.id=xm(this),this.defaultColorRange=[],this.shape="polygon",this.label=new HV,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=_u.Angle,this.axisInnerRadius=0,this.axisOuterRadius=0,this.lineGroup=new GV({name:this.id}),this.rangeGroup=new GV({name:this.id}),this.labelGroup=new GV({name:this.id}),this._isRange=void 0}assignCrossLineGroup(e,t){e!==this._isRange&&(e?this.rangeGroup.appendChild(t):this.lineGroup.appendChild(t)),this._isRange=e}setSectorNodeProps(e){var t,i,n;e.fill=this.fill,e.fillOpacity=null!==(t=this.fillOpacity)&&void 0!==t?t:1,e.stroke=this.stroke,e.strokeOpacity=null!==(i=this.strokeOpacity)&&void 0!==i?i:1,e.strokeWidth=null!==(n=this.strokeWidth)&&void 0!==n?n:1,e.lineDash=this.lineDash}setLabelNodeProps(e,t,i,n,o){const{label:s}=this;e.x=t,e.y=i,e.text=s.text,e.textAlign="center",e.textBaseline=n,e.rotation=o,e.rotationCenterX=t,e.rotationCenterY=i,e.fill=s.color,e.fontFamily=s.fontFamily,e.fontSize=s.fontSize,e.fontStyle=s.fontStyle,e.visible=!0}};jV.className="PolarCrossLine",kV([ru],jV.prototype,"enabled",2),kV([ru],jV.prototype,"type",2),kV([ru],jV.prototype,"range",2),kV([ru],jV.prototype,"value",2),kV([ru],jV.prototype,"defaultColorRange",2),kV([ru],jV.prototype,"fill",2),kV([ru],jV.prototype,"fillOpacity",2),kV([ru],jV.prototype,"stroke",2),kV([ru],jV.prototype,"strokeWidth",2),kV([ru],jV.prototype,"strokeOpacity",2),kV([ru],jV.prototype,"lineDash",2),kV([ru],jV.prototype,"shape",2),kV([ru],jV.prototype,"label",2);var{getCrossLineValue:WV,validateCrossLineValue:_V,Group:KV,Path:UV,Sector:YV,RotatableText:$V,ContinuousScale:ZV}=uE,XV=class extends jV{constructor(){super(),this.direction=_u.Angle,this.polygonNode=new UV,this.sectorNode=new YV,this.lineNode=new UV,this.crossLineRange=new KV,this.labelNode=new $V,this.ticks=[],this.crossLineRange.append(this.polygonNode),this.crossLineRange.append(this.sectorNode),this.crossLineRange.append(this.lineNode),this.labelGroup.append(this.labelNode)}visibilityCheck(){if(!ZV.is(this.scale))return!0;const[e,t]=this.scale.domain,i=WV(this);if("range"===this.type){const[n,o]=i;return n>=e&&n<=t&&o>=n&&o<=t}return i>=e&&i<=t}update(e){const{scale:t}=this;if(!t||!_V(this,t)||!this.visibilityCheck())return this.rangeGroup.visible=!1,this.lineGroup.visible=!1,void(this.labelGroup.visible=!1);this.rangeGroup.visible=e,this.lineGroup.visible=e,this.labelGroup.visible=e,this.updateLineNode(e),this.updatePolygonNode(e),this.updateSectorNode(e),this.updateLabelNode(e)}updateLineNode(e){var t,i;const{scale:n,type:o,value:s,lineNode:r}=this;if(!e||"line"!==o||!n)return void(r.visible=!1);const a=n.convert(s);if(Number.isNaN(a))return void(r.visible=!1);const{axisInnerRadius:l,axisOuterRadius:d}=this;r.visible=!0,r.stroke=this.stroke,r.strokeOpacity=null!==(t=this.strokeOpacity)&&void 0!==t?t:1,r.strokeWidth=null!==(i=this.strokeWidth)&&void 0!==i?i:1,r.fill=void 0,r.lineDash=this.lineDash;const c=d*Math.cos(a),u=d*Math.sin(a),h=l*Math.cos(a),p=l*Math.sin(a);r.path.clear(!0),r.path.moveTo(h,p),r.path.lineTo(c,u),this.assignCrossLineGroup(!1,this.crossLineRange)}updatePolygonNode(e){const{polygonNode:t,range:i,scale:n,shape:o,type:s,ticks:r}=this;if(!e||"range"!==s||"polygon"!==o||!n||!i)return void(t.visible=!1);const{axisInnerRadius:a,axisOuterRadius:l}=this,d=r.indexOf(i[0]),c=r.indexOf(i[1]),u=(d<=c?r.slice(d,c+1):r.slice(d).concat(r.slice(0,c+1))).map(e=>n.convert(e));t.visible=!0,this.setSectorNodeProps(t);const{path:h}=t;h.clear(!0);for(const[p,g]of u.entries()){const e=l*Math.cos(g),t=l*Math.sin(g);0===p?h.moveTo(e,t):h.lineTo(e,t)}if(0===a)h.lineTo(0,0);else{const e=u.slice().reverse();for(const t of e){const e=a*Math.cos(t),i=a*Math.sin(t);h.lineTo(e,i)}}t.path.closePath(),this.assignCrossLineGroup(!0,this.crossLineRange)}updateSectorNode(e){var t;const{sectorNode:i,range:n,scale:o,shape:s,type:r}=this;if(!e||"range"!==r||"circle"!==s||!o||!n)return void(i.visible=!1);const{axisInnerRadius:a,axisOuterRadius:l}=this,d=n.map(e=>o.convert(e)),c=null!==(t=o.step)&&void 0!==t?t:0,u=o instanceof uE.BandScale?c/2:0;i.visible=!0,this.setSectorNodeProps(i),i.centerX=0,i.centerY=0,i.innerRadius=a,i.outerRadius=l,i.startAngle=d[0]-u,i.endAngle=d[1]+u,this.assignCrossLineGroup(!0,this.crossLineRange)}updateLabelNode(e){const{label:t,labelNode:i,range:n,scale:o,type:s,ticks:r}=this;if(!e||!1===t.enabled||!t.text||!o||"range"===s&&!n)return void(i.visible=!1);i.visible=!0;const{axisInnerRadius:a,axisOuterRadius:l}=this;let d,c,u,h;if("line"===s){const e=Pp(o.convert(this.value)),i=1.5*Math.PI,n=Va(e,i)||e>i||e<Math.PI/2,s=(a+l)/2*Math.cos(e),r=(a+l)/2*Math.sin(e);d=s+t.padding*Math.cos(e+Math.PI/2),c=r+t.padding*Math.sin(e+Math.PI/2),h=n?"top":"bottom",u=n?e:e-Math.PI}else{const[e,i]=n.map(e=>Pp(o.convert(e)));let s=(e+i)/2;e>i&&(s-=Math.PI),s=Pp(s);const a=(Va(s,0)||s>0)&&s<Math.PI;let p;p="circle"===this.shape||r.length<3?l-t.padding:l*Math.cos(Math.PI/r.length)-t.padding,d=p*Math.cos(s),c=p*Math.sin(s),h=a?"bottom":"top",u=a?s-Math.PI/2:s+Math.PI/2}this.setLabelNodeProps(i,d,c,h,u)}};XV.className="AngleCrossLine";var{Path:qV,RotatableText:QV,Transformable:JV,BBox:eG,Selection:tG,Line:iG}=uE,nG=class extends uE.AxisLabel{constructor(){super(...arguments),this.orientation="fixed"}};kV([ru],nG.prototype,"orientation",2);var oG=class extends uE.PolarAxis{constructor(e,t){super(e,t),this.startAngle=0,this.endAngle=void 0,this.tickLineGroupSelection=tG.select(this.tickLineGroup,iG,!1),this.gridLineGroupSelection=tG.select(this.gridLineGroup,iG,!1),this.labelData=[],this.tickData=[],this.radiusLineGroup=this.axisGroup.appendChild(new uE.TransformableGroup),this.radiusLine=this.radiusLineGroup.appendChild(new qV),this.includeInvisibleDomains=!0}get direction(){return _u.Angle}createLabel(){return new nG}calculateRotations(){const e=Bp(this.startAngle);return{rotation:e,parallelFlipRotation:Pp(e),regularFlipRotation:Pp(e-Math.PI/2)}}calculateTickLayout(e){const{nice:t,scale:i}=this,n={nice:[t,t],interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0},o=t?i.niceDomain(n,e):e,s=this.generateAngleTicks(o);this.tickData=s;const r=s.map(e=>e.value),a=r.reduce((e,t)=>Math.max("number"===typeof t?_a(t):0,e),0);return{niceDomain:o,tickDomain:o,ticks:r,rawTickCount:void 0,fractionDigits:a,timeInterval:void 0,bbox:this.getBBox()}}update(){super.update(),this.updateRadiusLine(),this.updateGridLines(),this.updateTickLines()}normalizedAngles(){const e=Pp(-Math.PI/2+Bp(this.startAngle));return[e,e+(null==this.endAngle?2*Math.PI:Op(Bp(this.endAngle)-Bp(this.startAngle)))]}computeRange(){this.range=this.normalizedAngles()}updateSelections(){const e=this.tickData;this.gridLineGroupSelection.update(this.gridLength&&this.gridLine.enabled?e:[]),this.tickLineGroupSelection.update(this.tick.enabled?e:[]),this.tickLabelGroupSelection.update(this.label.enabled?e:[]),this.gridLineGroupSelection.cleanup(),this.tickLineGroupSelection.cleanup(),this.tickLabelGroupSelection.cleanup()}updatePosition(){super.updatePosition();const{translation:e,radiusLineGroup:t}=this,i=Math.floor(e.x),n=Math.floor(e.y);t.translationX=i,t.translationY=n}updateRadiusLine(){const e=this.radiusLine,{path:t}=e;t.clear(!0);const{points:i,closePath:n}=this.getAxisLinePoints();for(const{x:o,y:s,moveTo:r,arc:a,radius:l=0,startAngle:d=0,endAngle:c=0}of i)a?t.arc(o,s,l,d,c):r?t.moveTo(o,s):t.lineTo(o,s);n&&t.closePath(),e.visible=this.line.enabled,e.stroke=this.line.stroke,e.strokeWidth=this.line.width,e.fill=void 0}getAxisLinePoints(){const{scale:e,shape:t,gridLength:i}=this,[n,o]=this.range,s=Va(o-n,2*Math.PI),r=[];if("circle"===t)s?r.push({x:i,y:0,moveTo:!0},{x:0,y:0,radius:i,startAngle:0,endAngle:2*Math.PI,arc:!0,moveTo:!1}):r.push({x:i*Math.cos(n),y:i*Math.sin(n),moveTo:!0},{x:0,y:0,radius:i,startAngle:Pp(n),endAngle:Pp(o),arc:!0,moveTo:!1});else if("polygon"===t){var a;const t=null===(a=e.ticks({nice:[this.nice,this.nice],interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0}))||void 0===a||null===(a=a.ticks)||void 0===a?void 0:a.map(t=>e.convert(t));if(t&&t.length>2)for(const[e,n]of t.entries()){const t=i*Math.cos(n),o=i*Math.sin(n),s=0===e;r.push({x:t,y:o,moveTo:s})}}return{points:r,closePath:s}}updateGridLines(){const{scale:e,gridLength:t,gridLine:{style:i,width:n},innerRadiusRatio:o}=this;if(!(i&&t>0))return;const s=t*o,r=i.length;this.gridLineGroupSelection.each((o,a,l)=>{const{value:d}=a,{stroke:c,lineDash:u}=i[l%r],h=e.convert(d);o.x1=s*Math.cos(h),o.y1=s*Math.sin(h),o.x2=t*Math.cos(h),o.y2=t*Math.sin(h),o.stroke=c,o.strokeWidth=n,o.lineDash=u,o.fill=void 0}),this.gridLineGroupSelection.cleanup()}updateLabels(){const{label:e,tickLabelGroupSelection:t}=this;t.each((t,i,n)=>{const o=this.labelData[n];o&&!o.hidden?(t.text=o.text,t.setFont(e),t.fill=e.color,t.x=o.x,t.y=o.y,t.setAlign(o),t.setBoxing(e),t.visible=!0,o.rotation?(t.rotation=o.rotation,t.rotationCenterX=o.x,t.rotationCenterY=o.y):t.rotation=0):t.visible=!1})}updateTickLines(){const{scale:e,gridLength:t,tick:i,tickLineGroupSelection:n}=this;n.each((n,o)=>{const{value:s}=o,r=e.convert(s),a=Math.cos(r),l=Math.sin(r);n.x1=t*a,n.y1=t*l,n.x2=(t+i.size)*a,n.y2=(t+i.size)*l,n.stroke=i.stroke,n.strokeWidth=i.width})}createLabelNodeData(e,t,i){const{label:n,gridLength:o,scale:s,tick:r}=this;if(!n.enabled)return[];const a=new QV,l=i.x-this.translation.x,d=i.x+i.width-this.translation.x,{fractionDigits:c}=this.layout.label,u=this.tickFormatter(this.scale.domain,this.tickData,!1,c),h=e.map((i,c)=>{var h;const{value:p}=i,g=o+n.spacing+r.size,m=s.convert(p),f=g*Math.cos(m),v=g*Math.sin(m),{textAlign:y,textBaseline:b}=this.getLabelAlign(m),x=c===e.length-1&&p!==e[0]&&Va(Pp(m),Pp(s.convert(e[0]))),C=this.getLabelRotation(m);let S=u(p,c);a.text=S,a.x=f,a.y=v,a.setFont(n),a.textAlign=y,a.textBaseline=b,a.rotation=C,C&&(a.rotationCenterX=f,a.rotationCenterY=v);let w=C?JV.toCanvas(a):a.getBBox();if(w&&t.hideWhenNecessary&&!C){const e=l-w.x,t=w.x+w.width-d,i=1;if(e>i||t>i){S=Um(S,{maxWidth:w.width-Math.max(e,t),font:n,textWrap:"never"}),a.text=S,w=a.getBBox()}}return{text:S,x:f,y:v,textAlign:y,textBaseline:b,hidden:""===S||(null!==(h=i.hidden)&&void 0!==h?h:x),rotation:C,box:w}});return n.avoidCollisions&&this.avoidLabelCollisions(h),h}computeLabelsBBox(e,t){this.labelData=this.createLabelNodeData(this.tickData,e,t);const i=this.labelData.map(e=>{let{box:t}=e;return t}).filter(e=>null!=e);return this.label.enabled&&0!==i.length?eG.merge(i):null}getLabelOrientation(){const{label:e}=this;return e instanceof nG?e.orientation:"fixed"}getLabelRotation(e){var t;let i=Bp(null!==(t=this.label.rotation)&&void 0!==t?t:0);e=Pp(e);const n=this.getLabelOrientation();return"parallel"===n?(i+=e,e>=0&&e<Math.PI?i-=Math.PI/2:i+=Math.PI/2):"perpendicular"===n&&(i+=e,e>=Math.PI/2&&e<1.5*Math.PI&&(i+=Math.PI)),i}getLabelAlign(e){const t=Math.cos(e),i=Math.sin(e);let n,o;const s=this.getLabelOrientation(),r=Va(t,0),a=Va(i,0),l=Va(t,1),d=Va(i,-1),c=t>0&&!r,u=i>0&&!a;return"parallel"===s?(n="center",o=l&&a||u?"top":"bottom"):"perpendicular"===s?(n=d||c?"left":"right",o="middle"):(n="right",r?n="center":c&&(n="left"),o="bottom",a?o="middle":u&&(o="top")),{textAlign:n,textBaseline:o}}updateCrossLines(){const{shape:e,gridLength:t,innerRadiusRatio:i}=this;for(const n of this.crossLines)n instanceof XV&&(n.ticks=this.tickData.map(e=>e.value),n.shape=e,n.axisOuterRadius=t,n.axisInnerRadius=t*i);super.updateCrossLines()}};oG.CrossLineConstructor=XV,kV([ru],oG.prototype,"startAngle",2),kV([ru],oG.prototype,"endAngle",2);var{CategoryScale:sG}=uE,rG=class extends oG{constructor(e){super(e,new sG),this.groupPaddingInner=0,this.paddingInner=0,this.interval=new VV}hasDefinedDomain(){return!1}generateAngleTicks(e){var t,i;const{scale:n,gridLength:o}=this,{values:s,minSpacing:r}=this.interval,a={nice:[this.nice,this.nice],interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0},l=null!==(t=null!==s&&void 0!==s?s:null===(i=n.ticks(a,e))||void 0===i?void 0:i.ticks)&&void 0!==t?t:[];if(l.length<2||null==r)return l.map(e=>({value:e,visible:!0}));const d=l[0],c=n.convert(d),u=o*Math.cos(c),h=o*Math.sin(c);for(let p=1;p<l.length-1;p++){const e=l[p],t=n.convert(e);if(t-c>Math.PI)break;const i=o*Math.cos(t),s=o*Math.sin(t);if(Math.hypot(i-u,s-h)>r){const e=new Set([d]);return zV(l,p,(t,i)=>{e.add(i)}),l.map(t=>({value:t,visible:e.has(t)}))}}return[{value:d,visible:!0}]}avoidLabelCollisions(e){const{minSpacing:t}=this.label;if(e.length<3)return;const i=(e,i)=>{if(e.hidden||i.hidden)return!1;if(null==t)return e.box.collidesBBox(i.box);const n=e.box.clone().grow(t/2),o=i.box.clone().grow(t/2);return n.collidesBBox(o)},n=e[0],o=e.at(-1),s=new Set([n]),r=Va(n.x,o.x)&&Va(n.y,o.y),a=Math.floor(e.length/2);for(let l=1;l<=a;l++){const t=r?e.slice(0,-1):e;if(!zV(t,l,i)){zV(t,l,(e,t)=>{s.add(t)});break}}for(const l of e)s.has(l)||(l.hidden=!0,l.box=void 0)}tickFormatParams(){return{type:"category"}}datumFormatParams(e,t){const{datum:i,seriesId:n,legendItemName:o,key:s,source:r,property:a,domain:l,boundSeries:d}=t;return{type:"category",value:e,datum:i,seriesId:n,legendItemName:o,key:s,source:r,property:a,domain:l,boundSeries:d}}};rG.className="AngleCategoryAxis",rG.type="angle-category",kV([ru],rG.prototype,"groupPaddingInner",2),kV([ru],rG.prototype,"paddingInner",2),kV([ru],rG.prototype,"interval",2);var aG={type:"axis",name:"angle-category",chartType:"polar",enterprise:!0,version:GC,options:uE.angleCategoryAxisOptionsDefs,themeTemplate:{label:{spacing:5},gridLine:{enabled:!1},shape:{$findFirstSiblingNotOperation:void 0}},create:e=>new rG(e)},{LinearScale:lG}=uE,dG=class e extends lG{constructor(){super(...arguments),this.arcLength=0}static getNiceStepAndTickCount(e,t){const[i,n]=t;let o=lG.getTickStep(i,n,e);const s=Number.isNaN(e.maxTickCount)?1/0:e.maxTickCount,r=Math.abs(n-i)/o;let a=Math.pow(2,Math.ceil(Math.log(r)/Math.log(2)));return a>s&&(a/=2,o*=2),{count:a,step:o}}ticks(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.domain;const{arcLength:n}=this;if(!i||i.length<2||i.some(e=>!Number.isFinite(e))||n<=0)return{ticks:[],count:0};const{nice:o,interval:s}=t,[r,a]=i;if(s){const e=Math.abs(s);if(!Qf((a-r)/e,this.getPixelRange())){const t=qf(r,a,e);return{ticks:t.ticks,count:t.count}}}let l;if(o&&this.hasNiceRange()){const n=super.niceDomain(t,i);l=e.getNiceStepAndTickCount(t,n).step}else l=lG.getTickStep(r,a,t);const d=qf(r,a,l);return{ticks:d.ticks,count:d.count}}hasNiceRange(){const e=this.range.slice().sort((e,t)=>e-t);return[Math.PI,2*Math.PI].some(t=>Va(t,e[1]-e[0]))}niceDomain(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.domain;const n=super.niceDomain(t,i);if(!this.hasNiceRange())return n;const o=n[0]>n[1],s=o?n[1]:n[0],{step:r,count:a}=e.getNiceStepAndTickCount(t,n),l=1/r,d=r>=1?Math.ceil(s/r+a)*r:Math.ceil((s+a*r)*l)/l;return o?[d,s]:[s,d]}getPixelRange(){return this.arcLength}},cG=class extends oG{constructor(e){super(e,new dG),this.shape="circle",this.interval=new VV}hasDefinedDomain(){const{min:e,max:t}=this;return null!=e&&null!=t&&e<t}normaliseDataDomain(e){var t;const{min:i,max:n,preferredMin:o,preferredMax:s}=this,{extent:r,clipped:a}=Eg(e.domain,i,n,o,s,void 0,null===(t=e.sortMetadata)||void 0===t?void 0:t.sortOrder);return{domain:r,clipped:a}}getDomainExtentsNice(){return[null==this.min&&this.nice,null==this.max&&this.nice]}updateScale(){super.updateScale(),this.scale.arcLength=this.getRangeArcLength()}getRangeArcLength(){const{range:e}=this;return(Gp(Math.min(...e),Math.max(...e))||2*Math.PI)*this.gridLength}generateAngleTicks(e){const{scale:t,range:i,nice:n}=this,{values:o,step:s,minSpacing:r,maxSpacing:a}=this.interval;let l;if(null==o){var d,c;const{arcLength:o}=t,u=a?Math.floor(o/a):1,h=r?Math.floor(o/r):1/0,p=Math.floor(4/Math.PI*Math.abs(i[0]-i[1])),g={nice:[n,n],interval:s,tickCount:Math.max(u,Math.min(h,p)),minTickCount:u,maxTickCount:h};l=null!==(d=null===(c=t.ticks(g,e))||void 0===c?void 0:c.ticks)&&void 0!==d?d:[]}else{const[t,i]=$u(e.map(Number));l=o.filter(e=>e>=t&&e<=i).sort((e,t)=>e-t)}return l.map(e=>({value:e,visible:!0}))}avoidLabelCollisions(e){const{minSpacing:t}=this.label,i=(e,i)=>{if(e.hidden||i.hidden)return!1;if(null==t)return e.box.collidesBBox(i.box);const n=e.box.clone().grow(t/2),o=i.box.clone().grow(t/2);return n.collidesBBox(o)},n=e[0],o=e.at(-1);n!==o&&Va(n.x,o.x)&&Va(n.y,o.y)&&(o.hidden=!0);for(let s=1;s<e.length;s*=2){let t=!1;for(let n=s;n<e.length;n+=s){const o=e[n];if(i(e[n-s],o)){t=!0;break}}if(!t){for(const[t,i]of e.entries())t%s>0&&(i.hidden=!0,i.box=void 0);return}}for(const[s,r]of e.entries())s>0&&(r.hidden=!0,r.box=void 0)}tickFormatParams(e,t,i){return{type:"number",fractionDigits:i}}datumFormatParams(e,t,i){const{datum:n,seriesId:o,legendItemName:s,key:r,source:a,property:l,domain:d,boundSeries:c}=t;return{type:"number",value:e,datum:n,seriesId:o,legendItemName:s,key:r,source:a,property:l,domain:d,boundSeries:c,fractionDigits:i}}};cG.className="AngleNumberAxis",cG.type="angle-number",kV([ru],cG.prototype,"min",2),kV([ru],cG.prototype,"max",2),kV([ru],cG.prototype,"preferredMin",2),kV([ru],cG.prototype,"preferredMax",2),kV([ru],cG.prototype,"interval",2);var uG={type:"axis",name:"angle-number",chartType:"polar",enterprise:!0,version:GC,options:uE.angleNumberAxisOptionsDefs,themeTemplate:{label:{spacing:5},gridLine:{enabled:!1}},create:e=>new cG(e)},{OrdinalTimeScale:hG,ApproximateOrdinalTimeScale:pG,APPROXIMATE_THRESHOLD:gG,TimeAxisParentLevel:mG,minimumTimeAxisDatumGranularity:fG}=uE,vG=class extends uE.DiscreteTimeAxis{constructor(e){const t=new hG;super(e,t),this.parentLevel=new mG,this.accurateScale=t,this.approximateScale=new pG,this.approximateScale.setSourceScale(t),Object.defineProperty(this,"scale",{get:()=>this.getActiveScale(),configurable:!0})}get primaryLabel(){return this.parentLevel.enabled?this.parentLevel.label:void 0}get primaryTick(){return this.parentLevel.enabled?this.parentLevel.tick:void 0}getActiveScale(){var e,t;const i=this.accurateScale.bandCount(this.visibleRange);return null!==(e=null===(t=this.accurateScale.getUniformityCache(this.visibleRange))||void 0===t?void 0:t.isUniform)&&void 0!==e&&e&&i>=gG?this.approximateScale:this.accurateScale}processData(){super.processData();const{boundSeries:e,direction:t}=this;this.minimumTimeGranularity=fG(e,t,void 0,void 0)}tickFormatParams(e,t,i,n){null!==n&&void 0!==n||(n=nv(t));const o=sv(e);return{type:"date",unit:Rf(n),step:Ef(n),epoch:Pf(n),truncateDate:o}}datumFormatParams(e,t,i,n,o){if("number"===typeof e&&(e=new Date(e)),null==n){const{minimumTimeGranularity:t}=this,i=ov(e);n=null!=t&&Ff(t)<Ff(i)?t:i}const{datum:s,seriesId:r,legendItemName:a,key:l,source:d,property:c,domain:u,boundSeries:h}=t;return{type:"date",value:e,datum:s,seriesId:r,legendItemName:a,key:l,source:d,property:c,domain:u,boundSeries:h,unit:Rf(n),step:Ef(n),epoch:Pf(n),style:o}}};vG.className="OrdinalTimeAxis",vG.type="ordinal-time",kV([ru],vG.prototype,"parentLevel",2);var yG={type:"axis",name:"ordinal-time",chartType:"cartesian",enterprise:!0,version:GC,options:uE.ordinalTimeAxisOptionsDefs,themeTemplate:{groupPaddingInner:0,label:{autoRotate:!1,minSpacing:40},gridLine:{enabled:!1},interval:{placement:"between"}},create:e=>new vG(e)},{validateCrossLineValue:bG,Group:xG,Path:CG,Sector:SG,RotatableText:wG}=uE,MG=class extends HV{constructor(){super(...arguments),this.positionAngle=void 0}};kV([ru],MG.prototype,"positionAngle",2);var kG=class extends jV{constructor(){super(),this.direction=_u.Radius,this.label=new MG,this.polygonNode=new CG,this.sectorNode=new SG,this.crossLineRange=new xG,this.labelNode=new wG,this.outerRadius=0,this.innerRadius=0,this.crossLineRange.append(this.polygonNode),this.crossLineRange.append(this.sectorNode),this.labelGroup.append(this.labelNode)}update(e){const{scale:t}=this;if(!t||!bG(this,t))return this.rangeGroup.visible=!1,this.lineGroup.visible=!1,void(this.labelGroup.visible=!1);this.updateRadii();const{innerRadius:i,outerRadius:n}=this;e&&(e=i>=this.axisInnerRadius&&n<=this.axisOuterRadius),this.rangeGroup.visible=e,this.lineGroup.visible=e,this.labelGroup.visible=e,this.updatePolygonNode(e),this.updateSectorNode(e),this.updateLabelNode(e),this.assignCrossLineGroup("range"===this.type,this.crossLineRange)}updateRadii(){const{range:e,scale:t,type:i,axisInnerRadius:n,axisOuterRadius:o}=this;if(!t)return{innerRadius:0,outerRadius:0};const s=e=>o+n-e;let r,a;if("line"===i)r=s(t.convert(this.value)),a=r;else{var l;const i=Math.abs(null!==(l=null===t||void 0===t?void 0:t.bandwidth)&&void 0!==l?l:0),n=e.map(e=>t.convert(e));r=s(Math.max(...n)),a=s(Math.min(...n))+i}this.outerRadius=r,this.innerRadius=a}drawPolygon(e,t,i){for(const[n,o]of t.entries()){const t=e*Math.cos(o),s=e*Math.sin(o);0===n?i.path.moveTo(t,s):i.path.lineTo(t,s)}i.path.closePath()}updatePolygonNode(e){const{gridAngles:t,polygonNode:i,scale:n,shape:o,type:s,innerRadius:r,outerRadius:a}=this;if(!e||"polygon"!==o||!n||!t)return void(i.visible=!1);i.visible=!0;const l=this.getPadding();i.path.clear(!0),this.drawPolygon(a-l,t,i);const d=t.slice().reverse(),c="line"===s?a-l:r+l;this.drawPolygon(c,d,i),this.setSectorNodeProps(i)}updateSectorNode(e){const{axisInnerRadius:t,axisOuterRadius:i,scale:n,sectorNode:o,shape:s,innerRadius:r,outerRadius:a}=this;if(!e||"circle"!==s||!n)return void(o.visible=!1);o.visible=!0,o.startAngle=0,o.endAngle=2*Math.PI;const l=this.getPadding(),d=za(t,r+l,i),c=za(t,a-l,i);o.innerRadius=Math.min(d,c),o.outerRadius=Math.max(d,c),this.setSectorNodeProps(o)}updateLabelNode(e){var t,i;const{innerRadius:n,label:o,labelNode:s,scale:r,shape:a,type:l}=this;if(!e||!1===o.enabled||!o.text||!r)return void(s.visible=!1);const d=Wp((null!==(t=o.positionAngle)&&void 0!==t?t:0)-90),c=(Va(d,0)||d>0)&&d<Math.PI,u=c?d-Math.PI/2:d+Math.PI/2;let h;const p=null!==(i=this.gridAngles)&&void 0!==i?i:[];h="line"===l?n+o.padding:"circle"===a||p.length<3?n-o.padding:n*Math.cos(Math.PI/p.length)-o.padding;const g=h*Math.cos(d),m=h*Math.sin(d);let f;f="line"===l?c?"top":"bottom":c?"bottom":"top",this.setLabelNodeProps(s,g,m,f,u)}getPadding(){var e,t;const{scale:i}=this;if(!i)return 0;const n=Math.abs(null!==(e=i.bandwidth)&&void 0!==e?e:0),o=Math.abs(null!==(t=i.step)&&void 0!==t?t:0);return i instanceof uE.BandScale?(o-n)/2:0}};kG.className="RadiusCrossLine";var{Caption:DG,Group:IG,TransformableGroup:AG,Path:LG,Line:NG,Selection:TG,generateTicks:RG,AxisGroupZIndexMap:EG}=uE,PG=class extends uE.AxisLabel{constructor(){super(...arguments),this.autoRotateAngle=335}};kV([ru],PG.prototype,"autoRotate",2),kV([ru],PG.prototype,"autoRotateAngle",2);var OG=class extends uE.PolarAxis{constructor(e,t){super(e,t),this.positionAngle=0,this.gridLineGroupSelection=TG.select(this.gridLineGroup,NG,!1),this.generatedTicks=void 0,this.headingLabelGroup=this.axisGroup.appendChild(new AG({name:"".concat(this.id,"-Axis-heading")})),this.lineNodeGroup=this.axisGroup.appendChild(new AG({name:"".concat(this.id,"-Axis-line")})),this.lineNode=this.lineNodeGroup.appendChild(new NG({name:"".concat(this.id,"-Axis-line"),zIndex:EG.AxisLine})),this.gridPathGroup=this.gridGroup.appendChild(new IG({name:"".concat(this.id,"-gridPaths"),zIndex:bp.AXIS_GRID})),this.gridPathSelection=TG.select(this.gridPathGroup,LG),this.headingLabelGroup.appendChild(this.title.caption.node),this.cleanup.register(this.title.caption.registerInteraction(this.moduleCtx,"afterend"))}get direction(){return _u.Radius}getAxisTransform(){const e=this.scale.range[0],{translation:t,positionAngle:i,innerRadiusRatio:n}=this,o=e*n,s=Bp(i);return{translationX:t.x,translationY:t.y-e-o,rotation:s,rotationCenterX:0,rotationCenterY:e+o}}update(){super.update(),this.updateTitle(),this.updateGridLines();const{enabled:e,stroke:t,width:i}=this.line;this.lineNode.setProperties({stroke:t,strokeWidth:e?i:0,x1:0,y1:this.range[0],x2:0,y2:this.range[1]})}updatePosition(){super.updatePosition();const e=this.getAxisTransform();this.tickLineGroup.setProperties(e),this.tickLabelGroup.setProperties(e),this.lineNodeGroup.setProperties(e),this.headingLabelGroup.setProperties(e)}calculateRotations(){return{rotation:0,parallelFlipRotation:0,regularFlipRotation:-Math.PI/2}}calculateTickLayout(e,t,i){var n=this;const o=this.label.getSideFlag(),s=o*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding),{range:r,reverse:a,defaultTickMinSpacing:l}=this,d=RG({scale:this.scale,label:this.label,interval:this.interval,tickFormatter:function(){return n.tickFormatter(...arguments)},domain:e,range:r,reverse:a,niceMode:t,visibleRange:[0,1],defaultTickMinSpacing:l,labelOffset:s,sideFlag:o,axisRotation:0,sizeLimit:void 0,primaryTickCount:void 0}),{tickData:c}=d,{ticks:u,rawTicks:h,rawTickCount:p,tickDomain:g,fractionDigits:m,niceDomain:f=e}=c,v=u.map(e=>this.getTickLabelProps(e,d));return this.generatedTicks={ticks:u,labels:v},{ticks:h,tickDomain:g,niceDomain:f,rawTickCount:p,fractionDigits:m,timeInterval:void 0}}updateSelections(){const{generatedTicks:e}=this;if(!e)return;const{ticks:t,labels:i}=e;this.gridLineGroupSelection.update(this.gridLength?t:[]),this.tickLabelGroupSelection.update(i),this.gridPathSelection.update(this.gridLine.enabled?this.prepareGridPathTickData(t):[]),this.gridLineGroupSelection.cleanup(),this.tickLabelGroupSelection.cleanup(),this.gridPathSelection.cleanup()}updateLabels(){if(!this.label.enabled)return;const e=uE.resetAxisLabelSelectionFn();this.tickLabelGroupSelection.each((t,i)=>{var n;t.fill=i.color,t.text=i.text,t.textBaseline=i.textBaseline,t.textAlign=null!==(n=i.textAlign)&&void 0!==n?n:"center",t.setFont(i),t.setBoxing(i),t.setProperties(e(t,i))})}updateGridLines(){var e;const{gridLine:{style:t,width:i},shape:n,generatedTicks:o}=this;if(!t||!o)return;const s=t.length,[r,a]=null!==(e=this.gridRange)&&void 0!==e?e:[0,2*Math.PI],l=Va(a-r,2*Math.PI),d="circle"===n?(e,t)=>{const{path:i}=e;i.clear(!0);const n=this.getTickRadius(t);l?(i.moveTo(n,0),i.arc(0,0,n,0,2*Math.PI)):(i.moveTo(n*Math.cos(r),n*Math.sin(r)),i.arc(0,0,n,Pp(r),Pp(a))),l&&i.closePath()}:(e,t)=>{const{path:i}=e,n=this.gridAngles;if(i.clear(!0),!n||n.length<3)return;const o=this.getTickRadius(t);for(const[s,r]of n.entries()){const e=o*Math.cos(r),t=o*Math.sin(r);0===s?i.moveTo(e,t):i.lineTo(e,t);for(const[s,r]of n.entries()){const e=o*Math.cos(r),t=o*Math.sin(r);0===s?i.moveTo(e,t):i.lineTo(e,t)}i.closePath()}i.closePath()};this.gridPathSelection.each((e,n,o)=>{((e,n)=>{const{stroke:o,lineDash:r}=t[n%s];e.stroke=o,e.strokeWidth=i,e.lineDash=r,e.fill=void 0})(e,o),d(e,n)})}updateTitle(){const e=e=>e.defaultValue,{title:t,range:i}=this,{formatter:n=e}=this.title;t.caption.enabled=t.enabled,t.caption.fontFamily=t.fontFamily,t.caption.fontSize=t.fontSize,t.caption.fontStyle=t.fontStyle,t.caption.fontWeight=t.fontWeight,t.caption.color=t.color,t.caption.wrapping=t.wrapping;let o=!1;const s=t.caption.node;t.enabled&&(o=!0,s.rotation=Math.PI/2,s.x=Math.floor((i[0]+i[1])/2),s.y=-DG.SMALL_PADDING,s.textAlign="center",s.textBaseline="bottom",s.text=this.cachedCallWithContext(n,this.getTitleFormatterParams(this.scale.domain))),s.visible=o}updateCrossLines(){for(const e of this.crossLines)if(e instanceof kG){const{shape:t,gridAngles:i,range:n,innerRadiusRatio:o}=this,s=n[0];e.shape=t,e.gridAngles=i,e.axisOuterRadius=s,e.axisInnerRadius=s*o}super.updateCrossLines()}createLabel(){return new PG}getTickLabelProps(e,t){var i;const{label:n}=this,{rotation:o,textBaseline:s,textAlign:r}=t,a=this.scale.range,l=null!==(i=e.tickLabel)&&void 0!==i?i:"",d=n.getSideFlag()*(this.getTickSize()+n.spacing+this.seriesAreaPadding),c=""!==l&&null!=l,u=o;return p(p({},this.getLabelStyles({value:e.tick,formattedValue:e.tickLabel})),{},{tickId:e.tickId,rotation:u,text:l,textAlign:r,textBaseline:s,visible:c,x:d,y:e.translation,rotationCenterX:d,rotationCenterY:e.translation,range:a})}};OG.CrossLineConstructor=kG,kV([ru],OG.prototype,"positionAngle",2);var{CategoryScale:FG}=uE,zG=class extends OG{constructor(e){super(e,new FG),this.shape="circle",this.groupPaddingInner=0,this.paddingInner=0,this.paddingOuter=0}hasDefinedDomain(){return!1}normaliseDataDomain(e){return{domain:e.domain,clipped:!1}}prepareGridPathTickData(e){return e.slice().reverse()}getTickRadius(e){const{scale:t,innerRadiusRatio:i}=this,n=t.range[0],o=n*i;if(FG.is(t)){const i=t.domain,n=i.length-1-i.indexOf(e.tick);return 0===n?o:t.inset+t.step*(n-.5)+t.bandwidth/2}{const i=(n-o)/t.domain.length;return n-e.translation+o-i/2}}tickFormatParams(){return{type:"category"}}datumFormatParams(e,t){const{datum:i,seriesId:n,legendItemName:o,key:s,source:r,property:a,domain:l,boundSeries:d}=t;return{type:"category",value:e,datum:i,seriesId:n,legendItemName:o,key:s,source:r,property:a,domain:l,boundSeries:d}}};zG.className="RadiusCategoryAxis",zG.type="radius-category",kV([ru],zG.prototype,"groupPaddingInner",2),kV([ig("scale","paddingInner"),ru],zG.prototype,"paddingInner",2),kV([ig("scale","paddingOuter"),ru],zG.prototype,"paddingOuter",2);var BG={type:"axis",name:"radius-category",chartType:"polar",enterprise:!0,version:GC,options:uE.radiusCategoryAxisOptionsDefs,themeTemplate:{positionAngle:0,line:{enabled:!1},label:{minSpacing:5}},create:e=>new zG(e)},{LinearScale:VG}=uE,GG=class extends OG{constructor(e){super(e,new VG),this.shape="polygon"}hasDefinedDomain(){const{min:e,max:t}=this;return null!=e&&null!=t&&e<t}prepareGridPathTickData(e){const{scale:t}=this,i=t.domain[1];return e.filter(e=>{let{tick:t}=e;return t!==i}).sort((e,t)=>t.tick-e.tick)}getTickRadius(e){const{scale:t}=this,i=t.range[0],n=i*this.innerRadiusRatio;return i-e.translation+n}normaliseDataDomain(e){var t;const{min:i,max:n,preferredMin:o,preferredMax:s}=this,{extent:r,clipped:a}=Eg(e.domain,i,n,o,s,void 0,null===(t=e.sortMetadata)||void 0===t?void 0:t.sortOrder);return{domain:r,clipped:a}}getDomainExtentsNice(){return[null==this.min&&this.nice,null==this.max&&this.nice]}tickFormatParams(e,t,i){return{type:"number",fractionDigits:i}}datumFormatParams(e,t,i){const{datum:n,seriesId:o,legendItemName:s,key:r,source:a,property:l,domain:d,boundSeries:c}=t;return{type:"number",value:e,datum:n,seriesId:o,legendItemName:s,key:r,source:a,property:l,domain:d,boundSeries:c,fractionDigits:i}}};GG.className="RadiusNumberAxis",GG.type="radius-number",kV([ru],GG.prototype,"min",2),kV([ru],GG.prototype,"max",2),kV([ru],GG.prototype,"preferredMin",2),kV([ru],GG.prototype,"preferredMax",2);var HG={type:"axis",name:"radius-number",chartType:"polar",enterprise:!0,version:GC,options:uE.radiusNumberAxisOptionsDefs,themeTemplate:{positionAngle:0,line:{enabled:!1},shape:{$findFirstSiblingNotOperation:void 0},label:{minSpacing:5}},create:e=>new GG(e)},jG=class extends Ra{constructor(e){super(),this.ctx=e,this.enabled=!0,e.animationManager.skip(!1),this.cleanup.register(()=>e.animationManager.skip(!0))}};kV([og((e,t)=>{e.ctx.animationManager.skip(!t)}),ru],jG.prototype,"enabled",2),kV([og((e,t)=>{null!=t&&(e.ctx.animationManager.defaultDuration=t)}),ru],jG.prototype,"duration",2),kV([og((e,t)=>{e.ctx.animationManager.maxAnimatableItems=null!==t&&void 0!==t?t:1/0}),ru],jG.prototype,"maxAnimatableItems",2);var WG={type:"plugin",name:"animation",enterprise:!0,version:GC,options:{enabled:Cd,duration:Pd},themeTemplate:{enabled:!0},create:e=>new jG(e)};WG.options.maxAnimatableItems=gd(Pd);var _G=class e extends Ra{constructor(e){super(),this.ctx=e,this.activeSections=new Set,this.sectionButtons={annotations:[],chartToolbar:[]},this.container=this.ctx.domManager.addChild("canvas-overlay","shared-toolbar"),this.container.role="presentation"}getSharedToolbar(e){return this.sharedToolbar||this.createSharedToolbar(),"chartToolbar"===e&&this.sharedToolbar&&this.sharedToolbar.setAriaLabelId("ariaLabelFinancialCharts"),this.toolbarWithSection(e)}createSharedToolbar(){this.sharedToolbar=new uE.Toolbar(this.ctx,"ariaLabelAnnotationsToolbar","vertical"),this.sharedToolbar.addClass("ag-charts-shared-toolbar"),this.container.append(this.sharedToolbar.getElement()),this.cleanup.register(()=>{this.sharedToolbar&&(this.sharedToolbar.getElement().remove(),this.sharedToolbar.destroy(),this.sharedToolbar=void 0)})}toolbarWithSection(t){const i=this.sharedToolbar,n={layout:(e,n)=>{if(null!=this.firstLayoutSection&&this.firstLayoutSection!==t&&this.activeSections.has(this.firstLayoutSection))return;this.firstLayoutSection=t;const o=i.getBounds().width;i.setBounds({x:e.x,y:e.y,width:o}),e.shrink({left:o+i.horizontalSpacing+(null!==n&&void 0!==n?n:0)})},addToolbarListener:(e,n)=>i.addToolbarListener(e,e=>{const i=this.getSectionIndex(t,e.button.index);if(i<0)return;const o=p(p({},e),{},{button:this.sectionButtons[t][i]});n(o)}),updateButtons:n=>{this.sectionButtons[t]=n;const o=e.SECTION_ORDER.flatMap(e=>this.sectionButtons[e]);i.updateButtons(o)},updateButtonByIndex:(e,n)=>{i.updateButtonByIndex(this.getIndex(t,e),n)},toggleActiveButtonByIndex:e=>{i.toggleActiveButtonByIndex(this.getIndex(t,e))},toggleButtonEnabledByIndex:(e,n)=>{i.toggleButtonEnabledByIndex(this.getIndex(t,e),n)},setHidden:n=>{n?this.activeSections.delete(t):this.activeSections.add(t);let o=0;for(const s of e.SECTION_ORDER)if(s===t)for(const e of this.sectionButtons[t].keys())i.setButtonHiddenByIndex(o+e,n);else o+=this.sectionButtons[s].length},destroy:()=>{n.setHidden(!0),0===this.activeSections.size&&this.destroy()},clearActiveButton:i.clearActiveButton.bind(i),addListener:i.addListener.bind(i),removeListener:i.removeListener.bind(i)};return n.setHidden(!1),n}getIndex(t,i){let n=0;for(const o of e.SECTION_ORDER){if(o===t)return n+i;n+=this.sectionButtons[o].length}return-1}getSectionIndex(t,i){let n=0;for(const o of e.SECTION_ORDER){if(o===t)return i>=n+this.sectionButtons[t].length?-1:i-n;n+=this.sectionButtons[o].length}return-1}};_G.SECTION_ORDER=["chartToolbar","annotations"];var KG=_G,UG="text-input",YG="canvas-overlay",$G=class{constructor(e){this.ctx=e,this.cleanup=new Ta,this.layout={getTextInputCoords:()=>({x:0,y:0}),getTextPosition:()=>"center",alignment:"center",textAlign:"center"},this.visible=!1,this.element=e.domManager.addChild(YG,UG),this.element.classList.add("ag-charts-text-input"),this.cleanup.register(()=>e.domManager.removeChild(YG,UG))}setKeyDownHandler(e){this.cleanup.register(Gr(this.element,"keydown",e))}show(e){var t,i,n,o,s,r,a,l,d,c,u,h,p,g;this.element.innerHTML='<div contenteditable="plaintext-only" class="ag-charts-text-input__textarea" tabindex="0"></div>';const m=this.element.firstElementChild;var f;(Xp(m,{role:"textbox","data-preventdefault":!1}),m.isContentEditable||(m.contentEditable="true"),m.setAttribute("placeholder",this.ctx.localeManager.t(null!==(t=e.placeholderText)&&void 0!==t?t:"inputTextareaPlaceholder")),null!==(i=e.styles)&&void 0!==i&&i.placeholderColor)&&m.style.setProperty("--placeholder-text-color",null===(f=e.styles)||void 0===f?void 0:f.placeholderColor);m.innerText=null!==(n=e.text)&&void 0!==n?n:"",m.style.color=null!==(o=null===(s=e.styles)||void 0===s?void 0:s.color)&&void 0!==o?o:"inherit",m.style.fontFamily=null!==(r=null===(a=e.styles)||void 0===a?void 0:a.fontFamily)&&void 0!==r?r:"inherit",m.style.fontSize=null!==(l=e.styles)&&void 0!==l&&l.fontSize?"".concat(e.styles.fontSize,"px"):"inherit",m.style.fontStyle=null!==(d=null===(c=e.styles)||void 0===c?void 0:c.fontStyle)&&void 0!==d?d:"inherit",m.style.fontWeight="number"===typeof(null===(u=e.styles)||void 0===u?void 0:u.fontWeight)?"".concat(e.styles.fontWeight):null!==(h=null===(p=e.styles)||void 0===p?void 0:p.fontWeight)&&void 0!==h?h:"inherit",kp(m),m.addEventListener("input",()=>{var t;this.updatePosition(),null===(t=e.onChange)||void 0===t||t.call(e,this.getValue(),this.getBBox())}),m.addEventListener("click",e=>{e.stopPropagation()}),e.layout&&(this.layout=e.layout,this.updatePosition()),null===(g=e.onChange)||void 0===g||g.call(e,this.getValue(),this.getBBox()),this.visible=!0}hide(){this.element.innerHTML="",this.layout={getTextInputCoords:()=>({x:0,y:0}),getTextPosition:()=>"center",alignment:"center",textAlign:"center"},this.visible=!1}isVisible(){return this.visible}updateColor(e){this.element.firstElementChild&&(this.element.firstElementChild.style.color=e)}updateFontSize(e){if(this.element.firstElementChild)return this.element.firstElementChild.style.fontSize="".concat(e,"px"),this.updatePosition(),this.getBBox()}getValue(){if(this.element.firstElementChild)return this.element.firstElementChild.innerText.trim()}updatePosition(){const{element:e}=this,t=e.firstElementChild;if(!t)return;const i=this.ctx.domManager.getBoundingClientRect(),{width:n,getTextInputCoords:o,getTextPosition:s,alignment:r,textAlign:a}=this.layout;e.style.setProperty("width",n?"".concat(n,"px"):"unset");const l=t.getBoundingClientRect(),d=o(l.height);let c=d.x;"center"===r?c-=(null!==n&&void 0!==n?n:l.width)/2:"right"===r&&(c-=null!==n&&void 0!==n?n:l.width);const u=s();let h=d.y;"center"===u?h-=l.height/2:"bottom"===u&&(h-=l.height),e.style.setProperty("top","".concat(h,"px")),e.style.setProperty("left","".concat(c,"px")),e.style.setProperty("max-width","".concat(i.width-c,"px")),e.style.setProperty("text-align",r),t.style.setProperty("text-align",a)}getBBox(){const{left:e,top:t,width:i,height:n}=this.element.getBoundingClientRect();return new uE.BBox(e,t,i,n)}destroy(){this.cleanup.flush()}},ZG=class extends kh{constructor(){super(...arguments),this.enabled=!1,this.axes="y"}};kV([ru],ZG.prototype,"enabled",2),kV([ru],ZG.prototype,"axes",2);var XG=(e=>(e.Line="line",e.HorizontalLine="horizontal-line",e.VerticalLine="vertical-line",e.DisjointChannel="disjoint-channel",e.ParallelChannel="parallel-channel",e.FibonacciRetracement="fibonacci-retracement",e.FibonacciRetracementTrendBased="fibonacci-retracement-trend-based",e.Callout="callout",e.Comment="comment",e.Note="note",e.Text="text",e.Arrow="arrow",e.ArrowUp="arrow-up",e.ArrowDown="arrow-down",e.DateRange="date-range",e.PriceRange="price-range",e.DatePriceRange="date-price-range",e.QuickDatePriceRange="quick-date-price-range",e))(XG||{}),qG=Object.values(XG);var QG=class extends kh{};kV([ru],QG.prototype,"x",2),kV([ru],QG.prototype,"y",2);var JG=class extends(yH(bH(fH(kh)))){},eH=class extends(yH(bH(vH(pH(xH(kh)))))){constructor(){super(...arguments),this.cornerRadius=2}};kV([ru],eH.prototype,"enabled",2),kV([ru],eH.prototype,"cornerRadius",2);var tH=class extends(vH(kh)){},iH=class extends(yH(bH(vH(kh)))){},nH=class extends(xH(kh)){constructor(){super(...arguments),this.label="",this.position="top",this.alignment="left"}};kV([ru],nH.prototype,"label",2),kV([ru],nH.prototype,"position",2),kV([ru],nH.prototype,"alignment",2);var oH=class extends(xH(kh)){},sH=class extends(xH(kh)){constructor(){super(...arguments),this.label=""}};function rH(e){class t extends(function(e){class t extends e{isWriteable(){return!this.locked&&!this.readOnly}isHoverable(){return!this.readOnly}}return kV([ru],t.prototype,"locked",2),kV([ru],t.prototype,"readOnly",2),t}(fH(e))){constructor(){super(...arguments),this.id=Sm()}}return t}function aH(e){class t extends e{constructor(){super(...arguments),this.start=new QG,this.end=new QG}}return kV([ru],t.prototype,"start",2),kV([ru],t.prototype,"end",2),t}function lH(e){class t extends e{}return kV([ru],t.prototype,"x",2),kV([ru],t.prototype,"y",2),t}function dH(e){class t extends e{}return kV([ru],t.prototype,"value",2),t}function cH(e){class t extends e{constructor(){super(...arguments),this.background=new tH}}return kV([ru],t.prototype,"background",2),t}function uH(e){class t extends e{constructor(){super(...arguments),this.handle=new iH}}return kV([ru],t.prototype,"handle",2),t}function hH(e){class t extends e{constructor(){super(...arguments),this.axisLabel=new eH}}return kV([ru],t.prototype,"axisLabel",2),t}function pH(e){class t extends e{constructor(){super(...arguments),this.padding=void 0,this.textAlign="center",this.formatter=void 0}}return kV([ru],t.prototype,"padding",2),kV([ru],t.prototype,"textAlign",2),kV([ru],t.prototype,"formatter",2),t}function gH(e){class t extends e{}return kV([ru],t.prototype,"extendStart",2),kV([ru],t.prototype,"extendEnd",2),t}function mH(e){return class extends e{setLocaleManager(e){var t;null!==(t=this.localeManager)&&void 0!==t||(this.localeManager=e)}}}function fH(e){class t extends e{}return kV([ru],t.prototype,"visible",2),t}function vH(e){class t extends e{}return kV([ru],t.prototype,"fill",2),kV([ru],t.prototype,"fillOpacity",2),t}function yH(e){class t extends e{}return kV([ru],t.prototype,"stroke",2),kV([ru],t.prototype,"strokeOpacity",2),kV([ru],t.prototype,"strokeWidth",2),t}function bH(e){class t extends e{constructor(){super(...arguments),this.lineCap=void 0,this.computedLineDash=void 0}}return kV([ru],t.prototype,"lineDash",2),kV([ru],t.prototype,"lineDashOffset",2),kV([ru],t.prototype,"lineStyle",2),t}function xH(e){class t extends e{constructor(){super(...arguments),this.fontSize=Eh.SMALL,this.fontFamily="Verdana, sans-serif"}}return kV([ru],t.prototype,"fontStyle",2),kV([ru],t.prototype,"fontWeight",2),kV([ru],t.prototype,"fontSize",2),kV([ru],t.prototype,"fontFamily",2),kV([ru],t.prototype,"color",2),t}function CH(e){return nl(e)||il(e)||$a(e)?{value:e,groupPercentage:0}:null!==e&&void 0!==e?e:{value:void 0,groupPercentage:0}}function SH(e){var t;return null===(t=CH(e))||void 0===t?void 0:t.value}function wH(e,t){if(null==e.start||null==e.end)return;const i=MH(e.start,t),n=MH(e.end,t);return null!=i&&null!=n?{x1:i.x,y1:i.y,x2:n.x,y2:n.y}:void 0}function MH(e,t){return{x:kH(e.x,t.xAxis),y:kH(e.y,t.yAxis)}}function kH(e,t){var i,n;if(null==e)return 0;const{value:o,groupPercentage:s}=CH(e),{scale:r,snapToGroup:a}=t,l=0===r.bandwidth?null!==(i=r.step)&&void 0!==i?i:0:null!==(n=r.bandwidth)&&void 0!==n?n:0,d=a?l/2:l*s;return r.convert(o)+d}function DH(e,t){return{x:IH(e.x,t.xAxis),y:IH(e.y,t.yAxis)}}function IH(e,t){var i;const{scale:n}=t;if(t.continuous&&null==n.step)return t.scaleInvert(e);const o=t.scaleInvertNearest(e),s=0===n.bandwidth?n.step:null!==(i=n.bandwidth)&&void 0!==i?i:0,r=n.convert(o),a=r+s;return{value:o,groupPercentage:r===a?0:(e-r)/(a-r)}}kV([ru],sH.prototype,"label",2),kV([ru],sH.prototype,"position",2),kV([ru],sH.prototype,"alignment",2);var AH=class extends(rH(aH(uH(kh)))){constructor(){super(...arguments),this.snapToAngle=45}getDefaultColor(e){}getDefaultOpacity(e){}},LH=class extends(mH(pH(xH(AH)))){constructor(){super(...arguments),this.text="",this.position="top",this.alignment="left",this.placement="inside",this.placeholderText="inputTextareaPlaceholder"}getDefaultColor(e){return this.color}getDefaultOpacity(e){}getPlaceholderColor(){}getPadding(){const{padding:e=0}=this;return{top:e,right:e,bottom:e,left:e}}getText(){const e=0==this.text.length;let t=this.text;var i;e&&(t=null!==(i=this.placeholderText)&&void 0!==i?i:"",this.localeManager&&(t=this.localeManager.t(t)));return{text:t,isPlaceholder:e}}getTextInputCoords(e,t){return MH(this.end,e)}getTextPosition(){return this.position}};kV([ru],LH.prototype,"text",2);var NH={top:6,right:12,bottom:9,left:12},TH=class extends(vH(yH(LH))){constructor(){super(...arguments),this.type="callout",this.position="bottom",this.alignment="left"}static is(e){return Qa(e)&&"callout"===e.type}getDefaultColor(e){switch(e){case"fill-color":return this.fill;case"line-color":return this.stroke;default:return this.color}}getDefaultOpacity(e){switch(e){case"fill-color":return this.fillOpacity;case"line-color":return this.strokeOpacity;default:return}}getPlaceholderColor(){var e;const{r:t,g:i,b:n}=yg.fromString(null!==(e=this.color)&&void 0!==e?e:"#888888");return new yg(t,i,n,.66).toString()}getPadding(){const{padding:e}=this;return null==e?p({},NH):{top:e,right:e,bottom:e,left:e}}getTextInputCoords(e,t){var i,n;const o=super.getTextInputCoords(e,t),s=this.getPadding(),r=null!==(i=s.left)&&void 0!==i?i:0,a=null!==(n=s.bottom)&&void 0!==n?n:0;return{x:o.x+r,y:o.y-a}}};kV([ru],TH.prototype,"type",2);var RH=class extends(rH(lH(uH(pH(xH(kh)))))){constructor(){super(...arguments),this.text="",this.position="top",this.alignment="left",this.placement="inside",this.placeholderText="inputTextareaPlaceholder"}getDefaultColor(e){return this.color}getDefaultOpacity(e){}getPlaceholderColor(){}getPadding(){const{padding:e=0}=this;return{top:e,right:e,bottom:e,left:e}}getText(){var e;const t=0==this.text.length;return{text:t?null!==(e=this.placeholderText)&&void 0!==e?e:"":this.text,isPlaceholder:t}}getTextInputCoords(e,t){return MH(this,e)}getTextPosition(){return this.position}};kV([ru],RH.prototype,"text",2);var EH=8,PH=14,OH=8,FH=14,zH=class extends(vH(yH(RH))){constructor(){super(...arguments),this.type="comment",this.position="bottom",this.alignment="left"}static is(e){return Qa(e)&&"comment"===e.type}getDefaultColor(e){switch(e){case"fill-color":return this.fill;case"line-color":return this.stroke;default:return this.color}}getDefaultOpacity(e){switch(e){case"fill-color":return this.fillOpacity;case"line-color":return this.strokeOpacity;default:return}}getPlaceholderColor(){var e;const{r:t,g:i,b:n}=yg.fromString(null!==(e=this.color)&&void 0!==e?e:"#888888");return new yg(t,i,n,.66).toString()}getPadding(){const{padding:e,fontSize:t}=this;return null==e?{top:Math.max(.4*t,EH),bottom:Math.max(.4*t,OH),left:Math.max(.8*t,FH),right:Math.max(.8*t,PH)}:{top:e,right:e,bottom:e,left:e}}getTextInputCoords(e,t){const i=super.getTextInputCoords(e,t),n=this.getPadding();return{x:i.x+n.left,y:i.y-n.bottom}}};function BH(e,t){return e?"dashed":null!==t&&void 0!==t?t:"solid"}function VH(e,t){switch(t){case"solid":return[];case"dashed":return[4*e,2*e];case"dotted":return[0,2*e]}}function GH(e,t,i,n){var o;const s=BH(e,i);return null!==(o=null!==t&&void 0!==t?t:e)&&void 0!==o?o:VH(null!==n&&void 0!==n?n:1,s)}function HH(e,t,i){const n=BH(t,i);return(null!==e&&void 0!==e?e:"dotted"===n)?"round":void 0}kV([ru],zH.prototype,"type",2);var jH=class extends(yH(kh)){},WH=class extends(xH(vH(yH(kh)))){constructor(){super(...arguments),this.divider=new jH}};kV([ru],WH.prototype,"divider",2);var _H=class extends(vH(yH(uH(kh)))){constructor(){super(...arguments),this.statistics=new WH}};kV([ru],_H.prototype,"statistics",2);var KH=class extends(mH(cH(yH(bH(AH))))){constructor(){super(...arguments),this.direction="both",this.hasDateRange=!1,this.hasPriceRange=!1,this.statistics=new WH,this.getVolume=()=>{},this.text=new nH}getDefaultColor(e){switch(e){case"fill-color":return this.background.fill;case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(e){switch(e){case"fill-color":return this.background.fillOpacity;case"line-color":return this.strokeOpacity}}getLineDash(){return GH(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return HH(this.lineCap,this.lineDash,this.lineStyle)}};function UH(e){return class extends e{constructor(){super(...arguments),this.hasDateRange=!0}}}function YH(e){return class extends e{constructor(){super(...arguments),this.hasPriceRange=!0}}}kV([ru],KH.prototype,"statistics",2),kV([ru],KH.prototype,"text",2);var $H=class extends(UH(KH)){constructor(){super(...arguments),this.type="date-range",this.direction="horizontal"}static is(e){return Qa(e)&&"date-range"===e.type}};kV([ru],$H.prototype,"type",2),kV([ru],$H.prototype,"extendAbove",2),kV([ru],$H.prototype,"extendBelow",2);var ZH=class extends(YH(KH)){constructor(){super(...arguments),this.type="price-range",this.direction="vertical"}static is(e){return Qa(e)&&"price-range"===e.type}};kV([ru],ZH.prototype,"type",2),kV([ru],ZH.prototype,"extendLeft",2),kV([ru],ZH.prototype,"extendRight",2);var XH=class extends(UH(YH(KH))){constructor(){super(...arguments),this.type="date-price-range",this.direction="both"}static is(e){return Qa(e)&&"date-price-range"===e.type}};kV([ru],XH.prototype,"type",2);var qH=class extends(UH(YH(KH))){constructor(){super(...arguments),this.type="quick-date-price-range",this.up=new _H,this.down=new _H,this.direction="both"}static is(e){return Qa(e)&&"quick-date-price-range"===e.type}};kV([ru],qH.prototype,"type",2),kV([ru],qH.prototype,"up",2),kV([ru],qH.prototype,"down",2);var{BBox:QH}=uE,JH=1.38;function ej(e,t,i){return i?Ym(t,{maxWidth:i,font:e,textWrap:"always",avoidOrphans:!1}):t}function tj(e,t,i,n){var o,s;let r=null!==(o=null===n||void 0===n?void 0:n.width)&&void 0!==o?o:0,a=null!==(s=null===n||void 0===n?void 0:n.height)&&void 0!==s?s:0;if(!n){const i=null==e.width?t:ej(e,t,e.width);({width:r,height:a}=function(e,t){const{lineMetrics:i,width:n}=Wm(e).measureLines(t);return{width:n,height:i.length*Vl(e.fontSize,JH)}}(e,i))}return new QH(i.x,i.y,r,a)}function ij(e,t,i,n,o,s){let{x:r,y:a}=o;const{visible:l=!0,fontFamily:d,fontSize:c=14,fontStyle:u,fontWeight:h,textAlign:p}=n,g=Vl(c,JH);null!==s&&void 0!==s||(s="center"==n.position?"middle":n.position);const m=i?n.getPlaceholderColor():n.color;e.setProperties({x:r,y:a,visible:l,text:t,fill:m,fontFamily:d,fontSize:c,fontStyle:u,fontWeight:h,textAlign:p,lineHeight:g,textBaseline:s})}var nj=class extends(vH(yH(kh))){},oj=class extends(vH(yH(RH))){constructor(){super(...arguments),this.type="note",this.background=new nj,this.position="bottom",this.alignment="center",this.width=200}static is(e){return Qa(e)&&"note"===e.type}getDefaultColor(e){switch(e){case"line-color":return this.fill;case"text-color":return this.color}}getDefaultOpacity(e){switch(e){case"line-color":return this.fillOpacity;case"text-color":return}}getPadding(){var e;const t=null!==(e=this.padding)&&void 0!==e?e:10;return{top:t,right:t,bottom:t,left:t}}getTextInputCoords(e,t){const{width:i,text:n}=this,o=super.getTextInputCoords(e,t),s=this.getPadding().top,r=tj(this,n,o);r.x=za(i/2,r.x,e.seriesRect.width-i/2);const a=r.y-30-2*s,l=r.y+11+2*s;return a-Math.max(r.height,t)-34<0?(r.y=l,this.position="top"):(r.y=a+s,this.position="bottom"),{x:r.x,y:r.y}}isHoverable(){return!0}};kV([ru],oj.prototype,"type",2),kV([ru],oj.prototype,"background",2);var sj=class extends(rH(lH(uH(kh)))){getDefaultColor(e){}getDefaultOpacity(e){}},rj=class e extends(vH(sj)){constructor(){super(...arguments),this.size=32}static is(t){return t instanceof e}getDefaultColor(e){return"fill-color"===e?this.fill:void 0}getDefaultOpacity(e){return"fill-color"===e?this.fillOpacity:void 0}},aj=class extends(rH(dH(uH(hH(yH(bH(kh))))))){constructor(){super(...arguments),this.direction="horizontal",this.type="horizontal-line",this.text=new nH}static is(e){return Qa(e)&&"horizontal-line"===e.type}getDefaultColor(){return this.stroke}getDefaultOpacity(){return this.strokeOpacity}getLineDash(){return GH(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return HH(this.lineCap,this.lineDash,this.lineStyle)}};kV([ru],aj.prototype,"type",2),kV([ru],aj.prototype,"text",2);var lj=class extends(rH(dH(uH(hH(yH(bH(kh))))))){constructor(){super(...arguments),this.direction="vertical",this.type="vertical-line",this.text=new nH}static is(e){return Qa(e)&&"vertical-line"===e.type}getDefaultColor(){return this.stroke}getDefaultOpacity(){return this.strokeOpacity}getLineDash(){return GH(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return HH(this.lineCap,this.lineDash,this.lineStyle)}};kV([ru],lj.prototype,"type",2),kV([ru],lj.prototype,"text",2);var dj=class extends(rH(cH(aH(uH(gH(yH(bH(kh)))))))){constructor(){super(...arguments),this.type="disjoint-channel",this.text=new sH,this.snapToAngle=45}static is(e){return Qa(e)&&"disjoint-channel"===e.type}get bottom(){const e={start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}};return"number"===typeof e.start.y&&"number"===typeof e.end.y?(e.start.y-=this.startHeight,e.end.y-=this.endHeight):jr.warnOnce("Annotation [".concat(this.type,"] can only be used with a numeric y-axis.")),e}getDefaultColor(e){switch(e){case"fill-color":return this.background.fill;case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(e){switch(e){case"fill-color":return this.background.fillOpacity;case"line-color":return this.strokeOpacity}}getLineDash(){return GH(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return HH(this.lineCap,this.lineDash,this.lineStyle)}};kV([ru],dj.prototype,"type",2),kV([ru],dj.prototype,"startHeight",2),kV([ru],dj.prototype,"endHeight",2),kV([ru],dj.prototype,"text",2);var cj=class extends(mH(function(e){return class extends e{}}(gH(yH(bH(AH)))))){constructor(){super(...arguments),this.text=new nH}getDefaultColor(e){switch(e){case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(){return this.strokeOpacity}getLineDash(){return GH(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return HH(this.lineCap,this.lineDash,this.lineStyle)}};kV([ru],cj.prototype,"text",2);var uj=class extends cj{constructor(){super(...arguments),this.type="arrow",this.endCap="arrow"}static is(e){return Qa(e)&&"arrow"===e.type}};kV([ru],uj.prototype,"type",2);var hj=class extends cj{constructor(){super(...arguments),this.type="line"}static is(e){return Qa(e)&&"line"===e.type}};kV([ru],hj.prototype,"type",2);var pj=class extends cj{constructor(){super(...arguments),this.label=new oH,this.reverse=!1,this.showFill=!0,this.isMultiColor=!0,this.strokes=[],this.bands=10}getDefaultColor(e){var t;switch(e){case"line-color":return null!==(t=this.rangeStroke)&&void 0!==t?t:this.stroke;case"text-color":return this.text.color}}};kV([ru],pj.prototype,"label",2),kV([ru],pj.prototype,"reverse",2),kV([ru],pj.prototype,"showFill",2),kV([ru],pj.prototype,"isMultiColor",2),kV([ru],pj.prototype,"strokes",2),kV([ru],pj.prototype,"rangeStroke",2),kV([ru],pj.prototype,"bands",2);var gj=class extends pj{constructor(){super(...arguments),this.type="fibonacci-retracement-trend-based",this.endRetracement=new QG}static is(e){return Qa(e)&&"fibonacci-retracement-trend-based"===e.type}};kV([ru],gj.prototype,"type",2),kV([ru],gj.prototype,"endRetracement",2);var mj=class extends pj{constructor(){super(...arguments),this.type="fibonacci-retracement"}static is(e){return Qa(e)&&"fibonacci-retracement"===e.type}};kV([ru],mj.prototype,"type",2);var fj=class extends(rH(cH(aH(uH(gH(yH(bH(kh)))))))){constructor(){super(...arguments),this.type="parallel-channel",this.middle=new JG,this.text=new sH,this.snapToAngle=45}static is(e){return Qa(e)&&"parallel-channel"===e.type}get bottom(){const e={start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}};return"number"===typeof e.start.y&&"number"===typeof e.end.y?(e.start.y-=this.height,e.end.y-=this.height):jr.warnOnce("Annotation [".concat(this.type,"] can only be used with a numeric y-axis.")),e}getDefaultColor(e){switch(e){case"fill-color":return this.background.fill;case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(e){switch(e){case"fill-color":return this.background.fillOpacity;case"line-color":return this.strokeOpacity}}getLineDash(){return GH(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return HH(this.lineCap,this.lineDash,this.lineStyle)}};kV([ru],fj.prototype,"type",2),kV([ru],fj.prototype,"height",2),kV([ru],fj.prototype,"middle",2),kV([ru],fj.prototype,"text",2);var vj=class extends RH{constructor(){super(...arguments),this.type="text",this.position="bottom"}static is(e){return Qa(e)&&"text"===e.type}};function yj(e){return qH.is(e)}function bj(e){return hj.is(e)||aj.is(e)||lj.is(e)||uj.is(e)||Cj(e)}function xj(e){return dj.is(e)||fj.is(e)}function Cj(e){return mj.is(e)||gj.is(e)}function Sj(e){return TH.is(e)||zH.is(e)||oj.is(e)||vj.is(e)}function wj(e){return $H.is(e)||ZH.is(e)||XH.is(e)||qH.is(e)}function Mj(e){return Sj(e)&&!oj.is(e)}function kj(e){return bj(e)||xj(e)||wj(e)&&!qH.is(e)}function Dj(e){return bj(e)||xj(e)||wj(e)||TH.is(e)||oj.is(e)}function Ij(e){return xj(e)||wj(e)||TH.is(e)||zH.is(e)||rj.is(e)}function Aj(e){return Sj(e)&&!oj.is(e)}function Lj(e){return(bj(e)||xj(e)||wj(e))&&!yj(e)&&Qa(e.text)}function Nj(e,t){"fontSize"in e&&(e.fontSize=t),Lj(e)&&(e.text.fontSize=t)}function Tj(e,t){var i,n,o;const s=null!==(i=null!==(n=null===t||void 0===t?void 0:t.strokeWidth)&&void 0!==n?n:e.strokeWidth)&&void 0!==i?i:1,r=null!==(o=null===t||void 0===t?void 0:t.type)&&void 0!==o?o:e.lineStyle,a=null!==r&&void 0!==r?r:BH(e.lineDash,r),l=VH(s,a);e.strokeWidth=s,e.computedLineDash=l,e.lineStyle=a,e.lineCap="dotted"===a?"round":void 0}function Rj(e,t,i,n,o,s){switch(t){case"fill-color":"fill"in e&&(e.fill=n),"fillOpacity"in e&&(e.fillOpacity=o),"background"in e&&(e.background.fill=n,e.background.fillOpacity=o);break;case"line-color":"axisLabel"in e&&(e.axisLabel.fill=n,e.axisLabel.fillOpacity=o,e.axisLabel.stroke=n,e.axisLabel.strokeOpacity=o),"fill"in e&&"fillOpacity"in e&&function(e){return oj.is(e)}(e)?(e.fill=n,e.fillOpacity=o):("strokeOpacity"in e&&(e.strokeOpacity=o),"isMultiColor"in e&&"rangeStroke"in e?(e.isMultiColor=s,e.rangeStroke=n):"stroke"in e&&(e.stroke=n));break;case"text-color":"color"in e&&(e.color=i),Lj(e)&&(e.text.color=n)}}kV([ru],vj.prototype,"type",2);var Ej=class{constructor(){this.mementoOriginatorKey="annotation-defaults",this.colors=new Map(Object.values(XG).map(e=>[e,new Map([["line-color",void 0],["fill-color",void 0],["text-color",void 0]])])),this.fontSizes=new Map([["callout",void 0],["comment",void 0],["text",void 0],["arrow",void 0],["line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.lineStyles=new Map([["line",void 0],["horizontal-line",void 0],["vertical-line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["arrow",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.lineTextAlignments=new Map([["line",void 0],["horizontal-line",void 0],["vertical-line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["arrow",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.lineTextPositions=new Map([["line",void 0],["horizontal-line",void 0],["vertical-line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["arrow",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.fibonacciOptions=new Map([["fibonacci-retracement",{bands:void 0,reverse:void 0,showFill:void 0}],["fibonacci-retracement-trend-based",{bands:void 0,reverse:void 0,showFill:void 0}]])}createMemento(){return{colors:Qg(this.colors),fontSizes:Qg(this.fontSizes),lineStyles:Qg(this.lineStyles),lineTextAlignments:Qg(this.lineTextAlignments),lineTextPositions:Qg(this.lineTextPositions),fibonacciOptions:Qg(this.fibonacciOptions)}}guardMemento(e){return!0}restoreMemento(e,t,i){this.colors=Qg(i.colors),this.fontSizes=Qg(i.fontSizes),this.lineStyles=Qg(i.lineStyles),this.lineTextAlignments=Qg(i.lineTextAlignments),this.lineTextPositions=Qg(i.lineTextPositions),this.fibonacciOptions=Qg(i.fibonacciOptions)}setDefaultColor(e,t,i,n,o,s){var r;null===(r=this.colors.get(e))||void 0===r||r.set(t,[i,n,o,s])}setDefaultFontSize(e,t){this.fontSizes.set(e,t)}setDefaultLineStyleType(e,t){const i=this.lineStyles.get(e);i?i.type=t:this.lineStyles.set(e,{type:t})}setDefaultLineStyleWidth(e,t){const i=this.lineStyles.get(e);i?i.strokeWidth=t:this.lineStyles.set(e,{strokeWidth:t})}setDefaultLineTextAlignment(e,t){this.lineTextAlignments.set(e,t)}setDefaultLineTextPosition(e,t){this.lineTextPositions.set(e,t)}setDefaultFibonacciOptions(e,t,i){if("fibonacci-retracement"!=e&&"fibonacci-retracement-trend-based"!=e)return;const n=this.fibonacciOptions.get(e);n[t]=i,this.fibonacciOptions.set(e,n)}applyDefaults(e){for(const[t,i]of this.colors)if(e.type===t)for(const[n,[o,s,r,a]=[]]of i)o&&s&&null!=r&&null!=a&&Rj(e,n,o,s,r,a);for(const[t,i]of this.fontSizes)e.type===t&&null!=i&&Nj(e,i);for(const[t,i]of this.lineStyles)e.type===t&&null!=i&&Tj(e,i);for(const[t,i]of this.lineTextPositions)e.type===t&&null!=i&&(e.text.position=i);for(const[t,i]of this.lineTextAlignments)e.type===t&&null!=i&&(e.text.alignment=i);for(const[t,i]of this.fibonacciOptions)if(e.type===t&&null!=i)for(const n of Object.keys(i)){const t=i[n];null!=t&&e.set({[n]:t})}}},Pj=e=>{try{const t=yg.fromString(e),[i,n,o]=t.toHSB();return[i,n,o,t.a]}catch(t){return}},Oj=class extends uE.AnchoredPopover{constructor(e,t){super(e,"color-picker",t),this.hasChanged=!1,this.hideFns.push(()=>{var e;this.i18nUpdater=void 0,this.hasChanged&&(null===(e=this.onChangeHide)||void 0===e||e.call(this))}),this.cleanup.register(this.ctx.eventsHub.on("locale:change",()=>{var e;return null===(e=this.i18nUpdater)||void 0===e?void 0:e.call(this)}))}show(e){this.hasChanged=!1,this.onChangeHide=e.onChangeHide;const{element:t,initialFocus:i}=this.createColorPicker(e),n=this.showWithChildren([t],p({initialFocus:i},e));n.classList.add("ag-charts-color-picker"),n.setAttribute("role","dialog")}createColorPicker(e){var t,i,n,o,s=this;const{localeManager:r}=this.ctx;let a=null!==(t=e.isMultiColor)&&void 0!==t&&t,[l,d,c,u]=null!==(i=Pj(null!==(n=e.color)&&void 0!==n?n:"#f00"))&&void 0!==i?i:[0,1,.5,1];u=null!==(o=e.opacity)&&void 0!==o?o:u;const h=zr("div","ag-charts-color-picker__content");h.innerHTML='<div class="ag-charts-color-picker__palette" role="slider" tabindex="0"></div><div class="ag-charts-color-picker__color-row" role="presentation"><button class="ag-charts-color-picker__multi-color-button" tabindex="0" type="button" role="switch"></button> <input class="ag-charts-color-picker__hue-input" tabindex="0" type="range" min="0" max="360" value="0"></div><input class="ag-charts-color-picker__alpha-input" tabindex="0" type="range" min="0" max="1" value="1" step="0.01"> <label class="ag-charts-color-picker__color-field" role="presentation"><span class="ag-charts-color-picker__color-label" aria-hidden="true"></span> <input class="ag-charts-color-picker__color-input" tabindex="0" value="#000"></label>',h.ariaLabel=this.ctx.localeManager.t("ariaLabelColorPicker");const p=h.querySelector(".ag-charts-color-picker__palette"),g=h.querySelector(".ag-charts-color-picker__hue-input"),m=h.querySelector(".ag-charts-color-picker__multi-color-button"),f=h.querySelector(".ag-charts-color-picker__alpha-input"),v=h.querySelector(".ag-charts-color-picker__color-input"),y=h.querySelector(".ag-charts-color-picker__color-label"),b=e=>{const t={s:"ariaValueColorPalette",v:"ariaValueColorPaletteFirstV"}[e];p.ariaValueText=r.t(t,{s:d,v:c})};this.i18nUpdater=()=>{p.ariaRoleDescription=r.t("ariaRoleDescription2DSlider"),p.ariaLabel=r.t("ariaLabelColorPickerPalette"),g.ariaLabel=r.t("ariaLabelColorPickerHue"),m.ariaLabel=r.t("ariaLabelColorPickerMultiColor"),f.ariaLabel=r.t("ariaLabelColorPickerAlpha"),v.ariaLabel=r.t("ariaLabelColor"),b("s")},this.i18nUpdater(),m.classList.toggle("ag-charts-color-picker__multi-color-button--hidden",!e.hasMultiColorOption);const x=function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const i=yg.fromHSB(l,d,c,u).toHexString();if(h.style.setProperty("--h","".concat(l)),h.style.setProperty("--s","".concat(d)),h.style.setProperty("--v","".concat(c)),h.style.setProperty("--a","".concat(u)),h.style.setProperty("--color",i.slice(0,7)),h.style.setProperty("--color-a",i),g.value="".concat(l),f.value="".concat(u),f.classList.toggle("ag-charts-color-picker__alpha-input--opaque",1===u),m.classList.toggle("ag-charts-color-picker__multi-color-button--active",a),y.classList.toggle("ag-charts-color-picker__color-label--multi-color",a),document.activeElement!==v&&(m.ariaChecked=a.toString(),v.value=a?r.t("ariaLabelColorPickerMultiColor"):i.toUpperCase()),t||null==e.color){var n;const t=yg.fromHSB(l,d,c,1).toHexString();null===(n=e.onChange)||void 0===n||n.call(e,i,t,u,a)}t&&(s.hasChanged=!0)};x(!1);const C=e=>e.preventDefault(),S=e=>e.stopPropagation();return h.addEventListener("mousedown",S),h.addEventListener("touchstart",S),h.addEventListener("touchmove",S),h.addEventListener("keydown",e=>{switch(e.stopPropagation(),e.key){case"Enter":case"Escape":this.hide();break;default:return}e.preventDefault()}),p.addEventListener("pointerdown",e=>{e.preventDefault();const t=e.currentTarget;t.focus();const i=t.getBoundingClientRect(),n=e=>{let{clientX:t,clientY:n}=e;a=!1,d=Math.min(Math.max((t-i.left)/i.width,0),1),c=1-Math.min(Math.max((n-i.top)/i.height,0),1),x(),b("s")};n(e);const o=Gr(Pr(),"pointermove",n);Pr().addEventListener("pointerup",o,{once:!0})}),p.addEventListener("touchstart",C,{passive:!1}),p.addEventListener("touchmove",C,{passive:!1}),p.addEventListener("keydown",e=>{if("ArrowLeft"===e.key)d=za(0,d-.01,1),b("s");else if("ArrowRight"===e.key)d=za(0,d+.01,1),b("s");else if("ArrowUp"===e.key)c=za(0,c+.01,1),b("v");else{if("ArrowDown"!==e.key)return;c=za(0,c-.01,1),b("v")}e.preventDefault(),x()}),p.addEventListener("focus",()=>{b("s")}),m.addEventListener("click",()=>{a=!a,x()}),g.addEventListener("input",e=>{var t;a=!1,l=null!==(t=e.currentTarget.valueAsNumber)&&void 0!==t?t:0,x()}),f.addEventListener("input",e=>{var t;a=!1,u=null!==(t=e.currentTarget.valueAsNumber)&&void 0!==t?t:0,x()}),v.addEventListener("input",e=>{a=!1;const t=Pj(e.currentTarget.value);null!=t&&([l,d,c,u]=t,x())}),v.addEventListener("blur",()=>x()),v.addEventListener("keydown",e=>{"Enter"===e.key&&(e.currentTarget.blur(),x())}),{element:h,initialFocus:p}}};function Fj(e){return!(e instanceof uE.LogScale)&&!(e instanceof uE.BandScale)}var zj=[{label:"toolbarAnnotationsTrendLine",icon:"trend-line-drawing",value:"line"},{label:"toolbarAnnotationsHorizontalLine",icon:"horizontal-line-drawing",value:"horizontal-line"},{label:"toolbarAnnotationsVerticalLine",icon:"vertical-line-drawing",value:"vertical-line"},{label:"toolbarAnnotationsParallelChannel",icon:"parallel-channel-drawing",value:"parallel-channel",visible:Fj},{label:"toolbarAnnotationsDisjointChannel",icon:"disjoint-channel-drawing",value:"disjoint-channel",visible:Fj}],Bj=[{label:"toolbarAnnotationsFibonacciRetracement",icon:"fibonacci-retracement-drawing",value:"fibonacci-retracement"},{label:"toolbarAnnotationsFibonacciRetracementTrendBased",icon:"fibonacci-retracement-trend-based-drawing",value:"fibonacci-retracement-trend-based"}],Vj=[{label:"Fibonacci - Extended",value:10},{label:"Fibonacci - 6 Band",value:6},{label:"Fibonacci - 4 Band",value:4}],Gj=[{label:"toolbarAnnotationsText",icon:"text-annotation",value:"text"},{label:"toolbarAnnotationsComment",icon:"comment-annotation",value:"comment"},{label:"toolbarAnnotationsCallout",icon:"callout-annotation",value:"callout"},{label:"toolbarAnnotationsNote",icon:"note-annotation",value:"note"}],Hj=[{label:"toolbarAnnotationsArrow",icon:"arrow-drawing",value:"arrow"},{label:"toolbarAnnotationsArrowUp",icon:"arrow-up-drawing",value:"arrow-up"},{label:"toolbarAnnotationsArrowDown",icon:"arrow-down-drawing",value:"arrow-down"}],jj=[{label:"toolbarAnnotationsQuickDatePriceRange",icon:"measurer-drawing",value:"quick-date-price-range"},{label:"toolbarAnnotationsDateRange",icon:"date-range-drawing",value:"date-range"},{label:"toolbarAnnotationsPriceRange",icon:"price-range-drawing",value:"price-range"},{label:"toolbarAnnotationsDatePriceRange",icon:"date-price-range-drawing",value:"date-price-range"}],Wj=[{strokeWidth:1,label:"1",value:1},{strokeWidth:2,label:"2",value:2},{strokeWidth:3,label:"3",value:3},{strokeWidth:4,label:"4",value:4},{strokeWidth:8,label:"8",value:8}],_j=[{icon:"line-style-solid",altText:"iconAltTextLineStyleSolid",value:"solid"},{icon:"line-style-dashed",altText:"iconAltTextLineStyleDashed",value:"dashed"},{icon:"line-style-dotted",altText:"iconAltTextLineStyleDotted",value:"dotted"}],Kj=[{label:"10",value:10},{label:"12",value:12},{label:"14",value:14},{label:"16",value:16},{label:"18",value:18},{label:"22",value:22},{label:"28",value:28},{label:"36",value:36},{label:"46",value:46}],{FloatingToolbar:Uj,Menu:Yj,ToolbarButtonWidget:$j}=uE,Zj=class extends Ay{constructor(){super(...arguments),this.checkedOverrides=new Ay}};kV([ru],Zj.prototype,"value",2),kV([ru],Zj.prototype,"checkedOverrides",2),kV([ru],Zj.prototype,"color",2),kV([ru],Zj.prototype,"strokeWidth",2),kV([ru],Zj.prototype,"isMultiColor",2);var Xj=class extends $j{update(e){super.update(e),"line-stroke-width"===e.value&&this.updateLineStrokeWidth(e),"fill-color"!==e.value&&"line-color"!==e.value&&"text-color"!==e.value||this.updateFillColor(e)}updateFillColor(e){var t;const i=this.getElement();i.classList.add("ag-charts-annotations__color-picker-button"),i.classList.toggle("ag-charts-annotations__color-picker-button--multi-color",e.isMultiColor),i.style.setProperty("--color",null!==(t=e.color)&&void 0!==t?t:null)}updateLineStrokeWidth(e){const t=this.getElement();t.classList.add("ag-charts-annotations__stroke-width-button"),t.style.setProperty("--stroke-width","".concat(e.strokeWidth,"px"))}},qj=class extends Uj{createButtonWidget(){return new Xj(this.localeManager)}},Qj=class extends kh{constructor(e,t){super(),this.ctx=e,this.getActiveDatum=t,this.enabled=!0,this.buttons=new Dh(Zj),this.cleanup=new Ta,this.events=new Oa,this.visibleButtons=[],this.toolbar=new qj(this.ctx,"ariaLabelAnnotationOptionsToolbar","annotation-options"),this.colorPicker=new Oj(this.ctx),this.textSizeMenu=new Yj(this.ctx,"text-size"),this.lineStyleTypeMenu=new Yj(this.ctx,"annotations-line-style-type"),this.lineStrokeWidthMenu=new Yj(this.ctx,"annotations-line-stroke-width"),this.cleanup.register(this.toolbar.addToolbarListener("button-pressed",this.onButtonPress.bind(this)),this.toolbar.addToolbarListener("toolbar-moved",this.onToolbarMoved.bind(this)),e.widgets.seriesWidget.addListener("drag-start",this.onDragStart.bind(this)),e.widgets.seriesWidget.addListener("drag-end",this.onDragEnd.bind(this)),()=>{this.colorPicker.destroy(),this.toolbar.destroy()})}onDragStart(){this.toolbar.ignorePointerEvents()}onDragEnd(){this.toolbar.capturePointerEvents()}destroy(){this.cleanup.flush()}show(){this.enabled&&this.toolbar.show()}hide(){this.toolbar.hide()}updateButtons(e){if(!this.enabled)return;const t={"line-style-type":kj(e),"line-stroke-width":kj(e),"line-color":Dj(e),"text-color":Aj(e),"fill-color":Ij(e),"text-size":Mj(e),settings:Lj(e),lock:!0,delete:!0};this.visibleButtons=this.buttons.filter(e=>t[e.value]),this.toolbar.clearButtons(),this.toolbar.updateButtons(this.visibleButtons),this.refreshButtons(e)}setAnchorScene(e){this.toolbar.hasBeenDragged()||this.toolbar.setAnchor(e.getAnchor())}hideOverlays(){this.toolbar.clearActiveButton(),this.colorPicker.hide({lastFocus:null}),this.textSizeMenu.hide(),this.lineStyleTypeMenu.hide(),this.lineStrokeWidthMenu.hide(),this.events.emit("hid-overlays",null)}clearActiveButton(){this.toolbar.clearActiveButton()}updateColors(e){this.updateColorPickerColor("line-color",e.getDefaultColor("line-color"),e.getDefaultOpacity("line-color"),"isMultiColor"in e&&(null===e||void 0===e?void 0:e.isMultiColor)),this.updateColorPickerColor("fill-color",e.getDefaultColor("fill-color"),e.getDefaultOpacity("fill-color"),"isMultiColor"in e&&(null===e||void 0===e?void 0:e.isMultiColor)),this.updateColorPickerColor("text-color",e.getDefaultColor("text-color"),e.getDefaultOpacity("text-color"),"isMultiColor"in e&&(null===e||void 0===e?void 0:e.isMultiColor))}updateColorPickerColor(e,t,i,n){if(null!=t&&null!=i){const{r:e,g:n,b:o}=yg.fromString(t);t=yg.fromArray([e,n,o,i]).toHexString()}this.updateButtonByValue(e,{color:t,isMultiColor:n})}updateFontSize(e){this.updateButtonByValue("text-size",{label:null==e?void 0:String(e)})}updateLineStyleType(e){this.updateButtonByValue("line-style-type",{icon:e.icon})}updateStrokeWidth(e){this.updateButtonByValue("line-stroke-width",{label:e.label,strokeWidth:e.value})}onButtonPress(e){let{event:t,button:i,buttonWidget:n}=e;const o=this.getActiveDatum();if(o)switch(this.hideOverlays(),i.value){case"line-style-type":{const e=kj(o)?BH(o.lineDash,o.lineStyle):void 0;this.lineStyleTypeMenu.show(n,{items:_j,ariaLabel:this.ctx.localeManager.t("toolbarAnnotationsLineStyle"),value:e,onPress:e=>this.onLineStyleTypeMenuPress(e,o),class:"ag-charts-annotations__line-style-type-menu"});break}case"line-stroke-width":{const e=kj(o)?o.strokeWidth:void 0;this.lineStrokeWidthMenu.show(n,{items:Wj,ariaLabel:this.ctx.localeManager.t("toolbarAnnotationsLineStrokeWidth"),value:e,onPress:e=>this.onLineStrokeWidthMenuPress(e,o),class:"ag-charts-annotations__line-stroke-width-menu"});break}case"line-color":case"fill-color":case"text-color":this.toolbar.toggleActiveButtonByIndex(i.index),this.colorPicker.show({color:null===o||void 0===o?void 0:o.getDefaultColor(i.value),opacity:null===o||void 0===o?void 0:o.getDefaultOpacity(i.value),sourceEvent:t.sourceEvent,hasMultiColorOption:"isMultiColor"in o,isMultiColor:"isMultiColor"in o&&(null===o||void 0===o?void 0:o.isMultiColor),onChange:null==o?void 0:this.onColorPickerChange.bind(this,i.value,o),onChangeHide:(e=>{this.events.emit("saved-color",{type:o.type,colorPickerType:i.value,color:o.getDefaultColor(e)})}).bind(this,i.value)});break;case"text-size":{const e=Sj(o)?o.fontSize:void 0;this.textSizeMenu.show(n,{items:Kj,ariaLabel:this.ctx.localeManager.t("toolbarAnnotationsTextSize"),value:e,onPress:e=>this.onTextSizeMenuPress(e,o),class:"ag-charts-annotations__text-size-menu"});break}case"delete":this.events.emit("pressed-delete",null);break;case"lock":o.locked=!o.locked,this.refreshButtons(o),this.events.emit("pressed-lock",{locked:o.locked});break;case"settings":this.toolbar.toggleActiveButtonByIndex(i.index),this.events.emit("pressed-settings",t)}}onToolbarMoved(e){const{buttonBounds:t,popoverBounds:i}=e,n={x:i.x,y:i.y+i.height+4},o={y:i.y-4};this.colorPicker.setAnchor(n,o);for(const[s,r]of t.entries()){const e=this.visibleButtons.at(s);if(!e)continue;const t={x:r.x,y:r.y+r.height-1},i={y:r.y};switch(e.value){case"line-stroke-width":this.lineStrokeWidthMenu.setAnchor(t,i);break;case"line-style-type":this.lineStyleTypeMenu.setAnchor(t,i);break;case"text-size":this.textSizeMenu.setAnchor(t,i)}}}onColorPickerChange(e,t,i,n,o,s){this.events.emit("updated-color",{type:t.type,colorPickerType:e,colorOpacity:i,color:n,opacity:o,isMultiColor:s}),this.updateColorPickerColor(e,i,o,s)}onTextSizeMenuPress(e,t){if(!Mj(t))return;const i=e.value;this.events.emit("updated-font-size",{type:t.type,fontSize:i}),this.textSizeMenu.hide(),this.updateFontSize(i)}onLineStyleTypeMenuPress(e,t){if(!kj(t))return;const i=e.value;this.events.emit("updated-line-style",{type:t.type,lineStyleType:i}),this.lineStyleTypeMenu.hide(),this.updateLineStyleType(e)}onLineStrokeWidthMenuPress(e,t){if(!kj(t))return;const i=e.value;this.events.emit("updated-line-width",{type:t.type,strokeWidth:i}),this.lineStrokeWidthMenu.hide(),this.updateStrokeWidth(e)}refreshButtons(e){var t;const i=null!==(t=e.locked)&&void 0!==t&&t;for(const[n,o]of this.visibleButtons.entries())o&&("lock"===o.value?(this.toolbar.toggleSwitchCheckedByIndex(n,i),this.updateButtonByIndex(n,i?o.checkedOverrides.toJson():o.toJson())):this.toolbar.toggleButtonEnabledByIndex(n,!i));Mj(e)&&this.updateFontSize(e.fontSize),this.updateColors(e),this.updateLineStyles(e)}updateLineStyles(e){var t,i;if(!kj(e))return;const n=null!==(t=e.strokeWidth)&&void 0!==t?t:1,o=BH(e.lineDash,e.lineStyle);this.updateStrokeWidth({strokeWidth:n,value:n,label:String(n)}),this.updateLineStyleType(null!==(i=_j.find(e=>e.value===o))&&void 0!==i?i:_j[0])}updateButtonByValue(e,t){const i=this.visibleButtons.findIndex(t=>t.value===e);-1!==i&&this.updateButtonByIndex(i,t)}updateButtonByIndex(e,t){var i;const n=this.visibleButtons.at(e);n&&this.toolbar.updateButtonByIndex(e,p(p(p({},n.toJson()),t),{},{value:null!==(i=t.value)&&void 0!==i?i:n.value}))}};kV([ru],Qj.prototype,"enabled",2),kV([ru],Qj.prototype,"buttons",2);var Jj=class extends Vm{constructor(e){const t=t=>{var i;let{context:n}=t;null===(i=this.node)||void 0===i||i.drag(this.datum,this.offset,n,this.snapping),e.update()};super("idle",{idle:{dragStart:{target:"dragging",action:e=>{var t;let{offset:i,context:n}=e;this.hasMoved=!1,this.dragStart=i,this.offset=i,null===(t=this.node)||void 0===t||t.dragStart(this.datum,i,n)}}},dragging:{keyDown:t,keyUp:t,drag:t=>{var i;let{offset:n,context:o}=t;this.hasMoved=pv.lengthSquared(pv.sub(n,this.dragStart))>0,this.offset=n,null===(i=this.node)||void 0===i||i.drag(this.datum,n,o,this.snapping),e.update()},dragEnd:{target:Vm.parent,action:()=>{var t;null===(t=this.node)||void 0===t||t.stopDragging(),this.hasMoved&&e.recordAction("Move annotation"),e.update()}}}}),this.debug=Cr.create(!0,"annotations"),this.hasMoved=!1,this.snapping=!1}};kV([Om()],Jj.prototype,"snapping",2),kV([Om()],Jj.prototype,"datum",2),kV([Om()],Jj.prototype,"node",2);var eW=class extends rj{constructor(){super(...arguments),this.type="arrow-down"}static is(e){return Qa(e)&&"arrow-down"===e.type}};kV([ru],eW.prototype,"type",2);var tW=class extends uE.Marker{isPointInPath(e,t){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(e,t)}},iW=class e extends uE.Group{constructor(){super(...arguments),this.active=!1,this.locked=!1,this.visible=!1,this.zIndex=1}drag(e){const{handle:t,locked:i}=this;return i?{point:{x:t.x,y:t.y},offset:{x:0,y:0}}:{point:e,offset:{x:e.x-t.x,y:e.y-t.y}}}toggleActive(t){this.active=t,t||(this.handle.strokeWidth=e.INACTIVE_STROKE_WIDTH)}toggleHovered(e){this.glow.visible=!this.locked&&e,this.glow.dirtyPath=!0}toggleDragging(e){this.locked||(this.handle.visible=!e,this.glow.visible=this.glow.visible&&!e,this.handle.dirtyPath=!0,this.glow.dirtyPath=!0)}toggleLocked(e){this.locked=e}getCursor(){}containsPoint(e,t){return this.handle.containsPoint(e,t)}};iW.INACTIVE_STROKE_WIDTH=2;var nW=iW,oW=class e extends nW{constructor(){super(),this.handle=new tW({shape:"circle"}),this.glow=new tW({shape:"circle"}),this.append([this.handle]),this.handle.size=e.HANDLE_SIZE,this.handle.strokeWidth=nW.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2}update(e){this.handle.setProperties(p(p({},e),{},{strokeWidth:nW.INACTIVE_STROKE_WIDTH}))}drag(e){return{point:e,offset:{x:0,y:0}}}};oW.HANDLE_SIZE=7,oW.GLOW_SIZE=9;var sW=oW,rW=class e extends nW{constructor(){super(),this.handle=new uE.Rect,this.glow=new uE.Rect,this.gradient="horizontal",this.append([this.glow,this.handle]),this.handle.cornerRadius=e.CORNER_RADIUS,this.handle.width=e.HANDLE_SIZE,this.handle.height=e.HANDLE_SIZE,this.handle.strokeWidth=nW.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2,this.glow.cornerRadius=e.CORNER_RADIUS,this.glow.width=e.GLOW_SIZE,this.glow.height=e.GLOW_SIZE,this.glow.strokeWidth=0,this.glow.fillOpacity=.2,this.glow.zIndex=1,this.glow.visible=!1}toggleLocked(t){if(super.toggleLocked(t),t){const t=(e.HANDLE_SIZE-sW.HANDLE_SIZE)/2;this.handle.cornerRadius=1,this.handle.fill=this.handle.stroke,this.handle.strokeWidth=0,this.handle.x+=t,this.handle.y+=t,this.handle.width=sW.HANDLE_SIZE,this.handle.height=sW.HANDLE_SIZE,this.glow.width=sW.GLOW_SIZE,this.glow.height=sW.GLOW_SIZE}else this.handle.cornerRadius=e.CORNER_RADIUS,this.handle.width=e.HANDLE_SIZE,this.handle.height=e.HANDLE_SIZE,this.glow.width=e.GLOW_SIZE,this.glow.height=e.GLOW_SIZE,this.cachedStyles&&this.handle.setProperties(this.cachedStyles)}update(t){var i,n;if(this.cachedStyles=p({},t),this.active||delete t.strokeWidth,this.locked){delete t.fill,delete t.strokeWidth;const i=(e.HANDLE_SIZE-sW.HANDLE_SIZE)/2;t.x-=i,t.y-=i,this.cachedStyles.x-=i,this.cachedStyles.y-=i}this.handle.setProperties(t),this.glow.setProperties(p(p({},t),{},{x:(null!==(i=t.x)&&void 0!==i?i:this.glow.x)-2,y:(null!==(n=t.y)&&void 0!==n?n:this.glow.y)-2,strokeWidth:0,fill:t.stroke}))}drag(e){return this.locked?{point:e,offset:{x:0,y:0}}:"vertical"===this.gradient?{point:{x:e.x,y:this.handle.y},offset:{x:e.x-this.handle.x,y:0}}:{point:{x:this.handle.x,y:e.y},offset:{x:0,y:e.y-this.handle.y}}}getCursor(){if(!this.locked)return"vertical"===this.gradient?"col-resize":"row-resize"}};rW.HANDLE_SIZE=12,rW.GLOW_SIZE=16,rW.CORNER_RADIUS=4;var aW=rW,lW=class e extends nW{constructor(){super(),this.handle=new tW({shape:"circle"}),this.glow=new tW({shape:"circle"}),this.append([this.glow,this.handle]),this.handle.size=e.HANDLE_SIZE,this.handle.strokeWidth=nW.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2,this.glow.size=e.GLOW_SIZE,this.glow.strokeWidth=0,this.glow.fillOpacity=.2,this.glow.zIndex=1,this.glow.visible=!1}toggleLocked(t){super.toggleLocked(t),t?(this.handle.fill=this.handle.stroke,this.handle.strokeWidth=0,this.handle.size=sW.HANDLE_SIZE,this.glow.size=sW.GLOW_SIZE):(this.handle.size=e.HANDLE_SIZE,this.glow.size=e.GLOW_SIZE,this.cachedStyles&&this.handle.setProperties(this.cachedStyles))}update(e){this.cachedStyles=p({},e),this.active||delete e.strokeWidth,this.locked&&(delete e.fill,delete e.strokeWidth),this.handle.setProperties(e),this.glow.setProperties(p(p({},e),{},{strokeWidth:0,fill:e.stroke}))}getCursor(){return"pointer"}};lW.HANDLE_SIZE=11,lW.GLOW_SIZE=17;var dW=lW,cW=class extends uE.Group{constructor(){super(...arguments),this.name="AnnotationScene",this.zIndex=bp.CHART_ANNOTATION}static isCheck(e,t){return Qa(e)&&Object.hasOwn(e,"type")&&e.type===t}toggleHovered(e,t,i){!0!==i&&this.toggleHandles(e||t)}computeBBoxWithoutHandles(){return uE.Transformable.toCanvas(this,uE.Group.computeChildrenBBox(this.excludeChildren({instance:nW})))}updateNode(e,t,i){if(i||!t)return i&&null==t&&(t=new e,this.appendChild(t)),t;t.remove()}},{ContinuousScale:uW}=uE;function hW(e,t){let i=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2]))return DH(e,t);return DH(pW(e,i?MH(i,t):pv.origin(),n),t)}function pW(e,t,i){const n=pv.sub(e,t),o=Bp(i),s=Math.round(pv.angle(n)/o)*o;return pv.rotate(n,s,t)}function gW(e,t){const i={};for(const[n,o]of fu(e))i[n]=MH(o,t);return i}function mW(e,t,i){var n,o;let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{overflowContinuous:0,translateVectors:void 0,invertYVectors:void 0,snap:void 0};const{xAxis:r,yAxis:a}=i,l=Object.keys(e),d=[],c=[],u=new Set(null!==(n=s.translateVectors)&&void 0!==n?n:l),h=new Set(null!==(o=s.invertYVectors)&&void 0!==o?o:[]),p=new Set([...u,...h]),g=pv.multiply(t,pv.from(1,-1));for(const b of l)p.has(b)&&(e[b]=pv.add(e[b],h.has(b)?g:t),s.snap&&(e[b]=pW(e[b],s.snap.vectors[b],s.snap.angle))),d.push(r.getRangeOverflow(e[b].x)),c.push(a.getRangeOverflow(e[b].y));const m=(e,t)=>Math.abs(e)-Math.abs(t),f=(e,t,i)=>{var n,o,r;if(0===s.overflowContinuous||!uW.is(e))return null!==(o=i.toSorted(m).at(-1))&&void 0!==o?o:0;if(l.length===p.size)return null!==(r=i.toSorted(m).at(-s.overflowContinuous-1))&&void 0!==r?r:0;if(i.filter(e=>0!==e).length<=s.overflowContinuous)return 0;return null!==(n=i.filter((e,i)=>0!==e&&Math.abs(e)<=Math.abs(t)&&p.has(l[i])).toSorted(m).at(-1))&&void 0!==n?n:0},v=pv.from(f(r.scale,t.x,d),f(a.scale,t.y,c));if(!pv.equal(v,pv.origin()))for(const b of l)p.has(b)&&(e[b]=pv.round(pv.sub(e[b],v),4));const y={};for(const b of l)y[b]=DH(e[b],i);return y}var fW=class extends cW{constructor(){super(...arguments),this.handle=new dW,this.anchor={x:0,y:0,position:"above"}}update(e,t){const i=MH(e,t);this.updateHandle(e,i),this.anchor=this.updateAnchor(e,i,t)}dragStart(e,t,i){this.dragState=p({offset:t},gW({handle:e},i))}drag(e,t,i){const{dragState:n}=this;if(!e.isWriteable()||!n)return;const{point:o}=mW({point:n.handle},pv.sub(t,n.offset),i);e.x=o.x,e.y=o.y}translate(e,t,i){if(!e.isWriteable())return;const{point:n}=mW({point:MH(e,i)},t,i);e.x=n.x,e.y=n.y}toggleHandles(e){this.handle.visible=Boolean(e),this.handle.toggleHovered("handle"===this.activeHandle)}toggleActive(e){this.toggleHandles(e),this.handle.toggleActive(e)}stopDragging(){this.handle.toggleDragging(!1)}copy(e,t,i){const n=MH(e,i),o=DH({x:n.x-30,y:n.y-30},i);return t.x=o.x,t.y=o.y,t}getAnchor(){return this.anchor}getCursor(){return"pointer"}containsPoint(e,t){const{handle:i}=this;return this.activeHandle=void 0,!!i.containsPoint(e,t)&&(this.activeHandle="handle",!0)}getNodeAtCoords(e,t){if(this.handle.containsPoint(e,t))return"handle"}updateHandle(e,t,i){var n;const{x:o,y:s}=this.getHandleCoords(e,t,i),r=this.getHandleStyles(e);this.handle.update(p(p({},r),{},{x:o,y:s})),this.handle.toggleLocked(null!==(n=e.locked)&&void 0!==n&&n)}updateAnchor(e,t,i){const n=this.getHandleCoords(e,t);return{x:n.x+i.seriesRect.x,y:n.y+i.seriesRect.y,position:this.anchor.position}}getHandleCoords(e,t,i){return{x:t.x,y:t.y}}getHandleStyles(e){return{fill:e.handle.fill,stroke:e.handle.stroke,strokeOpacity:e.handle.strokeOpacity,strokeWidth:e.handle.strokeWidth}}},vW=class extends fW{constructor(){super(),this.append([this.handle])}update(e,t){super.update(e,t);const i=MH(e,t);this.updateShape(e,i)}updateShape(e,t){this.updateShapeStyles(e),this.updateShapePath(e,t)}updateShapeStyles(e){var t;const{shape:i}=this;i.fill=e.fill,i.fillOpacity=null!==(t=e.fillOpacity)&&void 0!==t?t:1}updateShapePath(e,t){const{shape:i}=this;i.x=t.x,i.y=t.y,i.size=e.size}containsPoint(e,t){return super.containsPoint(e,t)||this.shape.containsPoint(e,t)}getNodeAtCoords(e,t){return this.shape.containsPoint(e,t)?"shape":super.getNodeAtCoords(e,t)}},yW=[[.5,0],[1,.5],[.75,.5],[.75,1],[.25,1],[.25,.5],[0,.5]];function bW(e){uE.drawMarkerUnitPolygon(e,yW)}bW.anchor={x:.5,y:0};var xW=class extends vW{constructor(){super(),this.type="arrow-up",this.shape=new tW({shape:bW}),this.append([this.shape])}static is(e){return cW.isCheck(e,"arrow-up")}getHandleCoords(e,t){const i=dW.HANDLE_SIZE/2,n=super.getHandleCoords(e,t);return n.y-=i,n}},CW=yW.map(e=>{let[t,i]=e;return[t,1-i]});function SW(e){uE.drawMarkerUnitPolygon(e,CW)}SW.anchor={x:.5,y:1};var wW=class extends vW{constructor(){super(),this.type="arrow-down",this.shape=new tW({shape:SW}),this.append([this.shape])}static is(e){return cW.isCheck(e,"arrow-down")}updateAnchor(e,t,i){const n=super.updateAnchor(e,t,i);return n.y-=e.size,n}getHandleCoords(e,t){const i=dW.HANDLE_SIZE/2,n=super.getHandleCoords(e,t);return n.y+=i,n}},MW=class extends Vm{constructor(e){const t=t=>{let{point:i}=t;const n=this.createDatum();n.set({x:i.x,y:i.y}),e.create(n)};super("start",{start:{click:{target:"waiting-first-render",action:t},drag:{target:"waiting-first-render",action:t},cancel:Vm.parent,reset:Vm.parent},"waiting-first-render":{render:{target:Vm.parent,action:()=>{var t;null===(t=this.node)||void 0===t||t.toggleActive(!0),e.showAnnotationOptions(),e.update()}}}}),this.debug=Cr.create(!0,"annotations")}};kV([Om()],MW.prototype,"node",2);var kW=class extends MW{createDatum(){return new eW}},DW={type:"arrow-down",datum:eW,scene:wW,isDatum:eW.is,translate:(e,t,i,n)=>{eW.is(t)&&wW.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(eW.is(t)&&eW.is(i)&&wW.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{eW.is(t)&&wW.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new kW(p(p({},e),{},{create:i("arrow-down")}))},dragState:e=>new Jj(e)},IW=class extends rj{constructor(){super(...arguments),this.type="arrow-up"}static is(e){return Qa(e)&&"arrow-up"===e.type}};kV([ru],IW.prototype,"type",2);var AW=class extends MW{createDatum(){return new IW}},LW={type:"arrow-up",datum:IW,scene:xW,isDatum:IW.is,translate:(e,t,i,n)=>{IW.is(t)&&xW.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(IW.is(t)&&IW.is(i)&&xW.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{IW.is(t)&&xW.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new AW(p(p({},e),{},{create:i("arrow-up")}))},dragState:e=>new Jj(e)},NW=class extends cW{constructor(){super(...arguments),this.overflowContinuous=0}extendLine(e,t,i){let{x1:n,y1:o,x2:s,y2:r}=e;const a={x1:n,y1:o,x2:s,y2:r};if(!t.extendStart&&!t.extendEnd)return a;const[l,d]=function(e,t){const[i,n]=pv.from(e),o=t.height,s=pv.gradient(n,i,o),r=pv.intercept(n,s,o),a=[{x:i.x,y:null!==o&&void 0!==o?o:0},{x:i.x,y:null==o?t.height:o-t.height}];if(s===1/0)return a;let l=[pv.intersectAtY(s,r,0,o),pv.intersectAtY(s,r,t.height,o),pv.intersectAtX(s,r,0,o),pv.intersectAtX(s,r,t.width,o)];return l=l.filter(e=>e.x>=t.x&&e.x<=t.width&&e.y>=t.y&&e.y<=t.height).sort((e,t)=>e.x===t.x?0:e.x<t.x?-1:1),2!==l.length?a:l}(a,i.yAxis.bounds),c=a.x2<a.x1,u=a.y1>=a.y2,h=a.x2===a.x1;return t.extendEnd&&(h?a.y2=u?d.y:l.y:(a.x2=c?l.x:d.x,a.y2=c?l.y:d.y)),t.extendStart&&(h?a.y1=u?l.y:d.y:(a.x1=c?d.x:l.x,a.y1=c?d.y:l.y)),a}dragStart(e,t,i){this.dragState=p({offset:t},gW({start:e.start,end:e.end},i))}drag(e,t,i,n){e.isWriteable()&&(this.activeHandle?this.dragHandle(e,t,i,n):this.dragAll(e,t,i))}dragAll(e,t,i){const{dragState:n}=this;n&&this.translatePoints(e,n.start,n.end,pv.sub(t,n.offset),i)}translate(e,t,i){e.isWriteable()&&this.translatePoints(e,MH(e.start,i),MH(e.end,i),t,i)}copy(e,t,i){const n=wH(e,i);if(!n)return;const o=this.computeBBoxWithoutHandles(),s={x:-o.width/2,y:-o.height/2};return this.translatePoints(t,Pv.start(n),Pv.end(n),s,i),t}translatePoints(e,t,i,n,o){const s=mW(this.getTranslatePointsVectors(t,i),n,o,{overflowContinuous:this.overflowContinuous});e.start.x=s.start.x,e.end.x=s.end.x,e.start.y=s.start.y,e.end.y=s.end.y}getTranslatePointsVectors(e,t){return{start:e,end:t}}},TW=class extends NW{constructor(){super(...arguments),this.start=new dW,this.end=new dW,this.anchor={x:0,y:0,position:"above"}}update(e,t){const i=wH(e,t);null!=i&&(this.updateHandles(e,i),this.updateAnchor(e,i,t))}toggleHandles(e){if("boolean"===typeof e)this.start.visible=e,this.end.visible=e;else for(const[t,i]of fu(e))this[t].visible=i;this.start.toggleHovered("start"===this.activeHandle),this.end.toggleHovered("end"===this.activeHandle)}toggleActive(e){this.toggleHandles(e),this.start.toggleActive(e),this.end.toggleActive(e)}dragHandle(e,t,i,n){const{activeHandle:o,dragState:s}=this;if(!o||!s)return;this[o].toggleDragging(!0);const r="start"===o?"end":"start",a=n?{vectors:{[o]:MH(e[r],i)},angle:e.snapToAngle}:void 0,{[o]:l}=mW({[o]:s[o]},pv.sub(t,s.offset),i,{overflowContinuous:0,snap:a});e[o].x=l.x,e[o].y=l.y}stopDragging(){this.start.toggleDragging(!1),this.end.toggleDragging(!1)}getAnchor(){return this.anchor}getCursor(){return"pointer"}containsPoint(e,t){const{start:i,end:n}=this;return this.activeHandle=void 0,i.containsPoint(e,t)?(this.activeHandle="start",!0):!!n.containsPoint(e,t)&&(this.activeHandle="end",!0)}getNodeAtCoords(e,t){if(this.start.containsPoint(e,t)||this.end.containsPoint(e,t))return"handle"}updateHandles(e,t,i){var n,o;this.start.update(p(p({},this.getHandleStyles(e,"start")),this.getHandleCoords(e,t,"start"))),this.end.update(p(p({},this.getHandleStyles(e,"end")),this.getHandleCoords(e,t,"end",i))),this.start.toggleLocked(null!==(n=e.locked)&&void 0!==n&&n),this.end.toggleLocked(null!==(o=e.locked)&&void 0!==o&&o)}updateAnchor(e,t,i,n){this.anchor={x:t.x1+i.seriesRect.x,y:t.y1+i.seriesRect.y,position:this.anchor.position}}getHandleCoords(e,t,i,n){return"start"===i?Pv.start(t):Pv.end(t)}getHandleStyles(e,t){return{fill:e.handle.fill,stroke:e.handle.stroke,strokeOpacity:e.handle.strokeOpacity,strokeWidth:e.handle.strokeWidth}}},RW=class extends TW{constructor(){super(...arguments),this.label=new uE.Text({zIndex:1}),this.anchor={x:0,y:0,position:"above-left"}}setTextInputBBox(e){this.textInputBBox=e,this.markDirty("TextualStartEndScene")}update(e,t){const i=wH(e,t);if(null==i)return;const n=this.getTextBBox(e,i);this.updateLabel(e,n,i),this.updateHandles(e,i,n),this.updateShape(e,n,i),this.updateAnchor(e,i,t,n)}containsPoint(e,t){return super.containsPoint(e,t)||this.label.containsPoint(e,t)}getNodeAtCoords(e,t){return this.label.containsPoint(e,t)?"text":super.getNodeAtCoords(e,t)}getTextBBox(e,t){const{text:i}=e.getText();return tj(e,i,Pv.end(t),this.textInputBBox)}updateLabel(e,t,i){const{text:n,isPlaceholder:o}=e.getText();ij(this.label,n,o,e,this.getLabelCoords(e,t,i))}updateShape(e,t,i){}getLabelCoords(e,t,i){return Pv.end(i)}getHandleStyles(e,t){var i;return p(p({},super.getHandleStyles(e,t)),{},{stroke:null!==(i=e.handle.stroke)&&void 0!==i?i:e.color})}},{drawCorner:EW,Path:PW}=uE,OW=class extends RW{constructor(){super(),this.type="callout",this.shape=new PW,this.append([this.shape,this.label,this.start,this.end])}static is(e){return cW.isCheck(e,"callout")}drag(e,t,i,n){e.isWriteable()&&("end"===this.activeHandle?this.dragHandle(e,t,i,n):this.dragAll(e,t,i))}getLabelCoords(e,t,i){var n;const o=e.getPadding(),{bodyBounds:s={x:0,y:0,width:0,height:0}}=null!==(n=this.getDimensions(e,t,i))&&void 0!==n?n:{};return{x:s.x+o.left,y:s.y-o.bottom}}getHandleStyles(e,t){var i;return"start"===t?{fill:e.handle.fill,stroke:null!==(i=e.handle.stroke)&&void 0!==i?i:e.stroke,strokeOpacity:e.handle.strokeOpacity,strokeWidth:e.handle.strokeWidth}:{fill:void 0,strokeWidth:0}}updateAnchor(e,t,i,n){var o;const{bodyBounds:s}=null!==(o=this.getDimensions(e,n,t))&&void 0!==o?o:{},r=null!==s&&void 0!==s?s:n;this.anchor={x:r.x+i.seriesRect.x,y:r.y+i.seriesRect.y-r.height,position:this.anchor.position}}updateShape(e,t,i){var n,o,s,r;const{shape:a}=this;a.fill=e.fill,a.fillOpacity=null!==(n=e.fillOpacity)&&void 0!==n?n:1,a.stroke=e.stroke,a.strokeWidth=null!==(o=e.strokeWidth)&&void 0!==o?o:1,a.strokeOpacity=null!==(s=e.strokeOpacity)&&void 0!==s?s:1;const{tailPoint:l,bodyBounds:d}=null!==(r=this.getDimensions(e,t,i))&&void 0!==r?r:{};l&&d&&this.updatePath(l,d)}updatePath(e,t){const{x:i,y:n}=e,{x:o,y:s,width:r,height:a}=t,l=s-a,d=o+r,c=this.calculateCalloutPlacement({x:i,y:n},t),u=[{coordinates:{x0:o,x1:o+8,y0:l+8,y1:l,cx:"topLeft"===c?i:o+8,cy:"topLeft"===c?n:l+8},type:"topLeft"===c?"calloutCorner":"corner"},{coordinates:{x0:o+8,x1:d-8,y0:l,y1:l,cx:i,cy:n},type:"top"===c?"calloutSide":"side"},{coordinates:{x0:d-8,x1:d,y0:l,y1:l+8,cx:"topRight"===c?i:d-8,cy:"topRight"===c?n:l+8},type:"topRight"===c?"calloutCorner":"corner"},{coordinates:{x0:d,x1:d,y0:l+8,y1:s-8,cx:i,cy:n},type:"right"===c?"calloutSide":"side"},{coordinates:{x0:d,x1:d-8,y0:s-8,y1:s,cx:"bottomRight"===c?i:d-8,cy:"bottomRight"===c?n:s-8},type:"bottomRight"===c?"calloutCorner":"corner"},{coordinates:{x0:d-8,x1:o+8,y0:s,y1:s,cx:i,cy:n},type:"bottom"===c?"calloutSide":"side"},{coordinates:{x0:o+8,x1:o,y0:s,y1:s-8,cx:"bottomLeft"===c?i:o+8,cy:"bottomLeft"===c?n:s-8},type:"bottomLeft"===c?"calloutCorner":"corner"},{coordinates:{x0:o,x1:o,y0:s-8,y1:l+8,cx:i,cy:n},type:"left"===c?"calloutSide":"side"}],{path:h}=this.shape;h.clear(),h.moveTo(o,l+8);for(const{coordinates:p,type:g}of u)this.drawPath(h,p,8,g);h.closePath()}drawPath(e,t,i,n){let{x0:o,y0:s,x1:r,y1:a,cx:l,cy:d}=t;switch(n){case"calloutCorner":e.lineTo(l,d),e.lineTo(r,a);break;case"corner":EW(e,{x0:o,x1:r,y0:s,y1:a,cx:l,cy:d},i,!1);break;case"calloutSide":if(o===r){const t=s>a?-1:1,i=Math.min(s,a)+Math.abs(s-a)/2;e.lineTo(o,i-6*t),e.lineTo(l,d),e.lineTo(o,i+6*t),e.lineTo(r,a)}else{const t=o>r?-1:1,i=Math.min(o,r)+Math.abs(r-o)/2;e.lineTo(i-6*t,s),e.lineTo(l,d),e.lineTo(i+6*t,s),e.lineTo(r,a)}break;default:e.lineTo(r,a)}}calculateCalloutPlacement(e,t){const i=t.x+t.width,n=t.y-t.height;let o,s;return e.x>i?o="right":e.x<t.x&&(o="left"),e.y>t.y?s="bottom":e.y<n&&(s="top"),o&&s?"".concat(s).concat(o[0].toUpperCase()).concat(o.substring(1)):null!==s&&void 0!==s?s:o}getDimensions(e,t,i){const{fontSize:n}=e,o=e.getPadding(),s=o.left+o.right,r=o.top+o.bottom,a=t.width+s,l=Math.max(t.height+r,n+r);return{tailPoint:{x:i.x1,y:i.y1},bodyBounds:{x:t.x,y:t.y,width:a,height:l}}}containsPoint(e,t){const{start:i,end:n,shape:o}=this;if(this.activeHandle=void 0,i.containsPoint(e,t))return this.activeHandle="start",!0;const s=n.containsPoint(e,t)||o.containsPoint(e,t);return s&&(this.activeHandle="end"),s}};function FW(e){let{key:t}=e;return"Escape"===t}function zW(e){let{key:t,shiftKey:i}=e;return!i&&"Enter"===t}var BW=class extends Vm{constructor(e){const t=t=>{let{point:i}=t;const n=this.createDatum();n.set({start:i,end:i,visible:!0}),e.create(n)},i=t=>{let{point:i}=t;const{datum:n,node:o}=this;null===n||void 0===n||n.set({end:i}),null===o||void 0===o||o.toggleActive(!0),null===o||void 0===o||o.toggleHandles({end:!1}),e.update()},n=()=>{var t;e.showAnnotationOptions(),null===(t=this.node)||void 0===t||t.toggleHandles({end:!0})},o=()=>{e.delete()},s=t=>{let{textInputValue:i,bbox:n}=t;const{datum:o}=this;if(null!=n&&null!=i&&i.length>0){if(!Sj(o))return;const t=ej(o,i,n.width);null===o||void 0===o||o.set({text:t}),e.update(),e.recordAction("Create ".concat(null===o||void 0===o?void 0:o.type," annotation"))}else e.delete()};super("start",{start:{click:{target:"waiting-first-render",action:t},dragStart:{target:"waiting-first-render",action:t},cancel:Vm.parent,reset:Vm.parent},"waiting-first-render":{render:{target:"end",action:()=>{const{node:e}=this;null===e||void 0===e||e.toggleActive(!0),null===e||void 0===e||e.toggleHandles({start:!0})}}},end:{hover:i,drag:i,click:{target:"edit",action:n},dragEnd:{target:"edit",action:n},reset:{target:Vm.parent,action:o},cancel:{target:Vm.parent,action:o}},edit:{onEnter:()=>{e.showTextInput(),this.datum&&(this.datum.visible=!1)},updateTextInputBBox:t=>{var i;null===(i=this.node)||void 0===i||i.setTextInputBBox(t),e.update()},color:t=>{let{colorPickerType:i,colorOpacity:n,color:o,opacity:s,isMultiColor:r}=t;const{datum:a}=this;a&&("text-color"===i&&e.updateTextInputColor(o),Rj(a,i,n,o,s,r),e.update())},fontSize:t=>{const{datum:i,node:n}=this;i&&n&&Sj(i)&&(i.fontSize=t,e.updateTextInputFontSize(t),e.update())},textInput:[{guard:FW,target:Vm.parent,action:o},{guard:zW,target:Vm.parent,action:s}],click:{target:Vm.parent,action:s},dragStart:{target:Vm.parent,action:s},resize:{target:Vm.parent,action:s},onExit:()=>{e.hideTextInput(),this.datum&&(this.datum.visible=!0),e.deselect()},cancel:{target:Vm.parent,action:o}}}),this.debug=Cr.create(!0,"annotations")}};kV([Om()],BW.prototype,"datum",2),kV([Om()],BW.prototype,"node",2);var VW=class extends BW{createDatum(){return new TH}},GW={type:"callout",datum:TH,scene:OW,isDatum:TH.is,translate:(e,t,i,n)=>{if(TH.is(t)&&OW.is(e))return e.translate(t,i,n)},copy:(e,t,i,n)=>{if(TH.is(t)&&TH.is(i)&&OW.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{TH.is(t)&&OW.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new VW(p(p({},e),{},{create:i("callout")}))},dragState:e=>new Jj(e)},HW=class extends fW{constructor(){super(...arguments),this.label=new uE.Text({zIndex:1}),this.anchor={x:0,y:0,position:"above-left"}}setTextInputBBox(e){this.textInputBBox=e,this.markDirty("TextualPointScene")}update(e,t){const i=MH(e,t),n=this.getTextBBox(e,i,t);this.updateLabel(e,n),this.updateHandle(e,i,n),this.updateShape(e,n),this.anchor=this.updateAnchor(e,n,t)}copy(e,t,i){const n=MH(e,i),o=this.getTextBBox(e,n,i),s=e.getPadding(),r=s.left+s.right,a=s.top+s.bottom,l=(o.width+r)/2,d=o.height+a,c=DH({x:n.x-l,y:n.y-d},i);return t.x=c.x,t.y=c.y,t}containsPoint(e,t){const{label:i}=this;return super.containsPoint(e,t)||i.visible&&i.containsPoint(e,t)}getNodeAtCoords(e,t){return this.label.visible&&this.label.containsPoint(e,t)?"text":super.getNodeAtCoords(e,t)}getTextBBox(e,t,i){const{text:n}=e.getText();return tj(e,n,{x:t.x,y:t.y},this.textInputBBox)}updateLabel(e,t){const{text:i,isPlaceholder:n}=e.getText();ij(this.label,i,n,e,this.getLabelCoords(e,t),this.getTextBaseline(e))}updateShape(e,t){}updateAnchor(e,t,i){return{x:t.x+i.seriesRect.x,y:t.y+i.seriesRect.y-t.height,position:this.anchor.position}}getLabelCoords(e,t){return t}getTextBaseline(e){return"center"==e.position?"middle":e.position}getHandleCoords(e,t,i){return i}getHandleStyles(e){var t;const i=super.getHandleStyles(e);return i.stroke=null!==(t=e.handle.stroke)&&void 0!==t?t:e.color,i}},{drawCorner:jW}=uE,WW=class extends HW{constructor(){super(),this.type="comment",this.shape=new uE.Path,this.append([this.shape,this.label,this.handle])}static is(e){return cW.isCheck(e,"comment")}updateShape(e,t){var i,n,o,s;const{shape:r}=this;r.fill=e.fill,r.fillOpacity=null!==(i=e.fillOpacity)&&void 0!==i?i:1,r.stroke=null!==(n=e.stroke)&&void 0!==n?n:"transparent",r.strokeWidth=null!==(o=e.strokeWidth)&&void 0!==o?o:1,r.strokeOpacity=null!==(s=e.strokeOpacity)&&void 0!==s?s:1,this.updatePath(e,t)}getLabelCoords(e,t){const i=e.getPadding();return{x:t.x+i.left,y:t.y-i.bottom}}getHandleStyles(e){var t,i;return{fill:e.handle.fill,stroke:null!==(t=null!==(i=e.handle.stroke)&&void 0!==i?i:e.stroke)&&void 0!==t?t:e.fill,strokeOpacity:e.handle.strokeOpacity,strokeWidth:e.handle.strokeWidth}}updateAnchor(e,t,i){const n=super.updateAnchor(e,t,i),o=e.getPadding();return n.y-=o.bottom+o.top,n}updatePath(e,t){const i=e.getPadding(),{x:n,y:o}=t;let{width:s,height:r}=t;const{fontSize:a}=e,l=i.left+i.right,d=i.top+i.bottom;s+=l,r=Math.max(r+d,a+d);const c=o-r,u=n+s,h=(Vl(a,JH)+d)/2,{path:p}=this.shape;p.clear(),p.moveTo(n,o),p.lineTo(n,c+h),jW(p,{x0:n,x1:n+h,y0:c+h,y1:c,cx:n+h,cy:c+h},h,!1),p.lineTo(u-h,c),jW(p,{x0:u-h,x1:u,y0:c,y1:c+h,cx:u-h,cy:c+h},h,!1),p.lineTo(u,o-h),jW(p,{x0:u,x1:u-h,y0:o-h,y1:o,cx:u-h,cy:o-h},h,!1),p.closePath()}containsPoint(e,t){return super.containsPoint(e,t)||this.shape.containsPoint(e,t)}},_W=class extends Vm{constructor(e){const t=t=>{let{point:i}=t;const n=this.createDatum();n.set({x:i.x,y:i.y}),e.create(n)},i=()=>{e.delete()},n=t=>{let{textInputValue:i,bbox:n}=t;if(null!=n&&null!=i&&i.length>0){const{datum:t}=this;if(!Sj(t))return;const o=ej(t,i,n.width);null===t||void 0===t||t.set({text:o}),e.update(),e.recordAction("Create ".concat(null===t||void 0===t?void 0:t.type," annotation"))}else e.delete()};super("start",{start:{click:{target:"waiting-first-render",action:t},dragStart:{target:"waiting-first-render",action:t},cancel:Vm.parent,reset:Vm.parent},"waiting-first-render":{render:{target:"edit",action:()=>{var t;null===(t=this.node)||void 0===t||t.toggleActive(!0),e.showAnnotationOptions(),e.update()}}},edit:{onEnter:()=>{e.showTextInput(),this.datum&&(this.datum.visible=!1)},updateTextInputBBox:t=>{var i;null===(i=this.node)||void 0===i||i.setTextInputBBox(t),e.update()},color:t=>{let{colorPickerType:i,colorOpacity:n,color:o,opacity:s,isMultiColor:r}=t;this.datum&&("text-color"===i&&e.updateTextInputColor(o),Rj(this.datum,i,n,o,s,r),e.update())},fontSize:t=>{const{datum:i,node:n}=this;i&&n&&Sj(i)&&(i.fontSize=t,e.updateTextInputFontSize(t),e.update())},textInput:[{guard:FW,target:Vm.parent,action:i},{guard:zW,target:Vm.parent,action:n}],click:{target:Vm.parent,action:n},dragStart:{target:Vm.parent,action:n},resize:{target:Vm.parent,action:n},onExit:()=>{e.hideTextInput(),this.datum&&(this.datum.visible=!0),e.deselect()},cancel:{target:Vm.parent,action:i}}}),this.debug=Cr.create(!0,"annotations")}};kV([Om()],_W.prototype,"datum",2),kV([Om()],_W.prototype,"node",2);var KW=class extends _W{createDatum(){return new zH}},UW={type:"comment",datum:zH,scene:WW,isDatum:zH.is,translate:(e,t,i,n)=>{zH.is(t)&&WW.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(zH.is(t)&&zH.is(i)&&WW.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{zH.is(t)&&WW.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new KW(p(p({},e),{},{create:i("comment")}))},dragState:e=>new Jj(e)},{calculateLabelTranslation:YW}=uE,$W=class extends uE.Group{constructor(){super({name:"AnnotationAxisLabelGroup"}),this.label=new uE.Text({zIndex:1}),this.rect=new uE.Rect;const{label:e}=this;e.fontSize=12,e.fontFamily="Verdana, sans-serif",e.fill="black",e.textBaseline="middle",e.textAlign="center",this.append([this.rect,this.label])}update(e){this.updateLabel(e),this.updateRect(e),this.updatePosition(e)}updateLabel(e){let{value:t,styles:i,context:n}=e;const{fontWeight:o,fontSize:s,fontStyle:r,fontFamily:a,textAlign:l,color:d="white",formatter:c}=i,u=c?c({value:t}):n.formatScaleValue(t,"annotation-label");this.label.setProperties({fontWeight:o,fontSize:s,fontStyle:r,fontFamily:a,textAlign:l,fill:d,text:u})}updateRect(e){let{styles:t}=e;const{rect:i}=this,{cornerRadius:n,fill:o,fillOpacity:s,stroke:r,strokeOpacity:a}=t;i.fill=o,i.fillOpacity=null!==s&&void 0!==s?s:1,i.stroke=r,i.strokeOpacity=null!==a&&void 0!==a?a:1,i.cornerRadius=null!==n&&void 0!==n?n:0}updatePosition(e){var t,i;let{x:n,y:o,context:s,styles:{padding:r}}=e;const{label:a,rect:l}=this,d=null===(t=a.getBBox())||void 0===t?void 0:t.clone(),c=null!==r&&void 0!==r?r:8,u=null!==r&&void 0!==r?r:4,{xTranslation:h,yTranslation:p}=YW({yDirection:!0,padding:s.labelPadding,position:null!==(i=s.position)&&void 0!==i?i:"left",bbox:d});d.grow(c,"horizontal"),d.grow(u,"vertical");const g=n+h,m=o+p;a.x=g,a.y=m,l.y=m-Math.round(d.height/2),l.x=g-Math.round(d.width/2),l.height=d.height,l.width=d.width}};$W.className="AxisLabel";var ZW=class extends uE.Line{constructor(){super(...arguments),this.growCollisionBox=9,this.clipMask=new Map}setProperties(e){return super.setProperties(e),this.updateCollisionBBox(),this}updateCollisionBBox(){const{growCollisionBox:e,strokeWidth:t,x1:i,y1:n,x2:o,y2:s}=this;let r=t+e;r%2===0&&(r+=1);const a=pv.from(i,n-Math.floor(r/2)),l=pv.from(o,s),d=pv.distance(a,l);this.collisionBBox=new uE.BBox(a.x,a.y,d,r)}isPointInPath(e,t){var i;const{collisionBBox:n,x1:o,y1:s,x2:r,y2:a}=this;if(!n)return!1;const l=pv.from(o,s),d=pv.from(r,a),c=pv.sub(pv.from(e,t),l),u=pv.sub(d,l),h=pv.rotate(c,pv.angle(c,u),l);return null!==(i=n.containsPoint(h.x,h.y))&&void 0!==i&&i}render(e){const{clipMask:t}=this,{ctx:i}=e;if(0!==t.size){i.save();try{for(const e of this.clipMask.values()){const{x:t,y:n,radius:o}=e;i.beginPath(),i.rect(0,0,i.canvas.width,i.canvas.height),i.ellipse(t,n,o,o,0,2*Math.PI,0,!0),i.clip()}super.render(e)}finally{i.restore()}}else super.render(e)}setClipMask(e,t){null!=Xg(this.clipMask.get(e),t)&&this.markDirty("CollidableLine"),t?this.clipMask.set(e,t):this.clipMask.delete(e)}},XW=class extends uE.TransformableText{constructor(){super(...arguments),this.growCollisionBox={top:4,right:4,bottom:4,left:4}}isPointInPath(e,t){const i=this.fromParentPoint(e,t),n=this.computeBBoxWithoutTransforms();return!!n&&n.grow(this.growCollisionBox).containsPoint(i.x,i.y)}};function qW(e,t,i,n,o,s,r){if(!s||!o||!n)return void t.setClipMask(e);const{alignment:a,position:l}=n,d=JW(i,n.fontSize,r),{point:c,textBaseline:u}=e_(d,l,a);t_(o,s,n,c,d.angle,u);const{x:h,y:p,width:g,height:m}=o.getBBox(),f={x:h+g/2,y:p+m/2,radius:pv.length(pv.from(g,m))/2+pv.length(d.offset)};return"center"===l?t.setClipMask(e,f):t.setClipMask(e),{clipMask:f,numbers:d}}function QW(e,t,i,n,o,s,r){if(!r||!s)return;const{alignment:a,position:l}=n,[d,c]=t.y1<=i.y1?[t,i]:[i,t];let u=d;"bottom"===l?u=c:"inside"===l&&(u={x1:(d.x1+c.x1)/2,y1:(d.y1+c.y1)/2,x2:(d.x2+c.x2)/2,y2:(d.y2+c.y2)/2});const h=JW(u,n.fontSize,o),{point:p,textBaseline:g}=e_(h,"inside"===l?"center":l,a,e);t_(s,r,n,p,h.angle,g)}function JW(e,t,i){let[n,o]=pv.from(e);n.x>o.x&&([n,o]=[o,n]);const s=pv.normalized(pv.sub(o,n));return{left:n,right:o,normal:s,angle:pv.angle(s),inset:pv.multiply(s,dW.HANDLE_SIZE/2+(null!==t&&void 0!==t?t:14)/2),offset:pv.multiply(s,(null!==i&&void 0!==i?i:2)/2+(null!==t&&void 0!==t?t:14)/3)}}function e_(e,t,i,n){let o,{left:s,right:r,normal:a,angle:l,inset:d,offset:c}=e;o="right"===i?pv.sub(r,d):"center"===i?pv.add(s,pv.multiply(a,pv.distance(s,r)/2)):pv.add(s,d);let u="bottom";return"bottom"===t?(o=pv.rotate(c,l+Math.PI/2,o),u="top"):"center"!==t||n?o=pv.rotate(c,l-Math.PI/2,o):u="middle",{point:o,textBaseline:u}}function t_(e,t,i,n,o,s){e.setProperties({text:t,x:n.x,y:n.y,rotation:o,rotationCenterX:n.x,rotationCenterY:n.y,fill:i.color,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textAlign:i.alignment,textBaseline:s})}var i_=class extends cW{constructor(){super(),this.type="cross-line",this.line=new ZW,this.middle=new aW,this.isHorizontal=!1,this.append([this.line,this.middle])}static is(e){return cW.isCheck(e,"cross-line")}update(e,t){var i;const{seriesRect:n}=t;this.seriesRect=n,this.isHorizontal=aj.is(e);const o=this.isHorizontal?t.yAxis:t.xAxis,s=this.convertCrossLine(e,o);null!=s?(this.visible=null===(i=e.visible)||void 0===i||i,this.visible&&(this.updateLine(e,s),this.updateHandle(e,s),this.updateText(e,s),this.updateAxisLabel(e,o,s))):this.visible=!1}updateLine(e,t){const{line:i}=this,{lineDashOffset:n,stroke:o,strokeWidth:s,strokeOpacity:r}=e,{x1:a,y1:l,x2:d,y2:c}=t;i.setProperties({x1:a,y1:l,x2:d,y2:c,lineCap:e.getLineCap(),lineDash:e.getLineDash(),lineDashOffset:n,stroke:o,strokeWidth:s,strokeOpacity:r,fillOpacity:0})}updateHandle(e,t){var i,n,o;const{middle:s}=this,{locked:r,stroke:a,strokeWidth:l,strokeOpacity:d}=e,c={fill:e.handle.fill,stroke:null!==(i=e.handle.stroke)&&void 0!==i?i:a,strokeOpacity:null!==(n=e.handle.strokeOpacity)&&void 0!==n?n:d,strokeWidth:null!==(o=e.handle.strokeWidth)&&void 0!==o?o:l},u=pv.sub(Pv.center(t),pv.from(s.handle.width/2,s.handle.height/2));s.gradient=this.isHorizontal?"horizontal":"vertical",s.update(p(p({},c),u)),s.toggleLocked(null!==r&&void 0!==r&&r)}updateText(e,t){this.text=this.updateNode(XW,this.text,!!e.text.label),qW(this.line.id,this.line,t,e.text,this.text,e.text.label,e.strokeWidth)}createAxisLabel(e){const t=new $W;return e.attachLabel(t),t}updateAxisLabel(e,t,i){var n;null!==(n=this.axisLabel)&&void 0!==n||(this.axisLabel=this.createAxisLabel(t));const{axisLabel:o,seriesRect:s}=this,{direction:r,position:a}=t;if(e.axisLabel.enabled){o.visible=this.visible;const n="left"===a||"top"===a?Pv.start(i):Pv.end(i),l=r===_u.X?n.x:n.y;if(!t.inRange(l))return void(o.visible=!1);const d=SH(e.value);o.update(p(p({},pv.add(n,pv.required(s))),{},{value:d,styles:e.axisLabel,context:t}))}else o.visible=!1}setAxisLabelOpacity(e){this.axisLabel&&(this.axisLabel.opacity=e)}setAxisLabelVisible(e){this.axisLabel&&(this.axisLabel.visible=e)}toggleHandles(e){this.middle.visible=e,this.middle.toggleHovered("middle"===this.activeHandle)}destroy(){var e;super.destroy(),null===(e=this.axisLabel)||void 0===e||e.destroy()}toggleActive(e){this.toggleHandles(e),this.middle.toggleActive(e)}dragStart(e,t,i){const n=aj.is(e)?{x:t.x,y:kH(e.value,i.yAxis)}:{x:kH(e.value,i.xAxis),y:t.y};this.dragState={offset:t,middle:n}}drag(e,t,i){const{activeHandle:n,dragState:o}=this;e.isWriteable()&&o&&(n&&this[n].toggleDragging(!0),this.translatePoint(e,o.middle,pv.sub(t,o.offset),i))}translate(e,t,i){if(!e.isWriteable())return;const n=aj.is(e)?pv.from(0,kH(e.value,i.yAxis)):pv.from(kH(e.value,i.xAxis),0);this.translatePoint(e,n,t,i)}translatePoint(e,t,i,n){const o=aj.is(e);o?i.x=0:i.y=0;const{point:s}=mW({point:t},i,n);e.value=o?s.y:s.x}stopDragging(){this.middle.toggleDragging(!1)}copy(e,t,i){const n=aj.is(e),o=this.isHorizontal?i.yAxis:i.xAxis,s=this.convertCrossLine(e,o);if(!s)return;const r=n?-30:0,a=n?0:-30,l=DH({x:s.x1+a,y:s.y1+r},i);return t.set({value:n?l.y:l.x}),t}getCursor(){return null==this.activeHandle?"pointer":this[this.activeHandle].getCursor()}containsPoint(e,t){const{middle:i,line:n,text:o}=this;return this.activeHandle=void 0,i.containsPoint(e,t)?(this.activeHandle="middle",!0):n.isPointInPath(e,t)||Boolean(null===o||void 0===o?void 0:o.containsPoint(e,t))}getNodeAtCoords(e,t){var i;return null!==(i=this.text)&&void 0!==i&&i.containsPoint(e,t)?"text":this.line.isPointInPath(e,t)?"line":this.middle.containsPoint(e,t)?"handle":void 0}getAnchor(){const e=this.computeBBoxWithoutHandles();return this.isHorizontal?{x:e.x+e.width/2,y:e.y}:{x:e.x+e.width,y:e.y+e.height/2,position:"right"}}convertCrossLine(e,t){if(null==e.value)return;let i,n,o=0,s=0;const{bounds:r}=t,a=kH(e.value,t);return aj.is(e)?(i=r.width,s=a,n=a):(o=a,i=a,n=r.height),{x1:o,y1:s,x2:i,y2:n}}},n_=class extends Vm{constructor(e,t){const i=i=>{let{point:n}=i;const o="horizontal"===e,s=o?new aj:new lj;s.set({value:o?n.y:n.x}),t.create(s),t.recordAction("Create ".concat(o?"horizontal-line":"vertical-line"," annotation"))};super("start",{start:{click:{target:"waiting-first-render",action:i},drag:{target:"waiting-first-render",action:i},reset:Vm.parent,cancel:Vm.parent},"waiting-first-render":{render:{target:Vm.parent,action:()=>{var e;null===(e=this.node)||void 0===e||e.toggleActive(!0),t.showAnnotationOptions(),t.update()}}}}),this.debug=Cr.create(!0,"annotations")}};kV([Om()],n_.prototype,"node",2);var o_={type:"horizontal-line",datum:aj,scene:i_,isDatum:aj.is,translate:(e,t,i,n)=>{aj.is(t)&&i_.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(aj.is(t)&&aj.is(i)&&i_.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{aj.is(t)&&i_.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new n_("horizontal",p(p({},e),{},{create:i("horizontal-line")}))},dragState:e=>new Jj(e)},s_={type:"vertical-line",datum:lj,scene:i_,isDatum:lj.is,translate:(e,t,i,n)=>{lj.is(t)&&i_.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(lj.is(t)&&lj.is(i)&&i_.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{lj.is(t)&&i_.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new n_("vertical",p(p({},e),{},{create:i("vertical-line")}))},dragState:e=>new Jj(e)},r_=class{static updateBackground(e,t,i,n){var o,s,r;const{background:a}=this,{seriesRect:l}=n;a.path.clear(!0);const d=Pv.from(0,0,l.width,l.height),c=this.getBackgroundPoints(e,t,i,d);for(let h=0;h<c.length;h++){const e=c[h];0===h?a.path.moveTo(e.x,e.y):a.path.lineTo(e.x,e.y)}a.path.closePath(),a.checkPathDirty();const u=null!==(o=null===(s=this.getBackgroundStyles)||void 0===s?void 0:s.call(this,e))&&void 0!==o?o:e.background;a.fill=u.fill,a.fillOpacity=null!==(r=u.fillOpacity)&&void 0!==r?r:1}},a_=class extends NW{constructor(){super(...arguments),this.handles={},this.overflowContinuous=2,this.topLine=new ZW,this.bottomLine=new ZW,this.background=new uE.Path({zIndex:-1}),this.anchor={x:0,y:0},this.updateBackground=r_.updateBackground.bind(this)}update(e,t){const{locked:i,visible:n}=e,o=wH(e,t),s=wH(e.bottom,t);if(null==o||null==s)return void(this.visible=!1);this.visible=null===n||void 0===n||n;const r=this.extendLine(o,e,t),a=this.extendLine(s,e,t);this.updateLines(e,r,a,t,o,s),this.updateHandles(e,o,s),this.updateText(e,o,s),this.updateBackground(e,r,a,t),this.updateAnchor(o,s);for(const l of Object.values(this.handles))l.toggleLocked(null!==i&&void 0!==i&&i)}toggleHandles(e){const{handles:t}=this;if("boolean"!==typeof e)for(const[i,n]of Object.entries(e)){const e=t[i];e.visible=null===n||void 0===n||n,e.toggleHovered(this.activeHandle===i)}else for(const[i,n]of Object.entries(t))n.visible=e,n.toggleHovered(this.activeHandle===i)}toggleActive(e){this.toggleHandles(e);for(const t of Object.values(this.handles))t.toggleActive(e)}stopDragging(){const{activeHandle:e,handles:t}=this;null!=e&&t[e].toggleDragging(!1)}getAnchor(){return this.anchor}getCursor(){return null==this.activeHandle?"pointer":this.handles[this.activeHandle].getCursor()}containsPoint(e,t){const{handles:i,topLine:n,bottomLine:o,text:s}=this;this.activeHandle=void 0;for(const[r,a]of Object.entries(i))if(a.containsPoint(e,t))return this.activeHandle=r,!0;return n.containsPoint(e,t)||o.containsPoint(e,t)||Boolean(null===s||void 0===s?void 0:s.containsPoint(e,t))}getNodeAtCoords(e,t){var i;if(null!==(i=this.text)&&void 0!==i&&i.containsPoint(e,t))return"text";if(this.topLine.containsPoint(e,t)||this.bottomLine.containsPoint(e,t))return"line";for(const[,n]of Object.entries(this.handles))if(n.containsPoint(e,t))return"handle"}updateAnchor(e,t){const{x:i,y:n}=uE.Transformable.toCanvasPoint(this.topLine,(e.x1+e.x2)/2,Math.min(e.y1,e.y2,t.y1,t.y2));this.anchor.x=i,this.anchor.y=n}},l_=class extends a_{constructor(){super(),this.type="disjoint-channel",this.handles={topLeft:new dW,topRight:new dW,bottomLeft:new dW,bottomRight:new aW},this.append([this.background,this.topLine,this.bottomLine,...Object.values(this.handles)])}static is(e){return cW.isCheck(e,"disjoint-channel")}dragHandle(e,t,i,n){const{activeHandle:o,handles:s}=this;if(null==o)return;const{offset:r}=s[o].drag(t);s[o].toggleDragging(!0),"bottomRight"===o&&(r.x=0);let a=[],l=[],d=n;switch(o){case"topLeft":a=["topLeft"],l=["bottomLeft"];break;case"bottomLeft":a=["bottomLeft"],l=["topLeft"];break;case"topRight":a=["topRight"],l=["bottomRight"];break;case"bottomRight":a=["bottomLeft","bottomRight"],d=!1}const c=wH(e,i),u=wH(e.bottom,i);if(!c||!u)return;const h={topLeft:Pv.start(c),topRight:Pv.end(c),bottomLeft:Pv.start(u),bottomRight:Pv.end(u)},p={vectors:{topLeft:h.topRight,bottomLeft:h.bottomRight,topRight:h.topLeft,bottomRight:h.bottomLeft},angle:e.snapToAngle},g=mW(h,r,i,{overflowContinuous:this.overflowContinuous,translateVectors:a,invertYVectors:l,snap:d?p:void 0});e.start.x=g.topLeft.x,e.start.y=g.topLeft.y,e.end.x=g.topRight.x,e.end.y=g.topRight.y,e.startHeight=g.topLeft.y-g.bottomLeft.y,e.endHeight=g.topRight.y-g.bottomRight.y}getTranslatePointsVectors(e,t){const{bottomLeft:i,bottomRight:n,topLeft:o,topRight:s}=this.handles,r=i.getBBox().y-o.getBBox().y,a=n.getBBox().y-s.getBBox().y;return{start:e,end:t,bottomStart:pv.add(e,pv.from(0,r)),bottomEnd:pv.add(t,pv.from(0,a))}}updateLines(e,t,i){const{topLine:n,bottomLine:o}=this,{lineDashOffset:s,stroke:r,strokeOpacity:a,strokeWidth:l}=e,d={lineCap:e.getLineCap(),lineDash:e.getLineDash(),lineDashOffset:s,stroke:r,strokeOpacity:a,strokeWidth:l};n.setProperties(p(p({},t),d)),o.setProperties(p(p({},i),d))}updateHandles(e,t,i){var n,o,s;const{handles:{topLeft:r,topRight:a,bottomLeft:l,bottomRight:d}}=this,c={fill:e.handle.fill,stroke:null!==(n=e.handle.stroke)&&void 0!==n?n:e.stroke,strokeOpacity:null!==(o=e.handle.strokeOpacity)&&void 0!==o?o:e.strokeOpacity,strokeWidth:null!==(s=e.handle.strokeWidth)&&void 0!==s?s:e.strokeWidth};r.update(p(p({},c),Pv.start(t))),a.update(p(p({},c),Pv.end(t))),l.update(p(p({},c),Pv.start(i))),d.update(p(p({},c),pv.sub(Pv.end(i),pv.from(d.handle.width/2,d.handle.height/2))))}updateText(e,t,i){this.text=this.updateNode(XW,this.text,!!e.text.label),QW(!1,t,i,e.text,e.strokeWidth,this.text,e.text.label)}getBackgroundPoints(e,t,i,n){const o=t.x1>t.x2,s=t.y1>t.y2,r=s?n.y2:n.y1,a=s?n.y1:n.y2,l=pv.from(t);return e.extendEnd&&t.y2===a&&l.push(pv.from(o?n.x1:n.x2,s?n.y1:n.y2)),e.extendEnd&&i.y2===r&&l.push(pv.from(o?n.x1:n.x2,s?n.y2:n.y1)),l.push(...pv.from(i).reverse()),e.extendStart&&i.y1===a&&l.push(pv.from(o?n.x2:n.x1,s?n.y1:n.y2)),e.extendStart&&t.y1===r&&l.push(pv.from(o?n.x2:n.x1,s?n.y2:n.y1)),l}},d_=class extends Vm{constructor(e){const t=t=>{let{point:i}=t;const n=new dj;n.set({start:i,end:i,startHeight:0,endHeight:0}),e.create(n)},i=t=>{let{offset:i,context:n}=t;const{datum:o,snapping:s}=this;o&&(o.set({end:hW(i,n,s,o.start,o.snapToAngle)}),e.update())},n=()=>{var t;null===(t=this.node)||void 0===t||t.toggleHandles({topRight:!0}),e.update()},o=t=>{let{point:i}=t;const{datum:n,node:o}=this,s=SH(null===n||void 0===n?void 0:n.end.y),r=SH(null===n||void 0===n?void 0:n.start.y),{y:a}=i;if(null==n||!nl(r)||!nl(s)||!nl(a))return;const l=s-(null!==a&&void 0!==a?a:0),d=2*(r-s)+l,c={x:n.start.x,y:r-l},u={x:n.end.x,y:i.y};null===o||void 0===o||o.toggleHandles(!0),e.validatePoint(c,{overflowContinuous:!0})&&e.validatePoint(u,{overflowContinuous:!0})&&(n.set({startHeight:d,endHeight:l}),e.recordAction("Create ".concat("disjoint-channel"," annotation")),e.showAnnotationOptions(),e.update())},s=()=>e.delete();super("start",{start:{click:{target:"waiting-first-render",action:t},drag:{target:"waiting-first-render",action:t},reset:Vm.parent},"waiting-first-render":{render:{target:"end",action:()=>{const{node:e}=this;null===e||void 0===e||e.toggleActive(!0),null===e||void 0===e||e.toggleHandles({topLeft:!0,topRight:!1,bottomLeft:!1,bottomRight:!1})}}},end:{hover:i,drag:i,click:{target:"height",action:n},dragEnd:{target:"height",action:n},reset:{target:Vm.parent,action:s},cancel:{target:Vm.parent,action:s}},height:{hover:t=>{let{point:i}=t;const{datum:n,node:o}=this,s=SH(null===n||void 0===n?void 0:n.end.y),r=SH(null===n||void 0===n?void 0:n.start.y),{y:a}=i;if(null==n||!nl(r)||!nl(s)||!nl(a))return;const l=s-(null!==a&&void 0!==a?a:0),d=2*(r-s)+l,c={x:null===n||void 0===n?void 0:n.start.x,y:r-d},u={x:null===n||void 0===n?void 0:n.end.x,y:i.y};null===o||void 0===o||o.toggleHandles({bottomLeft:!0,bottomRight:!0}),e.validatePoint(c,{overflowContinuous:!0})&&e.validatePoint(u,{overflowContinuous:!0})&&(n.set({startHeight:d,endHeight:l}),e.update())},click:{target:Vm.parent,action:o},drag:{target:Vm.parent,action:o},reset:{target:Vm.parent,action:s},cancel:{target:Vm.parent,action:s}}}),this.debug=Cr.create(!0,"annotations"),this.snapping=!1}};kV([Om()],d_.prototype,"datum",2),kV([Om()],d_.prototype,"node",2),kV([Om()],d_.prototype,"snapping",2);var c_={type:"disjoint-channel",datum:dj,scene:l_,isDatum:dj.is,translate:(e,t,i,n)=>{dj.is(t)&&l_.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(dj.is(t)&&dj.is(i)&&l_.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{dj.is(t)&&l_.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new d_(p(p({},e),{},{create:i("disjoint-channel")}))},dragState:e=>new Jj(e)},u_=[0,23.6,38.2,50,61.8,78.6,100],h_={10:[...u_,161.8,261.8,361.8,423.6],6:u_,4:u_.filter(e=>78.6!==e&&23.6!==e)};function p_(e,t,i,n){let{x1:o,y1:s,x2:r,y2:a}=e,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10;const d=s-a,c=i?-1:1;let u=n;const h=[];for(const[p,g]of h_[l].entries()){const e=n+d*(g/100)*c,i=t.yAxis.scaleInvert(e);h.push({id:p,x1:o,x2:r,y1:u,y2:e,tag:100==g?0:1,label:{x1:Math.min(o,r)-10,x2:r,y1:e,y2:e,text:"".concat((g/100).toFixed(3)," (").concat(i.toFixed(2),")")}}),u=e}return h}var g_=class extends cW{constructor(){super(),this.trendLine=new ZW,this.rangeFillsGroup=new uE.Group({name:"".concat(this.id,"-range-fills")}),this.rangeFillsGroupSelection=uE.Selection.select(this.rangeFillsGroup,uE.Range),this.rangeStrokesGroup=new uE.Group({name:"".concat(this.id,"-range-strokes")}),this.rangeStrokesGroupSelection=uE.Selection.select(this.rangeStrokesGroup,ZW),this.labelsGroup=new uE.Group({name:"".concat(this.id,"-ranges-labels")}),this.labelsGroupSelection=uE.Selection.select(this.labelsGroup,XW),this.anchor={x:0,y:0,position:"above"},this.append([this.trendLine,this.rangeFillsGroup,this.rangeStrokesGroup,this.labelsGroup])}update(e,t){var i;let n=wH(e,t);if(null==n)return void(this.visible=!1);if(n=Pv.round(n),this.visible=null===(i=e.visible)||void 0===i||i,!this.visible)return;this.updateLine(e,n,this.trendLine),this.updateHandles(e,n),this.updateAnchor(e,n,t);const{reverse:o}=e,s=this.extendLine(n,e,t),r=o?s.y1:s.y2,a=o?s.y2:s.y1,l=p_(s,t,e.reverse,r,e.bands);this.updateRanges(e,l,t);const d=p(p({},s),{},{y1:a,y2:a});this.updateText(e,d)}extendLine(e,t,i){let{x1:n,y1:o,x2:s,y2:r}=e;const a={x1:n,y1:o,x2:s,y2:r};if(!t.extendStart&&!t.extendEnd)return a;const{x:l,width:d}=i.xAxis.bounds;return t.extendEnd&&(a[n>s?"x1":"x2"]=l+d),t.extendStart&&(a[n>s?"x2":"x1"]=l),a}updateLine(e,t,i){if(!t||!i)return;const{lineDashOffset:n,strokeWidth:o,strokeOpacity:s,stroke:r}=e;i.setProperties(p(p({},t),{},{lineCap:e.getLineCap(),lineDash:[3,4],lineDashOffset:n,strokeWidth:o,strokeOpacity:s,fillOpacity:0,stroke:r}))}updateRangeStrokes(e){const{lineDashOffset:t,strokeWidth:i,strokeOpacity:n,strokes:o,rangeStroke:s,isMultiColor:r}=e;this.rangeStrokesGroupSelection.each((a,l,d)=>{let{x1:c,x2:u,y2:h,tag:p}=l;const g=h,m=r?o[d%o.length]:s;a.setProperties({x1:c,x2:u,y1:g,y2:g,stroke:m,strokeOpacity:n,strokeWidth:i,lineCap:e.getLineCap(),lineDash:e.getLineDash(),lineDashOffset:t,tag:p})})}updateRanges(e,t,i){const n=e=>e.id;this.rangeFillsGroupSelection.update(t,void 0,n),this.rangeStrokesGroupSelection.update(t,void 0,n),this.labelsGroupSelection.update(t,void 0,n),this.updateRangeFills(e),this.updateRangeStrokes(e),this.updateRangeLabels(e,i)}updateRangeFills(e){const{lineDashOffset:t,strokeWidth:i,strokeOpacity:n,strokes:o,rangeStroke:s,showFill:r,isMultiColor:a}=e;this.rangeFillsGroupSelection.each((l,d,c)=>{let{x1:u,x2:h,y1:p,y2:g}=d;const m=a?o[c%o.length]:s;r?l.setProperties({x1:u,x2:h,y1:p,y2:g,startLine:!1,endLine:!1,stroke:m,strokeOpacity:n,fill:m,fillOpacity:.15*(null!==n&&void 0!==n?n:1),strokeWidth:i,lineCap:e.getLineCap(),lineDash:e.getLineDash(),lineDashOffset:t,visible:!0}):l.visible=!1})}updateRangeLabels(e,t){let{xAxis:i}=t;const{rangeStrokesGroupSelection:n}=this,{strokes:o,strokeWidth:s,rangeStroke:r,isMultiColor:a,label:{fontFamily:d,fontSize:c,fontStyle:u,fontWeight:h,color:g}}=e,m={fontFamily:d,fontSize:c,fontStyle:u,fontWeight:h},f=this.checkWithinBounds(i,m,this.labelsGroupSelection.at(0));this.labelsGroupSelection.each((e,t,i)=>{const d=null!==g&&void 0!==g?g:a?o[i%o.length]:r,c=n.at(i);if(!c)return;const u=t.label,{text:h}=u,v=l(u,gV);if(f)e.setProperties(p(p({},m),{},{text:h,x:v.x1,y:v.y1,textBaseline:"middle",textAlign:"end",fill:d})),qW(e.id,c,v);else{const t=p(p({},m),{},{label:h,position:"center",alignment:"left",color:d});qW(e.id,c,v,t,e,h,s)}})}checkWithinBounds(e,t,i){if(!i)return!1;const n=i.datum.label,{text:o}=n,s=l(n,mV);i.setProperties(p(p({},t),{},{text:o,x:s.x1,y:s.y1,textBaseline:"middle",textAlign:"end"}));const{x:r}=i.getBBox();return r>=e.bounds.x&&r<=e.bounds.x+e.bounds.width}updateText(e,t){const i=this.rangeStrokesGroupSelection.selectByTag(0)[0];if(!i)return;const{text:n,strokeWidth:o}=e;this.text=this.updateNode(XW,this.text,!!n.label),qW(i.id,i,t,n,this.text,n.label,o)}updateAnchor(e,t,i,n){const o=Pv.topCenter(t);pv.apply(this.anchor,uE.Transformable.toCanvasPoint(this.trendLine,o.x,o.y))}containsPoint(e,t){const{trendLine:i,rangeStrokesGroupSelection:n,text:o}=this;let s=!1;return n.each(i=>s||(s=i.isPointInPath(e,t))),s||i.isPointInPath(e,t)||Boolean(null===o||void 0===o?void 0:o.containsPoint(e,t))}getNodeAtCoords(e,t){var i;return null!==(i=this.text)&&void 0!==i&&i.containsPoint(e,t)?"text":this.trendLine.isPointInPath(e,t)?"line":void 0}getHandleStyles(e){var t,i,n;return{fill:e.handle.fill,stroke:null!==(t=e.handle.stroke)&&void 0!==t?t:e.stroke,strokeOpacity:null!==(i=e.handle.strokeOpacity)&&void 0!==i?i:e.strokeOpacity,strokeWidth:null!==(n=e.handle.strokeWidth)&&void 0!==n?n:e.strokeWidth}}drag(e,t,i,n){e.isWriteable()&&(this.activeHandle?this.dragHandle(e,t,i,n):this.dragAll(e,t,i))}getAnchor(){return this.anchor}getCursor(){return"pointer"}},{ContinuousScale:m_}=uE;function f_(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{overflowContinuous:!1},n=arguments.length>3?arguments[3]:void 0;if(null==t.x||null==t.y)return n&&jr.warnOnce("".concat(n,"requires both an [x] and [y] property, ignoring.")),!1;const{xAxis:o,yAxis:s}=e,r=i.overflowContinuous&&m_.is(o.scale),a=i.overflowContinuous&&m_.is(s.scale),l=r||v_(t.x,o),d=a||v_(t.y,s);if(l&&d)return!0;if(n){let e="x & y domains";l&&(e="y domain"),d&&(e="x domain");const i=SH(t.x),o=SH(t.y);jr.warnOnce("".concat(n,"is outside the ").concat(e,", ignoring. - x: [").concat(i,"], y: ").concat(o,"]"))}return!1}function v_(e,t){const{domain:i}=t.scale,n=SH(e);return!i||null==n||!t.continuous||n>=i[0]&&n<=i.at(-1)}var y_=class extends g_{constructor(){super(),this.type="fibonacci-retracement-trend-based",this.endRetracementLine=new ZW,this.start=new dW,this.end=new dW,this.endRetracement=new dW,this.append([this.endRetracementLine,this.start,this.end,this.endRetracement])}static is(e){return cW.isCheck(e,"fibonacci-retracement-trend-based")}update(e,t){var i;let{coords1:n,coords2:o}=this.getCoords(e,t);if(null==n||null==o)return void(this.visible=!1);if(n=Pv.round(n),o=Pv.round(o),this.visible=null===(i=e.visible)||void 0===i||i,!this.visible)return;void 0!=e.endRetracement.x&&void 0!=e.endRetracement.y||(o=void 0),this.updateLine(e,n,this.trendLine),this.updateLine(e,o,this.endRetracementLine),this.updateHandles(e,n,o),this.updateAnchor(e,null!==o&&void 0!==o?o:n,t);const{reverse:s,bands:r}=e,a=function(e,t){const{x2:i,y1:n,y2:o}=e,s=n-o;return null==t?{x1:i,x2:i,y1:o-s,y2:o}:{x1:t.x1,x2:t.x2,y1:t.y2-s,y2:t.y2}}(n,o),l=this.extendLine(a,e,t),d=l.y2,c=l.y1,u=o?p_(l,t,s,d,r):[];this.updateRanges(e,u,t);const h=p(p({},l),{},{y1:c,y2:c});this.updateText(e,h)}containsPoint(e,t){const{start:i,end:n,endRetracement:o,endRetracementLine:s}=this;return this.activeHandle=void 0,i.containsPoint(e,t)?(this.activeHandle="start",!0):n.containsPoint(e,t)?(this.activeHandle="end",!0):o.containsPoint(e,t)?(this.activeHandle="endRetracement",!0):s.isPointInPath(e,t)||super.containsPoint(e,t)}getNodeAtCoords(e,t){return this.start.containsPoint(e,t)||this.end.containsPoint(e,t)||this.endRetracement.containsPoint(e,t)?"handle":this.endRetracementLine.isPointInPath(e,t)?"line":super.getNodeAtCoords(e,t)}dragStart(e,t,i){this.dragState=p({offset:t},gW({start:e.start,end:e.end,endRetracement:e.endRetracement},i))}stopDragging(){this.start.toggleDragging(!1),this.end.toggleDragging(!1),this.endRetracement.toggleDragging(!1)}dragAll(e,t,i){const{dragState:n}=this;n&&this.translatePoints({datum:e,start:n.start,end:n.end,endRetracement:n.endRetracement,translation:pv.sub(t,n.offset),context:i})}dragHandle(e,t,i,n){const{activeHandle:o,dragState:s}=this;if(!o||!s)return;this[o].toggleDragging(!0);const r=n?this.snapToAngle(e,t,i):DH(this[o].drag(t).point,i);r&&f_(i,r)&&(e[o].x=r.x,e[o].y=r.y)}snapToAngle(e,t,i){const{activeHandle:n}=this,o=["start","end","endRetracement"];if(!n)return;const s=(o.indexOf(n)+1)%o.length,r=o[s];this[n].toggleDragging(!0);return DH(pW(t,MH(e[r],i),e.snapToAngle),i)}translatePoints(e){let{datum:t,start:i,end:n,endRetracement:o,translation:s,context:r}=e;const a=mW({start:i,end:n,endRetracement:o},s,r,{overflowContinuous:2});t.start.x=a.start.x,t.end.x=a.end.x,t.endRetracement.x=a.endRetracement.x,t.start.y=a.start.y,t.end.y=a.end.y,t.endRetracement.y=a.endRetracement.y}translate(e,t,i){this.translatePoints({datum:e,start:MH(e.start,i),end:MH(e.end,i),endRetracement:MH(e.endRetracement,i),translation:t,context:i})}copy(e,t,i){const{coords1:n,coords2:o}=this.getCoords(e,i);if(!n||!o)return;const s=this.computeBBoxWithoutHandles();return this.translatePoints({datum:t,start:Pv.start(n),end:Pv.end(n),endRetracement:Pv.end(o),translation:{x:-s.width/2,y:-s.height/2},context:i}),t}getCoords(e,t){return{coords1:wH(e,t),coords2:wH({start:e.end,end:e.endRetracement},t)}}toggleHandles(e){if("boolean"===typeof e)this.start.visible=e,this.end.visible=e,this.endRetracement.visible=e;else for(const[t,i]of fu(e))this[t].visible=i;this.start.toggleHovered("start"===this.activeHandle),this.end.toggleHovered("end"===this.activeHandle),this.endRetracement.toggleHovered("endRetracement"===this.activeHandle)}toggleActive(e){this.toggleHandles(e),this.start.toggleActive(e),this.end.toggleActive(e),this.endRetracement.toggleActive(e)}updateHandles(e,t,i,n){var o,s,r;this.start.update(p(p({},this.getHandleStyles(e)),this.getHandleCoords(e,t,"start"))),this.end.update(p(p({},this.getHandleStyles(e)),this.getHandleCoords(e,t,"end",n))),i&&this.endRetracement.update(p(p({},this.getHandleStyles(e)),this.getHandleCoords(e,i,"endRetracement",n))),this.start.toggleLocked(null!==(o=e.locked)&&void 0!==o&&o),this.end.toggleLocked(null!==(s=e.locked)&&void 0!==s&&s),this.endRetracement.toggleLocked(null!==(r=e.locked)&&void 0!==r&&r)}getHandleCoords(e,t,i,n){return"start"===i?Pv.start(t):Pv.end(t)}},b_=class extends Vm{constructor(e){const t=t=>{let{point:i}=t;const n=this.createDatum();n.set({start:i,end:i}),e.create(n)},i=t=>{let{offset:i,context:n}=t;const{datum:o,snapping:s}=this;o&&(o.set({end:hW(i,n,s,o.start,o.snapToAngle)}),e.update())},n=()=>{var t;const{datum:i}=this;i&&(i.endRetracement.x=i.end.x,i.endRetracement.y=i.end.y,null===(t=this.node)||void 0===t||t.toggleHandles({end:!0}),e.update())},o=()=>{var t;null===(t=this.node)||void 0===t||t.toggleHandles({endRetracement:!0}),e.update()},s=()=>e.delete();super("start",{start:{click:{target:"waiting-first-render",action:t},drag:{target:"waiting-first-render",action:t},reset:Vm.parent},"waiting-first-render":{render:{target:"end",action:()=>{const{node:e}=this;null===e||void 0===e||e.toggleActive(!0),null===e||void 0===e||e.toggleHandles({start:!0,end:!1,endRetracement:!1})}}},end:{hover:i,click:{target:"endRetracement",action:n},drag:i,dragEnd:{target:"endRetracement",action:n},reset:{target:Vm.parent,action:s},cancel:{target:Vm.parent,action:s},onExit:()=>{var t;e.showAnnotationOptions(),e.recordAction("Create ".concat(null===(t=this.datum)||void 0===t?void 0:t.type," annotation"))}},endRetracement:{hover:t=>{let{offset:i,context:n}=t;const{datum:o,snapping:s}=this;o&&(o.set({endRetracement:hW(i,n,s,o.end,o.snapToAngle)}),e.update())},click:{target:Vm.parent,action:o},drag:{target:Vm.parent,action:o},reset:{target:Vm.parent,action:s},cancel:{target:Vm.parent,action:s}}}),this.debug=Cr.create(!0,"annotations"),this.snapping=!1}createDatum(){return new gj}};kV([Om()],b_.prototype,"datum",2),kV([Om()],b_.prototype,"node",2),kV([Om()],b_.prototype,"snapping",2);var x_={type:"fibonacci-retracement-trend-based",datum:gj,scene:y_,isDatum:gj.is,translate:(e,t,i,n)=>{gj.is(t)&&y_.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(gj.is(t)&&gj.is(i)&&y_.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{gj.is(t)&&y_.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new b_(p(p({},e),{},{create:i("fibonacci-retracement-trend-based")}))},dragState:e=>new Jj(e)},C_=class extends g_{constructor(){super(),this.type="fibonacci-retracement",this.start=new dW,this.end=new dW,this.append([this.start,this.end])}static is(e){return cW.isCheck(e,"fibonacci-retracement")}containsPoint(e,t){const{start:i,end:n}=this;return this.activeHandle=void 0,i.containsPoint(e,t)?(this.activeHandle="start",!0):n.containsPoint(e,t)?(this.activeHandle="end",!0):super.containsPoint(e,t)}getNodeAtCoords(e,t){return this.start.containsPoint(e,t)||this.end.containsPoint(e,t)?"handle":super.getNodeAtCoords(e,t)}dragStart(e,t,i){this.dragState=p({offset:t},gW({start:e.start,end:e.end},i))}stopDragging(){this.start.toggleDragging(!1),this.end.toggleDragging(!1)}dragAll(e,t,i){const{dragState:n}=this;n&&this.translatePoints({datum:e,start:n.start,end:n.end,translation:pv.sub(t,n.offset),context:i})}dragHandle(e,t,i,n){const{activeHandle:o,dragState:s}=this;if(!o||!s)return;this[o].toggleDragging(!0);const r=n?this.snapToAngle(e,t,i):DH(this[o].drag(t).point,i);r&&f_(i,r)&&(e[o].x=r.x,e[o].y=r.y)}snapToAngle(e,t,i){const{activeHandle:n}=this,o=["start","end"].find(e=>e!==n);if(!n||!o)return;this[n].toggleDragging(!0);return DH(pW(t,MH(e[o],i),e.snapToAngle),i)}translatePoints(e){let{datum:t,start:i,end:n,translation:o,context:s}=e;const r=mW({start:i,end:n},o,s,{overflowContinuous:1});t.start.x=r.start.x,t.end.x=r.end.x,t.start.y=r.start.y,t.end.y=r.end.y}translate(e,t,i){this.translatePoints({datum:e,start:MH(e.start,i),end:MH(e.end,i),translation:t,context:i})}copy(e,t,i){const n=wH(e,i);if(!n)return;const o=this.computeBBoxWithoutHandles();return this.translatePoints({datum:t,start:{x:n.x1,y:n.y1},end:{x:n.x2,y:n.y2},translation:{x:-o.width/2,y:-o.height/2},context:i}),t}toggleHandles(e){if("boolean"===typeof e)this.start.visible=e,this.end.visible=e;else for(const[t,i]of fu(e))this[t].visible=i;this.start.toggleHovered("start"===this.activeHandle),this.end.toggleHovered("end"===this.activeHandle)}toggleActive(e){this.toggleHandles(e),this.start.toggleActive(e),this.end.toggleActive(e)}updateHandles(e,t,i,n){var o,s;this.start.update(p(p({},this.getHandleStyles(e)),this.getHandleCoords(e,t,"start"))),this.end.update(p(p({},this.getHandleStyles(e)),this.getHandleCoords(e,t,"end",n))),this.start.toggleLocked(null!==(o=e.locked)&&void 0!==o&&o),this.end.toggleLocked(null!==(s=e.locked)&&void 0!==s&&s)}getHandleCoords(e,t,i,n){return"start"===i?Pv.start(t):Pv.end(t)}},S_=class extends Vm{constructor(e){const t=t=>{let{point:i}=t;const n=this.createDatum();n.set({start:i,end:i}),e.create(n)},i=t=>{let{offset:i,context:n}=t;const{datum:o,snapping:s}=this;o&&(o.set({end:hW(i,n,s,o.start,o.snapToAngle)}),e.update())},n=()=>{var t;null===(t=this.node)||void 0===t||t.toggleHandles({end:!0}),e.update()},o=()=>e.delete();super("start",{start:{click:{target:"waiting-first-render",action:t},drag:{target:"waiting-first-render",action:t},reset:Vm.parent},"waiting-first-render":{render:{target:"end",action:()=>{const{node:e}=this;null===e||void 0===e||e.toggleActive(!0),null===e||void 0===e||e.toggleHandles({start:!0,end:!1})}}},end:{hover:i,click:{target:Vm.parent,action:n},drag:i,dragEnd:{target:Vm.parent,action:n},reset:{target:Vm.parent,action:o},cancel:{target:Vm.parent,action:o},onExit:()=>{var t;e.showAnnotationOptions(),e.recordAction("Create ".concat(null===(t=this.datum)||void 0===t?void 0:t.type," annotation"))}}}),this.debug=Cr.create(!0,"annotations"),this.snapping=!1}};kV([Om()],S_.prototype,"datum",2),kV([Om()],S_.prototype,"node",2),kV([Om()],S_.prototype,"snapping",2);var w_=class extends S_{createDatum(){return new uj}},M_=class extends S_{createDatum(){return new hj}},k_=class extends S_{createDatum(){return new mj}},D_={type:"fibonacci-retracement",datum:mj,scene:C_,isDatum:mj.is,translate:(e,t,i,n)=>{mj.is(t)&&C_.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(mj.is(t)&&mj.is(i)&&C_.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{mj.is(t)&&C_.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new k_(p(p({},e),{},{create:i("fibonacci-retracement")}))},dragState:e=>new Jj(e)},I_=class extends uE.Group{},A_=class extends I_{constructor(){super(),this.type="arrow",this.path=new uE.Path,this.armLength=6,this.append([this.path])}update(e){var t;const{path:i}=this,{x:n,y:o,angle:s}=e,r=l(e,fV),a=pv.from(n,o),d=3*Math.PI/4,c=this.armLength+2*(null!==(t=e.strokeWidth)&&void 0!==t?t:0),u=pv.rotate(pv.from(0,c),s+d,a),h=pv.rotate(pv.from(c,0),s-d,a);i.setProperties(r),i.fillOpacity=0,i.path.clear(),i.path.moveTo(u.x,u.y),i.path.lineTo(a.x,a.y),i.path.lineTo(h.x,h.y)}},{Transformable:L_}=uE,N_=class extends TW{constructor(){super(),this.type="line",this.line=new ZW,this.append([this.line,this.start,this.end])}static is(e){return cW.isCheck(e,"line")}update(e,t){var i;let n=wH(e,t);null!=n?(n=Pv.round(n),this.visible=null===(i=e.visible)||void 0===i||i,this.visible&&(this.updateLine(e,n,t),this.updateHandles(e,n),this.updateText(e,n),this.updateCaps(e,n),this.updateAnchor(e,n,t))):this.visible=!1}updateLine(e,t,i){const{line:n}=this,{lineDashOffset:o,stroke:s,strokeWidth:r,strokeOpacity:a}=e,l=this.extendLine(t,e,i);n.setProperties(p(p({},l),{},{lineCap:e.getLineCap(),lineDash:e.getLineDash(),lineDashOffset:o,stroke:s,strokeWidth:r,strokeOpacity:a,fillOpacity:0}))}updateText(e,t){this.text=this.updateNode(XW,this.text,!!e.text.label),qW(this.line.id,this.line,t,e.text,this.text,e.text.label,e.strokeWidth)}updateCaps(e,t){if(!e.startCap&&this.startCap&&(this.startCap.remove(),this.startCap=void 0),!e.endCap&&this.endCap&&(this.endCap.remove(),this.endCap=void 0),!e.startCap&&!e.endCap)return;const{stroke:i,strokeWidth:n,strokeOpacity:o}=e,[s,r]=pv.from(t),a=pv.angle(pv.sub(r,s));e.startCap&&(this.startCap&&this.startCap.type!==e.startCap&&(this.startCap.remove(),this.startCap=void 0),null==this.startCap&&(this.startCap=new A_,this.append([this.startCap])),this.startCap.update({x:s.x,y:s.y,angle:a-Math.PI,stroke:i,strokeWidth:n,strokeOpacity:o})),e.endCap&&(this.endCap&&this.endCap.type!==e.endCap&&(this.endCap.remove(),this.endCap=void 0),null==this.endCap&&(this.endCap=new A_,this.append([this.endCap])),this.endCap.update({x:r.x,y:r.y,angle:a,stroke:i,strokeWidth:n,strokeOpacity:o}))}updateAnchor(e,t,i,n){const o=Pv.topCenter(t);pv.apply(this.anchor,L_.toCanvasPoint(this.line,o.x,o.y))}containsPoint(e,t){const{line:i,text:n}=this;return super.containsPoint(e,t)||i.isPointInPath(e,t)||Boolean(null===n||void 0===n?void 0:n.containsPoint(e,t))}getNodeAtCoords(e,t){var i;return null!==(i=this.text)&&void 0!==i&&i.containsPoint(e,t)?"text":this.line.isPointInPath(e,t)?"line":super.getNodeAtCoords(e,t)}getHandleCoords(e,t,i,n){const{startCap:o,endCap:s}=this;let[r,a]=pv.from(t);const l=pv.angle(pv.sub(a,r));return o&&(r=pv.rotate(pv.from(0,-dW.HANDLE_SIZE/2),l,r)),s&&(a=pv.rotate(pv.from(0,dW.HANDLE_SIZE/2),l,a)),"start"===i?r:a}getHandleStyles(e){var t,i,n;return{fill:e.handle.fill,stroke:null!==(t=e.handle.stroke)&&void 0!==t?t:e.stroke,strokeOpacity:null!==(i=e.handle.strokeOpacity)&&void 0!==i?i:e.strokeOpacity,strokeWidth:null!==(n=e.handle.strokeWidth)&&void 0!==n?n:e.strokeWidth}}},T_={type:"line",datum:hj,scene:N_,isDatum:hj.is,translate:(e,t,i,n)=>{hj.is(t)&&N_.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(hj.is(t)&&hj.is(i)&&N_.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{hj.is(t)&&N_.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new M_(p(p({},e),{},{create:i("line")}))},dragState:e=>new Jj(e)},R_={type:"arrow",datum:uj,scene:N_,isDatum:uj.is,translate:(e,t,i,n)=>{uj.is(t)&&N_.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(uj.is(t)&&uj.is(i)&&N_.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{uj.is(t)&&N_.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new w_(p(p({},e),{},{create:i("arrow")}))},dragState:e=>new Jj(e)};function E_(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(const n of e)if(Array.isArray(n)){for(const e of n)P_(e,i);i+=uE.Group.computeChildrenBBox(n).width+t}else P_(n,i),i+=n.getBBox().width+t}function P_(e,t){"x1"in e?(e.x2=t+(e.x2-e.x1),e.x1=t):e.x=t}function O_(e,t){"y1"in e?(e.y2=t+(e.y2-e.y1),e.y1=t):e.y=t}function F_(e,t){"x1"in e?(e.x1+=t,e.x2+=t):e.x+=t}function z_(e,t){"y1"in e?(e.y1+=t,e.y2+=t):e.y+=t}var B_=class extends uE.Group{constructor(){super(),this.name="MeasurerStatisticsScene",this.background=new uE.Rect,this.dateRangeBarsText=new uE.Text,this.dateRangeDivider=new uE.Line,this.dateRangeValueText=new uE.Text,this.priceRangeValueText=new uE.Text,this.priceRangeDivider=new uE.Line,this.priceRangePercentageText=new uE.Text,this.volumeText=new uE.Text,this.volumeFormatter=new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2}),this.append([this.background,this.dateRangeBarsText,this.dateRangeDivider,this.dateRangeValueText,this.priceRangeValueText,this.priceRangeDivider,this.priceRangePercentageText,this.volumeText])}update(e,t,i,n,o,s,r){this.verticalDirection=s;const a=this.updateStatistics(e,t,i,r),l=uE.Group.computeChildrenBBox(a.flat());l.grow(10),this.updateBackground(e,l,10),this.reposition(a,10,o),this.checkVisibility(e,o,n)}checkVisibility(e,t,i){var n;const o=Pv.from(t.seriesRect);this.visible=Pv.collides(i,o)&&(null===(n=e.visible)||void 0===n||n)}updateStatistics(e,t,i,n){const{dateRangeBarsText:o,dateRangeDivider:s,dateRangeValueText:r,priceRangeValueText:a,priceRangeDivider:l,priceRangePercentageText:d,volumeText:c}=this,u=e.statistics.fontSize+3,h=this.getTextStyles(e),g=p(p({},this.getDividerStyles(e)),{},{x1:0,y1:0,x2:0,y2:u}),m=[o,s,r],f=[a,l,d],v=[];return t.priceRange&&(a.setProperties(p(p({},h),{},{text:this.formatPriceRangeValue(t.priceRange.value,n)})),l.setProperties(g),d.setProperties(p(p({},h),{},{text:this.formatPriceRangePercentage(t.priceRange.percentage,n)})),E_(f,i.x,8),v.push(f)),t.dateRange&&(o.setProperties(p(p({},h),{},{text:this.formatDateRangeBars(t.dateRange.bars,n)})),s.setProperties(g),r.setProperties(p(p({},h),{},{text:this.formatDateRangeValue(t.dateRange.value)})),E_(m,i.x,8),v.push(m)),null==t.volume?c.visible=!1:(c.setProperties(p(p({},h),{},{x:i.x,text:this.formatVolume(t.volume,n),visible:!0})),v.push(c)),function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(const n of e)if(Array.isArray(n)){for(const e of n)O_(e,i);i+=uE.Group.computeChildrenBBox(n).height+t}else O_(n,i),i+=n.getBBox().height+t}(v,i.y,6),l.y1+=-2,l.y2+=-2,s.y1+=-2,s.y2+=-2,v}updateBackground(e,t,i){const n=this.getBackgroundStyles(e);this.background.setProperties(p(p(p({},n),t),{},{x:t.x-t.width/2+i,y:t.y}))}reposition(e,t,i){const{width:n,height:o}=i.seriesRect,s=Pv.from(this.background.getBBox());let r=0;s.x1<0&&(r=-s.x1),s.x2>n&&(r=n-s.x2);const a=Math.min(t,o-s.y2);for(const l of e)if(Array.isArray(l)){const e=uE.Group.computeChildrenBBox(l).width;for(const t of l)F_(t,r-e/2),z_(t,a)}else F_(l,r-l.getBBox().width/2),z_(l,a);this.background.x+=r,this.background.y+=a}getTextStyles(e){return{fill:e.statistics.color,fontFamily:e.statistics.fontFamily,fontSize:e.statistics.fontSize,fontStyle:e.statistics.fontStyle,fontWeight:e.statistics.fontWeight,textBaseline:"top"}}getDividerStyles(e){return{stroke:e.statistics.divider.stroke,strokeOpacity:e.statistics.divider.strokeOpacity,strokeWidth:e.statistics.divider.strokeWidth}}getBackgroundStyles(e){return{fill:e.statistics.fill,stroke:e.statistics.stroke,strokeOpacity:e.statistics.strokeOpacity,strokeWidth:e.statistics.strokeWidth,cornerRadius:4}}formatDateRangeBars(e,t){var i;return null!==(i=null===t||void 0===t?void 0:t.t("measurerDateRangeBars",{value:e}))&&void 0!==i?i:"".concat(e)}formatDateRangeValue(e){const t=[],i=e>=0?"":"-";e=Math.abs(e);const n=6e4,o=36e5,s=24*o,r=Math.floor(e/n),a=Math.floor(e/o),l=Math.floor(e/s),d=a%24,c=r%60;return l>=1&&t.push("".concat(l,"d")),a>=1&&(e<s||0!==d)&&t.push("".concat(d,"h")),(e<o||0!==c)&&t.push("".concat(c,"m")),t[0]="".concat(i).concat(t[0]),t.join(" ")}formatPriceRangeValue(e,t){var i;return null!==(i=null===t||void 0===t?void 0:t.t("measurerPriceRangeValue",{value:Number(e.toFixed(2))}))&&void 0!==i?i:"".concat(e)}formatPriceRangePercentage(e,t){var i;return null!==(i=null===t||void 0===t?void 0:t.t("measurerPriceRangePercent",{value:e}))&&void 0!==i?i:"".concat(e)}formatVolume(e,t){var i;const n=Number.isNaN(e)?"":this.volumeFormatter.format(e);return null!==(i=null===t||void 0===t?void 0:t.t("measurerVolume",{value:n}))&&void 0!==i?i:n}},V_=class extends B_{getDirectionStyles(e){return"down"===this.verticalDirection?e.down.statistics:e.up.statistics}getTextStyles(e){const t=this.getDirectionStyles(e);return p(p({},super.getTextStyles(e)),{},{fill:t.color,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight})}getDividerStyles(e){const t=this.getDirectionStyles(e);return{stroke:t.divider.stroke,strokeOpacity:t.divider.strokeOpacity,strokeWidth:t.divider.strokeWidth}}getBackgroundStyles(e){const t=this.getDirectionStyles(e);return p(p({},super.getBackgroundStyles(e)),{},{fill:t.fill,stroke:t.stroke,strokeOpacity:t.strokeOpacity,strokeWidth:t.strokeWidth})}},G_=class extends TW{constructor(){super(),this.type="measurer",this.horizontalLine=new ZW,this.verticalLine=new ZW,this.horizontalStartLine=new ZW,this.horizontalEndLine=new ZW,this.verticalStartLine=new ZW,this.verticalEndLine=new ZW,this.horizontalEndCap=new A_,this.verticalEndCap=new A_,this.background=new uE.Path({zIndex:-1}),this.updateBackground=r_.updateBackground.bind(this),this.statistics=this.createStatisticsScene(),this.statistics.zIndex=1,this.append([this.background,this.verticalStartLine,this.verticalEndLine,this.horizontalStartLine,this.horizontalEndLine,this.horizontalLine,this.verticalLine,this.horizontalEndCap,this.verticalEndCap,this.start,this.end,this.statistics])}static is(e){return cW.isCheck(e,"measurer")}createStatisticsScene(){return new B_}update(e,t){var i;const n=wH(e,t);if(null==n)return void(this.visible=!1);if(this.visible=null===(i=e.visible)||void 0===i||i,!this.visible)return;const o=this.extendPerpendicular(n,e,t),s=p(p({},o),{},{y2:o.y1}),r=p(p({},o),{},{y1:o.y2});this.verticalDirection=n.y1<n.y2?"down":"up",this.updateVisibilities(e),this.updateLines(e,n),this.updateHandles(e,n),this.updateText(e,n),this.updateCaps(e,n),this.updateBoundingLines(e,o),this.updateBackground(e,s,r,t),this.updateStatistics(e,n,t),this.updateAnchor(e,n,t)}extendPerpendicular(e,t,i){const n={x1:Math.min(e.x1,e.x2),x2:Math.max(e.x1,e.x2),y1:Math.min(e.y1,e.y2),y2:Math.max(e.y1,e.y2)},[o,s]=pv.from(i.yAxis.bounds);return $H.is(t)?(t.extendAbove&&(n.y1=o.y),t.extendBelow&&(n.y2=s.y)):ZH.is(t)&&(t.extendLeft&&(n.x1=o.x),t.extendRight&&(n.x2=s.x)),n}updateVisibilities(e){const{horizontalStartLine:t,horizontalEndLine:i,horizontalEndCap:n,verticalStartLine:o,verticalEndLine:s,verticalEndCap:r}=this,{direction:a}=e;o.visible="vertical"!==a,s.visible="vertical"!==a,n.visible="vertical"!==a,t.visible="horizontal"!==a,i.visible="horizontal"!==a,r.visible="horizontal"!==a}updateLines(e,t){const{horizontalLine:i,verticalLine:n}=this,{direction:o}=e,{x1:s,y1:r,x2:a,y2:l}=t,d=pv.round(Pv.center(t),0),c=this.getLineStyles(e);"vertical"!==o&&i.setProperties(p(p({},c),{},{x1:s,x2:a,y1:d.y,y2:d.y})),"horizontal"!==o&&n.setProperties(p(p({},c),{},{x1:d.x,x2:d.x,y1:r,y2:l}))}updateText(e,t){const{direction:i}=e,n=pv.round(Pv.center(t),0);let o;const s=p({},t);"vertical"===i?(o=this.verticalLine,s.x1=n.x,s.x2=n.x):(o=this.horizontalLine,s.y1=n.y,s.y2=n.y),this.text=this.updateNode(XW,this.text,!!e.text.label);const{id:r}=o,a=qW(r,o,s,e.text,this.text,e.text.label,e.strokeWidth);let l;if("both"===i&&a&&this.text){const e=Pv.from(this.text.getBBox()),{offset:t}=a.numbers;e.x1<=n.x+t.x&&e.x2>=n.x-t.x&&(l={x:n.x,y:a.clipMask.y,radius:this.text.getBBox().height/2+pv.length(t)})}this.verticalLine.setClipMask(r,l)}updateCaps(e,t){const{horizontalEndCap:i,verticalEndCap:n}=this,{direction:o}=e,{x1:s,y1:r,x2:a,y2:l}=t,d=pv.round(Pv.center(t),0),{stroke:c,strokeWidth:u,strokeOpacity:h}=this.getLineStyles(e),g={stroke:c,strokeWidth:u,strokeOpacity:h};if("vertical"!==o){const e=s<=a?0:Math.PI;let t=a;"horizontal"===o&&(t+=s<=a?-2:2),i.update(p(p({},g),{},{x:t,y:d.y,angle:e}))}if("horizontal"!==o){const e=r<=l?Math.PI/2:Math.PI/-2;let t=l;"vertical"===o&&(t+=r<=l?-2:2),n.update(p(p({},g),{},{x:d.x,y:t,angle:e}))}}updateBoundingLines(e,t){const{verticalStartLine:i,verticalEndLine:n,horizontalStartLine:o,horizontalEndLine:s}=this,{direction:r}=e,{x1:a,y1:l,x2:d,y2:c}=t,u=this.getLineStyles(e);"horizontal"===r&&(i.setProperties(p(p({},u),{},{x1:a,y1:l,x2:a,y2:c})),n.setProperties(p(p({},u),{},{x1:d,y1:l,x2:d,y2:c}))),"vertical"===r&&(o.setProperties(p(p({},u),{},{x1:a,y1:l,x2:d,y2:l})),s.setProperties(p(p({},u),{},{x1:a,y1:c,x2:d,y2:c})))}updateStatistics(e,t,i){const n=pv.add(Pv.bottomCenter(t),pv.from(0,10)),o={volume:this.getVolume(e)};e.hasPriceRange&&(o.priceRange={percentage:this.getPriceRangePercentage(e),value:this.getPriceRangeValue(e)}),e.hasDateRange&&(o.dateRange={bars:this.getDateRangeBars(t,i),value:this.getDateRangeValue(e)}),this.statistics.update(e,o,n,t,i,this.verticalDirection,e.localeManager)}updateAnchor(e,t,i,n){const o=Pv.topCenter(t);pv.apply(this.anchor,uE.Transformable.toCanvasPoint(this.horizontalLine,o.x,o.y))}getBackgroundPoints(e,t,i,n){const[o,s]=pv.from(t),[r,a]=pv.from(i);return[o,s,a,r]}getLineStyles(e){const{lineDashOffset:t,stroke:i,strokeWidth:n,strokeOpacity:o}=e;return{lineCap:e.getLineCap(),lineDash:e.getLineDash(),lineDashOffset:t,stroke:i,strokeWidth:n,strokeOpacity:o,fillOpacity:0}}getBackgroundStyles(e){const{background:t}=e;return{fill:t.fill,fillOpacity:t.fillOpacity}}getHandleStyles(e){var t,i,n;return{fill:e.handle.fill,stroke:null!==(t=e.handle.stroke)&&void 0!==t?t:e.stroke,strokeOpacity:null!==(i=e.handle.strokeOpacity)&&void 0!==i?i:e.strokeOpacity,strokeWidth:null!==(n=e.handle.strokeWidth)&&void 0!==n?n:e.strokeWidth}}containsPoint(e,t){const{horizontalLine:i,text:n,verticalLine:o,horizontalStartLine:s,horizontalEndLine:r,verticalStartLine:a,verticalEndLine:l}=this;return super.containsPoint(e,t)||i.isPointInPath(e,t)||o.isPointInPath(e,t)||s.visible&&s.isPointInPath(e,t)||r.visible&&r.isPointInPath(e,t)||a.visible&&a.isPointInPath(e,t)||l.visible&&l.isPointInPath(e,t)||Boolean(null===n||void 0===n?void 0:n.containsPoint(e,t))}getNodeAtCoords(e,t){var i;return null!==(i=this.text)&&void 0!==i&&i.containsPoint(e,t)?"text":this.start.containsPoint(e,t)||this.end.containsPoint(e,t)?"handle":"line"}getDateRangeBars(e,t){const{step:i}=t.xAxis.scale,n=e.x1<=e.x2?1:-1;return i?Math.round(Pv.width(e)/i)*n:0}getDateRangeValue(e){const t=SH(e.start.x),i=SH(e.end.x);if(!$a(t)||!$a(i))throw new Error("Can not create a date range measurement of non-date x-axis.");return i.getTime()-t.getTime()}getPriceRangePercentage(e){if(null==e.start.y||null==e.end.y)throw new Error("Can not create a price range measurement of a non-numeric y-axis");const t=SH(e.end.y),i=SH(e.start.y);if(!nl(t)||!nl(i))throw new Error("Can not create a price range measurement of a non-numeric y-axis");return(t-i)/i}getPriceRangeValue(e){if(null==e.start.y||null==e.end.y)throw new Error("Can not create a price range measurement of a non-numeric y-axis");const t=SH(e.end.y),i=SH(e.start.y);if(!nl(t)||!nl(i))throw new Error("Can not create a price range measurement of a non-numeric y-axis");return t-i}getVolume(e){return e.getVolume(e.start.x,e.end.x)}},H_=class extends G_{constructor(){super(...arguments),this.type="quick-measurer"}static is(e){return cW.isCheck(e,"quick-measurer")}createStatisticsScene(){return new V_}getDirectionStyles(e){return"down"===this.verticalDirection?e.down:e.up}getLineStyles(e){const t=this.getDirectionStyles(e);return p(p({},super.getLineStyles(e)),{},{stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity})}getBackgroundStyles(e){const t=this.getDirectionStyles(e);return{fill:t.fill,fillOpacity:t.fillOpacity}}getHandleStyles(e){var t,i,n;const o=this.getDirectionStyles(e);return{fill:o.handle.fill,stroke:null!==(t=o.handle.stroke)&&void 0!==t?t:o.stroke,strokeOpacity:null!==(i=o.handle.strokeOpacity)&&void 0!==i?i:o.strokeOpacity,strokeWidth:null!==(n=o.handle.strokeWidth)&&void 0!==n?n:o.strokeWidth}}},j_=class extends Vm{constructor(e){const t=t=>{let{point:i}=t;const n=this.createDatum();n.set({start:i,end:i}),e.create(n)},i=t=>{let{point:i}=t;const{datum:n,node:o}=this;null===n||void 0===n||n.set({end:i}),null===o||void 0===o||o.toggleActive(!0),null===o||void 0===o||o.toggleHandles({end:!1}),e.update()},n=()=>{var e;null===(e=this.node)||void 0===e||e.toggleHandles({end:!0})},o=()=>e.delete();super("start",{start:{reset:Vm.parent,click:{target:"end",action:t},drag:{target:"end",action:t}},end:{hover:i,drag:i,click:{target:Vm.parent,action:n},dragEnd:{target:Vm.parent,action:n},reset:{target:Vm.parent,action:o},cancel:{target:Vm.parent,action:o},onExit:()=>{var t;e.showAnnotationOptions(),e.recordAction("Create ".concat(null===(t=this.node)||void 0===t?void 0:t.type," annotation"))}}}),this.debug=Cr.create(!0,"annotations")}};kV([Om()],j_.prototype,"datum",2),kV([Om()],j_.prototype,"node",2);var W_=class extends j_{createDatum(){return new $H}},__=class extends j_{createDatum(){return new ZH}},K_=class extends j_{createDatum(){return new XH}},U_=class extends j_{createDatum(){return new qH}},Y_={type:"date-range",datum:$H,scene:G_,isDatum:$H.is,translate:(e,t,i,n)=>{$H.is(t)&&G_.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if($H.is(t)&&$H.is(i)&&G_.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{$H.is(t)&&G_.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new W_(p(p({},e),{},{create:i("date-range")}))},dragState:e=>new Jj(e)},$_={type:"price-range",datum:ZH,scene:G_,isDatum:ZH.is,translate:(e,t,i,n)=>{ZH.is(t)&&G_.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(ZH.is(t)&&ZH.is(i)&&G_.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{ZH.is(t)&&G_.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new __(p(p({},e),{},{create:i("date-range")}))},dragState:e=>new Jj(e)},Z_={type:"date-price-range",datum:XH,scene:G_,isDatum:XH.is,translate:(e,t,i,n)=>{XH.is(t)&&G_.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(XH.is(t)&&XH.is(i)&&G_.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{XH.is(t)&&G_.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new K_(p(p({},e),{},{create:i("date-range")}))},dragState:e=>new Jj(e)},X_={type:"quick-date-price-range",datum:qH,scene:H_,isDatum:qH.is,translate:(e,t,i,n)=>{qH.is(t)&&H_.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(qH.is(t)&&qH.is(i)&&H_.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{qH.is(t)&&H_.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new U_(p(p({},e),{},{create:i("quick-date-price-range")}))},dragState:e=>new Jj(e)},q_=class extends HW{constructor(){super(),this.type="note",this.shape=new uE.Rect,this.iconBackground=new uE.TranslatableSvgPath("M22 1.83333C22 0.820811 21.1792 0 20.1667 0H1.83333C0.820811 0 0 0.82081 0 1.83333V13.9868C0 14.9994 0.820811 15.8202 1.83333 15.8202L5.88971 15.8202C6.44575 15.8202 6.97175 16.0725 7.31971 16.5062L9.57006 19.3112C10.304 20.2259 11.6962 20.2259 12.4301 19.3112L14.6804 16.5062C15.0284 16.0725 15.5544 15.8202 16.1104 15.8202L20.1667 15.8202C21.1792 15.8202 22 14.9994 22 13.9868V1.83333Z"),this.iconLines=new uE.TranslatableSvgPath("M17.1114 5.75C17.1114 6.16421 16.7756 6.5 16.3614 6.5H5.63916C5.22495 6.5 4.88916 6.16421 4.88916 5.75V5.75C4.88916 5.33579 5.22495 5 5.63916 5H16.3614C16.7756 5 17.1114 5.33579 17.1114 5.75V5.75ZM17.1114 9.25C17.1114 9.66421 16.7756 10 16.3614 10H5.63916C5.22495 10 4.88916 9.66421 4.88916 9.25V9.25C4.88916 8.83579 5.22495 8.5 5.63916 8.5H16.3614C16.7756 8.5 17.1114 8.83579 17.1114 9.25V9.25Z"),this.active=!1,this.shape.visible=!1,this.label.visible=!1,this.iconBackground.fillShadow=new uE.DropShadow,this.append([this.shape,this.label,this.iconBackground,this.iconLines,this.handle])}static is(e){return cW.isCheck(e,"note")}update(e,t){this.updateIcon(e,t),super.update(e,t)}getTextBBox(e,t,i){const n=super.getTextBBox(e,t,i);n.x-=e.width/2,n.x=za(0,n.x,i.seriesRect.width-e.width);const o=e.getPadding().top,s=n.y-30-2*o,r=n.y+dW.HANDLE_SIZE+2*o;return s-n.height-34<0?(n.y=r,e.position="top"):(n.y=s+o,e.position="bottom"),n}updateLabel(e,t){const i=!1!==e.visible&&this.label.visible;super.updateLabel(e,t),this.label.visible=i,this.label.text=Ym(e.text,{maxWidth:200,font:e,textWrap:"always",avoidOrphans:!1})}updateShape(e,t){var i,n,o;const{shape:s}=this;s.fill=e.background.fill,s.fillOpacity=null!==(i=e.background.fillOpacity)&&void 0!==i?i:1,s.stroke=e.background.stroke,s.strokeOpacity=null!==(n=e.background.strokeOpacity)&&void 0!==n?n:1,s.strokeWidth=null!==(o=e.background.strokeWidth)&&void 0!==o?o:1,s.cornerRadius=4;const r=e.getPadding().top,a="top"===e.position;s.x=t.x-r,s.width=e.width+2*r,s.height=t.height+2*r,s.y=t.y+(a?0:-t.height)-r}updateIcon(e,t){var i,n,o;const{active:s,iconBackground:r,iconLines:a}=this,{x:l,y:d}=MH(e,t);var c;(r.translationX=l-11,r.translationY=d-20,a.translationX=r.translationX,a.translationY=r.translationY,r.fill=e.fill,r.fillOpacity=null!==(i=e.fillOpacity)&&void 0!==i?i:1,r.stroke=e.stroke,r.strokeOpacity=null!==(n=e.strokeOpacity)&&void 0!==n?n:1,r.strokeWidth=null!==(o=e.strokeWidth)&&void 0!==o?o:1,a.fill=e.stroke,s)?r.fillShadow.color=null!==(c=e.fill)&&void 0!==c?c:"rgba(0, 0, 0, 0.22)":r.fillShadow.color="rgba(0, 0, 0, 0.22)"}updateAnchor(e,t,i){const n=e.getPadding().top,o="top"===e.position,s=o?1:-1;return{x:t.x+i.seriesRect.x+e.width/2,y:t.y+i.seriesRect.y+s*(t.height+n),position:o?"below":"above"}}getLabelCoords(e,t){const i="top"===e.position,n=e.getPadding().top+Vl(e.fontSize,JH)/2;return{x:t.x,y:t.y+(i?n/2:0)}}getTextBaseline(e){return"top"===e.position?"middle":e.position}getHandleCoords(e,t,i){return{x:t.x,y:t.y+dW.HANDLE_SIZE/2+4}}getHandleStyles(e){var t;return{fill:e.handle.fill,stroke:null!==(t=e.handle.stroke)&&void 0!==t?t:e.fill,strokeOpacity:e.handle.strokeOpacity,strokeWidth:e.handle.strokeWidth}}toggleHovered(e,t,i){super.toggleHovered(e,t,i);const n=e||t&&!i;this.label.visible=n,this.shape.visible=n,this.zIndex=n?bp.CHART_ANNOTATION_FOCUSED:bp.CHART_ANNOTATION}toggleActive(e){super.toggleActive(e),this.label.visible=e,this.shape.visible=e,this.active=e}containsPoint(e,t){return!(!this.shape.visible||!this.shape.containsPoint(e,t))||(!!this.iconBackground.containsPoint(e,t)||super.containsPoint(e,t))}},Q_=class extends _W{createDatum(){return new oj}},J_={type:"note",datum:oj,scene:q_,isDatum:oj.is,translate:(e,t,i,n)=>{oj.is(t)&&q_.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(oj.is(t)&&oj.is(i)&&q_.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{oj.is(t)&&q_.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new Q_(p(p({},e),{},{create:i("note")}))},dragState:e=>new Jj(e)},eK=class extends a_{constructor(){super(),this.type="parallel-channel",this.handles={topLeft:new dW,topMiddle:new aW,topRight:new dW,bottomLeft:new dW,bottomMiddle:new aW,bottomRight:new dW},this.middleLine=new ZW,this.append([this.background,this.topLine,this.middleLine,this.bottomLine,...Object.values(this.handles)])}static is(e){return cW.isCheck(e,"parallel-channel")}dragHandle(e,t,i,n){const{activeHandle:o,handles:s}=this;if(null==o)return;const{offset:r}=s[o].drag(t);s[o].toggleDragging(!0),"topMiddle"!==o&&"bottomMiddle"!==o||(r.x=0);let a=[],l=n;switch(o){case"topLeft":case"bottomLeft":a=["topLeft","bottomLeft"];break;case"topMiddle":a=["topLeft","topRight"],r.y-=aW.HANDLE_SIZE/2,l=!1;break;case"topRight":case"bottomRight":a=["topRight","bottomRight"];break;case"bottomMiddle":a=["bottomLeft","bottomRight"],r.y-=aW.HANDLE_SIZE/2,l=!1}const d=wH(e,i),c=wH(e.bottom,i);if(!d||!c)return;const u={topLeft:Pv.start(d),topRight:Pv.end(d),bottomLeft:Pv.start(c),bottomRight:Pv.end(c)},h={vectors:{topLeft:u.topRight,bottomLeft:u.bottomRight,topRight:u.topLeft,bottomRight:u.bottomLeft},angle:e.snapToAngle},p=mW(u,r,i,{overflowContinuous:this.overflowContinuous,translateVectors:a,snap:l?h:void 0});e.start.x=p.topLeft.x,e.start.y=p.topLeft.y,e.end.x=p.topRight.x,e.end.y=p.topRight.y,e.height=p.topLeft.y-p.bottomLeft.y}getTranslatePointsVectors(e,t){const{bottomLeft:i,topLeft:n}=this.handles,o=i.getBBox().y-n.getBBox().y;return{start:e,end:t,bottomStart:pv.add(e,pv.from(0,o)),bottomEnd:pv.add(t,pv.from(0,o))}}containsPoint(e,t){return super.containsPoint(e,t)||this.middleLine.visible&&this.middleLine.strokeWidth>0&&this.middleLine.containsPoint(e,t)}getNodeAtCoords(e,t){return this.middleLine.visible&&this.middleLine.strokeWidth>0&&this.middleLine.containsPoint(e,t)?"line":super.getNodeAtCoords(e,t)}updateLines(e,t,i,n,o,s){var r,a,l,d,c,u;const{topLine:h,middleLine:g,bottomLine:m}=this,{lineDashOffset:f,stroke:v,strokeOpacity:y,strokeWidth:b}=e,x=e.getLineDash(),C={lineCap:e.getLineCap(),lineDash:x,lineDashOffset:f,stroke:v,strokeOpacity:y,strokeWidth:b};h.setProperties(p(p({},t),C)),m.setProperties(p(p({},i),C));const S=this.extendLine({x1:o.x1,y1:s.y1+(o.y1-s.y1)/2,x2:o.x2,y2:s.y2+(o.y2-s.y2)/2},e,n);g.setProperties(p(p({},S),{},{lineDash:null!==(r=e.middle.lineDash)&&void 0!==r?r:x,lineDashOffset:null!==(a=e.middle.lineDashOffset)&&void 0!==a?a:f,stroke:null!==(l=e.middle.stroke)&&void 0!==l?l:v,strokeOpacity:null!==(d=e.middle.strokeOpacity)&&void 0!==d?d:y,strokeWidth:null!==(c=e.middle.strokeWidth)&&void 0!==c?c:b,visible:null===(u=e.middle.visible)||void 0===u||u}))}updateHandles(e,t,i){var n,o,s;const{handles:{topLeft:r,topMiddle:a,topRight:l,bottomLeft:d,bottomMiddle:c,bottomRight:u}}=this,h={fill:e.handle.fill,stroke:null!==(n=e.handle.stroke)&&void 0!==n?n:e.stroke,strokeOpacity:null!==(o=e.handle.strokeOpacity)&&void 0!==o?o:e.strokeOpacity,strokeWidth:null!==(s=e.handle.strokeWidth)&&void 0!==s?s:e.strokeWidth};r.update(p(p({},h),Pv.start(t))),l.update(p(p({},h),Pv.end(t))),d.update(p(p({},h),Pv.start(i))),u.update(p(p({},h),Pv.end(i))),a.update(p(p({},h),pv.sub(Pv.center(t),pv.from(a.handle.width/2,a.handle.height/2)))),c.update(p(p({},h),pv.sub(Pv.center(i),pv.from(c.handle.width/2,c.handle.height/2))))}updateText(e,t,i){this.text=this.updateNode(XW,this.text,!!e.text.label),QW(!0,t,i,e.text,e.strokeWidth,this.text,e.text.label)}getBackgroundPoints(e,t,i,n){const o=t.x1>t.x2,s=t.y1>t.y2,r=t.x1!==i.x1&&t.y1!==i.y1,a=t.x2!==i.x2&&t.y2!==i.y2,l=pv.from(t);return e.extendEnd&&a&&l.push(pv.from(o?n.x1:n.x2,s?n.y1:n.y2)),l.push(...pv.from(i).reverse()),e.extendStart&&r&&l.push(pv.from(o?n.x2:n.x1,s?n.y2:n.y1)),l}},tK=class extends Vm{constructor(e){const t=t=>{let{point:i}=t;const n=new fj;n.set({start:i,end:i,height:0}),e.create(n)},i=t=>{let{offset:i,context:n}=t;const{datum:o,snapping:s}=this;o&&(o.set({end:hW(i,n,s,o.start,o.snapToAngle)}),e.update())},n=()=>{var t;null===(t=this.node)||void 0===t||t.toggleHandles({topRight:!0}),e.update()},o=t=>{let{point:i}=t;const{datum:n,node:o}=this,s=SH(null===n||void 0===n?void 0:n.end.y),r=SH(null===n||void 0===n?void 0:n.start.y),{y:a}=i;if(null==n||!nl(r)||!nl(s)||!nl(a))return;const l=s-(null!==a&&void 0!==a?a:0),d=r-l;null===o||void 0===o||o.toggleHandles(!0),e.validatePoint({x:n.start.x,y:d},{overflowContinuous:!0})&&e.validatePoint({x:n.end.x,y:i.y},{overflowContinuous:!0})&&(n.set({height:l}),e.recordAction("Create ".concat("parallel-channel"," annotation")),e.showAnnotationOptions(),e.update())},s=()=>e.delete();super("start",{start:{click:{target:"waiting-first-render",action:t},drag:{target:"waiting-first-render",action:t},reset:Vm.parent},"waiting-first-render":{render:{target:"end",action:()=>{const{node:e}=this;null===e||void 0===e||e.toggleActive(!0),null===e||void 0===e||e.toggleHandles({topLeft:!0,topMiddle:!1,topRight:!1,bottomLeft:!1,bottomMiddle:!1,bottomRight:!1})}}},end:{hover:i,drag:i,click:{target:"height",action:n},dragEnd:{target:"height",action:n},reset:{target:Vm.parent,action:s},cancel:{target:Vm.parent,action:s}},height:{hover:t=>{let{point:i}=t;const{datum:n,node:o}=this,s=SH(null===n||void 0===n?void 0:n.end.y),r=SH(null===n||void 0===n?void 0:n.start.y),{y:a}=i;if(null==n||!nl(r)||!nl(s)||!nl(a))return;const l=s-(null!==a&&void 0!==a?a:0),d=r-l;null===o||void 0===o||o.toggleHandles({bottomLeft:!0,bottomRight:!0}),e.validatePoint({x:n.start.x,y:d},{overflowContinuous:!0})&&e.validatePoint({x:n.end.x,y:i.y},{overflowContinuous:!0})&&(n.set({height:l}),e.update())},click:{target:Vm.parent,action:o},drag:{target:Vm.parent,action:o},reset:{target:Vm.parent,action:s},cancel:{target:Vm.parent,action:s}}}),this.debug=Cr.create(!0,"annotations"),this.snapping=!1}};kV([Om()],tK.prototype,"datum",2),kV([Om()],tK.prototype,"node",2),kV([Om()],tK.prototype,"snapping",2);var iK={type:"parallel-channel",datum:fj,scene:eK,isDatum:fj.is,translate:(e,t,i,n)=>{fj.is(t)&&eK.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(fj.is(t)&&fj.is(i)&&eK.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{fj.is(t)&&eK.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new tK(p(p({},e),{},{create:i("parallel-channel")}))},dragState:e=>new Jj(e)},nK=class extends HW{constructor(){super(),this.type="text",this.append([this.label,this.handle])}static is(e){return cW.isCheck(e,"text")}getHandleCoords(e,t){const i=dW.HANDLE_SIZE/2;return{x:t.x+i,y:t.y+2+i}}},oK=class extends _W{createDatum(){return new vj}},sK={type:"text",datum:vj,scene:nK,isDatum:vj.is,translate:(e,t,i,n)=>{vj.is(t)&&nK.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(vj.is(t)&&vj.is(i)&&nK.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{vj.is(t)&&nK.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new oK(p(p({},e),{},{create:i("text")}))},dragState:e=>new Jj(e)},rK={[T_.type]:T_,[o_.type]:o_,[s_.type]:s_,[iK.type]:iK,[c_.type]:c_,[D_.type]:D_,[x_.type]:x_,[GW.type]:GW,[UW.type]:UW,[J_.type]:J_,[sK.type]:sK,[R_.type]:R_,[LW.type]:LW,[DW.type]:DW,[Y_.type]:Y_,[$_.type]:$_,[Z_.type]:Z_,[X_.type]:X_};function aK(e){for(const{isDatum:t}of Object.values(rK))if(t(e))return e}var lK=class extends Gm{constructor(e){super(new dK(e=>{this.snapping=e}),new cK(()=>{this.node=null==this.active?void 0:e.node(this.active)}),new uK(e,t=>{this.active=t,this.datum=null==this.active?void 0:e.datum(this.active),this.node=null==this.active?void 0:e.node(this.active)})),this.snapping=!1}getActive(){return this.active}isActive(e){return e===this.active}};kV([Om()],lK.prototype,"snapping",2),kV([Om()],lK.prototype,"datum",2),kV([Om()],lK.prototype,"node",2);var dK=class extends Vm{constructor(e){super("idle",{idle:{hover:t=>{let{shiftKey:i}=t;return e(i)},keyDown:t=>{let{shiftKey:i}=t;return e(i)},keyUp:t=>{let{shiftKey:i}=t;return e(i)},click:t=>{let{shiftKey:i}=t;return e(i)},drag:t=>{let{shiftKey:i}=t;return e(i)}},dragging:{},translating:{},"text-input":{}})}},cK=class extends Vm{constructor(e){super("idle",{idle:{onEnter:e,render:e},dragging:{onEnter:e,render:e},translating:{onEnter:e,render:e},"text-input":{render:e}})}},uK=class extends Vm{constructor(e,t){const i=()=>{null!=this.active&&e.delete(this.active),this.active=void 0,e.select()},n={createDatum:t=>i=>{e.create(t,i),this.active=e.selectLast()}},o=p(p({},e),{},{delete:i,showTextInput:()=>{null!=this.active&&e.showTextInput(this.active)},deselect:()=>{const t=this.active;this.active=void 0,this.hovered=void 0,e.select(this.active,t)},showAnnotationOptions:()=>{null!=this.active&&e.showAnnotationOptions(this.active)}}),s=Object.fromEntries(Object.entries(rK).map(e=>{let[t,i]=e;return[t,i.createState(o,n)]})),r=Object.fromEntries(Object.entries(rK).map(t=>{let[i,o]=t;return[i,o.dragState(e,n)]})),a=t=>{let{colorPickerType:i,colorOpacity:n,color:o,opacity:s,isMultiColor:r}=t;this.datum&&("text-color"===i&&e.updateTextInputColor(o),Rj(this.datum,i,n,o,s,r),e.update())},l=t=>{const{datum:i,node:n}=this;i&&n&&(Sj(i)?(i.fontSize=t,e.updateTextInputFontSize(t)):Lj(i)&&(i.text.fontSize=t),e.update())},d=t=>{const{node:i}=this;i&&"setTextInputBBox"in i&&(i.setTextInputBBox(t),e.update())},c=t=>{let{textInputValue:i,bbox:n}=t;const{datum:o}=this;if(null!=n&&null!=i&&i.length>0){if(!Sj(o))return;const t=ej(o,i,n.width);o.set({text:t}),e.update(),e.recordAction("Change ".concat(o.type," annotation text"))}else e.delete(this.active),e.recordAction("Delete ".concat(null===o||void 0===o?void 0:o.type," annotation"))},u=()=>{e.updateTextInputBBox(void 0)},h=()=>null!=this.active,g=()=>{const{active:e,datum:t}=this;return null!=e&&(!!t&&(Lj(t)&&t.isWriteable()))},m=()=>null!=this.active&&!yj(this.datum);super("idle",{idle:p({onEnter:()=>{e.select(this.active,this.active),this.hoverCoords&&(this.hovered=e.hoverAtCoords(this.hoverCoords,this.active,this.hovered))},hover:t=>{let{offset:i}=t;this.hovered=e.hoverAtCoords(i,this.active,this.hovered),this.hoverCoords=i},translate:{guard:h,target:"translating",action:t=>{let{translation:i}=t;e.startInteracting(),e.translate(this.active,i),e.update()}},copy:{guard:m,action:()=>{this.copied=e.copy(this.active)}},cut:{guard:m,action:()=>{this.copied=e.copy(this.active),i()}},paste:{guard:()=>null!=this.copied,action:()=>{e.paste(this.copied)}},selectLast:()=>{const t=this.active;this.active=e.selectLast(),e.select(this.active,t)},click:[{guard:()=>{const{active:e,hovered:t,datum:i}=this;return null!=e&&t===e&&(!!i&&(Sj(i)&&i.isWriteable()))},target:"text-input"},{action:()=>{const t=this.active;this.active=this.hovered,e.select(this.active,t)}}],dblclick:{guard:g,action:t=>{let{offset:i}=t;const n="text"===e.getNodeAtCoords(i,this.active)?"text":"line";e.showAnnotationSettings(this.active,void 0,n)}},dragStart:[{guard:()=>null!=this.hovered,target:"dragging",action:()=>{const t=this.active;this.active=this.hovered,e.select(this.active,t),e.startInteracting()}},{action:()=>{const t=this.active;this.active=this.hovered,e.select(this.active,t)}}],color:{guard:h,action:a},fontSize:{guard:h,action:l},lineProps:{guard:h,action:t=>{const i=aK(this.datum);null===i||void 0===i||i.set(t),e.update(),e.recordAction("Change ".concat(null===i||void 0===i?void 0:i.type," ").concat(Object.entries(t).map(e=>{let[t,i]=e;return"".concat(t," to ").concat(i)}).join(", ")))}},lineStyle:{guard:h,action:t=>{const{datum:i,node:n}=this;i&&n&&kj(i)&&(Tj(i,t),e.update())}},lineText:{guard:h,action:t=>{const i=aK(this.datum);Lj(i)&&(xj(i)&&"center"===t.position&&(t.position="inside"),i.text.set(t),e.update())}},updateTextInputBBox:{guard:h,action:d},toolbarPressSettings:{guard:g,action:t=>{e.showAnnotationSettings(this.active,t)}},reset:()=>{var t;null!=this.active&&(null===(t=this.node)||void 0===t||t.toggleActive(!1));this.hovered=void 0,this.active=void 0,e.select(this.active,this.active),e.resetToIdle()},delete:()=>{var t;null!=this.active&&(e.delete(this.active),yj(this.datum)||e.recordAction("Delete ".concat(null===(t=this.datum)||void 0===t?void 0:t.type," annotation")))},deleteAll:()=>{e.deleteAll()}},s),dragging:p({onEnter:(t,i)=>{if(null==this.active)return;const n=e.getAnnotationType(this.active);n&&(this.transitionRoot(n),this.transitionRoot("dragStart",i))}},r),translating:{onEnter:()=>{},translate:{guard:h,target:"translating",action:t=>{let{translation:i}=t;e.startInteracting(),e.translate(this.active,i),e.update()}},translateEnd:{guard:h,target:"idle"},onExit:()=>{e.stopInteracting(),e.update(),e.recordAction("Translate annotation")}},"text-input":{onEnter:()=>{if(null==this.active)return;const t=aK(this.datum);t&&"getTextInputCoords"in t&&(e.startInteracting(),e.showTextInput(this.active),t.visible=!1,e.update())},updateTextInputBBox:{guard:h,action:d},resize:{target:"idle",action:c},click:{target:"idle",action:c},drag:{target:"idle",action:c},textInput:[{guard:FW,target:"idle",action:u},{guard:zW,target:"idle",action:c}],color:{guard:h,action:a},fontSize:{guard:h,action:l},cancel:{target:"idle",action:u},onExit:()=>{e.stopInteracting(),e.hideTextInput();const t=this.active;if(this.active=this.hovered=void 0,e.select(this.active,t),null==t)return;const i=e.datum(t),n=e.node(t);i&&n&&(i.visible=!0)}}}),this.setActive=t,this.debug=Cr.create(!0,"annotations"),this.snapping=!1}};kV([ng({changeValue(e){this.setActive(e)}}),Om()],uK.prototype,"active",2),kV([Om()],uK.prototype,"hovered",2),kV([Om()],uK.prototype,"hoverCoords",2),kV([Om()],uK.prototype,"copied",2),kV([Om()],uK.prototype,"snapping",2),kV([Om()],uK.prototype,"datum",2),kV([Om()],uK.prototype,"node",2);var{LayoutElement:hK,Menu:pK}=uE,gK=class extends Ay{};kV([ru],gK.prototype,"value",2);var mK=class extends kh{constructor(e){super(),this.ctx=e,this.enabled=!0,this.padding=20,this.buttons=new Dh(gK),this.events=new Oa,this.annotationMenu=new pK(this.ctx,"annotations"),this.cleanup=new Ta,this.toolbar=e.sharedToolbar.getSharedToolbar("annotations");const t=this.onKeyDown.bind(this);this.toolbar.addListener("keydown",t),this.cleanup.register(this.toolbar.addToolbarListener("button-pressed",this.onToolbarButtonPress.bind(this)),e.layoutManager.registerElement(hK.ToolbarLeft,this.onLayoutStart.bind(this)),()=>{this.toolbar.removeListener("keydown",t),this.toolbar.destroy()})}destroy(){this.cleanup.flush()}toggleClearButtonEnabled(e){const t=this.buttons.findIndex(e=>"clear"===e.value);this.toolbar.toggleButtonEnabledByIndex(t,e)}resetButtonIcons(){for(const[e,t]of this.buttons.entries())switch(t.value){case"line-menu":this.updateButtonByIndex(e,{icon:"trend-line-drawing",value:"line-menu"});break;case"fibonacci-menu":this.updateButtonByIndex(e,{icon:"fibonacci-retracement-drawing",value:"fibonacci-menu"});break;case"text-menu":this.updateButtonByIndex(e,{icon:"text-annotation",value:"text-menu"});break;case"shape-menu":this.updateButtonByIndex(e,{icon:"arrow-drawing",value:"shape-menu"});break;case"measurer-menu":this.updateButtonByIndex(e,{icon:"measurer-drawing",value:"measurer-menu"})}}hideOverlays(){this.annotationMenu.hide()}clearActiveButton(){this.toolbar.clearActiveButton()}onLayoutStart(e){this.enabled&&(this.toolbar.updateButtons(this.buttons),this.toolbar.layout(e.layoutBox,this.padding))}refreshButtonsEnabled(e){for(const[t,i]of this.buttons.entries())i&&this.toolbar.toggleButtonEnabledByIndex(t,e)}onToolbarButtonPress(e){let{event:t,button:i,buttonBounds:n,buttonWidget:o}=e;const s=this.ctx.axisManager.getAxisContext(_u.Y)[0].scale;switch(i.value){case"clear":this.events.emit("pressed-clear",null);break;case"line-menu":this.onToolbarButtonPressShowMenu(t,n,o,i.value,"toolbarAnnotationsLineAnnotations",zj.filter(e=>!e.visible||e.visible(s)));break;case"fibonacci-menu":this.onToolbarButtonPressShowMenu(t,n,o,i.value,"toolbarAnnotationsFibonacciAnnotations",Bj);break;case"text-menu":this.onToolbarButtonPressShowMenu(t,n,o,i.value,"toolbarAnnotationsTextAnnotations",Gj);break;case"shape-menu":this.onToolbarButtonPressShowMenu(t,n,o,i.value,"toolbarAnnotationsShapeAnnotations",Hj);break;case"measurer-menu":this.onToolbarButtonPressShowMenu(t,n,o,i.value,"toolbarAnnotationsMeasurerAnnotations",jj)}}onToolbarButtonPressShowMenu(e,t,i,n,o,s){this.events.emit("pressed-show-menu",null);const r=this.buttons.findIndex(e=>e.value===n);this.toolbar.toggleActiveButtonByIndex(r),this.annotationMenu.setAnchor({x:t.x+t.width+6,y:t.y}),this.annotationMenu.show(i,{items:s,ariaLabel:this.ctx.localeManager.t(o),class:"ag-charts-annotations__toolbar-menu",sourceEvent:e.sourceEvent,onPress:this.onButtonPressMenuCreateAnnotation.bind(this,n)})}onButtonPressMenuCreateAnnotation(e,t){const i=this.buttons.findIndex(t=>t.value===e);this.updateButtonByIndex(i,{icon:t.icon}),this.events.emit("pressed-create-annotation",{annotation:t.value}),this.annotationMenu.hide()}onKeyDown(e){let{sourceEvent:t}=e;"Escape"===t.key&&this.events.emit("cancel-create-annotation",null)}updateButtonByIndex(e,t){var i;const n=this.buttons.at(e);n&&(n.set(p(p(p({},n.toJson()),t),{},{value:null!==(i=t.value)&&void 0!==i?i:n.value})),this.toolbar.updateButtonByIndex(e,p({},n.toJson())))}};kV([ru,ng({changeValue(e){var t;null===(t=this.toolbar)||void 0===t||t.setHidden(!e)}})],mK.prototype,"enabled",2),kV([ru],mK.prototype,"padding",2),kV([ru],mK.prototype,"buttons",2);var{InteractionState:fK}=uE,vK="ag-charts-annotations__axis-button",yK=class extends Ra{constructor(e,t,i,n){var o;super(),this.ctx=e,this.axisCtx=t,this.onButtonClick=i,this.seriesRect=n,this.enabled=!0,this.snap=!1,this.padding=0,this.button=this.setup(),this.toggleVisibility(!1),this.updateButtonElement(),this.snap=Boolean(t.scale.bandwidth),e.domManager.addEventListener("focusin",t=>{let{target:i}=t;const n=i instanceof HTMLElement?i:void 0;n&&e.domManager.contains(n,"series-area")||n===this.button.getElement()||this.hide()}),this.cleanup.register(e.widgets.seriesWidget.addListener("drag-move",e=>this.onMouseDrag(e)),e.widgets.seriesWidget.addListener("mousemove",e=>this.onMouseMove(e)),e.widgets.seriesWidget.addListener("mouseleave",()=>this.onMouseLeave()),null===(o=e.widgets.seriesDragInterpreter)||void 0===o?void 0:o.events.on("click",e=>this.onClick(e)),e.eventsHub.on("series:focus-change",()=>this.onKeyPress()),e.eventsHub.on("zoom:pan-start",()=>this.hide()),e.eventsHub.on("zoom:change-complete",()=>this.hide()),()=>this.destroyElements(),()=>this.button.destroy())}update(e,t){this.seriesRect=e,this.padding=t}setup(){const e=new _F.ButtonWidget;return e.addClass(vK),e.setTabIndex(-1),e.setAriaLabel(this.ctx.localeManager.t("ariaLabelAddHorizontalLine")),this.ctx.widgets.seriesWidget.getElement().appendChild(e.getElement()),e}destroyElements(){this.ctx.domManager.removeChild("canvas-overlay",vK)}onMouseMove(e){this.ctx.interactionManager.isState(fK.Clickable)&&this.show(e)}onMouseDrag(e){this.ctx.interactionManager.isState(fK.AnnotationsMoveable)&&this.show(e)}onMouseLeave(){this.ctx.interactionManager.isState(fK.Clickable)&&this.hide()}onClick(e){this.ctx.interactionManager.isState(fK.Clickable)&&"touch"===e.device&&this.show(e)}show(e){const{sourceEvent:t,currentX:i,currentY:n}=e;if(!this.enabled||!this.ctx.widgets.seriesWidget.getElement().contains(t.target))return void this.hide();this.toggleVisibility(!0);const o=this.getButtonCoordinates({x:i,y:n});this.coords={x:o.x+this.button.clientWidth/2,y:o.y+this.button.clientHeight/2},this.updatePosition(o)}hide(){this.toggleVisibility(!1)}onKeyPress(){this.snap&&this.ctx.interactionManager.isState(fK.Default)||this.hide()}getButtonCoordinates(e){let{x:t,y:i}=e;const{axisCtx:{direction:n,position:o},seriesRect:s,snap:r,axisCtx:a,padding:l}=this,{clientWidth:d,clientHeight:c}=this.button,[u,h]=[0,s.height],[p,g]=[0,s.width];if(r&&(t=kH(IH(t-s.x,a),a)+s.x,i=kH(IH(i-s.y,a),a)+s.y),n===_u.X){const e=5,n=c-Math.max(0,l-e);t-=d/2,i="top"===o?u-c+n:h-n}else{const e=9,n=d-Math.max(0,l-e);t="left"===o?p-d+n:g-n,i-=c/2}return{x:t,y:i}}toggleVisibility(e){const{button:t}=this;if(null==t)return;const i=this.enabled&&e;this.toggleClass("-hidden",!i)}toggleClass(e,t){this.button.toggleClass("".concat(vK,"-").concat(e),t)}updatePosition(e){let{x:t,y:i}=e;this.button.getElement().style.transform="translate(".concat(Math.round(t),"px, ").concat(Math.round(i),"px)")}updateButtonElement(){const{button:e}=this;e.addListener("click",()=>this.onButtonClick(this.coords)),e.addListener("touchend",()=>this.onButtonClick(this.coords)),e.addListener("drag-start",()=>{}),e.setInnerHTML('<span class="'.concat(Ip("zoom-in")," ").concat(vK,'-icon"></span>'))}};kV([ru],yK.prototype,"enabled",2);var{DraggablePopover:bK,NativeWidget:xK}=uE,CK=class e extends bK{constructor(e,t){super(e,t),this.dragHandleDraggingClass="ag-charts-dialog__drag-handle--dragging",this.colorPicker=new Oj(this.ctx,{detached:!0}),this.cleanup.register(e.eventsHub.on("layout:complete",this.onLayoutComplete.bind(this)))}showWithChildren(e,t){const i=super.showWithChildren(e,t);return i.classList.add("ag-charts-dialog"),i.setAttribute("role","dialog"),i.addEventListener("mousedown",e=>{var t;null!==(t=e.target.classList)&&void 0!==t&&t.contains("ag-charts-dialog__color-picker-button")||this.colorPicker.hide()}),i.addEventListener("keydown",this.onKeyDown.bind(this)),Pr().requestAnimationFrame(()=>this.reposition()),this.colorPicker.attachTo(this),i}updatePosition(e){var t;super.updatePosition(e);const{anchor:i,fallbackAnchor:n}=null!==(t=this.getColorPickerAnchors())&&void 0!==t?t:{};i&&this.colorPicker.setAnchor(i,n)}createTabs(e,t,i){const n=zr("div","ag-charts-dialog__tabs"),o=wu(i,()=>Cm()),s=wu(i,()=>Cm());for(const[h,p]of fu(i))Xp(p.panel,{id:s[h],role:"tabpanel","aria-labelledby":o[h]});const r=e=>{for(const[n,o]of fu(i)){var t;o.panel.classList.toggle("ag-charts-dialog__tab-panel--active",n===e),d[n].classList.toggle("ag-charts-dialog__tab-button--active",n===e),Zp(d[n],"aria-selected",n===e),n===e&&(null===(t=o.onShow)||void 0===t||t.call(o))}},a=new xK(zr("div","ag-charts-dialog__header"));a.addListener("drag-start",e=>{const{sourceEvent:t}=e;t.target instanceof Element&&t.target.classList.contains("ag-charts-dialog__header")&&this.onDragStart(e)}),a.addListener("drag-move",e=>this.onDragMove(e)),a.addListener("drag-end",()=>this.onDragEnd());const l=new wK;this.setDragHandle(l);const d=wu(i,(e,t)=>Ly({label:this.ctx.localeManager.t(e.label),onPress:()=>r(t)},{id:o[t],class:"ag-charts-dialog__tab-button",role:"tab","aria-controls":s[t]})),c=zr("div","ag-charts-dialog__tab-list");Xp(c,{role:"tablist","aria-label":this.ctx.localeManager.t(e)}),c.append(...Object.values(d));const u=this.createHeaderCloseButton();return a.getElement().append(l.getElement(),c,u),n.append(a.getElement(),...Object.values(i).map(e=>e.panel)),r(t),hm({orientation:"horizontal",buttons:Object.values(d)}),{tabs:n,initialFocus:d[t]}}createTabPanel(){return zr("div","ag-charts-dialog__tab-panel")}createInputGroupLine(){return zr("div","ag-charts-dialog__input-group-line")}createRadioGroup(e){let{label:t,options:i,value:n,onChange:o}=e;const s=this.createInputGroup(t);Xp(s,{role:"radiogroup",tabindex:-1,"aria-label":this.ctx.localeManager.t(t)});const r="ag-charts-dialog__button--active",a=[];for(const l of i){const{icon:e,altText:t}=l,i=this.ctx.localeManager.t(t),d=Ly({icon:e,altText:i,onPress:()=>{for(const e of Array.from(s.children))e.classList.remove(r),e.ariaChecked="false";d.classList.add(r),d.ariaChecked="true",o(l.value)}},{"aria-checked":l.value===n,class:"ag-charts-dialog__button",role:"radio",title:i});l.value===n&&d.classList.add(r),s.appendChild(d),a.push(d)}return hm({orientation:"horizontal",buttons:a}),s}createSelect(e){let{altText:t,label:i,options:n,value:o,onChange:s}=e;const r=this.createInputGroup(i),a=this.ctx.localeManager.t(t),l=Ty({value:o,options:n,onChange:s},{class:"ag-charts-dialog__select","aria-label":a,title:a});return r.append(l),r}createTextArea(e){let{placeholder:t,value:i,onChange:n}=e;return Ry({value:i,onChange:n},{placeholder:t?this.ctx.localeManager.t(t):void 0})}createCheckbox(e){let{label:t,checked:i,onChange:n}=e;const o=Cm(),s=this.createInputGroup(t,{for:o}),r=Ny({checked:i,onChange:n},{class:"ag-charts-dialog__checkbox",role:"switch",id:o});return s.append(r),s}createColorPicker(e){let{color:t,opacity:i,label:n,altText:o,onChange:s,onChangeHide:r,isMultiColor:a,hasMultiColorOption:l}=e;const d=this.createInputGroup(n),c=this.ctx.localeManager.t(o),u=Ly({label:c,onPress:e=>{var n;const{anchor:o,fallbackAnchor:d}=null!==(n=this.getColorPickerAnchors(u))&&void 0!==n?n:{};this.colorPicker.show({anchor:o,fallbackAnchor:d,color:t,opacity:i,isMultiColor:a,hasMultiColorOption:l,sourceEvent:e,onChange:(e,t,i,n)=>{u.style.setProperty("--color",e),u.classList.toggle("ag-charts-dialog__color-picker-button--multi-color",n),s(e,t,i,n)},onChangeHide:r})}},{"aria-label":c,tabindex:0,class:"ag-charts-dialog__color-picker-button",title:c});if(a)u.classList.toggle("ag-charts-dialog__color-picker-button--multi-color");else if(t){const e=yg.fromString(t),n=new yg(e.r,e.g,e.b,i);u.style.setProperty("--color",n.toHexString())}return d.append(u),this.hideFns.push(()=>{this.colorPicker.hide()}),d}createHeaderCloseButton(){return Ly({icon:"close",altText:this.ctx.localeManager.t("iconAltTextClose"),onPress:()=>this.hide()},{class:"ag-charts-dialog__close-button"})}createInputGroup(e,t){const i=zr("div","ag-charts-dialog__input-group"),n=zr("label","ag-charts-dialog__input-group-label");return n.innerText=this.ctx.localeManager.t(e),Zp(n,"for",null===t||void 0===t?void 0:t.for),i.appendChild(n),i}onLayoutComplete(e){this.seriesRect=e.series.paddedRect,this.reposition()}onKeyDown(e){e.altKey||e.ctrlKey||e.metaKey||e.isComposing||"Escape"!==e.key||this.hide()}reposition(){const{seriesRect:t,ctx:i}=this,n=this.getPopoverElement();if(!t||!n)return;const o=i.domManager.getBoundingClientRect(),s=pv.from(0,t.y),r=pv.from(o.width,t.height),a=pv.from(n),l=pv.from(.5,1);let d;if(t.width>1e3){const t=pv.sub(pv.add(s,pv.multiply(r,l)),pv.multiply(a,l));d=pv.sub(t,pv.from(0,e.offset))}else{const t=pv.sub(pv.add(s,r),a);d=pv.sub(t,e.offset)}this.updatePosition(d)}getColorPickerAnchors(e){if(e&&(this.colorPickerAnchorElement=e),!this.colorPickerAnchorElement)return;const t=this.colorPickerAnchorElement.getBoundingClientRect(),i=this.ctx.domManager.getBoundingClientRect(),n=pv.sub(pv.from(t.x,t.y),pv.from(i.left,i.top));return{anchor:pv.add(n,pv.from(0,t.height+5)),fallbackAnchor:pv.sub(n,pv.from(0,5))}}};CK.offset=60;var SK=CK,wK=class extends xK{constructor(){super(zr("div","ag-charts-dialog__drag-handle"));const e=new xK(zr("span",Ip("drag-handle")));e.setAriaHidden(!0),this.addChild(e)}},MK=class extends SK{constructor(e){super(e,"settings"),this.events=new Oa,this.hideFns.push(()=>this.events.emit("hidden",null))}show(e,t){const i=this.createLinearLineTab(e,t),n=this.createLinearTextTab(e,t);let o="dialogHeaderLine";xj(e)?o="dialogHeaderChannel":Cj(e)?o="dialogHeaderFibonacciRange":"date-range"===e.type?o="dialogHeaderDateRange":"price-range"===e.type?o="dialogHeaderPriceRange":"date-price-range"===e.type&&(o="dialogHeaderDatePriceRange");const{tabs:s,initialFocus:r}=this.createTabs("ariaLabelSettingsTabBar",t.initialSelectedTab,{line:{label:o,panel:i},text:{label:"dialogHeaderText",panel:n.panel,onShow:n.onShow}});t.initialFocus=r;this.showWithChildren([s],t).classList.add("ag-charts-dialog--annotation-settings")}createLinearLineTab(e,t){var i,n;const o=this.createTabPanel(),s=this.createInputGroupLine(),r=this.createInputGroupLine(),a="isMultiColor"in e,l=this.createColorPickerInput("line-color",e.getDefaultColor("line-color"),e.getDefaultOpacity("line-color"),!!a&&e.isMultiColor,a,t.onChangeLineColor,t.onChangeHideLineColor),d=this.createStrokeWidthSelect(null!==(i=e.strokeWidth)&&void 0!==i?i:2,t.onChangeLineStyleWidth),c=this.createLineStyleRadioGroup(null!==(n=e.lineStyle)&&void 0!==n?n:"solid",t.onChangeLineStyleType);if(s.append(l),"background"in e){const i=this.createColorPickerInput("fill-color",e.getDefaultColor("fill-color"),e.getDefaultOpacity("fill-color"),!1,!1,t.onChangeFillColor,t.onChangeHideFillColor);s.append(i),r.append(d)}else if("showFill"in e){var u;s.append(this.createCheckbox({label:"dialogInputShowFill",checked:null===(u=e.showFill)||void 0===u||u,onChange:e=>t.onChangeLine({showFill:e})})),r.append(d)}else s.append(d);var h,p,g,m,f,v,y,b;(r.append(c),o.append(s,r),"bands"in e)&&o.append(this.createFibonacciRatioSelect(null!==(h=e.bands)&&void 0!==h?h:10,e=>t.onChangeLine({bands:e})));"extendStart"in e&&"extendEnd"in e&&o.append(this.createCheckbox({label:xj(e)?"dialogInputExtendChannelStart":"dialogInputExtendLineStart",checked:null!==(p=e.extendStart)&&void 0!==p&&p,onChange:e=>t.onChangeLine({extendStart:e})}),this.createCheckbox({label:xj(e)?"dialogInputExtendChannelEnd":"dialogInputExtendLineEnd",checked:null!==(g=e.extendEnd)&&void 0!==g&&g,onChange:e=>t.onChangeLine({extendEnd:e})}));"extendAbove"in e&&"extendBelow"in e&&o.append(this.createCheckbox({label:"dialogInputExtendAbove",checked:null!==(m=e.extendAbove)&&void 0!==m&&m,onChange:e=>t.onChangeLine({extendAbove:e})}),this.createCheckbox({label:"dialogInputExtendBelow",checked:null!==(f=e.extendBelow)&&void 0!==f&&f,onChange:e=>t.onChangeLine({extendBelow:e})}));"extendLeft"in e&&"extendRight"in e&&o.append(this.createCheckbox({label:"dialogInputExtendLeft",checked:null!==(v=e.extendLeft)&&void 0!==v&&v,onChange:e=>t.onChangeLine({extendLeft:e})}),this.createCheckbox({label:"dialogInputExtendRight",checked:null!==(y=e.extendRight)&&void 0!==y&&y,onChange:e=>t.onChangeLine({extendRight:e})}));"reverse"in e&&"showFill"in e&&o.append(this.createCheckbox({label:"dialogInputReverse",checked:null!==(b=e.reverse)&&void 0!==b&&b,onChange:e=>t.onChangeLine({reverse:e})}));return o}createLinearTextTab(e,t){var i;const n=this.createTabPanel(),o=this.createTextArea({placeholder:"inputTextareaPlaceholder",value:e.text.label,onChange:e=>t.onChangeText({label:e})}),s=this.createFontSizeSelect(e.text.fontSize,t.onChangeTextFontSize),r=this.createColorPickerInput("text-color",e.text.color,1,!1,!1,t.onChangeTextColor,t.onChangeHideTextColor),a="inside"===e.text.position?"center":e.text.position,l=this.createPositionRadioGroup(null!==a&&void 0!==a?a:"top",e=>t.onChangeText({position:e})),d=this.createAlignmentRadioGroup(null!==(i=e.text.alignment)&&void 0!==i?i:"center",e=>t.onChangeText({alignment:e})),c=this.createInputGroupLine();return c.append(s,r,l,d),n.append(o,c),{panel:n,onShow:()=>kp(o)}}createColorPickerInput(e,t,i,n,o,s,r){const a="fill-color"===e?"dialogInputFillColorPicker":"dialogInputColorPicker",l="fill-color"===e?"dialogInputFillColorPickerAltText":"dialogInputColorPickerAltText";return this.createColorPicker({label:a,altText:l,color:t,opacity:i,isMultiColor:n,hasMultiColorOption:o,onChange:s,onChangeHide:r})}createStrokeWidthSelect(e,t){return this.createSelect({label:"dialogInputStrokeWidth",altText:"dialogInputStrokeWidthAltText",options:Wj.map(e=>{let{label:t,value:i}=e;return{label:t,value:"".concat(i)}}),value:String(e),onChange:e=>t(Number(e))})}createFibonacciRatioSelect(e,t){return this.createSelect({label:"dialogInputFibonacciBands",altText:"dialogInputFibonacciBandsAltText",options:Vj.map(e=>{let{label:t,value:i}=e;return{label:t,value:"".concat(i)}}),value:String(e),onChange:e=>t(Number(e))})}createLineStyleRadioGroup(e,t){return this.createRadioGroup({label:"dialogInputLineStyle",options:[{icon:"line-style-solid",altText:"iconAltTextLineStyleSolid",value:"solid"},{icon:"line-style-dashed",altText:"iconAltTextLineStyleDashed",value:"dashed"},{icon:"line-style-dotted",altText:"iconAltTextLineStyleDotted",value:"dotted"}],value:e,onChange:t})}createFontSizeSelect(e,t){return this.createSelect({label:"dialogInputFontSize",altText:"dialogInputFontSizeAltText",options:Kj.map(e=>{let{label:t,value:i}=e;return{label:t,value:String(i)}}),value:String(e),onChange:e=>t(Number(e))})}createPositionRadioGroup(e,t){return this.createRadioGroup({label:"dialogInputPosition",options:[{icon:"position-top",altText:"iconAltTextPositionTop",value:"top"},{icon:"position-center",altText:"iconAltTextPositionCenter",value:"center"},{icon:"position-bottom",altText:"iconAltTextPositionBottom",value:"bottom"}],value:e,onChange:t})}createAlignmentRadioGroup(e,t){return this.createRadioGroup({label:"dialogInputAlign",options:[{icon:"align-left",altText:"iconAltTextAlignLeft",value:"left"},{icon:"align-center",altText:"iconAltTextAlignCenter",value:"center"},{icon:"align-right",altText:"iconAltTextAlignRight",value:"right"}],value:e,onChange:t})}};function kK(e){return e.gridPadding+e.seriesAreaPadding+e.tickSize+e.label.spacing}var{InteractionState:DK,keyProperty:IK,valueProperty:AK,Selection:LK,BBox:NK}=uE,TK=class e extends Ra{constructor(t){super(),this.ctx=t,this.toolbar=new mK(this.ctx),this.optionsToolbar=new Qj(this.ctx,()=>{const e=this.state.getActive();if(null!=e)return aK(this.annotationData.at(e))}),this.axesButtons=new ZG,this.enabled=!0,this.snap=!1,this.data=void 0,this.xKey=void 0,this.volumeKey=void 0,this.annotationData=new Dh(e.createAnnotationDatum),this.defaults=new Ej,this.container=new uE.Group({name:"static-annotations"}),this.annotations=new LK(this.container,this.createAnnotationScene.bind(this)),this.settingsDialog=new MK(this.ctx),this.textInput=new $G(this.ctx),this.postUpdateFns=[],this.state=this.setupStateMachine(),this.setupListeners(),this.setupDOM(),this.ctx.historyManager.addMementoOriginator(t.annotationManager),this.ctx.historyManager.addMementoOriginator(this.defaults),this.textInput.setKeyDownHandler(this.onTextInput.bind(this)),this.cleanup.register(()=>{var e,t;this.clear(),null===(e=this.xAxis)||void 0===e||null===(e=e.button)||void 0===e||e.destroy(),null===(t=this.yAxis)||void 0===t||null===(t=t.button)||void 0===t||t.destroy(),this.textInput.destroy()})}setupStateMachine(){var e=this;const{ctx:t}=this;return new lK({resetToIdle:()=>{t.domManager.updateCursor("annotations"),this.popAnnotationState(DK.Annotations),this.hideOverlays(),this.optionsToolbar.hide(),this.deleteEphemeralAnnotations(),this.update()},hoverAtCoords:(e,i,n)=>{var o;let s;var r;(this.annotations.each((t,n,o)=>{if(!n.isHoverable())return;const r=t.containsPoint(e.x,e.y);r&&(null!==s&&void 0!==s||(s=o)),t.toggleHovered(r,i===o,n.readOnly)}),null!=s?t.tooltipManager.suppressTooltip("annotations"):this.isAnnotationState()||t.tooltipManager.unsuppressTooltip("annotations"),null!=s&&null!==(o=this.annotationData.at(s))&&void 0!==o&&o.readOnly)||this.ctx.domManager.updateCursor("annotations",null==s||null===(r=this.annotations.at(s))||void 0===r?void 0:r.getCursor());return s!==n&&this.update(),s},getNodeAtCoords:(e,t)=>{const i=this.annotations.at(t);if(i)return i.getNodeAtCoords(e.x,e.y)},translate:(e,t)=>{const i=this.annotations.at(e),n=aK(this.annotationData.at(e));if(i&&n)return this.translateNode(i,n,t)},copy:e=>{const t=this.annotations.at(e),i=aK(this.annotationData.at(e));if(t&&i)return this.createAnnotationDatumCopy(t,i)},paste:e=>{this.createAnnotation(e.type,e,!1),this.postUpdateFns.push(()=>{this.state.transitionAsync("selectLast"),this.state.transitionAsync("copy")})},select:(e,t)=>{const{annotations:i,optionsToolbar:n,toolbar:o}=this;this.hideOverlays(),o.clearActiveButton(),o.resetButtonIcons();const s=null==e?null:i.at(e),r=null==t?null:i.at(t),a=null==e?null:this.annotationData.at(e);r===s&&null!=s||(null===r||void 0===r||r.toggleActive(!1),n.hide(),!s||null!==a&&void 0!==a&&a.readOnly?(this.popAnnotationState(DK.AnnotationsSelected),this.popAnnotationState(DK.Annotations)):(this.pushAnnotationState(DK.AnnotationsSelected),s.toggleActive(!0),yj(a)||(n.updateButtons(this.annotationData.at(e)),this.postUpdateFns.push(()=>{n.show(),n.setAnchorScene(s)}))),yj(a)||this.deleteEphemeralAnnotations(),this.update())},selectLast:()=>(this.pushAnnotationState(DK.AnnotationsSelected),this.annotationData.length-1),startInteracting:()=>{this.pushAnnotationState(DK.Annotations)},stopInteracting:()=>{this.popAnnotationState(DK.Annotations)},create:(e,t)=>{this.createAnnotation(e,t)},delete:e=>{this.annotationData.splice(e,1)},deleteAll:()=>{const e=this.annotationData.filter(e=>{if(!0===e.readOnly)return e});this.annotationData.splice(0,this.annotationData.length);for(const t of e)this.annotationData.push(t)},validatePoint:(e,t)=>{const i=this.getAnnotationContext();return!i||f_(i,e,t)},getAnnotationType:e=>function(e){for(const t of qG)if(t===e)return t}(this.annotationData[e].type),datum:e=>this.annotationData.at(e),node:e=>this.annotations.at(e),recordAction:e=>{this.recordActionAfterNextUpdate(e)},update:()=>{this.postUpdateFns.push(()=>{const e=this.state.getActive(),t=null==e?null:this.annotations.at(e);null!=t&&this.optionsToolbar.setAnchorScene(t)}),this.update()},showTextInput:e=>{const t=aK(this.annotationData.at(e));if(!this.annotations.at(e)||!t||!("getTextInputCoords"in t)||!("getTextPosition"in t))return;const i={color:t.color,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight,placeholderColor:t.getPlaceholderColor()},n=this.getAnnotationContext();this.textInput.show({styles:i,layout:{getTextInputCoords:e=>pv.add(t.getTextInputCoords(n,e),pv.required(this.seriesRect)),getTextPosition:()=>t.getTextPosition(),alignment:t.alignment,textAlign:t.textAlign,width:t.width},text:t.text,placeholderText:t.placeholderText,onChange:(e,t)=>{this.state.transition("updateTextInputBBox",t)}}),this.ctx.domManager.updateCursor("annotations")},hideTextInput:()=>{this.textInput.hide()},updateTextInputColor:e=>{this.textInput.updateColor(e)},updateTextInputFontSize:e=>{const t=this.textInput.updateFontSize(e);this.state.transition("updateTextInputBBox",t)},updateTextInputBBox:e=>{this.state.transition("updateTextInputBBox",e)},showAnnotationOptions:e=>{const t=this.annotations.at(e);t&&!yj(this.annotationData.at(e))&&(this.optionsToolbar.updateButtons(this.annotationData.at(e)),this.optionsToolbar.show(),this.optionsToolbar.setAnchorScene(t))},showAnnotationSettings:function(t,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"line";const o=e.annotationData.at(t);if(!bj(o)&&!xj(o)&&!wj(o))return;if(yj(o))return;const s=t=>(i,n,s,r)=>{e.setColorAndDefault(o.type,t,i,n,s,r),e.optionsToolbar.updateColorPickerColor(t,n,s,r)},r=t=>()=>{e.recordActionAfterNextUpdate("Change ".concat(o.type," ").concat(t," to ").concat(o.getDefaultColor(t)),["annotations","defaults"]),e.update()},a={initialSelectedTab:n,ariaLabel:e.ctx.localeManager.t("ariaLabelAnnotationSettingsDialog"),sourceEvent:i,onChangeLine:t=>{e.state.transition("lineProps",t),null!=t.bands&&e.defaults.setDefaultFibonacciOptions(o.type,"bands",t.bands),null!=t.reverse&&e.defaults.setDefaultFibonacciOptions(o.type,"reverse",t.reverse),null!=t.showFill&&e.defaults.setDefaultFibonacciOptions(o.type,"showFill",t.showFill)},onChangeText:t=>{e.state.transition("lineText",t),t.alignment&&e.defaults.setDefaultLineTextAlignment(o.type,t.alignment),t.position&&e.defaults.setDefaultLineTextPosition(o.type,t.position),e.recordActionAfterNextUpdate("Change ".concat(o.type," text ").concat(Object.keys(t).map(e=>"".concat(e," to ").concat(t[e])).join(", ")))},onChangeFillColor:s("fill-color"),onChangeHideFillColor:r("fill-color"),onChangeLineColor:s("line-color"),onChangeHideLineColor:r("line-color"),onChangeLineStyleType:t=>{var i;e.setLineStyleTypeAndDefault(o.type,t),e.optionsToolbar.updateLineStyleType(null!==(i=_j.find(e=>e.value===t))&&void 0!==i?i:_j[0])},onChangeLineStyleWidth:t=>{e.setLineStyleWidthAndDefault(o.type,t),e.optionsToolbar.updateStrokeWidth({strokeWidth:t,value:t,label:String(t)})},onChangeTextColor:s("text-color"),onChangeHideTextColor:r("text-color"),onChangeTextFontSize:t=>{e.setFontSizeAndDefault(o.type,t)}};e.settingsDialog.show(o,a)}})}setupListeners(){const{ctx:e,optionsToolbar:t,settingsDialog:i,toolbar:n}=this,{seriesWidget:o,seriesDragInterpreter:s,chartWidget:r}=e.widgets;s&&this.cleanup.register(s.events.on("click",this.hoverTouchPreHandler.bind(this)),s.events.on("drag-start",this.hoverTouchPreHandler.bind(this)),s.events.on("drag-move",this.dragMoveTouchPreHandler.bind(this)),s.events.on("mousemove",this.onHover.bind(this)),s.events.on("click",this.onClick.bind(this)),s.events.on("dblclick",this.onDoubleClick.bind(this)),s.events.on("drag-start",this.onDragStart.bind(this)),s.events.on("drag-move",this.onDrag.bind(this)),s.events.on("drag-end",this.onDragEnd.bind(this))),this.cleanup.register(o.addListener("keydown",this.onKeyDown.bind(this)),o.addListener("keyup",this.onKeyUp.bind(this)),r.addListener("click",this.onCancel.bind(this)),e.eventsHub.on("annotations:restore",this.onRestoreAnnotations.bind(this)),e.eventsHub.on("layout:complete",this.onLayoutComplete.bind(this)),e.updateService.addListener("pre-scene-render",this.onPreRender.bind(this)),e.eventsHub.on("zoom:change-complete",()=>this.onResize()),e.eventsHub.on("dom:resize",()=>this.onResize()),n.events.on("cancel-create-annotation",()=>{this.cancel(),this.reset(),this.update()}),n.events.on("pressed-create-annotation",e=>{let{annotation:t}=e;this.cancel(),this.pushAnnotationState(DK.Annotations),this.state.transition(t),this.update()}),n.events.on("pressed-clear",()=>{this.clear(),this.recordActionAfterNextUpdate("Clear all")}),n.events.on("pressed-show-menu",()=>{this.cancel(),this.reset()}),n.events.on("pressed-unrelated",()=>{this.reset()}),t.events.on("pressed-delete",()=>{this.cancel(),this.delete(),this.reset()}),t.events.on("pressed-settings",e=>{let{sourceEvent:t}=e;this.state.transition("toolbarPressSettings",t)}),t.events.on("pressed-lock",e=>{let{locked:t}=e;this.recordActionAfterNextUpdate(t?"Locked":"Unlocked"),this.update()}),t.events.on("hid-overlays",()=>{this.settingsDialog.hide()}),t.events.on("saved-color",e=>{let{type:t,colorPickerType:i,color:n}=e;this.recordActionAfterNextUpdate("Change ".concat(t," ").concat(i," to ").concat(n),["annotations","defaults"])}),t.events.on("updated-color",e=>{let{type:t,colorPickerType:i,colorOpacity:n,color:o,opacity:s,isMultiColor:r}=e;this.setColorAndDefault(t,i,n,o,s,r)}),t.events.on("updated-font-size",e=>{let{type:t,fontSize:i}=e;this.setFontSizeAndDefault(t,i)}),t.events.on("updated-line-style",e=>{let{type:t,lineStyleType:i}=e;this.setLineStyleTypeAndDefault(t,i)}),t.events.on("updated-line-width",e=>{let{type:t,strokeWidth:i}=e;this.setLineStyleWidthAndDefault(t,i)}),i.events.on("hidden",()=>{this.optionsToolbar.clearActiveButton()}))}setupDOM(){const{ctx:e,toolbar:t,optionsToolbar:i}=this;this.cleanup.register(e.annotationManager.attachNode(this.container),()=>{e.domManager.removeStyles(vK),t.destroy(),i.destroy()})}async processData(e){var t;if(!this.enabled||null==this.data||null==this.xKey||null==this.volumeKey)return;const i=[IK(this.xKey,void 0,{id:"date"}),AK(this.volumeKey,"number",{id:"volume"})],n=null!==(t=uE.DataSet.wrap(this.data))&&void 0!==t?t:uE.DataSet.empty(),{dataModel:o,processedData:s}=await e.request("annotations",n,{props:i});this.dataModel=o,this.processedData=s}createAnnotationScene(e){if(e.type in rK)return new rK[e.type].scene;throw new Error("AG Charts - Cannot create annotation scene of type [".concat(e.type,"], expected one of [").concat(Object.keys(rK),"], ignoring."))}static createAnnotationDatum(e){if(e.type in rK)return(new rK[e.type].datum).set(e);throw new Error("AG Charts - Cannot create annotation datum of unknown type [".concat(e.type,"], expected one of [").concat(Object.keys(rK),"], ignoring."))}createAnnotation(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.annotationData.push(t),i){const i=this.ctx.annotationManager.getAnnotationTypeStyles(e);i&&t.set(i),this.defaults.applyDefaults(t)}this.injectDatumDependencies(t),this.update()}injectDatumDependencies(e){"setLocaleManager"in e&&e.setLocaleManager(this.ctx.localeManager),"getVolume"in e&&(e.getVolume=this.getDatumRangeVolume.bind(this))}getDatumRangeVolume(e,t){const{dataModel:i,processedData:n}=this;let o=SH(e),s=SH(t);if(!Za(o)||!Za(s)||!i||!n||null==this.volumeKey)return;o>s&&([o,s]=[s,o]);const r=i.resolveKeysById({id:"annotations"},"date",n),a=i.resolveColumnById({id:"annotations"},"volume",n);let l=0;for(let d=0;d<n.input.count;d++){const e=r[d];Za(e)&&e>=o&&e<=s&&(l+=a[d])}return l}translateNode(e,t,i){const n=this.getAnnotationConfig(t),o=this.getAnnotationContext();o&&n.translate(e,t,i,o)}createAnnotationDatumCopy(e,t){const i=this.getAnnotationConfig(t),n=new i.datum;n.set(t.toJson());const o=this.getAnnotationContext();if(o)return i.copy(e,t,n,o)}getAnnotationConfig(e){if(e.type in rK)return rK[e.type];throw new Error("AG Charts - Cannot get annotation config of unknown type [".concat(e.type,"], expected one of [").concat(Object.keys(rK),"], ignoring."))}onRestoreAnnotations(e){this.enabled&&(this.clear(),this.annotationData.set(e.annotations),this.postUpdateFns.push(()=>{this.ctx.annotationManager.fireChangedEvent()}),this.update())}onLayoutComplete(e){var t,i;if(!this.enabled)return;const n=e.series.paddedRect;this.seriesRect=n,this.container.setClipRect(n),this.xAxis=this.getAxis(e.axes[_u.X],n,null===(t=this.xAxis)||void 0===t?void 0:t.button),this.yAxis=this.getAxis(e.axes[_u.Y],n,null===(i=this.yAxis)||void 0===i?void 0:i.button),this.showAnnotations()?this.animateAnnotations({from:0,to:1,phase:"trailing"}):this.animateAnnotations({from:1,to:0,phase:"remove"})}showAnnotations(){if(!this.yAxis||!this.xAxis)return!1;const e=this.ctx.chartService.series.some(e=>e.hasData),t=this.yAxis.context.seriesIds().some(e=>{const t=this.ctx.chartService.series.find(t=>t.id===e);return null===t||void 0===t?void 0:t.visible});return e&&t}animateAnnotations(e){var t;let{from:i,to:n,phase:o}=e;const{annotations:s}=this;null===(t=this.ctx.animationManager)||void 0===t||t.animate({from:i,to:n,id:"chart-annotations",phase:o,groupId:"opacity",onUpdate(e){s.each(t=>{t.opacity=e,"setAxisLabelOpacity"in t&&t.setAxisLabelOpacity(e)})},onStop(){s.each(e=>{e.opacity=n,"setAxisLabelOpacity"in e&&e.setAxisLabelOpacity(n)})}})}onPreRender(){this.enabled&&(this.updateAnnotations(),this.state.transition("render"))}getAxis(e,t,i){const n=this.ctx.axisManager.getAxisContext(e.direction)[0],{position:o="bottom",direction:s}=n,r=e.gridPadding+e.seriesAreaPadding,a=new NK(0,0,t.width,t.height).grow(r,o),l=s===_u.X?"vertical":"horizontal",{axesButtons:d,snap:c}=this;if(this.enabled&&d.enabled&&("xy"===d.axes||d.axes===s)){null!==i&&void 0!==i||(i=new yK(this.ctx,p(p({},n),{},{snapToGroup:c}),e=>this.onAxisButtonClick(e,l),t));const o=kK(e);i.update(t,o)}else{var u;null===(u=i)||void 0===u||u.destroy(),i=void 0}return{layout:e,context:n,bounds:a,button:i}}recordActionAfterNextUpdate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["annotations"];const{defaults:i,ctx:{annotationManager:n,historyManager:o}}=this,s=t.map(e=>"defaults"===e?i:n);this.postUpdateFns.push(()=>{o.record(e,...s),n.fireChangedEvent()})}setColorAndDefault(e,t,i,n,o,s){this.state.transition("color",{colorPickerType:t,colorOpacity:i,color:n,opacity:o,isMultiColor:s}),this.defaults.setDefaultColor(e,t,i,n,o,s)}setFontSizeAndDefault(e,t){this.state.transition("fontSize",t),this.defaults.setDefaultFontSize(e,t),this.recordActionAfterNextUpdate("Change ".concat(e," font size to ").concat(t),["annotations","defaults"])}setLineStyleTypeAndDefault(e,t){this.state.transition("lineStyle",{type:t}),this.defaults.setDefaultLineStyleType(e,t),this.recordActionAfterNextUpdate("Change ".concat(e," line style to ").concat(t),["annotations","defaults"])}setLineStyleWidthAndDefault(e,t){this.state.transition("lineStyle",{strokeWidth:t}),this.defaults.setDefaultLineStyleWidth(e,t),this.recordActionAfterNextUpdate("Change ".concat(e," stroke width to ").concat(t),["annotations","defaults"])}updateAnnotations(){const{annotationData:e,annotations:t,seriesRect:i,ctx:{annotationManager:n}}=this,o=this.getAnnotationContext();if(!i||!o)return;n.updateData(e.toJson());const s=this.showAnnotations();this.toolbar.refreshButtonsEnabled(s),this.toolbar.toggleClearButtonEnabled(e.length>0&&s),t.update(null!==e&&void 0!==e?e:[],void 0,e=>e.id).each((e,t)=>{if(!s)return e.visible=!1,void("setAxisLabelVisible"in e&&e.setAxisLabelVisible(!1));"setAxisLabelVisible"in e&&e.setAxisLabelVisible(!0),this.injectDatumDependencies(t),function(e,t,i){for(const{update:n}of Object.values(rK))n(e,t,i)}(e,t,o)});for(const r of this.postUpdateFns)r();this.postUpdateFns=[]}getAnnotationContext(){const{seriesRect:e,xAxis:t,yAxis:i,snap:n}=this;if(e&&t&&i)return{seriesRect:e,xAxis:p(p({},t.context),{},{bounds:t.bounds,labelPadding:kK(t.layout),snapToGroup:n}),yAxis:p(p({},i.context),{},{bounds:i.bounds,labelPadding:kK(t.layout),snapToGroup:n})}}onHover(e){const{state:t}=this,i=this.getAnnotationContext();if(!i)return;const n=e.sourceEvent.shiftKey,o=pv.from(e),s=DH(o,i);t.transition("hover",{offset:o,point:s,shiftKey:n,context:i})}onClick(e){const{state:t}=this,i=this.getAnnotationContext();if(!i)return;const n=e.sourceEvent.shiftKey,o=DH(pv.from(e),i),s=this.textInput.getValue(),r=this.textInput.getBBox();t.transition("click",{point:o,shiftKey:n,textInputValue:s,bbox:r})}onDoubleClick(e){const{state:t}=this;if(!this.getAnnotationContext())return;const i=pv.from(e);t.transition("dblclick",{offset:i})}onAxisButtonClick(e,t){this.cancel(),this.reset();const i=this.getAnnotationContext();if(!this.annotationData||!i)return;const{state:n}=this;this.pushAnnotationState(DK.Annotations);const o="horizontal"===t;if(n.transition(o?"horizontal-line":"vertical-line"),this.optionsToolbar.hide(),!e)return;const s=DH(e,i);f_(i,s)&&(n.transition("click",{point:s,shiftKey:!1}),this.update())}onResize(){const e=this.textInput.getValue(),t=this.textInput.getBBox();this.state.transition("resize",{textInputValue:e,bbox:t})}hoverTouchPreHandler(e){"touch"===e.device&&this.onHover(e)}dragMoveTouchPreHandler(e){"touch"===e.device&&this.ctx.interactionManager.isState(DK.AnnotationsSelected)&&e.sourceEvent.preventDefault()}onDragStart(e){if(!this.ctx.interactionManager.isState(DK.AnnotationsDraggable))return;const t=this.getAnnotationContext();if(!t)return;const i=pv.from(e),n=DH(i,t),o=this.textInput.getValue(),s=this.textInput.getBBox();this.state.transition("dragStart",{context:t,offset:i,point:n,textInputValue:o,bbox:s})}onDrag(e){if(!this.ctx.interactionManager.isState(DK.AnnotationsDraggable))return;const t=this.getAnnotationContext();if(!t)return;const i=pv.from(e),n=DH(i,t),o=e.sourceEvent.shiftKey,s=this.textInput.getValue(),r=this.textInput.getBBox();this.state.transition("drag",{context:t,offset:i,point:n,shiftKey:o,textInputValue:s,bbox:r})}onDragEnd(){this.state.transition("dragEnd")}onCancel(e){const{sourceEvent:t}=null!==e&&void 0!==e?e:{};(null===t||void 0===t?void 0:t.currentTarget)===(null===t||void 0===t?void 0:t.target)&&(this.cancel(),this.reset())}onDelete(){this.textInput.isVisible()||(this.cancel(),this.delete(),this.reset(),this.update())}onTextInput(e){const{state:t}=this,i=this.getAnnotationContext();if(!i)return;const{key:n,shiftKey:o}=e,s=this.textInput.getValue(),r=this.textInput.getBBox();t.transition("textInput",{key:n,shiftKey:o,textInputValue:s,bbox:r,context:i})}onKeyDown(e){var t,i;const{state:n}=this,o=this.getAnnotationContext();if(!o)return;const{sourceEvent:s}=e,{shiftKey:r,ctrlKey:a,metaKey:l}=s,d=a||l,c=a||r;n.transition("keyDown",{shiftKey:r,context:o});const u={x:0,y:0},h=Math.max(null!==(t=null===o||void 0===o?void 0:o.xAxis.scale.bandwidth)&&void 0!==t?t:0,c?10:1),p=Math.max(null!==(i=null===o||void 0===o?void 0:o.yAxis.scale.bandwidth)&&void 0!==i?i:0,c?10:1);switch(s.key){case"ArrowDown":u.y=p;break;case"ArrowUp":u.y=-p;break;case"ArrowLeft":u.x=-h;break;case"ArrowRight":u.x=h;break;case"Escape":return void this.onCancel();case"Backspace":case"Delete":return void this.onDelete()}if((u.x||u.y)&&(n.transition("translate",{translation:u}),s.stopPropagation(),s.preventDefault()),d)switch(s.key){case"c":return void n.transition("copy");case"x":return n.transition("cut"),void this.recordActionAfterNextUpdate("Cut annotation");case"v":return n.transition("paste"),void this.recordActionAfterNextUpdate("Paste annotation")}}onKeyUp(e){const{shiftKey:t}=e.sourceEvent,i=this.getAnnotationContext();i&&(this.state.transition("keyUp",{shiftKey:t,context:i}),this.state.transition("translateEnd"))}clear(){this.cancel(),this.deleteAll(),this.reset()}reset(){this.state.transition("reset")}cancel(){this.state.transition("cancel")}delete(){this.state.transition("delete")}deleteAll(){this.state.transition("deleteAll")}deleteEphemeralAnnotations(){let e=!1;for(const[t,i]of this.annotationData.entries())yj(i)&&(this.annotationData.splice(t,1),e=!0);e&&this.recordActionAfterNextUpdate("Delete ephemeral annotations")}hideOverlays(){this.settingsDialog.hide(),this.toolbar.hideOverlays(),this.optionsToolbar.hideOverlays()}pushAnnotationState(e){this.ctx.interactionManager.pushState(e),this.ctx.tooltipManager.suppressTooltip("annotations")}popAnnotationState(e){this.ctx.interactionManager.popState(e),this.ctx.tooltipManager.unsuppressTooltip("annotations")}isAnnotationState(){return this.ctx.interactionManager.isState(DK.Annotations)||this.ctx.interactionManager.isState(DK.AnnotationsSelected)}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ku.PRE_SCENE_RENDER;this.ctx.updateService.update(e)}};kV([ru],TK.prototype,"toolbar",2),kV([ru],TK.prototype,"optionsToolbar",2),kV([ru],TK.prototype,"axesButtons",2),kV([ru,og((e,t)=>{const i=null===t||void 0===t||t;e.toolbar.enabled=i,e.optionsToolbar.enabled=i,e.axesButtons.enabled=i})],TK.prototype,"enabled",2),kV([ru],TK.prototype,"snap",2);var RK=TK,EK={stroke:{$ref:"foregroundColor"},strokeOpacity:1,strokeWidth:2},PK={fill:lp,strokeOpacity:1,strokeWidth:2},OK={color:{$ref:"chartBackgroundColor"},fontSize:{$rem:Oh.LARGE},fontFamily:{$ref:"fontFamily"}},FK=p(p({},OK),{},{enabled:!0,fill:{$ref:"foregroundColor"},fontSize:{$ref:"fontSize"}}),zK=p(p({},OK),{},{textAlign:"left"}),BK=p(p({},OK),{},{position:"top",alignment:"center",color:{$ref:"textColor"}}),VK=p(p({},OK),{},{position:"top",alignment:"center",color:{$ref:"textColor"}}),GK=p(p({},OK),{},{fontSize:{$ref:"fontSize"},color:up,fill:dp,stroke:cp,strokeWidth:1,divider:{stroke:hp,strokeWidth:1,strokeOpacity:.5}}),HK=p(p({},EK),{},{background:{fill:{$ref:"foregroundColor"},fillOpacity:.075},handle:p({},PK),text:p({},BK),statistics:p({},GK)}),jK={enabled:!1,line:p(p({},EK),{},{handle:p({},PK),text:p({},BK)}),"horizontal-line":p(p({},EK),{},{handle:p({},PK),axisLabel:p({},FK),text:p({},BK)}),"vertical-line":p(p({},EK),{},{handle:p({},PK),axisLabel:p({},FK),text:p({},BK)}),"disjoint-channel":p(p({},EK),{},{background:{fill:{$ref:"foregroundColor"},fillOpacity:.075},handle:p({},PK),text:p({},VK)}),"parallel-channel":p(p({},EK),{},{middle:{lineDash:[6,5],strokeWidth:1},background:{fill:{$ref:"foregroundColor"},fillOpacity:.075},handle:p({},PK),text:p({},VK)}),"fibonacci-retracement":p(p({},EK),{},{strokes:sp,rangeStroke:{$ref:"foregroundColor"},handle:p({},PK),text:p(p({},BK),{},{position:"center"}),label:p(p({},OK),{},{color:void 0,fontSize:{$rem:Oh.SMALLER}})}),"fibonacci-retracement-trend-based":p(p({},EK),{},{strokes:sp,rangeStroke:{$ref:"foregroundColor"},handle:p({},PK),text:p(p({},BK),{},{position:"center"}),label:p(p({},OK),{},{color:void 0,fontSize:{$rem:Oh.SMALLER}})}),callout:p(p(p({},EK),zK),{},{color:{$ref:"textColor"},handle:p({},PK),fill:{$ref:"foregroundColor"},fillOpacity:.075}),comment:p(p({},zK),{},{fontWeight:700,handle:p({},PK),fill:{$ref:"foregroundColor"}}),note:p(p({},zK),{},{color:vp,fill:op,stroke:{$ref:"chartBackgroundColor"},strokeWidth:1,strokeOpacity:1,handle:p({},PK),background:{fill:mp,stroke:fp,strokeWidth:1}}),text:p(p({},zK),{},{color:{$ref:"textColor"},handle:p({},PK)}),arrow:p(p({},EK),{},{handle:p({},PK),text:p({},BK)}),"arrow-up":{fill:{$palette:"up.fill"},handle:p(p({},PK),{},{stroke:{$ref:"foregroundColor"}})},"arrow-down":{fill:{$palette:"down.fill"},handle:p(p({},PK),{},{stroke:{$ref:"foregroundColor"}})},"date-range":p({},HK),"price-range":p({},HK),"date-price-range":p({},HK),"quick-date-price-range":{up:p(p({},EK),{},{fill:ap,fillOpacity:.2,handle:p({},PK),statistics:p(p({},GK),{},{color:"#fff",fill:ap,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}})}),down:p(p({},EK),{},{stroke:gp,fill:pp,fillOpacity:.2,handle:p(p({},PK),{},{stroke:gp}),statistics:p(p({},GK),{},{color:"#fff",fill:pp,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}})})},axesButtons:{},toolbar:{buttons:{$shallowSimple:[{icon:"text-annotation",tooltip:"toolbarAnnotationsTextAnnotations",value:"text-menu"},{icon:"trend-line-drawing",tooltip:"toolbarAnnotationsLineAnnotations",value:"line-menu"},{icon:"arrow-drawing",tooltip:"toolbarAnnotationsShapeAnnotations",value:"shape-menu"},{icon:"delete",tooltip:"toolbarAnnotationsClearAll",value:"clear"}]},padding:{$ref:"chartPadding"}},optionsToolbar:{buttons:{$shallowSimple:[{icon:"text-annotation",tooltip:"toolbarAnnotationsTextColor",value:"text-color"},{icon:"line-color",tooltip:"toolbarAnnotationsLineColor",value:"line-color"},{icon:"fill-color",tooltip:"toolbarAnnotationsFillColor",value:"fill-color"},{tooltip:"toolbarAnnotationsTextSize",value:"text-size"},{tooltip:"toolbarAnnotationsLineStrokeWidth",value:"line-stroke-width"},{icon:"line-style-solid",tooltip:"toolbarAnnotationsLineStyle",value:"line-style-type"},{icon:"settings",tooltip:"toolbarAnnotationsSettings",value:"settings"},{icon:"unlocked",tooltip:"toolbarAnnotationsLock",ariaLabel:"toolbarAnnotationsLock",checkedOverrides:{icon:"locked",tooltip:"toolbarAnnotationsUnlock"},value:"lock"},{icon:"delete",tooltip:"toolbarAnnotationsDelete",value:"delete"}]}}},WK={type:"plugin",name:"annotations",chartType:"cartesian",enterprise:!0,version:GC,options:uE.annotationOptionsDef,themeTemplate:jK,create:e=>new RK(e),patchContext:e=>{e.sharedToolbar||(e.sharedToolbar=new KG(e),e.cleanup.register(()=>e.sharedToolbar.destroy()))}},{Range:_K,TranslatableGroup:KK,BBox:UK,FillGradientDefaults:YK,FillImageDefaults:$K,FillPatternDefaults:ZK,getShapeFill:XK,InteractionState:qK}=uE,QK=class extends Ra{constructor(e){super(),this.ctx=e,this.id=xm(this),this.enabled=!1,this.stroke="rgb(195, 195, 195)",this.lineDash=[6,3],this.lineDashOffset=0,this.strokeWidth=1,this.strokeOpacity=1,this.fill="#c16068",this.fillOpacity=1,this.fillGradientDefaults=new YK,this.fillPatternDefaults=new ZK,this.fillImageDefaults=new $K,this.bounds=new UK(0,0,0,0),this.bandHighlightGroup=new KK({name:"bandHighlight",zIndex:bp.AXIS_BAND_HIGHLIGHT}),this.rangeNode=this.bandHighlightGroup.appendChild(new _K),this.activeAxisHighlight=void 0,this.axisCtx=e.parent,this.hideBand(),e.domManager.addEventListener("focusin",t=>{let{target:i}=t;const n=i instanceof HTMLElement&&e.domManager.contains(i,"series-area");this.bandHighlightGroup.visible&&!n&&(this.hideBand(),this.ctx.updateService.update(Ku.SCENE_RENDER))});const{widgets:{seriesWidget:t,seriesDragInterpreter:i},animationManager:n,eventsHub:o}=e;this.cleanup.register(e.scene.attachNode(this.bandHighlightGroup),t.addListener("mousemove",e=>this.onHoverLikeEvent(e)),t.addListener("mouseleave",()=>this.clearAllHighlight()),n.addListener("animation-start",()=>this.clearAllHighlight()),o.on("layout:complete",e=>this.layout(e)),o.on("series:focus-change",()=>this.onKeyPress()),o.on("zoom:pan-start",()=>this.clearAllHighlight()),o.on("zoom:change-complete",()=>this.clearAllHighlight()),o.on("dom:resize",()=>this.clearAllHighlight()),o.on("axis:change",()=>this.axisChange())),i&&this.cleanup.register(i.events.on("drag-move",e=>this.onHoverLikeEvent(e)),i.events.on("click",e=>this.onClick(e)))}axisChange(){this.onHighlightChange()}isHover(e){return"mousemove"===e.type||"click"===e.type||"touch"===e.device&&"hover"===this.ctx.chartService.touch.dragAction}onClick(e){"touch"===e.device&&this.onHoverLikeEvent(e)}clearAllHighlight(){this.ctx.interactionManager.isState(qK.Clickable)&&this.onHighlightChange()}onKeyPress(){this.ctx.interactionManager.isState(qK.Default)&&this.onHighlightChange()}onHoverLikeEvent(e){const t=this.isHover(e)?qK.Clickable:qK.AnnotationsMoveable;this.ctx.interactionManager.isState(t)&&this.handleHoverHighlight(e)}handleHoverHighlight(e){if(!e)return;const{currentX:t,currentY:i}=e;this.onHighlightChange(this.axisCtx.pickBand({x:t,y:i}))}layout(e){let{series:{rect:t,visible:i},axes:n}=e;if(!i||!n||!this.enabled)return;const{position:o="left",axisId:s}=this.axisCtx,r=n[s];if(!r)return;this.axisLayout=r,this.bounds=t.clone().grow(r.gridPadding,o);const{bandHighlightGroup:a,bounds:l}=this;a.translationX=Math.round(l.x),a.translationY=Math.round(l.y),this.updateBand()}updateBand(){const{rangeNode:e,stroke:t,strokeWidth:i,strokeOpacity:n,lineDash:o,fill:s,fillOpacity:r,fillGradientDefaults:a,fillPatternDefaults:l,fillImageDefaults:d,lineDashOffset:c,axisLayout:u}=this;u&&(e.stroke=t,e.strokeWidth=i,e.strokeOpacity=n,e.lineDash=o,e.lineDashOffset=c,e.fill=XK(s,a,l,d),e.fillOpacity=r,e.startLine=!0,e.endLine=!0)}isVertical(){return this.axisCtx.direction===_u.X}onHighlightChange(e){this.enabled&&(this.activeAxisHighlight=e,this.activeAxisHighlight?this.showBand():this.hideBand(),this.ctx.updateService.update(Ku.SCENE_RENDER))}updateBandPosition(){var e;const{rangeNode:t,bounds:i}=this,{band:n}=null!==(e=this.activeAxisHighlight)&&void 0!==e?e:{};if(void 0==n)return void this.hideBand();let o=Math.min(...n),s=Math.max(...n);if(s-o<1){const e=(o+s)/2;o=e-.5,s=e+.5}this.isVertical()?(t.y1=0,t.y2=i.height,t.x1=o,t.x2=s,t.horizontal=!0):(t.y1=o,t.y2=s,t.x1=0,t.x2=i.width,t.horizontal=!1)}showBand(){this.updateBandPosition(),this.bandHighlightGroup.visible=!0}hideBand(){this.bandHighlightGroup.visible=!1}};QK.className="BandHighlight",kV([ru],QK.prototype,"enabled",2),kV([ru],QK.prototype,"stroke",2),kV([ru],QK.prototype,"lineDash",2),kV([ru],QK.prototype,"lineDashOffset",2),kV([ru],QK.prototype,"strokeWidth",2),kV([ru],QK.prototype,"strokeOpacity",2),kV([ru],QK.prototype,"fill",2),kV([ru],QK.prototype,"fillOpacity",2),kV([ru],QK.prototype,"fillGradientDefaults",2),kV([ru],QK.prototype,"fillPatternDefaults",2),kV([ru],QK.prototype,"fillImageDefaults",2);var JK={type:"axis:plugin",name:"bandHighlight",chartType:"cartesian",axisTypes:["category","ordinal-time","unit-time","grouped-category"],enterprise:!0,version:GC,themeTemplate:{enabled:!1,strokeWidth:0,lineDash:[],fill:{$foregroundBackgroundMix:.05}},create:e=>new QK(e)},{LayoutElement:eU,Menu:tU}=uE,iU=[{label:"toolbarSeriesTypeOHLC",icon:"ohlc-series",value:"ohlc"},{label:"toolbarSeriesTypeCandles",icon:"candlestick-series",value:"candlestick"},{label:"toolbarSeriesTypeHollowCandles",icon:"hollow-candlestick-series",value:"hollow-candlestick"},{label:"toolbarSeriesTypeLine",icon:"line-series",value:"line"},{label:"toolbarSeriesTypeStepLine",icon:"step-line-series",value:"step-line"},{label:"toolbarSeriesTypeHLC",icon:"hlc-series",value:"hlc"},{label:"toolbarSeriesTypeHighLow",icon:"high-low-series",value:"high-low"}],nU=class extends Ra{constructor(e){super(),this.ctx=e,this.enabled=!1,this.menu=new tU(this.ctx,"chart-toolbar"),this.toolbar=e.sharedToolbar.getSharedToolbar("chartToolbar"),this.cleanup.register(this.toolbar.addToolbarListener("button-pressed",this.onButtonPressed.bind(this)),e.layoutManager.registerElement(eU.ToolbarLeft,this.onLayoutStart.bind(this)),()=>this.toolbar.destroy())}onLayoutStart(e){this.enabled&&(this.updateButton(),this.toolbar.layout(e.layoutBox))}onButtonPressed(e){let{event:t,buttonBounds:i,buttonWidget:n}=e;this.menu.setAnchor({x:i.x+i.width+6,y:i.y}),this.menu.show(n,{items:iU,menuItemRole:"menuitemradio",ariaLabel:this.ctx.localeManager.t("toolbarSeriesTypeDropdown"),class:"ag-charts-chart-toolbar__menu",value:this.getChartType(),sourceEvent:t.sourceEvent,onPress:e=>{this.setChartType(e.value),this.hidePopover()},onHide:()=>{this.toolbar.clearActiveButton()}}),this.toolbar.toggleActiveButtonByIndex(0)}updateButton(){var e;const t=this.getChartType(),i=null===(e=iU.find(e=>e.value===t))||void 0===e?void 0:e.icon;null!=i&&this.toolbar.updateButtons([{icon:i,tooltip:"toolbarSeriesTypeDropdown",value:"menu"}])}hidePopover(){this.toolbar.clearActiveButton(),this.menu.hide()}setChartType(e){var t;const i={chartType:e};null===(t=this.ctx.chartService.publicApi)||void 0===t||t.updateDelta(i).catch(e=>jr.error(e))}getChartType(){var e;const t=null===(e=this.ctx.chartService.publicApi)||void 0===e||null===(e=e.getOptions())||void 0===e?void 0:e.chartType;return null!=t&&iU.some(e=>e.value===t)?t:"candlestick"}};kV([ru,ng({changeValue(e){var t;null===(t=this.toolbar)||void 0===t||t.setHidden(!e)}})],nU.prototype,"enabled",2);var oU={type:"plugin",name:"chartToolbar",chartType:"cartesian",enterprise:!0,version:GC,options:{enabled:Cd},create:e=>new nU(e),patchContext:e=>{e.sharedToolbar||(e.sharedToolbar=new KG(e),e.cleanup.register(()=>e.sharedToolbar.destroy()))}};function sU(e,t){return"always"===e||("series-area"===e?"series-area"===t||"series-node"===t:e===t)}function rU(e,t,i){var n;let o=!0;if("separator"===t.type){const e=i.at(-1);o=void 0!==e&&"separator"!==e.type}if(o&&(o=sU(null!==(n=t.showOn)&&void 0!==n?n:"always",e)),o){const e=new cU(t);return i.push(e),e}}function aU(e,t,i,n){t.isVisible(i)&&rU(e,t.builtins.items[i],n)}function lU(e,t,i,n){const{builtins:o}=t;if(cl(i,o.lists))for(const s of o.lists[i])aU(e,t,s,n);else aU(e,t,i,n)}function dU(e,t,i,n){var o;for(const s of i)if("string"===typeof s)lU(e,t,s,n);else{const i=rU(e,s,n);s.items&&i&&s.items.length>0&&dU(e,t,s.items,i.items)}"separator"===(null===(o=n.at(-1))||void 0===o?void 0:o.type)&&n.pop()}var cU=class{constructor(e){this.type="action",this.showOn="always",this.label="",this.iconUrl=void 0,this.enabled=!0,this.items=[],this.action=void 0,e&&this.setOptions(e),this.items=[]}setField(e,t,i){t[e]=i}setOptions(e){let t;for(t in e)void 0!==e[t]&&this.setField(t,this,e[t])}},uU="ag-charts-context-menu",{ContextMenuRegistry:hU}=uE,pU="context-menu",gU=["angleKey","calloutLabelKey","colorKey","labelKey","radiusKey","sectorLabelKey","sizeKey","xKey","yKey"],mU=class extends Ra{constructor(e){if(super(),this.ctx=e,this.enabled=!0,this.darkTheme=!1,this.items=["defaults"],this.pickedNode=void 0,this.showEvent=void 0,this.x=0,this.y=0,this.collapsingSubMenus=0,this.menuWidget=new _F.MenuWidget,this.interactionManager=e.interactionManager,this.element=e.domManager.addChild("canvas-overlay",pU),this.element.classList.add(uU),this.element.style.display="none",this.element.addEventListener("contextmenu",e=>e.preventDefault()),this.element.addEventListener("focusout",e=>{let{relatedTarget:t}=e;this.collapsingSubMenus>0||(null==t||t instanceof Node&&!this.element.contains(t))&&this.hide()}),this.cleanup.register(()=>this.element.remove(),()=>this.menuWidget.destroy(),e.eventsHub.on("dom:hidden",()=>this.hide()),this.menuWidget.addListener("collapse-widget",()=>this.onCollapse())),this.menuWidget.addClass("".concat(uU,"__menu")),"undefined"!==typeof MutationObserver){const e=new MutationObserver(()=>{this.element.contains(this.menuWidget.getElement())&&this.reposition()});e.observe(this.element,{childList:!0}),this.mutationObserver=e,this.cleanup.register(()=>e.disconnect())}this.ctx.contextMenuRegistry.builtins.items.download.action=()=>{var t;const i=e.chartService.title;let n="image";null!==i&&void 0!==i&&i.enabled&&(n=i.node.getPlainText().replace(/\.+/,"")),null===(t=this.ctx.chartService.publicApi)||void 0===t||t.download({fileName:n}).catch(e=>{jr.error("Unable to download chart",e)})},this.cleanup.register(this.ctx.eventsHub.on("context-menu:complete",e=>this.onContext(e)))}makeGetItemsParams(e){const{showOn:t}=e,{context:i}=this.ctx.chartService,n=function(e,t,i){const n=[],{builtins:o}=i;for(const s of t)if("string"===typeof s&&cl(s,o.lists))for(const e of o.lists[s])n.push(e);else n.push(s);return n.filter(t=>{if("string"===typeof t){var n;const o=null!==(n=i.builtins.items[t].showOn)&&void 0!==n?n:"always";return i.isVisible(t)&&sU(o,e)}var o;return sU(null!==(o=t.showOn)&&void 0!==o?o:"always",e)})}(t,this.items,this.ctx.contextMenuRegistry);switch(t){case"always":case"series-area":return{showOn:t,context:i,defaultItems:n};case"series-node":{if(null==this.pickedNode)throw new Error("this.pickedNode is null");const e={showOn:t,context:i,seriesId:this.pickedNode.series.id,datum:this.pickedNode.datum,defaultItems:n};for(const t of gU)void 0!==this.pickedNode[t]&&(e[t]=this.pickedNode[t]);return e}case"legend-item":if(null==this.pickedLegendItem)throw new Error("this.pickedLegendItem is null");const{itemId:e,seriesId:o,label:s,enabled:r}=this.pickedLegendItem,a=ed(s.text);if("string"!==typeof e)throw new Error("unexpected itemId type: [".concat(typeof e,"] (expected [string])"));return{showOn:t,context:i,itemId:e,seriesId:o,text:a,visible:r,defaultItems:n};default:return t}}expandItemsOptions(e){const t=[];let i;if(this.getItems){const t=this.makeGetItemsParams(e);i=this.getItems(t)}return null!==i&&void 0!==i||(i=this.items),dU(e.showOn,this.ctx.contextMenuRegistry,i,t),t}onContext(e){if(!this.enabled)return;e.widgetEvent.sourceEvent.preventDefault(),this.showEvent=e.widgetEvent.sourceEvent,this.x=e.x,this.y=e.y,this.pickedNode=void 0,this.pickedLegendItem=void 0,hU.check("series-node",e)?this.pickedNode=e.context.pickedNode:hU.check("legend-item",e)&&(this.pickedLegendItem=e.context.legendItem);const t=this.expandItemsOptions(e);0!==t.length&&this.show(e.widgetEvent,t)}show(e,t){const{sourceEvent:i}=e;this.interactionManager.pushState(uE.InteractionState.ContextMenu),this.element.style.display="block";const n="touch"!==i.pointerType&&void 0;void 0!==n&&this.ctx.chartService.overrideFocusVisible(n),this.createMenu(t),this.element.appendChild(this.menuWidget.getElement()),this.menuWidget.expand({sourceEvent:i,overrideFocusVisible:n})}hide(){this.menuWidget.collapse()}onCollapse(){this.interactionManager.popState(uE.InteractionState.ContextMenu),this.menuWidget.getElement().remove(),this.element.style.display="none"}onSubMenuExpand(e,t){const i=e.getBounds();e.setFocusOverride(!0),e.getElement().insertAdjacentElement("afterend",t.getElement()),t.getElement().style.position="absolute";const n=this.ctx.domManager.getBoundingClientRect(),o=e.getBoundingClientRect(),s=n.right-o.right,r=o.left-n.left,{offsetWidth:a,offsetHeight:l}=t.getElement();let d=i.y;if(n.height>l){const e=n.bottom-o.top;e<l&&(d-=l-e)}if(s>=a)t.setBounds({x:i.x+i.width,y:d});else{const e=i.x-a,n=r+e;n>=0?t.setBounds({x:e,y:d}):t.setBounds({x:e-n,y:d})}}onSubMenuCollapse(e,t){e.setFocusOverride(void 0),this.collapsingSubMenus++,t.remove(),this.collapsingSubMenus--}createMenu(e){const{menuWidget:t}=this;t.clear(),t.setTabIndex(-1),this.createMenuItems(t,e)}createMenuItems(e,t){for(const i of t)switch(i.type){case"separator":e.addSeparator().classList.add("".concat(uU,"__divider"));break;case"action":if(0===i.items.length){const t=new _F.MenuItemWidget;this.initButtonElement(t,i),e.addChild(t)}else{const{subMenuButton:t,subMenu:n}=e.addSubMenu();n.addClass("".concat(uU,"__menu")),n.addListener("expand-widget",()=>this.onSubMenuExpand(t,n)),n.addListener("collapse-widget",()=>this.onSubMenuCollapse(t,n)),this.initButtonElement(t,i),this.createMenuItems(n,i.items)}break;default:throw new Error("unhandled case")}}createButtonOnClick(e,t){return hU.checkCallback("legend-item",e,t)?e=>{const i=e.sourceEvent;if(this.pickedLegendItem){const{seriesId:e,itemId:n,label:o}=this.pickedLegendItem,{chartService:s}=this.ctx;if("string"!==typeof n)return void jr.error("unexpected itemId type: [".concat(typeof n,"] (expected [string])"));const r=s.series.find(t=>t.id===e),a=[null===r||void 0===r?void 0:r.properties,s],l={type:"contextmenu",seriesId:e,itemId:n,text:ed(o.text),event:i};Cp(a,t,l),this.hide()}else jr.error("legend item not found")}:hU.checkCallback("series-area",e,t)?()=>{const e=this.ctx.chartService,i={type:"seriesContextMenuAction",event:this.showEvent};Cp(e,t,i),this.hide()}:hU.checkCallback("series-node",e,t)?()=>{const{showEvent:e}=this,{chartService:i}=this.ctx,n=this.pickedNode,o=[null===n||void 0===n?void 0:n.series.properties,i],s=null===n||void 0===n?void 0:n.series.createNodeContextMenuActionEvent(e,n);s?Cp(o,t,s):jr.error("series node not found"),this.hide()}:()=>{const e=this.ctx.chartService,i={type:"contextMenuEvent",event:this.showEvent};Cp(e,t,i),this.hide()}}initTableCells(e){const t=zr("div"),i=zr("div"),n=zr("div");return t.classList.toggle("".concat(uU,"__icon"),!0),i.classList.toggle("".concat(uU,"__cell"),!0),n.classList.toggle("".concat(uU,"__cell"),!0),t.ariaHidden="true",i.role="presentation",n.ariaHidden="true",e.append(t,i,n),{cellIcon:t,cellLabel:i,cellArrow:n}}initButtonElement(e,t){e.addClass("".concat(uU,"__item")),e.setEnabled(t.enabled);const i=this.ctx.localeManager.t(t.label),n="".concat(uU,"__cellpadding"),{cellIcon:o,cellLabel:s,cellArrow:r}=this.initTableCells(e.getElement());if(s.textContent=i,s.classList.add(n),null!=t.iconUrl){const e=zr("img");e.src=t.iconUrl,o.append(e),o.classList.add(n)}if(t.items.length>0){const e=zr("span",Ip("chevron-right"));r.append(e),r.classList.add(n)}const{showOn:a,action:l}=t;null!=l&&e.addListener("click",this.createButtonOnClick(a,l)),0===t.items.length&&(e.addListener("mouseleave",()=>e.setFocusOverride(!1)),e.addListener("mouseenter",()=>e.setFocusOverride(void 0)))}reposition(){let{x:e,y:t}=this;this.element.style.top="unset",this.element.style.bottom="unset";const i=this.ctx.domManager.getBoundingClientRect(),{offsetWidth:n,offsetHeight:o}=this.element;e=za(0,e,i.width-n),t=za(0,t,i.height-o),this.element.style.left="".concat(e,"px"),this.element.style.top="calc(".concat(t,"px - 0.5em)")}destroy(){var e;super.destroy(),null===(e=this.mutationObserver)||void 0===e||e.disconnect(),this.ctx.domManager.removeStyles(pU),this.ctx.domManager.removeChild("canvas-overlay",pU)}};kV([ru],mU.prototype,"enabled",2),kV([ru],mU.prototype,"darkTheme",2),kV([ru],mU.prototype,"items",2),kV([ru],mU.prototype,"getItems",2);var fU={type:"plugin",name:"contextMenu",enterprise:!0,version:GC,options:{enabled:Cd,items:Gc,getItems:Ud(Gc,"a menu items array")},themeTemplate:{enabled:!0,darkTheme:Gh},create:e=>new mU(e)};function vU(e){return"object"===typeof(null===e||void 0===e?void 0:e.datum)?e.datum:null}fU.options.darkTheme=gd(Cd);var{FormatManager:yU}=uE,bU=class extends kh{constructor(){super(...arguments),this.enabled=!0,this.xOffset=0,this.yOffset=0,this.format=void 0,this.renderer=void 0,this._cachedFormatter=void 0}formatValue(e,t,i,n){const{formatter:o,format:s}=this,{domain:r,boundSeries:a}=n;let l;if(null!=o){l=e(o,{value:i,domain:r,fractionDigits:"number"===n.type?n.fractionDigits:void 0,unit:"date"===n.type?n.unit:void 0,step:"date"===n.type?n.step:void 0,boundSeries:a})}if(null!=s){var d,c;let e=this._cachedFormatter;null!=e&&e.type===t&&e.format===s||(e={type:t,format:s,formatter:yU.getFormatter(t,s)},this._cachedFormatter=e),null!==l&&void 0!==l||(l=null===(d=(c=e).formatter)||void 0===d?void 0:d.call(c,i))}return null==l?void 0:String(l)}};kV([ru],bU.prototype,"enabled",2),kV([ru],bU.prototype,"xOffset",2),kV([ru],bU.prototype,"yOffset",2),kV([ru],bU.prototype,"formatter",2),kV([ru],bU.prototype,"format",2),kV([ru],bU.prototype,"renderer",2);var xU=class extends bU{constructor(e,t,i){super(),this.domManager=e,this.id=xm(this),this.element=e.addChild("canvas-overlay","crosshair-label-".concat(this.id)),this.element.classList.add("ag-charts-crosshair-label"),Zp(this.element,"aria-hidden",!0),this.element.dataset.key=t,this.element.dataset.axisId=i}show(e){const{element:t}=this,i=e.x+this.xOffset,n=e.y+this.yOffset;t.style.top="".concat(Math.round(n),"px"),t.style.left="".concat(Math.round(i),"px"),this.toggle(!0)}setLabelHtml(e){let{html:t,styles:i}=e;if(void 0!==t&&(this.element.innerHTML=t),void 0!==i){var n;const e=null!==(n=this.element.children[0])&&void 0!==n?n:this.element;Object.assign(e.style,i)}}getBBox(){const{element:e}=this;return new uE.BBox(e.clientLeft,e.clientTop,e.clientWidth,e.clientHeight)}toggle(e){this.element.classList.toggle("ag-charts-crosshair-label--hidden",!e)}destroy(){this.domManager.removeChild("canvas-overlay","crosshair-label-".concat(this.id))}toLabelHtml(e,t){var i,n;if("string"===typeof e)return{html:e,styles:{}};t=null!==t&&void 0!==t?t:{};const{text:o=(null!==(i=t.text)&&void 0!==i?i:""),color:s=t.color,backgroundColor:r=t.backgroundColor,opacity:a=(null!==(n=t.opacity)&&void 0!==n?n:1)}=e,l={opacity:a,"background-color":null===r||void 0===r?void 0:r.toLowerCase(),color:s};return{html:'<div class="ag-charts-crosshair-label-content">\n                    <span>'.concat(o,"</span>\n                </div>"),styles:l}}};xU.className="CrosshairLabel";var{Group:CU,TranslatableGroup:SU,Line:wU,BBox:MU,InteractionState:kU}=uE,DU=class extends Ra{constructor(e){super(),this.ctx=e,this.id=xm(this),this.enabled=!1,this.stroke="rgb(195, 195, 195)",this.lineDash=[6,3],this.lineDashOffset=0,this.strokeWidth=1,this.strokeOpacity=1,this.snap=!0,this.label=new bU,this.seriesRect=new MU(0,0,0,0),this.bounds=new MU(0,0,0,0),this.crosshairGroup=new SU({name:"crosshairs",zIndex:bp.SERIES_CROSSHAIR}),this.lineGroup=this.crosshairGroup.appendChild(new CU({name:"".concat(this.id,"-crosshair-lines"),zIndex:bp.SERIES_CROSSHAIR})),this.lineGroupSelection=uE.Selection.select(this.lineGroup,wU,!1),this.activeHighlight=void 0,this.axisCtx=e.parent,this.labels={},this.hideCrosshairs(),e.domManager.addEventListener("focusin",t=>{let{target:i}=t;const n=i instanceof HTMLElement&&e.domManager.contains(i,"series-area");this.crosshairGroup.visible&&!n&&(this.hideCrosshairs(),this.ctx.updateService.update(Ku.SCENE_RENDER))});const{seriesDragInterpreter:t}=e.widgets;this.cleanup.register(e.scene.attachNode(this.crosshairGroup),e.widgets.seriesWidget.addListener("mousemove",e=>this.onMouseHoverLike(e)),e.widgets.seriesWidget.addListener("mouseleave",()=>this.onMouseOut()),e.eventsHub.on("series:focus-change",()=>this.onKeyPress()),e.eventsHub.on("zoom:pan-start",()=>this.onMouseOut()),e.eventsHub.on("zoom:change-complete",()=>this.onMouseOut()),e.eventsHub.on("highlight:change",e=>this.onHighlightChange(e)),e.eventsHub.on("layout:complete",e=>this.layout(e)),()=>{for(const e of Object.values(this.labels))e.destroy()}),t&&this.cleanup.register(t.events.on("drag-move",e=>this.onMouseHoverLike(e)),t.events.on("click",e=>this.onClick(e)))}layout(e){let{series:{rect:t,visible:i},axes:n}=e;if(!i||!n||!this.enabled)return;this.seriesRect=t;const{position:o="left",axisId:s}=this.axisCtx,r=n[s];if(!r)return;this.axisLayout=r,this.bounds=t.clone().grow(r.gridPadding+r.seriesAreaPadding,o);const{crosshairGroup:a,bounds:l}=this;a.translationX=Math.round(l.x),a.translationY=Math.round(l.y);const d=["pointer",...this.axisCtx.seriesKeyProperties()];this.updateSelections(d),this.updateLines(),this.updateLabels(d)}updateSelections(e){this.lineGroupSelection.update(e,void 0,e=>e)}updateLabels(e){const{labels:t,ctx:i}=this;for(const o of e){var n;if(this.label.enabled)null!==(n=t[o])&&void 0!==n||(t[o]=new xU(i.domManager,o,this.axisCtx.axisId));t[o]&&this.updateLabel(t[o])}}updateLabel(e){const{enabled:t,xOffset:i,yOffset:n,format:o,renderer:s}=this.label;e.enabled=t,e.xOffset=i,e.yOffset=n,e.format=o,e.renderer=s}updateLines(){const{lineGroupSelection:e,bounds:t,stroke:i,strokeWidth:n,strokeOpacity:o,lineDash:s,lineDashOffset:r,axisLayout:a}=this;if(!a)return;const l=this.isVertical();e.each(e=>{e.stroke=i,e.strokeWidth=n,e.strokeOpacity=o,e.lineDash=s,e.lineDashOffset=r,e.y1=0,e.y2=l?t.height:0,e.x1=0,e.x2=l?0:t.width})}isVertical(){return this.axisCtx.direction===_u.X}isHover(e){return"mousemove"===e.type||"click"===e.type||"touch"===e.device&&"hover"===this.ctx.chartService.touch.dragAction}formatValue(e){return ed(this.axisCtx.formatScaleValue(e,"crosshair",this.label))}onClick(e){"touch"===e.device&&this.onMouseHoverLike(e)}onMouseHoverLike(e){if(!this.enabled||this.snap)return;const t=this.isHover(e)?kU.Clickable:kU.AnnotationsMoveable;this.ctx.interactionManager.isState(t)&&(this.updatePositions(this.getData(e)),this.crosshairGroup.visible=!0,this.ctx.updateService.update(Ku.SCENE_RENDER))}onMouseOut(){this.ctx.interactionManager.isState(kU.Clickable)&&(this.hideCrosshairs(),this.ctx.updateService.update(Ku.SCENE_RENDER))}onKeyPress(){this.enabled&&!this.snap&&this.ctx.interactionManager.isState(kU.Default)&&this.hideCrosshairs()}onHighlightChange(e){var t,i,n;if(!this.enabled)return;const{crosshairGroup:o,axisCtx:s}=this,{datum:r,series:a}=null!==(t=e.currentHighlight)&&void 0!==t?t:{},l=r&&((null===a||void 0===a||null===(i=a.axes.x)||void 0===i?void 0:i.id)===s.axisId||(null===a||void 0===a||null===(n=a.axes.y)||void 0===n?void 0:n.id)===s.axisId);if(this.activeHighlight=l?e.currentHighlight:void 0,this.activeHighlight){if(this.snap){const e=this.getActiveHighlightData(this.activeHighlight);this.updatePositions(e),o.visible=!0}}else this.hideCrosshairs()}isInRange(e){return this.axisCtx.inRange(e)}updatePositions(e){const{seriesRect:t,lineGroupSelection:i}=this;i.each((i,n)=>{const o=e[n];if(!o)return i.visible=!1,void this.hideLabel(n);i.visible=!0;const{value:s,position:r}=o;let a=0,l=0;this.isVertical()?(a=r,i.x=Math.round(a)):(l=r,i.y=Math.round(l)),this.label.enabled?this.showLabel(a+t.x,l+t.y,s,n):this.hideLabel(n)})}getData(e){var t,i;const{axisCtx:n}=this,o="pointer",{xKey:s="",yKey:r=""}=null!==(t=this.activeHighlight)&&void 0!==t?t:{},{currentX:a,currentY:l}=e,d=vU(this.activeHighlight),c=this.isVertical(),u=c?a:l;let h=null!==(i=null===d||void 0===d?void 0:d[c?s:r])&&void 0!==i?i:"";return n.continuous&&(h=n.scaleInvert(u)),{[o]:{position:u,value:h}}}getActiveHighlightData(e){var t,i;const{axisCtx:n}=this,{series:o,xKey:s="",aggregatedValue:r,cumulativeValue:a,midPoint:l}=e,d=vU(e),c=o.getKeyProperties(n.direction),u=(null!==(t=n.scale.bandwidth)&&void 0!==t?t:0)/2,h=(null===(i=o.axes[n.direction])||void 0===i?void 0:i.id)===n.axisId,p=c.includes("yKey")&&h,g=c.includes("xKey")&&h,m=null!==r&&void 0!==r?r:a;if(p&&void 0!==m){const e=n.scale.convert(m)+u;return this.isInRange(e)?{yKey:{value:m,position:e}}:{}}if(g){var f;const e=null!==(f=this.isVertical()?null===l||void 0===l?void 0:l.x:null===l||void 0===l?void 0:l.y)&&void 0!==f?f:0,t=n.continuous?n.scaleInvert(e):null===d||void 0===d?void 0:d[s];return this.isInRange(e)?{xKey:{value:t,position:e}}:{}}const v={};for(const y of c){const e=o.properties[y],t=null===d||void 0===d?void 0:d[e],i=n.scale.convert(t)+u;this.isInRange(i)&&(v[y]={value:t,position:i})}return v}getLabelHtml(e,t){var i,n;const o=null!==(i=null===(n=this.axisLayout)||void 0===n||null===(n=n.label)||void 0===n?void 0:n.fractionDigits)&&void 0!==i?i:0,s={text:this.formatValue(e)};return this.label.renderer?t.toLabelHtml(this.label.renderer({value:e,fractionDigits:o}),s):t.toLabelHtml(s)}showLabel(e,t,i,n){if(!this.axisLayout)return;const{bounds:o}=this,s=this.labels[n],r=this.getLabelHtml(i,s);s.setLabelHtml(r);const{width:a,height:l}=s.getBBox(),d=this.axisCtx.position;let c=this.axisLayout.label.spacing+this.axisLayout.tickSize;this.axisCtx.direction===_u.X?(c-=4,s.show({x:e-a/2,y:"bottom"===d?o.y+o.height+c:o.y-l-c})):(c-=8,s.show({x:"right"===d?o.x+o.width+c:o.x-a-c,y:t-l/2}))}hideCrosshairs(){this.crosshairGroup.visible=!1;for(const e of Object.keys(this.labels))this.hideLabel(e)}hideLabel(e){var t;null===(t=this.labels[e])||void 0===t||t.toggle(!1)}};DU.className="Crosshair",kV([ru],DU.prototype,"enabled",2),kV([ru],DU.prototype,"stroke",2),kV([ru],DU.prototype,"lineDash",2),kV([ru],DU.prototype,"lineDashOffset",2),kV([ru],DU.prototype,"strokeWidth",2),kV([ru],DU.prototype,"strokeOpacity",2),kV([ru],DU.prototype,"snap",2),kV([ru],DU.prototype,"label",2);var IU={type:"axis:plugin",name:"crosshair",chartType:"cartesian",enterprise:!0,version:GC,themeTemplate:{enabled:{$if:[{$or:[{$eq:[{$path:"../type"},"number"]},{$eq:[{$path:"../type"},"log"]},{$eq:[{$path:"../type"},"time"]},{$eq:[{$path:"../type"},"unit-time"]},{$eq:[{$path:"../type"},"ordinal-time"]}]},!0,!1]},snap:!0,stroke:{$ref:"subtleTextColor"},strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}},create:e=>new DU(e)},AU=class extends Ra{constructor(e){super(),this.enabled=!0,this.getData=()=>Promise.resolve(),this.dataService=e.dataService;let t=!1;this.cleanup.register(e.eventsHub.on("data:load",()=>{t=!0}),e.eventsHub.on("layout:complete",()=>{t&&e.zoomManager.updateZoom({source:"data-update",sourceDetail:"dataSource"})}))}updateCallback(e,t){this.dataService&&(e&&null!=t?this.dataService.updateCallback(t):this.dataService.clearCallback())}};kV([ng({newValue(e){this.updateCallback(e,this.getData)}}),ru],AU.prototype,"enabled",2),kV([ng({newValue(e){this.updateCallback(this.enabled,e)}}),ru],AU.prototype,"getData",2),kV([ng({newValue(e){this.dataService.requestThrottle=e}})],AU.prototype,"requestThrottle",2),kV([ng({newValue(e){this.dataService.dispatchThrottle=e}})],AU.prototype,"updateThrottle",2),kV([ng({newValue(e){this.dataService.dispatchOnlyLatest=!e}})],AU.prototype,"updateDuringInteraction",2);var LU={type:"plugin",name:"dataSource",enterprise:!0,version:GC,options:{getData:Sd,requestThrottle:gd(Pd),updateThrottle:gd(Pd),updateDuringInteraction:gd(Cd)},create:e=>new AU(e)},{BBox:NU}=uE,TU=class{constructor(e){this.components=e,this.union=NU.merge(e)}containsPoint(e,t){if(!this.union.containsPoint(e,t))return!1;for(const i of this.components)if(i.containsPoint(e,t))return!0;return!1}},RU=class extends uE.Group{constructor(){super(),this.capLength=Number.NaN,this._datum=void 0,this.whiskerPath=new uE.Path,this.capsPath=new uE.Path,this.bboxes=new TU([]),this.append([this.whiskerPath,this.capsPath])}get datum(){return this._datum}set datum(e){this._datum=e}calculateCapLength(e,t){const{lengthRatio:i=1,length:n}=e,{lengthRatioMultiplier:o,lengthMax:s}=t,r=null!==n&&void 0!==n?n:i*o;return Math.min(r,s)}getItemStylerParams(e,t,i,n){const{datum:o}=this;if(null==o||null==e.itemStyler)return;const{xLowerKey:s,xUpperKey:r,yLowerKey:a,yUpperKey:l}=e;return p(p({},t),{},{datum:o.datum,seriesId:o.series.id,xKey:o.xKey,yKey:o.yKey,xLowerKey:s,xUpperKey:r,yLowerKey:a,yUpperKey:l,highlighted:i,highlightState:n})}formatStyles(e,t,i,n,o){let{cap:s}=e,r=l(e,vV);const a=this.getItemStylerParams(t,e,n,o);if(null!=a&&null!=t.itemStyler){const e=i.callWithContext(t.itemStyler,a);r=xu(e,r),s=xu(null===e||void 0===e?void 0:e.cap,e,s)}return{whiskerStyle:r,capsStyle:s}}applyStyling(e,t){Tu(["visible","stroke","strokeWidth","strokeOpacity","lineDash","lineDashOffset"],e,t)}update(e,t,i,n,o){if(void 0===this.datum)return;const{whiskerStyle:s,capsStyle:r}=this.formatStyles(e,t,i,n,o),{xBar:a,yBar:l,capDefaults:d}=this.datum,c=this.whiskerPath;this.applyStyling(c,s),c.path.clear(!0),void 0!==l&&(c.path.moveTo(l.lowerPoint.x,l.lowerPoint.y),c.path.lineTo(l.upperPoint.x,l.upperPoint.y)),void 0!==a&&(c.path.moveTo(a.lowerPoint.x,a.lowerPoint.y),c.path.lineTo(a.upperPoint.x,a.upperPoint.y)),c.path.closePath(),this.capLength=this.calculateCapLength(null!==r&&void 0!==r?r:{},d);const u=this.capLength/2,h=this.capsPath;this.applyStyling(h,r),h.path.clear(!0),void 0!==l&&(h.path.moveTo(l.lowerPoint.x-u,l.lowerPoint.y),h.path.lineTo(l.lowerPoint.x+u,l.lowerPoint.y),h.path.moveTo(l.upperPoint.x-u,l.upperPoint.y),h.path.lineTo(l.upperPoint.x+u,l.upperPoint.y)),void 0!==a&&(h.path.moveTo(a.lowerPoint.x,a.lowerPoint.y-u),h.path.lineTo(a.lowerPoint.x,a.lowerPoint.y+u),h.path.moveTo(a.upperPoint.x,a.upperPoint.y-u),h.path.lineTo(a.upperPoint.x,a.upperPoint.y+u)),h.path.closePath()}updateBBoxes(){var e;const{capLength:t,whiskerPath:i,capsPath:n}=this,{yBar:o,xBar:s}=null!==(e=this.datum)&&void 0!==e?e:{},r=t/2,a=[];if(void 0!==o){const e=o.lowerPoint.y-o.upperPoint.y;a.push(new NU(o.lowerPoint.x,o.upperPoint.y,i.strokeWidth,e),new NU(o.lowerPoint.x-r,o.lowerPoint.y,t,n.strokeWidth),new NU(o.upperPoint.x-r,o.upperPoint.y,t,n.strokeWidth))}if(void 0!==s){const e=s.upperPoint.x-s.lowerPoint.x;a.push(new NU(s.lowerPoint.x,s.upperPoint.y,e,i.strokeWidth),new NU(s.lowerPoint.x,s.lowerPoint.y-r,n.strokeWidth,t),new NU(s.upperPoint.x,s.upperPoint.y-r,n.strokeWidth,t))}this.bboxes.components=a,this.bboxes.union=NU.merge(a)}containsPoint(e,t){return this.bboxes.containsPoint(e,t)}pickNode(e,t){return this.containsPoint(e,t)?this:void 0}nearestSquared(e,t,i){const{bboxes:n}=this;if(n.union.distanceSquared(e,t)>i)return{nearest:void 0,distanceSquared:1/0};const{distanceSquared:o}=Lm(e,t,n.components);return{nearest:this,distanceSquared:o}}},EU=class extends uE.Group{nearestSquared(e,t){const{nearest:i,distanceSquared:n}=Nm(e,t,{children:this.children()});if(void 0!==i&&!Number.isNaN(n))return{datum:i.datum,distanceSquared:n}}},PU=class extends kh{};kV([ru],PU.prototype,"visible",2),kV([ru],PU.prototype,"stroke",2),kV([ru],PU.prototype,"strokeWidth",2),kV([ru],PU.prototype,"strokeOpacity",2),kV([ru],PU.prototype,"lineDash",2),kV([ru],PU.prototype,"lineDashOffset",2),kV([ru],PU.prototype,"length",2),kV([ru],PU.prototype,"lengthRatio",2);var OU=class extends kh{constructor(){super(...arguments),this.visible=!0,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.cap=new PU}};kV([ru],OU.prototype,"yLowerKey",2),kV([ru],OU.prototype,"yLowerName",2),kV([ru],OU.prototype,"yUpperKey",2),kV([ru],OU.prototype,"yUpperName",2),kV([ru],OU.prototype,"xLowerKey",2),kV([ru],OU.prototype,"xLowerName",2),kV([ru],OU.prototype,"xUpperKey",2),kV([ru],OU.prototype,"xUpperName",2),kV([ru],OU.prototype,"visible",2),kV([ru],OU.prototype,"stroke",2),kV([ru],OU.prototype,"strokeWidth",2),kV([ru],OU.prototype,"strokeOpacity",2),kV([ru],OU.prototype,"lineDash",2),kV([ru],OU.prototype,"lineDashOffset",2),kV([ru],OU.prototype,"itemStyler",2),kV([ru],OU.prototype,"cap",2);var{fixNumericExtent:FU,groupAccumulativeValueProperty:zU,valueProperty:BU}=uE,VU=class e extends Ra{constructor(e){super(),this.properties=new OU;const t=e.series,{annotationGroup:i,annotationSelections:n}=t;this.cartesianSeries=t,this.groupNode=new EU({name:"".concat(i.id,"-errorBars")}),i.appendChild(this.groupNode),this.selection=uE.Selection.select(this.groupNode,()=>this.errorBarFactory()),n.add(this.selection),t.addEventListener("seriesVisibilityChange",e=>this.onToggleSeriesItem(e)),this.cleanup.register(t.events.on("data-processed",e=>this.onDataProcessed(e)),t.events.on("data-update",e=>this.onDataUpdate(e)),e.eventsHub.on("highlight:change",e=>this.onHighlightChange(e)),()=>this.groupNode.remove(),()=>n.delete(this.selection))}hasErrorBars(){const{xLowerKey:e,xUpperKey:t,yLowerKey:i,yUpperKey:n}=this.properties;return Ka(e)&&Ka(t)||Ka(i)&&Ka(n)}isStacked(){var e;const t=null===(e=this.cartesianSeries.seriesGrouping)||void 0===e?void 0:e.stackCount;return null!=t&&t>0}getUnstackPropertyDefinition(e){const t=[],{xLowerKey:i,xUpperKey:n,yLowerKey:o,yUpperKey:s,xErrorsID:r,yErrorsID:a}=this.getMaybeFlippedKeys(),{xScaleType:l,yScaleType:d}=e;return null!=o&&null!=s&&t.push(BU(o,d,{id:"".concat(a,"-lower")}),BU(s,d,{id:"".concat(a,"-upper")})),null!=i&&null!=n&&t.push(BU(i,l,{id:"".concat(r,"-lower")}),BU(n,l,{id:"".concat(r,"-upper")})),t}getStackPropertyDefinition(e){var t,i;const n=[],{cartesianSeries:o}=this,{xLowerKey:s,xUpperKey:r,yLowerKey:a,yUpperKey:l,xErrorsID:d,yErrorsID:c}=this.getMaybeFlippedKeys(),{xScaleType:u,yScaleType:h}=e,g=null!==(t=null===(i=o.seriesGrouping)||void 0===i?void 0:i.groupIndex)&&void 0!==t?t:o.id,m=p({invalidValue:null,missingValue:0,separateNegative:!0},o.visible?{}:{forceValue:0}),f=(e,t,i,n)=>zU(e,"normal",p({id:"".concat(t,"-").concat(i),groupId:"errorGroup-".concat(g,"-").concat(i)},m),n),v=(e,t,i,o)=>{n.push(...f(e,i,"lower",o),...f(t,i,"upper",o))};return null!=a&&null!=l&&v(a,l,c,h),null!=s&&null!=r&&v(s,r,d,u),n}getPropertyDefinitions(e){return this.isStacked()?this.getStackPropertyDefinition(e):this.getUnstackPropertyDefinition(e)}onDataProcessed(e){this.dataModel=e.dataModel,this.processedData=e.processedData}getDomain(e){const{xLowerKey:t,xUpperKey:i,xErrorsID:n,yLowerKey:o,yUpperKey:s,yErrorsID:r}=this.getMaybeFlippedKeys();if(e===_u.X?Ka(t)&&Ka(i):Ka(o)&&Ka(s)){const{dataModel:t,processedData:i,cartesianSeries:o}=this;if(null!=t&&null!=i){const s={x:n,y:r}[e],a=t.getDomain(o,"".concat(s,"-lower"),"value",i).domain,l=t.getDomain(o,"".concat(s,"-upper"),"value",i).domain,d=[Math.min(...a,...l),Math.max(...a,...l)];return FU(d)}}return[]}onDataUpdate(e){this.dataModel=e.dataModel,this.processedData=e.processedData,Ka(e.dataModel)&&Ka(e.processedData)&&(this.createNodeData(),this.update())}getNodeData(){var e;return this.hasErrorBars()?null===(e=this.cartesianSeries.contextNodeData)||void 0===e?void 0:e.nodeData:void 0}createNodeData(){var e,t;const i=this.getNodeData(),n=null===(e=this.cartesianSeries.axes[_u.X])||void 0===e?void 0:e.scale,o=null===(t=this.cartesianSeries.axes[_u.Y])||void 0===t?void 0:t.scale;if(n&&o&&i)for(let s=0;s<i.length;s++){const{midPoint:e,xLower:t,xUpper:r,yLower:a,yUpper:l}=this.getDatum(i,s);if(null!=e){let d,c;Ka(t)&&Ka(r)&&(d={lowerPoint:{x:this.convert(n,t),y:e.y},upperPoint:{x:this.convert(n,r),y:e.y}}),Ka(a)&&Ka(l)&&(c={lowerPoint:{x:e.x,y:this.convert(o,a)},upperPoint:{x:e.x,y:this.convert(o,l)}}),i[s].xBar=d,i[s].yBar=c}}}getMaybeFlippedKeys(){let{xLowerKey:e,xUpperKey:t,yLowerKey:i,yUpperKey:n}=this.properties,[o,s]=["xValue-errors","yValue-errors"];return this.cartesianSeries.shouldFlipXY()&&([e,i]=[i,e],[t,n]=[n,t],[o,s]=[s,o]),{xLowerKey:e,xUpperKey:t,xErrorsID:o,yLowerKey:i,yUpperKey:n,yErrorsID:s}}static getDatumKey(e,t,i){if(null==t)return;const n=vU(e),o=null===n||void 0===n?void 0:n[t];if(null!=o){if("number"===typeof o)return o+i;jr.warnOnce("Found [".concat(t,"] error value of type ").concat(typeof o,". Expected number type"))}}getDatum(t,i){const{xLowerKey:n,xUpperKey:o,yLowerKey:s,yUpperKey:r}=this.getMaybeFlippedKeys(),a=t[i],l=null!=a.cumulativeValue&&this.isStacked()?a.cumulativeValue-a.yValue:0,[d,c]=this.cartesianSeries.shouldFlipXY()?[l,0]:[0,l];return{midPoint:a.midPoint,xLower:e.getDatumKey(a,n,d),xUpper:e.getDatumKey(a,o,d),yLower:e.getDatumKey(a,s,c),yUpper:e.getDatumKey(a,r,c)}}convert(e,t){var i;const n=(null!==(i=e.bandwidth)&&void 0!==i?i:0)/2;return e.convert(t)+n}update(){const e=this.getNodeData();null!=e&&(this.selection.update(e),this.selection.each((e,t,i)=>this.updateNode(e,t,i)))}updateNode(e,t,i){e.datum=t,e.update(this.getDefaultStyle(),this.properties,this.cartesianSeries,!1,"none"),e.updateBBoxes()}pickNodeExact(e){const{x:t,y:i}=e,n=this.groupNode.pickNode(t,i);if(null!=n)return{datum:n.datum,distanceSquared:0}}pickNodeNearest(e){return this.groupNode.nearestSquared(e.x,e.y)}pickNodeMainAxisFirst(e,t){let i,n=[1/0,1/0];const o=[e.x,e.y];t===_u.Y&&o.reverse();for(const s of this.groupNode.children()){const e=s.getBBox(),r=[e.x+e.width/2,e.y+e.height/2];t===_u.Y&&r.reverse();const a=[];for(let t=0;t<o.length;t++)a.push(Math.abs(o[t]-r[t]));(a[0]<n[0]||a[0]==n[0]&&a[1]<n[1])&&(i=s.datum,n=a)}if(i)return{datum:i,distanceSquared:Math.pow(n[0],2)+Math.pow(n[1],2)}}getTooltipParams(){const{xLowerKey:e,xUpperKey:t,yLowerKey:i,yUpperKey:n,xLowerName:o=e,xUpperName:s=t,yLowerName:r=i,yUpperName:a=n}=this.properties;return{xLowerKey:e,xLowerName:o,xUpperKey:t,xUpperName:s,yLowerKey:i,yLowerName:r,yUpperKey:n,yUpperName:a}}onToggleSeriesItem(e){this.groupNode.visible=e.visible}makeStyle(e){return{visible:e.visible,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,stroke:e.stroke,strokeWidth:e.strokeWidth,strokeOpacity:e.strokeOpacity,cap:xu(this.properties.cap,e)}}getDefaultStyle(){return this.makeStyle(this.getWhiskerProperties())}getHighlightStyle(){return this.makeStyle(this.getWhiskerProperties())}restyleHighlightChange(e,t,i){const n=this.getNodeData();if(null!=n)for(let s=0;s<n.length;s++)if(e===n[s]){var o;null===(o=this.selection.at(s))||void 0===o||o.update(t,this.properties,this.cartesianSeries,i,i?"highlighted-item":"unhighlighted-item");break}}onHighlightChange(e){const{previousHighlight:t,currentHighlight:i}=e;(null===i||void 0===i?void 0:i.series)===this.cartesianSeries&&this.restyleHighlightChange(i,this.getHighlightStyle(),!0),(null===t||void 0===t?void 0:t.series)===this.cartesianSeries&&this.restyleHighlightChange(t,this.getDefaultStyle(),!1),this.groupNode.opacity=this.cartesianSeries.getOpacity()}errorBarFactory(){return new RU}getWhiskerProperties(){const{stroke:e,strokeWidth:t,visible:i,strokeOpacity:n,lineDash:o,lineDashOffset:s}=this.properties;return{stroke:e,strokeWidth:t,visible:i,strokeOpacity:n,lineDash:o,lineDashOffset:s}}},GU={type:"series:plugin",name:"errorBar",chartType:"cartesian",seriesTypes:["bar","line","scatter"],enterprise:!0,version:GC,options:Jc,themeTemplate:{visible:!0,stroke:{$ref:"foregroundColor"},strokeWidth:1,strokeOpacity:1,cap:{lengthRatio:{$if:[{$eq:[{$path:"../../type"},"bar"]},.3,1]}}},create:e=>new VU(e)};var HU=class extends kh{constructor(e){super(),this.ctx=e,this.enabled=!1,this.item="chart",this.color="#cfeeff",this.opacity=1,this.flashDuration=100,this.fadeDuration=900,this.cleanup=new Ta,this.element=this.ctx.domManager.addChild("canvas-background","flashOnUpdate"),this.element.role="presentation";let t=!0;this.cleanup.register(this.ctx.eventsHub.on("data:update",e=>{t?t=!1:this.onDataUpdate(e)}),this.ctx.eventsHub.on("datamodel:diff",e=>this.onDataModelDiff(e)))}destroy(){this.ctx.domManager.removeChild("canvas-background","flashOnUpdate"),this.cleanup.flush()}clearFlash(){this.element.innerHTML="",clearTimeout(this.animationTimeout),this.animationTimeout=void 0}flashElem(e){const{flashDuration:t,fadeDuration:i}=this,n=t+i;e.animate([{background:this.color,offset:0},{background:this.color,offset:t/n},{background:"transparent",offset:1}],{duration:n,easing:"ease-out"})}flashCategoryBands(e){const t=function(e){for(const t of[_u.X,_u.Y])for(const i of e.axisManager.getAxisContext(t))if(uE.BandScale.is(i.scale))return i}(this.ctx);if(!t)return;this.clearFlash();const i=this.computeCategoryFlashBounds(t,e);for(const o of i){const e=zr("div");Zp(e,"role","presentation"),Qp(e,"position","absolute"),wp(e,o),this.element.appendChild(e),this.flashElem(e)}const n=this.flashDuration+this.fadeDuration;this.animationTimeout=setTimeout(()=>this.clearFlash(),n)}computeCategories(e){const t=new Set;for(const i of Object.keys(e))for(const n of["updated","added","moved"])for(const o of e[i][n])t.add(o);return t}computeCategoryFlashBounds(e,t){const i=this.ctx.widgets.seriesWidget.getBounds(),n=e.direction===_u.X?e=>{let[t,n]=e;return{x:i.x+t,y:i.y,width:n-t,height:i.height}}:e=>{let[t,n]=e;return{x:i.x,y:i.y+t,width:i.width,height:n-t}},o=[],s=this.computeCategories(t);for(const r of s){const t=e.measureBand(r);null!==t&&void 0!==t&&t.band&&o.push(n(t.band))}return o}onDataUpdate(e){this.enabled&&"chart"===this.item&&e&&this.flashElem(this.ctx.widgets.containerWidget.getElement())}onDataModelDiff(e){this.enabled&&"category"===this.item&&this.flashCategoryBands(e.diff)}};HU.className="FlashOnUpdate",kV([ru],HU.prototype,"enabled",2),kV([ru],HU.prototype,"item",2),kV([ru],HU.prototype,"color",2),kV([ru],HU.prototype,"opacity",2),kV([ru],HU.prototype,"flashDuration",2),kV([ru],HU.prototype,"fadeDuration",2);var jU={type:"plugin",name:"flashOnUpdate",enterprise:!0,version:GC,options:{enabled:Cd,item:Hd()("chart","category"),color:wd,opacity:Fd,flashDuration:Pd,fadeDuration:Pd},themeTemplate:{enabled:!1,item:"chart",color:"#cfeeff",opacity:1,flashDuration:100,fadeDuration:900},create:e=>new HU(e)},{TranslatableGroup:WU}=uE,_U=class extends WU{constructor(){super(...arguments),this.inset=0,this.cornerRadius=0}applyClip(e,t){const{cornerRadius:i,inset:n}=this,{x:o,y:s,width:r,height:a}=t,l=new Path2D;l.roundRect(o+n,s+n,r-2*n,a-2*n,i),e.clip(l)}};kV([_y()],_U.prototype,"inset",2),kV([_y()],_U.prototype,"cornerRadius",2);var{CategoryAxis:KU,Group:UU,BBox:YU,stackCartesianSeries:$U}=uE,ZU=class{constructor(){this.top=0,this.bottom=0}};kV([ru],ZU.prototype,"top",2),kV([ru],ZU.prototype,"bottom",2);var XU=class extends Ra{constructor(e){super(),this.ctx=e,this.enabled=!1,this.padding=new ZU,this.root=new UU({name:"root"}),this.seriesRoot=this.root.appendChild(new _U({name:"Series-root",zIndex:bp.SERIES_LAYER,renderToOffscreenCanvas:!0})),this.axisGridGroup=this.root.appendChild(new UU({name:"Axes-Grids",zIndex:bp.AXIS_GRID})),this.axisGroup=this.root.appendChild(new UU({name:"Axes-Grids",zIndex:bp.AXIS_GRID})),this.axisLabelGroup=this.root.appendChild(new UU({name:"Axes-Labels",zIndex:bp.SERIES_LABEL})),this.axisCrosslineRangeGroup=this.root.appendChild(new UU({name:"Axes-Crosslines-Range",zIndex:bp.SERIES_CROSSLINE_RANGE})),this.axisCrosslineLineGroup=this.root.appendChild(new UU({name:"Axes-Crosslines-Line",zIndex:bp.SERIES_CROSSLINE_LINE})),this.axisCrosslineLabelGroup=this.root.appendChild(new UU({name:"Axes-Crosslines-Label",zIndex:bp.SERIES_LABEL})),this.data=[],this._destroyed=!1,this.miniChartAnimationPhase="initial",this.seriesRect=void 0,this.axes=new uE.ChartAxes,this.series=[],this.cleanup.register(this.ctx.eventsHub.on("data:update",e=>this.updateData(e)))}destroy(){this._destroyed||(super.destroy(),this.destroySeries(this.series),this.axes.destroy(),this._destroyed=!0)}onSeriesChange(e,t){var i;const n=null!==(i=null===t||void 0===t?void 0:t.filter(t=>!e.includes(t)))&&void 0!==i?i:[];this.destroySeries(n);for(const o of e)null!==t&&void 0!==t&&t.includes(o)||(o.attachSeries(this.seriesRoot,this.seriesRoot,void 0),o.chart={},Object.defineProperty(o.chart,"mode",{get:()=>"standalone"}),Object.defineProperty(o.chart,"isMiniChart",{get:()=>!0}),Object.defineProperty(o.chart,"flashOnUpdateEnabled",{get:()=>!1}),Object.defineProperty(o.chart,"seriesRect",{get:()=>this.seriesRect}),o.resetAnimation("initial"===this.miniChartAnimationPhase?"initial":"disabled"));this.seriesRect=void 0}destroySeries(e){if(e)for(const t of e)t.destroy(),t.detachSeries(this.seriesRoot,this.seriesRoot,void 0),t.chart=void 0}assignSeriesToAxes(){for(const e of this.axes)e.boundSeries=this.series.filter(t=>t.axes[e.direction]===e)}assignAxesToSeries(){const e={};for(const n of this.axes){var t;const i=n.direction;(null!==(t=e[i])&&void 0!==t?t:e[i]=[]).push(n)}for(const n of this.series)for(const e of n.directions){var i;const t=null!==(i=n.getKeyAxis(e))&&void 0!==i?i:e,o=this.axes.findById(t);if(!o)return void jr.warnOnce("no matching axis for direction [".concat(e,"] and id [").concat(t,"]; check series and axes configuration."));n.axes[e]=o}}updateData(e){for(const t of this.series)t.setChartData(e);"initial"===this.miniChartAnimationPhase&&this.ctx.animationManager.onBatchStop(()=>{this.miniChartAnimationPhase="ready";for(const e of this.series)e.resetAnimation("disabled")})}async processData(e){this.series.some(e=>e.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes()),await Promise.all(this.series.map(async t=>(t.resetDatumCallbackCache(),t.processData(e))));for(const t of this.axes)t.processData()}computeAxisPadding(){const e=new Tm;if(!this.enabled)return e;for(const{position:i,thickness:n,line:o,label:s}of this.axes){if(null==i)continue;let r;var t;if(n)r=n;else r=(o.enabled?o.width:0)+(s.enabled?Vl(null!==(t=s.fontSize)&&void 0!==t?t:0)+s.spacing:0);e[i]=Math.ceil(r)}return e}async layout(e,t){var i;const{padding:n}=this,o=null!=this.seriesRect,s=new YU(0,0,e,t-(n.top+n.bottom)),r=null==this.seriesRect||this.seriesRect.width!==e||this.seriesRect.height!==t;this.seriesRect=s,this.seriesRoot.translationY=n.top,this.seriesRoot.setClipRectCanvasSpace(new YU(0,-n.top,e,t));for(const c of this.axes){const{position:n="left"}=c;switch(n){case"top":case"bottom":c.range=[0,s.width],c.gridLength=s.height;break;case"right":case"left":{const e=c instanceof KU;c.range=e?[0,s.height]:[s.height,0],c.gridLength=s.width;break}}if(c.gridPadding=0,c.translation.x=0,c.translation.y=0,"right"===n?c.translation.x=e:"bottom"===n&&(c.translation.y=t),o||c.resetAnimation("initial"),c.crossLines)for(const e of c.crossLines){var a,l,d;if(e instanceof uE.CartesianCrossLine)e.position=null!==(a=c.position)&&void 0!==a?a:"top",null!==(l=(i=e.label).parallel)&&void 0!==l||(i.parallel=null===(d=c.label)||void 0===d?void 0:d.parallel)}c.calculateLayout(),c.update()}r&&$U(this.series),await Promise.all(this.series.map(async e=>e.update({seriesRect:s})))}};kV([ru],XU.prototype,"enabled",2),kV([eg(["seriesRoot","inset"])],XU.prototype,"inset",2),kV([eg(["seriesRoot","cornerRadius"])],XU.prototype,"cornerRadius",2),kV([ng({changeValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new uE.ChartAxes;const i={axisNode:this.axisGroup,gridNode:this.axisGridGroup,labelNode:this.axisLabelGroup,crossLineLineNode:this.axisCrosslineLineGroup,crossLineRangeNode:this.axisCrosslineRangeGroup,crossLineLabelNode:this.axisCrosslineLabelGroup};for(const n of t)e.includes(n)||(n.detachAxis(),n.destroy());for(const n of e)null!==t&&void 0!==t&&t.includes(n)||n.attachAxis(i)}})],XU.prototype,"axes",2),kV([ng({changeValue(e,t){this.onSeriesChange(e,t)}})],XU.prototype,"series",2);var{SliderWidget:qU}=uE,QU=class{constructor(e,t){this.ctx=e,this.sliderHandlers=t,this._min=0,this._max=1,this.minRange=.001,this.dragStartX=0,this.ctx=e,this.toolbar=e.proxyInteractionService.createProxyContainer({type:"toolbar",domManagerId:"navigator-toolbar",classList:["ag-charts-proxy-navigator-toolbar"],orientation:"vertical",ariaLabel:{id:"ariaLabelNavigator"}}),this.sliders=[e.proxyInteractionService.createProxyElement({type:"slider",domIndex:1,ariaLabel:{id:"ariaLabelNavigatorMinimum"},parent:this.toolbar,cursor:"ew-resize"}),e.proxyInteractionService.createProxyElement({type:"slider",domIndex:-1/0,ariaLabel:{id:"ariaLabelNavigatorRange"},parent:this.toolbar,cursor:"grab"}),e.proxyInteractionService.createProxyElement({type:"slider",domIndex:2,ariaLabel:{id:"ariaLabelNavigatorMaximum"},parent:this.toolbar,cursor:"ew-resize"})];for(const[i,n]of["min","pan","max"].entries()){const e=this.sliders[i];e.step=qU.STEP_HUNDRETH,e.keyboardStep=qU.STEP_ONE,e.orientation="horizontal",e.setPreventsDefault(!1),e.addListener("drag-start",e=>this.onDragStart(i,e,n)),e.addListener("drag-move",t=>this.onDrag(e,t,n)),e.addListener("drag-end",()=>this.updateSliderRatios()),e.addListener("contextmenu",t=>this.onContextMenu(e,t))}this.sliders[0].addListener("change",()=>this.onMinSliderChange()),this.sliders[1].addListener("change",()=>this.onPanSliderChange()),this.sliders[2].addListener("change",()=>this.onMaxSliderChange()),this.updateSliderRatios(),this.updateVisibility(!1)}destroy(){this.toolbar.destroy()}updateVisibility(e){this.toolbar.setHidden(!e)}updateZoom(){const{_min:e,_max:t}=this;null!=e&&null!=t&&this.ctx.zoomManager.updateZoom({source:"user-interaction",sourceDetail:"navigatorDOM"},{x:{min:e,max:t}})}updateBounds(e){this.toolbar.setBounds(e)}updateSliderBounds(e,t){this.sliders[e].setBounds(t)}updateMinMax(e,t){this._min=e,this._max=t,this.updateSliderRatios()}updateSliderRatios(){let{_min:e,_max:t}=this;e=Math.round(100*e)/100,t=Math.round(100*t)/100;const i=this.ctx.localeManager.t("ariaValuePanRange",{min:e,max:t});this.sliders[0].setValueRatio(e),this.sliders[1].setValueRatio(e,{ariaValueText:i}),this.sliders[2].setValueRatio(t)}toCanvasOffsets(e){return{offsetX:this.dragStartX+e.originDeltaX}}moveToFront(e){if(1===e)return;const t=this.sliders[e],i=this.sliders[2-e];this.toolbar.moveChild(i,t.domIndex-1)}onDragStart(e,t,i){const n=this.sliders[e],o=this.toolbar.cssLeft(),s=n.cssLeft();this.dragStartX=o+s+t.offsetX,this.moveToFront(e),t.sourceEvent.preventDefault(),this.sliderHandlers.onDragStart(i,this.toCanvasOffsets(t))}onDrag(e,t,i){t.sourceEvent.preventDefault(),this.sliderHandlers.onDrag(i,this.toCanvasOffsets(t))}onContextMenu(e,t){const{offsetX:i,offsetY:n}=t,{x:o,y:s}=this.toolbar.getBounds(),{x:r,y:a}=e.getBounds(),l=i+o+r,d=n+s+a;this.ctx.contextMenuRegistry.dispatchContext("always",{widgetEvent:t,canvasX:l,canvasY:d},void 0)}onPanSliderChange(){const e=this.sliders[1].getValueRatio(),t=this._max-this._min;this._min=za(0,e,1-t),this._max=this._min+t,this.updateZoom()}onMinSliderChange(){this._min=this.sliders[0].clampValueRatio(0,this._max-this.minRange),this.updateZoom()}onMaxSliderChange(){this._max=this.sliders[2].clampValueRatio(this._min+this.minRange,1),this.updateZoom()}},{BBox:JU,ExtendedPath2D:eY}=uE,tY=class extends uE.Path{constructor(){super(...arguments),this.zIndex=3,this.centerX=0,this.centerY=0,this.width=8,this.height=16,this.cornerRadius=4,this.grip=!0,this.gripPath=new eY}setCenter(e,t){this.dirtyPath=!0,this.centerX===e&&this.centerY===t||(this.centerX=e,this.centerY=t,this.markDirty("center"))}static align(e,t,i,n,o,s,r,a,l){const d=e.align(i+o*r)+l,c=d+e.align(i+o*r,o*(a-r))-2*l,u=e.align(n+s/2);e.setCenter(d,u),t.setCenter(c,u)}computeBBox(){const{centerX:e,centerY:t,width:i,height:n}=this;return new JU(e-i/2,t-n/2,i,n)}isPointInPath(e,t){return this.getBBox().containsPoint(e,t)}updatePath(){var e,t;const{centerX:i,centerY:n,path:o,gripPath:s,strokeWidth:r,cornerRadius:a,grip:l}=this,d=r/2,c=null!==(e=null===(t=this.layerManager)||void 0===t||null===(t=t.canvas)||void 0===t?void 0:t.pixelRatio)&&void 0!==e?e:1;o.clear(),s.clear();const u=Math.floor(this.width/2*c)/c,h=Math.floor(this.height/2*c)/c;o.roundRect(i-u+d,n-h+d,2*(u-d),2*(h-d),a);if(l)for(let p=-.5;p<=.5;p+=1)for(let e=-1;e<=1;e+=1)s.arc(i+3*p,n+3*e,1,0,2*Math.PI),s.closePath()}renderFill(e,t){const{stroke:i}=this;super.renderFill(e,t),e.fillStyle="string"===typeof i?i:"black",e.fill(this.gripPath.getPath2D())}};tY.className="RangeHandle",kV([ru,_y()],tY.prototype,"width",2),kV([ru,_y()],tY.prototype,"height",2),kV([ru,_y()],tY.prototype,"cornerRadius",2),kV([ru,_y()],tY.prototype,"grip",2);var{Path:iY,BBox:nY,ExtendedPath2D:oY,clippedRoundRect:sY}=uE,rY=class extends iY{constructor(){super(...arguments),this.cornerRadius=4,this.zIndex=2,this.x=0,this.y=0,this.width=200,this.height=30,this.min=0,this.max=1,this.visiblePath=new oY}layout(e,t,i,n,o,s){o=Number.isNaN(o)?this.min:o,s=Number.isNaN(s)?this.max:s,e===this.x&&t===this.y&&i===this.width&&this.height===n&&o===this.min&&s===this.max||(this.x=e,this.y=t,this.width=i,this.height=n,this.min=o,this.max=s,this.dirtyPath=!0,this.markDirty("RangeMask.layout"))}computeBBox(){const{x:e,y:t,width:i,height:n}=this;return new nY(e,t,i,n)}computeVisibleRangeBBox(){const{x:e,y:t,width:i,height:n,min:o,max:s}=this,r=e+i*o;return new nY(r,t,e+i*s-r,n)}updatePath(){const{path:e,visiblePath:t,x:i,y:n,width:o,height:s,min:r,max:a,strokeWidth:l,cornerRadius:d}=this,c=l/2;e.clear(),t.clear();const u=this.align(i)+c,h=this.align(n)+c,p=this.align(i,o)-2*c,g=this.align(n,s)-2*c,m=this.align(i+o*r)+c,f=m+this.align(i+o*r,o*(a-r))-2*c,v={topLeft:d,topRight:d,bottomRight:d,bottomLeft:d},y=(e,t,i)=>{if(i-t<1)return;const n=new nY(t,h,i-t,g);sY(e,u,h,p,g,v,n)};y(e,u,m),y(e,f,p+u),y(t,m,f)}renderStroke(e,t){super.renderStroke(e,t),super.renderStroke(e,this.visiblePath.getPath2D())}};rY.className="RangeMask",kV([ru,_y()],rY.prototype,"cornerRadius",2);var aY=class extends uE.Group{constructor(e){super({name:"rangeSelectorGroup",zIndex:bp.NAVIGATOR}),this.x=0,this.y=0,this.width=200,this.height=30,this.lOffset=0,this.rOffset=0,this.background=this.appendChild(new uE.TranslatableGroup({name:"navigator-background",zIndex:1})),this.append(e)}layout(e,t,i,n,o,s){this.x=e,this.y=t,this.width=i,this.height=n,this.lOffset=o,this.rOffset=s,this.background.translationX=e,this.background.translationY=t,this.markDirty("RangeSelector")}updateBackground(e,t){null!=e&&e.remove(),null!=t&&this.background.appendChild(t),this.markDirty("RangeSelector")}computeBBox(){const{x:e,y:t,width:i,height:n,lOffset:o,rOffset:s}=this;return new uE.BBox(e-o,t,i+(o+s),n)}},lY=class extends Ra{constructor(e){super(),this.ctx=e,this.enabled=!1,this.mask=new rY,this.minHandle=new tY,this.maxHandle=new tY,this.maskVisibleRange={id:"navigator-mask-visible-range",getBBox:()=>this.mask.computeVisibleRangeBBox(),toCanvasBBox:()=>this.mask.computeVisibleRangeBBox(),fromCanvasPoint:(e,t)=>({x:e,y:t})},this.height=30,this.cornerRadius=0,this.spacing=10,this.x=0,this.y=0,this.width=0,this.rangeSelector=new aY([this.mask,this.minHandle,this.maxHandle]),this.cleanup.register(e.scene.attachNode(this.rangeSelector),e.eventsHub.on("locale:change",()=>this.updateZoom()),e.layoutManager.registerElement(uE.LayoutElement.Navigator,e=>this.onLayoutStart(e)),e.eventsHub.on("layout:complete",e=>this.onLayoutComplete(e)),e.eventsHub.on("zoom:change-complete",e=>this.onZoomChange(e))),this.domProxy=new QU(e,this),this.updateGroupVisibility(),this.miniChart=new XU(e)}updateBackground(e,t){var i;null===(i=this.rangeSelector)||void 0===i||i.updateBackground(e,t)}updateGroupVisibility(){const{enabled:e}=this;null!=this.rangeSelector&&e!==this.rangeSelector.visible&&(this.rangeSelector.visible=e,this.domProxy.updateVisibility(e),e?this.updateZoom():this.ctx.zoomManager.updateZoom({source:"chart-update",sourceDetail:"navigator"},{x:{min:0,max:1}}))}onLayoutStart(e){let{layoutBox:t}=e;if(this.enabled){const e=this.height+this.spacing;t.shrink(e,"bottom"),this.y=t.y+t.height+this.spacing}else this.y=0;if(this.enabled&&this.miniChart){const{top:e,bottom:i}=this.miniChart.computeAxisPadding();t.shrink(e+i,"bottom"),this.y-=i,this.miniChart.inset=this.mask.strokeWidth/2,this.miniChart.cornerRadius=this.mask.cornerRadius}}onLayoutComplete(e){var t;const{x:i,width:n}=e.series.rect,{y:o,height:s}=this;if(this.domProxy.updateVisibility(this.enabled),this.enabled){const{_min:e,_max:t}=this.domProxy;this.layoutNodes(i,o,n,s,e,t),this.domProxy.updateBounds({x:i,y:o,width:n,height:s})}this.x=i,this.width=n,null===(t=this.miniChart)||void 0===t||t.layout(n,s).catch(e=>jr.error(e))}canDrag(){return this.enabled&&this.ctx.interactionManager.isState(uE.InteractionState.ZoomDraggable)}onDragStart(e,t){let{offsetX:i}=t;this.canDrag()&&("pan"===e&&(this.panStart=(i-this.x)/this.width-this.domProxy._min),this.ctx.zoomManager.fireZoomPanStartEvent("navigator"))}onDrag(e,t){let{offsetX:i}=t;if(!this.canDrag())return;const{panStart:n,x:o,width:s}=this,{minRange:r}=this.domProxy;let{_min:a,_max:l}=this.domProxy;const d=(i-o)/s;if("min"===e)a=za(0,d,l-r);else if("max"===e)l=za(a+r,d,1);else if("pan"===e&&null!=n){const e=l-a;a=za(0,d-n,1-e),l=a+e}this.domProxy._min=a,this.domProxy._max=l,this.updateZoom()}onZoomChange(e){const{x:t}=e;if(!t)return;const{x:i,y:n,width:o,height:s}=this,{min:r,max:a}=t;this.domProxy.updateMinMax(r,a),this.layoutNodes(i,n,o,s,r,a)}layoutNodes(e,t,i,n,o,s){const{rangeSelector:r,mask:a,minHandle:l,maxHandle:d}=this;a.layout(e,t,i,n,o,s),r.layout(e,t,i,n,l.width/2,d.width/2),tY.align(l,d,e,t,i,n,o,s,a.strokeWidth/2),o+(s-o)/2<.5?(l.zIndex=3,d.zIndex=4):(l.zIndex=4,d.zIndex=3);for(const[c,u]of[l,this.maskVisibleRange,d].entries()){const i=u.getBBox(),n={x:i.x-e,y:i.y-t,height:i.height,width:i.width};this.domProxy.updateSliderBounds(c,n)}}updateZoom(){this.enabled&&this.domProxy.updateZoom()}async processData(e){var t;return null===(t=this.miniChart)||void 0===t?void 0:t.processData(e)}};kV([og((e,t,i)=>{e.updateBackground(null===i||void 0===i?void 0:i.root,null===t||void 0===t?void 0:t.root)})],lY.prototype,"miniChart",2),kV([ru,og((e,t)=>{e.ctx.zoomManager.setNavigatorEnabled(Boolean(t)),e.updateGroupVisibility()})],lY.prototype,"enabled",2),kV([ru],lY.prototype,"height",2),kV([ru,og((e,t)=>{e.mask.cornerRadius=t})],lY.prototype,"cornerRadius",2),kV([ru],lY.prototype,"spacing",2);var{Path:dY,Scalable:cY,ExtendedPath2D:uY,BBox:hY,clippedRoundRect:pY}=uE,gY=class extends(cY(dY)){constructor(){super(...arguments),this.wickPath=new uY,this.horizontal=!1,this.center=0,this.thickness=0,this.min=0,this.q1=0,this.median=0,this.q3=0,this.max=0,this.cornerRadius=0,this.crisp=!1,this.strokeAlignment=0,this.wickStroke=void 0,this.wickStrokeWidth=void 0,this.wickStrokeOpacity=void 0,this.capLengthRatio=1,this.wickStrokeAlignment=0}computeBBox(){const{horizontal:e,center:t,thickness:i,min:n,max:o}=this;return e?new hY(Math.min(n,o),t-i/2,Math.abs(o-n),i):new hY(t-i/2,Math.min(n,o),i,Math.abs(o-n))}computeDefaultGradientFillBBox(){const{horizontal:e,center:t,thickness:i,q1:n,q3:o}=this;return e?new hY(Math.min(n,o),t-i/2,Math.abs(o-n),i):new hY(t-i/2,Math.min(n,o),i,Math.abs(o-n))}isPointInPath(e,t){return this.getBBox().containsPoint(e,t)}distanceSquared(e,t){return this.getBBox().distanceSquared(e,t)}get midPoint(){return this.horizontal?{x:(this.min+this.max)/2,y:this.center}:{x:this.center,y:(this.min+this.max)/2}}alignedCoordinates(){const{thickness:e,crisp:t}=this;let{center:i,min:n,q1:o,median:s,q3:r,max:a}=this,l=i-e/2,d=i+e/2;if(t&&e>1){n=this.align(n),o=this.align(o),s=this.align(s),r=this.align(r),a=n+this.align(n,a-n);const t=this.align(e/2);i=this.align(i),l=i-t,d=i+t}return{center:i,x0:l,x1:d,min:n,max:a,q1:o,median:s,q3:r}}updatePath(){var e,t;const{path:i,stroke:n,strokeWidth:o,strokeOpacity:s,lineDash:r,lineDashOffset:a,wickStroke:l,wickStrokeWidth:d,wickStrokeOpacity:c,wickLineDash:u,wickLineDashOffset:h,strokeAlignment:p,cornerRadius:g,capLengthRatio:m,horizontal:f}=this,{center:v,x0:y,x1:b,min:x,max:C,q1:S,median:w,q3:M}=this.alignedCoordinates(),k=null!==(e=null===(t=this.layerManager)||void 0===t?void 0:t.canvas.pixelRatio)&&void 0!==e?e:1,D=this.wickStrokeAlignment>0?k/this.wickStrokeAlignment/2%1:0;this.path.clear(),this.wickPath.clear();const I=null!=l&&l!==n||null!=d&&d!==o||null!=c&&c!==s||null!=u&&u!==r||null!=h&&h!==a?this.wickPath:i;if(Math.abs(b-y)<=3)return mY(I,f,v,x),void fY(I,f,v,C);const A=Math.min(x,C),L=Math.max(x,C),N=Math.min(S,M),T=Math.max(S,M),R=v-Math.abs((b-y)*m)/2,E=v+Math.abs((b-y)*m)/2;mY(I,f,R,A-D),fY(I,f,E,A-D),mY(I,f,v-D,A-D),fY(I,f,v-D,N+o/2),mY(I,f,v-D,L+D),fY(I,f,v-D,T-o/2),mY(I,f,R,L+D),fY(I,f,E,L+D);const P=o/2+p,O=o/2-p,F=T-N-2*O;if(F>0){const e=y+P,t=N+O,n=b-y-2*P,o={topLeft:g,topRight:g,bottomRight:g,bottomLeft:g};vY(i,f,e,t,n,F,o,new hY(e,t,n,w-t)),vY(i,f,e,t,n,F,o,new hY(e,w,n,t+F-w))}else{const e=(N+T)/2;mY(i,f,y,e),fY(i,f,b,e)}}drawPath(e){super.drawPath(e);const{wickPath:t}=this;if(t.isEmpty())return;const{stroke:i,strokeWidth:n,strokeOpacity:o,lineDash:s,lineDashOffset:r,wickStroke:a=i,wickStrokeWidth:l=n,wickStrokeOpacity:d=o,wickLineDash:c=s,wickLineDashOffset:u=r}=this;0!==l&&(e.globalAlpha*=d,"string"===typeof a&&(e.strokeStyle=a),e.lineWidth=l,null!=c&&e.setLineDash([...c]),e.lineDashOffset=u,e.stroke(t.getPath2D()))}};function mY(e,t,i,n){t?e.moveTo(n,i):e.moveTo(i,n)}function fY(e,t,i,n){t?e.lineTo(n,i):e.lineTo(i,n)}function vY(e,t,i,n,o,s,r,a){t?pY(e,n,i,s,o,r,null==a?void 0:new hY(a.y,a.x,a.height,a.width)):pY(e,i,n,o,s,r,a)}kV([_y()],gY.prototype,"horizontal",2),kV([_y()],gY.prototype,"center",2),kV([_y()],gY.prototype,"thickness",2),kV([_y()],gY.prototype,"min",2),kV([_y()],gY.prototype,"q1",2),kV([_y()],gY.prototype,"median",2),kV([_y()],gY.prototype,"q3",2),kV([_y()],gY.prototype,"max",2),kV([_y()],gY.prototype,"cornerRadius",2),kV([_y()],gY.prototype,"crisp",2),kV([_y()],gY.prototype,"strokeAlignment",2),kV([_y()],gY.prototype,"wickStroke",2),kV([_y()],gY.prototype,"wickStrokeWidth",2),kV([_y()],gY.prototype,"wickStrokeOpacity",2),kV([Yy()],gY.prototype,"wickLineDash",2),kV([_y()],gY.prototype,"wickLineDashOffset",2),kV([_y()],gY.prototype,"capLengthRatio",2),kV([_y()],gY.prototype,"wickStrokeAlignment",2);var{AbstractBarSeriesProperties:yY,makeSeriesTooltip:bY}=uE,xY=class extends kh{constructor(){super(...arguments),this.lengthRatio=.5}};kV([ru],xY.prototype,"lengthRatio",2);var CY=class extends kh{};kV([ru],CY.prototype,"stroke",2),kV([ru],CY.prototype,"strokeWidth",2),kV([ru],CY.prototype,"strokeOpacity",2),kV([ru],CY.prototype,"lineDash",2),kV([ru],CY.prototype,"lineDashOffset",2);var SY=class extends yY{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.cap=new xY,this.whisker=new CY,this.tooltip=bY()}toJson(){const{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:n,lineDashOffset:o}=this,s=super.toJson();return s.whisker=xu(s.whisker,{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:n,lineDashOffset:o}),s}};kV([ru],SY.prototype,"xKey",2),kV([ru],SY.prototype,"minKey",2),kV([ru],SY.prototype,"q1Key",2),kV([ru],SY.prototype,"medianKey",2),kV([ru],SY.prototype,"q3Key",2),kV([ru],SY.prototype,"maxKey",2),kV([ru],SY.prototype,"xName",2),kV([ru],SY.prototype,"yName",2),kV([ru],SY.prototype,"minName",2),kV([ru],SY.prototype,"q1Name",2),kV([ru],SY.prototype,"medianName",2),kV([ru],SY.prototype,"q3Name",2),kV([ru],SY.prototype,"maxName",2),kV([ru],SY.prototype,"fill",2),kV([ru],SY.prototype,"fillOpacity",2),kV([ru],SY.prototype,"stroke",2),kV([ru],SY.prototype,"strokeWidth",2),kV([ru],SY.prototype,"strokeOpacity",2),kV([ru],SY.prototype,"lineDash",2),kV([ru],SY.prototype,"lineDashOffset",2),kV([ru],SY.prototype,"cornerRadius",2),kV([ru],SY.prototype,"styler",2),kV([ru],SY.prototype,"itemStyler",2),kV([ru],SY.prototype,"cap",2),kV([ru],SY.prototype,"whisker",2),kV([ru],SY.prototype,"tooltip",2);var{fixNumericExtent:wY,keyProperty:MY,SeriesNodePickMode:kY,SMALLEST_KEY_INTERVAL:DY,valueProperty:IY,diff:AY,animationValidation:LY,computeBarFocusBounds:NY,createDatumId:TY,HighlightState:RY,ContinuousScale:EY,motion:PY,getItemStyles:OY,calculateSegments:FY,toHighlightString:zY}=uE,BY=class extends uE.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.xKey=n.properties.xKey,this.minKey=n.properties.minKey,this.q1Key=n.properties.q1Key,this.medianKey=n.properties.medianKey,this.q3Key=n.properties.q3Key,this.maxKey=n.properties.maxKey}},VY=class extends uE.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[kY.NEAREST_NODE,kY.EXACT_SHAPE_MATCH],propertyKeys:{x:["xKey"],y:["medianKey","q1Key","q3Key","minKey","maxKey"]},propertyNames:{x:["xName"],y:["medianName","q1Name","q3Name","minName","maxName"]},categoryKey:"xValue",pathsPerSeries:[]}),this.properties=new SY,this.NodeEvent=BY}async processData(e){var t,i,n;if(!this.visible)return;const{xKey:o,minKey:s,q1Key:r,medianKey:a,q3Key:l,maxKey:d}=this.properties,c=!this.ctx.animationManager.isSkipped(),u=null===(t=this.getCategoryAxis())||void 0===t?void 0:t.scale,h=null===(i=this.getValueAxis())||void 0===i?void 0:i.scale,{isContinuousX:p,xScaleType:g,yScaleType:m}=this.getScaleInformation({xScale:u,yScale:h}),f=[];this.needsDataModelDiff()&&this.processedData&&f.push(AY(this.id,this.processedData)),c&&f.push(LY());const{processedData:v}=await this.requestDataModel(e,this.data,{props:[MY(o,g,{id:"xValue"}),IY(s,m,{id:"minValue"}),IY(r,m,{id:"q1Value"}),IY(a,m,{id:"medianValue"}),IY(l,m,{id:"q3Value"}),IY(d,m,{id:"maxValue"}),...p?[DY]:[],...f]});this.smallestDataInterval=null===(n=v.reduced)||void 0===n?void 0:n.smallestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!t||!i)return{domain:[]};if(e!==this.getBarDirection()){const{index:e,def:n}=i.resolveProcessedDataDefById(this,"xValue"),o=t.domain.keys[e];if("key"===n.type&&"category"===n.valueType){return{domain:o,sortMetadata:i.getKeySortMetadata(this,"xValue",t)}}return{domain:this.padBandExtent(o)}}const n=this.domainForClippedRange(e,["minValue","maxValue"],"xValue");return{domain:wY(n)}}getSeriesRange(e,t){return this.domainForVisibleRange(_u.Y,["maxValue","minValue"],"xValue",t)}createNodeData(){var e,t;const{visible:i,dataModel:n,processedData:o}=this,s=this.getCategoryAxis(),r=this.getValueAxis();if(!(n&&o&&s&&r))return;const{xKey:a}=this.properties,l=[],d=n.resolveKeysById(this,"xValue",o),c=n.resolveColumnById(this,"minValue",o),u=n.resolveColumnById(this,"q1Value",o),h=n.resolveColumnById(this,"medianValue",o),p=n.resolveColumnById(this,"q3Value",o),g=n.resolveColumnById(this,"maxValue",o),{barWidth:m,groupIndex:f}=this.updateGroupScale(s),v=EY.is(s.scale)?-.5*m:0,{groupScale:y}=this,b=this.isVertical(),x=FY(this.properties.segmentation,s,r,this.chart.seriesRect,this.ctx.scene),C={itemId:a,nodeData:l,labelData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible,styles:OY(this.getItemStyle.bind(this)),segments:x};if(!i)return C;const S=null!==(e=null===(t=o.dataSources.get(this.id))||void 0===t?void 0:t.data)&&void 0!==e?e:[];for(const[w,M]of S.entries()){const e=d[w];if(null==e)continue;const t=c[w],i=u[w],n=h[w],o=p[w],x=g[w];if([t,i,n,o,x].some(e=>"number"!==typeof e)||t>i||i>n||n>o||o>x)continue;const C={xValue:s.scale.convert(e),minValue:r.scale.convert(t),q1Value:r.scale.convert(i),medianValue:r.scale.convert(n),q3Value:r.scale.convert(o),maxValue:r.scale.convert(x)},S=m;C.xValue+=y.convert(String(f))+v+S/2;const k=Math.abs(C.q3Value-C.q1Value),D=C.xValue,I=Math.min(C.q3Value,C.q1Value)+k/2,A={x:b?D:I,y:b?I:D};let L;L=b?{x:A.x-S/2,y:C.minValue,width:S,height:C.maxValue-C.minValue}:{x:C.minValue,y:A.y-S/2,width:C.maxValue-C.minValue,height:S},l.push({series:this,itemId:e,datum:M,datumIndex:w,xKey:a,bandwidth:S,scaledValues:C,midPoint:A,focusRect:L})}return C}legendItemSymbol(){const{fill:e,stroke:t,strokeWidth:i,fillOpacity:n,strokeOpacity:o,lineDash:s,lineDashOffset:r}=this.getStyle(!1,RY.None);return{marker:{fill:Qg(e),fillOpacity:n,stroke:t,strokeOpacity:o,strokeWidth:i,lineDash:s,lineDashOffset:r}}}getLegendData(e){var t;const{id:i,ctx:{legendManager:n},visible:o}=this,{xKey:s,yName:r,showInLegend:a,legendItemName:l}=this.properties;return s&&"category"===e?[{legendType:"category",id:i,itemId:i,seriesId:i,enabled:o&&n.getItemEnabled({seriesId:i,itemId:i}),label:{text:null!==(t=null!==l&&void 0!==l?l:r)&&void 0!==t?t:i},symbol:this.legendItemSymbol(),legendItemName:l,hideInLegend:!a}]:[]}getTooltipContent(e){var t;const{id:i,dataModel:n,processedData:o,properties:s}=this,{xKey:r,xName:a,yName:l,medianKey:d,medianName:c,q1Key:u,q1Name:h,q3Key:g,q3Name:m,minKey:f,minName:v,maxKey:y,maxName:b,legendItemName:x,tooltip:C}=s,S=this.getCategoryAxis(),w=this.getValueAxis();if(!n||!o||!S||!w)return;const M=null===(t=o.dataSources.get(this.id))||void 0===t?void 0:t.data[e],k=n.resolveKeysById(this,"xValue",o)[e],D=n.resolveColumnById(this,"minValue",o)[e],I=n.resolveColumnById(this,"q1Value",o)[e],A=n.resolveColumnById(this,"medianValue",o)[e],L=n.resolveColumnById(this,"q3Value",o)[e],N=n.resolveColumnById(this,"maxValue",o)[e];if(null==k)return;const T=this.getItemStyle(e,!1),R=[{label:v,fallbackLabel:f,value:this.getAxisValueText(w,"tooltip",D,M,f,x),missing:uE.isTooltipValueMissing(D)},{label:h,fallbackLabel:u,value:this.getAxisValueText(w,"tooltip",I,M,u,x),missing:uE.isTooltipValueMissing(I)},{label:c,fallbackLabel:d,value:this.getAxisValueText(w,"tooltip",A,M,d,x),missing:uE.isTooltipValueMissing(A)},{label:m,fallbackLabel:g,value:this.getAxisValueText(w,"tooltip",L,M,g,x),missing:uE.isTooltipValueMissing(L)},{label:b,fallbackLabel:y,value:this.getAxisValueText(w,"tooltip",N,M,y,x),missing:uE.isTooltipValueMissing(N)}];return this.formatTooltipWithContext(C,{heading:this.getAxisValueText(S,"tooltip",k,M,r,x),title:null!==x&&void 0!==x?x:l,symbol:this.legendItemSymbol(),data:R},p({seriesId:i,datum:M,title:l,xKey:r,xName:a,yName:l,medianKey:d,medianName:c,q1Key:u,q1Name:h,q3Key:g,q3Name:m,minKey:f,minName:v,maxKey:y,maxName:b},T))}animateEmptyUpdateReady(e){let{datumSelection:t}=e;const i=this.isVertical(),{from:n,to:o}=function(e){return{from:e?{scalingX:1,scalingY:0}:{scalingX:0,scalingY:1},to:{scalingX:1,scalingY:1}}}(i);PY.resetMotion([t],function(e){return(t,i)=>e?{scalingCenterY:i.scaledValues.medianValue}:{scalingCenterX:i.scaledValues.medianValue}}(i)),PY.staticFromToMotion(this.id,"datums",this.ctx.animationManager,[t],n,o,{phase:"initial"})}isLabelEnabled(){return!1}updateDatumSelection(e){var t;const i=null!==(t=e.nodeData)&&void 0!==t?t:[];return e.datumSelection.update(i)}makeStylerParams(e){const{id:t}=this,{cornerRadius:i,cap:{lengthRatio:n},fill:o,fillOpacity:s,lineDash:r,lineDashOffset:a,stroke:l,strokeOpacity:d,strokeWidth:c,maxKey:u,maxName:h,medianKey:p,medianName:g,minKey:m,minName:f,q1Key:v,q1Name:y,q3Key:b,q3Name:x,whisker:{lineDash:C,lineDashOffset:S,stroke:w,strokeOpacity:M,strokeWidth:k},xKey:D,xName:I,yName:A}=this.properties;return{cap:{lengthRatio:n},cornerRadius:i,fill:o,fillOpacity:s,highlightState:zY(null!==e&&void 0!==e?e:RY.None),lineDash:r,lineDashOffset:a,maxKey:u,maxName:null!==h&&void 0!==h?h:u,medianKey:p,medianName:null!==g&&void 0!==g?g:p,minKey:m,minName:null!==f&&void 0!==f?f:m,q1Key:v,q1Name:null!==y&&void 0!==y?y:v,q3Key:b,q3Name:null!==x&&void 0!==x?x:b,seriesId:t,stroke:l,strokeOpacity:d,strokeWidth:c,whisker:{lineDash:null!==C&&void 0!==C?C:r,lineDashOffset:null!==S&&void 0!==S?S:a,stroke:null!==w&&void 0!==w?w:l,strokeOpacity:null!==M&&void 0!==M?M:d,strokeWidth:null!==k&&void 0!==k?k:c},xKey:D,xName:null!==I&&void 0!==I?I:D,yName:A}}getStyle(e,t){var i,n,o,s,r,a,l,d,c,u,h,p,g,m,f,v,y,b,x,C;const{cap:S,cornerRadius:w,fill:M,fillOpacity:k,lineDash:D,lineDashOffset:I,stroke:A,strokeOpacity:L,strokeWidth:N,styler:T,whisker:R}=this.properties;let E={};if(!e&&T){var P,O;const e=this.makeStylerParams(t);E=null!==(P=this.ctx.optionsGraphService.resolvePartial(["series","".concat(this.declarationOrder)],null!==(O=this.cachedCallWithContext(T,e))&&void 0!==O?O:{},{pick:!1}))&&void 0!==P?P:{}}return{cornerRadius:null!==(i=E.cornerRadius)&&void 0!==i?i:w,fill:null!==(n=E.fill)&&void 0!==n?n:M,fillOpacity:null!==(o=E.fillOpacity)&&void 0!==o?o:k,lineDash:null!==(s=E.lineDash)&&void 0!==s?s:D,lineDashOffset:null!==(r=E.lineDashOffset)&&void 0!==r?r:I,opacity:1,stroke:null!==(a=E.stroke)&&void 0!==a?a:A,strokeOpacity:null!==(l=E.strokeOpacity)&&void 0!==l?l:L,strokeWidth:null!==(d=E.strokeWidth)&&void 0!==d?d:N,cap:{lengthRatio:null!==(c=null===(u=E.cap)||void 0===u?void 0:u.lengthRatio)&&void 0!==c?c:S.lengthRatio},whisker:{lineDash:null!==(h=null===(p=E.whisker)||void 0===p?void 0:p.lineDash)&&void 0!==h?h:R.lineDash,lineDashOffset:null!==(g=null===(m=E.whisker)||void 0===m?void 0:m.lineDashOffset)&&void 0!==g?g:R.lineDashOffset,stroke:null!==(f=null===(v=E.whisker)||void 0===v?void 0:v.stroke)&&void 0!==f?f:R.stroke,strokeOpacity:null!==(y=null===(b=E.whisker)||void 0===b?void 0:b.strokeOpacity)&&void 0!==y?y:R.strokeOpacity,strokeWidth:null!==(x=null===(C=E.whisker)||void 0===C?void 0:C.strokeWidth)&&void 0!==x?x:R.strokeWidth}}}getItemStyle(e,t,i){const{properties:n}=this,{itemStyler:o}=n;let s=xu(this.getHighlightStyle(t,e,i),this.getStyle(void 0===e,i));if(null!=o&&null!=e){const i=this.cachedDatumCallback(TY(e,t?"highlight":"node"),()=>{const i=this.makeItemStylerParams(e,t,s);return this.ctx.optionsGraphService.resolvePartial(["series","".concat(this.declarationOrder)],this.callWithContext(o,i))});i&&(s=xu(i,s))}const{stroke:r,strokeWidth:a,strokeOpacity:l,lineDash:d,lineDashOffset:c}=s;return s.whisker=xu(s.whisker,{stroke:r,strokeWidth:a,strokeOpacity:l,lineDash:d,lineDashOffset:c}),s}makeItemStylerParams(e,t,i){var n,o,s;const{id:r}=this,{xKey:a,minKey:l,q1Key:d,medianKey:c,q3Key:u,maxKey:h}=this.properties,g=null===(n=this.processedData)||void 0===n||null===(n=n.dataSources.get(r))||void 0===n?void 0:n.data[e],m=null===(o=this.ctx.highlightManager)||void 0===o?void 0:o.getActiveHighlight(),f=this.getHighlightStateString(m,t,e),v=null!==(s=this.filterItemStylerFillParams(i.fill))&&void 0!==s?s:i.fill;return p(p({seriesId:r,datum:g,xKey:a,minKey:l,q1Key:d,medianKey:c,q3Key:u,maxKey:h,highlightState:f},i),{},{fill:v})}updateDatumStyles(e){let{datumSelection:t,isHighlight:i}=e;const n=this.ctx.highlightManager.getActiveHighlight();t.each((e,t)=>{const o=this.getHighlightState(n,i,t.datumIndex);t.style=this.getItemStyle(t.datumIndex,i,o)})}updateDatumNodes(e){var t;let{datumSelection:i,isHighlight:n}=e;const{contextNodeData:o,properties:s}=this;if(!o)return;const r=this.isVertical(),a=this.ctx.highlightManager.getActiveHighlight(),l=this.getShapeFillBBox(),d=this.getStyle(!1,RY.None).strokeWidth/2,c=null!==(t=s.whisker.strokeWidth)&&void 0!==t?t:s.strokeWidth;i.each((e,t)=>{var i,s,u,h;const p=null!==(i=t.style)&&void 0!==i?i:o.styles[this.getHighlightState(a,n,t.datumIndex)];e.setFillProperties(p.fill,l);const g=null!==(s=p.opacity)&&void 0!==s?s:1,m=null!==(u=null===(h=p.whisker)||void 0===h?void 0:h.strokeOpacity)&&void 0!==u?u:p.strokeOpacity;e.fill=p.fill,e.fillOpacity=p.fillOpacity*g,e.stroke=p.stroke,e.strokeWidth=p.strokeWidth,e.strokeOpacity=p.strokeOpacity*g,e.lineDash=p.lineDash,e.lineDashOffset=p.lineDashOffset,e.wickStroke=p.whisker.stroke,e.wickStrokeWidth=p.whisker.strokeWidth,e.wickStrokeOpacity=m*g,e.wickLineDash=p.whisker.lineDash,e.wickLineDashOffset=p.whisker.lineDashOffset,e.cornerRadius=p.cornerRadius,e.crisp=!0,e.horizontal=!r,e.center=t.scaledValues.xValue,e.thickness=t.bandwidth,e.min=t.scaledValues.minValue,e.q1=t.scaledValues.q1Value,e.median=t.scaledValues.medianValue,e.q3=t.scaledValues.q3Value,e.max=t.scaledValues.maxValue,e.capLengthRatio=p.cap.lengthRatio,e.strokeAlignment=d,e.wickStrokeAlignment=c})}updateLabelNodes(){}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t)}nodeFactory(){return new gY}computeFocusBounds(e){var t;let{datumIndex:i}=e;return NY(this,null===(t=this.contextNodeData)||void 0===t?void 0:t.nodeData[i].focusRect)}hasItemStylers(){return null!=this.properties.itemStyler||null!=this.properties.styler}};VY.className="BoxPlotSeries",VY.type="box-plot";var{boxPlotSeriesThemeableOptionsDef:GY}=uE,HY=p(p(p({},Yc),GY),{},{type:pd(jd("box-plot")),xKey:pd(Ad),minKey:pd(Ad),q1Key:pd(Ad),medianKey:pd(Ad),q3Key:pd(Ad),maxKey:pd(Ad),xKeyAxis:Ad,yKeyAxis:Ad,xName:Ad,yName:Ad,minName:Ad,q1Name:Ad,medianName:Ad,q3Name:Ad,maxName:Ad,grouped:Cd,legendItemName:Ad,segmentation:vc}),{FILL_GRADIENT_LINEAR_DEFAULTS:jY,FILL_IMAGE_DEFAULTS:WY,FILL_PATTERN_DEFAULTS:_Y,SAFE_FILL_OPERATION:KY,SEGMENTATION_DEFAULTS:UY}=uE,YY={series:{direction:"vertical",fill:{$applySwitch:[{$path:"type"},{$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isPattern:{$palette:"fill"}},{$isImage:{$palette:"fill"}}]},{$palette:"fill"},{$mix:[KY,{$ref:"chartBackgroundColor"},.7]}]},["gradient",jY],["image",WY],["pattern",_Y]]},stroke:{$palette:"stroke"},strokeWidth:2,fillOpacity:1,strokeOpacity:1,lineDash:void 0,lineDashOffset:0,highlight:{unhighlightedItem:{opacity:.5},unhighlightedSeries:{opacity:.1}},segmentation:UY},axes:{[zh.NUMBER]:{crosshair:{snap:!1}},[zh.CATEGORY]:{groupPaddingInner:.2,crosshair:{enabled:!1,snap:!1}}}},{DIRECTION_SWAP_AXES:$Y,predictCartesianNonPrimitiveAxis:ZY}=uE,XY={type:"series",name:"box-plot",chartType:"cartesian",enterprise:!0,groupable:!0,version:GC,dependencies:[uz],options:HY,predictAxis:ZY,defaultAxes:$Y,axisKeys:{[_u.X]:"xKeyAxis",[_u.Y]:"yKeyAxis"},axisKeysFlipped:{[_u.X]:"yKeyAxis",[_u.Y]:"xKeyAxis"},themeTemplate:YY,create:e=>new VY(e)};var qY=Im(function(e,t,i,n,o,s,r,a){const[l,d]=ph(e,o);return wh([l,d],t,i,n,{smallestKeyInterval:s,xNeedsValueOf:r,yNeedsValueOf:a})});var{Path:QY,BBox:JY}=uE,e$=class extends QY{constructor(){super(...arguments),this.centerX=0,this.y=0,this.width=0,this.height=0,this.yOpen=0,this.yClose=0,this.crisp=!1}setStaticProperties(e,t,i,n,o,s,r){this.__centerX=e,this.__width=t,this.__y=i,this.__height=n,this.__yOpen=o,this.__yClose=s,this.__crisp=r,this.dirtyPath=!0,this.markDirty()}computeBBox(){const{__centerX:e,__y:t,__width:i,__height:n}=this;return new JY(e-i/2,t,i,n)}isPointInPath(e,t){return this.getBBox().containsPoint(e,t)}distanceSquared(e,t){return this.getBBox().distanceSquared(e,t)}get midPoint(){return{x:this.__centerX,y:this.__y+this.__height/2}}alignedCoordinates(){const{__y:e,__width:t,__height:i,__crisp:n}=this;let{__centerX:o,__yOpen:s,__yClose:r}=this,a=o-t/2,l=o+t/2,d=e,c=e+i;if(n&&t>1){if(o=this.align(o),s<=r){const e=this.align(s,r-s);s=this.align(s),r=s+e}else{const e=this.align(r,s-r);r=this.align(r),s=r+e}const n=this.align(t/2);a=o-n,l=o+n,d=this.align(e),c=d+this.align(d,i)}return{centerX:o,x0:a,x1:l,y0:d,y1:c,yOpen:s,yClose:r}}executeStroke(e,t){const{__width:i,strokeWidth:n}=this;i<n&&(e.lineWidth=i),super.executeStroke(e,t)}};kV([$y()],e$.prototype,"centerX",2),kV([$y()],e$.prototype,"y",2),kV([$y()],e$.prototype,"width",2),kV([$y()],e$.prototype,"height",2),kV([$y()],e$.prototype,"yOpen",2),kV([$y()],e$.prototype,"yClose",2),kV([$y()],e$.prototype,"crisp",2);var t$=class extends e${constructor(){super(...arguments),this.strokeAlignment=0}updatePath(){var e,t;const{path:i}=this,{centerX:n,x0:o,x1:s,y0:r,y1:a,yOpen:l,yClose:d}=this.alignedCoordinates(),c=null!==(e=null===(t=this.layerManager)||void 0===t?void 0:t.canvas.pixelRatio)&&void 0!==e?e:1,u=this.__strokeAlignment>0?c/this.__strokeAlignment/2%1:0;i.clear(),i.moveTo(n-u,r),i.lineTo(n-u,a),Math.abs(s-o)>1&&(i.moveTo(o,l-u),i.lineTo(n-u,l-u),i.moveTo(n-u,d-u),i.lineTo(s,d-u))}};kV([$y()],t$.prototype,"strokeAlignment",2);var i$=Qu,n$=th,o$=eh,s$=Ju,r$=ih,{AggregationManager:a$,fixNumericExtent:l$,keyProperty:d$,createDatumId:c$,SeriesNodePickMode:u$,SMALLEST_KEY_INTERVAL:h$,valueProperty:p$,diff:g$,animationValidation:m$,computeBarFocusBounds:f$,visibleRangeIndices:v$,BandScale:y$,processedDataIsAnimatable:b$,getItemStylesPerItemId:x$}=uE,C$=class extends uE.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.xKey=n.properties.xKey,this.openKey=n.properties.openKey,this.closeKey=n.properties.closeKey,this.highKey=n.properties.highKey,this.lowKey=n.properties.lowKey}};var S$=class extends uE.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[u$.AXIS_ALIGNED,u$.EXACT_SHAPE_MATCH],propertyKeys:{x:["xKey"],y:["lowKey","highKey","openKey","closeKey"]},propertyNames:{x:["xName"],y:["lowName","highName","openName","closeName"]},categoryKey:"xValue",pathsPerSeries:[]}),this.NodeEvent=C$,this.aggregationManager=new a$}async processData(e){var t,i,n;if(!this.visible)return;const{xKey:o,openKey:s,closeKey:r,highKey:a,lowKey:l}=this.properties,d=!this.ctx.animationManager.isSkipped(),c=null===(t=this.getCategoryAxis())||void 0===t?void 0:t.scale,u=null===(i=this.getValueAxis())||void 0===i?void 0:i.scale,{isContinuousX:h,xScaleType:p,yScaleType:g}=this.getScaleInformation({xScale:c,yScale:u}),m=[];this.needsDataModelDiff()&&this.processedData&&m.push(g$(this.id,this.processedData)),d&&m.push(m$()),s&&m.push(p$(s,g,{id:"openValue",invalidValue:void 0,missingValue:void 0}));const{dataModel:f,processedData:v}=await this.requestDataModel(e,this.data,{props:[d$(o,p,{id:"xValue"}),p$(r,g,{id:"closeValue"}),p$(a,g,{id:"highValue"}),p$(l,g,{id:"lowValue"}),...h?[h$]:[],...m]});this.smallestDataInterval=null===(n=v.reduced)||void 0===n?void 0:n.smallestKeyInterval,this.aggregateData(f,v),this.animationState.transition("updateData")}aggregateData(e,t){if(this.aggregationManager.markStale(),"ungrouped"!==t.type)return;if(b$(t))return;const i=this.axes[_u.X];if(null==i)return;const n=this.estimateTargetRange();this.aggregationManager.aggregate({computePartial:o=>function(e,t,i,n,o,s){var r,a;const l=t.resolveKeysById(n,"xValue",i),d=t.resolveColumnById(n,"highValue",i),c=t.resolveColumnById(n,"lowValue",i),u=t.getDomain(n,"xValue","key",i),h=t.resolveColumnNeedsValueOf(n,"xValue",i),p=null!==(r=t.resolveColumnNeedsValueOf(n,"highValue",i))&&void 0!==r?r:t.resolveColumnNeedsValueOf(n,"lowValue",i),[g,m]=ph(e,u);return Mh([g,m],l,d,c,{smallestKeyInterval:null===(a=i.reduced)||void 0===a?void 0:a.smallestKeyInterval,targetRange:o,xNeedsValueOf:h,yNeedsValueOf:p,existingFilters:s})}(i.scale.type,e,t,this,n,o),computeFull:n=>function(e,t,i,n,o){var s,r;const a=t.resolveKeysById(n,"xValue",i),l=t.resolveColumnById(n,"highValue",i),d=t.resolveColumnById(n,"lowValue",i),c=t.getDomain(n,"xValue","key",i),u=t.resolveColumnNeedsValueOf(n,"xValue",i),h=null!==(s=t.resolveColumnNeedsValueOf(n,"highValue",i))&&void 0!==s?s:t.resolveColumnNeedsValueOf(n,"lowValue",i);if(o){var p;const[t,n]=ph(e,c);return wh([t,n],a,l,d,{smallestKeyInterval:null===(p=i.reduced)||void 0===p?void 0:p.smallestKeyInterval,xNeedsValueOf:u,yNeedsValueOf:h,existingFilters:o})}return qY(e,a,l,d,c,null===(r=i.reduced)||void 0===r?void 0:r.smallestKeyInterval,u,h)}(i.scale.type,e,t,this,n),targetRange:n});const o=this.aggregationManager.filters;o&&o.length>0&&sa.record("".concat(this.type,":aggregation"),o.map(e=>e.maxRange))}estimateTargetRange(){const e=this.axes[_u.X];if(!e)return-1;const[t,i]=e.scale.range;return Math.abs(i-t)}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!t||!i)return{domain:[]};if(e!==this.getBarDirection()){const{def:e}=i.resolveProcessedDataDefById(this,"xValue"),n=i.getDomain(this,"xValue","key",t);return"key"===e.type&&"category"===e.valueType?n:{domain:this.padBandExtent(n.domain)}}const n=this.domainForClippedRange(e,["highValue","lowValue"],"xValue");return{domain:l$(n)}}getSeriesRange(e,t){return this.domainForVisibleRange(_u.Y,["highValue","lowValue"],"xValue",t)}getZoomRangeFittingItems(e,t,i){return this.zoomFittingVisibleItems("xValue",["highValue","lowValue"],e,t,i)}getVisibleItems(e,t,i){return this.countVisibleItems("xValue",["highValue","lowValue"],e,t,i)}createNodeDatumContext(e,t){var i,n,o;const{dataModel:s,processedData:r,groupScale:a}=this;if(!s||!r)return;const l=null!==(i=null===(n=r.dataSources.get(this.id))||void 0===n?void 0:n.data)&&void 0!==i?i:[];if(0===l.length)return;const d=e.scale,c=t.scale,{barWidth:u,groupIndex:h}=this.updateGroupScale(e),p=a.convert(String(h)),g=u>=1?u:a.rawBandwidth,m=y$.is(d),[f,v]=d.range,y=Math.abs(v-f);this.aggregationManager.ensureLevelForRange(y);const b=this.aggregationManager.getFilterForRange(y),x=null==b,C=null!=(null===(o=this.contextNodeData)||void 0===o?void 0:o.nodeData)&&(null!=r.changeDescription||!b$(r)||null!=b);return{rawData:l,xValues:s.resolveKeysById(this,"xValue",r),openValues:s.resolveColumnById(this,"openValue",r),closeValues:s.resolveColumnById(this,"closeValue",r),highValues:s.resolveColumnById(this,"highValue",r),lowValues:s.resolveColumnById(this,"lowValue",r),xScale:d,yScale:c,xAxis:e,yAxis:t,barWidth:u,groupOffset:p,effectiveBarWidth:g,applyWidthOffset:m,crisp:x,xKey:this.properties.xKey,openKey:this.properties.openKey,closeKey:this.properties.closeKey,highKey:this.properties.highKey,lowKey:this.properties.lowKey,dataAggregationFilter:b,range:y,nodeDatumStateScratch:{datum:void 0,xValue:void 0,openValue:0,closeValue:0,highValue:0,lowValue:0,isRising:!0,itemType:"up"},canIncrementallyUpdate:C,nodeIndex:0,nodeData:C?this.contextNodeData.nodeData:[]}}prepareOhlcNodeDatumState(e,t){const i=e.xValues[t];if(null==i)return;const n=e.openValues[t],o=e.closeValues[t],s=e.highValues[t],r=e.lowValues[t],a=null!=s&&s>=n&&s>=o;if(!(null!=r&&r<=n&&r<=o))return void jr.warnOnce("invalid low value for key [".concat(e.lowKey,"] in data element, low value cannot be higher than datum open or close values"));if(!a)return void jr.warnOnce("invalid high value for key [".concat(e.highKey,"] in data element, high value cannot be lower than datum open or close values."));const l=e.rawData[t],d=o>n,c=d?"up":"down",u=e.nodeDatumStateScratch;return u.datum=l,u.xValue=i,u.openValue=n,u.closeValue=o,u.highValue=s,u.lowValue=r,u.isRising=d,u.itemType=c,u}createSkeletonNodeDatum(e,t,i,n,o,s){const r=n+(e.applyWidthOffset?o/2:0),a=e.yScale.convert(t.openValue),l=e.yScale.convert(t.closeValue),d=e.yScale.convert(t.highValue),c=e.yScale.convert(t.lowValue),u=Math.min(d,c),h=Math.max(d,c)-u;return{series:this,itemType:t.itemType,datum:t.datum,datumIndex:i,xKey:e.xKey,xValue:t.xValue,openValue:t.openValue,closeValue:t.closeValue,highValue:t.highValue,lowValue:t.lowValue,midPoint:{x:r,y:u+h/2},aggregatedValue:t.closeValue,isRising:t.isRising,centerX:r,width:o,y:u,height:h,yOpen:a,yClose:l,crisp:s}}updateNodeDatum(e,t,i,n,o,s,r){const a=t,l=o+(e.applyWidthOffset?s/2:0),d=e.yScale.convert(i.openValue),c=e.yScale.convert(i.closeValue),u=e.yScale.convert(i.highValue),h=e.yScale.convert(i.lowValue),p=Math.min(u,h),g=Math.max(u,h)-p;a.datum=i.datum,a.datumIndex=n,a.itemType=i.itemType,a.xValue=i.xValue,a.openValue=i.openValue,a.closeValue=i.closeValue,a.highValue=i.highValue,a.lowValue=i.lowValue,a.aggregatedValue=i.closeValue,a.isRising=i.isRising,a.centerX=l,a.width=s,a.y=p,a.height=g,a.yOpen=d,a.yClose=c,a.crisp=r;const m=a.midPoint;m.x=l,m.y=p+g/2}upsertNodeDatum(e,t,i,n,o){const s=this.prepareOhlcNodeDatumState(e,t);if(!s)return;if(e.canIncrementallyUpdate&&e.nodeIndex<e.nodeData.length)this.updateNodeDatum(e,e.nodeData[e.nodeIndex],s,t,i,n,o);else{const r=this.createSkeletonNodeDatum(e,s,t,i,n,o);e.nodeData.push(r)}e.nodeIndex++}createNodeData(){var e;const{visible:t}=this,i=this.getCategoryAxis(),n=this.getValueAxis();if(!i||!n)return;const o=this.createNodeDatumContext(i,n),s={itemId:this.properties.xKey,nodeData:null!==(e=null===o||void 0===o?void 0:o.nodeData)&&void 0!==e?e:[],labelData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible,styles:x$(this.getItemStyle.bind(this),"up","down")};if(!t||!o)return s;const r=e=>o.xScale.convert(o.xValues[e])+o.groupOffset;if(null==o.dataAggregationFilter){var a;const e=null===(a=this.processedData.invalidData)||void 0===a?void 0:a.get(this.id);let[t,i]=v$(1,o.rawData.length,o.xAxis.range,e=>{const t=o.applyWidthOffset?0:-o.effectiveBarWidth/2,i=r(e)+t;return[i,i+o.effectiveBarWidth]});this.processedData.input.count<1e3&&(t=0,i=this.processedData.input.count);for(let n=t;n<i;n+=1){if(!0===(null===e||void 0===e?void 0:e[n]))continue;const t=r(n);this.upsertNodeDatum(o,n,t,o.effectiveBarWidth,o.crisp)}o.canIncrementallyUpdate&&o.nodeIndex<o.nodeData.length&&(o.nodeData.length=o.nodeIndex)}else{const{maxRange:e,indexData:t,midpointIndices:i}=o.dataAggregationFilter,[n,s]=v$(1,e,o.xAxis.range,e=>{const n=t[e*r$+s$],s=i[e];if(-1===s)return;const a=o.applyWidthOffset?0:-o.effectiveBarWidth/2;return[r(s)+a,r(n)+a+o.effectiveBarWidth]});for(let a=n;a<s;a+=1){const e=a*r$,n=t[e+i$],s=t[e+s$],l=t[e+n$],d=t[e+o$],c=i[a];if(-1===c)continue;const u=this.prepareOhlcNodeDatumState(o,c);if(!u)continue;u.openValue=o.openValues[n],u.closeValue=o.closeValues[s],u.highValue=o.highValues[l],u.lowValue=o.lowValues[d],u.isRising=u.closeValue>u.openValue,u.itemType=u.isRising?"up":"down";const h=r(c),p=Math.abs(r(s)-r(n))+o.effectiveBarWidth;if(o.canIncrementallyUpdate&&o.nodeIndex<o.nodeData.length)this.updateNodeDatum(o,o.nodeData[o.nodeIndex],u,c,h,p,!1);else{const e=this.createSkeletonNodeDatum(o,u,c,h,p,!1);o.nodeData.push(e)}o.nodeIndex++}o.canIncrementallyUpdate&&o.nodeIndex<o.nodeData.length&&(o.nodeData.length=o.nodeIndex)}return s}isVertical(){return!0}isLabelEnabled(){return!1}resetDatumAnimation(e){!function(e){for(const t of e){const e=t.nodes();t.batchedUpdate(function(){for(const t of e){const e=t.datum;null!=e&&t.setStaticProperties(e.centerX,e.width,e.y,e.height,e.yOpen,e.yClose,e.crisp)}t.cleanup()})}}([e.datumSelection])}updateDatumSelection(e){var t;const i=null!==(t=e.nodeData)&&void 0!==t?t:[];return b$(this.processedData)?e.datumSelection.update(i,void 0,e=>c$(e.xValue)):e.datumSelection.update(i)}updateLabelNodes(e){}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t)}getItemStyle(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"up";const{properties:o,dataModel:s,processedData:r}=this,{itemStyler:a}=o;let l=xu(this.getHighlightStyle(t,e,i),o.getStyle(n));if(a&&null!=s&&null!=r&&null!=e){const i=s.resolveKeysById(this,"xValue",r)[e],o=this.cachedDatumCallback(c$(c$(i),t?"highlight":"node"),()=>{const i=this.makeItemStylerParams(n,e,t,l);return this.ctx.optionsGraphService.resolvePartial(["series","".concat(this.declarationOrder),"item",n],this.callWithContext(a,i))});o&&(l=xu(o,l))}return l}makeItemStylerParams(e,t,i,n){var o,s;const{id:r,properties:a,processedData:l}=this,{xKey:d,openKey:c,closeKey:u,highKey:h,lowKey:g}=a,m=null===(o=l.dataSources.get(r))||void 0===o?void 0:o.data[t],f=null===(s=this.ctx.highlightManager)||void 0===s?void 0:s.getActiveHighlight(),v=p({seriesId:r,datum:m,itemType:e,xKey:d,openKey:c,closeKey:u,highKey:h,lowKey:g,highlightState:this.getHighlightStateString(f,i,t)},n);var y;"fill"in v&&"fill"in n&&(v.fill=null!==(y=this.filterItemStylerFillParams(n.fill))&&void 0!==y?y:n.fill);return v}getTooltipContent(e){var t,i,n,o,s,r,a,l;const{id:d,dataModel:c,processedData:u,properties:h}=this,{xKey:g,xName:m,yName:f,openKey:v,openName:y,highKey:b,highName:x,lowKey:C,lowName:S,closeKey:w,closeName:M,legendItemName:k,tooltip:D}=h,I=this.getCategoryAxis(),A=this.getValueAxis();if(!c||!u||!I||!A)return;const L=null===(t=u.dataSources.get(this.id))||void 0===t?void 0:t.data[e],N=c.resolveKeysById(this,"xValue",u)[e],T=c.resolveColumnById(this,"openValue",u)[e],R=c.resolveColumnById(this,"highValue",u)[e],E=c.resolveColumnById(this,"lowValue",u)[e],P=c.resolveColumnById(this,"closeValue",u)[e];if(null==N)return;const O=P>=T?"up":"down",F=this.properties.item[O],z=this.getItemStyle(e,!1),B={fill:null!==(i=F.fill)&&void 0!==i?i:F.stroke,fillOpacity:null!==(n=null!==(o=F.fillOpacity)&&void 0!==o?o:F.strokeOpacity)&&void 0!==n?n:1,stroke:F.stroke,strokeWidth:null!==(s=F.strokeWidth)&&void 0!==s?s:1,strokeOpacity:null!==(r=F.strokeOpacity)&&void 0!==r?r:1,lineDash:null!==(a=F.lineDash)&&void 0!==a?a:[0],lineDashOffset:null!==(l=F.lineDashOffset)&&void 0!==l?l:0};return this.formatTooltipWithContext(D,{heading:this.getAxisValueText(I,"tooltip",N,L,g,k),title:k,symbol:{marker:B},data:[{label:y,fallbackLabel:v,value:this.getAxisValueText(A,"tooltip",T,L,v,k),missing:uE.isTooltipValueMissing(T)},{label:x,fallbackLabel:b,value:this.getAxisValueText(A,"tooltip",R,L,b,k),missing:uE.isTooltipValueMissing(R)},{label:S,fallbackLabel:C,value:this.getAxisValueText(A,"tooltip",E,L,C,k),missing:uE.isTooltipValueMissing(E)},{label:M,fallbackLabel:w,value:this.getAxisValueText(A,"tooltip",P,L,w,k),missing:uE.isTooltipValueMissing(P)}]},p({seriesId:d,datum:L,title:f,itemType:O,xKey:g,xName:m,yName:f,openKey:v,openName:y,highKey:b,highName:x,lowKey:C,lowName:S,closeKey:w,closeName:M},z))}computeFocusBounds(e){var t;const i=null===(t=this.getNodeData())||void 0===t?void 0:t.at(e.datumIndex);if(null==i)return;const{centerX:n,y:o,width:s,height:r}=i;return f$(this,{x:n-s/2,y:o,width:s,height:r})}},{ExtendedPath2D:w$,BBox:M$}=uE,k$=class extends e${constructor(){super(...arguments),this.wickPath=new w$,this.wickStroke=void 0,this.wickStrokeWidth=void 0,this.wickStrokeOpacity=void 0,this.wickStrokeAlignment=0}setWickProperties(e,t,i,n,o){this.__wickStroke=e,this.__wickStrokeWidth=t,this.__wickStrokeOpacity=i,this.wickLineDash=n,this.__wickLineDashOffset=o,this.dirtyPath=!0,this.markDirty()}computeDefaultGradientFillBBox(){const{__width:e,__centerX:t,__yOpen:i,__yClose:n}=this,o=Math.min(i,n),s=Math.max(i,n),r=t-e/2;return new M$(r,o,t+e/2-r,s-o)}updatePath(){var e,t;const{path:i,stroke:n,strokeWidth:o,strokeOpacity:s,lineDash:r,lineDashOffset:a,__wickStroke:l,__wickStrokeWidth:d,__wickStrokeOpacity:c,wickLineDash:u,__wickLineDashOffset:h}=this,{centerX:p,x0:g,x1:m,y0:f,y1:v,yOpen:y,yClose:b}=this.alignedCoordinates(),x=null!==(e=null===(t=this.layerManager)||void 0===t?void 0:t.canvas.pixelRatio)&&void 0!==e?e:1,C=this.__wickStrokeAlignment>0?x/this.__wickStrokeAlignment/2%1:0;this.path.clear(),this.wickPath.clear();const S=null!=l&&l!==n||null!=d&&d!==o||null!=c&&c!==s||null!=u&&u!==r||null!=h&&h!==a?this.wickPath:i;if(Math.abs(m-g)<=3)return S.moveTo(p-C,f),void S.lineTo(p-C,v);const w=Math.min(y,b),M=Math.max(y,b),k=o/2;S.moveTo(p-C,f),S.lineTo(p-C,w+k),S.moveTo(p-C,v),S.lineTo(p-C,M-k);const D=M-w-2*k;if(D>0)i.rect(g+k,w+k,m-g-2*k,D);else{const e=(w+M)/2;i.moveTo(g,e),i.lineTo(m,e)}}drawPath(e){super.drawPath(e);const{wickPath:t}=this;if(t.isEmpty())return;const{stroke:i,strokeWidth:n,strokeOpacity:o,lineDash:s,lineDashOffset:r,__wickStroke:a=i,__wickStrokeWidth:l=n,__wickStrokeOpacity:d=o,wickLineDash:c=s,__wickLineDashOffset:u=r}=this;0!==l&&(e.globalAlpha*=d,"string"===typeof a&&(e.strokeStyle=a),e.lineWidth=l,null!=c&&e.setLineDash([...c]),e.lineDashOffset=u,e.stroke(t.getPath2D()))}};kV([$y()],k$.prototype,"wickStroke",2),kV([$y()],k$.prototype,"wickStrokeWidth",2),kV([$y()],k$.prototype,"wickStrokeOpacity",2),kV([Yy()],k$.prototype,"wickLineDash",2),kV([$y()],k$.prototype,"wickLineDashOffset",2),kV([$y()],k$.prototype,"wickStrokeAlignment",2);var{AbstractBarSeriesProperties:D$,makeSeriesTooltip:I$}=uE,A$=class extends kh{constructor(){super(...arguments),this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};kV([ru],A$.prototype,"stroke",2),kV([ru],A$.prototype,"strokeWidth",2),kV([ru],A$.prototype,"strokeOpacity",2),kV([ru],A$.prototype,"lineDash",2),kV([ru],A$.prototype,"lineDashOffset",2);var L$=class extends kh{constructor(){super(...arguments),this.up=new A$,this.down=new A$}};kV([ru],L$.prototype,"up",2),kV([ru],L$.prototype,"down",2);var N$=class extends D${};kV([ru],N$.prototype,"xKey",2),kV([ru],N$.prototype,"openKey",2),kV([ru],N$.prototype,"closeKey",2),kV([ru],N$.prototype,"highKey",2),kV([ru],N$.prototype,"lowKey",2),kV([ru],N$.prototype,"xName",2),kV([ru],N$.prototype,"yName",2),kV([ru],N$.prototype,"openName",2),kV([ru],N$.prototype,"closeName",2),kV([ru],N$.prototype,"highName",2),kV([ru],N$.prototype,"lowName",2);var T$=class extends N${constructor(){super(...arguments),this.tooltip=I$(),this.item=new L$}getStyle(e){const{strokeWidth:t,strokeOpacity:i,stroke:n,lineDash:o,lineDashOffset:s}=this.item[e];return{stroke:n,strokeWidth:t,strokeOpacity:i,lineDash:o,lineDashOffset:s,opacity:1}}};kV([ru],T$.prototype,"tooltip",2),kV([ru],T$.prototype,"item",2),kV([ru],T$.prototype,"itemStyler",2);var{makeSeriesTooltip:R$}=uE,E$=class extends kh{};kV([ru],E$.prototype,"stroke",2),kV([ru],E$.prototype,"strokeWidth",2),kV([ru],E$.prototype,"strokeOpacity",2),kV([ru],E$.prototype,"lineDash",2),kV([ru],E$.prototype,"lineDashOffset",2);var P$=class extends kh{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.wick=new E$}};kV([ru],P$.prototype,"fill",2),kV([ru],P$.prototype,"fillOpacity",2),kV([ru],P$.prototype,"stroke",2),kV([ru],P$.prototype,"strokeWidth",2),kV([ru],P$.prototype,"strokeOpacity",2),kV([ru],P$.prototype,"lineDash",2),kV([ru],P$.prototype,"lineDashOffset",2),kV([ru],P$.prototype,"cornerRadius",2),kV([ru],P$.prototype,"wick",2);var O$=class extends kh{constructor(){super(...arguments),this.up=new P$,this.down=new P$}};kV([ru],O$.prototype,"up",2),kV([ru],O$.prototype,"down",2);var F$=class extends N${constructor(){super(...arguments),this.item=new O$,this.tooltip=R$()}getStyle(e){const{fill:t,fillOpacity:i,strokeWidth:n,strokeOpacity:o,stroke:s,lineDash:r,lineDashOffset:a,cornerRadius:l,wick:d}=this.item[e];return{fill:t,fillOpacity:i,stroke:s,strokeWidth:n,strokeOpacity:o,lineDash:r,lineDashOffset:a,cornerRadius:l,opacity:1,wick:d}}};kV([ru],F$.prototype,"item",2),kV([ru],F$.prototype,"tooltip",2),kV([ru],F$.prototype,"itemStyler",2);var z$=class extends S${constructor(){super(...arguments),this.properties=new F$}nodeFactory(){const e=new k$;return e.lineCap="butt",e}updateDatumStyles(e){let{datumSelection:t,isHighlight:i}=e;t.each((e,t)=>{t.style=this.getItemStyle(t.datumIndex,i,void 0,t.itemType)})}updateDatumNodes(e){let{datumSelection:t,isHighlight:i}=e;const{contextNodeData:n,properties:o}=this;if(!n)return;const s=this.ctx.highlightManager.getActiveHighlight(),{up:r,down:a}=o.item,l=this.getShapeFillBBox(),d=this;t.each(function(e,t){var o,c;const{centerX:u,width:h,y:p,height:g,yOpen:m,yClose:f,crisp:v}=t,y=t.isRising?r:a,b=d.getHighlightState(s,i,t.datumIndex),x=null!==(o=t.style)&&void 0!==o?o:n.styles[t.itemType][b];e.setStaticProperties(u,h,p,g,m,f,v),e.setStyleProperties(x,l);const C=null===x||void 0===x?void 0:x.wick;e.setWickProperties(null===C||void 0===C?void 0:C.stroke,null===C||void 0===C?void 0:C.strokeWidth,null===C||void 0===C?void 0:C.strokeOpacity,null===C||void 0===C?void 0:C.lineDash,null===C||void 0===C?void 0:C.lineDashOffset),e.wickStrokeAlignment=null!==(c=y.wick.strokeWidth)&&void 0!==c?c:y.strokeWidth})}legendItemSymbol(){var e,t;const{up:i,down:n}=this.properties.item,o={type:"gradient",gradient:"linear",rotation:90,colorStops:[...$v(i.fill)?i.fill.colorStops.map(e=>"string"===typeof e?e:{color:e.color,stop:null==e.stop?void 0:.5*e.stop}):[{color:qv(i.fill)||Qv(i.fill)?i.stroke:i.fill,stop:0},{color:qv(i.fill)||Qv(i.fill)?i.stroke:i.fill,stop:.5}],...$v(n.fill)?n.fill.colorStops.map(e=>"string"===typeof e?e:{color:e.color,stop:null==e.stop?void 0:.5*e.stop}):[{color:qv(n.fill)||Qv(n.fill)?n.stroke:n.fill,stop:.5}]],reverse:!1},s={type:"gradient",gradient:"linear",rotation:90,colorStops:[{color:i.stroke,stop:0},{color:i.stroke,stop:.5},{color:n.stroke,stop:.5}],reverse:!1};return{marker:{fill:o,fillOpacity:i.fillOpacity,stroke:s,strokeWidth:null!==(e=i.strokeWidth)&&void 0!==e?e:1,strokeOpacity:null!==(t=i.strokeOpacity)&&void 0!==t?t:1,lineDash:i.lineDash,lineDashOffset:i.lineDashOffset}}}getLegendData(e){var t;const{id:i,data:n,visible:o,ctx:{legendManager:s}}=this,{xKey:r,yName:a,showInLegend:l,legendItemName:d}=this.properties;return null!==n&&void 0!==n&&n.data.length&&r&&"category"===e?[{legendType:"category",id:i,itemId:i,seriesId:i,enabled:o&&s.getItemEnabled({seriesId:i,itemId:i}),label:{text:null!==(t=null!==d&&void 0!==d?d:a)&&void 0!==t?t:i},symbol:this.legendItemSymbol(),legendItemName:d,hideInLegend:!l}]:[]}hasItemStylers(){return null!=this.properties.itemStyler}};z$.className="CandleStickSeries",z$.type="candlestick";var{candlestickSeriesThemeableOptionsDef:B$}=uE,V$=p(p(p({},Yc),B$),{},{type:pd(jd("candlestick")),xKey:pd(Ad),openKey:pd(Ad),highKey:pd(Ad),lowKey:pd(Ad),closeKey:pd(Ad),xName:Ad,yName:Ad,openName:Ad,highName:Ad,lowName:Ad,closeName:Ad,xKeyAxis:Ad,yKeyAxis:Ad});V$.pickOutsideVisibleMinorAxis=gd(Cd),V$.focusPriority=gd(Dd);var{multiSeriesHighlightStyle:G$,FILL_GRADIENT_LINEAR_KEYED_DEFAULTS:H$,FILL_IMAGE_DEFAULTS:j$,FILL_PATTERN_KEYED_DEFAULTS:W$}=uE;function _$(e){return{fill:{$applySwitch:[{$path:"type"},{$if:[{$eq:[{$palette:"type"},"user-indexed"]},"up"===e?"transparent":{$palette:"fill"},{$palette:"".concat(e,".fill")}]},["gradient",H$(e)],["image",j$],["pattern",W$(e)]]},stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:"".concat(e,".stroke")}]}}}var K$={series:{item:{up:_$("up"),down:_$("down")},tooltip:{range:{$path:["/tooltip/range","nearest"]}},highlight:G$()},animation:{enabled:!1},axes:{[zh.NUMBER]:{crosshair:{snap:!1}},[zh.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},{predictCartesianFinancialAxis:U$}=uE,Y$={type:"series",name:"candlestick",chartType:"cartesian",enterprise:!0,groupable:!1,version:GC,dependencies:[uz],options:V$,predictAxis:U$,defaultAxes:{y:{type:zh.NUMBER,position:Fh.LEFT},x:{type:zh.ORDINAL_TIME,position:Fh.BOTTOM}},axisKeys:{[_u.X]:"xKeyAxis",[_u.Y]:"yKeyAxis"},themeTemplate:K$,create:e=>new z$(e)};function $$(e,t,i,n,o,s){var r,a;let{padding:l}=o;const{spacing:d=0}=t,c=2*l,u=2*l+d,h=(null!==(r=t.minimumFontSize)&&void 0!==r?r:t.fontSize)+(null!==(a=n.minimumFontSize)&&void 0!==a?a:n.fontSize);if(h>s(h+u,!1).height-u)return;const g=function(e,t){const{fontSize:i,minimumFontSize:n=i}=e,{fontSize:o,minimumFontSize:s=o}=t,r=i-n,a=o-s;let l=e.fontSize,d=t.fontSize;const c=[{labelFontSize:i,secondaryLabelFontSize:o}];for(;l>n||d>s;)(r>0?(l-n)/r:-1)>(a>0?(d-s)/a:-1)?l--:d--,c.push({labelFontSize:l,secondaryLabelFontSize:d});return c.reverse(),c}(t,n),m={fontFamily:t.fontFamily,fontStyle:t.fontStyle,fontWeight:t.fontWeight},f={fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight};let v,y;return hg(0,g.length-1,o=>{const{labelFontSize:r,secondaryLabelFontSize:a}=g[o],l=0===o,h=p(p({},m),{},{fontSize:r}),b=p(p({},f),{},{fontSize:a}),x=Wm(h).lineHeight(),C=Wm(b).lineHeight(),S=s(x+C+u,l),w=S.width-c,M=S.height-u;if(x+C>M)return;if(null!=v&&v.fontSize===r||(v=Q$(t,e,w,M,h,t.wrapping,l?t.overflowStrategy:"hide")),null==v||v.width>w||v.height>M)return;if(null!=y&&y.fontSize===a||(y=Q$(n,i,w,M,b,n.wrapping,l?n.overflowStrategy:"hide")),null==y)return;const k=v.height+y.height;return y.width>w||k>M?void 0:{width:Math.max(v.width,y.width),height:k+d,meta:S.meta,label:v,secondaryLabel:y}})}function Z$(e,t,i,n){var o;let{padding:s}=i;const r=2*s,a=Math.min(null!==(o=t.minimumFontSize)&&void 0!==o?o:t.fontSize,t.fontSize),l={fontFamily:t.fontFamily,fontStyle:t.fontStyle,fontWeight:t.fontWeight};return hg(a,t.fontSize,i=>{var o,s;const d=p(p({},l),{},{fontSize:i}),c=Wm(d),u=i===a,h=null!==(o=t.lineHeight)&&void 0!==o?o:c.lineHeight(),g=n(h+r,u),m=g.width-r,f=g.height-r;if(h>f||m<0)return;const v=$m(e,{maxWidth:m,maxHeight:f,font:d,textWrap:t.wrapping,overflow:null!==(s=u?t.overflowStrategy:null)&&void 0!==s?s:"hide"});if(!v.length)return;const{width:y,height:b}=c.measureLines(v);return[{width:y,height:b,text:v.join("\n"),fontSize:i,lineHeight:h},g.meta]})}function X$(e){return null!=(null===e||void 0===e?void 0:e.minimumFontSize)&&null!=(null===e||void 0===e?void 0:e.fontSize)&&(null===e||void 0===e?void 0:e.minimumFontSize)>(null===e||void 0===e?void 0:e.fontSize)}function q$(e,t,i,n,o,s){const r=t.enabled?e:void 0,a=n.enabled?i:void 0;let l,d,c;if((X$(t)||X$(n))&&jr.warnOnce("minimumFontSize should be set to a value less than or equal to the font size"),null!=r&&null!=a&&(l=$$(r,t,a,n,o,s)),null==l&&null!=r&&(d=Z$(r,t,o,s)),null!=d){const[e,t]=d;l={width:e.width,height:e.height,meta:t,label:e,secondaryLabel:void 0}}if(null==l&&null==r&&null!=a&&(c=Z$(a,n,o,s)),null!=c){const[e,t]=c;l={width:e.width,height:e.height,meta:t,label:void 0,secondaryLabel:e}}return l}function Q$(e,t,i,n,o,s,r){var a;const l=$m(t,{maxWidth:i,maxHeight:n,font:o,textWrap:s,overflow:r});if(!l.length)return;const d=Wm(o),c=null!==(a=e.lineHeight)&&void 0!==a?a:d.lineHeight(),{width:u}=d.measureLines(l);return{width:u,lineHeight:c,text:l.join("\n"),height:l.length*c,fontSize:o.fontSize}}var J$=class extends uE.Label{constructor(){super(...arguments),this.wrapping="on-space",this.overflowStrategy="ellipsis"}};kV([ru],J$.prototype,"wrapping",2),kV([ru],J$.prototype,"overflowStrategy",2),kV([ru],J$.prototype,"lineHeight",2),kV([ru],J$.prototype,"minimumFontSize",2);var eZ=class extends J${constructor(){super(...arguments),this.spacing=0}};kV([ru],eZ.prototype,"spacing",2);var tZ=class extends J${},{CartesianSeriesProperties:iZ,makeSeriesTooltip:nZ}=uE,oZ=class extends iZ{constructor(){super(...arguments),this.colorRange=["black","black"],this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.textAlign="center",this.verticalAlign="middle",this.itemPadding=0,this.label=new eZ,this.tooltip=nZ()}};kV([ru],oZ.prototype,"title",2),kV([ru],oZ.prototype,"xKey",2),kV([ru],oZ.prototype,"yKey",2),kV([ru],oZ.prototype,"colorKey",2),kV([ru],oZ.prototype,"xName",2),kV([ru],oZ.prototype,"yName",2),kV([ru],oZ.prototype,"colorName",2),kV([ru],oZ.prototype,"colorRange",2),kV([ru],oZ.prototype,"stroke",2),kV([ru],oZ.prototype,"strokeOpacity",2),kV([ru],oZ.prototype,"strokeWidth",2),kV([ru],oZ.prototype,"textAlign",2),kV([ru],oZ.prototype,"verticalAlign",2),kV([ru],oZ.prototype,"itemPadding",2),kV([ru],oZ.prototype,"itemStyler",2),kV([ru],oZ.prototype,"label",2),kV([ru],oZ.prototype,"tooltip",2);var{SeriesNodePickMode:sZ,computeBarFocusBounds:rZ,getMissCount:aZ,valueProperty:lZ,DEFAULT_CARTESIAN_DIRECTION_KEYS:dZ,DEFAULT_CARTESIAN_DIRECTION_NAMES:cZ,createDatumId:uZ,ColorScale:hZ,Rect:pZ,PointerEvents:gZ,addHitTestersToQuadtree:mZ,findQuadtreeMatch:fZ,updateLabelNode:vZ}=uE,yZ=class extends uE.CartesianSeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.colorKey=n.properties.colorKey}},bZ={left:-.5,center:0,right:-.5},xZ={top:-.5,middle:0,bottom:-.5},CZ=class extends uE.CartesianSeries{constructor(e){super({moduleCtx:e,propertyKeys:p(p({},dZ),{},{color:["colorKey"]}),propertyNames:p(p({},cZ),{},{color:["colorName"]}),categoryKey:void 0,pickModes:[sZ.NEAREST_NODE,sZ.EXACT_SHAPE_MATCH],pathsPerSeries:[]}),this.properties=new oZ,this.NodeEvent=yZ,this.colorScale=new hZ}async processData(e){var t,i;const n=this.axes[_u.X],o=this.axes[_u.Y];if(!n||!o)return;const{xKey:s,yKey:r,colorRange:a,colorKey:l}=this.properties,d=null===(t=this.axes[_u.X])||void 0===t?void 0:t.scale,c=null===(i=this.axes[_u.Y])||void 0===i?void 0:i.scale,{xScaleType:u,yScaleType:h}=this.getScaleInformation({xScale:d,yScale:c}),p=this.colorScale.type,{dataModel:g,processedData:m}=await this.requestDataModel(e,this.data,{props:[lZ(s,u,{id:"xValue"}),lZ(r,h,{id:"yValue"}),...l?[lZ(l,p,{id:"colorValue",invalidValue:void 0})]:[]]});if(this.isColorScaleValid()){const e=g.resolveProcessedDataIndexById(this,"colorValue"),t=Rg(m.domain.values[e].filter(e=>null!=e));if(this.colorScale.domain=null!==t&&void 0!==t?t:[],null!==t&&void 0!==t&&t.length&&t[0]===t[1]){const e=Math.floor(a.length/2);this.colorScale.range=[a[e],a[e]]}else this.colorScale.range=a;this.colorScale.update()}}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const n=t.resolveProcessedDataIndexById(this,"colorValue"),o=i.input.count,s=aZ(this,i.defs.values[n].missing),r=t.resolveProcessedDataIndexById(this,"colorValue"),a=i.domain.values[r].filter(e=>null!=e).length;return!(0===o||o===s||0===a)}xCoordinateRange(e,t){var i,n;const o=this.axes[_u.X].scale,s=t*(null!==(i=o.bandwidth)&&void 0!==i?i:0)/2,r=o.convert(e)+s;return[r,r+t*(null!==(n=o.bandwidth)&&void 0!==n?n:10)]}yCoordinateRange(e,t){var i,n;const o=this.axes[_u.Y].scale,s=t*(null!==(i=o.bandwidth)&&void 0!==i?i:0)/2,r=o.convert(e[0])+s;return[r,r+t*(null!==(n=o.bandwidth)&&void 0!==n?n:10)]}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!t||!i)return{domain:[]};if(e===_u.X){return{domain:t.getDomain(this,"xValue","value",i).domain}}return{domain:t.getDomain(this,"yValue","value",i).domain}}getSeriesRange(){return[Number.NaN,Number.NaN]}createNodeData(){var e,t,i,n,o,s,r;const{data:a,visible:l,axes:d,dataModel:c,processedData:u}=this,h=d[_u.X],p=d[_u.Y];if(!(a&&l&&h&&p))return;var g;if(!c||!u)return{itemId:null!==(g=this.properties.yKey)&&void 0!==g?g:this.id,nodeData:[],labelData:[],scales:this.calculateScaling(),visible:this.visible};if("category"!==h.type||"category"!==p.type)return void jr.warnOnce('Heatmap series expected axes to have "category" type, but received "'.concat(h.type,'" and "').concat(p.type,'" instead.'));const{xKey:m,xName:f,yKey:v,yName:y,colorKey:b,colorName:x,textAlign:C,verticalAlign:S,itemPadding:w,label:M}=this.properties,k=c.resolveColumnById(this,"xValue",u),D=c.resolveColumnById(this,"yValue",u),I=b?c.resolveColumnById(this,"colorValue",u):void 0,A=b?c.getDomain(this,"colorValue","value",u).domain:[],L=h.scale,N=p.scale,T=(null!==(e=L.bandwidth)&&void 0!==e?e:0)/2,R=(null!==(t=N.bandwidth)&&void 0!==t?t:0)/2,E=[],P=[],O=null!==(i=L.bandwidth)&&void 0!==i?i:10,F=null!==(n=N.bandwidth)&&void 0!==n?n:10,z=(O-2*w)*bZ[C],B=(F-2*w)*xZ[S],V=()=>({width:O,height:F,meta:null}),G=null!==(o=null===(s=u.dataSources.get(this.id))||void 0===s?void 0:s.data)&&void 0!==o?o:[];for(const[H,j]of G.entries()){const e=k[H],t=D[H],i=L.convert(e)+T,n=N.convert(t)+R,o=null===I||void 0===I?void 0:I[H],s=q$(ed(M.enabled&&null!=o?this.getLabelText(o,j,b,"color",A,M,{value:o,datum:j,colorKey:b,colorName:x,xKey:m,yKey:v,xName:f,yName:y}):void 0),this.properties.label,void 0,this.properties.label,{padding:w},V),r={x:i,y:n,size:0},a=this.getItemStyle({datumIndex:H,datum:j,colorValue:o},!1);if(E.push({series:this,itemId:v,datumIndex:H,yKey:v,xKey:m,xValue:e,yValue:t,colorValue:o,datum:j,point:r,width:O,height:F,midPoint:{x:i,y:n},missing:null!=I&&null==o,style:a}),null!=(null===s||void 0===s?void 0:s.label)){const{text:e,fontSize:t,lineHeight:i,height:n}=s.label,{fontStyle:o,fontFamily:l,fontWeight:d,color:c}=this.properties.label,u=r.x+z*(O-2*w),h=r.y+B*(F-2*w)-.5*(s.height-n);P.push({series:this,itemId:v,datum:j,datumIndex:H,text:e,fontSize:t,lineHeight:i,fontStyle:o,fontFamily:l,fontWeight:d,color:c,textAlign:C,textBaseline:S,x:u,y:h,style:a})}}return{itemId:null!==(r=this.properties.yKey)&&void 0!==r?r:this.id,nodeData:E,labelData:P,scales:this.calculateScaling(),visible:this.visible}}nodeFactory(){return new pZ}update(e){return this.ctx.animationManager.skipCurrentBatch(),super.update(e)}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,n=null!==t&&void 0!==t?t:[];return i.update(n)}getItemStyle(e,t,i){let{datumIndex:n,datum:o,colorValue:s}=e;const{properties:r}=this,{itemStyler:a,stroke:l,strokeWidth:d,strokeOpacity:c}=r,u=xu(this.getHighlightStyle(t,n,i),{fill:this.isColorScaleValid()&&null!=s?this.colorScale.convert(s):"transparent",fillOpacity:1,stroke:l,strokeWidth:d,strokeOpacity:c,opacity:1});let h;return null!=a&&null!=n&&(h=this.cachedDatumCallback(uZ(n,t?"highlight":"node"),()=>{const e=this.makeItemStylerParams(o,n,t,u);return this.callWithContext(a,e)})),h?xu(h,u):u}makeItemStylerParams(e,t,i,n){var o,s;const{id:r,properties:a}=this,{xKey:l,yKey:d}=a,c=null===(o=this.ctx.highlightManager)||void 0===o?void 0:o.getActiveHighlight(),u=this.getHighlightStateString(c,i,t),h=null!==(s=this.filterItemStylerFillParams(n.fill))&&void 0!==s?s:n.fill;return p(p({seriesId:r,datum:e,xKey:l,yKey:d,highlightState:u},n),{},{fill:h})}updateDatumStyles(e){var t;let{datumSelection:i,isHighlight:n}=e;const o=null===(t=this.ctx.highlightManager)||void 0===t?void 0:t.getActiveHighlight();i.each((e,t)=>{const i=this.getHighlightState(o,n,t.datumIndex);t.style=this.getItemStyle(t,n,i)})}updateDatumNodes(e){var t;let{datumSelection:i}=e;const n=this.axes[_u.X],[o,s]=null!==(t=null===n||void 0===n?void 0:n.visibleRange)&&void 0!==t?t:[],r=!(0!==o||1!==s);i.each((e,t)=>{const{point:i,width:n,height:o,style:s}=t;e.setStyleProperties(s),e.crisp=r,e.x=Math.floor(i.x-n/2),e.y=Math.floor(i.y-o/2),e.width=Math.ceil(n),e.height=Math.ceil(o)})}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e,{enabled:n}=this.properties.label,o=n?t:[];return i.update(o)}updateLabelNodes(e){var t;const{isHighlight:i=!1}=e,n=null===(t=this.ctx.highlightManager)||void 0===t?void 0:t.getActiveHighlight();e.labelSelection.each((e,t)=>{var o,s;e.pointerEvents=gZ.None,e.text=t.text,e.fillOpacity=null!==(o=null===(s=this.getHighlightStyle(i,t.datumIndex))||void 0===s?void 0:s.opacity)&&void 0!==o?o:1,vZ(this,e,this.properties,this.properties.label,t,i,n)})}getTooltipContent(e){var t;const{id:i,dataModel:n,processedData:o,axes:s,properties:r,colorScale:a,ctx:l}=this,{formatManager:d}=l,{xKey:c,xName:u,yKey:h,yName:g,colorKey:m,colorName:f,colorRange:v,title:y,legendItemName:b,tooltip:x}=r,C=s[_u.X],S=s[_u.Y];if(!n||!o||!C||!S)return;const w=null===(t=o.dataSources.get(this.id))||void 0===t?void 0:t.data[e],M=n.resolveColumnById(this,"xValue",o)[e],k=n.resolveColumnById(this,"yValue",o)[e],D=null!=m&&this.isColorScaleValid()?n.resolveColumnById(this,"colorValue",o)[e]:void 0;if(null==M)return;const I=[];let A;if(null==D)A=v[0];else{A=a.convert(D);const e=n.getDomain(this,"colorValue","value",o).domain,t=d.format(this.callWithContext.bind(this),{type:"number",value:D,datum:w,seriesId:i,legendItemName:b,key:m,source:"tooltip",property:"color",domain:e,boundSeries:this.getFormatterContext("color"),fractionDigits:void 0});I.push({label:f,fallbackLabel:m,value:null!==t&&void 0!==t?t:Fg(D)})}I.push({label:u,fallbackLabel:c,value:this.getAxisValueText(C,"tooltip",M,w,c,b)},{label:g,fallbackLabel:h,value:this.getAxisValueText(S,"tooltip",k,w,h,b)});const L=this.getItemStyle({datumIndex:e,datum:w,colorValue:D},!1);null!=L.fill&&(A=L.fill);const N=null==A?void 0:{marker:{shape:"square",fill:A,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0}};return this.formatTooltipWithContext(x,{title:null!==y&&void 0!==y?y:b,symbol:N,data:I},p({seriesId:i,datum:w,title:y,xKey:c,xName:u,yKey:h,yName:g,colorKey:m,colorName:f},L))}getLegendData(e){return"gradient"===e&&this.isColorScaleValid()&&this.dataModel?[{legendType:"gradient",enabled:this.visible,seriesId:this.id,series:this.getFormatterContext("color"),colorDomain:this.colorScale.domain,colorRange:this.colorScale.range}]:[]}isLabelEnabled(){return this.properties.label.enabled&&Boolean(this.properties.colorKey)}getBandScalePadding(){return{inner:0,outer:0}}computeFocusBounds(e){var t;let{datumIndex:i}=e;const n=null===(t=this.contextNodeData)||void 0===t?void 0:t.nodeData[i];if(void 0===n)return;const{width:o,height:s,midPoint:r}=n,a={x:r.x-o/2,y:r.y-s/2,width:o,height:s};return rZ(this,a)}initQuadTree(e){mZ(e,this.datumNodesIter())}pickNodesExactShape(e){const t=fZ(this,e);return null!=t&&t.distance<=0?[t.datum]:[]}pickNodeClosestDatum(e){return fZ(this,e)}hasItemStylers(){return null!=this.properties.itemStyler||null!=this.properties.label.itemStyler||this.isColorScaleValid()}};CZ.className="HeatmapSeries",CZ.type="heatmap";var{heatmapSeriesThemeableOptionsDef:SZ}=uE,wZ=p(p(p({},Mu(SZ,["showInLegend"])),Mu(Yc,["showInLegend"])),{},{type:pd(jd("heatmap")),xKey:pd(Ad),yKey:pd(Ad),xKeyAxis:Ad,yKeyAxis:Ad,colorKey:Ad,xName:Ad,yName:Ad,colorName:Ad,colorRange:_d(wd)}),MZ={series:{stroke:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$ref:"chartBackgroundColor"},{$path:["/0",{$palette:"stroke"},{$palette:"strokes"}]}]},strokeWidth:{$isUserOption:["./stroke",2,void 0]},label:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!1,color:{$ref:"textColor"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},wrapping:"on-space",overflowStrategy:"ellipsis"}),itemPadding:3,highlight:{unhighlightedItem:{opacity:.6}}},gradientLegend:{enabled:!0}};MZ.series.colorRange={$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"divergingColors"},uE.SAFE_RANGE2_OPERATION]};var kZ={type:"series",name:"heatmap",chartType:"cartesian",enterprise:!0,version:GC,dependencies:[uz],options:wZ,defaultAxes:{y:{type:zh.CATEGORY,position:Fh.LEFT},x:{type:zh.CATEGORY,position:Fh.BOTTOM}},axisKeys:{[_u.X]:"xKeyAxis",[_u.Y]:"yKeyAxis"},themeTemplate:MZ,create:e=>new CZ(e)},DZ=class extends S${constructor(){super(...arguments),this.properties=new T$}nodeFactory(){const e=new t$;return e.lineCap="square",e}updateDatumStyles(e){let{datumSelection:t,isHighlight:i}=e;t.each((e,t)=>{t.style=this.getItemStyle(t.datumIndex,i,void 0,t.itemType)})}updateDatumNodes(e){let{datumSelection:t,isHighlight:i}=e;const{contextNodeData:n,properties:o}=this;if(!n)return;const s=this.ctx.highlightManager.getActiveHighlight(),{up:r,down:a}=o.item,l=this;t.each(function(e,t){var o;const{centerX:d,width:c,y:u,height:h,yOpen:p,yClose:g,crisp:m}=t,f=t.isRising?r:a;e.setStaticProperties(d,c,u,h,p,g,m);const v=null!==(o=t.style)&&void 0!==o?o:n.styles[t.itemType][l.getHighlightState(s,i,t.datumIndex)];e.setStyleProperties(v),e.strokeAlignment=f.strokeWidth})}getLegendData(e){var t;const{id:i,data:n,ctx:{legendManager:o},visible:s}=this,{xKey:r,yName:a,item:{up:l,down:d},showInLegend:c,legendItemName:u}=this.properties;if(null===n||void 0===n||!n.data.length||!r||"category"!==e)return[];const h={type:"gradient",gradient:"linear",colorSpace:"rgb",colorStops:[{color:l.stroke,stop:0},{color:l.stroke,stop:.5},{color:d.stroke,stop:.5}],rotation:90};return[{legendType:"category",id:i,itemId:i,seriesId:i,enabled:s&&o.getItemEnabled({seriesId:i,itemId:i}),label:{text:null!==(t=null!==u&&void 0!==u?u:a)&&void 0!==t?t:i},symbol:{marker:{fill:h,fillOpacity:l.strokeOpacity,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0}},legendItemName:u,hideInLegend:!c}]}hasItemStylers(){return null!=this.properties.itemStyler}};DZ.className="ohlc",DZ.type="ohlc";var{ohlcSeriesThemeableOptionsDef:IZ}=uE,AZ=p(p(p({},Yc),IZ),{},{type:pd(jd("ohlc")),xKey:pd(Ad),openKey:pd(Ad),highKey:pd(Ad),lowKey:pd(Ad),closeKey:pd(Ad),xKeyAxis:Ad,yKeyAxis:Ad,xName:Ad,yName:Ad,openName:Ad,highName:Ad,lowName:Ad,closeName:Ad});AZ.pickOutsideVisibleMinorAxis=gd(Cd),AZ.focusPriority=gd(Dd);var{multiSeriesHighlightStyle:LZ,predictCartesianFinancialAxis:NZ}=uE,TZ={animation:{enabled:!1},series:{item:{up:{stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:"up.stroke"}]}},down:{stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:"down.stroke"}]}}},tooltip:{range:{$path:["/tooltip/range","nearest"]}},highlight:LZ()},axes:{[zh.NUMBER]:{crosshair:{snap:!1}},[zh.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},RZ={type:"series",name:"ohlc",chartType:"cartesian",enterprise:!0,version:GC,dependencies:[uz],options:AZ,predictAxis:NZ,defaultAxes:{y:{type:zh.NUMBER,position:Fh.LEFT},x:{type:zh.ORDINAL_TIME,position:Fh.BOTTOM}},axisKeys:{[_u.X]:"xKeyAxis",[_u.Y]:"yKeyAxis"},themeTemplate:TZ,create:e=>new DZ(e)};var EZ=Im(function(e,t,i,n,o,s,r,a){const[l,d]=ph(e,o);return wh([l,d],t,i,n,{smallestKeyInterval:s,xNeedsValueOf:r,yNeedsValueOf:a})});function PZ(e,t){let{span:i}=e;switch(i.type){case"linear":case"step":case"multi-line":{const e=(t-i.x0)/(i.x1-i.x0);return i.y0+e*(i.y1-i.y0)}case"cubic":{const{cp0x:e,cp0y:n,cp1x:o,cp1y:s,cp2x:r,cp2y:a,cp3x:l,cp3y:d}=i;let c=.5;const u=1e-6;for(let i=0;i<10;i++){const i=1-c,n=i*i*i*e+3*i*i*c*o+3*i*c*c*r+c*c*c*l-t;if(Math.abs(n)<u)break;const s=3*i*i*(o-e)+6*i*c*(r-o)+3*c*c*(l-r);if(Math.abs(s)<1e-12)break;c-=n/s,c=Math.max(0,Math.min(1,c))}const h=1-c;return h*h*h*n+3*h*h*c*s+3*h*c*c*a+c*c*c*d}}}function OZ(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(let n=i;n<e.length;n++){const i=e[n],[o,s]=yy(i.span);if(t>=o.x&&t<=s.x)return{span:i,index:n};if(t<o.x)break}return{span:null,index:i}}function FZ(e,t,i,n,o){const s=OZ(e,i,o),r=OZ(t,i,o);if(!s.span||!r.span)return{intersection:null,spanIndex:s.index,isInverted:n};const a=PZ(s.span,i),l=a>PZ(r.span,i);return{intersection:n===l?null:{x:i,y:a},spanIndex:s.index,isInverted:l}}var{CartesianSeriesProperties:zZ,SeriesMarker:BZ,makeSeriesTooltip:VZ,DropShadow:GZ,Label:HZ}=uE,jZ=class extends HZ{constructor(){super(...arguments),this.placement="outside",this.spacing=0}};kV([ru],jZ.prototype,"placement",2),kV([ru],jZ.prototype,"spacing",2);var WZ=class{constructor(){this.enabled=!1,this.fillOpacity=1}};kV([ru],WZ.prototype,"enabled",2),kV([ru],WZ.prototype,"fill",2),kV([ru],WZ.prototype,"fillOpacity",2);var _Z=class extends kh{constructor(){super(...arguments),this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.marker=new BZ}};kV([ru],_Z.prototype,"stroke",2),kV([ru],_Z.prototype,"strokeWidth",2),kV([ru],_Z.prototype,"strokeOpacity",2),kV([ru],_Z.prototype,"lineDash",2),kV([ru],_Z.prototype,"lineDashOffset",2),kV([ru],_Z.prototype,"marker",2);var KZ=class extends kh{constructor(){super(...arguments),this.low=new _Z,this.high=new _Z}};kV([ru],KZ.prototype,"low",2),kV([ru],KZ.prototype,"high",2);var UZ=class extends kh{};kV([ru],UZ.prototype,"enabled",2),kV([ru],UZ.prototype,"shape",2),kV([ru],UZ.prototype,"size",2),kV([ru],UZ.prototype,"fill",2),kV([ru],UZ.prototype,"fillOpacity",2),kV([ru],UZ.prototype,"stroke",2),kV([ru],UZ.prototype,"strokeWidth",2),kV([ru],UZ.prototype,"strokeOpacity",2),kV([ru],UZ.prototype,"lineDash",2),kV([ru],UZ.prototype,"lineDashOffset",2),kV([ru],UZ.prototype,"itemStyler",2);var YZ=class extends zZ{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new Ah,this.item=new KZ,this.invertedStyle=new WZ,this.shadow=(new GZ).set({enabled:!1}),this.marker=new UZ,this.label=new jZ,this.tooltip=VZ(),this.connectMissingData=!1}};kV([ru],YZ.prototype,"xKey",2),kV([ru],YZ.prototype,"yLowKey",2),kV([ru],YZ.prototype,"yHighKey",2),kV([ru],YZ.prototype,"xName",2),kV([ru],YZ.prototype,"yName",2),kV([ru],YZ.prototype,"yLowName",2),kV([ru],YZ.prototype,"yHighName",2),kV([ru],YZ.prototype,"fill",2),kV([ru],YZ.prototype,"fillOpacity",2),kV([ru],YZ.prototype,"stroke",2),kV([ru],YZ.prototype,"strokeWidth",2),kV([ru],YZ.prototype,"strokeOpacity",2),kV([ru],YZ.prototype,"lineDash",2),kV([ru],YZ.prototype,"lineDashOffset",2),kV([ru],YZ.prototype,"interpolation",2),kV([ru],YZ.prototype,"styler",2),kV([ru],YZ.prototype,"item",2),kV([ru],YZ.prototype,"invertedStyle",2),kV([ru],YZ.prototype,"shadow",2),kV([ru],YZ.prototype,"marker",2),kV([ru],YZ.prototype,"label",2),kV([ru],YZ.prototype,"tooltip",2),kV([ru],YZ.prototype,"connectMissingData",2);var{CollapseMode:$Z,pairUpSpans:ZZ,prepareAreaFillAnimationFns:XZ,plotInterpolatedLinePathStroke:qZ,prepareLinePathPropertyAnimation:QZ}=uE;function JZ(e,t,i){var n,o,s;if("category"===(null===(n=e.scales.x)||void 0===n?void 0:n.type)!==("category"===(null===(o=t.scales.x)||void 0===o?void 0:o.type))||!vy(e.scales.x)||!vy(t.scales.x))return;let r="updated";t.visible&&!e.visible?r="removed":!t.visible&&e.visible&&(r="added");const a=ZZ({scales:e.scales,data:e.fillData.spans},{scales:t.scales,data:t.fillData.spans},$Z.Split);if(null==a)return;const l=ZZ({scales:e.scales,data:e.fillData.phantomSpans},{scales:t.scales,data:t.fillData.phantomSpans},$Z.Split);if(null==l)return;const d=ZZ({scales:e.scales,data:e.highStrokeData.spans},{scales:t.scales,data:t.highStrokeData.spans},$Z.Split);if(null==d)return;const c=ZZ({scales:e.scales,data:e.lowStrokeData.spans},{scales:t.scales,data:t.lowStrokeData.spans},$Z.Split);if(null==c)return;const u="fade",h=XZ(r,a,l,u),p=function(e,t,i,n){return{status:e,path:{addPhaseFn:(e,n)=>{qZ(e,n,t.added),qZ(e,n,i.added)},updatePhaseFn:(e,n)=>{qZ(e,n,t.moved),qZ(e,n,i.moved)},removePhaseFn:(e,n)=>{qZ(e,n,t.removed),qZ(e,n,i.removed)}},pathProperties:QZ(e,n)}}(r,d,c,u);return{status:r,fill:h,stroke:p,hasMotion:null===(s=null===i||void 0===i?void 0:i.changed)||void 0===s||s||!fy(e.scales.x,t.scales.x)||!fy(e.scales.y,t.scales.y)||"updated"!==r}}var eX=th,tX=eh,iX=ih,{valueProperty:nX,keyProperty:oX,updateLabelNode:sX,fixNumericExtent:rX,buildResetPathFn:aX,resetLabelFn:lX,resetMarkerFn:dX,resetMarkerPositionFn:cX,pathSwipeInAnimation:uX,resetMotion:hX,markerSwipeScaleInAnimation:pX,seriesLabelFadeInAnimation:gX,animationValidation:mX,diff:fX,updateClipPath:vX,computeMarkerFocusBounds:yX,plotAreaPathFill:bX,plotLinePathStroke:xX,interpolatePoints:CX,pathFadeInAnimation:SX,markerFadeInAnimation:wX,fromToMotion:MX,pathMotion:kX,PointerEvents:DX,Marker:IX,BBox:AX,processedDataIsAnimatable:LX,markerEnabled:NX,getMarkerStyles:TX,calculateSegments:RX,toHighlightString:EX,HighlightState:PX,AggregationManager:OX,resetMarkerSelectionsDirect:FX,createDatumId:zX,visibleRangeIndices:BX}=uE,VX=class extends uE.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.xKey=n.properties.xKey,this.yLowKey=n.properties.yLowKey,this.yHighKey=n.properties.yHighKey}},GX=uE.CartesianSeries,HX=class extends GX{constructor(e){super({moduleCtx:e,pathsPerSeries:["fill","lowStroke","highStroke"],pickModes:[uE.SeriesNodePickMode.AXIS_ALIGNED],propertyKeys:{[_u.X]:["xKey"],[_u.Y]:["yLowKey","yHighKey"]},propertyNames:{[_u.X]:["xName"],[_u.Y]:["yLowName","yHighName","yName"]},categoryKey:"xValue",animationResetFns:{path:aX({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:lX,datum:(e,t)=>p(p({},dX(e)),cX(e,t))},clipFocusBox:!1}),this.properties=new YZ,this.NodeEvent=VX,this.aggregationManager=new OX}async processData(e){var t,i;const{xKey:n,yLowKey:o,yHighKey:s}=this.properties,r=null===(t=this.axes[_u.X])||void 0===t?void 0:t.scale,a=null===(i=this.axes[_u.Y])||void 0===i?void 0:i.scale,{xScaleType:l,yScaleType:d}=this.getScaleInformation({xScale:r,yScale:a}),c=[],u=!this.ctx.animationManager.isSkipped();this.needsDataModelDiff()&&this.processedData&&c.push(fX(this.id,this.processedData)),u&&c.push(mX());const{dataModel:h,processedData:p}=await this.requestDataModel(e,this.data,{props:[oX(n,l,{id:"xValue"}),nX(o,d,{id:"yLowValue"}),nX(s,d,{id:"yHighValue"}),...c]});this.aggregateData(h,p),this.animationState.transition("updateData")}aggregateData(e,t){if(this.aggregationManager.markStale(),"ungrouped"!==t.type)return;if(LX(t))return;const i=this.axes[_u.X];if(null==i)return;const n=this.estimateTargetRange();this.aggregationManager.aggregate({computePartial:o=>function(e,t,i,n,o,s){var r,a;const l=t.resolveKeysById(n,"xValue",i),d=t.resolveColumnById(n,"yHighValue",i),c=t.resolveColumnById(n,"yLowValue",i),u=t.getDomain(n,"xValue","key",i),h=t.resolveColumnNeedsValueOf(n,"xValue",i),p=null!==(r=t.resolveColumnNeedsValueOf(n,"yHighValue",i))&&void 0!==r?r:t.resolveColumnNeedsValueOf(n,"yLowValue",i),[g,m]=ph(e,u);return Mh([g,m],l,d,c,{smallestKeyInterval:null===(a=i.reduced)||void 0===a?void 0:a.smallestKeyInterval,targetRange:o,xNeedsValueOf:h,yNeedsValueOf:p,existingFilters:s})}(i.scale.type,e,t,this,n,o),computeFull:n=>function(e,t,i,n,o){var s,r;const a=t.resolveKeysById(n,"xValue",i),l=t.resolveColumnById(n,"yHighValue",i),d=t.resolveColumnById(n,"yLowValue",i),c=t.getDomain(n,"xValue","key",i),u=t.resolveColumnNeedsValueOf(n,"xValue",i),h=null!==(s=t.resolveColumnNeedsValueOf(n,"yHighValue",i))&&void 0!==s?s:t.resolveColumnNeedsValueOf(n,"yLowValue",i);if(o){var p;const[t,n]=ph(e,c);return wh([t,n],a,l,d,{smallestKeyInterval:null===(p=i.reduced)||void 0===p?void 0:p.smallestKeyInterval,xNeedsValueOf:u,yNeedsValueOf:h,existingFilters:o})}return EZ(e,a,l,d,c,null===(r=i.reduced)||void 0===r?void 0:r.smallestKeyInterval,u,h)}(i.scale.type,e,t,this,n),targetRange:n});const o=this.aggregationManager.filters;o&&o.length>0&&sa.record("".concat(this.type,":aggregation"),o.map(e=>e.maxRange))}estimateTargetRange(){var e,t,i;const n=this.axes[_u.X];if(null!==n&&void 0!==n&&null!==(e=n.scale)&&void 0!==e&&e.range){const[e,t]=n.scale.range;return Math.abs(t-e)}return null!==(t=null===(i=this.ctx.scene)||void 0===i||null===(i=i.canvas)||void 0===i?void 0:i.width)&&void 0!==t?t:800}createNodeDatumContext(e,t,i){var n,o,s,r;const{dataModel:a,processedData:l}=this;if(!a||!l)return;const d=null!==(n=null===(o=l.dataSources.get(this.id))||void 0===o?void 0:o.data)&&void 0!==n?n:[],[c,u]=e.range,h=Math.abs(u-c);this.aggregationManager.ensureLevelForRange(h);const p=this.aggregationManager.getFilterForRange(h),g=null===(s=this.contextNodeData)||void 0===s?void 0:s.nodeData,m=null!=g&&(null!=l.changeDescription||!LX(l)||null!=p);return{rawData:d,xValues:a.resolveKeysById(this,"xValue",l),yHighValues:a.resolveColumnById(this,"yHighValue",l),yLowValues:a.resolveColumnById(this,"yLowValue",l),xScale:e,yScale:t,xAxisRange:i,xOffset:(null!==(r=e.bandwidth)&&void 0!==r?r:0)/2,dataAggregationFilter:p,range:h,labelsEnabled:this.properties.label.enabled,canIncrementallyUpdate:m,xKey:this.properties.xKey,yLowKey:this.properties.yLowKey,yHighKey:this.properties.yHighKey,item:this.properties.item,yDomain:this.getSeriesDomain(_u.Y).domain,connectMissingData:this.properties.connectMissingData,interpolation:this.properties.interpolation,markerData:m?g:[],labelData:[],spanPoints:[],nodeIndex:0}}xCoordinateRange(e){const t=this.axes[_u.X].scale.convert(e);return[t,t]}yCoordinateRange(e){const t=this.axes[_u.Y].scale.convert(e[0]);return[t,t]}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!t||!i)return{domain:[]};const{domain:{keys:[n]}}=t;if(e===_u.X){const e=i.resolveProcessedDataDefById(this,"xValue");if("key"===(null===e||void 0===e?void 0:e.def.type)&&"category"===e.def.valueType){return{domain:n,sortMetadata:i.getKeySortMetadata(this,"xValue",t)}}return{domain:rX(Rg(n))}}{const e=$u(this.domainForClippedRange(_u.Y,["yHighValue","yLowValue"],"xValue"));return{domain:rX(e)}}}getSeriesRange(e,t){return this.domainForVisibleRange(_u.Y,["yHighValue","yLowValue"],"xValue",t)}handleDatumPoint(e,t,i,n,o){if(t.xValue=e.xValues[i],null==t.xValue)return;t.datum=e.rawData[i],t.yHighValue=null!==n&&void 0!==n?n:e.yHighValues[i],t.yLowValue=null!==o&&void 0!==o?o:e.yLowValues[i];const s=e.spanPoints.at(-1);if(Number.isFinite(t.yHighValue)&&Number.isFinite(t.yLowValue)){t.inverted=t.yLowValue>t.yHighValue,t.x=e.xScale.convert(t.xValue)+e.xOffset,t.yHighCoordinate=e.yScale.convert(t.yHighValue),t.yLowCoordinate=e.yScale.convert(t.yLowValue),this.upsertMarkerDatum(e,t,i,"high",t.yHighValue,t.yHighCoordinate),this.upsertMarkerDatum(e,t,i,"low",t.yLowValue,t.yLowCoordinate);const n={high:{point:{x:t.x,y:t.yHighCoordinate},xDatum:t.xValue,yDatum:t.yHighValue},low:{point:{x:t.x,y:t.yLowCoordinate},xDatum:t.xValue,yDatum:t.yLowValue}};Array.isArray(s)?s.push(n):(null==s||(s.skip+=1),e.spanPoints.push([n]))}else e.connectMissingData||(Array.isArray(s)||null==s?e.spanPoints.push({skip:0}):s.skip+=1)}upsertMarkerDatum(e,t,i,n,o,s){const{size:r}=e.item[n].marker;if(e.canIncrementallyUpdate&&e.nodeIndex<e.markerData.length){const o=e.markerData[e.nodeIndex];o.index=i,o.itemType=n,o.datum=t.datum,o.datumIndex=i,o.midPoint={x:t.x,y:s},o.yHighValue=t.yHighValue,o.yLowValue=t.yLowValue,o.xValue=t.xValue,o.point={x:t.x,y:s,size:r}}else e.markerData.push({index:i,series:this,itemType:n,datum:t.datum,datumIndex:i,midPoint:{x:t.x,y:s},yHighValue:t.yHighValue,yLowValue:t.yLowValue,xValue:t.xValue,xKey:e.xKey,yLowKey:e.yLowKey,yHighKey:e.yHighKey,point:{x:t.x,y:s,size:r},enabled:!0});if(e.nodeIndex++,e.labelsEnabled){const r=this.createLabelData({datumIndex:i,point:{x:t.x,y:s},value:o,yLowValue:t.yLowValue,yHighValue:t.yHighValue,itemType:n,inverted:t.inverted,datum:t.datum,series:this});e.labelData.push(r)}}createNodeData(){var e;const{data:t,processedData:i,axes:n}=this,o=n[_u.X],s=n[_u.Y];if(!(t&&o&&s&&i&&null!==(e=this.chart)&&void 0!==e&&e.seriesRect))return;const r=this.createNodeDatumContext(o.scale,s.scale,o.range);if(!r)return;const a={datum:void 0,xValue:void 0,yHighValue:0,yLowValue:0,x:0,yHighCoordinate:0,yLowCoordinate:0,inverted:!1},l=e=>r.xScale.convert(r.xValues[e])+r.xOffset;if(i.input.count<1e3||null==r.dataAggregationFilter){let[e,t]=BX(1,r.xValues.length,r.xAxisRange,e=>{const t=l(e);return[t,t]});i.input.count<1e3&&(e=0,t=i.input.count),e=Math.max(e-1,0),t=Math.min(t+1,r.xValues.length);for(let i=e;i<t;i+=1)this.handleDatumPoint(r,a,i)}else{const{maxRange:e,indexData:t,midpointIndices:i}=r.dataAggregationFilter,[n,o]=BX(1,e,r.xAxisRange,e=>{const t=i[e];if(t!==rh)return[l(t),l(t)]});for(let s=n;s<o;s+=1){if(i[s]===rh)continue;const e=s*iX,n=t[e+eX],o=t[e+tX];this.handleDatumPoint(r,a,n,r.yHighValues[n],r.yLowValues[o])}}r.canIncrementallyUpdate&&r.nodeIndex<r.markerData.length&&(r.markerData.length=r.nodeIndex);const d=r.spanPoints.flatMap(e=>{if(!Array.isArray(e))return[];const t=e.map(e=>e.high);return CX(t,r.interpolation)}),c=r.spanPoints.flatMap(e=>{if(!Array.isArray(e))return[];const t=e.map(e=>e.low);return CX(t,r.interpolation)}),u=RX(this.properties.segmentation,o,s,this.chart.seriesRect,this.ctx.scene,!1);let h;if(this.properties.invertedStyle.enabled){const e=r.yHighValues[0]<r.yLowValues[0],t=function(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(0===e.length||0===t.length)return[];const s=[];let r=o,a=0;for(let l=i;l<=n;l+=.5){const i=FZ(e,t,l,r,a);i.intersection&&s.push(i.intersection.x),a=i.spanIndex,r=i.isInverted}return s}(d,c,r.xScale.range[0],r.xScale.range[1],e);h=function(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=Math.max(t.x,i.width-(t.x+t.width)),r=Math.max(t.y,i.height-(t.y+t.height)),a=[],l=(e,i)=>({x0:e,y0:-r,x1:i,y1:t.height+r});var d;n&&a.push(p({clipRect:l(-s,null!==(d=e[0])&&void 0!==d?d:t.width+s)},o));for(let u=n?1:0;u<e.length;u+=2){var c;a.push(p({clipRect:l(e[u],null!==(c=e[u+1])&&void 0!==c?c:t.width+s)},o))}return a}(t,this.chart.seriesRect,this.ctx.scene,e,this.properties.invertedStyle)}const{fill:g,fillOpacity:m,item:f}=this.properties,v=e=>{const t=f[e],{stroke:i,strokeWidth:n,strokeOpacity:o}=t,s={fill:g,fillOpacity:m,stroke:i,strokeWidth:n,strokeOpacity:o};return TX(this,t,t.marker,s)};return{itemId:"".concat(r.yLowKey,"-").concat(r.yHighKey),labelData:r.labelData,nodeData:r.markerData,fillData:{itemType:"high",spans:d,phantomSpans:c},highStrokeData:{itemType:"high",spans:d},lowStrokeData:{itemType:"low",spans:c},scales:this.calculateScaling(),visible:this.visible,styles:{low:v("low"),high:v("high")},segments:u,intersectionSegments:h}}createLabelData(e){let{datumIndex:t,point:i,value:n,itemType:o,inverted:s,datum:r,series:a}=e;const{xKey:l,yLowKey:d,yHighKey:c,xName:u,yName:h,yLowName:p,yHighName:g,legendItemName:m,label:f}=this.properties,{placement:v}=f,y=f.spacing+("number"===typeof f.padding?f.padding:0);let b=o;s&&(b="low"===o?"high":"low");const x="outside"===v&&"high"===b||"inside"===v&&"low"===b?-1:1,C=this.getSeriesDomain(_u.Y).domain;return{x:i.x,y:i.y+y*x,series:a,itemType:o,datum:r,datumIndex:t,text:this.getLabelText(n,r,"high"===o?c:d,"y",C,f,{value:n,datum:r,itemType:o,xKey:l,yLowKey:d,yHighKey:c,xName:u,yLowName:p,yHighName:g,yName:h,legendItemName:m}),textAlign:"center",textBaseline:-1===x?"bottom":"top"}}isPathOrSelectionDirty(){const{low:e,high:t}=this.properties.item;return e.marker.isDirty()||t.marker.isDirty()}strokewidthChange(){const e=e=>{var t,i,n,o,s;const r=null!==(t=this.properties.item[e].strokeWidth)&&void 0!==t?t:0,a=null!==(i=null===(n=this.properties.highlight.highlightedSeries.item)||void 0===n||null===(n=n[e])||void 0===n?void 0:n.strokeWidth)&&void 0!==i?i:r,l=null!==(o=null===(s=this.properties.highlight.highlightedItem.item)||void 0===s||null===(s=s[e])||void 0===s?void 0:s.strokeWidth)&&void 0!==o?o:r;return r>l||a>l};return e("low")||e("high")}updatePathNodes(e){var t,i,n,o;const{visible:s}=e,[r,a,l]=e.paths,d=null===(t=this.contextNodeData)||void 0===t?void 0:t.segments,c=null===(i=this.ctx.highlightManager)||void 0===i?void 0:i.getActiveHighlight(),u=this.getHighlightState(c,!1),h=this.getHighlightStyle(),{item:p,fill:g,fillOpacity:m,opacity:f}=xu(h,this.getStyle(u));a.setProperties({datum:d,segments:d,fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:DX.None,stroke:p.low.stroke,strokeWidth:p.low.strokeWidth,strokeOpacity:p.low.strokeOpacity,lineDash:p.low.lineDash,lineDashOffset:p.low.lineDashOffset,opacity:f,visible:s}),l.setProperties({segments:d,fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:DX.None,stroke:p.high.stroke,strokeWidth:p.high.strokeWidth,strokeOpacity:p.high.strokeOpacity,lineDash:p.high.lineDash,lineDashOffset:p.high.lineDashOffset,opacity:f,visible:s});const v=this.getShapeFillBBox();r.setFillProperties(g,v),r.setStyleProperties({stroke:void 0,fill:g,fillOpacity:m,opacity:f},v);const y=null!==(n=null===(o=this.contextNodeData)||void 0===o?void 0:o.intersectionSegments)&&void 0!==n?n:d;r.setProperties({segments:y,pointerEvents:DX.None,lineJoin:"round",fillShadow:this.properties.shadow,opacity:f,visible:s}),r.datum=y,vX(this,r),vX(this,a),vX(this,l)}updatePaths(e){this.updateAreaPaths(e.paths,e.contextData)}updateAreaPaths(e,t){for(const i of e)i.visible=t.visible;if(t.visible)this.updateFillPath(e,t),this.updateStrokePath(e,t);else for(const i of e)i.path.clear(),i.markDirty("RangeArea")}updateFillPath(e,t){const[i]=e;i.path.clear(),bX(i,t.fillData),i.markDirty("RangeArea")}updateStrokePath(e,t){const[,i,n]=e;i.path.clear(),n.path.clear(),xX(i,t.lowStrokeData.spans),xX(n,t.highStrokeData.spans),i.markDirty("RangeArea"),n.markDirty("RangeArea")}resetDatumAnimation(e){FX([e.datumSelection])}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,{processedData:n,axes:o,properties:s}=this,r=s.styler?this.getStylerMarkerOptions().item:s.item,{low:a,high:l}=r,d=NX(n.input.count,o[_u.X].scale,{enabled:a.marker.enabled||l.marker.enabled});let c;if((s.item.low.marker.isDirty()||s.item.high.marker.isDirty())&&(i.clear(),i.cleanup()),d)if(a.marker.enabled&&l.marker.enabled)c=t;else{c=[];for(const e of t)r[e.itemType].marker.enabled&&c.push(e)}else c=[];return LX(this.processedData)?i.update(c,void 0,e=>zX(e.xValue,e.itemType)):i.update(c)}updateDatumStyles(e){let{datumSelection:t,isHighlight:i}=e;const n=this.ctx.highlightManager.getActiveHighlight();t.each((e,t)=>{const o=this.getHighlightState(n,i,t.datumIndex),s=this.getStyle(o),{fill:r,fillOpacity:a,item:l}=s,{stroke:d,strokeWidth:c,strokeOpacity:u}=l[t.itemType],{marker:h}=this.properties.item[t.itemType],p=this.makeItemStylerParams(t.itemType);t.style=this.getMarkerStyle(h,t,p,{isHighlight:i,highlightState:o,resolveMarkerSubPath:["item",t.itemType,"marker"]},s.item[t.itemType].marker,{fill:r,fillOpacity:a,stroke:d,strokeWidth:c,strokeOpacity:u})})}updateDatumNodes(e){const{contextNodeData:t}=this;if(!t)return;const{datumSelection:i,isHighlight:n}=e,o=this.getShapeFillBBox(),s=this.ctx.highlightManager.getActiveHighlight();i.each((e,i)=>{var r;const{itemType:a}=i,l=null!==(r=i.style)&&void 0!==r?r:t.styles[a][this.getHighlightState(s,n,i.datumIndex)];this.applyMarkerStyle(l,e,i.point,o)}),n||(this.properties.item.low.marker.markClean(),this.properties.item.high.marker.markClean())}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t,e=>{e.pointerEvents=DX.None})}updateLabelNodes(e){var t,i,n,o;const s={xKey:this.properties.xKey,xName:null!==(t=this.properties.xName)&&void 0!==t?t:this.properties.xKey,yName:this.properties.yName,yLowKey:this.properties.yLowKey,yLowName:null!==(i=this.properties.yLowName)&&void 0!==i?i:this.properties.yLowKey,yHighKey:this.properties.yHighKey,yHighName:null!==(n=this.properties.yHighName)&&void 0!==n?n:this.properties.yHighKey,legendItemName:this.properties.legendItemName},r=null===(o=this.ctx.highlightManager)||void 0===o?void 0:o.getActiveHighlight(),{isHighlight:a=!1,labelSelection:l}=e;l.each((e,t)=>{var i;e.fillOpacity=null!==(i=this.getHighlightStyle(a,t.datumIndex).opacity)&&void 0!==i?i:1,sX(this,e,s,this.properties.label,t,a,r)})}getHighlightLabelData(e,t){return null!==e&&void 0!==e&&e.length?e.filter(e=>e.datum===t.datum):[]}getHighlightData(e,t){const i=e.filter(e=>e.datum===t.datum).map(e=>p({},e));return i.length>0?i:void 0}getStyle(e){return this.getStylerCouple(e)[0]}getStylerMarkerOptions(){return this.getStylerCouple()[1]}getStylerCouple(e){var t,i;const{fill:n,fillOpacity:o,item:s,styler:r}=this.properties;let a={};if(r){var l,d;const t=this.makeStylerParams(e);a=null!==(l=this.ctx.optionsGraphService.resolvePartial(["series","".concat(this.declarationOrder)],null!==(d=this.cachedCallWithContext(r,t))&&void 0!==d?d:{},{pick:!1}))&&void 0!==l?l:{}}const c={item:{low:{marker:{enabled:!1}},high:{marker:{enabled:!1}}}},u=e=>{var t,i,o,r,l,d,u,h,p,g,m,f,v,y,b,x,C,S,w,M,k,D,I,A,L,N,T,R;const E=null===(t=a.item)||void 0===t?void 0:t[e],{lineDash:P,lineDashOffset:O,marker:F,stroke:z,strokeOpacity:B,strokeWidth:V}=s[e];return c.item[e].marker.enabled=null!==(i=null===E||void 0===E||null===(o=E.marker)||void 0===o?void 0:o.enabled)&&void 0!==i?i:F.enabled,{marker:{fill:null!==(r=null!==(l=null===E||void 0===E||null===(d=E.marker)||void 0===d?void 0:d.fill)&&void 0!==l?l:F.fill)&&void 0!==r?r:n,fillOpacity:null!==(u=null===E||void 0===E||null===(h=E.marker)||void 0===h?void 0:h.fillOpacity)&&void 0!==u?u:F.fillOpacity,shape:null!==(p=null===E||void 0===E||null===(g=E.marker)||void 0===g?void 0:g.shape)&&void 0!==p?p:F.shape,size:null!==(m=null===E||void 0===E||null===(f=E.marker)||void 0===f?void 0:f.size)&&void 0!==m?m:F.size,lineDash:null!==(v=null===E||void 0===E||null===(y=E.marker)||void 0===y?void 0:y.lineDash)&&void 0!==v?v:F.lineDash,lineDashOffset:null!==(b=null===E||void 0===E||null===(x=E.marker)||void 0===x?void 0:x.lineDashOffset)&&void 0!==b?b:F.lineDashOffset,stroke:null!==(C=null!==(S=null===E||void 0===E||null===(w=E.marker)||void 0===w?void 0:w.stroke)&&void 0!==S?S:F.stroke)&&void 0!==C?C:z,strokeOpacity:null!==(M=null===E||void 0===E||null===(k=E.marker)||void 0===k?void 0:k.strokeOpacity)&&void 0!==M?M:F.strokeOpacity,strokeWidth:null!==(D=null===E||void 0===E||null===(I=E.marker)||void 0===I?void 0:I.strokeWidth)&&void 0!==D?D:F.strokeWidth},lineDash:null!==(A=null===E||void 0===E?void 0:E.lineDash)&&void 0!==A?A:P,lineDashOffset:null!==(L=null===E||void 0===E?void 0:E.lineDashOffset)&&void 0!==L?L:O,stroke:null!==(N=null===E||void 0===E?void 0:E.stroke)&&void 0!==N?N:z,strokeOpacity:null!==(T=null===E||void 0===E?void 0:E.strokeOpacity)&&void 0!==T?T:B,strokeWidth:null!==(R=null===E||void 0===E?void 0:E.strokeWidth)&&void 0!==R?R:V}};return[{fill:null!==(t=a.fill)&&void 0!==t?t:n,fillOpacity:null!==(i=a.fillOpacity)&&void 0!==i?i:o,opacity:1,topLevel:{lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,marker:this.properties.marker,stroke:this.properties.stroke,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth},item:{low:u("low"),high:u("high")}},c]}makeStylerParams(e){const{id:t}=this,{fill:i,fillOpacity:n,item:o,xKey:s,yHighKey:r,yLowKey:a}=this.properties,l=EX(null!==e&&void 0!==e?e:PX.None),d=e=>{var t,n;const{lineDash:s,lineDashOffset:r,marker:a,stroke:l,strokeOpacity:d,strokeWidth:c}=o[e];return{marker:{fill:null!==(t=a.fill)&&void 0!==t?t:i,fillOpacity:a.fillOpacity,size:a.size,shape:a.shape,stroke:null!==(n=a.stroke)&&void 0!==n?n:l,strokeOpacity:a.strokeOpacity,strokeWidth:a.strokeWidth,lineDash:a.lineDash,lineDashOffset:a.lineDashOffset},lineDash:s,lineDashOffset:r,stroke:l,strokeOpacity:d,strokeWidth:c}};return{item:{low:d("low"),high:d("high")},fill:i,fillOpacity:n,highlightState:l,seriesId:t,xKey:s,yLowKey:a,yHighKey:r}}makeItemStylerParams(e){const{xKey:t,yLowKey:i,yHighKey:n}=this.properties;return{xKey:t,yLowKey:i,yHighKey:n,itemType:e}}getTooltipContent(e,t){var i,n;const o=null!==(i=null===t||void 0===t?void 0:t.itemType)&&void 0!==i?i:"high",{id:s,dataModel:r,processedData:a,axes:l,properties:d}=this,{xName:c,yName:u,yLowKey:h,yLowName:g,xKey:m,yHighKey:f,yHighName:v,tooltip:y,legendItemName:b}=d,x=l[_u.X],C=l[_u.Y];if(!r||!a||!x||!C)return;const S=null===(n=a.dataSources.get(this.id))||void 0===n?void 0:n.data[e],w=r.resolveKeysById(this,"xValue",a)[e],M=r.resolveColumnById(this,"yHighValue",a)[e],k=r.resolveColumnById(this,"yLowValue",a)[e];if(null==w)return;const D=this.getStyle(),I=this.makeItemStylerParams(o),A=this.getMarkerStyle(this.properties.item[o].marker,{datumIndex:e,datum:S},I,{isHighlight:!1,resolveMarkerSubPath:["item",o,"marker"]},D.item[o].marker),L="".concat(this.getAxisValueText(C,"tooltip",k,S,h,b)," - ").concat(this.getAxisValueText(C,"tooltip",M,S,f,b));return this.formatTooltipWithContext(y,{heading:this.getAxisValueText(x,"tooltip",w,S,m,b),symbol:this.legendItemSymbol(),data:[{label:u,fallbackLabel:"".concat(null!==g&&void 0!==g?g:h," - ").concat(null!==v&&void 0!==v?v:f),value:L,missing:uE.isTooltipValueMissing(M)&&uE.isTooltipValueMissing(k)}]},p({seriesId:s,datum:S,title:u,itemType:o,xName:c,yName:u,yLowKey:h,yLowName:g,xKey:m,yHighKey:f,yHighName:v,legendItemName:b},A))}legendItemSymbol(){var e,t;const{fill:i,topLevel:n}=this.getStyle(),{stroke:o,strokeWidth:s,strokeOpacity:r,lineDash:a,marker:l}=n;return{marker:{shape:l.shape,fill:null!==(e=l.fill)&&void 0!==e?e:i,stroke:null!==(t=l.stroke)&&void 0!==t?t:o,fillOpacity:l.fillOpacity,strokeOpacity:l.strokeOpacity,strokeWidth:l.strokeWidth,lineDash:l.lineDash,lineDashOffset:l.lineDashOffset},line:{enabled:!0,stroke:o,strokeOpacity:r,strokeWidth:s,lineDash:a}}}getLegendData(e){var t;if("category"!==e)return[];const{id:i,visible:n}=this,{yLowKey:o,yHighKey:s,yName:r,yLowName:a,yHighName:l,legendItemName:d,showInLegend:c}=this.properties,u=null!==(t=null!==d&&void 0!==d?d:r)&&void 0!==t?t:"".concat(null!==a&&void 0!==a?a:o," - ").concat(null!==l&&void 0!==l?l:s);return[{legendType:"category",id:i,itemId:"".concat(o,"-").concat(s),seriesId:i,enabled:n,label:{text:"".concat(u)},symbol:this.legendItemSymbol(),legendItemName:d,hideInLegend:!c}]}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new IX}animateEmptyUpdateReady(e){const{datumSelection:t,labelSelection:i,contextData:n,paths:o}=e,{animationManager:s}=this.ctx;this.updateAreaPaths(o,n),uX(this,s,...o),hX([t],cX),pX(this,s,t),gX(this,"labels",s,i,this.highlightLabelSelection)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateAreaPaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){var t;const{animationManager:i}=this.ctx,{datumSelection:n,labelSelection:o,contextData:s,paths:r,previousContextData:a}=e,[l,d,c]=r;if(null==l&&null==d&&null==c)return;this.resetDatumAnimation(e),this.resetLabelAnimation(e);const u=()=>{this.resetPathAnimation(e),this.updateAreaPaths(r,s)};if(null==s||null==a)return u(),wX(this,i,"added",n),SX(this,"fill_path_properties",i,"add",l),SX(this,"low_stroke_path_properties",i,"add",d),SX(this,"high_stroke_path_properties",i,"add",c),void gX(this,"labels",i,o,this.highlightLabelSelection);const h=JZ(s,a,null===(t=this.processedData)||void 0===t||null===(t=t.reduced)||void 0===t||null===(t=t.diff)||void 0===t?void 0:t[this.id]);if(void 0===h)return i.skipCurrentBatch(),void u();"no-op"!==h.status&&(MX(this.id,"fill_path_properties",i,[l],h.fill.pathProperties),MX(this.id,"low_stroke_path_properties",i,[d],h.stroke.pathProperties),MX(this.id,"high_stroke_path_properties",i,[c],h.stroke.pathProperties),"added"===h.status?this.updateAreaPaths(r,s):"removed"===h.status?this.updateAreaPaths(r,a):(kX(this.id,"fill_path_update",i,[l],h.fill.path),kX(this.id,"low_stroke_path_update",i,[d],h.stroke.path),kX(this.id,"high_stroke_path_update",i,[c],h.stroke.path)),h.hasMotion&&(wX(this,i,void 0,n),gX(this,"labels",i,o,this.highlightLabelSelection)),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(r,s)}))}getFormattedMarkerStyle(e){const t=this.getStyle(),i=this.makeItemStylerParams(e.itemType);return this.getMarkerStyle(this.properties.item[e.itemType].marker,e,i,{isHighlight:!0,resolveMarkerSubPath:["item",e.itemType,"marker"]},void 0,t)}getMarkerStyle(e,t,i,n,o,s){return e.itemStyler=this.properties.marker.itemStyler,super.getMarkerStyle(e,t,i,n,o,s)}computeFocusBounds(e){const t=yX(this,e),i=yX(this,p(p({},e),{},{datumIndex:e.datumIndex+1}));if(t&&i)return AX.merge([t,i])}isDatumEnabled(e,t){return t%2===0&&super.isDatumEnabled(e,t)}hasItemStylers(){return null!=this.properties.styler||null!=this.properties.marker.itemStyler||null!=this.properties.label.itemStyler}};HX.className="RangeAreaSeries",HX.type="range-area";var{rangeAreaSeriesThemeableOptionsDef:jX}=uE,WX=p(p(p({},Yc),jX),{},{type:pd(jd("range-area")),xKey:pd(Ad),yLowKey:pd(Ad),yHighKey:pd(Ad),xKeyAxis:Ad,yKeyAxis:Ad,xName:Ad,yName:Ad,yLowName:Ad,yHighName:Ad,legendItemName:Ad,segmentation:vc,invertedStyle:p({enabled:Cd},lc)});WX.pickOutsideVisibleMinorAxis=gd(Cd),WX.focusPriority=gd(Dd);var _X={lineDash:{$path:"/series/$index/lineDash"},lineDashOffset:{$path:"/series/$index/lineDashOffset"},stroke:{$path:["/series/$index/stroke",{$palette:"stroke"}]},strokeOpacity:{$path:"/series/$index/strokeOpacity"},strokeWidth:{$path:["/series/$index/strokeWidth",1]},marker:{enabled:{$path:"/series/$index/marker/enabled"},fill:{$isUserOption:["/series/$index/marker/fill",{$if:[{$or:[{$isGradient:{$path:"/series/$index/marker/fill"}},{$isImage:{$path:"/series/$index/marker/fill"}},{$isPattern:{$path:"/series/$index/marker/fill"}}]},{$merge:[{$path:"/series/$index/marker/fill"},{$applySwitch:[{$path:"type"},void 0,["gradient",uE.FILL_GRADIENT_RADIAL_REVERSED_DEFAULTS],["image",uE.FILL_IMAGE_DEFAULTS],["pattern",uE.FILL_PATTERN_DEFAULTS]]}]},{$isUserOption:["/series/$index/marker/fill",{$path:"/series/$index/marker/fill"},{$palette:"fill"}]}]},{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",uE.FILL_GRADIENT_RADIAL_REVERSED_DEFAULTS],["image",uE.FILL_IMAGE_DEFAULTS],["pattern",uE.FILL_PATTERN_DEFAULTS]]}]},fillOpacity:{$path:"/series/$index/marker/fillOpacity"},lineDash:{$path:"/series/$index/marker/lineDash"},lineDashOffset:{$path:"/series/$index/marker/lineDashOffset"},shape:{$path:"/series/$index/marker/shape"},size:{$path:["/series/$index/marker/size",6]},stroke:{$path:["/series/$index/marker/stroke",{$palette:"stroke"}]},strokeOpacity:{$path:"/series/$index/marker/strokeOpacity"},strokeWidth:{$path:["/series/$index/marker/strokeWidth",2]}}},KX={series:{fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",uE.FILL_GRADIENT_LINEAR_DEFAULTS],["pattern",uE.FILL_PATTERN_DEFAULTS]]},fillOpacity:.7,stroke:{$palette:"stroke"},strokeWidth:1,marker:{enabled:!1,fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",uE.FILL_GRADIENT_RADIAL_REVERSED_DEFAULTS],["image",uE.FILL_IMAGE_DEFAULTS],["pattern",uE.FILL_PATTERN_DEFAULTS]]},shape:"circle",stroke:{$palette:"stroke"},size:6,strokeWidth:2},nodeClickRange:"nearest",item:{low:_X,high:_X},label:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!1,placement:"outside",padding:{$isUserOption:["./spacing",0,10]},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}),interpolation:{type:"linear"},tooltip:{range:{$path:["/tooltip/range","nearest"]}},highlight:uE.markerSeriesHighlightStyle(),segmentation:uE.SEGMENTATION_DEFAULTS,invertedStyle:{enabled:!1,fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",uE.FILL_GRADIENT_LINEAR_DEFAULTS],["image",uE.FILL_IMAGE_DEFAULTS],["pattern",uE.FILL_PATTERN_DEFAULTS]]},fillOpacity:{$path:"../fillOpacity"}}},axes:{[zh.NUMBER]:{crosshair:{enabled:!0}}}},{predictCartesianNonPrimitiveAxis:UX}=uE,YX={type:"series",name:"range-area",chartType:"cartesian",enterprise:!0,version:GC,dependencies:[uz],options:WX,predictAxis:UX,defaultAxes:{y:{type:zh.NUMBER,position:Fh.LEFT},x:{type:zh.CATEGORY,position:Fh.BOTTOM}},axisKeys:{[_u.X]:"xKeyAxis",[_u.Y]:"yKeyAxis"},themeTemplate:KX,create:e=>new HX(e)};var $X=Im(function(e,t,i,n,o,s,r,a){const[l,d]=ph(e,o);return wh([l,d],t,i,n,{smallestKeyInterval:s,xNeedsValueOf:r,yNeedsValueOf:a})});var{AbstractBarSeriesProperties:ZX,makeSeriesTooltip:XX,DropShadow:qX,Label:QX}=uE,JX=class extends QX{constructor(){super(...arguments),this.placement="inside",this.spacing=0}};kV([ru],JX.prototype,"placement",2),kV([ru],JX.prototype,"spacing",2);var eq=class extends ZX{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=(new qX).set({enabled:!1}),this.label=new JX,this.tooltip=XX()}};kV([ru],eq.prototype,"xKey",2),kV([ru],eq.prototype,"yLowKey",2),kV([ru],eq.prototype,"yHighKey",2),kV([ru],eq.prototype,"xName",2),kV([ru],eq.prototype,"yName",2),kV([ru],eq.prototype,"yLowName",2),kV([ru],eq.prototype,"yHighName",2),kV([ru],eq.prototype,"fill",2),kV([ru],eq.prototype,"fillOpacity",2),kV([ru],eq.prototype,"stroke",2),kV([ru],eq.prototype,"strokeWidth",2),kV([ru],eq.prototype,"strokeOpacity",2),kV([ru],eq.prototype,"lineDash",2),kV([ru],eq.prototype,"lineDashOffset",2),kV([ru],eq.prototype,"cornerRadius",2),kV([ru],eq.prototype,"styler",2),kV([ru],eq.prototype,"itemStyler",2),kV([ru],eq.prototype,"shadow",2),kV([ru],eq.prototype,"label",2),kV([ru],eq.prototype,"tooltip",2);var{SeriesNodePickMode:tq,valueProperty:iq,keyProperty:nq,checkCrisp:oq,updateLabelNode:sq,SMALLEST_KEY_INTERVAL:rq,LARGEST_KEY_INTERVAL:aq,diff:lq,prepareBarAnimationFunctions:dq,midpointStartingBarPosition:cq,resetBarSelectionsFn:uq,resetBarSelectionsDirect:hq,fixNumericExtent:pq,seriesLabelFadeInAnimation:gq,resetLabelFn:mq,animationValidation:fq,computeBarFocusBounds:vq,visibleRangeIndices:yq,createDatumId:bq,ContinuousScale:xq,Rect:Cq,PointerEvents:Sq,motion:wq,processedDataIsAnimatable:Mq,getItemStyles:kq,calculateSegments:Dq,toHighlightString:Iq,HighlightState:Aq,AggregationManager:Lq}=uE,Nq=class extends uE.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.xKey=n.properties.xKey,this.yLowKey=n.properties.yLowKey,this.yHighKey=n.properties.yHighKey}},Tq=class extends uE.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[tq.AXIS_ALIGNED,tq.EXACT_SHAPE_MATCH],propertyKeys:{x:["xKey"],y:["yLowKey","yHighKey"]},propertyNames:{x:["xName"],y:["yLowName","yHighName","yName"]},categoryKey:"xValue",datumSelectionGarbageCollection:!1,animationResetFns:{datum:uq,label:mq}}),this.properties=new eq,this.aggregationManager=new Lq,this.NodeEvent=Nq}async processData(e){var t,i,n,o;const{xKey:s,yLowKey:r,yHighKey:a}=this.properties,l=null===(t=this.getCategoryAxis())||void 0===t?void 0:t.scale,d=null===(i=this.getValueAxis())||void 0===i?void 0:i.scale,{isContinuousX:c,xScaleType:u,yScaleType:h}=this.getScaleInformation({xScale:l,yScale:d}),g=[];this.needsDataModelDiff()&&this.processedData&&g.push(lq(this.id,this.processedData)),this.ctx.animationManager.isSkipped()||g.push(fq());const m=this.visible?{}:{forceValue:0},{dataModel:f,processedData:v}=await this.requestDataModel(e,this.data,{props:[nq(s,u,{id:"xValue"}),iq(r,h,p({id:"yLowValue",invalidValue:null},m)),iq(a,h,p({id:"yHighValue",invalidValue:null},m)),...c?[rq,aq]:[],...g],groupByKeys:!1});this.smallestDataInterval=null===(n=v.reduced)||void 0===n?void 0:n.smallestKeyInterval,this.largestDataInterval=null===(o=v.reduced)||void 0===o?void 0:o.largestKeyInterval,this.aggregateData(f,v),this.animationState.transition("updateData")}aggregateData(e,t){if(this.aggregationManager.markStale(),"ungrouped"!==t.type)return;if(Mq(t))return;const i=this.axes[_u.X];if(null==i)return;const n=this.estimateTargetRange();this.aggregationManager.aggregate({computePartial:o=>function(e,t,i,n,o,s){var r,a;const l=t.resolveKeysById(n,"xValue",i),d=t.resolveColumnById(n,"yHighValue",i),c=t.resolveColumnById(n,"yLowValue",i),u=t.getDomain(n,"xValue","key",i),h=t.resolveColumnNeedsValueOf(n,"xValue",i),p=null!==(r=t.resolveColumnNeedsValueOf(n,"yHighValue",i))&&void 0!==r?r:t.resolveColumnNeedsValueOf(n,"yLowValue",i),[g,m]=ph(e,u);return Mh([g,m],l,d,c,{smallestKeyInterval:null===(a=i.reduced)||void 0===a?void 0:a.smallestKeyInterval,targetRange:o,xNeedsValueOf:h,yNeedsValueOf:p,existingFilters:s})}(i.scale.type,e,t,this,n,o),computeFull:n=>function(e,t,i,n,o){var s,r;const a=t.resolveKeysById(n,"xValue",i),l=t.resolveColumnById(n,"yHighValue",i),d=t.resolveColumnById(n,"yLowValue",i),c=t.getDomain(n,"xValue","key",i),u=t.resolveColumnNeedsValueOf(n,"xValue",i),h=null!==(s=t.resolveColumnNeedsValueOf(n,"yHighValue",i))&&void 0!==s?s:t.resolveColumnNeedsValueOf(n,"yLowValue",i);if(o){var p;const[t,n]=ph(e,c);return wh([t,n],a,l,d,{smallestKeyInterval:null===(p=i.reduced)||void 0===p?void 0:p.smallestKeyInterval,xNeedsValueOf:u,yNeedsValueOf:h,existingFilters:o})}return $X(e,a,l,d,c,null===(r=i.reduced)||void 0===r?void 0:r.smallestKeyInterval,u,h)}(i.scale.type,e,t,this,n),targetRange:n});const o=this.aggregationManager.filters;o&&o.length>0&&sa.record("".concat(this.type,":aggregation"),o.map(e=>e.maxRange))}estimateTargetRange(){const e=this.axes[_u.X];if(null==(null===e||void 0===e?void 0:e.scale))return 0;const[t,i]=e.scale.range;return Math.abs(i-t)}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!t||!i)return{domain:[]};const{keys:[n]}=t.domain;if(e===this.getCategoryDirection()){const e=i.resolveProcessedDataDefById(this,"xValue");if("key"===(null===e||void 0===e?void 0:e.def.type)&&"category"===(null===e||void 0===e?void 0:e.def.valueType)){return{domain:n,sortMetadata:i.getKeySortMetadata(this,"xValue",t)}}return{domain:this.padBandExtent(n)}}{const t=$u(this.domainForClippedRange(e,["yHighValue","yLowValue"],"xValue"));return{domain:pq(t)}}}getSeriesRange(e,t){return this.domainForVisibleRange(_u.Y,["yHighValue","yLowValue"],"xValue",t)}createNodeDatumContext(e,t){var i,n;const{dataModel:o,processedData:s,groupScale:r}=this;if(!o||!s)return;const a=null===(i=s.dataSources)||void 0===i||null===(i=i.get(this.id))||void 0===i?void 0:i.data;if(null==a)return;const l=e.scale,d=t.scale,{barWidth:c,groupIndex:u}=this.updateGroupScale(e),h=xq.is(l)?-.5*c:0,p=r.convert(String(u)),g=this.getBarDirection()===_u.X,m=oq(null===e||void 0===e?void 0:e.scale,null===e||void 0===e?void 0:e.visibleRange,this.smallestDataInterval,this.largestDataInterval),[f,v]=l.range,y=Math.abs(v-f);this.aggregationManager.ensureLevelForRange(y);const b=this.aggregationManager.getFilterForRange(y),x=null!=(null===(n=this.contextNodeData)||void 0===n?void 0:n.nodeData)&&(null!=s.changeDescription||!Mq(s)||null!=b);return{rawData:a,xValues:o.resolveKeysById(this,"xValue",s),yLowValues:o.resolveColumnById(this,"yLowValue",s),yHighValues:o.resolveColumnById(this,"yHighValue",s),xScale:l,yScale:d,xAxis:e,yAxis:t,barWidth:c,groupOffset:p,barOffset:h,barAlongX:g,crisp:m,dataAggregationFilter:b,xKey:this.properties.xKey,yLowKey:this.properties.yLowKey,yHighKey:this.properties.yHighKey,labelEnabled:this.properties.label.enabled,labelPlacement:this.properties.label.placement,labelPadding:(this.properties.label.spacing+("number"===typeof this.properties.label.padding?this.properties.label.padding:0))*("outside"===this.properties.label.placement?1:-1),canIncrementallyUpdate:x,nodes:x?this.contextNodeData.nodeData:[],nodeIndex:0}}prepareNodeDatumState(e,t,i){const n=e.rawData[i],o=e.xValues[i];if(null==o)return;const s=e.yLowValues[i],r=e.yHighValues[i];if(!Number.isFinite(null===s||void 0===s?void 0:s.valueOf())||!Number.isFinite(null===r||void 0===r?void 0:r.valueOf()))return;const[a,l]=s<r?[s,r]:[r,s];return t.datum=n,t.xValue=o,t.yLowValue=a,t.yHighValue=l,t.rawLowValue=s,t.rawHighValue=r,t}createSkeletonNodeDatum(e,t,i){const n=t.nodeDatumScratch;return{index:t.groupedDataIndex,series:this,itemId:i,datum:n.datum,datumIndex:t.datumIndex,xValue:n.xValue,yLowValue:0,yHighValue:0,yLowKey:e.yLowKey,yHighKey:e.yHighKey,xKey:e.xKey,x:0,y:0,width:0,height:0,midPoint:{x:0,y:0},crisp:t.crisp,labels:[]}}createNodeDatum(e,t,i,n){const o=this.prepareNodeDatumState(e,t.nodeDatumScratch,t.datumIndex);if(!o)return;const s=this.createSkeletonNodeDatum(e,t,i);return this.updateNodeDatum(e,s,t,n,o),s}updateNodeDatum(e,t,i,n,o){if(null!==o&&void 0!==o||(o=this.prepareNodeDatumState(e,i.nodeDatumScratch,i.datumIndex)),!o)return;const s=t;s.index=i.groupedDataIndex,s.datum=o.datum,s.datumIndex=i.datumIndex,s.xValue=o.xValue,s.yLowValue=o.rawLowValue,s.yHighValue=o.rawHighValue,s.crisp=i.crisp;const r=Math.round(e.yScale.convert(i.yHigh)),a=Math.round(e.yScale.convert(i.yLow)),l=Math.max(n,Math.abs(a-r)),d={x:e.barAlongX?Math.min(r,a):i.x,y:e.barAlongX?i.x:Math.min(r,a),width:e.barAlongX?l:i.width,height:e.barAlongX?i.width:l};s.x=d.x,s.y=d.y,s.width=d.width,s.height=d.height;const c=s.midPoint;c.x=d.x+d.width/2,c.y=d.y+d.height/2;const u=s.clipBBox;u&&(u.x=d.x,u.y=d.y,u.width=d.width,u.height=d.height);const h=i.labelParamsScratch;h.labels=s.labels,h.datumIndex=i.datumIndex,h.rectX=d.x,h.rectY=d.y,h.rectWidth=d.width,h.rectHeight=d.height,h.yLowValue=o.yLowValue,h.yHighValue=o.yHighValue,h.datum=o.datum,this.updateLabelData(e,h)}upsertNodeDatum(e,t,i,n){if(e.canIncrementallyUpdate&&e.nodeIndex<e.nodes.length){const i=e.nodes[e.nodeIndex];this.updateNodeDatum(e,i,t,n)}else{const o=this.createNodeDatum(e,t,i,n);o&&e.nodes.push(o)}e.nodeIndex++}createNodeDataWithAggregation(e,t,i,n,o,s){const{maxRange:r,indexData:a,midpointIndices:l}=s,[d,c]=yq(1,r,e.xAxis.range,i=>{const n=a[i*ih+Ju],o=l[i];if(-1!==o)return[t(o),t(n)+e.barWidth]});for(let u=d;u<c;u+=1){const s=u*ih,r=a[s+Qu],d=a[s+Ju],c=a[s+eh],h=a[s+th],p=l[u];if(-1===p)continue;null!=e.xValues[p]&&(i.datumIndex=p,i.groupedDataIndex=0,i.x=t(p),i.width=Math.abs(t(r)-t(d))+e.barWidth,i.yLow=e.yLowValues[c],i.yHigh=e.yHighValues[h],i.crisp=!1,this.upsertNodeDatum(e,i,n,o))}}createNodeDataSimple(e,t,i,n,o,s){var r;const a=null===(r=s.invalidData)||void 0===r?void 0:r.get(this.id);let[l,d]=this.visibleRangeIndices("xValue",e.xAxis.range);s.input.count<1e3&&(l=0,d=s.input.count);for(let c=l;c<d;c+=1)!0!==(null===a||void 0===a?void 0:a[c])&&(i.datumIndex=c,i.groupedDataIndex=0,i.x=t(c),i.width=e.barWidth,i.yLow=e.yLowValues[c],i.yHigh=e.yHighValues[c],i.crisp=e.crisp,this.upsertNodeDatum(e,i,n,o))}createNodeDataGrouped(e,t,i,n,o){const s=this.processedData;for(const{datumIndex:r,groupIndex:a}of this.dataModel.forEachGroupDatum(this,s))i.datumIndex=r,i.groupedDataIndex=a,i.x=t(r),i.width=e.barWidth,i.yLow=e.yLowValues[r],i.yHigh=e.yHighValues[r],i.crisp=e.crisp,this.upsertNodeDatum(e,i,n,o)}createNodeData(){var e;const{data:t,processedData:i,visible:n}=this,o=this.getCategoryAxis(),s=this.getValueAxis();if(!(t&&o&&s&&this.dataModel&&null!==i&&void 0!==i&&i.dataSources&&null!==(e=this.chart)&&void 0!==e&&e.seriesRect))return;const r=this.createNodeDatumContext(o,s);if(!r)return;const{yLowKey:a,yHighKey:l,strokeWidth:d}=this.properties,c="".concat(a,"-").concat(l),u=Dq(this.properties.segmentation,o,s,this.chart.seriesRect,this.ctx.scene),h={itemId:c,nodeData:r.nodes,labelData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible,styles:kq(this.getItemStyle.bind(this)),segments:u};if(!n)return h;const p=e=>Math.round(r.xScale.convert(r.xValues[e]))+r.groupOffset+r.barOffset,g={nodeDatumScratch:{datum:void 0,xValue:void 0,yLowValue:0,yHighValue:0,rawLowValue:void 0,rawHighValue:void 0},labelParamsScratch:{labels:[],datumIndex:0,rectX:0,rectY:0,rectWidth:0,rectHeight:0,yLowValue:0,yHighValue:0,datum:void 0},datumIndex:0,groupedDataIndex:0,x:0,width:0,yLow:0,yHigh:0,crisp:!1};null!=r.dataAggregationFilter?this.createNodeDataWithAggregation(r,p,g,c,d,r.dataAggregationFilter):"ungrouped"===i.type?this.createNodeDataSimple(r,p,g,c,d,i):this.createNodeDataGrouped(r,p,g,c,d),r.canIncrementallyUpdate&&r.nodeIndex<r.nodes.length&&(r.nodes.length=r.nodeIndex);for(const m of r.nodes)h.labelData.push(...m.labels);return h}updateLabelData(e,t){const i=t.labels;if(!e.labelEnabled)return void(i.length>0&&(i.length=0));const{xKey:n,yLowKey:o,yHighKey:s,xName:r,yLowName:a,yHighName:l,yName:d,legendItemName:c,label:u}=this.properties,h=e.barAlongX,g=e.labelPlacement,m=e.labelPadding,f=t.rectX,v=t.rectY,y=t.rectWidth,b=t.rectHeight,x=f+(h?-m:y/2),C=v+(h?b/2:b+m);let S,w;S="outside"===g?h?"right":"center":h?"left":"center",w="outside"===g?h?"middle":"top":h?"middle":"bottom";const M=f+(h?y+m:y/2),k=v+(h?b/2:-m);let D,I;D="outside"===g?h?"left":"center":h?"right":"center",I="outside"===g?h?"middle":"bottom":h?"middle":"top";const A=t.datum,L=t.yLowValue,N=t.yHighValue,T=t.datumIndex,R={datum:A,xKey:n,yLowKey:o,yHighKey:s,xName:r,yLowName:a,yHighName:l,yName:d,legendItemName:c},E=this.getSeriesDomain(_u.Y).domain,P=this.getLabelText(L,A,o,"y",E,u,p({itemType:"low",value:L},R)),O=this.getLabelText(N,A,s,"y",E,u,p({itemType:"high",value:N},R));if(i.length>0&&"low"===i[0].itemType){const e=i[0];e.datumIndex=T,e.x=x,e.y=C,e.textAlign=S,e.textBaseline=w,e.text=P,e.datum=A}else i[0]={datumIndex:T,x:x,y:C,textAlign:S,textBaseline:w,text:P,itemType:"low",datum:A,series:this};if(i.length>1&&"high"===i[1].itemType){const e=i[1];e.datumIndex=T,e.x=M,e.y=k,e.textAlign=D,e.textBaseline=I,e.text=O,e.datum=A}else i[1]={datumIndex:T,x:M,y:k,textAlign:D,textBaseline:I,text:O,itemType:"high",datum:A,series:this};i.length=2}nodeFactory(){return new Cq}getStyle(e,t){var i,n,o,s,r,a,l,d;const{cornerRadius:c,fill:u,fillOpacity:h,lineDash:p,lineDashOffset:g,stroke:m,strokeOpacity:f,strokeWidth:v,styler:y}=this.properties;let b={};if(!e&&y){var x,C;const e=this.makeStylerParams(t);b=null!==(x=this.ctx.optionsGraphService.resolvePartial(["series","".concat(this.declarationOrder)],null!==(C=this.cachedCallWithContext(y,e))&&void 0!==C?C:{},{pick:!1}))&&void 0!==x?x:{}}return{cornerRadius:null!==(i=b.cornerRadius)&&void 0!==i?i:c,fill:null!==(n=b.fill)&&void 0!==n?n:u,fillOpacity:null!==(o=b.fillOpacity)&&void 0!==o?o:h,lineDash:null!==(s=b.lineDash)&&void 0!==s?s:p,lineDashOffset:null!==(r=b.lineDashOffset)&&void 0!==r?r:g,opacity:1,stroke:null!==(a=b.stroke)&&void 0!==a?a:m,strokeOpacity:null!==(l=b.strokeOpacity)&&void 0!==l?l:f,strokeWidth:null!==(d=b.strokeWidth)&&void 0!==d?d:v}}makeStylerParams(e){const{id:t}=this,{cornerRadius:i,fill:n,fillOpacity:o,lineDash:s,lineDashOffset:r,stroke:a,strokeOpacity:l,strokeWidth:d,xKey:c,yLowKey:u,yHighKey:h}=this.properties;return{cornerRadius:i,fill:n,fillOpacity:o,highlightState:Iq(null!==e&&void 0!==e?e:Aq.None),lineDash:s,lineDashOffset:r,seriesId:t,stroke:a,strokeOpacity:l,strokeWidth:d,xKey:c,yLowKey:u,yHighKey:h}}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,n=null!==t&&void 0!==t?t:[];return Mq(this.processedData)?i.update(n,void 0,e=>this.getDatumId(e)):i.update(n)}getItemStyle(e,t,i){const{properties:n,dataModel:o,processedData:s}=this,{itemStyler:r}=n;let a=xu(this.getHighlightStyle(t,e,i),this.getStyle(void 0===e,i));if(r&&null!=o&&null!=s&&null!=e){const i=o.resolveKeysById(this,"xValue",s)[e],n=this.cachedDatumCallback(bq(this.getDatumId({xValue:i}),t?"highlight":"node"),()=>{const i=this.makeItemStylerParams(e,t,a);return this.callWithContext(r,i)});n&&(a=xu(n,a))}return a}makeItemStylerParams(e,t,i){var n,o,s;const{id:r,properties:a,processedData:l}=this,{xKey:d,yHighKey:c,yLowKey:u}=a,h=null===(n=l.dataSources.get(r))||void 0===n?void 0:n.data[e],g=null===(o=this.ctx.highlightManager)||void 0===o?void 0:o.getActiveHighlight(),m=this.getHighlightStateString(g,t,e),f=null!==(s=this.filterItemStylerFillParams(i.fill))&&void 0!==s?s:i.fill;return p(p({seriesId:r,datum:h,xKey:d,yHighKey:c,yLowKey:u,highlightState:m},i),{},{fill:f})}updateDatumStyles(e){const t=this.ctx.highlightManager.getActiveHighlight();e.datumSelection.each((i,n)=>{if(!e.datumSelection.isGarbage(i)){const i=this.getHighlightState(t,e.isHighlight,n.datumIndex);n.style=this.getItemStyle(n.datumIndex,e.isHighlight,i)}})}updateDatumNodes(e){let{datumSelection:t,isHighlight:i}=e;const{contextNodeData:n}=this;if(!n)return;const o=this.ctx.highlightManager.getActiveHighlight(),s=this.getCategoryDirection()===_u.X,r=this.getShapeFillBBox(),a=this;t.each(function(e,t){var l,d,c,u,h;const p=null!==(l=t.style)&&void 0!==l?l:n.styles[a.getHighlightState(o,i,t.datumIndex)];e.setStyleProperties(p,r),e.setStaticProperties("overlay",null!==(d=p.cornerRadius)&&void 0!==d?d:0,null!==(c=p.cornerRadius)&&void 0!==c?c:0,null!==(u=p.cornerRadius)&&void 0!==u?u:0,null!==(h=p.cornerRadius)&&void 0!==h?h:0,s?t.width>0:t.height>0,t.crisp,void 0)})}updateLabelSelection(e){const t=this.properties.label.enabled?e.labelData:[];return e.labelSelection.update(t,e=>{e.pointerEvents=Sq.None})}updateLabelNodes(e){var t,i,n,o;const{isHighlight:s=!1}=e,r={xKey:this.properties.xKey,xName:null!==(t=this.properties.xName)&&void 0!==t?t:this.properties.xKey,yName:this.properties.yName,yLowKey:this.properties.yLowKey,yLowName:null!==(i=this.properties.yLowName)&&void 0!==i?i:this.properties.yLowKey,yHighKey:this.properties.yHighKey,yHighName:null!==(n=this.properties.yHighName)&&void 0!==n?n:this.properties.yHighKey,legendItemName:this.properties.legendItemName},a=null===(o=this.ctx.highlightManager)||void 0===o?void 0:o.getActiveHighlight();e.labelSelection.each((e,t)=>{var i;e.fillOpacity=null!==(i=this.getHighlightStyle(s,null===t||void 0===t?void 0:t.datumIndex).opacity)&&void 0!==i?i:1,sq(this,e,r,this.properties.label,t,s,a)})}getHighlightLabelData(e,t){var i;return null!==(i=t.labels)&&void 0!==i&&i.length?t.labels:super.getHighlightLabelData(e,t)}getTooltipContent(e){var t;const{id:i,dataModel:n,processedData:o,properties:s}=this,{xKey:r,xName:a,yName:l,yLowKey:d,yHighKey:c,yLowName:u,yHighName:h,tooltip:g,legendItemName:m}=s,f=this.getCategoryAxis(),v=this.getValueAxis();if(!n||!o||!f||!v)return;const y=null===(t=o.dataSources.get(this.id))||void 0===t?void 0:t.data[e],b=n.resolveKeysById(this,"xValue",o)[e],x=n.resolveColumnById(this,"yHighValue",o)[e],C=n.resolveColumnById(this,"yLowValue",o)[e];if(null==b)return;const S=this.getItemStyle(e,!1),w="".concat(this.getAxisValueText(v,"tooltip",C,y,d,m)," - ").concat(this.getAxisValueText(v,"tooltip",x,y,c,m));return this.formatTooltipWithContext(g,{heading:this.getAxisValueText(f,"tooltip",b,y,r,m),symbol:this.legendItemSymbol(),data:[{label:l,fallbackLabel:"".concat(null!==u&&void 0!==u?u:d," - ").concat(null!==h&&void 0!==h?h:c),value:w,missing:uE.isTooltipValueMissing(x)&&uE.isTooltipValueMissing(C)}]},p({seriesId:i,datum:y,title:l,xKey:r,xName:a,yName:l,yLowKey:d,yHighKey:c,yLowName:u,yHighName:h,legendItemName:m},S))}legendItemSymbol(){const{fill:e,stroke:t,strokeWidth:i,fillOpacity:n,strokeOpacity:o,lineDash:s,lineDashOffset:r}=this.getStyle(!1,Aq.None);return{marker:{fill:e,stroke:t,fillOpacity:n,strokeOpacity:o,strokeWidth:i,lineDash:s,lineDashOffset:r}}}getLegendData(e){var t;if("category"!==e)return[];const{id:i,visible:n}=this,{yName:o,yLowName:s,yHighName:r,yLowKey:a,yHighKey:l,legendItemName:d,showInLegend:c}=this.properties,u=null!==(t=null!==d&&void 0!==d?d:o)&&void 0!==t?t:"".concat(null!==s&&void 0!==s?s:a," - ").concat(null!==r&&void 0!==r?r:l);return[{legendType:"category",id:i,itemId:"".concat(a,"-").concat(l),seriesId:i,enabled:n,label:{text:"".concat(u)},symbol:this.legendItemSymbol(),legendItemName:d,hideInLegend:!c}]}resetDatumAnimation(e){hq([e.datumSelection])}animateEmptyUpdateReady(e){let{datumSelection:t,labelSelection:i}=e;const n=dq(cq(this.isVertical(),"normal"),"unknown");wq.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],n),gq(this,"labels",this.ctx.animationManager,i,this.highlightLabelSelection)}animateWaitingUpdateReady(e){const{datumSelection:t,labelSelection:i,contextData:n,previousContextData:o}=e,s=uE.calculateDataDiff(this.id,t,this.getDatumId.bind(this),n,o,this.processedData,this.processedDataUpdated);this.ctx.animationManager.stopByAnimationGroupId(this.id);const r=null==o?"fade":"normal",a=dq(cq(this.isVertical(),r),"added");wq.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],a,(e,t)=>this.getDatumId(t),s),(null!==s&&void 0!==s&&s.changed||!fy(n.groupScale,null===o||void 0===o?void 0:o.groupScale))&&gq(this,"labels",this.ctx.animationManager,i,this.highlightLabelSelection)}getDatumId(e){return"".concat(e.xValue)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds(e){var t;let{datumIndex:i}=e;return vq(this,null===(t=this.contextNodeData)||void 0===t?void 0:t.nodeData[i])}hasItemStylers(){return null!=this.properties.styler||null!=this.properties.itemStyler||null!=this.properties.label.itemStyler}};Tq.className="RangeBarSeries",Tq.type="range-bar";var{rangeBarSeriesThemeableOptionsDef:Rq}=uE,Eq=p(p(p({},Yc),Rq),{},{type:pd(jd("range-bar")),xKey:pd(Ad),yLowKey:pd(Ad),yHighKey:pd(Ad),xKeyAxis:Ad,yKeyAxis:Ad,xName:Ad,yName:Ad,yLowName:Ad,yHighName:Ad,legendItemName:Ad,segmentation:vc});Eq.pickOutsideVisibleMinorAxis=gd(Cd),Eq.focusPriority=gd(Dd);var Pq={series:{direction:"vertical",fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",uE.FILL_GRADIENT_LINEAR_DEFAULTS],["image",uE.FILL_IMAGE_DEFAULTS],["pattern",uE.FILL_PATTERN_DEFAULTS]]},stroke:{$palette:"stroke"},strokeWidth:{$isUserOption:["./stroke",2,0]},label:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"},placement:"inside",padding:{$isUserOption:["./spacing",0,6]}}),highlight:uE.multiSeriesHighlightStyle(),segmentation:uE.SEGMENTATION_DEFAULTS},axes:{[zh.NUMBER]:{crosshair:{enabled:!0}}}},{DIRECTION_SWAP_AXES:Oq,predictCartesianNonPrimitiveAxis:Fq}=uE,zq={type:"series",name:"range-bar",chartType:"cartesian",enterprise:!0,groupable:!0,version:GC,dependencies:[uz],options:Eq,predictAxis:Fq,defaultAxes:Oq,axisKeys:{[_u.X]:"xKeyAxis",[_u.Y]:"yKeyAxis"},axisKeysFlipped:{[_u.X]:"yKeyAxis",[_u.Y]:"xKeyAxis"},themeTemplate:Pq,create:e=>new Tq(e)},{AbstractBarSeriesProperties:Bq,makeSeriesTooltip:Vq,DropShadow:Gq,Label:Hq}=uE,jq=class extends kh{};kV([ru],jq.prototype,"totalType",2),kV([ru],jq.prototype,"index",2),kV([ru],jq.prototype,"axisLabel",2);var Wq=class extends kh{};kV([ru],Wq.prototype,"renderer",2);var _q=class extends Hq{constructor(){super(...arguments),this.placement="outside-end",this.spacing=0}};kV([ru],_q.prototype,"placement",2),kV([ru],_q.prototype,"spacing",2);var Kq=class extends kh{constructor(){super(...arguments),this.fill="#c16068",this.stroke="#c16068",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=1,this.cornerRadius=0,this.shadow=(new Gq).set({enabled:!1}),this.label=new _q,this.tooltip=new Wq}};kV([ru],Kq.prototype,"name",2),kV([ru],Kq.prototype,"fill",2),kV([ru],Kq.prototype,"stroke",2),kV([ru],Kq.prototype,"fillOpacity",2),kV([ru],Kq.prototype,"strokeOpacity",2),kV([ru],Kq.prototype,"lineDash",2),kV([ru],Kq.prototype,"lineDashOffset",2),kV([ru],Kq.prototype,"strokeWidth",2),kV([ru],Kq.prototype,"cornerRadius",2),kV([ru],Kq.prototype,"itemStyler",2),kV([ru],Kq.prototype,"shadow",2),kV([ru],Kq.prototype,"label",2),kV([ru],Kq.prototype,"tooltip",2);var Uq=class extends kh{constructor(){super(...arguments),this.enabled=!0,this.stroke="black",this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2}};kV([ru],Uq.prototype,"enabled",2),kV([ru],Uq.prototype,"stroke",2),kV([ru],Uq.prototype,"strokeOpacity",2),kV([ru],Uq.prototype,"lineDash",2),kV([ru],Uq.prototype,"lineDashOffset",2),kV([ru],Uq.prototype,"strokeWidth",2);var Yq=class extends kh{constructor(){super(...arguments),this.positive=new Kq,this.negative=new Kq,this.total=new Kq}};kV([ru],Yq.prototype,"positive",2),kV([ru],Yq.prototype,"negative",2),kV([ru],Yq.prototype,"total",2);var $q=class extends Bq{constructor(){super(...arguments),this.item=new Yq,this.totals=new Dh(jq),this.line=new Uq,this.tooltip=Vq()}getStyle(e){const{fillOpacity:t,strokeWidth:i,strokeOpacity:n,fill:o,stroke:s,lineDash:r,lineDashOffset:a,cornerRadius:l}=this.item["subtotal"===e?"total":e];return{fill:o,fillOpacity:t,stroke:s,strokeWidth:i,strokeOpacity:n,lineDash:r,lineDashOffset:a,cornerRadius:l,opacity:1}}};kV([ru],$q.prototype,"xKey",2),kV([ru],$q.prototype,"yKey",2),kV([ru],$q.prototype,"xName",2),kV([ru],$q.prototype,"yName",2),kV([ru],$q.prototype,"item",2),kV([ru],$q.prototype,"totals",2),kV([ru],$q.prototype,"line",2),kV([ru],$q.prototype,"tooltip",2);var{adjustLabelPlacement:Zq,SeriesNodePickMode:Xq,fixNumericExtent:qq,valueProperty:Qq,keyProperty:Jq,accumulativeValueProperty:eQ,trailingAccumulatedValueProperty:tQ,createDatumId:iQ,checkCrisp:nQ,updateLabelNode:oQ,prepareBarAnimationFunctions:sQ,collapsedStartingBarPosition:rQ,resetBarSelectionsFn:aQ,seriesLabelFadeInAnimation:lQ,resetLabelFn:dQ,animationValidation:cQ,DEFAULT_CARTESIAN_DIRECTION_KEYS:uQ,DEFAULT_CARTESIAN_DIRECTION_NAMES:hQ,computeBarFocusBounds:pQ,Rect:gQ,motion:mQ,getItemStylesPerItemId:fQ,DataSet:vQ}=uE,yQ=class extends uE.AbstractBarSeries{constructor(e){super({moduleCtx:e,propertyKeys:uQ,propertyNames:hQ,categoryKey:void 0,pickModes:[Xq.NEAREST_NODE,Xq.EXACT_SHAPE_MATCH],pathsPerSeries:["connector"],pathsZIndexSubOrderOffset:[-1,-1],animationResetFns:{datum:aQ,label:dQ}}),this.properties=new $q,this.seriesItemTypes=new Set(["positive","negative","total"])}async processData(e){var t,i,n,o;const{xKey:s,yKey:r,totals:a}=this.properties,{data:l}=this;if(!this.visible)return;const d={missingValue:void 0,invalidValue:void 0},c=[],u=a.reduce((e,t)=>{const i=e.get(t.index);return i?i.push(t):e.set(t.index,[t]),e},new Map);for(const[C,S]of null!==(h=null===l||void 0===l?void 0:l.data.entries())&&void 0!==h?h:[]){var h;c.push(S);const e=u.get(C);if(e)for(const t of e)c.push(p(p({},t.toJson()),{},{[s]:t.axisLabel}))}const g=[];this.ctx.animationManager.isSkipped()||g.push(cQ());const m=null===(t=this.getCategoryAxis())||void 0===t?void 0:t.scale,f=null===(i=this.getValueAxis())||void 0===i?void 0:i.scale,{isContinuousX:v,xScaleType:y,yScaleType:b}=this.getScaleInformation({xScale:m,yScale:f}),{processedData:x}=await this.requestDataModel(e,vQ.wrap(c),{props:[Jq(s,y,{id:"xValue"}),eQ(r,b,p(p({},d),{},{id:"yCurrent"})),eQ(r,b,p(p({},d),{},{missingValue:0,id:"yCurrentTotal"})),eQ(r,b,p(p({},d),{},{id:"yCurrentPositive",validation:e=>dv(e)&&Number(e)>=0})),eQ(r,b,p(p({},d),{},{id:"yCurrentNegative",validation:e=>dv(e)&&Number(e)>=0})),tQ(r,b,p(p({},d),{},{id:"yPrevious"})),Qq(r,b,{id:"yRaw"}),Qq("totalType","category",{id:"totalTypeValue",missingValue:void 0,validation:e=>"total"===e||"subtotal"===e}),...v?[uE.SMALLEST_KEY_INTERVAL,uE.LARGEST_KEY_INTERVAL]:[],...g]});this.smallestDataInterval=null===(n=x.reduced)||void 0===n?void 0:n.smallestKeyInterval,this.largestDataInterval=null===(o=x.reduced)||void 0===o?void 0:o.largestKeyInterval,this.updateSeriesItemTypes(),this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!t||!i)return{domain:[]};const{keys:[n],values:o}=t.domain;if(e===this.getCategoryDirection()){const o=i.resolveProcessedDataDefById(this,"xValue");if("key"===(null===o||void 0===o?void 0:o.def.type)&&"category"===(null===o||void 0===o?void 0:o.def.valueType)){return{domain:n,sortMetadata:i.getKeySortMetadata(this,"xValue",t)}}const s=e===_u.Y,r=this.getCategoryAxis().isReversed();return{domain:this.padBandExtent(n,r!==s)}}{const e=o[i.resolveProcessedDataIndexById(this,"yCurrent")],t=[Math.min(0,e[0]),Math.max(0,e[1])];return{domain:qq(t)}}}getSeriesRange(){return[Number.NaN,Number.NaN]}createNodeData(){var e,t,i;const{data:n,dataModel:o,processedData:s}=this,r=this.getCategoryAxis(),a=this.getValueAxis();if(!n||!r||!a||!o||!s)return;const{line:l}=this.properties,d=r.scale,c=a.scale,u=this.getBarDirection()===_u.X,h=null!==(e=this.getBandwidth(r))&&void 0!==e?e:10,g=r.isReversed(),m=a.isReversed();if("ungrouped"!==s.type)return;const f={itemId:this.properties.yKey,nodeData:[],labelData:[],pointData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible,styles:fQ(this.getItemStyle.bind(this),"total","subtotal","positive","negative")};if(!this.visible)return f;const v=[],y=o.resolveKeysById(this,"xValue",s),b=o.resolveColumnById(this,"yRaw",s),x=o.resolveColumnById(this,"totalTypeValue",s),C=o.resolveColumnById(this,"yCurrent",s),S=o.resolveColumnById(this,"yPrevious",s),w=o.resolveColumnById(this,"yCurrentTotal",s),M=this.getSeriesDomain(_u.Y).domain,k=nQ(null===r||void 0===r?void 0:r.scale,null===r||void 0===r?void 0:r.visibleRange,this.smallestDataInterval,this.largestDataInterval);function D(e,t,i){return e||t?{cumulativeValue:w[i],trailingValue:t?A:0}:{cumulativeValue:C[i],trailingValue:S[i]}}function I(e,t,i,n,o){return e?n:t?(null!==n&&void 0!==n?n:0)-(null!==o&&void 0!==o?o:0):i}let A=0;const{xKey:L,yKey:N,xName:T,yName:R}=this.properties,E=null!==(t=null===(i=s.dataSources.get(this.id))||void 0===i?void 0:i.data)&&void 0!==t?t:[];for(const[O,F]of E.entries()){const e=x[O],t=this.isSubtotal(e),i=this.isTotal(e),n=i||t,o=y[O];if(null==o)continue;const s=Math.round(d.convert(o)),r=b[O],{cumulativeValue:a,trailingValue:C}=D(i,t,O);n&&(A=null!==a&&void 0!==a?a:0);const S=Math.round(c.convert(a)),w=Math.round(c.convert(C)),E=I(i,t,r,a,C),P=(null!==E&&void 0!==E?E:0)>=0,z=this.getSeriesItemType(P,e),{strokeWidth:B,label:V}=this.getItemConfig(z),G=P?S:w,H=P?w:S,j=Math.max(B,Math.abs(H-G)),W={x:u?Math.min(G,H):s,y:u?s:Math.min(G,H),width:u?j:h,height:u?h:j},_={x:W.x+W.width/2,y:W.y+W.height/2},K=n?S:w,U=Math.floor(l.strokeWidth)%2/2,Y=g?S:K,$=g?K:S;let Z,X;u?(Z={x:Y+U,y:W.y},X={x:$+U,y:W.y+W.height}):(Z={x:W.x,y:Y+U},X={x:W.x+W.width,y:$+U});const q={x:g?X.x:Z.x,y:g?X.y:Z.y,x2:g?Z.x:X.x,y2:g?Z.y:X.y,size:0};v.push(q);const Q="subtotal"===z?"total":z,J=this.getLabelText(E,F,N,"y",M,V,{itemType:Q,value:E,datum:F,xKey:L,yKey:N,xName:T,yName:R}),ee=V.spacing+("number"===typeof V.padding?V.padding:0),te={index:O,series:this,itemType:z,datum:F,datumIndex:O,cumulativeValue:null!==a&&void 0!==a?a:0,xValue:o,yValue:E,yKey:N,xKey:L,x:W.x,y:W.y,width:W.width,height:W.height,midPoint:_,crisp:k,label:p({text:J},Zq({isUpward:(null!==E&&void 0!==E?E:-1)>=0!==m,isVertical:!u,placement:V.placement,spacing:ee,rect:W}))};f.nodeData.push(te),f.labelData.push(te)}const P=this.properties.line.enabled;return null!=C&&P&&(f.pointData=v),f}updateSeriesItemTypes(){var e,t;const{dataModel:i,seriesItemTypes:n,processedData:o}=this;if(!i||!o)return;n.clear();const s=i.resolveProcessedDataIndexById(this,"yCurrentPositive"),r=i.resolveProcessedDataIndexById(this,"yCurrentNegative"),a=i.resolveProcessedDataIndexById(this,"totalTypeValue"),l=null!==(e=o.domain.values[s])&&void 0!==e?e:[],d=null!==(t=o.domain.values[r])&&void 0!==t?t:[];l.length>0&&n.add("positive"),d.length>0&&n.add("negative");const c=null===o||void 0===o?void 0:o.domain.values[a];if(c)for(const u of c)"total"!==u&&"subtotal"!==u||n.add("total")}isSubtotal(e){return"subtotal"===e}isTotal(e){return"total"===e}nodeFactory(){return new gQ}getSeriesItemType(e,t){return null!==t&&void 0!==t?t:e?"positive":"negative"}getItemConfig(e){switch(e){case"positive":return this.properties.item.positive;case"negative":return this.properties.item.negative;case"subtotal":case"total":return this.properties.item.total}}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,n=null!==t&&void 0!==t?t:[];return i.update(n)}getItemStyle(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"total";const{properties:o}=this,{datumIndex:s=0,datum:r}=null!==e&&void 0!==e?e:{},a="subtotal"===n?"total":n,l=o.item[a],d=xu(this.getHighlightStyle(t,s,i),o.getStyle(n)),{itemStyler:c}=l;let u=d;if(null!=c&&null!=e){const e=this.cachedDatumCallback(iQ(s,t?"highlight":"node"),()=>{const e=this.makeItemStylerParams(n,s,r,t,u);return this.ctx.optionsGraphService.resolvePartial(["series","".concat(this.declarationOrder),"item",a],this.callWithContext(c,e))});e&&(u=xu(e,u))}return u}makeItemStylerParams(e,t,i,n,o){var s,r;const{id:a,properties:l}=this,{xKey:d,yKey:c}=l,u=null===(s=this.ctx.highlightManager)||void 0===s?void 0:s.getActiveHighlight(),h=this.getHighlightStateString(u,n,t),g=null!==(r=this.filterItemStylerFillParams(o.fill))&&void 0!==r?r:o.fill;return p(p({seriesId:a,itemType:e,datum:i,xKey:d,yKey:c,highlightState:h},o),{},{fill:g})}updateDatumStyles(e){let{datumSelection:t,isHighlight:i}=e;t.each((e,t)=>{t.style=this.getItemStyle(t,i,void 0,t.itemType)})}updateDatumNodes(e){let{datumSelection:t,isHighlight:i}=e;const{contextNodeData:n}=this;if(!n)return;const o=this.ctx.highlightManager.getActiveHighlight(),s=this.getCategoryDirection()===_u.X,r=this.getShapeFillBBox();t.each((e,t)=>{var a,l;const d=null!==(a=t.style)&&void 0!==a?a:n.styles[t.itemType][this.getHighlightState(o,i,t.datumIndex)];e.setStyleProperties(d,r),e.cornerRadius=null!==(l=d.cornerRadius)&&void 0!==l?l:0,e.visible=s?t.width>0:t.height>0,e.crisp=t.crisp})}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;if(0===t.length)return i.update([]);const n=t.filter(e=>{const{label:t}=this.getItemConfig(e.itemType);return t.enabled});return i.update(n)}updateLabelNodes(e){var t,i,n;let{labelSelection:o,isHighlight:s}=e;const r={itemType:"positive",xKey:this.properties.xKey,xName:null!==(t=this.properties.xName)&&void 0!==t?t:this.properties.xName,yKey:this.properties.yKey,yName:null!==(i=this.properties.yName)&&void 0!==i?i:this.properties.yName},a=null===(n=this.ctx.highlightManager)||void 0===n?void 0:n.getActiveHighlight();o.each((e,t)=>{var i,n;r.itemType=t.itemType;const o=null!==(i=null===(n=this.getHighlightStyle(s,t.datumIndex))||void 0===n?void 0:n.opacity)&&void 0!==i?i:1;e.visible=!0,e.fillOpacity=o;const l=this.getItemConfig(t.itemType).label;oQ(this,e,r,l,t.label,s,a)})}getTooltipContent(e){var t,i;const{id:n,dataModel:o,processedData:s,properties:r}=this,{xKey:a,xName:l,yKey:d,yName:c,tooltip:u,legendItemName:h}=r,g=this.getCategoryAxis(),m=this.getValueAxis();if(!o||!s||!g||!m)return;const f=null===(t=s.dataSources.get(this.id))||void 0===t?void 0:t.data[e],v=o.resolveKeysById(this,"xValue",s)[e],y=o.resolveColumnById(this,"yRaw",s)[e],b=o.resolveColumnById(this,"yCurrentTotal",s),x=o.resolveColumnById(this,"totalTypeValue",s);if(null==v)return;const C=x[e],S=(null!==y&&void 0!==y?y:0)>=0,w=this.getSeriesItemType(S,C);let M;if(this.isTotal(C))M=b[e];else if(this.isSubtotal(C)){M=b[e];for(let t=e-1;t>=0;t-=1)if(this.isSubtotal(x[t])){M-=b[t];break}}else M=y;const k=null===(i=this.contextNodeData)||void 0===i||null===(i=i.nodeData)||void 0===i?void 0:i[e],D=this.getItemStyle(k,!1,void 0,null===k||void 0===k?void 0:k.itemType);return this.formatTooltipWithContext(u,{heading:this.getAxisValueText(g,"tooltip",v,f,a,h),symbol:this.legendItemSymbol(w),data:[{label:c,fallbackLabel:d,value:this.getAxisValueText(m,"tooltip",M,f,d,h),missing:uE.isTooltipValueMissing(y)}]},p({seriesId:n,datum:f,title:c,itemType:w,xKey:a,xName:l,yKey:d,yName:c},D))}legendItemSymbol(e){const{fill:t,stroke:i,fillOpacity:n,strokeOpacity:o,strokeWidth:s,lineDash:r,lineDashOffset:a}=this.getItemConfig(e);return{marker:{fill:t,stroke:i,fillOpacity:n,strokeOpacity:o,strokeWidth:s,lineDash:r,lineDashOffset:a}}}getLegendData(e){if("category"!==e)return[];const{id:t,seriesItemTypes:i}=this,n=[],o=e=>e.charAt(0).toUpperCase()+e.substring(1),{showInLegend:s}=this.properties;for(const r of i){const{name:e}=this.getItemConfig(r);n.push({legendType:"category",id:t,itemId:iQ(r),seriesId:t,enabled:!0,label:{text:null!==e&&void 0!==e?e:o(r)},symbol:this.legendItemSymbol(r),hideInLegend:!s,isFixed:!0})}return n}toggleSeriesItem(){}animateEmptyUpdateReady(e){const{datumSelection:t,labelSelection:i,contextData:n}=e,o=sQ(rQ(this.isVertical(),this.axes,"normal"),"unknown");mQ.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],o),lQ(this,"labels",this.ctx.animationManager,i);const{pointData:s}=n;s&&(this.isVertical()?this.animateConnectorLinesVertical(e):this.animateConnectorLinesHorizontal(e))}animateConnectorLinesHorizontal(e){const{pointData:t=[]}=e.contextData,[i]=e.paths,{path:n}=i;this.updateLineNode(i);const o=this.getValueAxis(),s=null===o||void 0===o?void 0:o.isReversed(),r=s?(e,t)=>e<t:(e,t)=>e>t,a=null===o||void 0===o?void 0:o.scale.convert(0),l=t.reduce((e,t)=>(r(t.x,e)&&(e=t.x),e),s?1/0:0),d=(e,t,i,n,o)=>(e-t)/(i-t)*(o-n)+n;this.ctx.animationManager.animate({id:"".concat(this.id,"_connectors"),groupId:this.id,phase:"initial",from:a,to:l,ease:zy,collapsable:!1,onUpdate(e){n.clear(!0);for(const[i,o]of t.entries()){const t=d(e,a,l,a,o.x),s=d(e,a,l,a,o.x2);0!==i&&n.lineTo(t,o.y),n.moveTo(s,o.y2)}i.checkPathDirty()},onStop:()=>this.resetConnectorLinesPath(e)})}animateConnectorLinesVertical(e){const{pointData:t=[]}=e.contextData,[i]=e.paths,{path:n}=i;this.updateLineNode(i);const o=this.getValueAxis(),s=null===o||void 0===o?void 0:o.isReversed(),r=s?(e,t)=>e>t:(e,t)=>e<t,a=null===o||void 0===o?void 0:o.scale.convert(0),l=t.reduce((e,t)=>(r(t.y,e)&&(e=t.y),e),s?0:1/0),d=(e,t,i,n,o)=>(e-t)/(i-t)*(o-n)+n;this.ctx.animationManager.animate({id:"".concat(this.id,"_connectors"),groupId:this.id,phase:"initial",from:a,to:l,ease:zy,collapsable:!1,onUpdate(e){n.clear(!0);for(const[i,o]of t.entries()){const t=d(e,a,l,a,o.y),s=d(e,a,l,a,o.y2);0!==i&&n.lineTo(o.x,t),n.moveTo(o.x2,s)}i.checkPathDirty()},onStop:()=>this.resetConnectorLinesPath(e)})}animateReadyResize(e){super.animateReadyResize(e),this.resetConnectorLinesPath(e)}updatePaths(e){this.resetConnectorLinesPath({contextData:e.contextData,paths:e.paths})}resetConnectorLinesPath(e){let{contextData:t,paths:i}=e;if(0===i.length)return;const[n]=i;this.updateLineNode(n);const{path:o}=n;o.clear(!0);const{pointData:s}=t;if(s){for(const[e,t]of s.entries())0!==e&&o.lineTo(t.x,t.y),o.moveTo(t.x2,t.y2);n.checkPathDirty()}}updateLineNode(e){const{stroke:t,strokeWidth:i,strokeOpacity:n,lineDash:o,lineDashOffset:s}=this.properties.line;e.setProperties({fill:void 0,stroke:t,strokeWidth:i,strokeOpacity:n,lineDash:o,lineDashOffset:s,lineJoin:"round",pointerEvents:uE.PointerEvents.None})}isLabelEnabled(){const{positive:e,negative:t,total:i}=this.properties.item;return e.label.enabled||t.label.enabled||i.label.enabled}computeFocusBounds(e){var t;let{datumIndex:i}=e;return pQ(this,null===(t=this.contextNodeData)||void 0===t?void 0:t.nodeData[i])}hasItemStylers(){const{positive:e,negative:t,total:i}=this.properties.item;return null!=e.itemStyler||null!=e.label.itemStyler||null!=t.itemStyler||null!=t.label.itemStyler||null!=i.itemStyler||null!=i.label.itemStyler}};yQ.className="WaterfallSeries",yQ.type="waterfall";var{waterfallSeriesThemeableOptionsDef:bQ}=uE,xQ=p(p(p({},bQ),Yc),{},{type:pd(jd("waterfall")),xKey:pd(Ad),yKey:pd(Ad),xKeyAxis:Ad,yKeyAxis:Ad,xName:Ad,yName:Ad,totals:Kd({totalType:pd(Gd("total","subtotal")),index:pd(Pd),axisLabel:pd(Ad)},"a total definition options array")}),{FILL_GRADIENT_LINEAR_KEYED_DEFAULTS:CQ,FILL_IMAGE_DEFAULTS:SQ,FILL_PATTERN_KEYED_DEFAULTS:wQ}=uE;function MQ(e,t){return{fill:{$applySwitch:[{$path:"type"},{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$path:["/".concat(t),{$palette:"fill"},{$palette:"fills"}]},{$palette:"".concat(e,".fill")}]},["gradient",CQ(e)],["image",SQ],["pattern",wQ(e)]]},stroke:{$palette:"".concat(e,".stroke")},strokeWidth:{$isUserOption:["./stroke",2,0]},label:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!1,fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},formatter:void 0,placement:"outside-end",padding:{$isUserOption:["./spacing",0,6]}})}}var kQ={series:{item:{positive:MQ("altUp",0),negative:MQ("altDown",1),total:MQ("neutral",2)},line:{stroke:{$palette:"neutral.stroke"},strokeOpacity:1,lineDash:[0],lineDashOffset:0,strokeWidth:2},highlight:uE.singleSeriesHighlightStyle()},legend:{enabled:!0,toggleSeries:!1}},{DIRECTION_SWAP_AXES:DQ}=uE,IQ={type:"series",name:"waterfall",chartType:"cartesian",enterprise:!0,solo:!0,version:GC,dependencies:[uz],options:xQ,defaultAxes:DQ,axisKeys:{[_u.X]:"xKeyAxis",[_u.Y]:"yKeyAxis"},axisKeysFlipped:{[_u.X]:"yKeyAxis",[_u.Y]:"xKeyAxis"},themeTemplate:kQ,create:e=>new yQ(e)},AQ={width:Pd,height:Pd,grip:Cd,fill:wd,stroke:wd,strokeWidth:Pd,cornerRadius:Pd},LQ=["cursor","highlightStyle","listeners","nodeClickRange","showInLegend","showInMiniChart","tooltip","visible","xName","yName"],NQ=[...LQ,"errorBar","label","legendItemName"],TQ=[...LQ,"direction","legendItemName","minName","q1Name","medianName","q3Name","maxName"],RQ=[...LQ,"title","label","labelKey","labelName","sizeName"],EQ=[...LQ,"title","label","colorName","textAlign","verticalAlign","itemPadding","colorRange"],PQ=[...LQ,"label"],OQ=[...LQ,"errorBar","title","label"],FQ=[...LQ,"label","yLowName","yHighName"],zQ=[...LQ,"direction","label","yLowName","yHighName"],BQ=[...LQ,"errorBar","title","label","labelKey","labelName"],VQ=[...LQ,"direction"],GQ={enabled:Cd,height:Pd,spacing:Pd,cornerRadius:Dd,mask:{fill:wd,fillOpacity:Fd,stroke:wd,strokeWidth:Pd},minHandle:AQ,maxHandle:AQ,miniChart:{enabled:Cd,padding:{top:Pd,bottom:Pd},label:p({enabled:Cd,avoidCollisions:Cd,spacing:Pd,format:_c,formatter:Ud(Ec),interval:{minSpacing:Pd,maxSpacing:Pd,values:xd,step:Dd}},Cc),series:Kd(fd({area:Mu(_z.options,[...LQ,"type"]),bar:Mu(Jz.options,[...NQ,"type"]),"box-plot":Mu(XY.options,[...TQ,"type"]),bubble:Mu(uB.options,[...RQ,"type"]),candlestick:Mu(Y$.options,[...LQ,"type"]),heatmap:Mu(kZ.options,[...EQ,"type"]),histogram:Mu(mB.options,[...PQ,"type"]),line:Mu(kB.options,[...OQ,"type"]),ohlc:Mu(RZ.options,[...LQ,"type"]),"range-area":Mu(YX.options,[...FQ,"type"]),"range-bar":Mu(zq.options,[...zQ,"type"]),scatter:Mu(AB.options,[...BQ,"type"]),waterfall:Mu(IQ.options,[...VQ,"type"])},"miniChart series options"))}},HQ=["itemStyler","simpleItemStyler","direction","fill","fillGradientDefaults","fillPatternDefaults","fillImageDefaults","fillOpacity","shadow","focusPriority","highlight","lineDash","lineDashOffset","strokeWidth"];function jQ(e,t){return{$merge:[{$switch:[t,{},[["area","line","range-area"],{marker:{enabled:{$isUserOption:["/series/$index/marker/enabled",{$path:["/series/$index/marker/enabled",!1]},!1]}}}]]},{$omit:[{$switch:[t,LQ,["bar",NQ],["box-plot",TQ],["bubble",RQ],["heatmap",EQ],["histogram",PQ],["line",[...OQ,...HQ]],["range-area",FQ],["range-bar",zQ],["scatter",BQ],["waterfall",VQ]]},e]}]}}var WQ={enabled:!1,height:{$if:[{$path:"./miniChart/enabled"},40,18]},cornerRadius:4,mask:{fill:{$ref:"foregroundColor"},fillOpacity:.1,stroke:{$ref:"borderColor"},strokeWidth:1},minHandle:{fill:{$ref:"chartBackgroundColor"},stroke:{$ref:"borderColor"},strokeWidth:1,width:12,height:24,cornerRadius:4},maxHandle:{fill:{$ref:"chartBackgroundColor"},stroke:{$ref:"borderColor"},strokeWidth:1,width:12,height:24,cornerRadius:4},miniChart:{enabled:!1,label:{color:{$ref:"textColor"},fontSize:{$rem:Oh.SMALLER},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},spacing:5},padding:{top:0,bottom:0},series:{$apply:[jQ({$path:"/series/$index"},{$path:["/navigator/miniChart/series/$index/type",{$path:["type",{$path:"/series/$index/type"}]}]}),{$if:[{$or:["area","bar","bubble","candlestick","heatmap","histogram","line","ohlc","range-area","range-bar","scatter","waterfall"].map(e=>({$eq:[{$path:"/series/0/type"},e]}))},{$map:[jQ({$value:"$1"},{$path:"/series/$index/type"}),{$path:"/series"}]},void 0]}]}}},_Q={type:"plugin",name:"navigator",chartType:"cartesian",enterprise:!0,version:GC,options:GQ,themeTemplate:WQ,create:e=>new lY(e)},KQ=class extends Ay{};kV([ru],KQ.prototype,"value",2);var{userInteraction:UQ,LayoutElement:YQ,Toolbar:$Q}=uE,ZQ=class extends Ra{constructor(e){super(),this.ctx=e,this.enabled=!1,this.buttons=new Dh(KQ),this.verticalSpacing=10,this.container=e.domManager.addChild("canvas-overlay","range-buttons"),this.container.role="presentation",this.toolbar=new $Q(this.ctx,"ariaLabelRangesToolbar","horizontal"),this.toolbar.addClass("ag-charts-range-buttons"),this.container.append(this.toolbar.getElement()),this.cleanup.register(this.toolbar.addToolbarListener("button-pressed",this.onButtonPress.bind(this)),e.layoutManager.registerElement(YQ.ToolbarBottom,this.onLayoutStart.bind(this)),e.eventsHub.on("zoom:change-complete",this.onZoomChanged.bind(this)),this.teardown.bind(this))}teardown(){this.toolbar.getElement().remove(),this.toolbar.destroy()}onLayoutStart(e){let{layoutBox:t}=e;const{buttons:i,ctx:n,enabled:o,toolbar:s,verticalSpacing:r}=this;if(!o||!n.zoomManager.isZoomEnabled())return void s.setHidden(!0);s.setHidden(!1),s.updateButtons(i);const a=s.getBounds().height;s.setBounds({x:t.x,y:t.y+t.height-a,width:t.width,height:a}),t.shrink({bottom:a+r})}onZoomChanged(){this.toolbar.clearActiveButton()}onButtonPress(e){let{button:{index:t}}=e;const{zoomManager:i}=this.ctx,n=this.buttons.at(t);if(!n)return;const{value:o}=n,s=UQ("zoom-range-button-".concat(t));null==o?i.resetZoom(s):"number"===typeof o?i.extendToEnd(s,_u.X,o):Array.isArray(o)?i.updateWith(s,_u.X,()=>o):"function"===typeof o&&i.updateWith(s,_u.X,o),this.toolbar.toggleActiveButtonByIndex(t)}};kV([ru],ZQ.prototype,"enabled",2),kV([ru],ZQ.prototype,"buttons",2);var XQ=864e5,qQ=30*XQ,QQ=365*XQ,JQ={type:"plugin",name:"ranges",chartType:"cartesian",enterprise:!0,version:GC,options:{enabled:Cd,buttons:Kd(p(p({},Hc),{},{value:yd(Dd,vd(_d(yd(Dd,Md)),Nd(2,2)),Sd)}),"range button options array")},themeTemplate:{enabled:!1,buttons:{$shallowSimple:[{label:"toolbarRange1Month",ariaLabel:"toolbarRange1MonthAria",value:qQ},{label:"toolbarRange3Months",ariaLabel:"toolbarRange3MonthsAria",value:3*qQ},{label:"toolbarRange6Months",ariaLabel:"toolbarRange6MonthsAria",value:6*qQ},{label:"toolbarRangeYearToDate",ariaLabel:"toolbarRangeYearToDateAria",value:(e,t)=>[new Date("".concat(new Date(t).getFullYear(),"-01-01")).getTime(),void 0]},{label:"toolbarRange1Year",ariaLabel:"toolbarRange1YearAria",value:QQ},{label:"toolbarRangeAll",ariaLabel:"toolbarRangeAllAria",value:void 0}]}},create:e=>new ZQ(e)},{LayoutElement:eJ,Group:tJ,Label:iJ,Rect:nJ,Text:oJ}=uE,sJ={ohlc:62,candlestick:62,"hollow-candlestick":62,line:96,"step-line":96,hlc:184,"high-low":800},rJ={up:"positive",down:"negative"},aJ={hlc:"altNeutral"},lJ=class extends kh{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1}};kV([ru],lJ.prototype,"fill",2),kV([ru],lJ.prototype,"fillOpacity",2);var dJ=class extends Ra{constructor(e){super(),this.ctx=e,this.enabled=!1,this.openKey=void 0,this.highKey=void 0,this.lowKey=void 0,this.closeKey=void 0,this.volumeKey=void 0,this.title=new iJ,this.positive=new iJ,this.negative=new iJ,this.neutral=new iJ,this.altNeutral=new iJ,this.background=new lJ,this.layoutStyle="block",this.id="status-bar",this.layer=new tJ({name:"StatusBar",zIndex:bp.STATUS_BAR}),this.labelGroup=this.layer.appendChild(new uE.TranslatableGroup),this.backgroundNode=this.labelGroup.appendChild(new nJ),this.labels=[{label:"O",configuration:2,title:this.labelGroup.appendChild(new oJ),value:this.labelGroup.appendChild(new oJ),id:"openValue",key:"openKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"H",configuration:16,title:this.labelGroup.appendChild(new oJ),value:this.labelGroup.appendChild(new oJ),id:"highValue",key:"highKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"H",configuration:256,title:this.labelGroup.appendChild(new oJ),value:this.labelGroup.appendChild(new oJ),style:"neutral",id:"highValue",key:"highKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"L",configuration:8,title:this.labelGroup.appendChild(new oJ),value:this.labelGroup.appendChild(new oJ),id:"lowValue",key:"lowKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"L",configuration:512,title:this.labelGroup.appendChild(new oJ),value:this.labelGroup.appendChild(new oJ),style:"neutral",id:"lowValue",key:"lowKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"C",configuration:4,title:this.labelGroup.appendChild(new oJ),value:this.labelGroup.appendChild(new oJ),id:"closeValue",key:"closeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"C",configuration:128,title:this.labelGroup.appendChild(new oJ),value:this.labelGroup.appendChild(new oJ),id:"closeValue",key:"closeKey",style:"neutral",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"",configuration:64,title:this.labelGroup.appendChild(new oJ),value:this.labelGroup.appendChild(new oJ),style:"neutral",id:"closeValue",key:"closeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2})},{label:"Vol",configuration:32,title:this.labelGroup.appendChild(new oJ),value:this.labelGroup.appendChild(new oJ),id:"volumeValue",key:"volumeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2})}],this.highlightManager=e.highlightManager,this.labelGroup.visible=!1,this.cleanup.register(e.scene.attachNode(this.layer),e.layoutManager.registerElement(eJ.Overlay,e=>this.startPerformLayout(e)),e.eventsHub.on("layout:complete",e=>this.onLayoutComplete(e)),e.eventsHub.on("highlight:change",()=>this.updateHighlight()),e.eventsHub.on("data:update",e=>{this.chartData=e}))}updateDomainsFromSeries(){if(!this.enabled)return;const e=this.ctx.chartService.series;if(0===e.length)return;let t,i;for(const n of e){const e=n.getDomain(_u.Y),o=null===e||void 0===e?void 0:e.domain;!Array.isArray(o)||o.length<2||("bar"===n.type?i=[o[0],o.at(-1)]:t=[o[0],o.at(-1)])}for(const n of this.labels){null!=this[n.key]?n.domain="volumeKey"===n.key?i:t:n.domain=void 0}}startPerformLayout(e){var t;let{layoutBox:i}=e;if(this.labelGroup.translationX=0,this.labelGroup.translationY=0,!this.enabled)return void(this.labelGroup.visible=!1);this.updateDomainsFromSeries();this.labelGroup.translationY=i.y+0;const n=Math.max(this.title.fontSize,this.positive.fontSize,this.negative.fontSize),o=Vl(n),s=null!==(t=sJ[this.getChartType()])&&void 0!==t?t:0;let r,a=0,l="alphabetic";if("block"===this.layoutStyle)i.shrink(0+o+8,"top"),r=n+(o-n)/2;else{const{title:e}=this.ctx.chartService;if(l="top",r=0+e.padding,e.enabled){const t=e.node.getBBox();a=t.x+t.width+12}else a=e.padding}for(const{label:d,configuration:c,title:u,value:h,domain:p,formatter:g}of this.labels){if(null==p||0===(s&c)){u.visible=!1,h.visible=!1;continue}const e=Wm(this.positive),t=Wm(this.negative),i=Math.max(e.textWidth(g.format(p[0])),e.textWidth(g.format(p[1])),t.textWidth(g.format(p[0])),t.textWidth(g.format(p[1])));u.visible=!0,h.visible=!0;const n=Wm(this.title).measureLines(d);u.setFont(this.title),u.fill=this.title.color,u.text=d,u.textBaseline=l,u.y=r,u.x=a,a+=n.width+4,h.textBaseline=l,h.y=r,h.x=a,a+=i+12}this.backgroundNode.x=0,this.backgroundNode.y=0,this.backgroundNode.width=a-12,this.backgroundNode.height=o+0+8,this.backgroundNode.fill=this.background.fill,this.backgroundNode.fillOpacity=this.background.fillOpacity}onLayoutComplete(e){this.labelGroup.translationX=e.series.rect.x,this.updateHighlight()}updateHighlight(){var e,t;if(!this.enabled)return;const i=this.highlightManager.getActiveHighlight(),n=null!==(e=null===i||void 0===i?void 0:i.datum)&&void 0!==e?e:null===(t=this.chartData)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.at(-1);if(null==n)return void(this.labelGroup.visible=!1);this.labelGroup.visible=!0;const o=null===i||void 0===i?void 0:i.itemId;let s=null==o?void 0:rJ[o];null==s&&null!=this.openKey&&null!=this.closeKey&&(s=n[this.openKey]<n[this.closeKey]?"positive":"negative");for(const{domain:l,value:d,key:c,formatter:u,style:h}of this.labels){var r;if(null==l)continue;let e=null!==(r=null!==h&&void 0!==h?h:s)&&void 0!==r?r:"neutral";var a;if("neutral"===e)e=null!==(a=aJ[this.getChartType()])&&void 0!==a?a:e;const t=this[c],i=null==t||null===n||void 0===n?void 0:n[t];d.setFont(this[e]),d.fill=this[e].color,d.text="number"===typeof i?u.format(i):""}}getChartType(){var e;let t=null===(e=this.ctx.chartService.publicApi)||void 0===e||null===(e=e.getOptions())||void 0===e?void 0:e.chartType;return null!=t&&null!=sJ[t]||(t="candlestick"),t}};kV([ru],dJ.prototype,"enabled",2),kV([ru],dJ.prototype,"openKey",2),kV([ru],dJ.prototype,"highKey",2),kV([ru],dJ.prototype,"lowKey",2),kV([ru],dJ.prototype,"closeKey",2),kV([ru],dJ.prototype,"volumeKey",2),kV([ru],dJ.prototype,"title",2),kV([ru],dJ.prototype,"positive",2),kV([ru],dJ.prototype,"negative",2),kV([ru],dJ.prototype,"neutral",2),kV([ru],dJ.prototype,"altNeutral",2),kV([ru],dJ.prototype,"background",2),kV([ru],dJ.prototype,"layoutStyle",2);var cJ={type:"plugin",name:"statusBar",chartType:"cartesian",enterprise:!0,version:GC,themeTemplate:{enabled:!1,layoutStyle:jh,title:{color:{$ref:"textColor"},fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}},positive:{color:{$palette:"up.stroke"},fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}},negative:{color:{$palette:"down.stroke"},fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}},neutral:{color:{$palette:"neutral.stroke"},fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}},background:{fill:{$ref:"chartBackgroundColor"},fillOpacity:.5},altNeutral:{color:"gray",fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}}},create:e=>new dJ(e)},uJ="middle",hJ=function(e){return za(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)};function pJ(){return{x:{min:0,max:1},y:{min:0,max:1}}}function gJ(e){return e.x.max-e.x.min}function mJ(e){return e.y.max-e.y.min}function fJ(e,t){return Va(e.min,t.min)&&Va(e.max,t.max)}function vJ(e,t){return fJ(e.x,t.x)&&fJ(e.y,t.y)}function yJ(e){return vJ(e,{x:{min:0,max:1},y:{min:0,max:1}})}function bJ(e){var t,i,n,o,s,r,a,l;return{x:{min:null!==(t=null===e||void 0===e||null===(i=e.x)||void 0===i?void 0:i.min)&&void 0!==t?t:0,max:null!==(n=null===e||void 0===e||null===(o=e.x)||void 0===o?void 0:o.max)&&void 0!==n?n:1},y:{min:null!==(s=null===e||void 0===e||null===(r=e.y)||void 0===r?void 0:r.min)&&void 0!==s?s:0,max:null!==(a=null===e||void 0===e||null===(l=e.y)||void 0===l?void 0:l.max)&&void 0!==a?a:1}}}function xJ(e,t,i){if(!e)return{x:0,y:0};const n=hJ(t-e.x,0,e.x+e.width),o=hJ(i-e.y,0,e.y+e.height),s=1/e.width*n,r=1-1/e.height*o;return{x:hJ(s),y:hJ(r)}}function CJ(e,t,i){return{x:{min:e.x.min+t,max:e.x.max+t},y:{min:e.y.min+i,max:e.y.max+i}}}function SJ(e,t,i){return{x:{min:e.x.min,max:e.x.min+gJ(e)*t},y:{min:e.y.min,max:e.y.min+mJ(e)*i}}}function wJ(e,t,i){const n=gJ(e),o=mJ(e),s=e.x.min+n/2,r=e.y.min+o/2;return{x:{min:s-n*t/2,max:s+n*t/2},y:{min:r-o*i/2,max:r+o*i/2}}}function MJ(e,t,i,n){const{min:o,max:s}=t,r=o+(s-o)/2,a=e.max-e.min;switch(i){case"start":return{min:o,max:t.min+a};case"end":return{min:t.max-a,max:s};case"middle":return{min:r-a/2,max:r+a/2};case"pointer":return function(e,t,i){const n=e.max-e.min,o=t.max-t.min,s=i*(1-(o-n)),r=i-s,a=e.min+r,l=e.max+r;return{min:a,max:l}}(e,t,null!==n&&void 0!==n?n:r);default:return{min:o,max:s}}}function kJ(e){return{x:DJ(e.x),y:DJ(e.y)}}function DJ(e){const t=e.max-e.min;let i=e.max>1?1-t:e.min,n=e.min<0?t:e.max;return i=Math.max(0,i),n=Math.min(1,n),{min:i,max:n}}function IJ(e){return null!=Xg(e.getCoreZoom(),e.getRestoredZoom())}var{CartesianAxis:AJ,ContinuousScale:LJ,TimeScale:NJ,UnitTimeScale:TJ,TooltipManager:RJ}=uE,EJ=Cr.create("sync");function PJ(e,t,i){var n;const o=e.getKeys(t),s=e.getKeys(i);return null!==(n=e.shouldFlipXY)&&void 0!==n&&n.call(e)?[s,o]:[o,s]}function OJ(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"x"){case"x":return[_u.X];case"y":return[_u.Y];case"xy":return[_u.X,_u.Y]}}var FJ=class extends kh{constructor(e){super(),this.moduleContext=e,this.enabled=!1,this.axes="x",this.nodeInteraction=!0,this.zoom=!0,this.domainMode="id",this.domainSync=new _p}updateSiblings(e){const{syncManager:t}=this.moduleContext;for(const i of t.getGroupSiblings(null!==e&&void 0!==e?e:this.groupId))EJ("ChartSync.updateSiblings()",i.id,i),this.updateChart(i)}updateChart(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ku.PROCESS_DOMAIN;EJ("ChartSync.updateChart()",e.id,Ku[t],e),t===Ku.PROCESS_DOMAIN?e.ctx.updateService.update(t,{forceNodeDataRefresh:!0}):e.ctx.updateService.update(t)}enabledZoomSync(){var e;const{eventsHub:t}=this.moduleContext;null===(e=this.disableZoomSync)||void 0===e||e.call(this),this.disableZoomSync=t.on("zoom:change-complete",e=>this.onZoom(e))}onZoom(e){const{syncManager:t}=this.moduleContext;for(const i of t.getGroupSiblings(this.groupId)){const t=i.modulesManager.getModule("sync");if(null===t||void 0===t||!t.zoom)continue;const n=i.modulesManager.getModule("zoom");if(!n)continue;const o=this.prepareZoomUpdate();"sync"!==e.source&&(EJ("ChartsSyncManager.enabledZoomSync()",i.id,o),n.updateSyncZoom(o))}}enabledNodeInteractionSync(){var e;null===(e=this.disableNodeInteractionSync)||void 0===e||e.call(this),this.disableNodeInteractionSync=this.moduleContext.eventsHub.on("highlight:change",this.onHighlightChange.bind(this))}onHighlightChange(e){var t,i;const{syncManager:n}=this.moduleContext;if(e.callerId.endsWith("-sync"))return;EJ("ChartSync.onHighlightChange()",e);const o=null===(t=e.currentHighlight)||void 0===t?void 0:t.series,[s]=OJ(this.axes),r=s===_u.X?_u.Y:_u.X,[a,l]=o?PJ(o,s,r):[],d=vU(e.currentHighlight);let c=null!==a&&void 0!==a&&a[0]?null===d||void 0===d?void 0:d[a[0]]:void 0,u=!1;if($a(c)&&(u=!0,c=c.getTime()),null===(i=e.currentHighlight)||void 0===i||!i.datum){for(const e of n.getGroupSiblings(this.groupId)){const t=e.modulesManager.getModule("sync");null!==t&&void 0!==t&&t.nodeInteraction&&(e.ctx.highlightManager.updateHighlight("".concat(e.id,"-sync"),void 0,!0),e.ctx.tooltipManager.removeTooltip("".concat(e.id,"-sync"),void 0,!0))}return}const h="multi-series"===n.getGroupSyncMode(this.groupId);this.findMatchingHighlightNodes(s,r,h?l:[],u,c,e)}findMatchingHighlightNodes(e,t,i,n,o,s){const{syncManager:r}=this.moduleContext;EJ("ChartSync.findMatchingHighlightNodes()",{mainDirection:e,secondaryKeys:i});for(const l of r.getGroupSiblings(this.groupId)){const r=l.modulesManager.getModule("sync");if(null===r||void 0===r||!r.nodeInteraction)continue;let d=!1;for(const s of l.axes){var a;if(!AJ.is(s)||s.direction!==e)continue;const r=l.series.filter(n=>{if(!n.visible)return!1;if(i.length>0){const[,o]=PJ(n,e,t);return i.every(e=>o.includes(e))}return!0}).map(this.findMatchingNodes(s,e,n,o)).filter(Ka);if(1===r.length&&(null===(a=r[0])||void 0===a?void 0:a.nodeDatum)!==l.ctx.highlightManager.getActiveHighlight()){this.dispatchHighlightUpdate(l,r[0].nodeDatum),d=!0;break}}d||(EJ("ChartSync.findMatchingHighlightNodes() - no matching nodes",l.id,s),this.dispatchHighlightUpdate(l))}}findMatchingNodes(e,t,i,n){return o=>{var s,r;if(o.getKeyAxis(e.direction)!==e.id)return;const a=null!==(s=null===(r=o.contextNodeData)||void 0===r?void 0:r.nodeData)&&void 0!==s?s:[];if(null===a||void 0===a||!a.length)return;const l=a[0],d="".concat(t,"Key");if(!Ou(l,d))return;const c=l[d],u=a.find(e=>{const t=e.datum[c];return i?t.getTime()===n:t===n});return u?{series:o,nodeDatum:u}:null}}dispatchHighlightUpdate(e,t){var i;EJ("ChartSync.dispatchHighlightUpdate()",e.id,t);const n=null==t;e.ctx.highlightManager.updateHighlight("".concat(e.id,"-sync"),t,n);const o=null!==(i=null===t||void 0===t?void 0:t.series.tooltipEnabled)&&void 0!==i?i:e.tooltip.enabled;if(t&&o){var s,r,a,l,d,c,u,h;const i=e.seriesAreaBoundingBox,n=i.x+(null!==(s=null!==(r=null===(a=t.midPoint)||void 0===a?void 0:a.x)&&void 0!==r?r:null===(l=t.point)||void 0===l?void 0:l.x)&&void 0!==s?s:0),o=i.y+(null!==(d=null!==(c=null===(u=t.midPoint)||void 0===u?void 0:u.y)&&void 0!==c?c:null===(h=t.point)||void 0===h?void 0:h.y)&&void 0!==d?d:0),p=RJ.makeTooltipMeta({type:"pointermove",canvasX:n,canvasY:o},t.series,t,void 0);e.ctx.tooltipManager.updateTooltip("".concat(e.id,"-sync"),p,e.getTooltipContent(t.series,t.datumIndex,t,"tooltip"))}else e.ctx.tooltipManager.removeTooltip("".concat(e.id,"-sync"),void 0,!0);this.updateChart(e,Ku.SERIES_UPDATE)}async getSyncedDomain(e){if(!AJ.is(e)||"xy"!==this.axes&&this.axes!==e.direction)return;const{groupState:t,directionDomains:i,idDomains:n,positionDomains:o}=this.updateDomainState(e);return this.validateAxis(e,t),await this.waitForDomainsToBeReady(),"position"===this.domainMode?this.calculateDerivedDomain(e,o):"direction"===this.domainMode?this.calculateDerivedDomain(e,i):this.calculateDerivedDomain(e,n)}updateDomainState(e){var t,i,n,o,s,r,a,l,d,c,u,h,p,g;const{syncManager:m}=this.moduleContext,f=m.getChart().id,v=e.id,y=m.getGroupState(this.groupId);if(!y)throw new Error("AG Charts - no GroupState for groupId: "+this.groupId);const b=null!==(t=y.domains)&&void 0!==t?t:y.domains={},x=null!==(i=b[c=e.direction])&&void 0!==i?i:b[c]={derived:[],sources:{},dirty:!0};(null!==(n=(u=x.sources)[f])&&void 0!==n?n:u[f]={})[v]=e.dataDomain.domain,x.dirty=!0;const C=null!==(o=y.domainsById)&&void 0!==o?o:y.domainsById={},S=null!==(s=C[v])&&void 0!==s?s:C[v]={derived:[],sources:{},dirty:!0};(null!==(r=(h=S.sources)[f])&&void 0!==r?r:h[f]={})[v]=e.dataDomain.domain,S.dirty=!0;const w=null!==(a=y.domainsByPosition)&&void 0!==a?a:y.domainsByPosition={},M=null!==(l=w[p=e.position])&&void 0!==l?l:w[p]={derived:[],sources:{},dirty:!0};return(null!==(d=(g=M.sources)[f])&&void 0!==d?d:g[f]={})[v]=e.dataDomain.domain,M.dirty=!0,{groupState:y,directionDomains:x,idDomains:S,positionDomains:M}}validateAxis(e,t){const i="multi-series"===this.moduleContext.syncManager.getGroupSyncMode(this.groupId);OJ(this.axes).includes(e.direction)&&(i?this.validateMultiSeries(e,t):this.validateSingleSeries(e,t))}validateMultiSeries(e,t){const{min:i,max:n,nice:o,reverse:s}=e,r=new Set(e.boundSeries.flatMap(t=>t.getKeys(e.direction)));for(const a of t.members){const{axes:e,modulesManager:t}=a,l=t.getModule("sync"),d=OJ(null===l||void 0===l?void 0:l.axes),c=e.filter(e=>d.includes(e.direction)).filter(e=>e.boundSeries.some(t=>t.getKeys(e.direction).some(e=>r.has(e))));if(0===c.length)continue;const[u]=c;if(u.min!==i||u.max!==n||u.nice!==o||u.reverse!==s)return jr.warnOnce("To allow synchronization, ensure that all synchronized axes with matching keys have matching min, max, nice, and reverse properties."),void(this.enabled=!1)}}validateSingleSeries(e,t){const i=t.members,[{axes:n}]=i,{direction:o,min:s,max:r,nice:a,reverse:l}=e;for(const d of n)if(o===d.direction&&(a!==d.nice||l!==d.reverse||s!==d.min&&(ol(s)||ol(d.min))||r!==d.max&&(ol(r)||ol(d.max))))return jr.warnOnce("To allow synchronization, ensure that all charts have matching min, max, nice, and reverse properties on the synchronized axes."),void(this.enabled=!1)}calculateDerivedDomain(e,t){if(!t.dirty)return t.derived;let i=t.derived;const n=Object.values(t.sources).map(e=>Object.values(e));let o;return o=LJ.is(e.scale)?n.flat(2):n.flat().toSorted((e,t)=>e.length>t.length?-1:1).flat(),t.derived=wr(o),LJ.is(e.scale)&&(i=$u(i),t.derived=$u(t.derived)),t.dirty=!1,function(e,t,i){return NJ.is(e)||TJ.is(e)?!kr(t.map(e=>null===e||void 0===e?void 0:e.valueOf()),i.map(e=>null===e||void 0===e?void 0:e.valueOf())):!kr(t,i)}(e.scale,i,t.derived)&&(EJ(e.id,"updated",{before:i,after:t.derived}),this.updateSiblings()),t.derived}removeAxis(e){var t,i,n;if(!AJ.is(e)||"xy"!==this.axes&&this.axes!==e.direction)return;const{syncManager:o}=this.moduleContext,s=o.getGroupState(this.groupId),r=o.getChart().id,a=e.id;null===s||void 0===s||null===(t=s.domains)||void 0===t||null===(t=t[e.direction])||void 0===t||null===(t=t.sources)||void 0===t||null===(t=t[r])||void 0===t||delete t[a],null===s||void 0===s||null===(i=s.domainsByPosition)||void 0===i||null===(i=i[e.position])||void 0===i||null===(i=i.sources)||void 0===i||null===(i=i[r])||void 0===i||delete i[a],null===s||void 0===s||null===(n=s.domainsById)||void 0===n||null===(n=n[a])||void 0===n||null===(n=n.sources)||void 0===n||null===(n=n[r])||void 0===n||delete n[a]}async waitForDomainsToBeReady(){const{syncManager:e}=this.moduleContext;let t=0;for(;e.getGroupMembers(this.groupId).some(e=>"init"===e.syncStatus);)EJ("ChartSync.waitForDomainsToBeReady() - waiting for all domains to be calculated",this.groupId),await this.domainSync.waitForCompletion(),t++;t>0&&EJ("ChartSync.waitForDomainsToBeReady() - waited for",t,"iterations"),this.domainSync.notify()}prepareZoomUpdate(){const{zoomManager:e}=this.moduleContext,t=e.getZoom();return"x"===this.axes?null===t||void 0===t||delete t.y:"y"===this.axes&&(null===t||void 0===t||delete t.x),bJ(t)}onEnabledChange(){const{syncManager:e,highlightManager:t}=this.moduleContext;this.enabled?(e.subscribe(this.groupId),t.unhighlightDelay=0):(e.unsubscribe(this.groupId),t.unhighlightDelay=100),this.updateSiblings(),this.onNodeInteractionChange(),this.onZoomChange()}onGroupIdChange(e,t){if(!this.enabled||e===t)return;const{syncManager:i}=this.moduleContext;i.unsubscribe(t),i.subscribe(e),this.updateSiblings(t),this.updateSiblings(e)}onAxesChange(){if(!this.enabled)return;const{syncManager:e}=this.moduleContext;this.updateChart(e.getChart())}onNodeInteractionChange(){var e;this.enabled&&this.nodeInteraction?this.enabledNodeInteractionSync():null===(e=this.disableNodeInteractionSync)||void 0===e||e.call(this)}onZoomChange(){var e;this.enabled&&this.zoom?this.enabledZoomSync():null===(e=this.disableZoomSync)||void 0===e||e.call(this)}destroy(){var e;const{syncManager:t}=this.moduleContext;t.unsubscribe(this.groupId),this.updateSiblings(),null===(e=this.disableZoomSync)||void 0===e||e.call(this)}};FJ.className="Sync",kV([ru,og(e=>e.onEnabledChange())],FJ.prototype,"enabled",2),kV([ru,og((e,t,i)=>e.onGroupIdChange(t,i))],FJ.prototype,"groupId",2),kV([ru,og(e=>e.onAxesChange())],FJ.prototype,"axes",2),kV([ru,og(e=>e.onNodeInteractionChange())],FJ.prototype,"nodeInteraction",2),kV([ru,og(e=>e.onZoomChange())],FJ.prototype,"zoom",2),kV([ru,og(e=>e.onAxesChange())],FJ.prototype,"domainMode",2);var zJ={type:"plugin",name:"sync",chartType:"cartesian",enterprise:!0,version:GC,options:{enabled:Cd,groupId:Ad,axes:Gd("x","y","xy"),nodeInteraction:Cd,zoom:Cd},themeTemplate:{enabled:!1},create:e=>new FJ(e)},BJ="#2196f3",VJ=class extends uE.Rect{constructor(){super(),this.fill=BJ,this.fillOpacity=.2,this.zIndex=bp.ZOOM_SELECTION}updateValid(){this.fill=BJ}updateInvalid(){this.fill="#8a8a8a"}};VJ.className="ZoomRect";var GJ=class extends kh{constructor(e){super(),this.onChange=e,this.enabled=!1,this.padding=0}};kV([ru,ng({changeValue(e){this.onChange({enabled:e,padding:this.padding})}})],GJ.prototype,"enabled",2),kV([ru,ng({changeValue(e){this.onChange({enabled:this.enabled,padding:e})}})],GJ.prototype,"padding",2);var HJ=class{constructor(e,t,i,n,o){this.properties=e,this.zoomManager=t,this.deps=i,this.manuallyAdjusted=!1,o.register(n.on("zoom:save-memento",e=>this.onSaveMemento(e)),n.on("zoom:load-memento",e=>this.onLoadMemento(e)),n.on("zoom:change-request",e=>this.onChangeRequest(e)))}get enabled(){return this.deps.enabled&&this.properties.enabled&&!this.manuallyAdjusted}onManualAdjustment(e){e===_u.Y&&(this.manuallyAdjusted=!0)}onChange(e){var t;e.enabled&&this.zoomManager.updateChanges({source:"chart-update",sourceDetail:"internal-autoScaling",changes:null!==(t=this.autoScaleYZoom())&&void 0!==t?t:{},isReset:!1})}onChangeRequest(e){if(e.isReset)for(const i of e.changedAxes){var t;(null===(t=e.state[i])||void 0===t?void 0:t.direction)===_u.Y&&(this.manuallyAdjusted=!1)}if(this.enabled){const t=this.autoScaleYZoom(e.state);t&&e.constrainChanges(t)}}onSaveMemento(e){e.memento.autoScaledAxes=this.enabled?[]:["y"]}onLoadMemento(e){const{zoom:t,memento:i,navigatorModule:n,zoomModule:o}=e;if(!n||o){var s;let e=null===i||void 0===i||null===(s=i.autoScaledAxes)||void 0===s?void 0:s.includes("y");var r;if(null!==i&&void 0!==i&&i.rangeY)null!==e&&void 0!==e||(e=!1),t.y=null!==(r=this.zoomManager.rangeToRatioDirection(_u.Y,i.rangeY))&&void 0!==r?r:{min:0,max:1};else if(null!==i&&void 0!==i&&i.ratioY){var a,l;null!==e&&void 0!==e||(e=!1),t.y={min:null!==(a=i.ratioY.start)&&void 0!==a?a:0,max:null!==(l=i.ratioY.end)&&void 0!==l?l:1}}else{null!==e&&void 0!==e||(e=!0);const i=e?this.getAutoScaleYZoom(t.x):void 0;t.y=null!==i&&void 0!==i?i:{min:0,max:1}}void 0!=e&&(this.manuallyAdjusted=!e)}}getAutoScaleYZoom(e){if(!this.enabled)return;const{padding:t}=this.properties;let i;return i=this.deps.enableIndependentAxes?this.primaryAxisZoom(_u.Y,e,{padding:t}):this.combinedAxisZoom(_u.Y,e,{padding:t}),0===e.min&&1===e.max?null==i?void 0:{min:0,max:1}:i}autoScaleYZoom(e){const t=this.zoomManager.getZoom();if(t&&e){const n=this.zoomManager.getAxisZooms();for(const o of[_u.X,_u.Y])for(const s of vu(e)){var i;if((null===(i=n[s])||void 0===i?void 0:i.direction)===o){t[o]=e[s];break}}}if(null==(null===t||void 0===t?void 0:t.x))return;const n=this.getAutoScaleYZoom(t.x);return null==n||yu(t.y,n)?void 0:this.zoomManager.toCoreZoomState({x:t.x,y:n})}zoomBounds(e,t,i,n){const o=e.scale,s=o.range;o.range=[0,1];const r=t.scale,a=r.range;r.range=[0,1];let l=1,d=!1,c=0,u=!1;for(const g of t.boundSeries){if(!g.visible)continue;const{connectsToYAxis:e}=g,t=g.getRange(_u.Y,[i.min,i.max]);for(const i of t){const t=r.convert(i);Number.isFinite(t)&&(t<l&&(l=t,d=!e||i<0),t>c&&(c=t,u=!e||i>0))}}if(ol(t.min)&&(l=0),ol(t.max)&&(c=1),o.range=s,r.range=a,l>=c)return;const h=(d?n:0)+(u?n:0),p=Math.min((c-l)*(1+h),1);if(!(p<=0)){if(d&&u){const e=(c+l)/2;l=e-p/2,c=e+p/2}else!d&&u?c=l+p:d&&!u&&(l=c-p);return l<0?(c+=-l,l=0):c>1&&(l-=c-1,c=1),{min:l,max:c}}}primaryAxisZoom(e,t){let{padding:i=0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e===_u.X?_u.Y:_u.X,o=this.zoomManager.getPrimaryAxis(n),s=this.zoomManager.getPrimaryAxis(e);if(null!=o&&null!=s)return this.zoomBounds(o,s,t,i)}combinedAxisZoom(e,t){let{padding:i=0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=this.zoomManager.getAxes(),o=e===_u.X?_u.Y:_u.X,s=new Map;for(const d of n)if(d.direction===o)for(const e of d.boundSeries)s.set(e,d);let r=1,a=0;for(const d of n)if(d.direction===e)for(const e of d.boundSeries){const n=s.get(e);if(null==n)continue;const o=this.zoomBounds(n,d,t,i);if(null==o)return;r=Math.min(r,o.min),a=Math.max(a,o.max)}const l=1e-6;if(r<l&&(r=0),a>.999999&&(a=1),!(r>a))return{min:r,max:a}}},jJ=class{update(e,t,i,n,o,s){var r;return null!==(r=this.oldZoom)&&void 0!==r||(this.oldZoom=bJ(t===_u.X?p(p({},o),{},{x:s}):p(p({},o),{},{y:s}))),this.updateCoords(e.offsetX,e.offsetY),this.updateZoom(t,i,n)}stop(){this.coords=void 0,this.oldZoom=void 0}updateCoords(e,t){this.coords?(this.coords.x2=e,this.coords.y2=t):this.coords={x1:e,y1:t,x2:e,y2:t}}updateZoom(e,t,i){const{coords:n,oldZoom:o}=this;let s=bJ(o);if(!n||!o)return e===_u.X?s.x:s.y;const r=xJ(i,n.x1,n.y1),a=xJ(i,n.x2,n.y2);if(e===_u.X){const e=(a.x-r.x)*gJ(o);return s.x.max+=e,s.x=MJ(s.x,o.x,t,r.x),s=kJ(s),s.x}const l=(a.y-r.y)*mJ(o);return s.y.max-=l,s.y=MJ(s.y,o.y,t,r.y),s=kJ(s),s.y}},{userInteraction:WJ}=uE,_J=class{constructor(e,t,i,n,o,s,r){this.eventsHub=e,this.contextMenuRegistry=t,this.zoomManager=i,this.getModuleProperties=n,this.getRect=o,this.updateZoom=s,this.isZoomValid=r}registerActions(e){const{contextMenuRegistry:t}=this,i=e?"show":"hide";if(t.toggle("zoom-to-cursor",i),t.toggle("pan-to-cursor",i),t.toggle("reset-zoom",i),!e)return;t.builtins.items["zoom-to-cursor"].action=this.onZoomToHere.bind(this),t.builtins.items["pan-to-cursor"].action=this.onPanToHere.bind(this),t.builtins.items["reset-zoom"].action=this.onResetZoom.bind(this);const n=e=>{const t=this.getRect();if(!t)return!0;const i=xJ(t,e.x,e.y);return null!=this.iterateFindNextZoomAtPoint(i)},o=()=>!vJ(bJ(this.zoomManager.getZoom()),{x:{min:0,max:1},y:{min:0,max:1}}),s=this.eventsHub.on("context-menu:setup",e=>{t.builtins.items["zoom-to-cursor"].enabled=n(e),t.builtins.items["pan-to-cursor"].enabled=o(),t.builtins.items["reset-zoom"].enabled=IJ(this.zoomManager)});return()=>{s(),t.toggle("zoom-to-cursor","hide"),t.toggle("pan-to-cursor","hide"),t.toggle("reset-zoom","hide")}}computeOrigin(e){const t=this.getRect(),{enabled:i}=this.getModuleProperties();if(!i||!t||null===e||void 0===e||!e.target||!(e instanceof MouseEvent))return;return xJ({x:0,y:0,width:t.width,height:t.height},e.offsetX,e.offsetY)}onZoomToHere(e){let{event:t}=e;const i=this.computeOrigin(t);if(!i)return;const n=this.iterateFindNextZoomAtPoint(i);null!=n&&this.updateZoom(WJ("contextmenu-zoom-to-cursor"),n)}onPanToHere(e){let{event:t}=e;const i=this.computeOrigin(t);if(!i)return;const n=bJ(this.zoomManager.getZoom()),o=gJ(n),s=mJ(n),r=i.x*o,a=i.y*s,l=.5;let d={x:{min:i.x-l,max:i.x+l},y:{min:i.y-l,max:i.y+l}};d=wJ(d,o,s),d=CJ(d,n.x.min-i.x+r,n.y.min-i.y+a),this.updateZoom(WJ("contextmenu-pan-to-cursor"),kJ(d))}onResetZoom(e){this.zoomManager.resetZoom(WJ("contextmenu-reset"))}iterateFindNextZoomAtPoint(e){const{scrollingStep:t}=this.getModuleProperties();for(let i=t;i<=1-t;i+=t){const t=this.getNextZoomAtPoint(e,i);if(this.isZoomValid(t))return t}}getNextZoomAtPoint(e,t){const{isScalingX:i,isScalingY:n}=this.getModuleProperties(),o=bJ(this.zoomManager.getZoom()),s=e.x*gJ(o),r=e.y*mJ(o),a=.5;let l={x:{min:e.x-a,max:e.x+a},y:{min:e.y-a,max:e.y+a}};return l=wJ(l,i?gJ(o)*t:1,n?mJ(o)*t:1),l=CJ(l,o.x.min-e.x+s,o.y.min-e.y+r),kJ(l)}},KJ=class{constructor(e){this.axesHandlers=e,this.axes=[],this.overlappingAxisIds=new Set}destroy(){for(const e of this.axes)e.div.destroy()}update(e,t,i,n,o){this.seriesRect=o;const s=!e||!t&&!i;for(const u of this.axes)u.div.setHidden(s);if(s)return;const{X:r,Y:a}=_u,l=[...n.axisManager.getAxisContext(r),...n.axisManager.getAxisContext(a)],{removed:d,added:c}=this.diffAxisIds(l);d.length>0&&(this.axes=this.axes.filter(e=>!d.includes(e.axisId)||(e.div.destroy(),this.overlappingAxisIds.delete(e.axisId),this.hoveredAxisId===e.axisId&&(this.hoveredAxisId=void 0),this.activeAxisId===e.axisId&&(this.activeAxisId=void 0),!1)));for(const u of c){const{axisId:e,direction:t}=u;this.axes.push(this.initAxis(n,e,this.axesHandlers,t))}for(const u of this.axes){const e=l.find(e=>e.axisId===u.axisId).getCanvasBounds();u.div.setHidden(lg(e)),void 0==e?u.bounds=void 0:(u.div.setBounds(e),u.bounds=new uE.BBox(e.x,e.y,e.width,e.height))}this.updateOverlappingAxisPointerEvents(t,i)}setAxisCursor(e){this.cursor=e;for(const t of this.axes)t.div.setCursor(this.getCursor(t.direction))}toggleAxisDraggingCursor(e,t){for(const i of this.axes)i.direction===e&&i.div.setCursor(t?this.getCursor(e):void 0)}updateOverlappingAxisPointerEvents(e,t){this.overlappingAxisIds.clear();const i=(e||t)&&this.seriesRect;for(const o of this.axes){var n;if(!i){o.div.setPointerEvents(void 0);continue}Boolean(null===(n=o.bounds)||void 0===n?void 0:n.collidesBBox(this.seriesRect))?(this.overlappingAxisIds.add(o.axisId),o.div.setPointerEvents("none")):o.div.setPointerEvents(void 0)}this.cleanupAxisState()}cleanupAxisState(){this.hoveredAxisId&&!this.overlappingAxisIds.has(this.hoveredAxisId)&&(this.hoveredAxisId=void 0),this.activeAxisId&&!this.overlappingAxisIds.has(this.activeAxisId)&&(this.activeAxisId=void 0)}pickAxisAtPoint(e,t){for(const n of this.axes){var i;if(this.overlappingAxisIds.has(n.axisId)&&(null!==(i=n.bounds)&&void 0!==i&&i.containsPoint(e,t)))return{axisId:n.axisId,direction:n.direction}}}setHoveredAxis(e){this.overlappingAxisIds.has(e)&&(this.hoveredAxisId=e)}clearHoveredAxis(){this.activeAxisId||(this.hoveredAxisId=void 0)}beginDelegatedAxisDrag(e){return!!this.overlappingAxisIds.has(e)&&(this.activeAxisId=e,this.hoveredAxisId=void 0,!0)}endDelegatedAxisDrag(e){this.activeAxisId===e&&(this.activeAxisId=void 0),this.hoveredAxisId=void 0}hasOverlappingAxes(){return this.overlappingAxisIds.size>0}getHoveredAxis(){if(!this.hoveredAxisId)return;const e=this.axes.find(e=>e.axisId===this.hoveredAxisId);return e?{axisId:e.axisId,direction:e.direction}:void 0}getCursor(e){return this.cursor?this.cursor:e===_u.X?"ew-resize":"ns-resize"}initAxis(e,t,i,n){const o=e.proxyInteractionService.createProxyElement({type:"region",domManagerId:t,where:"afterend"});return o.setCursor(this.getCursor(n)),o.addListener("drag-start",e=>{"touch"===e.device&&e.sourceEvent.preventDefault(),this.activeAxisId=t,i.onAxisDragStart(n)}),o.addListener("drag-move",e=>i.onAxisDragMove(t,n,e)),o.addListener("drag-end",()=>{this.activeAxisId=void 0,this.hoveredAxisId=void 0,i.onAxisDragEnd()}),o.addListener("dblclick",()=>i.onAxisDoubleClick(t,n)),o.addListener("wheel",e=>i.onAxisWheel(n,e)),{axisId:t,div:o,direction:n}}diffAxisIds(e){const t=this.axes.map(e=>e.axisId),i=e.map(e=>e.axisId);return{removed:t.filter(e=>!i.includes(e)),added:e.filter(e=>!t.includes(e.axisId))}}},{userInteraction:UJ}=uE;function YJ(e,t,i){const{domainMin:n,domainMax:o}=t,s=o-n;return{axisId:e,visibleMin:n+s*i.min,visibleMax:n+s*i.max}}function $J(e,t){const{domainMin:i,domainMax:n}=e,{visibleMin:o,visibleMax:s}=t,r=n-i;return{direction:"x",min:za(0,(o-i)/r,1),max:za(0,(s-i)/r,1)}}var ZJ=class extends kh{constructor(){super(...arguments),this.strategy="preserveDomain",this.stickToEnd=!1}};kV([ru],ZJ.prototype,"strategy",2),kV([ru],ZJ.prototype,"stickToEnd",2);var XJ=class{constructor(e,t,i,n){this.onConstrainChangesCallback=e,this.properties=t,this.ctx=i;const o=()=>{i.eventsHub.off("layout:complete",o),n.register(i.eventsHub.on("data:load",e=>this.onDataLoad(e)),i.eventsHub.on("data:update",e=>this.onDataUpdate(e)))};n.register(i.eventsHub.on("layout:complete",o),i.eventsHub.on("zoom:change-request",e=>this.onZoomChangeRequest(e)))}destroy(){}onDataLoad(e){this.performUpdateStrategy()}onDataUpdate(e){this.performUpdateStrategy()}onZoomChangeRequest(e){const t=this.popDesiredChanges();t&&(e.constrainChanges(t),this.onConstrainChangesCallback(e))}computeDomainMinMax(e){const t=this.ctx.axisManager.getAxisIdContext(e);if(null===t||void 0===t||!t.continuous||0===t.scale.domain.length)return;const[i,n]=t.scale.getDomainMinMax();return"number"===typeof i&&"number"===typeof n?{domainMin:i,domainMax:n}:i instanceof Date&&n instanceof Date?{domainMin:i.getTime(),domainMax:n.getTime()}:void jr.error("Unexpected range types: start (".concat(typeof i,"), end (").concat(typeof n,")"))}popDesiredChanges(){const{desiredChanges:e}=this;if(e)switch(this.desiredChanges=void 0,e.type){case"domain":{const t={};for(const i of e.domains){const e=this.computeDomainMinMax(i.axisId);e&&(t[i.axisId]=$J(e,i))}return t}case"stickToEnd":{const{axisId:t,difference:i}=e,n=this.computeDomainMinMax(t);if(n){const e={axisId:t,visibleMin:n.domainMax-i,visibleMax:n.domainMax};return{[t]:$J(n,e)}}break}default:return(e=>e)(e)}}performUpdateStrategy(){const e=bJ(this.ctx.zoomManager.getZoom());if(!function(e){return 0===e.x.min&&1===e.x.max&&0===e.y.min&&1===e.y.max}(e)){if(function(e,t){return e.stickToEnd&&1===t.x.max}(this.properties,e))return this.performStickToEnd();switch(this.properties.strategy){case"reset":return this.ctx.zoomManager.resetZoom(UJ("onDataChange-reset"));case"preserveRatios":return;case"preserveDomain":return this.performPreserveDomain();default:return(e=>e)(this.properties.strategy)}}}performPreserveDomain(){this.desiredChanges={type:"domain",domains:[]};const e=this.ctx.zoomManager.getAxes().filter(e=>e.direction===_u.X);for(const{id:t}of e){const e=this.computeDomainMinMax(t);if(e){const i=YJ(t,e,this.ctx.zoomManager.getAxisZoom(t));this.desiredChanges.domains.push(i)}}}performStickToEnd(){const e=this.ctx.zoomManager.getPrimaryAxisId(_u.X);if(!e)return;const t=this.computeDomainMinMax(e);if(!t)return;const i=this.ctx.zoomManager.getAxisZoom(e);if(!i)return;const{visibleMin:n,visibleMax:o}=YJ(e,t,i),s=o-n;this.desiredChanges={type:"stickToEnd",axisId:e,difference:s}}},qJ={off:1,short:.01,long:.002},QJ=class{constructor(){this.deceleration=1,this.zoomCoordsHistoryIndex=0,this.coordsHistory=[]}get decelerationValue(){var e;const{deceleration:t}=this;return Math.max("number"===typeof t?t:null!==(e=qJ[t])&&void 0!==e?e:1,1e-4)}addListener(e,t){return this.onUpdate=t,()=>{this.onUpdate=void 0}}stopInteractions(){null!=this.inertiaHandle&&(cancelAnimationFrame(this.inertiaHandle),this.inertiaHandle=void 0)}update(e){var t,i;this.updateCoords(e.currentX,e.currentY);const{x1:n=0,y1:o=0,x2:s=0,y2:r=0}=null!==(t=this.coords)&&void 0!==t?t:{};null===(i=this.onUpdate)||void 0===i||i.call(this,{type:"update",deltaX:this.isPanningX()?n-s:0,deltaY:this.isPanningY()?o-r:0})}start(e){this.direction=e,this.coordsMonitorTimeout=setInterval(this.recordCurrentZoomCoords.bind(this),16)}stop(){const{coordsHistory:e}=this;let t=0,i=0,n=0;if(e.length>0){const o=this.zoomCoordsHistoryIndex%16;let s=o-1;s<0&&(s=e.length-1);let r=o;r>=e.length&&(r=0);const a=e[s],l=e[r];t=this.isPanningX()?a.x-l.x:0,i=this.isPanningY()?a.y-l.y:0,n=a.t-l.t}if(this.coords=void 0,this.direction=void 0,clearInterval(this.coordsMonitorTimeout),this.coordsMonitorTimeout=void 0,this.zoomCoordsHistoryIndex=0,this.coordsHistory.length=0,n>0&&this.decelerationValue<1){const e=t/n,o=i/n,s=Math.hypot(e,o),r=Math.atan2(o,e),a=performance.now();this.inertiaHandle=Pr().requestAnimationFrame(e=>{this.animateInertia(e,e,a,s,r)})}}recordCurrentZoomCoords(){const{coords:e,coordsHistory:t,zoomCoordsHistoryIndex:i}=this;if(!e)return;const{x2:n,y2:o}=e,s=Date.now();t[i%16]={x:n,y:o,t:s},this.zoomCoordsHistoryIndex+=1}animateInertia(e,t,i,n,o){var s;const r=1-this.decelerationValue,a=-n/Math.log(r),l=n*(r**(t-i)-1)/Math.log(r),d=n*(r**(e-i)-1)/Math.log(r);null===(s=this.onUpdate)||void 0===s||s.call(this,{type:"update",deltaX:this.isPanningX()?-Math.cos(o)*(d-l):0,deltaY:this.isPanningY()?-Math.sin(o)*(d-l):0}),d>=a-1||(this.inertiaHandle=requestAnimationFrame(t=>{this.animateInertia(t,e,i,n,o)}))}updateCoords(e,t){this.coords?this.coords={x1:this.coords.x2,y1:this.coords.y2,x2:e,y2:t}:this.coords={x1:e,y1:t,x2:e,y2:t}}isPanningX(){return null==this.direction||this.direction===_u.X}isPanningY(){return null==this.direction||this.direction===_u.Y}translateZooms(e,t,i,n){const o=xJ(e,e.x+Math.abs(i),e.y+e.height-Math.abs(n)),s=Math.sign(i)*o.x,r=-Math.sign(n)*o.y,a={};for(const[l,d]of fu(t)){if(null==d)continue;if(0===d.min&&1===d.max)continue;const{direction:e}=d;let t=bJ({[e]:d});t=kJ(CJ(t,s*gJ(t),r*mJ(t)));const{min:i,max:n}=t[e];a[l]={direction:e,min:i,max:n}}return a}},JJ=class{update(e,t,i,n){const o=e.deltaX*t*200;return this.translateZooms(i,n,o)}translateZooms(e,t,i){const n={},o=xJ(e,e.x+Math.abs(i),0),s=i<0?-o.x:o.x;for(const[r,a]of fu(t)){if((null===a||void 0===a?void 0:a.direction)!==_u.X)continue;const{direction:e,min:t,max:i}=a;let o=bJ({x:{min:t,max:i}});o=kJ(CJ(o,s*gJ(o),0)),n[r]={direction:e,min:o.x.min,max:o.x.max}}return n}},e0=class{updateAxes(e,t,i,n){var o,s;const r=e.sourceEvent,a={},{anchorPointX:l,anchorPointY:d,isScalingX:c,isScalingY:u,scrollingStep:h}=t,p=xJ(i,null!==(o=r.offsetX)&&void 0!==o?o:r.clientX,null!==(s=r.offsetY)&&void 0!==s?s:r.clientY);for(const[g,m]of fu(n)){if(null==m)continue;const{direction:t,min:i,max:n}=m;let o={min:i,max:n};const s=h*e.deltaY*(n-i);if(t===_u.X&&c)o.max+=s,o=MJ(o,m,l,p.x);else{if(t!==_u.Y||!u)continue;o.max+=s,o=MJ(o,m,d,p.y)}if(o.max<o.min)continue;const r=DJ(o);a[g]={direction:t,min:r.min,max:r.max}}return a}update(e,t,i,n){const{anchorPointX:o,anchorPointY:s,isScalingX:r,isScalingY:a,scrollingStep:l}=t,d=xJ(i,e.offsetX+i.x,e.offsetY+i.y),c=e.deltaY;let u=bJ(n);if(u.x.max+=r?l*c*gJ(n):0,u.y.max+=a?l*c*mJ(n):0,!(u.x.max<u.x.min||u.y.max<u.y.min))return r&&(u.x=MJ(u.x,n.x,o,d.x)),a&&(u.y=MJ(u.y,n.y,s,d.y)),u=kJ(u),u}updateDelta(e,t,i){const{anchorPointX:n,anchorPointY:o,isScalingX:s,isScalingY:r,scrollingStep:a}=t;let l=bJ(i);return l.x.max+=s?a*-e*gJ(i):0,l.y.max+=r?a*-e*mJ(i):0,s&&(l.x=MJ(l.x,i.x,n)),r&&(l.y=MJ(l.y,i.y,o)),l=kJ(l),l}},t0=class{constructor(e,t,i){this.rect=e,this.getZoom=t,this.isZoomValid=i,this.rect.visible=!1}update(e,t,i){var n,o;const s=e.currentX+(null!==(n=null===i||void 0===i?void 0:i.x)&&void 0!==n?n:0),r=e.currentY+(null!==(o=null===i||void 0===i?void 0:i.y)&&void 0!==o?o:0);this.rect.visible=!0,this.updateCoords(s,r,t,i),this.updateRect(i)}stop(e,t,i){let n=bJ();if(!e||!t)return n;this.coords&&(n=this.createZoomFromCoords(t,i));return n=kJ(function(e,t,i){return{x:{min:e.x.min*t,max:e.x.max*t},y:{min:e.y.min*i,max:e.y.max*i}}}(n,t.width/e.width,t.height/e.height)),this.reset(),this.isZoomValid(n)?n:void 0}reset(){this.coords=void 0,this.rect.visible=!1}didUpdate(){return this.rect.visible&&this.rect.width>0&&this.rect.height>0}updateCoords(e,t,i,n){if(!this.coords)return void(this.coords={x1:e,y1:t,x2:e,y2:t});const{coords:o}=this;if(o.x2=e,o.y2=t,!n)return;const{isScalingX:s,isScalingY:r,keepAspectRatio:a}=i,l=this.getNormalisedDimensions();if(a&&s&&r){const e=n.width/n.height;o.y2<o.y1?o.y2=Math.min(o.y1-l.width/e,o.y1):o.y2=Math.max(o.y1+l.width/e,o.y1)}s||(o.x1=n.x,o.x2=n.x+n.width),r||(o.y1=n.y,o.y2=n.y+n.height)}updateRect(e){if(!e)return;const{rect:t}=this,i=this.getNormalisedDimensions(),{width:n,height:o}=i;let{x:s,y:r}=i;s=Math.max(s,e.x),s-=Math.max(0,s+n-(e.x+e.width)),r=Math.max(r,e.y),r-=Math.max(0,r+o-(e.y+e.height)),t.x=s,t.y=r,t.width=n,t.height=o;const a=this.createZoomFromCoords(e,this.getZoom());this.isZoomValid(a)?t.updateValid():t.updateInvalid()}createZoomFromCoords(e,t){const i=bJ(t),n=this.getNormalisedDimensions(),o=xJ(e,n.x,n.y+n.height);let s=SJ(i,n.width/e.width,n.height/e.height);return s=CJ(s,o.x*gJ(i),o.y*mJ(i)),s=kJ(s),s}getNormalisedDimensions(){var e;const{x1:t=0,y1:i=0,x2:n=0,y2:o=0}=null!==(e=this.coords)&&void 0!==e?e:{};return{x:Math.min(t,n),y:Math.min(i,o),width:t<=n?n-t:t-n,height:i<=o?o-i:i-o}}},{userInteraction:i0,NativeWidget:n0,Toolbar:o0}=uE,s0=class extends Ay{};kV([ru],s0.prototype,"value",2),kV([ru],s0.prototype,"section",2);var r0=class extends kh{constructor(e,t,i,n,o,s){super(),this.ctx=e,this.getModuleProperties=t,this.updateZoom=i,this.updateAxisZoom=n,this.resetZoom=o,this.isZoomValid=s,this.enabled=!1,this.buttons=new Dh(s0),this.visible="hover",this.verticalSpacing=10,this.detectionRange=38,this.cleanup=new Ta,this.toggleButtonsDebounced=Rl(this.toggleButtons.bind(this),300,{leading:!0,trailing:!0}),this.container=new n0(zr("div")),this.container.addClass("ag-charts-zoom-buttons"),e.domManager.addChild("canvas-overlay","zoom-buttons",this.container.getElement()),this.toolbar=new o0(e,"ariaLabelZoomToolbar","horizontal"),this.container.addChild(this.toolbar),this.toolbar.getElement().style.transform="translateY(54px)",this.toolbar.setHidden(!this.enabled),this.toggleVisibility("always"===this.visible),this.cleanup.register(this.toolbar.addToolbarListener("button-pressed",this.onButtonPress.bind(this)),this.toolbar.addToolbarListener("button-focused",this.onButtonFocus.bind(this)),e.widgets.containerWidget.addListener("mousemove",this.onHover.bind(this)),e.widgets.containerWidget.addListener("mouseleave",this.onLeave.bind(this)),e.eventsHub.on("layout:complete",this.onLayoutComplete.bind(this)),this.teardown.bind(this))}destroy(){this.cleanup.flush()}toggleVisibleZoomed(e){"zoomed"===this.visible&&this.toggleVisibility(!e)}teardown(){this.ctx.domManager.removeChild("canvas-overlay","zoom-buttons"),this.container.destroy()}onLayoutComplete(e){if(!this.enabled)return;const{buttons:t,container:i}=this,{rect:n}=e.series;for(const s of t)if(null==s.tooltip&&null==s.label){const e={"pan-end":"toolbarZoomPanEnd","pan-left":"toolbarZoomPanLeft","pan-right":"toolbarZoomPanRight","pan-start":"toolbarZoomPanStart","zoom-in":"toolbarZoomZoomIn","zoom-out":"toolbarZoomZoomOut",reset:"toolbarZoomReset"};s.tooltip=e[s.value]}this.toolbar.updateButtons(t),this.toggleButtonsDebounced();const o=i.getBounds().height;i.setBounds({y:n.y+n.height-o})}onHover(e){if(!this.enabled||"hover"!==this.visible||this.toolbar.isHidden())return;const{container:t,detectionRange:i,ctx:{scene:n}}=this,{currentY:o,sourceEvent:{target:s}}=e,r=t.getElement(),a=o>r.offsetTop-i&&o<n.canvas.element.offsetHeight||s===r;this.toggleVisibility(a)}onLeave(){"hover"===this.visible&&this.toggleVisibility(!1)}toggleVisibility(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{container:i,toolbar:n,verticalSpacing:o}=this;n.toggleClass("ag-charts-zoom-buttons__toolbar--hidden",!e);const s=n.getElement();s.style.transitionDuration=t?"0s":"",s.style.transform=e?"translateY(0)":"translateY(".concat(i.getBounds().height+o,"px)")}toggleButtons(){const e=bJ(this.ctx.zoomManager.getZoom());if(!this.previousZoom||!vJ(this.previousZoom,e)){this.previousZoom=e;for(const[t,i]of this.buttons.entries()){let n=!0;switch(null===i||void 0===i?void 0:i.value){case"pan-start":case"pan-left":n=e.x.min>0;break;case"pan-end":case"pan-right":n=e.x.max<1;break;case"zoom-out":n=!vJ(e,pJ());break;case"zoom-in":n=this.isZoomValid(this.getNextZoomStateUnified("zoom-in",e,this.getModuleProperties()));break;case"reset":n=IJ(this.ctx.zoomManager)}this.toolbar.toggleButtonEnabledByIndex(t,n)}}}onButtonPress(e){let{button:t}=e;if(!this.enabled||this.toolbar.isHidden())return;const i=this.getModuleProperties();if(i.independentAxes&&"reset"!==t.value){const e=this.ctx.zoomManager.getAxisZooms();for(const[n,o]of fu(e)){if(null==o)continue;const{direction:e,min:s,max:r}=o;this.onButtonPressAxis(t,i,n,e,{min:s,max:r})}}else this.onButtonPressUnified(t,i)}onButtonFocus(e){this.toggleVisibility(!0,!0)}onButtonPressAxis(e,t,i,n,o){const{isScalingX:s,isScalingY:r,scrollingStep:a}=t;let l=p({},o);const d=o.max-o.min;switch(e.value){case"pan-start":l.max=d,l.min=0;break;case"pan-end":l.min=l.max-d,l.max=1;break;case"pan-left":l.min-=d*a,l.max-=d*a;break;case"pan-right":l.min+=d*a,l.max+=d*a;break;case"zoom-in":case"zoom-out":{const i=n===_u.X,d=i&&s||!i&&r;let c="zoom-in"===e.value?1-a:1+a;d||(c=1);const u=i?this.getAnchorPointX(t):this.getAnchorPointY(t);l.max=l.min+(l.max-l.min)*c,l=MJ(l,o,u);break}}this.updateAxisZoom(i0("zoom-button-".concat(e.value)),i,n,DJ(l))}onButtonPressUnified(e,t){const{scrollingStep:i}=t,n=bJ(this.ctx.zoomManager.getZoom());let o=bJ(n);switch(e.value){case"reset":return void this.resetZoom("zoom-button-reset");case"pan-start":o.x.max=gJ(o),o.x.min=0;break;case"pan-end":o.x.min=1-gJ(o),o.x.max=1;break;case"pan-left":o=CJ(o,-gJ(o)*i,0);break;case"pan-right":o=CJ(o,gJ(o)*i,0);break;case"zoom-in":case"zoom-out":o=this.getNextZoomStateUnified(e.value,n,t)}this.updateZoom(i0("zoom-button-".concat(e.value)),kJ(o))}getNextZoomStateUnified(e,t,i){const{isScalingX:n,isScalingY:o,scrollingStep:s}=i,r="zoom-in"===e?1-s:1+s,a=SJ(t,n?r:1,o?r:1);return a.x=MJ(a.x,t.x,this.getAnchorPointX(i)),a.y=MJ(a.y,t.y,this.getAnchorPointY(i)),a}getAnchorPointX(e){var t;const i=null!==(t=this.anchorPointX)&&void 0!==t?t:e.anchorPointX;return"pointer"===i?"end":i}getAnchorPointY(e){var t;const i=null!==(t=this.anchorPointY)&&void 0!==t?t:e.anchorPointY;return"pointer"===i?uJ:i}};kV([ru,ng({changeValue(e){var t;null===(t=this.toolbar)||void 0===t||t.setHidden(!e)}})],r0.prototype,"enabled",2),kV([ru],r0.prototype,"buttons",2),kV([ru,ng({changeValue(e,t){if(null==t)return;const i="always"===e,n="zoomed"===e&&null!=this.previousZoom&&!yJ(this.previousZoom);this.toggleVisibility(i||n)}})],r0.prototype,"visible",2),kV([ru],r0.prototype,"anchorPointX",2),kV([ru],r0.prototype,"anchorPointY",2);var a0=1e6;function l0(e,t,i,n){let{min:o,max:s}=e;return 0===n?0:a0*((t-i)/n*(s-o)+o)}function d0(e,t,i,n){0===t&&(t=30),0===n&&(n=30);return!(e+t<i-n||i+n<e-t)}var c0=class{constructor(){this.touchStart={origins:[{identifier:0,normalX:Number.NaN,normalY:Number.NaN},{identifier:0,normalX:Number.NaN,normalY:Number.NaN}]},this.initialZoom={x:{min:0,max:1},y:{min:0,max:1}},this.previous={a1:Number.NaN,a2:Number.NaN,b1:Number.NaN,b2:Number.NaN}}start(e,t,i){var n,o,s,r,a,l,d,c;if(2!==e.sourceEvent.targetTouches.length)return!1;e.sourceEvent.preventDefault();const u=Array.from(e.sourceEvent.targetTouches),{x:h,y:p,width:g,height:m}=t.getBoundingClientRect();this.initialZoom.x.min=null!==(n=null===(o=i.x)||void 0===o?void 0:o.min)&&void 0!==n?n:0,this.initialZoom.x.max=null!==(s=null===(r=i.x)||void 0===r?void 0:r.max)&&void 0!==s?s:1,this.initialZoom.y.min=null!==(a=null===(l=i.y)||void 0===l?void 0:l.min)&&void 0!==a?a:0,this.initialZoom.y.max=null!==(d=null===(c=i.y)||void 0===c?void 0:c.max)&&void 0!==d?d:1;for(const C of this.touchStart.origins)C.identifier=0;this.previous.a1=Number.NaN,this.previous.a2=Number.NaN,this.previous.b1=Number.NaN,this.previous.b2=Number.NaN;for(const C of[0,1]){const e=u[C].clientX,t=p+m-u[C].clientY;this.touchStart.origins[C].identifier=u[C].identifier,this.touchStart.origins[C].normalX=l0(this.initialZoom.x,e,h,g),this.touchStart.origins[C].normalY=l0(this.initialZoom.y,t,p,m)}const[f,v]=u,[y,b]=this.touchStart.origins,x=d0(f.clientX,f.radiusX,v.clientX,v.radiusX);return d0(f.clientY,f.radiusY,v.clientY,v.radiusY)&&(y.normalY=b.normalY=(y.normalY+b.normalY)/2),x&&(y.normalX=b.normalX=(y.normalX+b.normalX)/2),!0}update(e,t){e.sourceEvent.preventDefault();const i=Array.from(e.sourceEvent.targetTouches),{x:n,y:o,width:s,height:r}=t.getBoundingClientRect(),{origins:a}=this.touchStart,l=[0,1].map(e=>i.find(t=>t.identifier===a[e].identifier)),d=a[0].normalX,c=a[1].normalX,u=l[0].clientX,h=l[1].clientX,p=a[0].normalY,g=a[1].normalY,m=o+r-l[0].clientY,f=o+r-l[1].clientY;return this.twitchTolerantZoomPan4(d,c,u,h,p,g,m,f,n,o,s,r)}end(e){const t=Array.from(e.sourceEvent.targetTouches).map(e=>e.identifier);return!t.includes(this.touchStart.origins[0].identifier)||!t.includes(this.touchStart.origins[1].identifier)}twitchTolerantZoomPan4(e,t,i,n,o,s,r,a,l,d,c,u){const{initialZoom:h,previous:p}=this;return{x:u0(e,t,i,n,p,"a1","a2",l,c,h.x),y:u0(o,s,r,a,p,"b1","b2",d,u,h.y)}}};function u0(e,t,i,n,o,s,r,a,l,d){if(e==t){const t=(e-(l0(d,i,a,l)+l0(d,n,a,l))/2)/a0;return{min:d.min+t,max:d.max+t}}{const d=o[s],c=o[r];return Math.abs(i-d)+Math.abs(n-c)<=1?(i=d,n=c):(o[s]=i,o[r]=n),function(e,t,i,n,o,s){[e,t]=[Math.min(e,t),Math.max(e,t)],[i,n]=[Math.min(i,n),Math.max(i,n)];const r=a0*(n-o)/s,a=(i-o)/(n-o),l=(e-a*t)/(a0-a0*(i-o)/s+a*(r-a0));return{min:l,max:(t+(r-a0)*l)/r}}(e,t,i,n,a,l)}}var{userInteraction:h0,InteractionState:p0}=uE,g0=e=>ja(e,10),m0="zoom-cursor",f0="zoom-tooltip",v0=class extends Ra{constructor(e){super(),this.ctx=e,this.enabled=!1,this.enableAxisDragging=!0,this.enableAxisScrolling=!0,this.enableDoubleClickToReset=!0,this.enablePanning=!0,this.enableScrolling=!0,this.enableSelecting=!1,this.enableTwoFingerZoom=!0,this.panKey="alt",this.axes="x",this.scrollingStep=.1,this.keepAspectRatio=!1,this.minVisibleItems=2,this.anchorPointX="end",this.anchorPointY=uJ,this.autoScaling=new GJ(e=>{var t;null===(t=this.autoScaler)||void 0===t||t.onChange(e)}),this.axisDraggingMode="zoom",this.buttons=new r0(this.ctx,this.getModuleProperties.bind(this),this.updateZoom.bind(this),this.updateAxisZoom.bind(this),this.resetZoom.bind(this),this.isZoomValid.bind(this)),this.onDataChange=new ZJ,this.axisDragger=new jJ,this.panner=new QJ,this.scroller=new e0,this.scrollPanner=new JJ,this.twoFingers=new c0,this.deceleration="short",this.dragState=0,this.isState=e=>this.ctx.interactionManager.isState(e),this.destroyContextMenuActions=void 0,this.isFirstWheelEvent=!0,this.debouncedWheelReset=Rl(()=>{this.isFirstWheelEvent=!0,this.wasFirstWheelEventZoomCapped=void 0},100),this.previousZoomValid=!0,this.previousAxisZoomValid={[_u.X]:!0,[_u.Y]:!0},this.toggleAxisDraggingCursorsDebounced=Rl(this.toggleAxisDraggingCursors.bind(this),300,{leading:!0,trailing:!0}),this.autoScaler=new HJ(this.autoScaling,e.zoomManager,this,e.eventsHub,this.cleanup);const t=new VJ;this.selector=new t0(t,this.getZoom.bind(this),this.isZoomValid.bind(this)),this.contextMenu=new _J(e.eventsHub,e.contextMenuRegistry,e.zoomManager,this.getModuleProperties.bind(this),()=>this.paddedRect,this.updateZoom.bind(this),this.isZoomValid.bind(this));this.dataChangeHandler=new XJ(e=>{if(this.minVisibleItems>0){const t=e.stateAsDefinedZoom();e.constrainZoom(this.constrainZoom(t))}},this.onDataChange,this.ctx,this.cleanup),this.domProxy=new KJ({onAxisDragStart:e=>this.onAxisDragStart(e),onAxisDragMove:(e,t,i)=>this.onAxisDragMove(e,t,i),onAxisDragEnd:()=>this.onAxisDragEnd(),onAxisDoubleClick:e=>this.onAxisDoubleClick(e),onAxisWheel:(e,t)=>this.onAxisWheel(e,t)}),e.widgets.seriesDragInterpreter&&this.cleanup.register(e.widgets.seriesDragInterpreter.events.on("dblclick",e=>this.onSeriesAreaDoubleClick(e)),e.widgets.seriesDragInterpreter.events.on("drag-move",e=>this.onSeriesAreaDragMove(e)),e.widgets.seriesDragInterpreter.events.on("drag-start",e=>this.onSeriesAreaDragStart(e)),e.widgets.seriesDragInterpreter.events.on("drag-end",()=>this.onSeriesAreaDragEnd())),this.cleanup.register(e.scene.attachNode(t),e.eventsHub.on("series-area:hover",e=>this.onSeriesAreaHoverEvent(e)),e.eventsHub.on("series-area:click",e=>this.onSeriesAreaClickEvent(e)),e.eventsHub.on("series:keynav-zoom",e=>this.onNavZoom(e)),e.widgets.seriesWidget.addListener("wheel",e=>this.onWheel(e)),e.widgets.seriesWidget.addListener("touchstart",(e,t)=>this.onTouchStart(e,t)),e.widgets.seriesWidget.addListener("touchmove",(e,t)=>this.onTouchMove(e,t)),e.widgets.seriesWidget.addListener("touchend",e=>this.onTouchEnd(e)),e.widgets.seriesWidget.addListener("touchcancel",e=>this.onTouchEnd(e)),e.updateService.addListener("process-data",e=>this.onProcessData(e)),e.eventsHub.on("layout:complete",e=>this.onLayoutComplete(e)),e.eventsHub.on("zoom:change-request",e=>this.onZoomChangeRequested(e)),e.eventsHub.on("zoom:pan-start",e=>this.onZoomPanStart(e)),this.panner.addListener("update",e=>this.onPanUpdate(e)),()=>this.teardown())}teardown(){var e;this.ctx.zoomManager.setZoomModuleEnabled(!1),this.buttons.destroy(),null===(e=this.destroyContextMenuActions)||void 0===e||e.call(this),this.domProxy.destroy(),this.dataChangeHandler.destroy()}onEnabledChange(e){var t;(this.ctx.zoomManager.setZoomModuleEnabled(e),this.contextMenu)&&(null===(t=this.destroyContextMenuActions)||void 0===t||t.call(this),this.destroyContextMenuActions=this.contextMenu.registerActions(e))}isIgnoredTouch(e){return"touch"===(null===e||void 0===e?void 0:e.device)&&("drag"!==this.ctx.chartService.touch.dragAction||!this.enableSelecting&&(!this.enablePanning||yJ(this.getZoom())))}onSeriesAreaDoubleClick(e){const{enabled:t,enableDoubleClickToReset:i}=this;t&&i&&(null!==e&&void 0!==e&&e.preventZoomDblClick||!this.isState(p0.ZoomClickable)||this.resetZoom("zoom-seriesarea-dblclick"))}onSeriesAreaHoverEvent(e){if(!this.shouldHandleAxisHover(e))return void this.clearHoveredAxis();const t=this.domProxy.pickAxisAtPoint(e.x,e.y);t?(this.domProxy.setHoveredAxis(t.axisId),this.ctx.domManager.updateCursor(m0,this.domProxy.getCursor(t.direction))):this.clearHoveredAxis()}onSeriesAreaClickEvent(e){var t;if(!this.shouldHandleAxisClick(e))return;const i=this.domProxy.pickAxisAtPoint(e.x,e.y);i&&"dblclick"===(null===(t=e.sourceEvent)||void 0===t?void 0:t.type)&&this.onAxisDoubleClick(i.axisId)}shouldHandleAxisHover(e){const{enabled:t,enableAxisDragging:i,enableAxisScrolling:n,dragState:o}=this;return t&&(i||n)&&!e.consumed&&!this.activeAxis&&0===o&&this.domProxy.hasOverlappingAxes()}shouldHandleAxisClick(e){const{enabled:t,enableAxisDragging:i,enableAxisScrolling:n,enableDoubleClickToReset:o}=this;return t&&!this.activeAxis&&!e.consumed&&(i||n||o)}clearHoveredAxis(){this.activeAxis||(this.domProxy.clearHoveredAxis(),0===this.dragState&&this.ctx.domManager.updateCursor(m0))}tryBeginAxisDelegation(e){const t=this.domProxy.getHoveredAxis();if(!this.enabled||!this.enableAxisDragging||!t)return!1;if(!this.domProxy.beginDelegatedAxisDrag(t.axisId))return!1;this.activeAxis=t,this.onAxisDragStart(t.direction);const i=2===this.dragState?"grabbing":this.domProxy.getCursor(t.direction);return this.ctx.domManager.updateCursor(m0,i),"touch"===e.device&&e.sourceEvent.preventDefault(),!0}onSeriesAreaDragStart(e){const{enabled:t,enablePanning:i,enableSelecting:n,ctx:{domManager:o,zoomManager:s}}=this;if(!t||!this.isState(p0.ZoomDraggable)||0!==this.dragState||this.isIgnoredTouch(e))return;if(this.panner.stopInteractions(),this.tryBeginAxisDelegation(e))return;let r=0;const a=this.isPanningKeyPressed(e.sourceEvent);!i||n&&!a?n&&!a&&(r=3):(o.updateCursor(m0,"grabbing"),r=2,this.panner.start()),0!==(this.dragState=r)&&s.fireZoomPanStartEvent("zoom")}onSeriesAreaDragMove(e){const{dragState:t,enabled:i,paddedRect:n,panner:o,selector:s,ctx:{interactionManager:r,tooltipManager:a,updateService:l}}=this;if(this.activeAxis)this.onAxisDragMove(this.activeAxis.axisId,this.activeAxis.direction,e);else if(i&&n&&this.isState(p0.ZoomDraggable)&&!this.isIgnoredTouch(e)){switch(r.pushState(uE.InteractionState.ZoomDrag),"touch"===e.device&&e.sourceEvent.preventDefault(),t){case 2:o.update(e);break;case 3:s.update(e,this.getModuleProperties(),n);break;case 0:return}a.updateTooltip(f0),l.update(Ku.PERFORM_LAYOUT,{skipAnimations:!0})}}onSeriesAreaDragEnd(){const{ctx:{interactionManager:e}}=this;this.activeAxis?this.handleAxisDragEnd():(e.popState(uE.InteractionState.ZoomDrag),this.enabled&&0!==this.dragState&&(this.handleRegularDragEnd(),this.resetDragState()))}handleAxisDragEnd(){this.onAxisDragEnd(),this.domProxy.endDelegatedAxisDrag(this.activeAxis.axisId),this.activeAxis=void 0,this.clearHoveredAxis()}handleRegularDragEnd(){const{panner:e,selector:t}=this;switch(this.dragState){case 2:e.stop();break;case 3:if(t.didUpdate()){const e=t.stop(this.seriesRect,this.paddedRect,this.getZoom());e?this.updateZoom(h0("zoom-seriesarea-selector"),e):this.ctx.updateService.update()}}}resetDragState(){this.dragState=0,this.ctx.domManager.updateCursor(m0),this.ctx.tooltipManager.removeTooltip(f0)}onAxisDoubleClick(e){const{enabled:t,enableDoubleClickToReset:i,ctx:{zoomManager:n}}=this;t&&i&&this.isState(p0.ZoomClickable)&&(this.previousAxisZoomValid={[_u.X]:!0,[_u.Y]:!0},n.resetAxisZoom({source:"user-interaction",sourceDetail:"zoom-axis-dblclick"},e))}onAxisDragStart(e){const{axisDraggingMode:t,domProxy:i,enabled:n,enableAxisDragging:o,panner:s,ctx:{zoomManager:r}}=this;n&&o&&(s.stopInteractions(),"pan"===t?(i.setAxisCursor("grabbing"),this.dragState=2,this.panner.start(e),r.fireZoomPanStartEvent("zoom")):this.dragState=1)}onAxisDragMove(e,t,i){const{anchorPointX:n,anchorPointY:o,axisDragger:s,dragState:r,enabled:a,enableAxisDragging:l,seriesRect:d,shouldFlipXY:c,ctx:{interactionManager:u,tooltipManager:h,updateService:p,zoomManager:g}}=this;if(!a||!l||!d)return;u.pushState(uE.InteractionState.ZoomDrag),"touch"===i.device&&i.sourceEvent.preventDefault();const m=this.getZoom();if(2===r)this.panner.update({currentX:i.offsetX,currentY:i.offsetY});else{let r=t===_u.X?n:o;c&&(r=t===_u.X?o:n);const a=g.getAxisZoom(e),l=s.update(i,t,r,d,m,a);this.autoScaler.onManualAdjustment(t),this.updateAxisZoom(h0("zoom-axis-drag"),e,t,l,{directional:!0})}h.updateTooltip(f0),p.update(Ku.PERFORM_LAYOUT,{skipAnimations:!0})}onAxisDragEnd(){const{axisDraggingMode:e,axisDragger:t,dragState:i,domProxy:n,enabled:o,enableAxisDragging:s,ctx:{domManager:r,interactionManager:a,tooltipManager:l}}=this;a.popState(uE.InteractionState.ZoomDrag),o&&s&&0!==i&&(this.dragState=0,"pan"===e&&(n.setAxisCursor("grab"),this.panner.stop()),t.stop(),r.updateCursor(m0),l.removeTooltip(f0))}onNavZoom(e){const{enabled:t,enableScrolling:i,scroller:n}=this;this.ctx.interactionManager.isState(uE.InteractionState.Default)&&t&&i&&(e.widgetEvent.sourceEvent.preventDefault(),this.updateZoom(h0("keyboard(".concat(e.delta,")")),n.updateDelta(e.delta,this.getModuleProperties(),this.getZoom())))}onWheel(e){const{enabled:t,enablePanning:i,enableScrolling:n,paddedRect:o}=this;if(!t||!n||!o||!this.isState(p0.ZoomWheelable))return;const{deltaX:s,deltaY:r}=e.sourceEvent,a=null!=s&&null!=r&&Math.abs(s)>Math.abs(r);i&&a?this.onWheelPanning(e):this.onWheelScrolling(e)}onWheelPanning(e){const{scrollingStep:t,scrollPanner:i,seriesRect:n,ctx:{zoomManager:o}}=this;if(!n)return;e.sourceEvent.preventDefault();const s=i.update(e,t,n,o.getAxisZooms());this.updateChanges(h0("zoom-seriesarea-wheel"),s)}onWheelScrolling(e){const t=this.getZoom(),i=e.deltaY>0&&yJ(t);this.handleWheelScrolling(e,i)}onAxisWheel(e,t){if(!this.enableAxisScrolling)return;if(e!==_u.X&&e!==_u.Y)return;const i=e===_u.X,n=!i,o=this.getModuleProperties({isScalingX:i,isScalingY:n}),s=this.getZoom(),r=t.deltaY>0&&0===s[e].min&&1===s[e].max;this.autoScaler.onManualAdjustment(e),this.handleWheelScrolling(t,r,o)}handleWheelScrolling(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getModuleProperties();const{enableIndependentAxes:n,scroller:o,seriesRect:s,ctx:{zoomManager:r}}=this;if(!s)return;let a=!0;const l=h0("zoom-axis-wheel");if(!0===n){const t=o.updateAxes(e,i,s,r.getAxisZooms());for(const[e,{direction:i,min:n,max:o}]of fu(t)){const t=i===_u.X?this.constrainZoom({x:{min:n,max:o},y:{min:1,max:1}}).x:{min:n,max:o};a&&(a=this.updateAxisZoom(l,e,i,t))}}else{const t=o.update(e,i,s,this.getZoom());if(null==t)return;a=this.updateUnifiedZoom(l,t,{directional:!0})}t||(t=e.deltaY<0&&!a),null!=this.firstWheelEventDirection&&this.firstWheelEventDirection!==e.deltaY<0&&(this.isFirstWheelEvent=!0),this.isFirstWheelEvent?(this.wasFirstWheelEventZoomCapped=t,this.firstWheelEventDirection=e.deltaY<0,t||e.sourceEvent.preventDefault()):!1===this.wasFirstWheelEventZoomCapped&&e.sourceEvent.preventDefault(),this.isFirstWheelEvent=!1,this.debouncedWheelReset()}onTouchStart(e,t){this.enableTwoFingerZoom&&0===this.dragState&&this.twoFingers.start(e,t,this.getZoom())&&(this.dragState=4)}onTouchMove(e,t){if(!this.enableTwoFingerZoom||4!==this.dragState)return;const i=this.twoFingers.update(e,t);this.updateZoom(h0("zoom-seriesarea-twofingers"),kJ(i))}onTouchEnd(e){this.enableTwoFingerZoom&&4===this.dragState&&(e.sourceEvent.preventDefault(),this.twoFingers.end(e)&&(this.dragState=0))}onProcessData(e){this.shouldFlipXY=e.series.shouldFlipXY}onLayoutComplete(e){this.domProxy.update(this.enabled,this.enableAxisDragging,this.enableAxisScrolling,this.ctx,e.series.rect),this.enabled&&(this.seriesRect=e.series.rect,this.paddedRect=e.series.paddedRect,this.enableAxisDragging&&this.toggleAxisDraggingCursorsDebounced())}onZoomChangeRequested(e){"zoom-seriesarea-panner"!==e.sourceDetail&&this.panner.stopInteractions();const t=this.getZoom();this.buttons.toggleVisibleZoomed(yJ(t))}onZoomPanStart(e){"zoom"===e.callerId&&this.panner.stopInteractions()}onPanUpdate(e){const{panner:t,seriesRect:i,ctx:{tooltipManager:n,zoomManager:o}}=this;if(!i)return;const s=t.translateZooms(i,o.getAxisZooms(),e.deltaX,e.deltaY);this.updateChanges(h0("zoom-seriesarea-panner"),s),n.updateTooltip(f0)}isPanningKeyPressed(e){switch(this.panKey){case"alt":return e.altKey;case"ctrl":return e.ctrlKey;case"shift":return e.shiftKey;case"meta":return e.metaKey}}isScalingX(){return"xy"===this.axes||(this.shouldFlipXY?"y"===this.axes:"x"===this.axes)}isScalingY(){return"xy"===this.axes||(this.shouldFlipXY?"x"===this.axes:"y"===this.axes)}getAnchorPointX(){return this.shouldFlipXY?this.anchorPointY:this.anchorPointX}getAnchorPointY(){return this.shouldFlipXY?this.anchorPointX:this.anchorPointY}constrainZoom(e){return this.ctx.zoomManager.constrainZoomToItemCount(e,this.minVisibleItems,this.autoScaler.enabled)}isZoomValid(e,t){var i;const{minVisibleItems:n,ctx:{zoomManager:o}}=this;if(0===n)return this.previousZoomValid=!0,!0;const s=this.getZoom(),r=g0(gJ(e))<g0(gJ(s)),a=g0(mJ(e))<g0(mJ(s));if(!r&&!a)return this.previousZoomValid=!0,!0;if(!this.previousZoomValid&&null!==t&&void 0!==t&&t.directional)return!1;const l=null!==(i=null===t||void 0===t?void 0:t.includeYVisibleRange)&&void 0!==i&&i,d=this.autoScaler.enabled,c=o.isVisibleItemsCountAtLeast(e,n,{includeYVisibleRange:l,autoScaleYAxis:d});return this.previousZoomValid=null===t||void 0===t||!t.directional||c,c}isAxisZoomValid(e,t,i){const{minVisibleItems:n,ctx:{zoomManager:o}}=this,s=this.getZoom(),r=t.max-t.min,a=s[e].max-s[e].min,l=p(p({},s),{},{[e]:t});if(r>=a)return this.previousAxisZoomValid[e]=!0,!0;if(!this.previousAxisZoomValid[e]&&null!==i&&void 0!==i&&i.directional)return!1;const d={includeYVisibleRange:!1,autoScaleYAxis:this.autoScaler.enabled},c=o.isVisibleItemsCountAtLeast(l,n,d);return this.previousAxisZoomValid[e]=null===i||void 0===i||!i.directional||c,c}resetZoom(e){this.previousZoomValid=!0,this.previousAxisZoomValid={[_u.X]:!0,[_u.Y]:!0},this.ctx.zoomManager.resetZoom({source:"user-interaction",sourceDetail:e})}updateSyncZoom(e){this.updateZoom({source:"sync",sourceDetail:"internal-updateSyncZoom"},e)}updateChanges(e,t){var i,n,o;const s=null!==(i=this.ctx.zoomManager.toAxisZoomState(t))&&void 0!==i?i:{},r=bJ(this.ctx.zoomManager.getZoom());this.updateZoom(e,{x:null!==(n=s.x)&&void 0!==n?n:r.x,y:null!==(o=s.y)&&void 0!==o?o:r.y})}updateZoom(e,t){this.enableIndependentAxes?this.updatePrimaryAxisZooms(e,t):this.updateUnifiedZoom(e,t)}updateUnifiedZoom(e,t,i){return t=this.constrainZoom(t),this.isZoomValid(t,i)?(this.ctx.zoomManager.updateZoom(e,t),!0):(this.ctx.updateService.update(Ku.SCENE_RENDER,{skipAnimations:!0}),!1)}updatePrimaryAxisZooms(e,t){this.updatePrimaryAxisZoom(e,t,_u.X),this.updatePrimaryAxisZoom(e,t,_u.Y)}updatePrimaryAxisZoom(e,t,i){const n=this.ctx.zoomManager.getPrimaryAxisId(i);null!=n&&this.updateAxisZoom(e,n,i,t[i])}updateAxisZoom(e,t,i,n,o){const{enableIndependentAxes:s,ctx:{zoomManager:r}}=this;if(!n)return!1;const a=this.getZoom();if(!0!==s)return a[i]=n,this.updateUnifiedZoom(e,a,o);if(!this.isAxisZoomValid(i,n,o))return!1;const{source:l,sourceDetail:d}=e;return r.updateChanges({source:l,sourceDetail:d,changes:{[t]:n},isReset:!1}),!0}updateAxisCursor(e){if(!this.domProxy)return;const{enableAxisDragging:t=this.enableAxisDragging,enableAxisScrolling:i=this.enableAxisScrolling,axisDraggingMode:n=this.axisDraggingMode}=e;t?this.domProxy.setAxisCursor("pan"===n?"grab":void 0):i?this.domProxy.setAxisCursor("default"):this.domProxy.setAxisCursor(void 0)}toggleAxisDraggingCursors(){const{anchorPointX:e,anchorPointY:t,domProxy:i}=this,n=this.getZoom();let o=1!==gJ(n),s=1!==mJ(n);if(!o){const t=SJ(n,.999,1);t.x=MJ(t.x,n.x,e),o=this.isZoomValid(t,{includeYVisibleRange:!0})}if(!s){const e=SJ(n,1,.999);e.y=MJ(e.y,n.y,t),s=this.isZoomValid(e,{includeYVisibleRange:!0})}i.toggleAxisDraggingCursor(_u.X,o),i.toggleAxisDraggingCursor(_u.Y,s)}getZoom(){return bJ(this.ctx.zoomManager.getZoom())}getModuleProperties(e){var t,i,n,o,s,r,a,l;return{anchorPointX:null!==(t=null===e||void 0===e?void 0:e.anchorPointX)&&void 0!==t?t:this.getAnchorPointX(),anchorPointY:null!==(i=null===e||void 0===e?void 0:e.anchorPointY)&&void 0!==i?i:this.getAnchorPointY(),enabled:null!==(n=null===e||void 0===e?void 0:e.enabled)&&void 0!==n?n:this.enabled,independentAxes:null!==(o=null===e||void 0===e?void 0:e.independentAxes)&&void 0!==o?o:!0===this.enableIndependentAxes,isScalingX:null!==(s=null===e||void 0===e?void 0:e.isScalingX)&&void 0!==s?s:this.isScalingX(),isScalingY:null!==(r=null===e||void 0===e?void 0:e.isScalingY)&&void 0!==r?r:this.isScalingY(),keepAspectRatio:null!==(a=null===e||void 0===e?void 0:e.keepAspectRatio)&&void 0!==a?a:this.keepAspectRatio,scrollingStep:null!==(l=null===e||void 0===e?void 0:e.scrollingStep)&&void 0!==l?l:this.scrollingStep}}};kV([ng({newValue(e){this.onEnabledChange(e)}}),ru],v0.prototype,"enabled",2),kV([ng({changeValue(e){this.updateAxisCursor({enableAxisDragging:e})}}),ru],v0.prototype,"enableAxisDragging",2),kV([ng({changeValue(e){this.updateAxisCursor({enableAxisScrolling:e})}}),ru],v0.prototype,"enableAxisScrolling",2),kV([ru],v0.prototype,"enableDoubleClickToReset",2),kV([ng({changeValue(e){this.ctx.zoomManager.setIndependentAxes(Boolean(e))}}),ru],v0.prototype,"enableIndependentAxes",2),kV([ru],v0.prototype,"enablePanning",2),kV([ru],v0.prototype,"enableScrolling",2),kV([ru],v0.prototype,"enableSelecting",2),kV([ru],v0.prototype,"enableTwoFingerZoom",2),kV([ru],v0.prototype,"panKey",2),kV([ru],v0.prototype,"axes",2),kV([ru],v0.prototype,"scrollingStep",2),kV([ru],v0.prototype,"keepAspectRatio",2),kV([ru],v0.prototype,"minVisibleItems",2),kV([ru],v0.prototype,"anchorPointX",2),kV([ru],v0.prototype,"anchorPointY",2),kV([ru],v0.prototype,"autoScaling",2),kV([ng({changeValue(e){this.updateAxisCursor({axisDraggingMode:e})}}),ru],v0.prototype,"axisDraggingMode",2),kV([ru],v0.prototype,"buttons",2),kV([ru],v0.prototype,"onDataChange",2),kV([eg("panner.deceleration"),ru],v0.prototype,"deceleration",2);var y0=Gd("pointer","start","middle","end"),b0={type:"plugin",name:"zoom",enterprise:!0,version:GC,options:{enabled:Cd,enableAxisDragging:Cd,enableAxisScrolling:Cd,enableDoubleClickToReset:Cd,enablePanning:Cd,enableScrolling:Cd,enableSelecting:Cd,enableTwoFingerZoom:Cd,keepAspectRatio:Cd,anchorPointX:y0,anchorPointY:y0,axisDraggingMode:Gd("pan","zoom"),axes:Gd("x","y","xy"),deceleration:yd(Gd("off","short","long"),Fd),minVisibleItems:Pd,panKey:Gd("alt","ctrl","meta","shift"),scrollingStep:Fd,autoScaling:{enabled:Cd,padding:Fd},onDataChange:{strategy:Hd()("reset","preserveDomain","preserveRatios"),stickToEnd:Cd},buttons:{enabled:Cd,buttons:Kd(p(p({},Hc),{},{value:Gd("reset","zoom-in","zoom-out","pan-left","pan-right","pan-start","pan-end"),section:Ad}),"zoom button options array"),visible:Gd("always","zoomed","hover")}},themeTemplate:{enabled:!1,enableAxisDragging:!0,enableAxisScrolling:!0,enableDoubleClickToReset:!0,enablePanning:!0,enableScrolling:!0,enableSelecting:!1,enableTwoFingerZoom:!0,deceleration:"short",minVisibleItems:2,panKey:"alt",scrollingStep:.1,autoScaling:{enabled:{$and:[{$eq:[{$path:"../axes"},"x"]},{$not:{$eq:[{$path:"/series/0/direction"},"horizontal"]}}]},padding:.05},onDataChange:{strategy:"preserveDomain",stickToEnd:!1},anchorPointX:"end",anchorPointY:"middle",axes:"x",buttons:{enabled:{$path:"../enabled"},visible:"hover",buttons:[{icon:"zoom-out",value:"zoom-out",section:"scale"},{icon:"zoom-in",value:"zoom-in",section:"scale"},{icon:"pan-left",value:"pan-left",section:"pan"},{icon:"pan-right",value:"pan-right",section:"pan"},{icon:"reset",value:"reset",section:"reset"}]}},create:e=>new v0(e)};function x0(e,t,i){return Cp(e.chartService,t,i)}b0.options.enableIndependentAxes=gd(Cd),b0.options.buttons.anchorPointX=gd(y0),b0.options.buttons.anchorPointY=gd(y0);var{AxisInterval:C0,AxisLabel:S0,LinearScale:w0,BBox:M0,TranslatableGroup:k0,Selection:D0,Text:I0}=uE,A0=class e{constructor(e,t){this.ctx=e,this.dataProvider=t,this.id=xm(this),this.axisGroup=new k0({name:"".concat(this.id,"-AxisTicks"),zIndex:bp.AXIS}),this.labelSelection=D0.select(this.axisGroup,I0),this.interval=new C0,this.label=new S0,this.scale=new w0,this.placement="bottom",this.translationX=0,this.translationY=0,this.padding=0}get horizontal(){return this.placement.startsWith("top")||this.placement.startsWith("bottom")}attachAxis(e){e.appendChild(this.axisGroup)}calculateLayout(){const{placement:e,translationX:t,translationY:i,horizontal:n,label:o}=this;let s,r;switch(e){case"top":case"top-right":case"top-left":s="bottom",r="center",o.mirrored=!1,o.parallel=!0;break;case"bottom":case"bottom-right":case"bottom-left":s="top",r="center",o.mirrored=!1,o.parallel=!0;break;case"right":case"right-top":case"right-bottom":case"left":case"left-top":case"left-bottom":s="middle",r="left",o.mirrored=!0,o.parallel=!1}const a=[],l=this.generateTicks(),{ticks:d}=l;return this.labelSelection.update(d,void 0,e=>e.tickId),this.axisGroup.setProperties({translationX:t,translationY:i}),this.labelSelection.each((e,t)=>{e.fontFamily=o.fontFamily,e.fontSize=o.fontSize,e.fontStyle=o.fontStyle,e.fontWeight=o.fontWeight,e.fill=o.color,e.textBaseline=s,e.textAlign=r,e.text=t.tickLabel,e.x=n?t.translation:0,e.y=n?0:t.translation,a.push(e.getBBox())}),a.length>0?M0.merge(a).translate(t,i):void 0}tickFormatter(e,t,i,n){const{ctx:o}=this,{formatManager:s}=o,r=this.dataProvider.data.flatMap(e=>e.series);return(t,i)=>{var a,l;const d={type:"number",value:t,datum:void 0,seriesId:void 0,legendItemName:void 0,key:void 0,source:"gradient-legend",property:"color",domain:e,boundSeries:r,fractionDigits:n};return null!==(a=null!==(l=this.label.formatValue((e,t)=>x0(o,e,t),d,i))&&void 0!==l?l:s.format((e,t)=>x0(o,e,t),d))&&void 0!==a?a:s.defaultFormat(d)}}inRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.001;const[i,n]=$u(this.scale.range);return e>=i-t&&e<=n+t}generateTicks(){const{minSpacing:t,maxSpacing:i}=this.interval,{maxTickCount:n,minTickCount:o,tickCount:s}=ev(Zu(this.scale.range),1,t,i,e.DefaultTickCount,e.DefaultMinSpacing),r=this.getTicksData({nice:[!0,!0],interval:this.interval.step,tickCount:s,minTickCount:o,maxTickCount:n});if("bottom"===this.placement||"top"===this.placement){const e=Wm(this.label),{domain:t}=this.scale,i=t[0]>t[1]?-1:1;let n=-1/0*i;r.ticks=r.ticks.filter(t=>{if(Math.sign(t.translation-n)!==i)return!1;const{width:o}=Ua(t.tickLabel)?_m(t.tickLabel,this.label):e.measureLines(Gl(t.tickLabel));return n=t.translation+o*i,!0})}return r}getTicksData(e){var t,i;const n=[],o=e.nice?this.scale.niceDomain(e):this.scale.domain,s=null!==(t=null===(i=this.scale.ticks(e,o))||void 0===i?void 0:i.ticks)&&void 0!==t?t:[],r=s.reduce((e,t)=>Math.max(e,_a(t)),0),a=rv(),l=this.tickFormatter(o,s,!1,r);for(let d=0;d<s.length;d++){const e=s[d],t=this.scale.convert(e);if(!this.inRange(t))continue;const i=l(e,d);if(null==i||""===i)continue;const o=a(ed(i));n.push({tick:e,tickId:o,tickLabel:i,translation:t})}return{rawTicks:s,fractionDigits:r,ticks:n}}};A0.className="AxisTicks",A0.DefaultTickCount=5,A0.DefaultMinSpacing=10;var L0=A0,{LayoutElement:N0,Group:T0,Rect:R0,Marker:E0,TranslatableGroup:P0,BBox:O0}=uE,F0=class extends kh{constructor(){super(...arguments),this.thickness=16,this.preferredLength=100}};kV([ru],F0.prototype,"thickness",2),kV([ru],F0.prototype,"preferredLength",2);var z0=class extends kh{constructor(e){super(),this.axisTicks=e}};kV([eg("axisTicks.label")],z0.prototype,"label",2),kV([eg("axisTicks.interval")],z0.prototype,"interval",2),kV([eg("axisTicks.padding")],z0.prototype,"padding",2);var B0=class extends kh{constructor(e){super(),this.ctx=e,this.id=xm(this),this.legendGroup=new P0({name:"legend",zIndex:bp.LEGEND}),this.containerNode=this.legendGroup.appendChild(new R0({name:"legend-container"})),this.gradientRect=new R0,this.arrow=new E0({shape:"triangle"}),this.ticksGroup=new T0({name:"legend-axis-group"}),this.cleanup=new Ta,this.enabled=!1,this.position="bottom",this.reverseOrder=!1,this.gradient=new F0,this.spacing=20,this.border=new sg(this.containerNode),this.cornerRadius=0,this.fillOpacity=1,this.padding=4,this.data=[],this.highlightManager=e.highlightManager,this.axisTicks=new L0(e,this),this.axisTicks.attachAxis(this.ticksGroup),this.scale=new z0(this.axisTicks),this.legendGroup.append([this.gradientRect,this.arrow,this.ticksGroup]),this.cleanup.register(e.eventsHub.on("highlight:change",()=>this.onChartHoverChange()),e.layoutManager.registerElement(N0.Legend,e=>this.onStartLayout(e)),()=>this.legendGroup.remove())}isVertical(){const{placement:e}=Uu(this.position);return e.startsWith("right")||e.startsWith("left")}destroy(){this.cleanup.flush()}attachLegend(e){e.appendChild(this.legendGroup)}onStartLayout(e){var t;let{layoutBox:i}=e;const[n]=this.data;if(!this.enabled||null===n||void 0===n||!n.enabled||"gradient"!==n.legendType)return void(this.legendGroup.visible=!1);const{colorRange:o}=this.normalizeColorArrays(n),{strokeWidth:s,padding:r}=this.getContainerStyles(),a=this.updateGradientRect(i,o),l=null!==(t=this.updateAxis(n,a))&&void 0!==t?t:new O0(0,0,0,0),d=O0.merge([a,l]);d.grow(r).grow(s);const{left:c,top:u}=this.getMeasurements(i,d);this.updateContainer(d),this.updateArrow(),this.legendGroup.visible=!0,this.legendGroup.translationX=c,this.legendGroup.translationY=u}normalizeColorArrays(e){let t=e.colorDomain.slice();const i=e.colorRange.slice();if(t.length===i.length)return{colorDomain:t,colorRange:i};t.length>i.length&&i.splice(t.length);const[n,o]=t,s=i.length;return t=i.map((e,t)=>0===t?n:t===s-1?o:n+(o-n)*t/(s-1)),{colorDomain:t,colorRange:i}}updateGradientRect(e,t){const{gradientRect:i,gradient:n}=this,{preferredLength:o,thickness:s}=n,r=new O0(0,0,0,0),a=Math.max(t.length-1,1);let l;return this.isVertical()?(l=0,r.width=s,r.height=Math.min(e.height,o)):(l=90,r.width=Math.min(e.width,o),r.height=s),i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height,i.fill={type:"gradient",gradient:"linear",colorSpace:"oklch",colorStops:t.map((e,t)=>({stop:t/a,color:e})),rotation:l},r}updateAxis(e,t){var i;const{axisTicks:n,gradient:o,scale:s}=this,{placement:r}=Uu(this.position),a=this.isVertical(),l=this.reverseOrder!==a;n.placement=r;const d=o.thickness+(null!==(i=s.padding)&&void 0!==i?i:0);return n.translationX=a?d:t.x,n.translationY=a?t.y:d,n.scale.domain=l?e.colorDomain.slice().reverse():e.colorDomain,n.scale.range=a?[t.x,t.height]:[t.y,t.width],n.calculateLayout()}updateContainer(e){const t=this.getContainerStyles();this.containerNode.setStyleProperties(t),this.containerNode.cornerRadius=t.cornerRadius,this.containerNode.x=e.x,this.containerNode.y=e.y,this.containerNode.width=e.width,this.containerNode.height=e.height}updateArrow(){var e;const t=this.highlightManager.getActiveHighlight(),{arrow:i}=this;if(null==(null===t||void 0===t?void 0:t.colorValue))return void(i.visible=!1);const{scale:n,label:o}=this.axisTicks,s=null!==(e=o.fontSize)&&void 0!==e?e:0,r=n.convert(t.colorValue);let{x:a,y:l}=this.gradientRect,d=Math.PI;this.isVertical()?(a-=s/2,l+=r,d/=2):(a+=r,l-=s/2),i.visible=!0,i.fill=o.color,i.rotation=d,i.size=s,i.translationX=a,i.translationY=l}getMeasurements(e,t){let{x:i,y:n}=e;const{width:o,height:s}=t,{placement:r,floating:a,xOffset:l,yOffset:d}=Uu(this.position),c=this.getContainerStyles();switch(i+=c.strokeWidth+c.padding.left,n+=c.strokeWidth+c.padding.top,r){case"left":n+=e.height/2-s/2;break;case"right":i+=e.width-o,n+=e.height/2-s/2;break;case"top":i+=e.width/2-o/2;break;case"bottom":i+=e.width/2-o/2,n+=e.height-s;break;case"right-top":case"top-right":i+=e.width-o;break;case"right-bottom":case"bottom-right":i+=e.width-o,n+=e.height-s;break;case"left-bottom":case"bottom-left":n+=e.height-s}if(!a)switch(r){case"left":case"left-top":case"left-bottom":e.shrink(o+this.spacing,"left");break;case"right":case"right-top":case"right-bottom":e.shrink(o+this.spacing,"right");break;case"top":case"top-left":case"top-right":e.shrink(s+this.spacing,"top");break;case"bottom":case"bottom-left":case"bottom-right":e.shrink(s+this.spacing,"bottom")}return i+=l,n+=d,{top:n,left:i}}getContainerStyles(){var e,t,i,n;const{stroke:o,strokeOpacity:s,strokeWidth:r}=this.border,{cornerRadius:a,fill:l,fillOpacity:d,padding:c}=this,u="number"===typeof c;return{cornerRadius:a,fill:l,fillOpacity:d,padding:{top:u?c:null!==(e=c.top)&&void 0!==e?e:0,right:u?c:null!==(t=c.right)&&void 0!==t?t:0,bottom:u?c:null!==(i=c.bottom)&&void 0!==i?i:0,left:u?c:null!==(n=c.left)&&void 0!==n?n:0},stroke:o,strokeOpacity:s,strokeWidth:this.border.enabled?r:0}}onChartHoverChange(){this.enabled&&this.updateArrow()}};B0.className="GradientLegend",kV([ru],B0.prototype,"enabled",2),kV([ru],B0.prototype,"position",2),kV([ru],B0.prototype,"reverseOrder",2),kV([ru],B0.prototype,"gradient",2),kV([ru],B0.prototype,"spacing",2),kV([ru],B0.prototype,"border",2),kV([ru],B0.prototype,"cornerRadius",2),kV([ru],B0.prototype,"fill",2),kV([ru],B0.prototype,"fillOpacity",2),kV([ru],B0.prototype,"padding",2),kV([ru],B0.prototype,"scale",2);var V0={type:"plugin",name:"gradientLegend",enterprise:!0,version:GC,options:{enabled:Cd,position:Ac,spacing:Pd,reverseOrder:Cd,border:Mc,cornerRadius:Dd,padding:wc,fill:ac,fillOpacity:Fd,gradient:{preferredLength:Pd,thickness:Pd},scale:{label:p(p({},Cc),{},{minSpacing:Pd,format:_c,formatter:Sd}),padding:Pd,interval:{step:Dd,values:xd,minSpacing:vd(Pd,zd("maxSpacing")),maxSpacing:vd(Pd,Vd("minSpacing"))}}},themeTemplate:p(p({},uE.LEGEND_CONTAINER_THEME),{},{enabled:!1,position:"bottom",spacing:20,scale:{padding:13,label:{color:{$ref:"textColor"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},minSpacing:5},interval:{minSpacing:15}},gradient:{preferredLength:100,thickness:16},reverseOrder:!1,fill:{$applySwitch:[{$path:"type"},{$ref:"chartBackgroundColour"},["gradient",uE.FILL_GRADIENT_BLANK_DEFAULTS],["pattern",uE.FILL_PATTERN_BLANK_DEFAULTS],["image",uE.FILL_IMAGE_BLANK_DEFAULTS]]}}),create:e=>{const t=new B0(e);return t.attachLegend(e.scene),t}},{Chart:G0}=uE,H0=class extends G0{getChartType(){return"standalone"}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,n=e.layoutBox.clone().shrink(this.seriesArea.getPadding());this.seriesRect=n,this.animationRect=n;for(const o of[t,i])o.translationX=Math.floor(n.x),o.translationY=Math.floor(n.y);t.visible=this.series[0].visible,this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:!0,rect:n,paddedRect:e.layoutBox}})}getAriaLabel(){var e;const t=null===(e=this.series[0])||void 0===e?void 0:e.type;if(null==t)return"";const i=this.getCaptionText();switch(t){case"radial-gauge":case"linear-gauge":{const e=[];0!==i.length&&e.push(i);for(const t of this.series)e.push(t.getCaptionText());return this.ctx.localeManager.t("ariaAnnounceGaugeChart",{caption:e.join(". ")})}case"treemap":case"sunburst":return this.ctx.localeManager.t("ariaAnnounceHierarchyChart",{caption:i});default:return this.ctx.localeManager.t("ariaAnnounceStandaloneChart",{caption:i})}}};H0.className="StandaloneChart",H0.type="standalone";var{standaloneChartOptionsDefs:j0}=uE,W0={type:"chart",name:"standalone",enterprise:!0,version:GC,options:j0,create:(e,t)=>new H0(e,t)};function _0(e,t,i){i||(t=function(e){const t=new Set;for(const i of e)K0(e,i,t,[]);0!==t.size&&jr.warnOnce("Some links formed circular references. These will be removed from the output.");return 0===t.size?e:e.filter(e=>!t.has(e))}(t));const n=new Map;for(const s of e)n.set(s.id,{datum:s,linksBefore:[],linksAfter:[],maxPathLengthBefore:-1,maxPathLengthAfter:-1});let o=0;for(const[s,r]of n.entries())o=Math.max(o,U0(n,t,r,s,-1,[])+U0(n,t,r,s,1,[])+1);return{links:t,nodeGraph:n,maxPathLength:o}}function K0(e,t,i,n){const o=n.indexOf(t);if(-1!==o){for(let e=o;e<n.length;e+=1)i.add(n[e]);return}n.push(t);const{toNode:s}=t;for(const r of e)r.fromNode===s&&K0(e,r,i,n);n.pop()}function U0(e,t,i,n,o,s){if(s.includes(n))return 1/0;let r=-1===o?i.maxPathLengthBefore:i.maxPathLengthAfter;if(-1===r){r=0;const a=-1===o?i.linksBefore:i.linksAfter;for(const i of t){const{fromNode:l,toNode:d}=i,c=-1===o?d.id:l.id,u=-1===o?l.id:d.id,h=n===c?e.get(u):void 0;null!=h&&(a.push({node:h,link:i}),null===s||void 0===s||s.push(n),r=Math.max(r,U0(e,t,h,u,o,s)+1),null===s||void 0===s||s.pop())}-1===o?i.maxPathLengthBefore=r:i.maxPathLengthAfter=r}return r}var{Series:Y0,DataController:$0,keyProperty:Z0,valueProperty:X0,Selection:q0,Group:Q0,TransformableText:J0,HighlightState:e1}=uE,t1=class extends uE.SeriesNodeEvent{constructor(e,t,i,n){var o;super(e,t,i,n);const{datumIndex:s}=i,r=null===(o=n.contextNodeData)||void 0===o?void 0:o.nodeData.find(e=>e.datumIndex.type===s.type&&e.datumIndex.index===s.index);this.size=null===r||void 0===r?void 0:r.size,this.label=1===(null===r||void 0===r?void 0:r.type)?null===r||void 0===r?void 0:r.label:void 0}},i1=class extends Y0{constructor(){super(...arguments),this.NodeEvent=t1,this.nodeCount=0,this.linkCount=0,this.linksDataModel=void 0,this.linksProcessedData=void 0,this.nodesDataModel=void 0,this.nodesProcessedData=void 0,this.processedNodes=new Map,this.linkGroup=this.contentGroup.appendChild(new Q0({name:"linkGroup"})),this.nodeGroup=this.contentGroup.appendChild(new Q0({name:"nodeGroup"})),this.focusLinkGroup=this.highlightGroup.appendChild(new Q0({name:"linkGroup"})),this.focusNodeGroup=this.highlightGroup.appendChild(new Q0({name:"nodeGroup"})),this.highlightLinkGroup=this.highlightGroup.appendChild(new Q0({name:"linkGroup"})),this.labelSelection=q0.select(this.labelGroup,J0),this.linkSelection=q0.select(this.linkGroup,()=>this.linkFactory()),this.nodeSelection=q0.select(this.nodeGroup,()=>this.nodeFactory()),this.focusLinkSelection=q0.select(this.focusLinkGroup,()=>this.linkFactory()),this.focusNodeSelection=q0.select(this.focusNodeGroup,()=>this.nodeFactory()),this.highlightLinkSelection=q0.select(this.highlightLinkGroup,()=>this.linkFactory()),this.highlightNodeSelection=q0.select(this.highlightNodeGroup,()=>this.nodeFactory())}get nodes(){return this.properties.nodes}async processData(e){var t;const{data:i,nodes:n}=this;if(null==i)return;const{fromKey:o,toKey:s,sizeKey:r,idKey:a,labelKey:l}=this.properties,d=new $0("standalone",e.suppressFieldDotNotation,this.ctx.eventsHub),c=null==n?null:d.request(this.id,null!==(t=uE.DataSet.wrap(n))&&void 0!==t?t:uE.DataSet.empty(),{props:[Z0(a,void 0,{id:"idValue",includeProperty:!1}),...null==l?[]:[X0(l,void 0,{id:"labelValue",includeProperty:!1})]],groupByKeys:!0}),u=e.request(this.id,i,{props:[X0(o,void 0,{id:"fromValue",includeProperty:!1}),X0(s,void 0,{id:"toValue",includeProperty:!1}),...null==r?[]:[X0(r,void 0,{id:"sizeValue",includeProperty:!1,missingValue:0})]],groupByKeys:!1});null!=n&&d.execute();const[h,p]=await Promise.all([null!==c&&void 0!==c?c:Promise.resolve(null),u]);this.nodesDataModel=null===h||void 0===h?void 0:h.dataModel,this.nodesProcessedData=null===h||void 0===h?void 0:h.processedData,this.linksDataModel=null===p||void 0===p?void 0:p.dataModel,this.linksProcessedData=null===p||void 0===p?void 0:p.processedData;const g=new Map;if(null==h){var m;const e=p.dataModel.resolveColumnById(this,"fromValue",p.processedData),t=p.dataModel.resolveColumnById(this,"toValue",p.processedData),i=e=>{const t=g.size,i=e;return{series:this,itemId:void 0,datum:{},datumIndex:{type:1,index:t},type:1,index:t,linksBefore:[],linksAfter:[],id:e,size:0,label:i,style:this.getNodeStyle({datumIndex:{type:1,index:t},datum:{},size:0,label:i},t,!1)}},n=null===(m=p.processedData.dataSources.get(this.id))||void 0===m?void 0:m.data;if(n)for(const[o]of n.entries()){const n=e[o],s=t[o];null!=n&&null!=s&&(g.has(n)||g.set(n,i(n)),g.has(s)||g.set(s,i(s)))}}else{var f;const e=h.dataModel.resolveColumnById(this,"idValue",h.processedData),t=null==l?void 0:h.dataModel.resolveColumnById(this,"labelValue",h.processedData),i=null===(f=h.processedData.dataSources.get(this.id))||void 0===f?void 0:f.data;if(i)for(const[n,o]of i.entries()){const i=e[n],s=null===t||void 0===t?void 0:t[n],r={type:1,index:n};g.set(i,{series:this,itemId:void 0,datum:o,datumIndex:r,type:1,index:n,linksBefore:[],linksAfter:[],id:i,size:0,label:s,style:this.getNodeStyle({datumIndex:r,datum:o,size:0,label:s},n,!1)})}}this.processedNodes=g}getNodeGraph(e,t,i){var n;let{includeCircularReferences:o}=i;const{linksDataModel:s,linksProcessedData:r}=this;if(null==s||null==r){const{links:e,nodeGraph:t,maxPathLength:i}=_0((new Map).values(),[],o);return this.nodeCount=0,this.linkCount=0,{nodeGraph:t,links:e,maxPathLength:i}}const{sizeKey:a}=this.properties,l=s.resolveColumnById(this,"fromValue",r),d=s.resolveColumnById(this,"toValue",r),c=null==a?void 0:s.resolveColumnById(this,"sizeValue",r),u=new Map;for(const v of this.processedNodes.values()){const t=e(v);u.set(v.id,t)}const h=[],p=null===(n=r.dataSources.get(this.id))||void 0===n?void 0:n.data;if(p)for(const[v,y]of p.entries()){const e=l[v],i=d[v],n=null==c?1:c[v],o=u.get(e),s=u.get(i);if(n<=0||null==o||null==s)continue;const r={type:0,index:v},a=t({series:this,itemId:void 0,datum:y,datumIndex:r,type:0,index:v,fromNode:o,toNode:s,size:n,style:this.getLinkStyle({datum:y,datumIndex:r},o.datumIndex,!1)});h.push(a)}const{links:g,nodeGraph:m,maxPathLength:f}=_0(u.values(),h,o);for(const v of m.values())v.datum.linksBefore=v.linksBefore.map(e=>e.link),v.datum.linksAfter=v.linksAfter.map(e=>e.link);return this.nodeCount=m.size,this.linkCount=g.length,{nodeGraph:m,links:g,maxPathLength:f}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(e){var t,i,n,o,s,r,a;const{seriesRect:l}=e,d={seriesRectWidth:null!==(t=null===l||void 0===l?void 0:l.width)&&void 0!==t?t:0,seriesRectHeight:null!==(i=null===l||void 0===l?void 0:l.height)&&void 0!==i?i:0};null!=this._nodeDataDependencies&&this._nodeDataDependencies.seriesRectWidth===d.seriesRectWidth&&this._nodeDataDependencies.seriesRectHeight===d.seriesRectHeight||(this._nodeDataDependencies=d),this.updateSelections();const c=null!==(n=null===(o=this.contextNodeData)||void 0===o?void 0:o.nodeData)&&void 0!==n?n:[],u=null!==(s=null===(r=this.contextNodeData)||void 0===r?void 0:r.labelData)&&void 0!==s?s:[],h=this.getHighlightedDatum();this.contentGroup.visible=this.visible;const p=null==h?e1.None:e1.OtherItem;let g,m,f,v;this.contentGroup.opacity=null!==(a=this.properties.highlight.getStyle(p).opacity)&&void 0!==a?a:1,this.labelSelection=this.updateLabelSelection({labelData:u,labelSelection:this.labelSelection}),this.updateLabelNodes({labelSelection:this.labelSelection}),this.linkSelection=this.updateLinkSelection({nodeData:c.filter(e=>0===e.type),datumSelection:this.linkSelection}),this.updateLinkNodes({datumSelection:this.linkSelection,isHighlight:!1}),this.nodeSelection=this.updateNodeSelection({nodeData:c.filter(e=>1===e.type),datumSelection:this.nodeSelection}),this.updateNodeNodes({datumSelection:this.nodeSelection,isHighlight:!1}),1===(null===h||void 0===h?void 0:h.type)?(g=c.filter(e=>0===e.type&&(e.toNode===h||e.fromNode===h)),m=g.map(e=>e.fromNode===h?e.toNode:e.fromNode),m.push(h),f=[],v=[h]):0===(null===h||void 0===h?void 0:h.type)?(g=[h],m=[h.fromNode,h.toNode],f=[h],v=[]):(g=[],m=[],f=[],v=[]),this.focusLinkSelection=this.updateLinkSelection({nodeData:g,datumSelection:this.focusLinkSelection}),this.updateLinkNodes({datumSelection:this.focusLinkSelection,isHighlight:!1}),this.focusNodeSelection=this.updateNodeSelection({nodeData:m,datumSelection:this.focusNodeSelection}),this.updateNodeNodes({datumSelection:this.focusNodeSelection,isHighlight:!1}),this.highlightLinkSelection=this.updateLinkSelection({nodeData:f,datumSelection:this.highlightLinkSelection}),this.updateLinkNodes({datumSelection:this.highlightLinkSelection,isHighlight:!0}),this.highlightNodeSelection=this.updateNodeSelection({nodeData:v,datumSelection:this.highlightNodeSelection}),this.updateNodeNodes({datumSelection:this.highlightNodeSelection,isHighlight:!0})}getHighlightedDatum(){var e,t,i;let n=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight();if((null===(t=n)||void 0===t?void 0:t.series)===this&&null==n.type){var o,s;const{itemId:e}=n,t=null!==(o=null===(s=this.contextNodeData)||void 0===s?void 0:s.nodeData)&&void 0!==o?o:[];n=null==e?void 0:t.find(t=>1===t.type&&t.id===e)}else(null===(i=n)||void 0===i?void 0:i.series)!==this&&(n=void 0);return n}isLabelHighlighted(e,t){return null!=t&&(1===t.type?t===e:0===t.type&&(t.fromNode===e||t.toNode===e))}resetAnimation(e){}dataCount(){return Number.NaN}getSeriesDomain(e){return{domain:[]}}getSeriesRange(e,t){return[Number.NaN,Number.NaN]}legendItemSymbol(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{fills:n,strokes:o}=this.properties,{fill:s=n[t%n.length],fillOpacity:r=1,stroke:a=o[t%o.length],strokeWidth:l=0,strokeOpacity:d=1,lineDash:c=[0],lineDashOffset:u=0}=i;return{marker:{fill:s,fillOpacity:r,stroke:a,strokeWidth:l,strokeOpacity:d,lineDash:c,lineDashOffset:u}}}getLegendData(e){if("category"!==e)return[];const{showInLegend:t}=this.properties;return Array.from(this.processedNodes.values(),(e,i)=>{let{id:n,label:o}=e;return{legendType:"category",id:this.id,itemId:n,seriesId:this.id,enabled:!0,label:{text:null!==o&&void 0!==o?o:n},symbol:this.legendItemSymbol(1,i),hideInLegend:!t,isFixed:!0}})}pickNodeClosestDatum(e){let t,{x:i,y:n}=e,o=1/0;return this.linkSelection.each((e,s)=>{const r=e.distanceSquared(i,n);r<o&&(o=r,t=s)}),this.nodeSelection.each((e,s)=>{const r=e.distanceSquared(i,n);r<o&&(o=r,t=s)}),null==t?void 0:{datum:t,distance:Math.sqrt(o)}}getDatumAriaText(e,t){var i;return 0===e.type?this.ctx.localeManager.t("ariaAnnounceFlowProportionLink",{index:e.index+1,count:this.linkCount,from:e.fromNode.id,to:e.toNode.id,size:e.size,sizeName:null!==(i=this.properties.sizeName)&&void 0!==i?i:this.properties.sizeKey}):1===e.type?this.ctx.localeManager.t("ariaAnnounceFlowProportionNode",{index:e.index+1,count:this.nodeCount,description:t}):void 0}pickFocus(e){var t,i,n;const{datumIndexDelta:o,otherIndexDelta:s}=e,r=null===(t=this.contextNodeData)||void 0===t?void 0:t.nodeData[e.datumIndex-e.datumIndexDelta];let a=r;if(0!==s||0===o)return;if(0===(null===r||void 0===r?void 0:r.type)){const e=Array.from(this.linkSelection,e=>e.datum),t=e.indexOf(r)+o;if(t>=0&&t<e.length)a=e[t];else if(t>0)a=e.at(-1);else{const e=Array.from(this.nodeSelection,e=>e.datum);a=e.at(-1)}}else if(1===(null===r||void 0===r?void 0:r.type)){const e=Array.from(this.nodeSelection,e=>e.datum),t=e.indexOf(r)+o;if(t>=0&&t<e.length)a=e[t];else if(t<0)a=e[0];else{const e=Array.from(this.linkSelection,e=>e.datum);a=e[0]}}if(null==a)return;const l=1===a.type?Array.from(this.nodeSelection).find(e=>e.datum===a):Array.from(this.linkSelection).find(e=>e.datum===a);if(null==l)return;const d=this.computeFocusBounds(l.node);return null!=d?{datum:l.datum,datumIndex:null!==(i=null===(n=this.contextNodeData)||void 0===n?void 0:n.nodeData.indexOf(l.datum))&&void 0!==i?i:0,otherIndex:0,bounds:d,clipFocusBox:!0}:void 0}getCategoryValue(e){}datumIndexForCategoryValue(e){}},{Path:n1}=uE;function o1(e){let{radius:t,startAngle:i,endAngle:n,tension:o}=e;const s=t*Math.cos(i),r=t*Math.sin(i),a=t*Math.cos(n),l=t*Math.sin(n);return{x:[s,s*o,a*o,a],y:[r,r*o,l*o,l]}}var s1=class extends n1{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.radius=0,this.startAngle1=0,this.endAngle1=0,this.startAngle2=0,this.endAngle2=0,this.tension=1}tensionedCurveTo(e,t,i,n,o,s,r,a){const{path:l,tension:d}=this,c=1-d;l.cubicCurveTo((i-e)*c+e,(n-t)*c+t,(o-r)*c+r,(s-a)*c+a,r,a)}updatePath(){const{path:e,centerX:t,centerY:i,radius:n}=this;let{startAngle1:o,endAngle1:s,startAngle2:r,endAngle2:a}=this;o>r&&([o,r]=[r,o],[s,a]=[a,s]),e.clear();const l=t+n*Math.cos(o),d=i+n*Math.sin(o);e.moveTo(l,d),this.tensionedCurveTo(l,d,t,i,t,i,t+n*Math.cos(a),i+n*Math.sin(a)),e.arc(t,i,n,a,r,!0),this.tensionedCurveTo(t+n*Math.cos(r),i+n*Math.sin(r),t,i,t,i,t+n*Math.cos(s),i+n*Math.sin(s)),e.arc(t,i,n,s,o,!0),e.closePath()}};kV([_y()],s1.prototype,"centerX",2),kV([_y()],s1.prototype,"centerY",2),kV([_y()],s1.prototype,"radius",2),kV([_y()],s1.prototype,"startAngle1",2),kV([_y()],s1.prototype,"endAngle1",2),kV([_y()],s1.prototype,"startAngle2",2),kV([_y()],s1.prototype,"endAngle2",2),kV([_y()],s1.prototype,"tension",2);var{FillGradientDefaults:r1,FillPatternDefaults:a1,FillImageDefaults:l1,makeSeriesTooltip:d1,SeriesProperties:c1,Label:u1}=uE,h1=class extends u1{constructor(){super(...arguments),this.spacing=1,this.maxWidth=1}};kV([ru],h1.prototype,"spacing",2),kV([ru],h1.prototype,"maxWidth",2);var p1=class extends kh{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0,this.tension=0}getStyle(e,t,i){var n,o;const{fillOpacity:s,strokeWidth:r,strokeOpacity:a,lineDash:l,lineDashOffset:d,tension:c}=this;return{fill:null!==(n=this.fill)&&void 0!==n?n:e[i%e.length],fillOpacity:s,stroke:null!==(o=this.stroke)&&void 0!==o?o:t[i%e.length],strokeWidth:r,strokeOpacity:a,lineDash:l,lineDashOffset:d,tension:c}}};kV([ru],p1.prototype,"fill",2),kV([ru],p1.prototype,"fillOpacity",2),kV([ru],p1.prototype,"stroke",2),kV([ru],p1.prototype,"strokeOpacity",2),kV([ru],p1.prototype,"strokeWidth",2),kV([ru],p1.prototype,"lineDash",2),kV([ru],p1.prototype,"lineDashOffset",2),kV([ru],p1.prototype,"tension",2),kV([ru],p1.prototype,"itemStyler",2);var g1=class extends kh{constructor(){super(...arguments),this.spacing=1,this.width=1,this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}getStyle(e,t,i){var n,o;const{fillOpacity:s,strokeWidth:r,strokeOpacity:a,lineDash:l,lineDashOffset:d}=this;return{fill:null!==(n=this.fill)&&void 0!==n?n:e[i%e.length],fillOpacity:s,stroke:null!==(o=this.stroke)&&void 0!==o?o:t[i%e.length],strokeWidth:r,strokeOpacity:a,lineDash:l,lineDashOffset:d}}};kV([ru],g1.prototype,"spacing",2),kV([ru],g1.prototype,"width",2),kV([ru],g1.prototype,"fill",2),kV([ru],g1.prototype,"fillOpacity",2),kV([ru],g1.prototype,"stroke",2),kV([ru],g1.prototype,"strokeOpacity",2),kV([ru],g1.prototype,"strokeWidth",2),kV([ru],g1.prototype,"lineDash",2),kV([ru],g1.prototype,"lineDashOffset",2),kV([ru],g1.prototype,"itemStyler",2);var m1=class extends c1{constructor(){super(...arguments),this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.nodes=void 0,this.fillGradientDefaults=new r1,this.fillPatternDefaults=new a1,this.fillImageDefaults=new l1,this.fills=[],this.strokes=[],this.label=new h1,this.link=new p1,this.node=new g1,this.tooltip=d1()}};kV([ru],m1.prototype,"fromKey",2),kV([ru],m1.prototype,"toKey",2),kV([ru],m1.prototype,"idKey",2),kV([ru],m1.prototype,"idName",2),kV([ru],m1.prototype,"labelKey",2),kV([ru],m1.prototype,"labelName",2),kV([ru],m1.prototype,"sizeKey",2),kV([ru],m1.prototype,"sizeName",2),kV([ru],m1.prototype,"nodes",2),kV([ru],m1.prototype,"fillGradientDefaults",2),kV([ru],m1.prototype,"fillPatternDefaults",2),kV([ru],m1.prototype,"fillImageDefaults",2),kV([ru],m1.prototype,"fills",2),kV([ru],m1.prototype,"strokes",2),kV([ru],m1.prototype,"label",2),kV([ru],m1.prototype,"link",2),kV([ru],m1.prototype,"node",2),kV([ru],m1.prototype,"tooltip",2);var{SeriesNodePickMode:f1,createDatumId:v1,Sector:y1,getShapeStyle:b1,getLabelStyles:x1,BBox:C1}=uE,S1=e=>e.startAngle+Gp(e.startAngle,e.endAngle)/2,w1=class extends i1{constructor(e){super({moduleCtx:e,pickModes:[f1.NEAREST_NODE,f1.EXACT_SHAPE_MATCH]}),this.properties=new m1}isLabelEnabled(){return(null!=this.properties.labelKey||null==this.nodes)&&this.properties.label.enabled}linkFactory(){return new s1}nodeFactory(){return new y1}createNodeData(){const{id:e,_nodeDataDependencies:{seriesRectWidth:t,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0},properties:n}=this,{fromKey:o,toKey:s,sizeKey:r,labelKey:a,label:{spacing:l,maxWidth:d,fontSize:c},node:{width:u,spacing:h}}=n,g=t/2,m=i/2;let f=[];const{nodeGraph:v,links:y}=this.getNodeGraph(e=>p(p({},e),{},{centerX:g,centerY:m,innerRadius:Number.NaN,outerRadius:Number.NaN,startAngle:Number.NaN,endAngle:Number.NaN}),e=>p(p({},e),{},{centerX:g,centerY:m,radius:Number.NaN,startAngle1:Number.NaN,endAngle1:Number.NaN,startAngle2:Number.NaN,endAngle2:Number.NaN}),{includeCircularReferences:!0});let b=0;for(const[p,{datum:E,linksBefore:P,linksAfter:O}]of v.entries()){const e=P.reduce((e,t)=>{let{link:i}=t;return e+i.size},0)+O.reduce((e,t)=>{let{link:i}=t;return e+i.size},0);if(0===e)v.delete(p);else{const{label:t}=n;E.size=e,b+=E.size;const i=t.enabled?this.getLabelText(E.label,E.datum,a,"label",[],t,{datum:E.datum,value:E.label,fromKey:o,toKey:s,sizeKey:r,size:E.size}):void 0;E.label=ed(i)}}let x=0;if(this.isLabelEnabled()){const e=Wm(this.properties.label);let t=0;for(const{datum:i}of v.values()){const{id:n,label:o}=i;if(null==o)continue;const s=Ym(o,{maxWidth:d,font:this.properties.label,textWrap:"never"}),{width:r}=e.measureLines(s);t=Math.max(r,t),f.push({id:n,text:s,centerX:g,centerY:m,angle:Number.NaN,radius:Number.NaN,size:i.size,datumIndex:i.datumIndex,nodeDatum:i})}x=t+l}const C=v.size;let S=Math.min(t,i)/2-u-x,w=h/S;if(0!==x&&(C*w>=1.5*Math.PI||S<=0)&&(f=[],S=Math.min(t,i)/2-u,w=h/S),C*w>=2*Math.PI||S<=0)return void jr.warnOnce("There was insufficient space to display the Chord Series.");const M=S,k=S+u,D=Math.max((2*Math.PI-C*w)/b,0);let I=0;for(const{datum:p}of v.values()){p.innerRadius=M,p.outerRadius=k,p.startAngle=I,p.endAngle=I+p.size*D,I=p.endAngle+w;const e=(p.innerRadius+p.outerRadius)/2,t=S1(p);p.midPoint={x:p.centerX+e*Math.cos(t),y:p.centerY+e*Math.sin(t)}}const A=[];for(const{datum:p,linksBefore:E,linksAfter:P}of v.values()){const e=S1(p),t=[...E.map(t=>({link:t.link,distance:Gp(S1(t.node.datum),e),after:!1})),...P.map(t=>({link:t.link,distance:Gp(S1(t.node.datum),e),after:!0}))];let i=p.startAngle;for(const{link:n,after:o}of t.toSorted((e,t)=>e.distance-t.distance)){const e=n.size*D;o?(n.startAngle1=i,n.endAngle1=i+e):(n.startAngle2=i,n.endAngle2=i+e),i+=n.size*D}A.push(p)}const{tension:L}=this.properties.link;for(const p of y){p.radius=S;const e=o1({radius:S,startAngle:p.startAngle1,endAngle:p.endAngle2,tension:L}),t=o1({radius:S,startAngle:p.startAngle2,endAngle:p.endAngle1,tension:L}),i=ey(...e.x,.5),n=ey(...e.y,.5),o=ey(...t.x,.5),s=ey(...t.y,.5);p.midPoint={x:p.centerX+(i+o)/2,y:p.centerY+(n+s)/2},A.push(p)}for(const p of f){var N;const e=null===(N=v.get(p.id))||void 0===N?void 0:N.datum;null!=e&&(p.radius=k+l,p.angle=Pp(e.startAngle+Gp(e.startAngle,e.endAngle)/2),p.datumIndex=e.datumIndex,p.nodeDatum=e)}f.sort((e,t)=>e.angle-t.angle);let T=1/0,R=-1/0;return f=f.filter(e=>{const t=Vl(c),i=Math.atan2(t/2,e.radius),n=e.angle-i,o=e.angle+i;return!zp(T,n,o)&&(!zp(R,n,o)&&(T=Math.min(n,T),R=Math.max(o,R),!0))}),{itemId:e,nodeData:A,labelData:f}}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t)}updateLabelNodes(e){const t={toKey:this.properties.toKey,fromKey:this.properties.fromKey,sizeKey:this.properties.sizeKey,size:Number.NaN},i=this.getHighlightedDatum();e.labelSelection.each((e,n)=>{var o;const{size:s,text:r,centerX:a,centerY:l,radius:d,angle:c,datumIndex:u,nodeDatum:h}=n;t.size=s;const p=this.isLabelHighlighted(h,i),g=this.getHighlightStyle(p,u),m=x1(this,void 0,t,this.properties.label,p,i),{fontStyle:f,fontWeight:v,fontSize:y,fontFamily:b,color:x}=m;e.visible=!0,e.translationX=a+d*Math.cos(c),e.translationY=l+d*Math.sin(c),e.text=r,e.fill=x,e.fontStyle=f,e.fontWeight=v,e.fontSize=y,e.fontFamily=b,e.textBaseline="middle",Math.cos(c)>=0?(e.textAlign="left",e.rotation=c):(e.textAlign="right",e.rotation=c-Math.PI);const C=null!==(o=g.opacity)&&void 0!==o?o:1;e.opacity=C,e.fillOpacity=C,e.setBoxing(m)})}updateNodeSelection(e){return e.datumSelection.update(e.nodeData,void 0,e=>v1(e.type,e.id))}getNodeStyle(e,t,i){const{properties:n}=this,{fills:o,strokes:s,fillGradientDefaults:r,fillPatternDefaults:a,fillImageDefaults:l}=n,{itemStyler:d}=n.node,c=xu(this.getHighlightStyle(i,e.datumIndex),n.node.getStyle(o,s,t));let u=b1(c,r,a,l);if(null!=d&&null!=e.datumIndex){const t=this.cachedDatumCallback(v1(e.datumIndex.index,"node",i?"highlight":"node"),()=>{const t=this.makeItemStylerParams(e,i,u);return this.callWithContext(d,t)});t&&(u=b1(xu(t,u),r,a,l))}return u.opacity=1,u}makeItemStylerParams(e,t,i){var n,o;let{datum:s,datumIndex:r,size:a=0,label:l}=e;const{id:d}=this,c=null===(n=this.ctx.highlightManager)||void 0===n?void 0:n.getActiveHighlight(),u=this.getHighlightStateString(c,t,r),h=null!==(o=this.filterItemStylerFillParams(i.fill))&&void 0!==o?o:i.fill;return p(p({seriesId:d,datum:s,highlightState:u},i),{},{size:a,label:l,fill:h})}updateNodeNodes(e){const{datumSelection:t,isHighlight:i}=e,n=this.getShapeFillBBox();t.each((e,t)=>{const{datumIndex:o}=t,s=this.getNodeStyle(t,o.index,i);e.setStyleProperties(s,n),e.centerX=t.centerX,e.centerY=t.centerY,e.innerRadius=t.innerRadius,e.outerRadius=t.outerRadius,e.startAngle=t.startAngle,e.endAngle=t.endAngle,e.inset=e.strokeWidth/2})}updateLinkSelection(e){return e.datumSelection.update(e.nodeData,void 0,e=>v1(e.type,e.index,e.fromNode.id,e.toNode.id))}getLinkStyle(e,t,i){let{datumIndex:n,datum:o}=e;const{id:s,properties:r}=this,{fills:a,strokes:l,fillGradientDefaults:d,fillPatternDefaults:c,fillImageDefaults:u}=r,{itemStyler:h}=r.link,g=xu(this.getHighlightStyle(i,n),r.link.getStyle(a,l,t.index));let m=b1(g,d,c,u);if(null!=h&&null!=n){var f;const e=null===(f=this.ctx.highlightManager)||void 0===f?void 0:f.getActiveHighlight(),r=this.cachedDatumCallback(v1(n.index,"link",i?"highlight":"node"),()=>{const n=this.getHighlightStateString(e,i,t);return this.callWithContext(h,p({seriesId:s,datum:o,highlightState:n},m))});r&&(m=b1(xu(r,m),d,c,u))}return m.opacity=1,m}updateLinkNodes(e){const{datumSelection:t,isHighlight:i}=e,n=this.getShapeFillBBox();t.each((e,t)=>{const o=t.fromNode.datumIndex,s=this.getLinkStyle(t,o,i);e.centerX=t.centerX,e.centerY=t.centerY,e.radius=t.radius,e.startAngle1=t.startAngle1,e.endAngle1=t.endAngle1,e.startAngle2=t.startAngle2,e.endAngle2=t.endAngle2,e.tension=s.tension,e.setStyleProperties(s,n)})}getShapeFillBBox(){var e,t,i,n;const o=null!==(e=null===(t=this._nodeDataDependencies)||void 0===t?void 0:t.seriesRectWidth)&&void 0!==e?e:0,s=null!==(i=null===(n=this._nodeDataDependencies)||void 0===n?void 0:n.seriesRectHeight)&&void 0!==i?i:0,r=Math.min(o,s),a=new C1((o-r)/2,(s-r)/2,o,s);return{series:a,axis:a}}getTooltipContent(e){var t,i,n;const{id:o,linksProcessedData:s,nodesProcessedData:r,properties:a,ctx:{formatManager:l}}=this,{fromKey:d,toKey:c,sizeKey:u,sizeName:h,tooltip:g}=a,m=null===(t=this.contextNodeData)||void 0===t?void 0:t.nodeData.find(t=>t.datumIndex.type===e.type&&t.datumIndex.index===e.index);if(null==m)return;const f=0===m.type?m.fromNode.index:m.index,v=0===m.type?"".concat(m.fromNode.label," - ").concat(m.toNode.label):m.label,y=0===e.type?null===s||void 0===s||null===(i=s.dataSources.get(this.id))||void 0===i?void 0:i.data[e.index]:null===r||void 0===r||null===(n=r.dataSources.get(this.id))||void 0===n?void 0:n.data[e.index],b=m.size;let x;if(0===m.type){const t=m.fromNode.datumIndex;x=this.getLinkStyle({datumIndex:e,datum:y},t,!1)}else{const t=m.label;x=this.getNodeStyle({datumIndex:e,datum:y,size:b,label:t},e.index,!1)}const C=[];if(null!=u){const e=l.format(this.callWithContext.bind(this),{type:"number",value:b,datum:y,seriesId:o,legendItemName:void 0,key:u,source:"tooltip",property:"size",domain:[],boundSeries:this.getFormatterContext("size"),fractionDigits:void 0});C.push({label:h,fallbackLabel:u,value:null!==e&&void 0!==e?e:String(b)})}return this.formatTooltipWithContext(g,{title:v,symbol:this.legendItemSymbol(m.type,f,x),data:C},p({seriesId:o,datum:y,title:v,fromKey:d,toKey:c,sizeKey:u,sizeName:h,size:b},x))}computeFocusBounds(e){return e}hasItemStylers(){return null!=this.properties.node.itemStyler||null!=this.properties.link.itemStyler||null!=this.properties.label.itemStyler}};w1.className="ChordSeries",w1.type="chord";var{chordSeriesThemeableOptionsDef:M1}=uE,k1=p(p(p({},M1),Yc),{},{type:pd(jd("chord")),fromKey:pd(Ad),toKey:pd(Ad),sizeKey:Ad,sizeName:Ad});k1.fillGradientDefaults=gd(nc),k1.fillPatternDefaults=gd(oc),k1.fillImageDefaults=gd(sc);var D1={type:"series",name:"chord",chartType:"standalone",enterprise:!0,solo:!0,version:GC,dependencies:[W0],options:k1,themeTemplate:{series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},fillGradientDefaults:uE.FILL_GRADIENT_LINEAR_DEFAULTS,fillPatternDefaults:uE.FILL_PATTERN_DEFAULTS,fillImageDefaults:uE.FILL_IMAGE_DEFAULTS,highlight:uE.singleSeriesHighlightStyle(),label:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!0,fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:5,maxWidth:100}),node:{spacing:8,width:10,strokeWidth:{$isUserOption:["./stroke",2,0]}},link:{fillOpacity:.5,strokeWidth:{$isUserOption:["./stroke",2,0]},tension:.4}},legend:{enabled:!1,toggleSeries:!1}},create:e=>new w1(e)},I1={$eq:[{$path:["/series/0/direction",void 0]},"horizontal"]},A1={autoRotate:{$path:"/series/0/stageLabel/autoRotate"},autoRotateAngle:{$path:"/series/0/stageLabel/autoRotateAngle"},avoidCollisions:{$path:["/series/0/stageLabel/avoidCollisions",!0]},border:{$path:["/series/0/stageLabel/border"]},color:{$path:["/series/0/stageLabel/color",{$ref:"textColor"}]},cornerRadius:{$path:["/series/0/stageLabel/cornerRadius"]},enabled:{$if:[{$eq:[{$path:"/series/0/stageLabel/enabled"},void 0]},!0,{$path:"/series/0/stageLabel/enabled"}]},fill:{$path:["/series/0/stageLabel/fill"]},fillOpacity:{$path:["/series/0/stageLabel/fillOpacity"]},fontSize:{$path:["/series/0/stageLabel/fontSize",{$ref:"fontSize"}]},fontStyle:{$path:["/series/0/stageLabel/fontStyle",{$ref:"fontStyle"}]},fontWeight:{$path:["/series/0/stageLabel/fontWeight",{$ref:"fontWeight"}]},format:{$path:"/series/0/stageLabel/format"},formatter:{$path:"/series/0/stageLabel/formatter"},itemStyler:{$path:"/series/0/stageLabel/itemStyler"},minSpacing:{$path:"/series/0/stageLabel/minSpacing"},padding:{$path:["/series/0/stageLabel/padding"]},rotation:{$path:["/series/0/stageLabel/rotation",0]}},L1={y:{type:{$if:[I1,zh.NUMBER,zh.CATEGORY]},position:{$if:[I1,Fh.LEFT,{$if:[{$eq:[{$path:["/series/0/stageLabel/placement",void 0]},"after"]},Fh.RIGHT,Fh.LEFT]}]},label:{$if:[I1,void 0,A1]}},x:{type:{$if:[I1,zh.CATEGORY,zh.NUMBER]},position:{$if:[I1,{$if:[{$eq:[{$path:["/series/0/stageLabel/placement",void 0]},"before"]},Fh.TOP,Fh.BOTTOM]},Fh.BOTTOM]},label:{$if:[I1,A1,void 0]}}},N1={series:{direction:"vertical",strokeWidth:{$isUserOption:["./strokes/0",2,0]},spacingRatio:.25,fills:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},[{$path:["/0",void 0,{$palette:"fills"}]}],{$applySwitch:[{$path:["/type",void 0,{$value:"$1"}]},{$value:"$1"},["gradient",uE.FILL_GRADIENT_LINEAR_SINGLE_DEFAULTS],["pattern",uE.FILL_PATTERN_SINGLE_DEFAULTS],["image",uE.FILL_IMAGE_DEFAULTS]]}]},strokes:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},[{$path:["/0",void 0,{$palette:"strokes"}]}]]},label:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"}}),dropOff:{enabled:!0,fillOpacity:.2,strokeWidth:{$isUserOption:["./stroke",2,0]}},shadow:{enabled:!1,color:Hh,xOffset:3,yOffset:3,blur:5},highlight:{unhighlightedItem:{opacity:.6}}},axes:{[zh.NUMBER]:{nice:!1,gridLine:{enabled:!1},crosshair:{enabled:!1},label:{enabled:!1}},[zh.CATEGORY]:{line:{enabled:!1}}}},{BBox:T1,Path:R1}=uE,E1=1e-6;function P1(e,t){let[i,n]=e,[o,s]=t;return Math.abs(i-o)<=E1&&Math.abs(n-s)<=E1}var O1=class extends R1{constructor(){super(...arguments),this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0}get midPoint(){const{x0:e,y0:t,x1:i,y1:n,x2:o,y2:s,x3:r,y3:a}=this;return{x:(e+i+o+r)/4,y:(t+n+s+a)/4}}distanceSquared(e,t){if(this.containsPoint(e,t))return 0;const{x0:i,y0:n,x1:o,y1:s,x2:r,y2:a,x3:l,y3:d}=this;return Math.min(Ng(e,t,i,n,o,s,1/0),Ng(e,t,o,s,r,a,1/0),Ng(e,t,r,a,l,d,1/0),Ng(e,t,l,d,i,n,1/0))}computeBBox(){const{x0:e,y0:t,x1:i,y1:n,x2:o,y2:s,x3:r,y3:a}=this,l=Math.min(e,i,o,r),d=Math.max(e,i,o,r)-l,c=Math.min(t,n,s,a),u=Math.max(t,n,s,a)-c;return new T1(l,c,d,u)}updatePath(){const{path:e,x0:t,y0:i,x1:n,y1:o,x2:s,y2:r,x3:a,y3:l}=this,d=[[t,i],[n,o],[s,r],[a,l]];let c,u;e.clear();for(const h of d){if(null!=c&&P1(c,h)||null!=u&&P1(u,h))continue;const[t,i]=h;null==c?e.moveTo(t,i):e.lineTo(t,i),null!==c&&void 0!==c||(c=h),u=h}e.closePath()}};kV([_y()],O1.prototype,"x0",2),kV([_y()],O1.prototype,"y0",2),kV([_y()],O1.prototype,"x1",2),kV([_y()],O1.prototype,"y1",2),kV([_y()],O1.prototype,"x2",2),kV([_y()],O1.prototype,"y2",2),kV([_y()],O1.prototype,"x3",2),kV([_y()],O1.prototype,"y3",2);var{NODE_UPDATE_STATE_TO_PHASE_MAPPING:F1}=uE;function z1(e,t,i,n){const{x0:o,y0:s,x1:r,y1:a,x2:l,y2:d,x3:c,y3:u,opacity:h}=e;return i?{x0:(o+c)/2,y0:(s+u)/2,x1:(r+l)/2,y1:(a+d)/2,x2:(r+l)/2,y2:(a+d)/2,x3:(o+c)/2,y3:(s+u)/2,opacity:h}:{x0:(o+r)/2,y0:(s+a)/2,x1:(o+r)/2,y1:(s+a)/2,x2:(l+c)/2,y2:(d+u)/2,x3:(l+c)/2,y3:(d+u)/2,opacity:h}}function B1(e,t){const{x0:i,y0:n,x1:o,y1:s,x2:r,y2:a,x3:l,y3:d,opacity:c}=t;return{x0:i,y0:n,x1:o,y1:s,x2:r,y2:a,x3:l,y3:d,opacity:c}}var{SeriesNodePickMode:V1,valueProperty:G1,keyProperty:H1,updateLabelNode:j1,SMALLEST_KEY_INTERVAL:W1,LARGEST_KEY_INTERVAL:_1,diff:K1,fixNumericExtent:U1,seriesLabelFadeInAnimation:Y1,resetMotion:$1,resetLabelFn:Z1,animationValidation:X1,computeBarFocusBounds:q1,ContinuousScale:Q1,Group:J1,Selection:e2,PointerEvents:t2,motion:i2,checkCrisp:n2,createDatumId:o2}=uE,s2=class extends uE.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.xKey=n.properties.stageKey,this.yKey=n.properties.valueKey}},r2=class extends uE.AbstractBarSeries{constructor(e){let{moduleCtx:t,animationResetFns:i}=e;super({moduleCtx:t,pickModes:[V1.AXIS_ALIGNED,V1.EXACT_SHAPE_MATCH],propertyKeys:{x:["stageKey"],y:["valueKey"]},propertyNames:{x:[],y:[]},categoryKey:"xValue",datumSelectionGarbageCollection:!1,animationResetFns:{datum:i.datum,label:Z1}}),this.NodeEvent=s2,this.connectorNodeGroup=this.contentGroup.appendChild(new J1({name:"".concat(this.id,"-series-connectorNodes"),zIndex:Nh.BACKGROUND})),this.connectorSelection=e2.select(this.connectorNodeGroup,()=>this.connectionFactory()),this.connectorNodeGroup.pointerEvents=t2.None}get pickModeAxis(){return"main-category"}setZIndex(e){return super.setZIndex(e),this.connectorNodeGroup.zIndex=[Nh.BACKGROUND,e],!0}isVertical(){return!super.isVertical()}connectionFactory(){return new O1}getKeyAxis(e){return e===_u.X?this.properties.xKeyAxis:e===_u.Y?this.properties.yKeyAxis:void 0}async processData(e){var t,i,n,o;const{stageKey:s,valueKey:r}=this.properties,{visible:a,id:l}=this,d=null===(t=this.getCategoryAxis())||void 0===t?void 0:t.scale,c=null===(i=this.getValueAxis())||void 0===i?void 0:i.scale,{isContinuousX:u,xScaleType:h,yScaleType:g}=this.getScaleInformation({xScale:d,yScale:c}),m=[];this.needsDataModelDiff()&&this.processedData&&m.push(K1(this.id,this.processedData)),this.ctx.animationManager.isSkipped()||m.push(X1());const f=this.visible?{}:{forceValue:0},{processedData:v}=await this.requestDataModel(e,this.data,{props:[H1(s,h,{id:"xValue"}),G1(r,g,p(p({id:"yValue"},f),{},{validation:(e,t,i)=>a&&this.ctx.legendManager.getItemEnabled({seriesId:l,itemId:i}),invalidValue:0})),...u?[W1,_1]:[],...m],groupByKeys:!1});this.smallestDataInterval=null===(n=v.reduced)||void 0===n?void 0:n.smallestKeyInterval,this.largestDataInterval=null===(o=v.reduced)||void 0===o?void 0:o.largestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i,id:n,ctx:{legendManager:o}}=this;if(!t||!i)return{domain:[]};const{keys:[s]}=t.domain;if(e===this.getCategoryDirection()){const e=i.resolveProcessedDataDefById(this,"xValue");if("key"===(null===e||void 0===e?void 0:e.def.type)&&"category"===(null===e||void 0===e?void 0:e.def.valueType)){if(!this.hasData)return{domain:[]};return{domain:s.filter((e,t)=>o.getItemEnabled({seriesId:n,itemId:t})),sortMetadata:i.getKeySortMetadata(this,"xValue",t)}}return{domain:this.padBandExtent(s)}}{const t=this.domainForClippedRange(e,["yValue"],"xValue"),i=Math.max(...t);return{domain:U1([-i,i])}}}getSeriesRange(e,t){return[Number.NaN,Number.NaN]}createNodeData(){var e,t;const{hasData:i,data:n,dataModel:o,groupScale:s,processedData:r,id:a,ctx:{legendManager:l}}=this,d=this.getCategoryAxis(),c=this.getValueAxis();if(!(i&&n&&d&&c&&o&&"ungrouped"===(null===r||void 0===r?void 0:r.type)))return;const u=d.scale,h=c.scale,p=this.getBarDirection()===_u.X,{stageKey:g,valueKey:m}=this.properties,f="".concat(m),v={itemId:f,nodeData:[],labelData:[],connectorData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible},y=this.visible;if(!y)return v;const b=o.resolveKeysById(this,"xValue",r),x=o.resolveColumnById(this,"yValue",r),{barWidth:C,groupIndex:S}=this.updateGroupScale(d),w=Q1.is(u)?-.5*C:0,M=n2(null===d||void 0===d?void 0:d.scale,null===d||void 0===d?void 0:d.visibleRange,this.smallestDataInterval,this.largestDataInterval);let k;const D=null!==(e=null===(t=r.dataSources.get(this.id))||void 0===t?void 0:t.data)&&void 0!==e?e:[];for(const[A,L]of D.entries()){var I;const e=y&&l.getItemEnabled({seriesId:a,itemId:A}),t=b[A];if(null==t)continue;const i=Math.round(u.convert(t))+s.convert(String(S))+w,n=x[A],o=Math.round(h.convert(-n)),r=Math.round(h.convert(n)),d=this.getItemStyle({datum:L,datumIndex:A},!1),c=Math.max(null!==(I=d.strokeWidth)&&void 0!==I?I:0,Math.abs(r-o)),D={x:p?Math.min(r,o):i,y:p?i:Math.min(r,o),width:p?c:C,height:p?C:c},N={x:D.x+D.width/2,y:D.y+D.height/2},T=this.createLabelData({datumIndex:A,rect:D,barAlongX:p,yDatum:n,datum:L,visible:e}),R={index:A,series:this,itemId:f,datum:L,datumIndex:A,xValue:t,yValue:n,xKey:g,yKey:m,x:D.x,y:D.y,width:D.width,height:D.height,midPoint:N,crisp:M,label:T,visible:e};if(v.nodeData.push(R),null!=T&&v.labelData.push(T),null!=k){const e=k.rect,t=k.nodeDatum,i=k.datumIndex;p?v.connectorData.push({datum:t,datumIndex:i,x0:e.x,y0:e.y+e.height,x1:e.x+e.width,y1:e.y+e.height,x2:D.x+D.width,y2:D.y,x3:D.x,y3:D.y,opacity:1}):v.connectorData.push({datum:t,datumIndex:i,x0:e.x+e.width,y0:e.y,x1:D.x,y1:D.y,x2:D.x,y2:D.y+D.height,x3:e.x+e.width,y3:e.y+e.height,opacity:1})}e&&(k={itemId:f,rect:D,nodeDatum:R,datumIndex:A})}return v}updateNodes(e,t){var i,n;super.updateNodes(e,t);const{connectorSelection:o}=this,s=null!==(i=null===(n=this.contextNodeData)||void 0===n?void 0:n.connectorData)&&void 0!==i?i:[];this.connectorSelection=this.updateConnectorSelection({connectorSelection:o,connectorData:s}),this.updateConnectorNodes({connectorSelection:o})}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,n=null!==t&&void 0!==t?t:[];return i.update(n,void 0,e=>this.getDatumId(e))}updateConnectorSelection(e){const{connectorData:t,connectorSelection:i}=e;return i.update(this.connectorEnabled()?t:[],void 0,e=>this.getDatumId(e.datum))}updateConnectorNodes(e){const t=this.getShapeFillBBox();e.connectorSelection.each((e,i)=>{const{fill:n,fillOpacity:o,stroke:s,strokeOpacity:r,strokeWidth:a,lineDash:l,lineDashOffset:d}=this.connectorStyle(i.datumIndex);e.setProperties(B1(0,i)),e.setStyleProperties({fill:n,stroke:s,fillOpacity:o,strokeOpacity:r,strokeWidth:a,lineDash:l,lineDashOffset:d},t)})}updateLabelSelection(e){const t=this.properties.label.enabled?e.labelData:[];return e.labelSelection.update(t,e=>{e.pointerEvents=t2.None})}updateLabelNodes(e){var t;const i={stageKey:this.properties.stageKey,valueKey:this.properties.valueKey},n=null===(t=this.ctx.highlightManager)||void 0===t?void 0:t.getActiveHighlight(),{isHighlight:o=!1,labelSelection:s}=e;s.each((e,t)=>{var s,r;const a=this.getHighlightStyle(o,t.datumIndex);e.visible=t.visible||o,e.fillOpacity=null!==(s=a.opacity)&&void 0!==s?s:1,e.opacity=null!==(r=a.opacity)&&void 0!==r?r:1,j1(this,e,i,this.properties.label,t,o,n)})}getHighlightLabelData(e,t){if(t.label)return[p({},t.label)]}getTooltipContent(e){var t;const{id:i,dataModel:n,processedData:o,properties:s}=this,{stageKey:r,valueKey:a,tooltip:l,legendItemName:d}=s,c=this.getCategoryAxis(),u=this.getValueAxis();if(!n||!o||!c||!u)return;const h=null===(t=o.dataSources.get(this.id))||void 0===t?void 0:t.data[e],g=n.resolveKeysById(this,"xValue",o)[e],m=n.resolveColumnById(this,"yValue",o)[e];return null!=g?this.formatTooltipWithContext(l,{symbol:this.legendItemSymbol(e),data:[{label:this.getAxisValueText(c,"tooltip",g,h,r,d),value:this.getAxisValueText(u,"tooltip",m,h,a,d)}]},p({seriesId:i,datum:h,title:r,stageKey:r,valueKey:a},this.tooltipStyle(h,e))):void 0}resetAllAnimation(e){super.resetAllAnimation(e),$1([this.connectorSelection],B1)}animateEmptyUpdateReady(e){let{labelSelection:t}=e;const{connectorSelection:i}=this,n=function(e,t){const i=e=>null==e;return{fromFn:(n,o,s)=>{let r;"updated"===s&&i(o)?s="removed":"updated"===s&&i(n.previousDatum)&&(s="added"),r="added"===s&&null==n.previousDatum&&"fade"===t?p(p({},B1(0,o)),{},{opacity:0}):"unknown"===s||"added"===s?z1(o,n.previousDatum,e):{x0:n.x0,y0:n.y0,x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,x3:n.x3,y3:n.y3,opacity:n.opacity};const a=F1[s];return p(p({},r),{},{phase:a})},toFn:(n,o,s)=>{let r;return r="removed"===s&&null==n.datum&&"fade"===t?p(p({},B1(0,o)),{},{opacity:0}):"removed"===s||i(o)?z1(o,n.previousDatum,e):B1(0,o),r}}}(this.isVertical(),"normal");i2.fromToMotion(this.id,"connectors",this.ctx.animationManager,[i],n),Y1(this,"labels",this.ctx.animationManager,t)}animateWaitingUpdateReady(e){const{labelSelection:t}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id),Y1(this,"labels",this.ctx.animationManager,t)}getDatumId(e){return o2(e.xValue)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds(e){var t;let{datumIndex:i}=e;return q1(this,null===(t=this.contextNodeData)||void 0===t?void 0:t.nodeData[i])}legendItemSymbol(e){const{strokeWidth:t,fillOpacity:i,strokeOpacity:n,lineDash:o,lineDashOffset:s,fill:r,stroke:a}=this.properties.getStyle(e);return{marker:{fill:r,fillOpacity:i,stroke:a,strokeWidth:t,strokeOpacity:n,lineDash:o,lineDashOffset:s}}}getLegendData(e){var t,i;const{id:n,processedData:o,dataModel:s,ctx:{legendManager:r},visible:a}=this;if(!s||!o||"category"!==e)return[];const{showInLegend:l}=this.properties,d=s.resolveKeysById(this,"xValue",o);return(null!==(t=null===(i=o.dataSources.get(this.id))||void 0===i?void 0:i.data)&&void 0!==t?t:[]).map((e,t)=>{const i=d[t];if(null!=i)return{legendType:"category",id:n,datum:e,itemId:t,seriesId:n,enabled:a&&r.getItemEnabled({seriesId:n,itemId:t}),label:{text:String(i)},symbol:this.legendItemSymbol(t),skipAnimations:!0,hideInLegend:!l}}).filter(e=>null!=e)}hasItemStylers(){return null!=this.properties.itemStyler||null!=this.properties.label.itemStyler}},{Label:a2,AbstractBarSeriesProperties:l2,makeSeriesTooltip:d2,AxisLabel:c2}=uE,u2=class extends a2{constructor(){super(...arguments),this.spacing=0}};kV([ru],u2.prototype,"placement",2),kV([ru],u2.prototype,"spacing",2);var h2=class extends c2{};kV([ru],h2.prototype,"placement",2);var p2=class extends l2{constructor(){super(...arguments),this.fills=[],this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.label=new u2,this.stageLabel=new h2,this.tooltip=d2()}getStyle(e){const{fills:t,strokes:i,fillOpacity:n,strokeWidth:o,strokeOpacity:s,lineDash:r,lineDashOffset:a}=this;return{fill:t[e],fillOpacity:n,stroke:i[e],strokeWidth:o,strokeOpacity:s,lineDash:r,lineDashOffset:a,opacity:1}}};function g2(e,t){let{x:i,y:n,width:o,height:s,opacity:r}=t;return{x1:i,y1:n,x2:i+o,y2:n+s,opacity:null!==r&&void 0!==r?r:1}}kV([ru],p2.prototype,"stageKey",2),kV([ru],p2.prototype,"valueKey",2),kV([ru],p2.prototype,"fills",2),kV([ru],p2.prototype,"fillOpacity",2),kV([ru],p2.prototype,"strokes",2),kV([ru],p2.prototype,"strokeWidth",2),kV([ru],p2.prototype,"strokeOpacity",2),kV([ru],p2.prototype,"lineDash",2),kV([ru],p2.prototype,"lineDashOffset",2),kV([ru],p2.prototype,"label",2),kV([ru],p2.prototype,"stageLabel",2),kV([ru],p2.prototype,"tooltip",2);var{Line:m2}=uE,f2=class extends r2{constructor(e){super({moduleCtx:e,animationResetFns:{datum:g2}}),this.properties=new p2}get hasData(){var e;const{id:t,ctx:{legendManager:i}}=this,n=null===(e=this.data)||void 0===e?void 0:e.data.reduce((e,n,o)=>e+(i.getItemEnabled({seriesId:t,itemId:o})?1:0),0);return null!=n&&n>1}getBandScalePadding(){return{inner:1,outer:0}}connectorEnabled(){return!0}getItemStyle(e,t){let{datumIndex:i}=e;return this.properties.getStyle(i)}connectorStyle(e){return this.properties.getStyle(e)}nodeFactory(){return new m2}createLabelData(e){let{datumIndex:t,rect:i,barAlongX:n,yDatum:o,datum:s,visible:r}=e;const{stageKey:a,valueKey:l,label:d}=this.properties,{spacing:c,placement:u}=d;if(!d.enabled)return;let h,p,g,m;if(n)switch(h=i.x+i.width/2,g="center",u){case"before":p=i.y-c,m="bottom";break;case"after":p=i.y+i.height+c,m="top";break;default:p=i.y+i.height/2,m="middle"}else switch(p=i.y+i.height/2,m="middle",u){case"before":h=i.x-c,g="right";break;case"after":h=i.x+i.width+c,g="left";break;default:h=i.x+i.width/2,g="center"}const f=this.getSeriesDomain(_u.Y).domain;return{x:h,y:p,textAlign:g,textBaseline:m,text:this.getLabelText(o,s,l,"y",f,d,{itemId:l,value:o,datum:s,stageKey:a,valueKey:l}),itemId:l,datum:s,datumIndex:t,series:this,visible:r}}updateDatumNodes(e){const t=this.getHighlightStyle(e.isHighlight);e.datumSelection.each((e,i)=>{var n,o,s,r;e.setProperties(g2(0,i)),e.stroke=null===t||void 0===t?void 0:t.stroke,e.strokeWidth=null!==(n=null===t||void 0===t?void 0:t.strokeWidth)&&void 0!==n?n:0,e.strokeOpacity=null!==(o=null===t||void 0===t?void 0:t.strokeOpacity)&&void 0!==o?o:1,e.lineDash=null===t||void 0===t?void 0:t.lineDash,e.lineDashOffset=null!==(s=null===t||void 0===t?void 0:t.lineDashOffset)&&void 0!==s?s:0,e.opacity=null!==(r=null===t||void 0===t?void 0:t.opacity)&&void 0!==r?r:1})}tooltipStyle(e,t){const{fill:i,stroke:n,fillOpacity:o,strokeOpacity:s,strokeWidth:r,lineDash:a,lineDashOffset:l}=this.properties.getStyle(t);return{fill:i,fillOpacity:o,stroke:n,strokeOpacity:s,strokeWidth:r,lineDash:a,lineDashOffset:l}}hasItemStylers(){return null!=this.properties.label.itemStyler}};f2.className="ConeFunnelSeries",f2.type="cone-funnel";var{coneFunnelSeriesThemeableOptionsDef:v2}=uE,y2=p(p(p({},Mu(Yc,["showInLegend"])),v2),{},{type:pd(jd("cone-funnel")),stageKey:pd(Ad),valueKey:pd(Ad)}),b2={series:{direction:"vertical",fills:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"secondSequentialColors"},uE.SAFE_RANGE2_OPERATION]},{$applySwitch:[{$path:["/type",void 0,{$value:"$1"}]},{$value:"$1"},["gradient",uE.FILL_GRADIENT_LINEAR_SINGLE_DEFAULTS],["pattern",uE.FILL_PATTERN_SINGLE_DEFAULTS],["image",uE.FILL_IMAGE_DEFAULTS]]}]},strokes:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"secondSequentialColors"},uE.SAFE_RANGE2_OPERATION]}]},strokeWidth:{$isUserOption:["./strokes/0",2,0]},label:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},placement:"before",spacing:4}),tooltip:{range:{$path:["/tooltip/range","nearest"]}},highlight:{highlightedItem:{stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}}},seriesArea:{padding:{top:20,bottom:20}},axes:{[zh.NUMBER]:{nice:!1,gridLine:{enabled:!1},crosshair:{enabled:!1},label:{enabled:!1}},[zh.CATEGORY]:{line:{enabled:!1}}}},x2={type:"series",name:"cone-funnel",chartType:"cartesian",enterprise:!0,solo:!0,version:GC,dependencies:[uz],options:y2,defaultAxes:L1,themeTemplate:b2,create:e=>new f2(e)},{Label:C2,DropShadow:S2,AbstractBarSeriesProperties:w2,makeSeriesTooltip:M2,AxisLabel:k2}=uE,D2=class extends C2{},I2=class extends k2{};kV([ru],I2.prototype,"placement",2);var A2=class extends kh{constructor(){super(...arguments),this.enabled=!0,this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}getStyle(){const{fill:e,stroke:t,fillOpacity:i,strokeWidth:n,strokeOpacity:o,lineDash:s,lineDashOffset:r}=this;return{fill:e,fillOpacity:i,stroke:t,strokeWidth:n,strokeOpacity:o,lineDash:s,lineDashOffset:r,opacity:1}}};kV([ru],A2.prototype,"enabled",2),kV([ru],A2.prototype,"fill",2),kV([ru],A2.prototype,"fillOpacity",2),kV([ru],A2.prototype,"stroke",2),kV([ru],A2.prototype,"strokeWidth",2),kV([ru],A2.prototype,"strokeOpacity",2),kV([ru],A2.prototype,"lineDash",2),kV([ru],A2.prototype,"lineDashOffset",2);var L2=class extends w2{constructor(){super(...arguments),this.fills=[],this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.spacingRatio=0,this.dropOff=new A2,this.shadow=(new S2).set({enabled:!1}),this.label=new D2,this.stageLabel=new I2,this.tooltip=M2()}getStyle(e){const{fills:t,strokes:i,fillOpacity:n,strokeWidth:o,strokeOpacity:s,lineDash:r,lineDashOffset:a}=this;return{fill:t[e],fillOpacity:n,stroke:i[e],strokeWidth:o,strokeOpacity:s,lineDash:r,lineDashOffset:a,opacity:1}}};kV([ru],L2.prototype,"stageKey",2),kV([ru],L2.prototype,"valueKey",2),kV([ru],L2.prototype,"fills",2),kV([ru],L2.prototype,"fillOpacity",2),kV([ru],L2.prototype,"strokes",2),kV([ru],L2.prototype,"strokeWidth",2),kV([ru],L2.prototype,"strokeOpacity",2),kV([ru],L2.prototype,"lineDash",2),kV([ru],L2.prototype,"lineDashOffset",2),kV([ru],L2.prototype,"spacingRatio",2),kV([ru],L2.prototype,"itemStyler",2),kV([ru],L2.prototype,"dropOff",2),kV([ru],L2.prototype,"shadow",2),kV([ru],L2.prototype,"label",2),kV([ru],L2.prototype,"stageLabel",2),kV([ru],L2.prototype,"tooltip",2);var{resetBarSelectionsFn:N2,prepareBarAnimationFunctions:T2,midpointStartingBarPosition:R2,createDatumId:E2,Rect:P2,motion:O2}=uE,F2=class extends r2{constructor(e){super({moduleCtx:e,animationResetFns:{datum:N2}}),this.properties=new L2}getBandScalePadding(){return{inner:this.properties.spacingRatio,outer:0}}connectorEnabled(){return this.properties.dropOff.enabled}connectorStyle(e){return xu(this.properties.dropOff.getStyle(),this.properties.getStyle(e))}nodeFactory(){return new P2}createLabelData(e){let{datumIndex:t,rect:i,yDatum:n,datum:o,visible:s}=e;const{valueKey:r,stageKey:a,label:l}=this.properties;if(!l.enabled)return;const d=this.getSeriesDomain(_u.Y).domain,c=this.getLabelText(n,o,r,"y",d,l,{itemId:r,value:n,datum:o,stageKey:a,valueKey:r});return{x:i.x+i.width/2,y:i.y+i.height/2,textAlign:"center",textBaseline:"middle",text:c,itemId:a,datum:o,datumIndex:t,series:this,visible:s}}getItemStyle(e,t){let{datum:i,datumIndex:n}=e;const{id:o,properties:s}=this,{stageKey:r,valueKey:a,itemStyler:l}=s;let d=xu(this.getHighlightStyle(t,n),s.getStyle(n));if(null!=l){var c;const e=null===(c=this.ctx.highlightManager)||void 0===c?void 0:c.getActiveHighlight(),s=this.cachedDatumCallback(E2(n,t?"highlight":"node"),()=>{const s=this.getHighlightStateString(e,t,n);return this.callWithContext(l,p({seriesId:o,datum:i,highlightState:s,stageKey:r,valueKey:a},d))});s&&(d=xu(s,d))}return d}updateDatumNodes(e){let{datumSelection:t,isHighlight:i}=e;const{contextNodeData:n}=this;if(!n)return;const{shadow:o}=this.properties,s=this.getCategoryDirection()===_u.X,r=this.getShapeFillBBox();t.each((e,t)=>{const n=this.getItemStyle(t,i);e.setStyleProperties(n,r),e.visible=s?t.width>0:t.height>0,e.crisp=t.crisp,e.fillShadow=o})}tooltipStyle(e,t){return this.getItemStyle({datum:e,datumIndex:t},!1)}animateEmptyUpdateReady(e){super.animateEmptyUpdateReady(e);const{datumSelection:t}=e,i=this.isVertical(),n=T2(R2(i,"normal"),"unknown");O2.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],n)}animateWaitingUpdateReady(e){var t;super.animateWaitingUpdateReady(e);const{datumSelection:i}=e,{processedData:n}=this,o=null===n||void 0===n||null===(t=n.reduced)||void 0===t||null===(t=t.diff)||void 0===t?void 0:t[this.id],s=T2(R2(this.isVertical(),"fade"),"added");O2.fromToMotion(this.id,"datums",this.ctx.animationManager,[i],s,(e,t)=>t.xValue,o)}hasItemStylers(){return null!=this.properties.itemStyler||null!=this.properties.label.itemStyler}};F2.className="FunnelSeries",F2.type="funnel";var{funnelSeriesThemeableOptionsDef:z2}=uE,B2=p(p(p({},z2),Mu(Yc,["showInLegend"])),{},{type:pd(jd("funnel")),stageKey:pd(Ad),valueKey:pd(Ad)}),V2={type:"series",name:"funnel",chartType:"cartesian",enterprise:!0,solo:!0,version:GC,dependencies:[uz],options:B2,defaultAxes:L1,themeTemplate:N1,create:e=>new F2(e)};function G2(e){const{enabled:t,mode:i,showArrow:n,range:o,position:s,pagination:r,delay:a,wrapping:d,interaction:c,renderer:u}=e,h=l(e,yV),g=p({enabled:t,showArrow:n,range:o,position:s,interaction:c,renderer:u},h);return{chartTooltipOptions:p({mode:i,pagination:r,delay:a,wrapping:d},h),seriesTooltipOptions:g}}function H2(e,t){if(null==t)return e;const{targets:i}=t;return null!=(e=xu(e,l(t,CV))).targets&&null!=i&&(e.type,e.targets=Su(e.targets,i)),e}var j2={theme:kd,container:kd,animation:kd,background:kd,contextMenu:kd,context:()=>!0,listeners:kd,locale:kd,width:kd,height:kd,minWidth:kd,minHeight:kd,title:kd,subtitle:kd,footnote:kd,padding:kd,tooltip:p(p({},eu),Kc.tooltip)};j2.overrideDevicePixelRatio=gd(Pd);var W2={type:"preset",name:"gauge-preset",enterprise:!0,version:GC,dependencies:[W0],options:fd({"linear-gauge":p(p({},Mu(Gu,["type"])),j2),"radial-gauge":p(p({},Mu(ju,["type"])),j2)},"gauge options"),create:function(e,t){switch(e.type){case"radial-gauge":return function(e){const{animation:t,background:i,container:n,contextMenu:o,context:s,footnote:r,height:a,listeners:d,locale:c,minHeight:u,minWidth:h,overrideDevicePixelRatio:g,padding:m,subtitle:f,theme:v,title:y,width:b,type:x,cursor:C,nodeClickRange:S,tooltip:w,value:M,scale:k={},startAngle:D,endAngle:I,highlight:A,segmentation:L,bar:N,needle:T,targets:R,outerRadius:E,innerRadius:P,outerRadiusRatio:O,innerRadiusRatio:F,cornerRadius:z,cornerMode:B,label:V,secondaryLabel:G,spacing:H}=e,j=l(e,bV),W=null!=w,_=null!==w&&void 0!==w?w:{},{chartTooltipOptions:K,seriesTooltipOptions:U}=G2(_),Y=p(p({},j),{},{type:x,cursor:C,context:s,nodeClickRange:S,value:M,scale:k,startAngle:D,endAngle:I,highlight:A,segmentation:L,bar:N,targets:R,outerRadius:E,innerRadius:P,outerRadiusRatio:O,innerRadiusRatio:F,cornerRadius:z,cornerMode:B,label:V,secondaryLabel:G,spacing:H});return W&&(Y.tooltip=U),null!=T&&(Y.needle=p({enabled:!0},T)),p(p({animation:t,background:i,container:n,contextMenu:o,context:s,footnote:r,height:a,listeners:d,locale:c,minHeight:u,minWidth:h,overrideDevicePixelRatio:g,padding:m,subtitle:f,theme:v,title:y,width:b},W?{tooltip:K}:{}),{},{series:[Y]})}(H2(e,t));case"linear-gauge":return function(e){const{animation:t,background:i,container:n,contextMenu:o,context:s,footnote:r,height:a,listeners:d,locale:c,minHeight:u,minWidth:h,overrideDevicePixelRatio:g,padding:m,subtitle:f,theme:v,title:y,width:b,type:x,cursor:C,nodeClickRange:S,tooltip:w,value:M,scale:k={},direction:D="vertical",thickness:I,highlight:A,segmentation:L,bar:N,targets:T,cornerRadius:R,cornerMode:E,label:P}=e,O=l(e,xV),F=null!=w,z=null!==w&&void 0!==w?w:{},{chartTooltipOptions:B,seriesTooltipOptions:V}=G2(z),G=p(p({},O),{},{type:x,cursor:C,nodeClickRange:S,value:M,scale:k,direction:D,thickness:I,highlight:A,segmentation:L,bar:N,targets:T,cornerRadius:R,cornerMode:E,label:P});return F&&(G.tooltip=V),p(p({animation:t,background:i,container:n,contextMenu:o,context:s,footnote:r,height:a,listeners:d,locale:c,minHeight:u,minWidth:h,overrideDevicePixelRatio:g,padding:m,subtitle:f,theme:v,title:y,width:b},F?{tooltip:B}:{}),{},{series:[G]})}(H2(e,t));default:return{series:[]}}}},_2=class{*[Symbol.iterator](){const{node:e,datum:t}=this;e&&t&&(yield{node:e,datum:t})}nodes(){return this.node?[this.node]:[]}update(e,t,i,n){const o=e.nodes();if(0===o.length){var s;null===(s=this.node)||void 0===s||s.remove(),this.node=void 0}else{var r;void 0===this.node&&(this.node=new i,this.node.fillOpacity=0,this.node.strokeOpacity=0,t.appendChild(this.node));const e=o[0],s=null!==(r=o.toReversed().find(e=>e.datum.datum.value>e.datum.datum.segmentStart))&&void 0!==r?r:o.at(-1);this.node.datum=this.datum=e.datum,n(this.node,e,s)}}},K2={fromFn:()=>({opacity:0,phase:"initial"}),toFn:()=>({opacity:1})};function U2(e,t){if(null==e)return"";const{min:i,max:n}=t,o=0===i?0:Math.ceil(Math.log10(Math.abs(i))),s=0===n?0:Math.ceil(Math.log10(Math.abs(n))),r=Math.max(2-Math.max(o,s),0);return e.toFixed(r)}function Y2(e,t,i,n){if(null!=i.text)return i.text;const o=null!==n&&void 0!==n?n:i.value;let s;return null!=(null===i||void 0===i?void 0:i.formatter)&&(s=x0(t,i.formatter,{seriesId:e,datum:void 0,value:o})),null==s||Ua(s)?s:String(s)}function $2(e){let{path:t,x:i,y:n,size:o}=e;t.moveTo(i,n-o/2),t.lineTo(i,n+o/2)}function Z2(e,t){const i=pu(e.datumUnion.nodes(),e.targetSelection.nodes());return e.pickNodeNearestDistantObject(t,i)}function X2(e,t){var i,n;const o=[{data:null===(i=e.contextNodeData)||void 0===i?void 0:i.nodeData,selection:e.datumUnion},{data:null===(n=e.contextNodeData)||void 0===n?void 0:n.targetData,selection:e.targetSelection}].filter(e=>e.data&&e.data.length>0),s=za(0,t.otherIndex+t.otherIndexDelta,o.length-1);if(0===o.length)return;const{data:r,selection:a}=o[s];if(null==r||0===r.length)return;const l=za(0,t.datumIndex,r.length-1),d=r[l];for(const c of a)if(c.datum===d){return{bounds:c.node,clipFocusBox:!0,datum:d,datumIndex:l,otherIndex:s}}}var q2=class extends kh{getSegments(e,t){const{values:i,step:n,count:o}=this,s=Math.min(...e.domain),r=Math.max(...e.domain);let a;if(null!=i){const e=i.filter(e=>e>s&&e<r).sort((e,t)=>e-t);a=[s,...e,r]}else if(null!=n){const e=[];for(let t=s;t<r;t+=n)e.push(t);e.push(r),a=e}else if(null==o){var l;const t=null===(l=e.ticks({nice:[!0,!0],interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0}))||void 0===l||null===(l=l.ticks)||void 0===l?void 0:l.filter(e=>e>s&&e<r);a=null==t?void 0:[s,...t,r]}else{const e=o+1;a=Array.from({length:e+1},(t,i)=>i/e*(r-s)+s)}return null!=a&&a.length>t&&(jr.warnOnce("the configured segmentation results in more than 1 item per pixel, ignoring. Supply a segmentation configuration that results in larger segments or omit this configuration"),a=void 0),null!==a&&void 0!==a||(a=[s,r]),a}};kV([ru],q2.prototype,"values",2),kV([ru],q2.prototype,"step",2),kV([ru],q2.prototype,"count",2);var Q2=class extends kh{constructor(){super(...arguments),this.enabled=!1,this.interval=new q2,this.spacing=0}};kV([ru],Q2.prototype,"enabled",2),kV([ru],Q2.prototype,"interval",2),kV([ru],Q2.prototype,"spacing",2);var{makeSeriesTooltip:J2,SeriesProperties:e3,Label:t3,AxisLabel:i3,getColorStops:n3}=uE,o3=class extends t3{};kV([ru],o3.prototype,"spacing",2);var s3=class extends kh{constructor(){super(...arguments),this.value=0,this.label=new o3}getStyle(e){var t,i,n,o,s,r,a;const{fill:l=(null!==(t=e.fill)&&void 0!==t?t:"black"),fillOpacity:d=(null!==(i=e.fillOpacity)&&void 0!==i?i:1),stroke:c=(null!==(n=e.stroke)&&void 0!==n?n:"black"),strokeWidth:u=(null!==(o=e.strokeWidth)&&void 0!==o?o:0),strokeOpacity:h=(null!==(s=e.strokeOpacity)&&void 0!==s?s:1),lineDash:p=(null!==(r=e.lineDash)&&void 0!==r?r:[0]),lineDashOffset:g=(null!==(a=e.lineDashOffset)&&void 0!==a?a:0)}=this;return{fill:l,fillOpacity:d,stroke:c,strokeWidth:u,strokeOpacity:h,lineDash:p,lineDashOffset:g}}};kV([ru],s3.prototype,"text",2),kV([ru],s3.prototype,"value",2),kV([ru],s3.prototype,"shape",2),kV([ru],s3.prototype,"placement",2),kV([ru],s3.prototype,"spacing",2),kV([ru],s3.prototype,"size",2),kV([ru],s3.prototype,"rotation",2),kV([ru],s3.prototype,"fill",2),kV([ru],s3.prototype,"fillOpacity",2),kV([ru],s3.prototype,"stroke",2),kV([ru],s3.prototype,"strokeWidth",2),kV([ru],s3.prototype,"strokeOpacity",2),kV([ru],s3.prototype,"lineDash",2),kV([ru],s3.prototype,"lineDashOffset",2),kV([ru],s3.prototype,"label",2);var r3=class extends kh{constructor(){super(...arguments),this.enabled=!0,this.thicknessRatio=1,this.fills=new Dh(uE.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}getStyle(e,t,i){const{fill:n,fills:o,fillMode:s,fillOpacity:r,stroke:a,strokeWidth:l,strokeOpacity:d,lineDash:c,lineDashOffset:u}=this;return{fill:null!==n&&void 0!==n?n:h3(o,s,e,i,t),fillOpacity:r,stroke:a,strokeWidth:l,strokeOpacity:d,lineDash:c,lineDashOffset:u}}};kV([ru],r3.prototype,"enabled",2),kV([ru],r3.prototype,"thickness",2),kV([ru],r3.prototype,"thicknessRatio",2),kV([ru],r3.prototype,"fills",2),kV([ru],r3.prototype,"fillMode",2),kV([ru],r3.prototype,"fill",2),kV([ru],r3.prototype,"fillOpacity",2),kV([ru],r3.prototype,"stroke",2),kV([ru],r3.prototype,"strokeWidth",2),kV([ru],r3.prototype,"strokeOpacity",2),kV([ru],r3.prototype,"lineDash",2),kV([ru],r3.prototype,"lineDashOffset",2);var a3=class extends kh{constructor(){super(...arguments),this.values=void 0,this.step=void 0,this.minSpacing=0,this.maxSpacing=1e3}};kV([ru],a3.prototype,"values",2),kV([ru],a3.prototype,"step",2),kV([ru],a3.prototype,"minSpacing",2),kV([ru],a3.prototype,"maxSpacing",2);var l3=class extends i3{constructor(){super(...arguments),this.placement=void 0}};kV([ru],l3.prototype,"placement",2);var d3=class extends kh{constructor(){super(...arguments),this.min=0,this.max=1,this.fills=new Dh(uE.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.defaultFill="black",this.interval=new a3,this.label=new l3}getStyle(e,t,i,n){var o;const{fill:s,fills:r,defaultFill:a,fillMode:l,fillOpacity:d,stroke:c,strokeWidth:u,strokeOpacity:h,lineDash:p,lineDashOffset:g}=this;return{fill:null!==(o=null!==s&&void 0!==s?s:e&&0===r.length?a:void 0)&&void 0!==o?o:h3(r,l,t,n,i),fillOpacity:d,stroke:c,strokeWidth:u,strokeOpacity:h,lineDash:p,lineDashOffset:g}}};kV([ru],d3.prototype,"min",2),kV([ru],d3.prototype,"max",2),kV([ru],d3.prototype,"fills",2),kV([ru],d3.prototype,"fillMode",2),kV([ru],d3.prototype,"fill",2),kV([ru],d3.prototype,"fillOpacity",2),kV([ru],d3.prototype,"stroke",2),kV([ru],d3.prototype,"strokeWidth",2),kV([ru],d3.prototype,"strokeOpacity",2),kV([ru],d3.prototype,"lineDash",2),kV([ru],d3.prototype,"lineDashOffset",2),kV([ru],d3.prototype,"defaultFill",2),kV([ru],d3.prototype,"interval",2),kV([ru],d3.prototype,"label",2);var c3=class extends eZ{constructor(){super(...arguments),this.placement="inside-center",this.avoidCollisions=!0}};kV([ru],c3.prototype,"text",2),kV([ru],c3.prototype,"placement",2),kV([ru],c3.prototype,"avoidCollisions",2);var u3=class extends e3{constructor(){super(...arguments),this.value=0,this.segmentation=new Q2,this.defaultColorRange=[],this.targets=new Dh(s3),this.defaultTarget=new s3,this.defaultScale=new d3,this.direction="vertical",this.thickness=1,this.cornerRadius=0,this.cornerMode="container",this.margin=0,this.scale=new d3,this.bar=new r3,this.label=new c3,this.tooltip=J2()}};function h3(e,t,i,n,o){return{type:"gradient",gradient:"linear",colorSpace:"oklch",colorStops:n3(e,i,n.domain,t),rotation:o?90:0,bounds:"series"}}kV([ru],u3.prototype,"value",2),kV([ru],u3.prototype,"segmentation",2),kV([ru],u3.prototype,"defaultColorRange",2),kV([ru],u3.prototype,"targets",2),kV([ru],u3.prototype,"defaultTarget",2),kV([ru],u3.prototype,"defaultScale",2),kV([ru],u3.prototype,"direction",2),kV([ru],u3.prototype,"thickness",2),kV([ru],u3.prototype,"cornerRadius",2),kV([ru],u3.prototype,"cornerMode",2),kV([ru],u3.prototype,"margin",2),kV([ru],u3.prototype,"scale",2),kV([ru],u3.prototype,"bar",2),kV([ru],u3.prototype,"label",2),kV([ru],u3.prototype,"tooltip",2);var{BBox:p3}=uE;function g3(e){const{x0:t,y0:i,x1:n,y1:o,horizontalInset:s,verticalInset:r}=e;return{x:Math.min(t,n)+s,y:Math.min(i,o)+r,width:Math.max(Math.abs(n-t)-2*s,0),height:Math.max(Math.abs(o-i)-2*r,0)}}function m3(e){const{clipX0:t,clipX1:i,clipY0:n,clipY1:o}=e;return null!=t&&null!=i||null!=n&&null!=o}function f3(e,t){const i=e?"initial":"update",n={fromFn(n,o){const s=n.previousDatum;let{x0:r,y0:a,x1:l,y1:d,clipX0:c,clipY0:u,clipX1:h,clipY1:p}=null!==s&&void 0!==s?s:o;const{horizontalInset:g,verticalInset:m}=o,f=null!=s&&m3(s),v=m3(o);return f&&v||(!f&&v?(({x0:r,y0:a,x1:l,y1:d,clipX0:c,clipY0:u,clipX1:h,clipY1:p}=o),e&&(t?h=o.clipX0:p=o.clipY0)):f&&!v?(({x0:r,y0:a,x1:l,y1:d}=o),c=void 0,u=void 0,h=void 0,p=void 0):e&&(t?l=r:d=a)),{x0:r,y0:a,x1:l,y1:d,clipX0:c,clipY0:u,clipX1:h,clipY1:p,horizontalInset:g,verticalInset:m,phase:i}},toFn(e,t){const{x0:i,y0:n,x1:o,y1:s,clipX0:r,clipY0:a,clipX1:l,clipY1:d,horizontalInset:c,verticalInset:u}=t;return{x0:i,y0:n,x1:o,y1:s,clipX0:r,clipY0:a,clipX1:l,clipY1:d,horizontalInset:c,verticalInset:u}},applyFn(e,t){e.setProperties(v3(e,t))}};return{node:n}}function v3(e,t){const{x:i,y:n,width:o,height:s}=g3(t),r=function(e){if(!m3(e))return;const{x0:t,y0:i,x1:n,y1:o}=e,{x:s,y:r,width:a,height:l}=g3(e);let{clipX0:d,clipX1:c,clipY0:u,clipY1:h}=e;null!=d&&null!=c||(d=t,c=n),null!=u&&null!=h||(u=i,h=o);const p=Math.min(d,c),g=Math.min(u,h),m=Math.abs(c-d),f=Math.abs(h-u);return d=Math.max(s,p),u=Math.max(r,g),c=Math.min(s+a,p+m),h=Math.min(r+l,g+f),new p3(Math.min(d,c),Math.min(u,h),Math.abs(c-d),Math.abs(h-u))}(t),a=function(e,t){if(null==t)return!0;const i=g3(e),n=1e-6,o=i.x+n,s=i.y+n,r=i.x+i.width-n,a=i.y+i.height-n,l=t.x,d=t.x+t.width,c=t.y,u=t.y+t.height;return Math.max(o,l)<=Math.min(r,d)&&Math.max(s,c)<=Math.min(a,u)}(t,r);return{x:i,y:n,width:o,height:s,clipBBox:r,visible:a}}var y3={Before:"right",Center:"center",After:"left"},b3={Before:"top",Center:"middle",After:"bottom"},x3={Before:-1,Center:-.5,After:0},C3={Before:0,Center:-.5,After:-1};var{fromToMotion:S3,resetMotion:w3,SeriesNodePickMode:M3,createDatumId:k3,BBox:D3,Group:I3,PointerEvents:A3,Selection:L3,Rect:N3,Text:T3,TransformableText:R3,Marker:E3,LinearScale:P3,generateTicks:O3,NiceMode:F3}=uE,z3={before:180,middle:0,after:0},B3={before:90,middle:0,after:-90},V3=class extends uE.Series{constructor(e){super({moduleCtx:e,pickModes:[M3.EXACT_SHAPE_MATCH,M3.NEAREST_NODE]}),this.properties=new u3,this.seriesRect=D3.NaN,this.gaugeRect=D3.NaN,this.scale=new P3,this.originX=0,this.originY=0,this.scaleGroup=this.contentGroup.appendChild(new I3({name:"scaleGroup"})),this.itemGroup=this.contentGroup.appendChild(new I3({name:"itemGroup"})),this.itemTargetGroup=this.contentGroup.appendChild(new I3({name:"itemTargetGroup"})),this.itemTargetLabelGroup=this.contentGroup.appendChild(new I3({name:"itemTargetLabelGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new I3({name:"itemLabelGroup"})),this.highlightTargetGroup=this.highlightGroup.appendChild(new I3({name:"itemTargetLabelGroup"})),this.tickGroup=this.contentGroup.appendChild(new I3({name:"tickGroup"})),this.scaleSelection=L3.select(this.scaleGroup,()=>this.nodeFactory()),this.datumSelection=L3.select(this.itemGroup,()=>this.nodeFactory()),this.targetSelection=L3.select(this.itemTargetGroup,()=>this.markerFactory()),this.targetLabelSelection=L3.select(this.itemTargetLabelGroup,T3),this.labelSelection=L3.select(this.itemLabelGroup,T3),this.highlightTargetSelection=L3.select(this.highlightTargetGroup,()=>this.markerFactory()),this.tickSelection=L3.select(this.tickGroup,R3),this.datumUnion=new _2,this.animationState=new Vm("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.animateReadyResize(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateWaitingUpdateReady()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty"},reset:"empty",skip:"ready"}}),this.scaleGroup.pointerEvents=A3.None,this.tickGroup.pointerEvents=A3.None}get range(){return this.horizontal?[0,this.gaugeRect.width]:[0,this.gaugeRect.height]}get horizontal(){return"horizontal"===this.properties.direction}get hasData(){return!0}nodeFactory(){const e=new N3;return e.crisp=!0,e}markerFactory(){return new E3}processData(){this.nodeDataRefresh=!0,this.animationState.transition("updateData")}formatLabel(e){return U2(e,this.properties.scale)}getShapeFillBBox(){const{properties:e,originX:t,originY:i,horizontal:n,scale:o}=this,{thickness:s}=e,r=Zu(o.range),a=new D3(t,i,n?r:s,n?s:r);return{axis:a,series:a}}getTargets(){const{properties:e}=this,t=e.defaultTarget;return Array.from(e.targets).map(e=>{var i,n,o,s,r,a,l,d,c,u;const{text:h=t.text,value:p=(null!==(i=t.value)&&void 0!==i?i:0),shape:g=(null!==(n=t.shape)&&void 0!==n?n:"triangle"),rotation:m=(null!==(o=t.rotation)&&void 0!==o?o:0),placement:f=(null!==(s=t.placement)&&void 0!==s?s:"middle"),spacing:v=(null!==(r=t.spacing)&&void 0!==r?r:0),size:y=(null!==(a=t.size)&&void 0!==a?a:0)}=e,{enabled:b=t.label.enabled,color:x=(null!==(l=t.label.color)&&void 0!==l?l:"black"),fontStyle:C=(null!==(d=t.label.fontStyle)&&void 0!==d?d:"normal"),fontWeight:S=(null!==(c=t.label.fontWeight)&&void 0!==c?c:"normal"),fontSize:w=t.label.fontSize,fontFamily:M=t.label.fontFamily,spacing:k=(null!==(u=t.label.spacing)&&void 0!==u?u:0)}=e.label;return{text:h,value:p,shape:g,placement:f,spacing:v,size:y,rotation:m,label:{enabled:b,color:x,fontStyle:C,fontWeight:S,fontSize:w,fontFamily:M,spacing:k},style:e.getStyle(t)}})}getTargetPoint(e){const{properties:t,originX:i,originY:n,horizontal:o,scale:s,gaugeRect:r}=this,{thickness:a}=t,{value:l,placement:d,spacing:c,size:u}=e,h=s.convert(l);let p;switch(d){case"before":p=-(c+u/2);break;case"after":p=a+c+u/2;break;default:p=a/2}return{x:i+r.x+(o?h:p),y:n+r.y+(o?p:h)}}getTargetLabel(e){const{size:t,placement:i,label:n}=e,{spacing:o,color:s,fontStyle:r,fontWeight:a,fontSize:l,fontFamily:d}=n,c=t/2+o;let u,h,p=0,g=0;return this.horizontal?(u="center","after"===i?(h="top",g=c):(h="bottom",g=-c)):(h="middle","before"===i?(u="right",p=-c):(u="left",p=c)),{offsetX:p,offsetY:g,fill:s,textAlign:u,textBaseline:h,fontStyle:r,fontWeight:a,fontSize:l,fontFamily:d,lineHeight:void 0}}labelDatum(e,t){const{placement:i,avoidCollisions:n,spacing:o,text:s,color:r,fontSize:a,minimumFontSize:l,fontStyle:d,fontWeight:c,fontFamily:u,lineHeight:h,wrapping:p,overflowStrategy:g,formatter:m=e=>this.formatLabel(e.value)}=e;return{placement:i,avoidCollisions:n,spacing:o,text:s,value:t,fill:r,fontSize:a,minimumFontSize:l,fontStyle:d,fontWeight:c,fontFamily:u,lineHeight:h,wrapping:p,overflowStrategy:g,formatter:m}}verticalLabelInset(){var e,t,i;const{label:n}=this.properties,o=Wm(n),s=null===(e=n.text)||void 0===e?void 0:e.split("\n"),r=(null!==(t=n.lineHeight)&&void 0!==t?t:o.lineHeight())*(null!==(i=null===s||void 0===s?void 0:s.length)&&void 0!==i?i:1);return n.spacing+r}horizontalLabelInset(){var e,t,i,n;const{scale:o,properties:s}=this,{scale:r,label:a}=s,l=null===(e=a.text)||void 0===e?void 0:e.split("\n"),d=Wm(a),c=null!==(t=null!==(i=r.interval.values)&&void 0!==i?i:null===(n=o.ticks({nice:[!1,!1],interval:r.interval.step,minTickCount:0,maxTickCount:6,tickCount:5}))||void 0===n?void 0:n.ticks)&&void 0!==t?t:[],u=(null!==l&&void 0!==l?l:null===c||void 0===c?void 0:c.map(e=>{var t;return null!==(t=Y2(this.id,this.ctx,this.labelDatum(a,e)))&&void 0!==t?t:""})).reduce((e,t)=>{const{width:i}=Ua(t)?_m(t,a):d.measureLines(Gl(t));return Math.max(e,i)},0);return a.spacing+u}tickFormatter(e,t){const{format:i,formatter:n}=this.properties.scale.label;let o;return null!=i&&(o=Xf(t,"string"===typeof i?i:void 0)),(t,i)=>{var s;let r;return n&&(null!==r&&void 0!==r||(r=x0(this.ctx,n,{value:t,index:i,domain:e,boundSeries:void 0}))),null!==r&&void 0!==r||(r=null===(s=o)||void 0===s?void 0:s(t)),null!==r&&void 0!==r?r:this.formatLabel(t)}}createNodeData(){var e;const{id:t,properties:i,horizontal:n,scale:o,seriesRect:s}=this,{value:r,segmentation:a,thickness:l,cornerRadius:d,cornerMode:c,bar:u,scale:h,label:p,defaultColorRange:g}=i;let m,f,v,y,b,x;o.domain=[h.min,h.max],o.range=n?[0,s.width]:[s.height,0],n?(f=1,m=Math.PI/2):"before"===h.label.placement?(f=1,m=0):(f=-1,m=0),n?(v=0,y=s.width,b=(s.height-l)/2,x=b+l,"outside-start"===p.placement?v+=this.horizontalLabelInset():"outside-end"===p.placement&&(y-=this.horizontalLabelInset())):(v=(s.width-l)/2,y=v+l,x=0,b=s.height,"outside-start"===p.placement?b-=this.verticalLabelInset():"outside-end"===p.placement&&(x+=this.verticalLabelInset())),this.gaugeRect=new D3(Math.min(v,y),Math.min(b,x),Math.abs(y-v),Math.abs(x-b));o.domain=[h.min,h.max],o.range=n?[v,y]:[b,x];const{tickData:{ticks:C}}=O3({scale:o,label:this.properties.scale.label,interval:this.properties.scale.interval,tickFormatter:(e,t)=>this.tickFormatter(e,t),domain:o.domain,range:this.range,reverse:!1,primaryTickCount:void 0,defaultTickMinSpacing:0,visibleRange:[0,1],niceMode:[F3.Off,F3.Off],labelOffset:0,axisRotation:m,sideFlag:f}),S=this.getTargets(),w=[],M=[],k=[],D=[],[I,A]=o.range,L=Math.abs(A-I),N=n?o.convert(r):y,T=n?x:o.convert(r),R=a.enabled?a.spacing/2:0,E=n?R:0,P=n?0:R,O=Math.min(null!==(e=u.thickness)&&void 0!==e?e:Math.round(u.thicknessRatio*l),l),F=-(l-O)/2,z=n?0:F,B=n?F:0,V="item"===c,G=Math.ceil(L);let H=a.enabled?a.interval.getSegments(o,G):void 0;const j=u.getStyle(g,n,o),W=h.getStyle(u.enabled,g,n,o);if(null==H&&V){const e={value:r,segmentStart:Math.min(...o.domain),segmentEnd:Math.max(...o.domain)};if(u.enabled){const t=1*Math.min(d,O/2,L/2),i=n?t:0,o=n?0:t;w.push({series:this,itemId:"value",datum:e,datumIndex:{type:0},type:0,x0:0+v-i-z,y0:0+b-o-B,x1:0+N+i+z,y1:0+T+o+B,clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:d,topRightCornerRadius:d,bottomRightCornerRadius:d,bottomLeftCornerRadius:d,horizontalInset:E,verticalInset:P,style:j})}const t=1*Math.min(d,l/2,L/2),i=n?t:0,s=n?0:t;D.push({series:this,itemId:"scale",datum:e,datumIndex:{type:0},type:0,x0:0+v-i,y0:0+b-s,x1:0+y+i,y1:0+x+s,clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:d,topRightCornerRadius:d,bottomRightCornerRadius:d,bottomLeftCornerRadius:d,horizontalInset:E,verticalInset:P,style:W})}else{null!==H&&void 0!==H||(H=o.domain);const e=0+v-z,t=0+b-B,i=0+N+z,s=0+T+B;for(let a=0;a<H.length-1;a+=1){const l=H[a+0],c=H[a+1],h={value:r,segmentStart:l,segmentEnd:c},p=0===a,g=a===H.length-2,m=o.convert(l),f=o.convert(c),C=V||p?d:0,S=V||g?d:0,M=n?C:S,k=S,I=n?S:C,A=C;u.enabled&&w.push({series:this,itemId:"value-".concat(a),datum:h,datumIndex:{type:0},type:0,x0:0+(n?m:v),y0:0+(n?b:m),x1:0+(n?f:y),y1:0+(n?x:f),clipX0:e,clipY0:t,clipX1:i,clipY1:s,topLeftCornerRadius:M,topRightCornerRadius:k,bottomRightCornerRadius:I,bottomLeftCornerRadius:A,horizontalInset:E,verticalInset:P,style:j}),D.push({series:this,itemId:"scale-".concat(a),datum:h,datumIndex:{type:0},type:0,x0:0+(n?m:v),y0:0+(n?b:m),x1:0+(n?f:y),y1:0+(n?x:f),clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:M,topRightCornerRadius:k,bottomRightCornerRadius:I,bottomLeftCornerRadius:A,horizontalInset:E,verticalInset:P,style:W})}}p.enabled&&k.push(this.labelDatum(p,r));const _=n?z3:B3;for(let K=0;K<S.length;K+=1){const e=S[K],{value:t,text:i,shape:n,size:o,style:s}=e,r=this.getTargetPoint(e),a=Bp(e.rotation+_[e.placement]);M.push({series:this,itemId:"target-".concat(K),midPoint:r,datum:{value:t},datumIndex:{type:1,index:K},type:1,value:t,text:i,x:r.x,y:r.y,shape:n,size:o,rotation:a,label:this.getTargetLabel(e),style:s})}return{itemId:t,nodeData:w,tickData:C,targetData:M,labelData:k,scaleData:D}}updateSelections(e){(this.nodeDataRefresh||e)&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}highlightDatum(e){if(null!=e&&e.series===this&&1===e.type)return e}update(e){var t,i,n,o,s,r,a,l,d,c;let{seriesRect:u}=e;const{datumSelection:h,labelSelection:p,targetSelection:g,targetLabelSelection:m,scaleSelection:f,highlightTargetSelection:v,tickSelection:y}=this;this.seriesRect=null!==u&&void 0!==u?u:D3.NaN;const b=this.checkResize(u);this.updateSelections(b),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();const x=null!==(t=null===(i=this.contextNodeData)||void 0===i?void 0:i.nodeData)&&void 0!==t?t:[],C=null!==(n=null===(o=this.contextNodeData)||void 0===o?void 0:o.labelData)&&void 0!==n?n:[],S=null!==(s=null===(r=this.contextNodeData)||void 0===r?void 0:r.targetData)&&void 0!==s?s:[],w=null!==(a=null===(l=this.contextNodeData)||void 0===l?void 0:l.scaleData)&&void 0!==a?a:[],M=null!==(d=null===(c=this.contextNodeData)||void 0===c?void 0:c.tickData)&&void 0!==d?d:[],k=this.highlightDatum(this.ctx.highlightManager.getActiveHighlight());this.scaleSelection=this.updateScaleSelection({scaleData:w,scaleSelection:f}),this.updateScaleNodes({scaleSelection:f}),this.targetSelection=this.updateTargetSelection({targetData:S,targetSelection:g}),this.updateTargetNodes({targetSelection:g,isHighlight:!1}),this.targetLabelSelection=this.updateTargetLabelSelection({targetData:S,targetLabelSelection:m}),this.updateTargetLabelNodes({targetLabelSelection:m}),this.datumSelection=this.updateDatumSelection({nodeData:x,datumSelection:h}),this.updateDatumNodes({datumSelection:h}),this.labelSelection=this.updateLabelSelection({labelData:C,labelSelection:p}),this.updateLabelNodes({labelSelection:p}),this.highlightTargetSelection=this.updateTargetSelection({targetData:null==k?[]:[k],targetSelection:v}),this.updateTargetNodes({targetSelection:v,isHighlight:!0}),this.tickSelection=this.updateTickSelection({tickData:M,tickSelection:y}),this.updateTickNodes({tickSelection:y}),b&&this.animationState.transition("resize"),this.animationState.transition("update")}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>k3(e.nodeData.length,t.itemId))}updateDatumNodes(e){const{datumSelection:t}=e,{ctx:i}=this,n=i.animationManager.isSkipped(),o=this.getShapeFillBBox();t.each((e,t)=>{const{topLeftCornerRadius:i,topRightCornerRadius:s,bottomRightCornerRadius:r,bottomLeftCornerRadius:a}=t;e.setStyleProperties(t.style,o),e.topLeftCornerRadius=i,e.topRightCornerRadius=s,e.bottomRightCornerRadius=r,e.bottomLeftCornerRadius=a,e.pointerEvents=this.properties.bar.enabled?uE.PointerEvents.All:uE.PointerEvents.None,(n||null==e.previousDatum)&&e.setProperties(v3(0,t))});const{horizontal:s}=this;this.datumUnion.update(t,this.itemGroup,uE.Rect,(e,t,i)=>{var n;const o=Math.min(t.x,i.x),r=Math.max(t.x+t.width,i.x+i.width),a=Math.min(t.y,i.y),l=r-o,d=Math.max(t.y+t.height,i.y+i.height)-a;e.pointerEvents=uE.PointerEvents.None,e.x=o,e.y=a,e.width=l,e.height=d,e.topLeftCornerRadius=s?t.topLeftCornerRadius:i.topLeftCornerRadius,e.topRightCornerRadius=i.topRightCornerRadius,e.bottomRightCornerRadius=s?i.bottomRightCornerRadius:t.bottomRightCornerRadius,e.bottomLeftCornerRadius=t.bottomLeftCornerRadius;const c=t.clipBBox,u=null!==(n=i.clipBBox)&&void 0!==n?n:c;e.clipBBox=c&&u?D3.merge([c,u]).intersection(s?new D3(o,-1/0,l,1/0):new D3(-1/0,a,1/0,d)):void 0})}updateScaleSelection(e){return e.scaleSelection.update(e.scaleData,void 0,t=>k3(e.scaleData.length,t.itemId))}updateScaleNodes(e){const{scaleSelection:t}=e,i=this.getShapeFillBBox();t.each((e,t)=>{const{topLeftCornerRadius:n,topRightCornerRadius:o,bottomRightCornerRadius:s,bottomLeftCornerRadius:r}=t;e.setStyleProperties(t.style,i),e.setProperties(v3(0,t)),e.topLeftCornerRadius=n,e.topRightCornerRadius=o,e.bottomRightCornerRadius=s,e.bottomLeftCornerRadius=r,e.setProperties(v3(0,t))})}updateTargetSelection(e){return e.targetSelection.update(e.targetData,void 0,e=>e.itemId)}updateTargetNodes(e){const{targetSelection:t,isHighlight:i}=e;t.each((e,t)=>{const{x:n,y:o,shape:s,size:r,rotation:a}=t,l=this.getTargetStyle(i,t);e.setStyleProperties(l),e.size=r,e.shape="line"===s?$2:s,e.translationX=n,e.translationY=o,e.rotation=a})}getTargetStyle(e,t){let{datumIndex:i,style:n}=t;return xu(this.getHighlightStyle(e,i),p(p({},n),{},{opacity:1}))}updateTargetLabelSelection(e){return e.targetLabelSelection.update(e.targetData)}updateTargetLabelNodes(e){const{targetLabelSelection:t}=e;t.each((e,t)=>{const{x:i,y:n,text:o}=t,{offsetX:s,offsetY:r,fill:a,fontStyle:l,fontWeight:d,fontSize:c,fontFamily:u,textAlign:h,textBaseline:p}=t.label;e.visible=!0,e.x=i+s,e.y=n+r,e.text=o,e.fill=a,e.fontStyle=l,e.fontWeight=d,e.fontSize=c,e.fontFamily=u,e.textAlign=h,e.textBaseline=p})}updateTickSelection(e){return e.tickSelection.update(e.tickData,void 0,e=>e.tickId)}updateTickNodes(e){var t;const{gaugeRect:i,properties:n}=this,o=n.defaultScale,{enabled:s,color:r,fontFamily:a=o.label.fontFamily,fontSize:l=o.label.fontSize,fontStyle:d,fontWeight:c=o.label.fontWeight,spacing:u}=n.scale.label;let{placement:h}=n.scale.label;const p=Bp(null!==(t=n.scale.label.rotation)&&void 0!==t?t:0);let g,m,f,v;this.horizontal?(null!==h&&void 0!==h||(h="after"),g="center",m="before"===h?"bottom":"top",v=this.originY+i.y+("before"===h?-u:i.height+u)):(null!==h&&void 0!==h||(h="before"),g="before"===h?"end":"start",m="middle",f=this.originX+i.x+("before"===h?-u:i.width+u)),e.tickSelection.each((e,t)=>{if(!s)return void(e.visible=!1);const i=null!==f&&void 0!==f?f:t.translation,n=null!==v&&void 0!==v?v:t.translation;e.visible=!0,e.text=t.tickLabel,e.fill=r,e.fontFamily=a,e.fontSize=l,e.fontStyle=d,e.fontWeight=c,e.textBaseline=m,e.textAlign=g,e.x=i,e.y=n,e.rotationCenterX=i,e.rotationCenterY=n,e.rotation=p})}updateLabelSelection(e){return e.labelSelection.update(e.labelData,void 0,e=>"primary")}updateLabelNodes(e){const{labelSelection:t}=e,i=this.ctx.animationManager.isSkipped();t.each((e,t)=>{e.fill=t.fill,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.fontFamily=t.fontFamily}),(i||this.labelsHaveExplicitText())&&this.formatLabelText()}labelsHaveExplicitText(){for(const{datum:e}of this.labelSelection)if(null==e.text)return!1;return!0}formatLabelText(e){var t;const{labelSelection:i,horizontal:n,scale:o,seriesRect:s,gaugeRect:r}=this,{x:a,y:l,width:d,height:c}=r,u=null!==(t=null===e||void 0===e?void 0:e.label)&&void 0!==t?t:this.properties.value;let h;if(n){const e=o.convert(u);h=new D3(a,l,e-a,c)}else{const e=o.convert(u);h=new D3(a,e,d,c-e)}const p={seriesRect:s,gaugeRect:r,barRect:h},{margin:g}=this.properties;!function(e,t,i,n,o,s){const{seriesRect:r,gaugeRect:a,barRect:l}=o,{padding:d,horizontal:c}=n;i.each((i,n)=>{const o=Y2(e.id,t,n,null===s||void 0===s?void 0:s.label);let u,h,p;if("outside-start"===n.placement?c?(u=a.x,h=r.height):(u=r.width,h=r.height-(a.y+a.height)):"outside-end"===n.placement?c?(u=r.width-(a.x+a.width),h=r.height):(u=r.width,h=a.y):n.avoidCollisions&&(u=a.width,h=a.height),null==o)return;if(null!=u&&null!=h){const e=()=>({width:u,height:h,meta:null}),t=Z$(ed(o),n,{padding:d},e);p=null===t||void 0===t?void 0:t[0]}else{var g;const e=Wm(n),{width:t,height:i}=Ua(o)?_m(o,n):e.measureLines(Gl(o));p={text:o,fontSize:n.fontSize,lineHeight:null!==(g=n.lineHeight)&&void 0!==g?g:e.lineHeight(),width:t,height:i}}if(null==p)return void(i.visible=!1);const m=c?a.x:a.y+a.height,f=c?a.x+a.width:a.y,v=c?l.x:l.y+l.height,y=c?l.x+l.width:l.y,b=n.spacing*(c?1:-1);let x,C,S,w;switch(n.placement){case"outside-start":x=-1/0,C=1/0,S=m-b,w="Before";break;case"outside-end":x=-1/0,C=1/0,S=f+b,w="After";break;case"inside-start":x=m,C=y,S=m+b,w="After";break;case"inside-end":x=y,C=f,S=f-b,w="Before";break;case"inside-center":x=m,C=f,S=(m+f)/2,w="Center";break;case"bar-inside":x=v,C=y,S=(v+y)/2,w="Center";break;case"bar-inside-end":x=v,C=y,S=y-b,w="Before";break;case"bar-outside-end":x=y,C=f,S=y+b,w="After";break;case"bar-end":x=-1/0,C=1/0,S=y,w="Center"}const M=c?S:a.x+a.width/2,k=c?a.y+a.height/2:S;let D,I;c?(D=M+x3[w]*p.width,I=D+p.width):(D=k+C3[w]*p.height,I=D+p.height);const A=Math.min(D,I)>=Math.min(x,C)&&Math.max(D,I)<=Math.max(x,C);!n.avoidCollisions||A?(i.visible=!0,i.text=p.text,i.fontSize=p.fontSize,i.lineHeight=p.lineHeight,i.textAlign=c?y3[w]:"center",i.textBaseline=c?"middle":b3[w],i.x=M,i.y=k):i.visible=!1})}(this,this.ctx,i,{padding:g,horizontal:n},p,e)}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),w3([this.datumSelection],v3),this.formatLabelText()}resetAnimation(e){"initial"===e?this.animationState.transition("reset"):"ready"===e&&this.animationState.transition("skip")}animateLabelText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{animationManager:t}=this.ctx;let i=0,n=0;if(this.labelSelection.each((t,o)=>{var s,r,a;t.opacity=1,i=null!==(s=null!==(r=null===(a=t.previousDatum)||void 0===a?void 0:a.value)&&void 0!==r?r:e.from)&&void 0!==s?s:o.value,n=o.value}),this.labelsHaveExplicitText());else if(i===n)this.formatLabelText({label:n});else{var o;const s="".concat(this.id,"_labels");t.animate({id:s,groupId:"label",from:{label:i},to:{label:n},phase:null!==(o=e.phase)&&void 0!==o?o:"update",ease:zy,onUpdate:e=>this.formatLabelText(e),onStop:()=>this.formatLabelText({label:n})})}}animateEmptyUpdateReady(){const{animationManager:e}=this.ctx,{node:t}=f3(!0,this.horizontal);S3(this.id,"node",e,[this.datumSelection],t,(e,t)=>t.itemId),S3(this.id,"label",e,[this.labelSelection],K2,()=>"primary"),this.animateLabelText({from:0,phase:"initial"})}animateWaitingUpdateReady(){const{animationManager:e}=this.ctx,{node:t}=f3(!1,this.horizontal);S3(this.id,"node",e,[this.datumSelection],t,(e,t)=>t.itemId),this.animateLabelText()}animateReadyResize(){this.resetAllAnimation()}getSeriesDomain(){return{domain:[0,1]}}dataCount(){return Number.NaN}getSeriesRange(){return[Number.NaN,Number.NaN]}getLegendData(){return[]}getTooltipContent(e){const{id:t,properties:i}=this,{tooltip:n}=i;if(null==e)return;let o,s,r;return 0===e.type?(o=i.value,s=i.label.text,r=this.ctx.localeManager.t("ariaLabelGaugeValue")):(({value:o,text:s}=i.targets[e.index]),r=this.ctx.localeManager.t("ariaLabelGaugeTarget")),null!=o?this.formatTooltipWithContext(n,{data:[{label:s,fallbackLabel:r,value:this.formatLabel(o)}]},{seriesId:t,title:void 0,datum:void 0,value:o}):void 0}pickNodeClosestDatum(e){return Z2(this,e)}pickFocus(e){return X2(this,e)}getCaptionText(){return this.formatLabel(this.properties.value)}getCategoryValue(e){}datumIndexForCategoryValue(e){}hasItemStylers(){return null!=this.properties.label.itemStyler}};V3.className="LinearGaugeSeries",V3.type="linear-gauge";var G3={minWidth:200,minHeight:200,tooltip:{enabled:!1},series:{thickness:50,defaultColorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$interpolate:[{$palette:"secondDivergingColors"},5]},uE.SAFE_RANGE2_OPERATION]},scale:{defaultFill:{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["/2",uE.SAFE_STROKE_FILL_OPERATION,{$palette:"hierarchyColors"}]},strokeWidth:{$isUserOption:["./stroke",2,0]},label:{spacing:11}},bar:{strokeWidth:{$isUserOption:["./stroke",2,0]}},segmentation:{enabled:!1,interval:{},spacing:1},defaultTarget:{fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},size:10,shape:"triangle",placement:"after",spacing:5,label:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:5}},defaultScale:{label:{fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}}},label:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!1,placement:"inside-start",fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},fontSize:{$rem:2},minimumFontSize:Eh.SMALL,spacing:18,color:{$ref:"chartBackgroundColor"}}),margin:4,tooltip:{range:{$path:["/tooltip/range",10]}}}},H3={type:"series",name:"linear-gauge",chartType:"standalone",enterprise:!0,dependencies:[W2],version:GC,options:Gu,themeTemplate:G3,create:e=>new V3(e)},{Chart:j3,MercatorScale:W3}=uE;function _3(e){return"map-shape"===e.type||"map-line"===e.type||"map-marker"===e.type||"map-shape-background"===e.type||"map-line-background"===e.type}var K3=class extends j3{constructor(e,t){super(e,t),this.xAxis={id:xm(uE.Axis),direction:_u.X},this.yAxis={id:xm(uE.Axis),direction:_u.Y},this.ctx.zoomManager.setAxes([this.xAxis,this.yAxis])}getChartType(){return"topology"}updateData(){super.updateData();const e=this.getOptions();this.topology!==e.topology&&(this.topology=e.topology);const{topology:t}=this;for(const i of this.series)_3(i)&&i.setChartTopology(t)}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,n=e.layoutBox.clone().shrink(this.seriesArea.getPadding());this.seriesRect=n,this.animationRect=n;const o=this.series,s=o.reduce((e,t)=>{if(!t.visible)return e;const i=t.topologyBounds;return null==i?e:null==e?i:e.merge(i)},void 0);let r;if(null!=s){const{lon0:e,lat0:t,lon1:i,lat1:o}=s,a=[[e,t],[i,o]],l=W3.bounds(a),{width:d,height:c}=n,u=Math.min(d/l.width,c/l.height),h=l.width*u,p=l.height*u,g=(d-h)/2,m=(c-p)/2,f=g,v=m,y=g+h,b=m+p,x=this.ctx.zoomManager.getAxisZoom(this.xAxis.id),C=this.ctx.zoomManager.getAxisZoom(this.yAxis.id),S=(y-f)/(x.max-x.min),w=f-S*x.min,M=(b-v)/(1-C.min-(1-C.max)),k=v-M*(1-C.max);r=new W3(a,[[w,k],[w+S,k+M]])}for(const l of o)l.scale=r;const a=this.series.some(e=>e.visible);t.visible=a;for(const l of[t,i])l.translationX=Math.floor(n.x),l.translationY=Math.floor(n.y),l.setClipRect(n.clone());this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:a,rect:n,paddedRect:e.layoutBox}})}};K3.className="TopologyChart",K3.type="topology",kV([ru],K3.prototype,"topology",2);var{topologyChartOptionsDefs:U3}=uE,Y3={type:"chart",name:"topology",enterprise:!0,version:GC,options:U3,create:(e,t)=>new K3(e,t)},$3={zoom:{axes:"xy",anchorPointX:"pointer",anchorPointY:"pointer",buttons:{anchorPointX:"middle",anchorPointY:"middle"}},legend:{enabled:!1}};function Z3(e){const t=Qg(e);return em(t,e=>{"object"===typeof e&&"$palette"in e&&(e.$mapPalette=e.$palette,delete e.$palette)}),t}function X3(e,t,i,n){const[o,s]=e,[r,a]=t,l=r-o,d=a-s,c=l*l+d*d;let u,h;if(Math.abs(c)<1e-9)u=o,h=s;else{let e=((i-o)*l+(n-s)*d)/c;e=Math.max(0,Math.min(1,e)),u=o+e*(r-o),h=s+e*(a-s)}const p=i-u,g=n-h;return p*p+g*g}function q3(e,t,i){let n=1/0,o=e.at(-1);for(const s of e)n=Math.min(n,X3(o,s,t,i)),o=s;return Math.sqrt(n)}function Q3(e){let[t,i]=e[0],n=0;for(let o=1;o<e.length;o+=1){const[s,r]=e[o];n+=Math.hypot(s-t,r-i),t=s,i=r}return n}function J3(e){if(0===e.length)return;const t=Q3(e)/2;let[i,n]=e[0],o=0;for(let s=1;s<e.length;s+=1){const[r,a]=e[s],l=Math.hypot(r-i,a-n),d=o+l;if(d>t){const e=(t-o)/l;return{point:[i+(r-i)*e,n+(a-n)*e],angle:Math.atan2(a-n,r-i)}}o=d,i=r,n=a}}function e4(e,t){for(const i of e){const[e,n]=i;t=Rh.extend(t,e,n,e,n)}return t}function t4(e,t,i){let n=!1,o=1/0;for(const s of e){let e=s.at(-1),[r,a]=e;for(const l of s){const[s,d]=l;d>i!==a>i&&t<(r-s)*(i-d)/(a-d)+s&&(n=!n),o=Math.min(o,X3(e,l,t,i)),e=l,r=s,a=d}}return(n?-1:1)*Math.sqrt(o)}var{Path:i4,ExtendedPath2D:n4,BBox:o4}=uE,s4=class extends i4{constructor(){super(...arguments),this.projectedGeometry=void 0,this.renderMode=3,this.strokePath=new n4}computeBBox(){var e;return(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),null===(e=this.bbox)||void 0===e?void 0:e.clone()}updatePath(){const{projectedGeometry:e}=this;this.strokePath.clear(),this.path.clear(),this.bbox=null==e?void 0:this.drawGeometry(e,void 0)}drawPath(e){super.drawPath(e),this.renderStroke(e,this.strokePath.getPath2D())}containsPoint(e,t){const{projectedGeometry:i}=this;return null!=i&&(!!this.getBBox().containsPoint(e,t)&&this.geometryDistance(i,e,t)<=0)}distanceSquared(e,t){const{projectedGeometry:i}=this;if(null==i)return 1/0;const n=this.geometryDistance(i,e,t);return n>0?n*n:0}geometryDistance(e,t,i){const{renderMode:n,strokeWidth:o}=this,s=0!==(1&n),r=0!==(2&n),a=Math.max(o/2,1)+1;switch(e.type){case"GeometryCollection":return e.geometries.reduce((e,n)=>Math.min(e,this.geometryDistance(n,t,i)),1/0);case"MultiPolygon":return s?e.coordinates.reduce((e,n)=>Math.min(e,Math.max(t4(n,t,i),0)),1/0):1/0;case"Polygon":return s?Math.max(t4(e.coordinates,t,i),0):1/0;case"MultiLineString":return r?e.coordinates.reduce((e,n)=>Math.min(e,Math.max(q3(n,t,i)-a,0)),1/0):1/0;case"LineString":return r?Math.max(q3(e.coordinates,t,i)-a,0):1/0;default:return 1/0}}shouldDrawPolygons(){return 0!==(1&this.renderMode)}shouldDrawLines(){return 0!==(2&this.renderMode)}drawGeometryCollection(e,t){for(const i of e)t=this.drawGeometry(i,t);return t}drawMultiPolygon(e,t){if(!this.shouldDrawPolygons())return t;for(const i of e)t=this.drawPolygon(this.path,i,t);return t}drawSinglePolygon(e,t){return this.shouldDrawPolygons()?this.drawPolygon(this.path,e,t):t}drawMultiLineString(e,t){if(!this.shouldDrawLines())return t;for(const i of e)t=this.drawLineString(this.strokePath,i,t,!1);return t}drawSingleLineString(e,t){return this.shouldDrawLines()?this.drawLineString(this.strokePath,e,t,!1):t}drawGeometry(e,t){switch(e.type){case"GeometryCollection":return this.drawGeometryCollection(e.geometries,t);case"MultiPolygon":return this.drawMultiPolygon(e.coordinates,t);case"Polygon":return this.drawSinglePolygon(e.coordinates,t);case"MultiLineString":return this.drawMultiLineString(e.coordinates,t);case"LineString":return this.drawSingleLineString(e.coordinates,t);case"Point":case"MultiPoint":return t}}drawPolygon(e,t,i){if(t.length<1)return i;i=this.drawLineString(e,t[0],i,!0);for(let n=1;n<t.length;n+=1){const i=t[n];this.drawLineString(e,i,void 0,!0)}return i}drawLineString(e,t,i,n){if(t.length<2)return i;const o=n?t.length-1:t.length;for(let s=0;s<o;s+=1){const[n,o]=t[s];if(0===s?e.moveTo(n,o):e.lineTo(n,o),null==i)i=new o4(n,o,0,0);else{const{x:e,y:t}=i,s=e+i.width,r=t+i.height;i.x=Math.min(e,n),i.y=Math.min(t,o),i.width=Math.max(s,n)-i.x,i.height=Math.max(r,o)-i.y}}return n&&e.closePath(),i}};function r4(e){const t=e4(e[0],void 0);return null==t?0:Math.abs(t.lat1-t.lat0)*Math.abs(t.lon1-t.lon0)}function a4(e,t){let i,n;for(const o of e){const e=t(o);null!=e&&((null==i||e>i)&&(i=e,n=o))}return n}function l4(e,t){if(null!=e.bbox){const[i,n,o,s]=e.bbox;return t=Rh.extend(t,i,n,o,s)}switch(e.type){case"GeometryCollection":for(const i of e.geometries)t=l4(i,t);break;case"MultiPolygon":for(const i of e.coordinates)i.length>0&&(t=e4(i[0],t));break;case"Polygon":e.coordinates.length>0&&(t=e4(e.coordinates[0],t));break;case"MultiLineString":for(const i of e.coordinates)t=e4(i,t);break;case"LineString":t=e4(e.coordinates,t);break;case"MultiPoint":for(const i of e.coordinates){const[e,n]=i;t=Rh.extend(t,e,n,e,n)}break;case"Point":{const[i,n]=e.coordinates;t=Rh.extend(t,i,n,i,n);break}}return t}function d4(e){switch(e.type){case"Polygon":return e.coordinates;case"MultiPolygon":return a4(e.coordinates,r4);case"GeometryCollection":return a4(e.geometries.map(d4).filter(e=>null!=e),r4);case"MultiLineString":case"LineString":case"MultiPoint":case"Point":return}}function c4(e){switch(e.type){case"LineString":return e.coordinates;case"MultiLineString":return a4(e.coordinates,Q3);case"GeometryCollection":return a4(e.geometries.map(c4).filter(e=>null!=e),Q3);case"MultiPolygon":case"Polygon":case"MultiPoint":case"Point":return}}function u4(e,t){if(null==e)return!1;switch(e.type){case"GeometryCollection":return e.geometries.some(e=>u4(e,t));case"MultiPolygon":case"Polygon":return 0!==(1&t);case"MultiLineString":case"LineString":return 0!==(2&t);case"MultiPoint":case"Point":return 0!==(4&t)}}function h4(e,t){switch(e.type){case"GeometryCollection":return{type:"GeometryCollection",geometries:e.geometries.map(e=>h4(e,t))};case"Polygon":return{type:"Polygon",coordinates:g4(e.coordinates,t)};case"MultiPolygon":return{type:"MultiPolygon",coordinates:p4(e.coordinates,t)};case"MultiLineString":return{type:"MultiLineString",coordinates:g4(e.coordinates,t)};case"LineString":return{type:"LineString",coordinates:m4(e.coordinates,t)};case"MultiPoint":return{type:"MultiPoint",coordinates:m4(e.coordinates,t)};case"Point":return{type:"Point",coordinates:t.convert(e.coordinates)}}}function p4(e,t){return e.map(e=>g4(e,t))}function g4(e,t){return e.map(e=>m4(e,t))}function m4(e,t){return e.map(e=>t.convert(e))}function f4(e,t){var i;const n=null===(i=e.contextNodeData)||void 0===i?void 0:i.nodeData[t.datumIndex];if(void 0!==n)for(const o of e.datumSelection.nodes())if(o.datum===n)return o}kV([Uy({equals:yu})],s4.prototype,"projectedGeometry",2),kV([_y()],s4.prototype,"renderMode",2);uE.SeriesProperties;var v4=class extends uE.DataModelSeries{constructor(e){super(e),this.cleanup.register(this.ctx.eventsHub.on("data:update",()=>{}),this.ctx.eventsHub.on("legend:item-click",e=>{this.onLegendItemClick(e)}),this.ctx.eventsHub.on("legend:item-double-click",e=>{this.onLegendItemDoubleClick(e)}))}getSeriesDomain(){return{domain:[Number.NaN,Number.NaN]}}getSeriesRange(){return[Number.NaN,Number.NaN]}getHighlightedDatum(){var e,t,i;let n=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight();const{legendItemName:o}=this.properties,s=null!=o&&null==(null===(t=n)||void 0===t?void 0:t.datum)&&o===(null===(i=n)||void 0===i?void 0:i.legendItemName);return null==n||(n.series===this||s)&&null!=n.datum||(n=void 0),n}},{SeriesProperties:y4,makeSeriesTooltip:b4,Label:x4}=uE,C4=class extends y4{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.topologyIdKey="name",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.maxStrokeWidth=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.label=new x4,this.tooltip=b4()}getStyle(){const{stroke:e,strokeOpacity:t,strokeWidth:i,lineDash:n,lineDashOffset:o}=this;return{stroke:e,strokeOpacity:t,strokeWidth:i,lineDash:n,lineDashOffset:o,opacity:1}}};kV([ru],C4.prototype,"topology",2),kV([ru],C4.prototype,"title",2),kV([ru],C4.prototype,"legendItemName",2),kV([ru],C4.prototype,"idKey",2),kV([ru],C4.prototype,"topologyIdKey",2),kV([ru],C4.prototype,"idName",2),kV([ru],C4.prototype,"labelKey",2),kV([ru],C4.prototype,"labelName",2),kV([ru],C4.prototype,"sizeKey",2),kV([ru],C4.prototype,"sizeName",2),kV([ru],C4.prototype,"colorKey",2),kV([ru],C4.prototype,"colorName",2),kV([ru],C4.prototype,"sizeDomain",2),kV([ru],C4.prototype,"colorRange",2),kV([ru],C4.prototype,"maxStrokeWidth",2),kV([ru],C4.prototype,"stroke",2),kV([ru],C4.prototype,"strokeOpacity",2),kV([ru],C4.prototype,"strokeWidth",2),kV([ru],C4.prototype,"lineDash",2),kV([ru],C4.prototype,"lineDashOffset",2),kV([ru],C4.prototype,"itemStyler",2),kV([ru],C4.prototype,"label",2),kV([ru],C4.prototype,"tooltip",2);var{getMissCount:S4,getLabelStyles:w4,createDatumId:M4,SeriesNodePickMode:k4,valueProperty:D4,ColorScale:I4,LinearScale:A4,Selection:L4,Text:N4,Transformable:T4}=uE,R4=class extends v4{constructor(e){super({moduleCtx:e,categoryKey:void 0,propertyKeys:{size:["colorKey"],color:["colorKey"],label:["labelKey"]},propertyNames:{size:["sizeName"],color:["colorName"],label:["labelName"]},pickModes:[k4.EXACT_SHAPE_MATCH,k4.NEAREST_NODE],usesPlacedLabels:!0}),this.properties=new C4,this._chartTopology=void 0,this.colorScale=new I4,this.sizeScale=new A4,this.datumSelection=L4.select(this.contentGroup,()=>this.nodeFactory()),this.labelSelection=L4.select(this.labelGroup,N4),this.highlightDatumSelection=L4.select(this.highlightNodeGroup,()=>this.nodeFactory()),this.highlightLabelSelection=L4.select(this.highlightLabelGroup,N4),this.placedLabelData=[],this._previousDatumMidPoint=void 0}getNodeData(){var e;return null===(e=this.contextNodeData)||void 0===e?void 0:e.nodeData}get topology(){var e;return null!==(e=this.properties.topology)&&void 0!==e?e:this._chartTopology}get hasData(){return super.hasData&&null!=this.topology}renderToOffscreenCanvas(){return!0}setZIndex(e){return super.setZIndex(e),this.contentGroup.zIndex=[1,e],this.highlightGroup.zIndex=[4,e],!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}isLabelEnabled(){return null!=this.properties.labelKey&&this.properties.label.enabled}nodeFactory(){const e=new s4;return e.renderMode=2,e.lineJoin="round",e.lineCap="round",e}async processData(e){var t;if(null==this.data)return;const{data:i,topology:n,sizeScale:o,colorScale:s}=this,{topologyIdKey:r,idKey:a,sizeKey:l,colorKey:d,labelKey:c,sizeDomain:u,colorRange:h}=this.properties,p=new Map;for(const w of null!==(g=null===n||void 0===n?void 0:n.features.values())&&void 0!==g?g:[]){var g,m;const e=null===(m=w.properties)||void 0===m?void 0:m[r];null!=e&&u4(w.geometry,2)&&p.set(e,w)}const f=this.sizeScale.type,v=this.colorScale.type,y=null===(t=this.scale)||void 0===t?void 0:t.type,{dataModel:b,processedData:x}=await this.requestDataModel(e,i,{props:[D4(a,y,{id:"idValue",includeProperty:!1}),D4(a,y,{id:"featureValue",includeProperty:!1,processor:()=>e=>p.get(e)}),...null==c?[]:[D4(c,"category",{id:"labelValue"})],...null==l?[]:[D4(l,f,{id:"sizeValue"})],...null==d?[]:[D4(d,v,{id:"colorValue"})]]}),C=b.resolveColumnById(this,"featureValue",x);if(this.topologyBounds=C.reduce((e,t)=>{const i=null===t||void 0===t?void 0:t.geometry;return null==i?e:l4(i,e)},void 0),null!=l){var S;const e=b.resolveProcessedDataIndexById(this,"sizeValue"),t=null!==(S=x.domain.values[e])&&void 0!==S?S:[];o.domain=null!==u&&void 0!==u?u:t}if(null!=h&&this.isColorScaleValid()){const e=b.resolveProcessedDataIndexById(this,"colorValue");s.domain=x.domain.values[e],s.range=h,s.update()}null==n&&jr.warnOnce("no topology was provided for [MapLineSeries]; nothing will be rendered.")}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const n=t.resolveProcessedDataIndexById(this,"colorValue"),o=i.input.count,s=S4(this,i.defs.values[n].missing);return!(0===o||o===s)}getLabelDatum(e,t,i,n,o,s){if(null==n||null==o||null==i)return;const r=c4(o);if(null==r)return;const{idKey:a,idName:l,sizeKey:d,sizeName:c,colorKey:u,colorName:h,labelKey:p,labelName:g,label:m}=this.properties;if(null==p||!m.enabled)return;const f=this.getLabelText(n,e,p,"label",[],m,{value:n,datum:e,idKey:a,idName:l,sizeKey:d,sizeName:c,colorKey:u,colorName:h,labelKey:p,labelName:g});if(null==f)return;const v=s.measureLines(String(f)),y=J3(r);if(null==y)return;const[b,x]=y.point,{width:C,height:S}=v;return{point:{x:b,y:x,size:0},label:{width:C,height:S,text:f},anchor:void 0,placement:void 0,datumIndex:t,idValue:i}}resolveColumn(e,t,i){if(null!=e&&null!=this.dataModel)return this.dataModel.resolveColumnById(this,t,i)}resolveLineDataColumns(e){const{sizeKey:t,colorKey:i,labelKey:n}=this.properties;return{idValues:this.dataModel.resolveColumnById(this,"idValue",e),featureValues:this.dataModel.resolveColumnById(this,"featureValue",e),labelValues:this.resolveColumn(n,"labelValue",e),sizeValues:this.resolveColumn(t,"sizeValue",e),colorValues:this.resolveColumn(i,"colorValue",e)}}prepareProjectedLineGeometries(e,t,i){const n=new Map;for(const[a]of null!==(o=null===(s=i.dataSources.get(this.id))||void 0===s?void 0:s.data.entries())&&void 0!==o?o:[]){var o,s,r;const i=e[a],l=null===(r=t[a])||void 0===r?void 0:r.geometry,d=null!=l&&null!=this.scale?h4(l,this.scale):void 0;null!=i&&null!=d&&n.set(i,d)}return n}warnMissingGeometries(e){if(0===e.length)return;if(e.length>10){const t=e.length-10;e.length=10,e.push("(+".concat(t," more)"))}jr.warnOnce("some data items do not have matches in the provided topology",e)}createNodeData(){var e,t,i;const{id:n,dataModel:o,processedData:s,sizeScale:r,properties:a}=this,{idKey:l,label:d,legendItemName:c,colorKey:u}=a;if(null==o||null==s)return;const h=this.resolveLineDataColumns(s),g=null!==(e=a.maxStrokeWidth)&&void 0!==e?e:a.strokeWidth;r.range=[Math.min(a.strokeWidth,g),g];const m=Wm(d),f=this.prepareProjectedLineGeometries(h.idValues,h.featureValues,s),v=[],y=[],b=[],x=null!==(t=null===(i=s.dataSources.get(this.id))||void 0===i?void 0:i.data)&&void 0!==t?t:[];for(const[M,k]of x.entries()){var C,S,w;const e={idValue:h.idValues[M],colorValue:null===(C=h.colorValues)||void 0===C?void 0:C[M],sizeValue:null===(S=h.sizeValues)||void 0===S?void 0:S[M],labelValue:null===(w=h.labelValues)||void 0===w?void 0:w[M]},t=f.get(e.idValue);if(null==t&&b.push(e.idValue),null!=u&&null==e.colorValue)continue;const i=this.getLabelDatum(k,M,e.idValue,e.labelValue,t,m);null!=i&&y.push(i),v.push(p(p({series:this,itemId:l,datum:k,datumIndex:M},e),{},{projectedGeometry:t,legendItemName:c,style:this.getItemStyle({datumIndex:M,datum:k,colorValue:e.colorValue,sizeValue:e.sizeValue},!1)}))}return this.warnMissingGeometries(b),{itemId:n,nodeData:v,labelData:y}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){var e,t,i,n;const{datumSelection:o,highlightDatumSelection:s}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.labelGroup.visible=this.visible;const r=null!==(e=null===(t=this.ctx.chartService.highlight)||void 0===t?void 0:t.drawingMode)&&void 0!==e?e:"overlay",a=this.getHighlightedDatum(),l=null!==(i=null===(n=this.contextNodeData)||void 0===n?void 0:n.nodeData)&&void 0!==i?i:[];this.datumSelection=this.updateDatumSelection({nodeData:l,datumSelection:o}),this.updateDatumStyles({datumSelection:o,isHighlight:!1}),this.updateDatumNodes({datumSelection:o,isHighlight:!1,drawingMode:"overlay"}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:null==a?[]:[a],datumSelection:s}),this.updateDatumStyles({datumSelection:s,isHighlight:!0}),this.updateDatumNodes({datumSelection:s,isHighlight:!0,drawingMode:r}),this.updateLabelNodes({labelSelection:this.labelSelection,isHighlight:!1}),this.updateHighlightLabelSelection(a)}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,e=>M4(e.idValue))}getItemStyle(e,t){let{datumIndex:i=0,datum:n,colorValue:o,sizeValue:s}=e;const{properties:r,colorScale:a,sizeScale:l}=this,{colorRange:d,itemStyler:c}=r,u=r.getStyle();var h;null!=o&&(u.stroke=this.isColorScaleValid()?a.convert(o):null!==(h=null===d||void 0===d?void 0:d[0])&&void 0!==h?h:r.stroke);const p=xu(this.getHighlightStyle(t,i),u);let g;return null!=s&&(p.strokeWidth=l.convert(s,{clamp:!0})),null!=c&&(g=this.cachedDatumCallback(M4(i,t?"highlight":"node"),()=>{const e=this.makeItemStylerParams(n,i,t,p);return this.callWithContext(c,e)})),g?xu(p,g):p}makeItemStylerParams(e,t,i,n){var o;const{id:s}=this,r=null===(o=this.ctx.highlightManager)||void 0===o?void 0:o.getActiveHighlight();return p({seriesId:s,datum:e,highlightState:this.getHighlightStateString(r,i,t)},n)}updateDatumStyles(e){let{datumSelection:t,isHighlight:i}=e;t.each((e,t)=>{t.style=this.getItemStyle(t,i)})}updateDatumNodes(e){let{datumSelection:t,drawingMode:i}=e;t.each((e,t)=>{const{projectedGeometry:n,style:o}=t;if(null==n)return e.visible=!1,void(e.projectedGeometry=void 0);e.visible=!0,e.projectedGeometry=n,e.setProperties(o),e.drawingMode=i})}updatePlacedLabelData(e){this.placedLabelData=e,this.labelSelection=this.labelSelection.update(e,e=>{e.pointerEvents=uE.PointerEvents.None}),this.updateLabelNodes({labelSelection:this.labelSelection,isHighlight:!1}),this.updateHighlightLabelSelection()}updateLabelNodes(e){let{isHighlight:t,labelSelection:i}=e;const{properties:n}=this,o=this.getHighlightedDatum();i.each((e,i)=>{var s;const{x:r,y:a,width:l,height:d,text:c,datum:u}=i,h=w4(this,void 0,n,n.label,t,o),{color:p,fontStyle:g,fontWeight:m,fontSize:f,fontFamily:v}=h;e.visible=!0,e.x=r+l/2,e.y=a+d/2,e.text=c,e.fill=p,e.fontStyle=g,e.fontWeight=m,e.fontSize=f,e.fontFamily=v,e.textAlign="center",e.textBaseline="middle";const y=null===u||void 0===u?void 0:u.datumIndex;e.fillOpacity=null!==(s=this.getHighlightStyle(t,y).opacity)&&void 0!==s?s:1,e.setBoxing(h)})}updateHighlightLabelSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getHighlightedDatum();const t=null===e||void 0===e?void 0:e.idValue,i=null!=t&&this.isLabelEnabled()?this.placedLabelData.filter(e=>e.datum.idValue===t):[];this.highlightLabelSelection=this.highlightLabelSelection.update(i),0===i.length&&this.highlightLabelSelection.cleanup(),this.updateLabelNodes({labelSelection:this.highlightLabelSelection,isHighlight:!0})}resetAnimation(){}getLabelData(){var e,t;return this.isLabelEnabled()&&null!==(e=null===(t=this.contextNodeData)||void 0===t?void 0:t.labelData)&&void 0!==e?e:[]}pickNodeClosestDatum(e){let t,{x:i,y:n}=e,o=1/0;return this.datumSelection.each((e,s)=>{const r=e.distanceSquared(i,n);r<o&&(o=r,t=s)}),null==t?void 0:{datum:t,distance:Math.sqrt(o)}}datumMidPoint(e){var t;const{_previousDatumMidPoint:i}=this;if((null===i||void 0===i?void 0:i.datum)===e)return i.point;const n=e.projectedGeometry,o=null==n?void 0:c4(n),s=null==o||null===(t=J3(o))||void 0===t?void 0:t.point,r=null==s?void 0:{x:s[0],y:s[1]};return this._previousDatumMidPoint={datum:e,point:r},r}legendItemSymbol(e){const{dataModel:t,processedData:i,properties:n}=this,{strokeWidth:o,strokeOpacity:s,lineDash:r}=n;let{stroke:a}=n;if(null!=e&&this.isColorScaleValid()){const n=t.resolveColumnById(this,"colorValue",i)[e];null!=n&&(a=this.colorScale.convert(n))}return{marker:{fill:void 0,fillOpacity:0,stroke:void 0,strokeWidth:0,strokeOpacity:0,lineDash:[0],lineDashOffset:0,enabled:!1},line:{enabled:!0,stroke:a,strokeWidth:o,strokeOpacity:s,lineDash:r}}}getLegendData(e){const{processedData:t,dataModel:i}=this;if(null==t||null==i)return[];const{id:n,visible:o}=this,{title:s,legendItemName:r,idKey:a,idName:l,colorKey:d,colorRange:c,showInLegend:u}=this.properties;if("gradient"===e&&null!=d&&null!=c){const e=t.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:o,seriesId:n,series:this.getFormatterContext("color"),colorRange:c,colorDomain:e}]}if("category"===e){var h,p;return[{legendType:"category",id:n,itemId:n,seriesId:n,enabled:o,label:{text:null!==(h=null!==(p=null!==r&&void 0!==r?r:s)&&void 0!==p?p:l)&&void 0!==h?h:a},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!u}]}return[]}getTooltipContent(e){var t;const{id:i,dataModel:n,processedData:o,properties:s,ctx:{formatManager:r}}=this,{idKey:a,idName:l,colorKey:d,colorName:c,sizeKey:u,sizeName:h,labelKey:g,labelName:m,title:f,legendItemName:v,tooltip:y}=s;if(!n||!o)return;const b=null===(t=o.dataSources.get(this.id))||void 0===t?void 0:t.data[e],x=n.resolveColumnById(this,"idValue",o),C=null==u?void 0:n.resolveColumnById(this,"sizeValue",o)[e],S=null==d?void 0:n.resolveColumnById(this,"colorValue",o)[e];if(null!=d&&null==S)return;const w=[];if(this.isLabelEnabled()&&null!=g&&g!==a){const t=n.resolveColumnById(this,"labelValue",o)[e],s=r.format(this.callWithContext.bind(this),{type:"category",value:t,datum:b,seriesId:i,legendItemName:v,key:g,source:"tooltip",property:"label",domain:[],boundSeries:this.getFormatterContext("label")});w.push({label:m,fallbackLabel:g,value:null!==s&&void 0!==s?s:t})}if(null!=C&&null!=u){const e=n.getDomain(this,"sizeValue","value",o).domain,t=r.format(this.callWithContext.bind(this),{type:"number",value:C,datum:b,seriesId:i,legendItemName:v,key:u,source:"tooltip",property:"size",domain:e,boundSeries:this.getFormatterContext("size"),fractionDigits:void 0});w.push({label:h,fallbackLabel:u,value:null!==t&&void 0!==t?t:String(C)})}if(null!=S&&null!=d){const e=n.getDomain(this,"colorValue","value",o).domain,t=r.format(this.callWithContext.bind(this),{type:"number",value:S,datum:b,seriesId:i,legendItemName:v,key:d,source:"tooltip",property:"color",domain:e,boundSeries:this.getFormatterContext("color"),fractionDigits:void 0});w.push({label:c,fallbackLabel:d,value:null!==t&&void 0!==t?t:String(S)})}const M=this.getItemStyle({datumIndex:e,datum:b,colorValue:S,sizeValue:C},!1);return this.formatTooltipWithContext(y,{heading:x[e],title:null!==f&&void 0!==f?f:v,symbol:this.legendItemSymbol(e),data:w},p({seriesId:i,datum:b,title:f,idKey:a,idName:l,colorKey:d,colorName:c,sizeKey:u,sizeName:h,labelKey:g,labelName:m},M))}computeFocusBounds(e){const t=f4(this,e);return t?T4.toCanvas(this.contentGroup,t.getBBox()):void 0}hasItemStylers(){return null!=this.properties.itemStyler||null!=this.properties.label.itemStyler}};R4.className="MapLineSeries",R4.type="map-line";var{mapLineSeriesThemeableOptionsDef:E4}=uE,P4=p(p(p({},Mu(Yc,["highlightStyle","highlight"])),E4),{},{type:pd(jd("map-line")),idKey:pd(Ad),sizeKey:Ad,colorKey:Ad,labelKey:Ad,idName:Ad,sizeName:Ad,colorName:Ad,labelName:Ad,topology:Ug,topologyIdKey:Ad,legendItemName:Ad,title:Ad});P4.colorRange=gd(vd(_d(wd),Nd(1)));var O4={type:"series",name:"map-line",chartType:"topology",enterprise:!0,version:GC,dependencies:[Y3],options:P4,themeTemplate:p(p({},$3),{},{series:{stroke:Z3(uE.SAFE_STROKE_FILL_OPERATION),colorRange:{$if:[{$eq:[{$mapPalette:"type"},"inbuilt"]},{$mapPalette:"divergingColors"},Z3(uE.SAFE_RANGE2_OPERATION)]},strokeWidth:1,maxStrokeWidth:3,lineDash:[0],lineDashOffset:0,label:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}),highlight:Z3(uE.multiSeriesHighlightStyle())},tooltip:{range:"exact"}}),create:e=>new R4(e)},{SeriesProperties:F4,makeSeriesTooltip:z4}=uE,B4=class extends F4{constructor(){super(...arguments),this.topology=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=z4()}};kV([ru],B4.prototype,"topology",2),kV([ru],B4.prototype,"stroke",2),kV([ru],B4.prototype,"strokeOpacity",2),kV([ru],B4.prototype,"strokeWidth",2),kV([ru],B4.prototype,"lineDash",2),kV([ru],B4.prototype,"lineDashOffset",2),kV([ru],B4.prototype,"tooltip",2);var{createDatumId:V4,Group:G4,Selection:H4,PointerEvents:j4}=uE,W4=class extends v4{constructor(e){super({moduleCtx:e,categoryKey:void 0,pickModes:[]}),this.properties=new B4,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new G4({name:"itemGroup"})),this.datumSelection=H4.select(this.itemGroup,()=>this.nodeFactory()),this.itemGroup.pointerEvents=j4.None}getNodeData(){var e;return null===(e=this.contextNodeData)||void 0===e?void 0:e.nodeData}get topology(){var e;return null!==(e=this.properties.topology)&&void 0!==e?e:this._chartTopology}get focusable(){return!1}setOptionsData(){}setChartData(){}get hasData(){return!1}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setZIndex(e){return super.setZIndex(e),this.contentGroup.zIndex=[0,e,0],this.highlightGroup.zIndex=[0,e,1],!0}nodeFactory(){const e=new s4;return e.renderMode=2,e.lineJoin="round",e.lineCap="round",e.pointerEvents=j4.None,e}processData(){const{topology:e}=this;this.topologyBounds=null===e||void 0===e?void 0:e.features.reduce((e,t)=>{const i=t.geometry;return null==i?e:l4(i,e)},void 0),null==e&&jr.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}createNodeData(){const{id:e,topology:t,scale:i,properties:n}=this;if(null==t)return;const{stroke:o,strokeOpacity:s,lineDash:r,lineDashOffset:a,strokeWidth:l}=n,d=[];for(const[c,u]of t.features.entries()){const{geometry:e}=u,t=null!=e&&null!=i?h4(e,i):void 0;null!=t&&d.push({series:this,itemId:c,datum:u,datumIndex:0,index:c,projectedGeometry:t,style:{stroke:o,strokeOpacity:s,lineDash:r,lineDashOffset:a,strokeWidth:l}})}return{itemId:e,nodeData:d,labelData:[]}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){var e;const{datumSelection:t}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.labelGroup.visible=this.visible;const{nodeData:i=[]}=null!==(e=this.contextNodeData)&&void 0!==e?e:{};this.datumSelection=this.updateDatumSelection({nodeData:i,datumSelection:t}),this.updateDatumNodes({datumSelection:t})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,e=>V4(e.index))}updateDatumNodes(e){const{datumSelection:t}=e;t.each((e,t)=>{const{projectedGeometry:i}=t;if(null==i)return e.visible=!1,void(e.projectedGeometry=void 0);e.visible=!0,e.projectedGeometry=i,e.setProperties(t.style)})}resetAnimation(){}getLegendData(){return[]}getTooltipContent(e){}computeFocusBounds(e){}hasItemStylers(){return!1}};W4.className="MapLineBackgroundSeries",W4.type="map-line-background";var{mapLineBackgroundSeriesThemeableOptionsDef:_4}=uE,K4=p(p({},_4),{},{type:pd(jd("map-line-background")),topology:Ug}),U4={type:"series",name:"map-line-background",chartType:"topology",enterprise:!0,version:GC,dependencies:[Y3],options:K4,themeTemplate:p(p({},$3),{},{series:{stroke:{$path:["/1",{$mapPalette:"stroke"},{$mapPalette:"secondHierarchyColors"}]},strokeWidth:1,lineDash:[0],lineDashOffset:0}}),create:e=>new W4(e)};function Y4(e,t,i){const n=e4(e[0],void 0);if(null==n)return;const o=(n.lon0+n.lon1)/2,s=(n.lat0+n.lat1)/2,r=Math.abs(n.lon1-n.lon0),a=Math.abs(n.lat1-n.lat0),l=function(e){if(0===e.length)return;let t=0,i=0,n=0,[o,s]=e.at(-1);for(const[r,a]of e){const e=o*a-r*s;n+=e,t+=(o+r)*e,i+=(s+a)*e,o=r,s=a}return n*=3,[t/n,i/n]}(e[0]),[d,c]=l,u=-t4(e,d,c);let h;const p=(e,t)=>e-.5*Math.max(t-u,0),g=(t,n,o)=>{const{distance:s,maxDistance:r}=i(e,t,n,o),a=Math.hypot(d-t,c-n),l=Math.min(Math.max(d,t-o/2),t+o/2),u=Math.min(Math.max(c,n-o/2),n+o/2),h=Math.hypot(d-l,c-u);return{distance:s,maxDistance:r,value:p(s,a),maxValue:p(r,h),x:t,y:n,stride:o}},m=(e,t,i,n)=>{const o=g(t,i,n);o.maxDistance>=0&&e.push(o)},f=Math.min(r,a)/2;let v={value:g(o,s,f),next:null};for(;null!=v;){const e=v.value,{distance:i,value:n,maxValue:o,x:s,y:r,stride:a}=e;if(v=v.next,i>0&&(null==h||n>h.value)&&(h=e),null!=h&&o-h.value<=t)continue;const l=a/2,d=[];m(d,s-l,r-l,l),m(d,s+l,r-l,l),m(d,s-l,r+l,l),m(d,s+l,r+l,l),d.sort($4),v=wm(v,d,$4)}if(null==h)return;const{distance:y,x:b,y:x}=h;return{x:b,y:x,distance:y}}var $4=(e,t)=>t.maxValue-e.maxValue;function Z4(e,t){const i=Y4(e,t,(e,t,i,n)=>{const o=-t4(e,t,i);return{distance:o,maxDistance:o+n*Math.SQRT2}});if(null==i)return;const{x:n,y:o}=i;return[n,o]}function X4(e,t){let i;switch(e.type){case"GeometryCollection":return e.geometries.flatMap(e=>X4(e,t));case"MultiPoint":return e.coordinates;case"Point":return[e.coordinates];case"MultiPolygon":{const n=d4(e);i=null==n?void 0:Z4(n,t);break}case"Polygon":{const n=e.coordinates;i=null==n?void 0:Z4(n,t);break}case"MultiLineString":{var n;const t=c4(e);i=null==t||null===(n=J3(t))||void 0===n?void 0:n.point;break}case"LineString":var o;i=null===(o=J3(e.coordinates))||void 0===o?void 0:o.point;break}return null==i?[]:[i]}var{BBox:q4}=uE;function Q4(e){if(!e)return;const{range:t}=e,i=t[0][0],n=t[0][1],o=t[1][0]-i,s=t[1][1]-n,r=new q4(i,n,o,s);return{series:r,axis:r}}var{SeriesProperties:J4,makeSeriesTooltip:e5,Label:t5}=uE,i5=class extends t5{constructor(){super(...arguments),this.placement="bottom"}};kV([ru],i5.prototype,"placement",2);var n5=class extends J4{constructor(){super(...arguments),this.topology=void 0,this.idKey=void 0,this.topologyIdKey="name",this.idName=void 0,this.latitudeKey=void 0,this.latitudeName=void 0,this.longitudeKey=void 0,this.longitudeName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.shape="circle",this.size=6,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.label=new i5,this.tooltip=e5()}getStyle(){const{size:e,shape:t,fill:i,fillOpacity:n,stroke:o,strokeWidth:s,strokeOpacity:r,lineDash:a,lineDashOffset:l}=this;return{size:e,shape:t,fill:i,fillOpacity:n,opacity:1,stroke:o,strokeWidth:s,strokeOpacity:r,lineDash:a,lineDashOffset:l}}};kV([ru],n5.prototype,"topology",2),kV([ru],n5.prototype,"title",2),kV([ru],n5.prototype,"legendItemName",2),kV([ru],n5.prototype,"idKey",2),kV([ru],n5.prototype,"topologyIdKey",2),kV([ru],n5.prototype,"idName",2),kV([ru],n5.prototype,"latitudeKey",2),kV([ru],n5.prototype,"latitudeName",2),kV([ru],n5.prototype,"longitudeKey",2),kV([ru],n5.prototype,"longitudeName",2),kV([ru],n5.prototype,"labelKey",2),kV([ru],n5.prototype,"labelName",2),kV([ru],n5.prototype,"sizeKey",2),kV([ru],n5.prototype,"sizeName",2),kV([ru],n5.prototype,"colorKey",2),kV([ru],n5.prototype,"colorName",2),kV([ru],n5.prototype,"colorRange",2),kV([ru],n5.prototype,"shape",2),kV([ru],n5.prototype,"size",2),kV([ru],n5.prototype,"maxSize",2),kV([ru],n5.prototype,"sizeDomain",2),kV([ru],n5.prototype,"fill",2),kV([ru],n5.prototype,"fillOpacity",2),kV([ru],n5.prototype,"stroke",2),kV([ru],n5.prototype,"strokeWidth",2),kV([ru],n5.prototype,"strokeOpacity",2),kV([ru],n5.prototype,"lineDash",2),kV([ru],n5.prototype,"lineDashOffset",2),kV([ru],n5.prototype,"itemStyler",2),kV([ru],n5.prototype,"label",2),kV([ru],n5.prototype,"tooltip",2);var{fromToMotion:o5,getMissCount:s5,createDatumId:r5,SeriesNodePickMode:a5,valueProperty:l5,computeMarkerFocusBounds:d5,ColorScale:c5,LinearScale:u5,Group:h5,Selection:p5,Text:g5,Marker:m5,getLabelStyles:f5}=uE,v5=class extends v4{constructor(e){super({moduleCtx:e,categoryKey:void 0,propertyKeys:{size:["colorKey"],color:["colorKey"],label:["labelKey"]},propertyNames:{size:["sizeName"],color:["colorName"],label:["labelName"]},pickModes:[a5.EXACT_SHAPE_MATCH,a5.NEAREST_NODE],usesPlacedLabels:!0}),this.properties=new n5,this._chartTopology=void 0,this.colorScale=new c5,this.sizeScale=new u5,this.markerGroup=this.contentGroup.appendChild(new h5({name:"markerGroup"})),this.labelSelection=p5.select(this.labelGroup,g5,!1),this.highlightLabelSelection=p5.select(this.highlightLabelGroup,g5,!1),this.markerSelection=p5.select(this.markerGroup,m5,!1),this.highlightMarkerSelection=p5.select(this.highlightNodeGroup,m5),this.placedLabelData=[],this.animationState=new Vm("empty",{empty:{update:{target:"ready",action:()=>this.animateMarkers()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.resetAllAnimation(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateMarkers()},resize:{target:"ready",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getNodeData(){var e;return null===(e=this.contextNodeData)||void 0===e?void 0:e.nodeData}get topology(){var e;return null!==(e=this.properties.topology)&&void 0!==e?e:this._chartTopology}get hasData(){const e=null!=this.properties.latitudeKey&&null!=this.properties.longitudeKey;return super.hasData&&(null!=this.topology||e)}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setZIndex(e){return super.setZIndex(e),this.contentGroup.zIndex=[2,e],this.highlightGroup.zIndex=[3,e],!0}isLabelEnabled(){return null!=this.properties.labelKey&&this.properties.label.enabled}async processData(e){var t,i;if(null==this.data)return;const{data:n,sizeScale:o,colorScale:s}=this,{topologyIdKey:r,idKey:a,latitudeKey:l,longitudeKey:d,sizeKey:c,colorKey:u,labelKey:h,sizeDomain:p,colorRange:g}=this.properties,m=this.buildFeatureMap(r),f=this.sizeScale.type,v=this.colorScale.type,y=null===(t=this.scale)||void 0===t?void 0:t.type,b=null!=l&&null!=d,{dataModel:x,processedData:C}=await this.requestDataModel(e,n,{props:[...null==a?[]:[l5(a,y,{id:"idValue",includeProperty:!1}),l5(a,y,{id:"featureValue",includeProperty:!1,processor:()=>e=>m.get(e)})],...b?[l5(l,y,{id:"latValue"}),l5(d,y,{id:"lonValue"})]:[],...h?[l5(h,"category",{id:"labelValue"})]:[],...c?[l5(c,f,{id:"sizeValue"})]:[],...u?[l5(u,v,{id:"colorValue"})]:[]]}),S=null==a?void 0:x.resolveColumnById(this,"featureValue",C),w=b?x.resolveColumnById(this,"latValue",C):void 0,M=b?x.resolveColumnById(this,"lonValue",C):void 0;if(this.topologyBounds=null===(i=C.dataSources.get(this.id))||void 0===i?void 0:i.data.reduce((e,t,i)=>{const n=null===S||void 0===S?void 0:S[i],o=null===n||void 0===n?void 0:n.geometry;if(null!=o&&(e=l4(o,e)),null!=w&&null!=M){const t=M[i],n=w[i];e=Rh.extend(e,t,n,t,n)}return e},void 0),null!=c){var k;const e=x.resolveProcessedDataIndexById(this,"sizeValue"),t=null!==(k=C.domain.values[e])&&void 0!==k?k:[];o.domain=null!==p&&void 0!==p?p:t}if(null!=g&&this.isColorScaleValid()){const e=x.resolveProcessedDataIndexById(this,"colorValue");s.domain=C.domain.values[e],s.range=g,s.update()}this.animationState.transition("updateData")}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const n=t.resolveProcessedDataIndexById(this,"colorValue"),o=i.input.count,s=s5(this,i.defs.values[n].missing);return!(0===o||o===s)}getLabelDatum(e,t,i){if(null==t)return;const{idKey:n,idName:o,latitudeKey:s,latitudeName:r,longitudeKey:a,longitudeName:l,sizeKey:d,sizeName:c,colorKey:u,colorName:h,labelKey:p,labelName:g,label:m,shape:f}=this.properties;if(null==p||!m.enabled)return;const{datum:v,datumIndex:y,index:b,idValue:x,lonValue:C,latValue:S,point:w}=e,{placement:M}=m,k=this.getLabelText(t,v,p,"label",[],m,{value:t,datum:v,idKey:n,idName:o,latitudeKey:s,latitudeName:r,longitudeKey:a,longitudeName:l,sizeKey:d,sizeName:c,colorKey:u,colorName:h,labelKey:p,labelName:g});if(null==k)return;const{width:D,height:I}=i.measureLines(String(k)),A=m5.anchor(f);return{point:{x:w.x,y:w.y,size:w.size},label:{width:D,height:I,text:k},anchor:A,placement:M,datumIndex:y,datumId:r5(b,x,C,S)}}resolveColumn(e,t,i){if(null!=e&&null!=this.dataModel)return this.dataModel.resolveColumnById(this,t,i)}resolveDataColumns(e){const{idKey:t,latitudeKey:i,longitudeKey:n,sizeKey:o,colorKey:s,labelKey:r}=this.properties,a=null!=i&&null!=n;return{idValues:this.resolveColumn(t,"idValue",e),featureValues:this.resolveColumn(t,"featureValue",e),latValues:a?this.resolveColumn(i,"latValue",e):void 0,lonValues:a?this.resolveColumn(n,"lonValue",e):void 0,labelValues:this.resolveColumn(r,"labelValue",e),sizeValues:this.resolveColumn(o,"sizeValue",e),colorValues:this.resolveColumn(s,"colorValue",e)}}prepareProjectedGeometries(e,t,i){if(null==e||null==t||null==this.scale)return;const n=new Map;for(const[a]of null!==(o=null===(s=i.dataSources.get(this.id))||void 0===s?void 0:s.data.entries())&&void 0!==o?o:[]){var o,s,r;const i=e[a],l=null===(r=t[a])||void 0===r?void 0:r.geometry,d=null==l?void 0:h4(l,this.scale);null!=i&&null!=d&&n.set(i,d)}return n}calculateMarkerSize(e){return null==e?this.properties.size:this.sizeScale.convert(e,{clamp:!0})}buildNodeDatum(e,t,i,n,o){return p(p({series:this,itemId:this.properties.latitudeKey,datum:e,datumIndex:t,index:i},o),{},{point:n,midPoint:{x:n.x,y:n.y},legendItemName:this.properties.legendItemName,style:this.getMarkerItemStyle({datumIndex:t,datum:e,colorValue:o.colorValue,sizeValue:o.sizeValue},!1)})}createNodeFromLatLon(e,t,i,n,o,s,r){var a;if(null==this.scale)throw new Error("Scale is required for createNodeFromLatLon");const[l,d]=this.scale.convert([i,n]),c={x:l,y:d,size:s},u=this.buildNodeDatum(e,t,-1,c,o);return{node:u,label:null!==(a=this.getLabelDatum(u,o.labelValue,r))&&void 0!==a?a:void 0}}createNodesFromGeometry(e,t,i,n,o,s){const r=[],a=[];for(const[l,[d,c]]of X4(i,1).entries()){const i={x:d,y:c,size:o},u=this.buildNodeDatum(e,t,l,i,n);r.push(u);const h=this.getLabelDatum(u,n.labelValue,s);h&&a.push(h)}return{nodes:r,labels:a}}warnMissingGeometries(e){if(0===e.length)return;if(e.length>10){const t=e.length-10;e.length=10,e.push("(+".concat(t," more)"))}jr.warnOnce("some data items do not have matches in the provided topology",e)}buildFeatureMap(e){const t=new Map;for(const s of null!==(i=null===(n=this.topology)||void 0===n?void 0:n.features.values())&&void 0!==i?i:[]){var i,n,o;const r=null===(o=s.properties)||void 0===o?void 0:o[e];null!=r&&t.set(r,s)}return t}createNodeData(){var e,t,i;const{id:n,dataModel:o,processedData:s,sizeScale:r,properties:a,scale:l}=this,{label:d}=a;if(null==o||null==s||null==l)return;const c=this.resolveDataColumns(s),u=null!==(e=a.maxSize)&&void 0!==e?e:a.size;r.range=[Math.min(a.size,u),u];const h=Wm(d),p=this.prepareProjectedGeometries(c.idValues,c.featureValues,s),g=[],m=[],f=[],v=null!==(t=null===(i=s.dataSources.get(this.id))||void 0===i?void 0:i.data)&&void 0!==t?t:[];for(const[M,k]of v.entries()){var y,b,x,C,S,w;const e={idValue:null===(y=c.idValues)||void 0===y?void 0:y[M],lonValue:null===(b=c.lonValues)||void 0===b?void 0:b[M],latValue:null===(x=c.latValues)||void 0===x?void 0:x[M],colorValue:null===(C=c.colorValues)||void 0===C?void 0:C[M],sizeValue:null===(S=c.sizeValues)||void 0===S?void 0:S[M],labelValue:null===(w=c.labelValues)||void 0===w?void 0:w[M]},t=this.calculateMarkerSize(e.sizeValue),i=null==e.idValue||null===p||void 0===p?void 0:p.get(e.idValue);if(null!=e.idValue&&null!=p&&null==i&&f.push(e.idValue),null!=e.lonValue&&null!=e.latValue){const i=this.createNodeFromLatLon(k,M,e.lonValue,e.latValue,e,t,h);g.push(i.node),i.label&&m.push(i.label)}else if(null!=i){const n=this.createNodesFromGeometry(k,M,i,e,t,h);g.push(...n.nodes),m.push(...n.labels)}}return this.warnMissingGeometries(f),{itemId:n,nodeData:g,labelData:m}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}checkScaleChange(){return this.previousScale!==this.scale&&(this.previousScale=this.scale,!0)}update(e){var t,i,n,o;let{seriesRect:s}=e;const r=this.checkResize(s),a=this.checkScaleChange(),{markerSelection:l,highlightMarkerSelection:d}=this,c=null!==(t=null===(i=this.ctx.chartService.highlight)||void 0===i?void 0:i.drawingMode)&&void 0!==t?t:"overlay";this.updateSelections(),this.contentGroup.visible=this.visible,this.labelGroup.visible=this.visible;const u=this.getHighlightedDatum(),h=null!==(n=null===(o=this.contextNodeData)||void 0===o?void 0:o.nodeData)&&void 0!==n?n:[];this.markerSelection=this.updateMarkerSelection({markerData:h,markerSelection:l}),this.updateMarkerNodes({markerSelection:l,isHighlight:!1,highlightedDatum:u,drawingMode:"overlay"}),this.highlightMarkerSelection=this.updateMarkerSelection({markerData:null==u?[]:[u],markerSelection:d}),this.updateMarkerNodes({markerSelection:d,isHighlight:!0,highlightedDatum:u,drawingMode:c}),this.updateLabelNodes({labelSelection:this.labelSelection,isHighlight:!1}),this.updateHighlightLabelSelection(u),(a||r)&&this.animationState.transition("resize"),this.animationState.transition("update")}updatePlacedLabelData(e){this.placedLabelData=e,this.labelSelection=this.labelSelection.update(e,e=>{e.pointerEvents=uE.PointerEvents.None}),this.updateLabelNodes({labelSelection:this.labelSelection,isHighlight:!1}),this.updateHighlightLabelSelection()}updateLabelNodes(e){var t;let{isHighlight:i,labelSelection:n}=e;const{properties:o}=this,s=null===(t=this.ctx.highlightManager)||void 0===t?void 0:t.getActiveHighlight();n.each((e,t)=>{var n;const{x:r,y:a,width:l,height:d,text:c,datum:u}=t,h=f5(this,void 0,o,o.label,i,s),{color:p,fontStyle:g,fontWeight:m,fontSize:f,fontFamily:v}=h;e.visible=!0,e.x=r+l/2,e.y=a+d/2,e.text=c,e.fill=p,e.fontStyle=g,e.fontWeight=m,e.fontSize=f,e.fontFamily=v,e.textAlign="center",e.textBaseline="middle";const y=null===u||void 0===u?void 0:u.datumIndex;e.fillOpacity=null!==(n=this.getHighlightStyle(i,y).opacity)&&void 0!==n?n:1,e.setBoxing(h)})}getHighlightedLabelId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getHighlightedDatum();if(null!=e)return r5(e.index,e.idValue,e.lonValue,e.latValue)}updateHighlightLabelSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getHighlightedDatum();const t=this.getHighlightedLabelId(e),i=null!=t&&this.isLabelEnabled()?this.placedLabelData.filter(e=>e.datum.datumId===t):[];if(this.highlightLabelSelection=this.highlightLabelSelection.update(i),0===i.length)return this.highlightLabelSelection.cleanup(),void(this.highlightLabelGroup.visible=!1);this.highlightLabelGroup.visible=!0,this.updateLabelNodes({labelSelection:this.highlightLabelSelection,isHighlight:!0})}updateMarkerSelection(e){const{markerData:t,markerSelection:i}=e;return i.update(t,void 0,e=>r5(e.index,e.idValue,e.lonValue,e.latValue))}getMarkerItemStyle(e,t){let{datumIndex:i,datum:n,colorValue:o,sizeValue:s}=e;const{properties:r,colorScale:a,sizeScale:l}=this,{colorRange:d,itemStyler:c}=r,u=xu(this.getHighlightStyle(t,i),r.getStyle());var h;t||null==o||(u.fill=this.isColorScaleValid()?a.convert(o):null!==(h=null===d||void 0===d?void 0:d[0])&&void 0!==h?h:u.fill);null!=s&&(u.size=l.convert(s,{clamp:!0}));let p=u;if(null!=c&&null!=i){const e=this.cachedDatumCallback(r5(i,t?"highlight":"node"),()=>{const e=this.makeItemStylerParams(n,i,t,p);return this.callWithContext(c,e)});e&&(p=xu(e,u))}return p}makeItemStylerParams(e,t,i,n){var o,s;const{id:r}=this,a=null===(o=this.ctx.highlightManager)||void 0===o?void 0:o.getActiveHighlight(),l=this.getHighlightStateString(a,i,t),d=null!==(s=this.filterItemStylerFillParams(n.fill))&&void 0!==s?s:n.fill;return p(p({seriesId:r,datum:e,highlightState:l},n),{},{fill:d})}updateMarkerNodes(e){const{markerSelection:t,isHighlight:i,highlightedDatum:n,drawingMode:o}=e,s=Q4(this.scale);t.each((e,t)=>{const{datum:r,point:a}=t,l=this.getMarkerItemStyle(t,i);e.shape=l.shape,e.size=l.size,e.setStyleProperties(l,s),e.x=a.x,e.y=a.y,e.scalingCenterX=a.x,e.scalingCenterY=a.y,e.zIndex=i||null==n||r!==n.datum?0:1,e.drawingMode=o})}isProcessedDataAnimatable(){return!0}resetAnimation(e){"initial"===e?this.animationState.transition("reset"):"ready"===e&&this.animationState.transition("skip")}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.ctx.animationManager.skipCurrentBatch(),this.labelSelection.cleanup(),this.markerSelection.cleanup(),this.highlightMarkerSelection.cleanup(),this.highlightLabelSelection.cleanup(),this.highlightLabelGroup.visible=!1,this.placedLabelData=[]}animateMarkers(){const{animationManager:e}=this.ctx,t={fromFn:(e,t,i)=>"removed"===i?{scalingX:1,scalingY:1}:null==e.previousDatum?{scalingX:0,scalingY:0}:{scalingX:e.scalingX,scalingY:e.scalingY},toFn:(e,t,i)=>"removed"===i?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}};o5(this.id,"markers",e,[this.markerSelection,this.highlightMarkerSelection],t)}getLabelData(){var e,t;return this.isLabelEnabled()&&null!==(e=null===(t=this.contextNodeData)||void 0===t?void 0:t.labelData)&&void 0!==e?e:[]}pickNodeClosestDatum(e){const{x:t,y:i}=e;let n,o=1/0;for(const a of null!==(s=null===(r=this.contextNodeData)||void 0===r?void 0:r.nodeData)&&void 0!==s?s:[]){var s,r;const{x:e,y:l,size:d}=a.point,c=Math.max(Math.abs(e-t)-d,0),u=Math.max(Math.abs(l-i)-d,0),h=c*c+u*u;h<o&&(o=h,n=a)}return null==n?void 0:{datum:n,distance:Math.sqrt(o)}}legendItemSymbol(e){const{dataModel:t,processedData:i,properties:n}=this,{shape:o,fillOpacity:s,stroke:r,strokeWidth:a,strokeOpacity:l,lineDash:d,lineDashOffset:c}=n;let{fill:u}=n;if(null!=e&&this.isColorScaleValid()){const n=t.resolveColumnById(this,"colorValue",i)[e];u=this.colorScale.convert(n)}return{marker:{shape:o,fill:u,fillOpacity:s,stroke:r,strokeWidth:a,strokeOpacity:l,lineDash:d,lineDashOffset:c}}}getLegendData(e){const{processedData:t,dataModel:i}=this;if(null==t||null==i)return[];const{id:n,visible:o}=this,{title:s,legendItemName:r,idName:a,idKey:l,colorKey:d,colorRange:c,showInLegend:u}=this.properties;if("gradient"===e&&null!=d&&null!=c){const e=t.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:o,seriesId:n,series:this.getFormatterContext("color"),colorRange:c,colorDomain:e}]}if("category"===e){var h,p,g;return[{legendType:"category",id:n,itemId:n,seriesId:n,enabled:o,label:{text:null!==(h=null!==(p=null!==(g=null!==r&&void 0!==r?r:s)&&void 0!==g?g:a)&&void 0!==p?p:l)&&void 0!==h?h:n},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!u}]}return[]}getTooltipContent(e){var t;const{id:i,dataModel:n,processedData:o,properties:s,ctx:{formatManager:r}}=this,{idKey:a,idName:l,latitudeKey:d,latitudeName:c,longitudeKey:u,longitudeName:h,colorKey:g,colorName:m,sizeKey:f,sizeName:v,labelKey:y,labelName:b,title:x,legendItemName:C,tooltip:S}=s;if(!n||!o)return;const w=null===(t=o.dataSources.get(this.id))||void 0===t?void 0:t.data[e],M=null==f?void 0:n.resolveColumnById(this,"sizeValue",o)[e],k=null==g?void 0:n.resolveColumnById(this,"colorValue",o)[e],D=[];if(this.isLabelEnabled()&&null!=y&&y!==a){const t=n.resolveColumnById(this,"labelValue",o)[e],s=r.format(this.callWithContext.bind(this),{type:"category",value:t,datum:w,seriesId:i,legendItemName:C,key:y,source:"tooltip",property:"label",domain:[],boundSeries:this.getFormatterContext("label")});D.push({label:b,fallbackLabel:y,value:null!==s&&void 0!==s?s:t})}if(null!=f&&null!=M){const e=n.getDomain(this,"sizeValue","value",o).domain,t=r.format(this.callWithContext.bind(this),{type:"number",value:M,datum:w,seriesId:i,legendItemName:C,key:f,source:"tooltip",property:"size",domain:e,boundSeries:this.getFormatterContext("size"),fractionDigits:void 0});D.push({label:v,fallbackLabel:f,value:null!==t&&void 0!==t?t:String(M)})}if(null!=g&&null!=k){const e=n.getDomain(this,"colorValue","value",o).domain,t=r.format(this.callWithContext.bind(this),{type:"number",value:k,datum:w,seriesId:i,legendItemName:C,key:g,source:"tooltip",property:"color",domain:e,boundSeries:this.getFormatterContext("color"),fractionDigits:void 0});D.push({label:m,fallbackLabel:g,value:null!==t&&void 0!==t?t:String(k)})}let I;if(null!=a)I=n.resolveColumnById(this,"idValue",o)[e];else if(null!=d&&null!=u){const t=n.resolveColumnById(this,"latValue",o)[e],i=n.resolveColumnById(this,"lonValue",o)[e];I="".concat(Math.abs(t).toFixed(4),"\xb0 ").concat(t>=0?"N":"S",", ").concat(Math.abs(i).toFixed(4),"\xb0 ").concat(i>=0?"W":"E")}const A=this.getMarkerItemStyle({datumIndex:e,datum:w,colorValue:k,sizeValue:M},!1);return this.formatTooltipWithContext(S,{heading:I,title:null!==x&&void 0!==x?x:C,symbol:this.legendItemSymbol(e),data:D},p({seriesId:i,datum:w,title:x,idKey:a,idName:l,latitudeKey:d,latitudeName:c,longitudeKey:u,longitudeName:h,colorKey:g,colorName:m,sizeKey:f,sizeName:v,labelKey:y,labelName:b},A))}getFormattedMarkerStyle(e){const t=this.getMarkerItemStyle(e,!1);return{size:t.size,shape:t.shape}}computeFocusBounds(e){return d5(this,e)}hasItemStylers(){return null!=this.properties.itemStyler||null!=this.properties.label.itemStyler}};v5.className="MapMarkerSeries",v5.type="map-marker";var{mapMarkerSeriesThemeableOptionsDef:y5}=uE,b5=p(p(p({},Mu(Yc,["highlightStyle","highlight"])),y5),{},{type:pd(jd("map-marker")),idKey:Ad,latitudeKey:Ad,longitudeKey:Ad,sizeKey:Ad,colorKey:Ad,labelKey:Ad,idName:Ad,latitudeName:Ad,longitudeName:Ad,sizeName:Ad,colorName:Ad,labelName:Ad,topology:Ug,topologyIdKey:Ad,legendItemName:Ad,title:Ad}),x5={type:"series",name:"map-marker",chartType:"topology",enterprise:!0,version:GC,dependencies:[Y3],options:b5,themeTemplate:p(p({},$3),{},{series:{shape:"circle",maxSize:30,fill:Z3({$applySwitch:[{$path:"type"},{$mapPalette:"fill"},["gradient",uE.FILL_GRADIENT_RADIAL_REVERSED_DEFAULTS],["image",uE.FILL_IMAGE_DEFAULTS],["pattern",uE.FILL_PATTERN_DEFAULTS]]}),stroke:{$mapPalette:"stroke"},colorRange:{$if:[{$eq:[{$mapPalette:"type"},"inbuilt"]},{$mapPalette:"divergingColors"},Z3(uE.SAFE_RANGE2_OPERATION)]},fillOpacity:.5,label:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}),highlight:Z3(uE.multiSeriesHighlightStyle())},tooltip:{range:"exact"}}),create:e=>new v5(e),validate(e,t,i){const n=ud(e,t,i),{cleared:o,invalid:s}=n;if(null==(null===o||void 0===o?void 0:o.idKey)&&(null==(null===o||void 0===o?void 0:o.latitudeKey)||null==(null===o||void 0===o?void 0:o.longitudeKey))){const e=e=>i?"".concat(i,".").concat(e):e,t="Either `".concat(e("idKey"),"` or both `").concat(e("latitudeKey"),"` and `").concat(e("longitudeKey"),"` are required.");s.push(new dd("required",t,null,i))}return n}};function C5(e,t){let{aspectRatio:i,precision:n}=t;const o=Y4(e,n,(e,t,n,o)=>{const s=function(e,t,i,n){let o=!1,s=1/0;for(const r of e){let e=r.at(-1),[a,l]=e;for(const d of r){const[r,c]=d;c>i!==l>i&&t<(a-r)*(i-c)/(l-c)+r&&(o=!o);const u=S5(e,d,t,i,n);s=Math.min(s,u),e=d,a=r,l=c}}return(o?1:-1)*s}(e,t,n,i),r=s+2*o*i;return{distance:s*Math.SQRT2,maxDistance:r*Math.SQRT2}});if(null==o)return;const{x:s,y:r,distance:a}=o;return{x:s,y:r,maxWidth:a/Math.SQRT2}}function S5(e,t,i,n,o){const[s,r]=e,[a,l]=t,d=1/o,c=a-s,u=l-r,[h,p]=r<=l?e:t,[g,m]=s<=a?e:t,[f,v]=r<=l?t:e,[y,b]=s<=a?t:e;let x=1/0;if(0===c)for(let D=0;D<=1;D+=1){const e=(0===D?d:-d)*(s-i)+n;if(e>=p&&e<=v){const t=2*Math.abs(n-e)*o;x=Math.min(x,t)}}else{const e=u/c;for(let t=0;t<=1;t+=1){const o=0===t?d:-d,a=(e*s-r-o*i+n)/(e-o);if(a>=g&&a<=y){const e=2*Math.abs(i-a);x=Math.min(x,e)}}}const C=o,S=Math.abs((h-i)/(p-n)),w=Math.abs((f-i)/(v-n));if(v<n&&w<C){const e=2*Math.abs(n-v)*o;x=Math.min(x,e)}else if(p>n&&S<C){const e=2*Math.abs(n-p)*o;x=Math.min(x,e)}const M=Math.abs((m-n)/(g-i)),k=Math.abs((b-n)/(y-i));if(y<i&&k<d){const e=2*Math.abs(i-y);x=Math.min(x,e)}else if(g>i&&M<d){const e=2*Math.abs(i-g);x=Math.min(x,e)}return x}function w5(e,t,i){i>=t&&(e.maxX=Math.min(e.maxX,i-t)),i<=t&&(e.minX=Math.max(e.minX,i-t))}function M5(e,t,i,n,o,s){const r=o-s/2,a=o+s/2,[l,d]=t,[c,u]=i,h=c-l,p=u-d,[g,m]=l<=c?t:i,[f,v]=l<=c?i:t;if(0!==h){const t=p/h;for(let i=0;i<=1;i+=1){const o=((0===i?r:a)-d)/t+l;o>=g&&o<=f&&w5(e,n,o)}}else Math.max(r,Math.min(d,u))<=Math.min(a,Math.max(d,u))&&w5(e,n,l);return f<n&&v>=r&&v<=a?w5(e,n,f):g>n&&m>=r&&m<=a&&w5(e,n,g),e}var{SeriesProperties:k5,makeSeriesTooltip:D5}=uE,I5=class extends k5{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.idName=void 0,this.topologyIdKey="name",this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.padding=0,this.label=new tZ,this.tooltip=D5()}getStyle(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:o,lineDash:s,lineDashOffset:r}=this;return{fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:o,lineDash:s,lineDashOffset:r,opacity:1}}};kV([ru],I5.prototype,"topology",2),kV([ru],I5.prototype,"title",2),kV([ru],I5.prototype,"legendItemName",2),kV([ru],I5.prototype,"idKey",2),kV([ru],I5.prototype,"idName",2),kV([ru],I5.prototype,"topologyIdKey",2),kV([ru],I5.prototype,"labelKey",2),kV([ru],I5.prototype,"labelName",2),kV([ru],I5.prototype,"colorKey",2),kV([ru],I5.prototype,"colorName",2),kV([ru],I5.prototype,"colorRange",2),kV([ru],I5.prototype,"fill",2),kV([ru],I5.prototype,"fillOpacity",2),kV([ru],I5.prototype,"stroke",2),kV([ru],I5.prototype,"strokeOpacity",2),kV([ru],I5.prototype,"strokeWidth",2),kV([ru],I5.prototype,"lineDash",2),kV([ru],I5.prototype,"lineDashOffset",2),kV([ru],I5.prototype,"padding",2),kV([ru],I5.prototype,"itemStyler",2),kV([ru],I5.prototype,"label",2),kV([ru],I5.prototype,"tooltip",2);var{getMissCount:A5,createDatumId:L5,SeriesNodePickMode:N5,valueProperty:T5,ColorScale:R5,Group:E5,Selection:P5,Text:O5,PointerEvents:F5,getLabelStyles:z5}=uE,B5=uE.MercatorScale.fixedScale(),V5=class extends v4{constructor(e){super({moduleCtx:e,categoryKey:void 0,propertyKeys:{color:["colorKey"],label:["labelKey"]},propertyNames:{color:["colorName"],label:["labelName"]},pickModes:[N5.EXACT_SHAPE_MATCH,N5.NEAREST_NODE]}),this.properties=new I5,this._chartTopology=void 0,this.colorScale=new R5,this.itemGroup=this.contentGroup.appendChild(new E5({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new E5({name:"itemLabelGroup"})),this.datumSelection=P5.select(this.itemGroup,()=>this.nodeFactory()),this.labelSelection=P5.select(this.itemLabelGroup,O5),this.highlightDatumSelection=P5.select(this.highlightNodeGroup,()=>this.nodeFactory()),this.highlightLabelSelection=P5.select(this.highlightLabelGroup,O5),this.previousLabelLayouts=void 0,this._previousDatumMidPoint=void 0,this.itemLabelGroup.pointerEvents=F5.None}getNodeData(){var e;return null===(e=this.contextNodeData)||void 0===e?void 0:e.nodeData}get topology(){var e;return null!==(e=this.properties.topology)&&void 0!==e?e:this._chartTopology}get hasData(){return super.hasData&&null!=this.topology}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setZIndex(e){return super.setZIndex(e),this.contentGroup.zIndex=[1,e],this.highlightGroup.zIndex=[4,e],!0}isLabelEnabled(){return null!=this.properties.labelKey&&this.properties.label.enabled}nodeFactory(){const e=new s4;return e.renderMode=1,e.lineJoin="round",e}async processData(e){var t;if(null==this.data)return;const{data:i,topology:n,colorScale:o}=this,{topologyIdKey:s,idKey:r,colorKey:a,labelKey:l,colorRange:d}=this.properties,c=new Map;for(const y of null!==(u=null===n||void 0===n?void 0:n.features.values())&&void 0!==u?u:[]){var u,h;const e=null===(h=y.properties)||void 0===h?void 0:h[s];null!=e&&u4(y.geometry,1)&&c.set(e,y)}const p=this.colorScale.type,g=null===(t=this.scale)||void 0===t?void 0:t.type,{dataModel:m,processedData:f}=await this.requestDataModel(e,i,{props:[T5(r,g,{id:"idValue",includeProperty:!1}),T5(r,g,{id:"featureValue",includeProperty:!1,processor:()=>e=>c.get(e)}),...l?[T5(l,"category",{id:"labelValue"})]:[],...a?[T5(a,p,{id:"colorValue"})]:[]]}),v=m.resolveColumnById(this,"featureValue",f);if(this.topologyBounds=v.reduce((e,t)=>{const i=null===t||void 0===t?void 0:t.geometry;return null==i?e:l4(i,e)},void 0),null!=d&&this.isColorScaleValid()){const e=m.resolveProcessedDataIndexById(this,"colorValue");o.domain=f.domain.values[e],o.range=d,o.update()}null==n&&jr.warnOnce("no topology was provided for [MapShapeSeries]; nothing will be rendered.")}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const n=t.resolveProcessedDataIndexById(this,"colorValue"),o=i.input.count,s=A5(this,i.defs.values[n].missing);return!(0===o||o===s)}getLabelLayout(e,t,i,n,o){if(null==t||null==n)return;const{idKey:s,idName:r,colorKey:a,colorName:l,labelKey:d,labelName:c,padding:u,label:h}=this.properties;if(null==d||!h.enabled)return;const p=this.getLabelText(t,e,d,"label",[],h,{value:t,datum:e,idKey:s,idName:r,colorKey:a,colorName:l,labelKey:d,labelName:c});if(null==p)return;const g=Ua(p)?_m(p,h):i.measureLines(String(p)),m=(g.width+2*u)/(g.height+2*u);if((null===o||void 0===o?void 0:o.geometry)===n&&(null===o||void 0===o?void 0:o.labelText)===p&&(null===o||void 0===o?void 0:o.aspectRatio)===m)return o;const f=d4(h4(n,B5));if(null==f)return;const v=C5(f,{aspectRatio:m,precision:.001});if(null==v)return;const{x:y,y:b,maxWidth:x}=v;return{geometry:n,labelText:p,aspectRatio:m,x:y,y:b,maxWidth:x,fixedPolygon:f}}getLabelDatum(e,t,i,n){const{scale:o}=this;if(null==o)return;const{padding:s,label:r}=this.properties,{labelText:a,aspectRatio:l,x:d,y:c,maxWidth:u,fixedPolygon:h}=e,p={width:Math.ceil(u*t),height:Math.ceil(u*t/l),meta:d},g=Z$(ed(a),r,{padding:s},(e,i)=>{if(!i)return p;const n=function(e,t,i,n){const o={minX:-1/0,maxX:1/0};for(const a of e){let e=a.at(-1);for(const s of a)M5(o,e,s,t,i,n),e=s}const{minX:s,maxX:r}=o;return Number.isFinite(s)&&Number.isFinite(r)?{x:t+(s+r)/2,width:r-s}:{x:t,width:0}}(h,d,c,e/t);return{width:n.width*t,height:e,meta:n.x}});if(null==g)return;const[{text:m,fontSize:f,lineHeight:v,width:y},b]=g,x=y<p.width?d:b,C=this.scale.convert(B5.invert([x,c]));return{x:C[0],y:C[1],text:m,fontSize:f,lineHeight:v,datumIndex:i,idValue:n,datumId:L5(n)}}resolveColumn(e,t,i){if(null!=e&&null!=this.dataModel)return this.dataModel.resolveColumnById(this,t,i)}resolveShapeDataColumns(e){const{colorKey:t,labelKey:i}=this.properties;return{idValues:this.dataModel.resolveColumnById(this,"idValue",e),featureValues:this.dataModel.resolveColumnById(this,"featureValue",e),labelValues:this.resolveColumn(i,"labelValue",e),colorValues:this.resolveColumn(t,"colorValue",e)}}warnMissingGeometries(e){if(0===e.length)return;if(e.length>10){const t=e.length-10;e.length=10,e.push("(+".concat(t," more)"))}jr.warnOnce("some data items do not have matches in the provided topology",e)}createNodeData(){var e,t;const{id:i,dataModel:n,processedData:o,properties:s,scale:r,previousLabelLayouts:a}=this,{idKey:l,label:d,legendItemName:c,colorKey:u}=s;if(null==n||null==o)return;const h=null==r?Number.NaN:(r.range[1][0]-r.range[0][0])/r.bounds.width,g=this.resolveShapeDataColumns(o),m=Wm(d),f=new Map;this.previousLabelLayouts=f;const v=[],y=[],b=[],x=null!==(e=null===(t=o.dataSources.get(this.id))||void 0===t?void 0:t.data)&&void 0!==e?e:[];for(const[k,D]of x.entries()){var C,S,w,M;const e={idValue:g.idValues[k],colorValue:null===(C=g.colorValues)||void 0===C?void 0:C[k],labelValue:null===(S=g.labelValues)||void 0===S?void 0:S[k]},t=null!==(w=null===(M=g.featureValues[k])||void 0===M?void 0:M.geometry)&&void 0!==w?w:void 0;if(null==t&&b.push(e.idValue),null!=u&&null==e.colorValue)continue;const i=this.getLabelLayout(D,e.labelValue,m,t,null===a||void 0===a?void 0:a.get(e.idValue));null!=i&&f.set(e.idValue,i);const n=null!=i&&null!=r?this.getLabelDatum(i,h,k,e.idValue):void 0;null!=n&&y.push(n);const o=null!=t&&null!=r?h4(t,r):void 0;v.push(p(p({series:this,itemId:l,datum:D,datumIndex:k},e),{},{projectedGeometry:o,legendItemName:c,style:this.getItemStyle({datum:D,datumIndex:k,colorValue:e.colorValue},!1)}))}return this.warnMissingGeometries(b),{itemId:i,nodeData:v,labelData:y}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){var e,t,i,n,o,s;const{datumSelection:r,labelSelection:a,highlightDatumSelection:l}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.labelGroup.visible=this.visible;const d=null!==(e=null===(t=this.ctx.chartService.highlight)||void 0===t?void 0:t.drawingMode)&&void 0!==e?e:"overlay",c=this.getHighlightedDatum(),u=null!==(i=null===(n=this.contextNodeData)||void 0===n?void 0:n.nodeData)&&void 0!==i?i:[],h=null!==(o=null===(s=this.contextNodeData)||void 0===s?void 0:s.labelData)&&void 0!==o?o:[];this.datumSelection=this.updateDatumSelection({nodeData:u,datumSelection:r}),this.updateDatumStyles({datumSelection:r,isHighlight:!1}),this.updateDatumNodes({datumSelection:r,drawingMode:"overlay"}),this.labelSelection=this.updateLabelSelection({labelData:h,labelSelection:a});const p=this.getHighlightLabelData(h,c);this.highlightLabelSelection=this.updateLabelSelection({labelData:p,labelSelection:this.highlightLabelSelection}),this.updateLabelNodes({labelSelection:this.labelSelection,isHighlight:!1}),this.updateLabelNodes({labelSelection:this.highlightLabelSelection,isHighlight:!0}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:null==c?[]:[c],datumSelection:l}),this.updateDatumStyles({datumSelection:l,isHighlight:!0}),this.updateDatumNodes({datumSelection:l,drawingMode:d})}getHighlightLabelData(e,t){if(0===e.length)return[];const i=L5(null===t||void 0===t?void 0:t.idValue);return e.filter(e=>e.datumId===i&&e.datumIndex===(null===t||void 0===t?void 0:t.datumIndex))}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,e=>L5(e.idValue))}getItemStyle(e,t){let{datumIndex:i,datum:n,colorValue:o}=e;const{properties:s,colorScale:r}=this,{colorRange:a,itemStyler:l}=s,d=s.getStyle();if(null!=o){const e=this.isColorScaleValid()?r.convert(o):null===a||void 0===a?void 0:a[0];null!=e&&(d.fill=e)}let c=xu(this.getHighlightStyle(t,i),d);if(null!=l&&null!=i){const e=this.cachedDatumCallback(L5(i,t?"highlight":"node"),()=>{const e=this.makeItemStylerParams(n,i,t,c);return this.ctx.optionsGraphService.resolvePartial(["series","".concat(this.declarationOrder)],this.callWithContext(l,e))});e&&(c=xu(e,c))}return c}makeItemStylerParams(e,t,i,n){var o,s;const{id:r}=this,a=null===(o=this.ctx.highlightManager)||void 0===o?void 0:o.getActiveHighlight(),l=this.getHighlightStateString(a,i,t),d=null!==(s=this.filterItemStylerFillParams(n.fill))&&void 0!==s?s:n.fill;return p(p({seriesId:r,datum:e,highlightState:l},n),{},{fill:d})}updateDatumStyles(e){let{datumSelection:t,isHighlight:i}=e;t.each((e,t)=>{t.style=this.getItemStyle(t,i)})}updateDatumNodes(e){let{datumSelection:t,drawingMode:i}=e;const n=Q4(this.scale);t.each((e,t)=>{const{projectedGeometry:o}=t;if(null==o)return e.visible=!1,void(e.projectedGeometry=void 0);e.visible=!0,e.projectedGeometry=o,e.setStyleProperties(t.style,n),e.drawingMode=i})}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t)}updateLabelNodes(e){var t;let{isHighlight:i,labelSelection:n}=e;const{properties:o}=this,s=null===(t=this.ctx.highlightManager)||void 0===t?void 0:t.getActiveHighlight();n.each((e,t)=>{var n;const{x:r,y:a,text:l,fontSize:d,lineHeight:c,datumIndex:u}=t,h=z5(this,void 0,o,o.label,i,s),{color:p,fontStyle:g,fontWeight:m,fontFamily:f}=h;e.visible=!0,e.x=r,e.y=a,e.text=l,e.fill=p,e.fontStyle=g,e.fontWeight=m,e.fontSize=d,e.lineHeight=c,e.fontFamily=f,e.textAlign="center",e.textBaseline="middle",e.fillOpacity=null!==(n=this.getHighlightStyle(i,u).opacity)&&void 0!==n?n:1,e.setBoxing(h)})}resetAnimation(){}pickNodeClosestDatum(e){let t,{x:i,y:n}=e,o=1/0;return this.datumSelection.each((e,s)=>{const r=e.distanceSquared(i,n);r<o&&(o=r,t=s)}),null==t?void 0:{datum:t,distance:Math.sqrt(o)}}datumMidPoint(e){const{_previousDatumMidPoint:t}=this;if((null===t||void 0===t?void 0:t.datum)===e)return t.point;const i=e.projectedGeometry,n=null==i?void 0:d4(i),o=null==n?void 0:Z4(n,2),s=null==o?void 0:{x:o[0],y:o[1]};return this._previousDatumMidPoint={datum:e,point:s},s}legendItemSymbol(e){const{dataModel:t,processedData:i,properties:n}=this,{fillOpacity:o,stroke:s,strokeWidth:r,strokeOpacity:a,lineDash:l,lineDashOffset:d}=n;let{fill:c}=n;if(null!=e&&this.isColorScaleValid()){const n=t.resolveColumnById(this,"colorValue",i)[e];null!=n&&(c=this.colorScale.convert(n))}return{marker:{fill:c,fillOpacity:o,stroke:s,strokeWidth:r,strokeOpacity:a,lineDash:l,lineDashOffset:d}}}getLegendData(e){const{processedData:t,dataModel:i}=this;if(null==t||null==i)return[];const{id:n,visible:o}=this,{title:s,legendItemName:r,idKey:a,idName:l,colorKey:d,colorRange:c,showInLegend:u}=this.properties;if("gradient"===e&&null!=d&&null!=c){const e=t.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:o,seriesId:n,series:this.getFormatterContext("color"),colorRange:c,colorDomain:e}]}if("category"===e){var h,p;return[{legendType:"category",id:n,itemId:n,seriesId:n,enabled:o,label:{text:null!==(h=null!==(p=null!==r&&void 0!==r?r:s)&&void 0!==p?p:l)&&void 0!==h?h:a},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!u}]}return[]}getTooltipContent(e){var t;const{id:i,dataModel:n,processedData:o,properties:s,ctx:{formatManager:r}}=this,{idKey:a,idName:l,colorKey:d,colorName:c,labelKey:u,labelName:h,legendItemName:g,title:m,tooltip:f}=s;if(!n||!o)return;const v=null===(t=o.dataSources.get(this.id))||void 0===t?void 0:t.data[e],y=n.resolveColumnById(this,"idValue",o)[e],b=null==d?void 0:n.resolveColumnById(this,"colorValue",o)[e];if(null!=d&&null==b)return;const x=[];if(this.isLabelEnabled()&&null!=u&&u!==a){const t=n.resolveColumnById(this,"labelValue",o)[e],s=r.format(this.callWithContext.bind(this),{type:"category",value:t,datum:v,seriesId:i,legendItemName:g,key:u,source:"tooltip",property:"label",domain:[],boundSeries:this.getFormatterContext("label")});x.push({label:h,fallbackLabel:u,value:null!==s&&void 0!==s?s:t})}if(null!=b){const e=n.getDomain(this,"colorValue","value",o).domain,t=r.format(this.callWithContext.bind(this),{type:"number",value:b,datum:v,seriesId:i,legendItemName:g,key:d,source:"tooltip",property:"color",domain:e,boundSeries:this.getFormatterContext("color"),fractionDigits:void 0});x.push({label:c,fallbackLabel:d,value:null!==t&&void 0!==t?t:String(b)})}const C=this.getItemStyle({datum:v,datumIndex:e,colorValue:b},!1);return this.formatTooltipWithContext(f,{heading:y,title:null!==m&&void 0!==m?m:g,symbol:this.legendItemSymbol(e),data:x},p({seriesId:i,datum:v,title:m,idKey:a,idName:l,colorKey:d,colorName:c,labelKey:u,labelName:h},C))}computeFocusBounds(e){return f4(this,e)}hasItemStylers(){return null!=this.properties.itemStyler||null!=this.properties.label.itemStyler}};V5.className="MapShapeSeries",V5.type="map-shape";var{mapShapeSeriesThemeableOptionsDef:G5}=uE,H5=p(p(p({},Mu(Yc,["highlightStyle","highlight"])),G5),{},{type:pd(jd("map-shape")),idKey:pd(Ad),colorKey:Ad,labelKey:Ad,idName:Ad,colorName:Ad,labelName:Ad,topology:Ug,topologyIdKey:Ad,legendItemName:Ad,title:Ad}),j5={type:"series",name:"map-shape",chartType:"topology",enterprise:!0,version:GC,dependencies:[Y3],options:H5,themeTemplate:p(p({},$3),{},{series:{fill:Z3({$applySwitch:[{$path:"type"},{$mapPalette:"fill"},["gradient",uE.FILL_GRADIENT_LINEAR_DEFAULTS],["image",uE.FILL_IMAGE_DEFAULTS],["pattern",uE.FILL_PATTERN_DEFAULTS]]}),stroke:{$ref:"chartBackgroundColor"},colorRange:{$if:[{$eq:[{$mapPalette:"type"},"inbuilt"]},{$mapPalette:"divergingColors"},Z3(uE.SAFE_RANGE2_OPERATION)]},fillOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,padding:2,label:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!0,color:{$ref:"chartBackgroundColor"},fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:"bold",overflowStrategy:"hide"}),highlight:Z3(uE.multiSeriesHighlightStyle())},tooltip:{range:"exact"}}),create:e=>new V5(e)},{SeriesProperties:W5,makeSeriesTooltip:_5}=uE,K5=class extends W5{constructor(){super(...arguments),this.topology=void 0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=_5()}};kV([ru],K5.prototype,"topology",2),kV([ru],K5.prototype,"fill",2),kV([ru],K5.prototype,"fillOpacity",2),kV([ru],K5.prototype,"stroke",2),kV([ru],K5.prototype,"strokeOpacity",2),kV([ru],K5.prototype,"strokeWidth",2),kV([ru],K5.prototype,"lineDash",2),kV([ru],K5.prototype,"lineDashOffset",2),kV([ru],K5.prototype,"tooltip",2);var{createDatumId:U5,Selection:Y5,Group:$5,PointerEvents:Z5}=uE,X5=class extends v4{constructor(e){super({moduleCtx:e,categoryKey:void 0,pickModes:[]}),this.properties=new K5,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new $5({name:"itemGroup"})),this.datumSelection=Y5.select(this.itemGroup,()=>this.nodeFactory()),this.itemGroup.pointerEvents=Z5.None}get topology(){var e;return null!==(e=this.properties.topology)&&void 0!==e?e:this._chartTopology}get focusable(){return!1}setOptionsData(){}setChartData(){}getNodeData(){}get hasData(){return!1}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setZIndex(e){return super.setZIndex(e),this.contentGroup.zIndex=[0,e,0],this.highlightGroup.zIndex=[0,e,1],!0}nodeFactory(){const e=new s4;return e.renderMode=1,e.lineJoin="round",e.pointerEvents=Z5.None,e}processData(){const{topology:e}=this;this.topologyBounds=null===e||void 0===e?void 0:e.features.reduce((e,t)=>{const i=t.geometry;return null==i?e:l4(i,e)},void 0),null==e&&jr.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}createNodeData(){const{id:e,topology:t,scale:i,properties:n}=this;if(null==t)return;const{fill:o,fillOpacity:s,stroke:r,strokeWidth:a,strokeOpacity:l,lineDash:d,lineDashOffset:c}=n,u=[];for(const[h,p]of t.features.entries()){const{geometry:e}=p,t=null!=e&&null!=i?h4(e,i):void 0;null!=t&&u.push({series:this,itemId:h,datum:p,datumIndex:0,index:h,projectedGeometry:t,style:{fill:o,fillOpacity:s,stroke:r,strokeWidth:a,strokeOpacity:l,lineDash:d,lineDashOffset:c}})}return{itemId:e,nodeData:u,labelData:[]}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){var e;const{datumSelection:t}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.labelGroup.visible=this.visible;const{nodeData:i=[]}=null!==(e=this.contextNodeData)&&void 0!==e?e:{};this.datumSelection=this.updateDatumSelection({nodeData:i,datumSelection:t}),this.updateDatumNodes({datumSelection:t})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,e=>U5(e.index))}updateDatumNodes(e){const{datumSelection:t}=e;t.each((e,t)=>{const{projectedGeometry:i}=t;if(null==i)return e.visible=!1,void(e.projectedGeometry=void 0);e.visible=!0,e.projectedGeometry=i,e.setProperties(t.style)})}resetAnimation(){}getLegendData(){return[]}getTooltipContent(e){}pickFocus(){}computeFocusBounds(e){}hasItemStylers(){return!1}};X5.className="MapShapeBackgroundSeries",X5.type="map-shape-background";var{mapShapeBackgroundSeriesThemeableOptionsDef:q5}=uE,Q5=p(p(p({},q5),Yc),{},{type:pd(jd("map-shape-background")),topology:Ug}),J5={type:"series",name:"map-shape-background",chartType:"topology",enterprise:!0,version:GC,dependencies:[Y3],options:Q5,themeTemplate:p(p({},$3),{},{series:{fill:Z3({$applySwitch:[{$path:"type"},{$path:["/1",{$mapPalette:"fill"},{$mapPalette:"hierarchyColors"}]},["gradient",uE.FILL_GRADIENT_LINEAR_HIERARCHY_DEFAULTS],["image",uE.FILL_IMAGE_DEFAULTS],["pattern",uE.FILL_PATTERN_HIERARCHY_DEFAULTS]]}),stroke:{$ref:"chartBackgroundColor"},strokeWidth:1}}),create:e=>new X5(e)},{createDatumId:e6,toHighlightString:t6}=uE;function i6(e,t,i){var n,o,s,r,a,l,d,c;const{styler:u}=e.properties;let h={};if(!t&&u){var p,g;const t=function(e,t){const{id:i}=e,{angleKey:n,cornerRadius:o,fill:s,fillOpacity:r,lineDash:a,lineDashOffset:l,radiusKey:d,stackGroup:c,stroke:u,strokeOpacity:h,strokeWidth:p}=e.properties;return{angleKey:n,cornerRadius:o,fill:s,fillOpacity:r,highlightState:t6(null!==t&&void 0!==t?t:uE.HighlightState.None),lineDash:a,lineDashOffset:l,radiusKey:d,seriesId:i,stackGroup:c,stroke:u,strokeOpacity:h,strokeWidth:p}}(e,i);h=null!==(p=e.ctx.optionsGraphService.resolvePartial(["series","".concat(e.declarationOrder)],null!==(g=e.cachedCallWithContext(u,t))&&void 0!==g?g:{},{pick:!1}))&&void 0!==p?p:{}}return{cornerRadius:null!==(n=h.cornerRadius)&&void 0!==n?n:e.properties.cornerRadius,fill:null!==(o=h.fill)&&void 0!==o?o:e.properties.fill,fillOpacity:null!==(s=h.fillOpacity)&&void 0!==s?s:e.properties.fillOpacity,lineDash:null!==(r=h.lineDash)&&void 0!==r?r:e.properties.lineDash,lineDashOffset:null!==(a=h.lineDashOffset)&&void 0!==a?a:e.properties.lineDashOffset,stroke:null!==(l=h.stroke)&&void 0!==l?l:e.properties.stroke,strokeOpacity:null!==(d=h.strokeOpacity)&&void 0!==d?d:e.properties.strokeOpacity,strokeWidth:null!==(c=h.strokeWidth)&&void 0!==c?c:e.properties.strokeWidth,opacity:1}}function n6(e,t,i,n){const{properties:o}=e,{itemStyler:s}=o;let r=xu(e.getHighlightStyle(i,null===t||void 0===t?void 0:t.datumIndex,n),i6(e,void 0===t,n));if(null!=s&&null!=t){const n=e.cachedDatumCallback(e6(e.getDatumId(t),i?"highlight":"node"),()=>{const n=function(e,t,i,n){var o,s;const{id:r,properties:a}=e,{angleKey:l,radiusKey:d}=a,c=null===(o=e.ctx.highlightManager)||void 0===o?void 0:o.getActiveHighlight(),u=e.getHighlightStateString(c,i,t.datumIndex),h=null!==(s=e.filterItemStylerFillParams(n.fill))&&void 0!==s?s:n.fill;return p(p({seriesId:r,datum:t.datum,highlightState:u,angleKey:l,radiusKey:d},n),{},{fill:h})}(e,t,i,r);return e.callWithContext(s,n)});n&&(r=xu(n,r))}return r}var{DEFAULT_POLAR_DIRECTION_KEYS:o6,DEFAULT_POLAR_DIRECTION_NAMES:s6,PolarAxis:r6,diff:a6,fixNumericExtent:l6,groupAccumulativeValueProperty:d6,keyProperty:c6,normaliseGroupTo:u6,resetLabelFn:h6,seriesLabelFadeInAnimation:p6,seriesLabelFadeOutAnimation:g6,valueProperty:m6,animationValidation:f6,createDatumId:v6,SeriesNodePickMode:y6,CategoryScale:b6,motion:x6,updateLabelNode:C6,getItemStyles:S6}=uE,w6=class extends uE.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.angleKey=n.properties.angleKey,this.radiusKey=n.properties.radiusKey}},M6=class extends uE.PolarSeries{constructor(e,t){let{animationResetFns:i}=t;super({moduleCtx:e,categoryKey:"angleValue",propertyKeys:o6,propertyNames:s6,canHaveAxes:!0,pickModes:[y6.NEAREST_NODE,y6.EXACT_SHAPE_MATCH],animationResetFns:p(p({},i),{},{label:h6})}),this.NodeEvent=w6,this.groupScale=new b6,this.circleCache={r:0,cx:0,cy:0}}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return{domain:[]};if(e===_u.Angle)return t.getDomain(this,"angleValue","key",i);{const e=t.getDomain(this,"radiusValue-end","value",i).domain,n=Number.isFinite(e[1]-e[0])?[Math.min(e[0],0),Math.max(e[1],0)]:[];return{domain:l6(n)}}}async processData(e){var t,i;const{angleKey:n,radiusKey:o,normalizedTo:s}=this.properties,r=!this.ctx.animationManager.isSkipped(),a=this.getStackId(),l="".concat(a,"-trailing"),d=[];Ka(s)&&d.push(u6([a,l],Math.abs(s))),this.needsDataModelDiff()&&this.processedData&&d.push(a6(this.id,this.processedData)),r&&d.push(f6());const c=this.visible?{}:{forceValue:0},u=null===(t=this.axes[_u.Radius])||void 0===t?void 0:t.scale.type,h=null===(i=this.axes[_u.Angle])||void 0===i?void 0:i.scale.type;await this.requestDataModel(e,this.data,{props:[c6(n,h,{id:"angleValue"}),m6(o,u,p({id:"radiusValue-raw",invalidValue:null},c)),...d6(o,"normal",p({id:"radiusValue-end",rangeId:"radiusValue-range",invalidValue:null,groupId:a,separateNegative:!0},c),u),...d6(o,"trailing",p({id:"radiusValue-start",invalidValue:null,groupId:l,separateNegative:!0},c),u),...d],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,n=this.circleCache;return(e!==n.r||t!==n.cx||i!==n.cy)&&(this.circleCache={r:e,cx:t,cy:i},!0)}isRadiusAxisReversed(){var e;return null===(e=this.axes[_u.Radius])||void 0===e?void 0:e.isReversed()}maybeRefreshNodeData(){var e,t;(this.didCircleChange()||this.nodeDataRefresh)&&(this.contextNodeData=this.createNodeData(),this.nodeData=null!==(e=null===(t=this.contextNodeData)||void 0===t?void 0:t.nodeData)&&void 0!==e?e:[],this.nodeDataRefresh=!1)}getAxisInnerRadius(){const e=this.axes[_u.Radius];return e instanceof r6?this.radius*e.innerRadiusRatio:0}createNodeData(){var e,t,i;const{processedData:n,dataModel:o,groupScale:s}=this;if(!o||!n||"grouped"!==n.type)return;const r=this.axes[_u.Angle],a=this.axes[_u.Radius],l=null===r||void 0===r?void 0:r.scale,d=null===a||void 0===a?void 0:a.scale;if(!l||!d)return;const c=o.resolveKeysById(this,"angleValue",n),u=o.resolveColumnById(this,"radiusValue-start",n),h=o.resolveColumnById(this,"radiusValue-end",n),p=o.resolveColumnById(this,"radiusValue-raw",n);let g=0,m=0;r instanceof rG&&(g=r.groupPaddingInner,m=r.paddingInner);const f=(null!==(e=l.bandwidth)&&void 0!==e?e:0)*(1-m),{index:v,visibleGroupCount:y}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);s.domain=Array.from({length:y}).map((e,t)=>String(t)),s.range=[-f/2,f/2],s.paddingInner=y>1?g:0;const b=this.isRadiusAxisReversed(),x=this.getAxisInnerRadius(),C=this.radius,S=C+x,{angleKey:w,radiusKey:M,angleName:k,radiusName:D,legendItemName:I,label:A}=this.properties,L=this.getSeriesDomain(_u.Radius).domain,N=(e,t,i,n)=>{const o=this.getLabelText(t,e,M,"radius",L,A,{value:t,datum:e,angleKey:w,radiusKey:M,angleName:k,radiusName:D,legendItemName:I});if(o)return{x:i,y:n,text:o,textAlign:"center",textBaseline:"middle"}},T=[],R=S6((e,t,i)=>n6(this,e,t,i)),E={itemId:M,nodeData:T,labelData:T,styles:R};if(!this.visible)return E;const{dataSources:P}=n,O=null!==(t=null===(i=P.get(this.id))||void 0===i?void 0:i.data)&&void 0!==t?t:[];for(const{datumIndex:F}of o.forEachGroupDatum(this,n)){const e=O[F],t=c[F];if(null==t)return;const i=p[F],n=i>=0&&!Object.is(i,-0),o=u[F],r=h[F],a=n===b;if(void 0===o||void 0===r)return;let g,m,f;if(1===O.length)g=-.5*Math.PI,m=1.5*Math.PI,f=g;else{g=Pp(l.convert(t)+s.convert(String(v))),m=Pp(g+s.bandwidth),f=g+s.bandwidth/2}const y=S-d.convert(o),w=S-d.convert(r),M=(y+w)/2,k=Math.cos(f)*M,D=Math.sin(f)*M,I=this.properties.label.enabled?N(e,i,k,D):void 0,A=this.getColumnWidth(g,m);T.push({series:this,datum:e,datumIndex:F,point:{x:k,y:D,size:0},midPoint:{x:k,y:D},label:I,angleValue:t,radiusValue:i,negative:a,innerRadius:y,outerRadius:w,stackInnerRadius:y,stackOuterRadius:w,startAngle:g,endAngle:m,midAngle:f,axisInnerRadius:x,axisOuterRadius:C,columnWidth:A,index:F})}return{itemId:M,nodeData:T,labelData:T,styles:R}}getColumnWidth(e,t){return Number.NaN}update(e){let{seriesRect:t}=e;const i=this.checkResize(t);this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),i&&this.animationState.transition("resize"),this.animationState.transition("update")}updateSectorSelection(e,t){var i;const{contextNodeData:n}=this;if(!n)return;const o=this.ctx.highlightManager.getActiveHighlight();let s=[];const r=null===(i=this.ctx.highlightManager)||void 0===i?void 0:i.getActiveHighlight();t?null!==r&&void 0!==r&&r.datum&&r.series===this&&s.push(r):s=this.nodeData;const a=this.isRadiusAxisReversed(),l=a?this.radius:this.getAxisInnerRadius(),d=a?this.getAxisInnerRadius():this.radius,c=this.getShapeFillBBox(),u=this.hasItemStylers();e.update(s,void 0,e=>this.getDatumId(e)).each((e,i)=>{var s,a,h,p;const{midPoint:g}=i;if(u){const e=this.getHighlightState(r,t,i.datumIndex);i.style=n6(this,i,t,e)}const m=null!==(s=i.style)&&void 0!==s?s:n.styles[this.getHighlightState(o,t,i.datumIndex)],f=m.fill,v=$v(f)&&"item"===f.bounds?{centerX:null!==(a=null===g||void 0===g?void 0:g.x)&&void 0!==a?a:0,centerY:null!==(h=null===g||void 0===g?void 0:g.y)&&void 0!==h?h:0}:{centerX:0,centerY:0,innerRadius:l,outerRadius:d};this.updateItemPath(e,i,t),e.setStyleProperties(m,c,v),e.cornerRadius=null!==(p=m.cornerRadius)&&void 0!==p?p:0,e.lineJoin="round"})}updateLabels(){var e;const t=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),i=(null===t||void 0===t?void 0:t.series)===this&&null!==t&&void 0!==t&&t.datum?t:void 0,n=i?[i]:[];this.labelSelection.update(this.nodeData).each((e,i)=>{var n;C6(this,e,this.properties,this.properties.label,i.label,!1,t),e.fillOpacity=null!==(n=this.getHighlightStyle(!1,i.datumIndex).opacity)&&void 0!==n?n:1}),this.highlightLabelSelection.update(n,void 0,e=>this.getDatumId(e)).each((e,i)=>{var n;C6(this,e,this.properties,this.properties.label,i.label,!0,t),e.fillOpacity=null!==(n=this.getHighlightStyle(!0,i.datumIndex).opacity)&&void 0!==n?n:1})}animateEmptyUpdateReady(){const{labelSelection:e}=this,t=this.getColumnTransitionFunctions();x6.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],t),p6(this,"labels",this.ctx.animationManager,e,this.highlightLabelSelection)}animateClearingUpdateEmpty(){const{itemSelection:e}=this,{animationManager:t}=this.ctx,i=this.getColumnTransitionFunctions();x6.fromToMotion(this.id,"datums",t,[e],i),g6(this,"labels",t,this.labelSelection,this.highlightLabelSelection)}getTooltipContent(e){var t,i;const{id:n,dataModel:o,processedData:s,axes:r,properties:a}=this,{angleKey:l,angleName:d,radiusKey:c,radiusName:u,legendItemName:h,tooltip:g}=a,m=r[_u.Angle],f=r[_u.Radius],v=null===(t=this.nodeData)||void 0===t?void 0:t[e];if(!o||!s||!m||!f||!v)return;const y=null===(i=s.dataSources.get(this.id))||void 0===i?void 0:i.data[e],b=o.resolveKeysById(this,"angleValue",s)[e],x=o.resolveColumnById(this,"radiusValue-raw",s)[e];if(null==b)return;const C=n6(this,v,!1);return this.formatTooltipWithContext(g,{heading:this.getAxisValueText(m,"tooltip",b,y,l,void 0),symbol:this.legendItemSymbol(),data:[{label:u,fallbackLabel:c,value:this.getAxisValueText(f,"tooltip",x,y,c,void 0),missing:uE.isTooltipValueMissing(x)}]},p({seriesId:n,datum:y,title:d,angleKey:l,angleName:d,radiusKey:c,radiusName:u,legendItemName:h},C))}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.itemSelection.nodes())}legendItemSymbol(){const{fill:e,stroke:t,fillOpacity:i,strokeOpacity:n,strokeWidth:o,lineDash:s,lineDashOffset:r}=i6(this,!1,uE.HighlightState.None),a={fill:null!==e&&void 0!==e?e:"rgba(0, 0, 0, 0)",stroke:null!==t&&void 0!==t?t:"rgba(0, 0, 0, 0)",fillOpacity:i,strokeOpacity:n,strokeWidth:o,lineDash:s,lineDashOffset:r};return $v(a.fill)&&(a.fill=p(p({},a.fill),{},{gradient:"linear",rotation:0,reverse:!1})),{marker:a}}getLegendData(e){var t;if("category"!==e)return[];const{id:i,visible:n}=this,{radiusKey:o,radiusName:s,legendItemName:r,showInLegend:a}=this.properties;return[{legendType:"category",id:i,itemId:o,seriesId:i,enabled:n,label:{text:null!==(t=null!==r&&void 0!==r?r:s)&&void 0!==t?t:o},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!a}]}getDatumId(e){return v6(e.angleValue)}computeLabelsBBox(){return null}},{SeriesProperties:k6,makeSeriesTooltip:D6,Label:I6}=uE,A6=class extends k6{constructor(){super(...arguments),this.angleKeyAxis="angle",this.radiusKeyAxis="radius",this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new I6,this.tooltip=D6()}getStyle(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:o,lineDash:s,lineDashOffset:r,cornerRadius:a}=this;return{fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:o,lineDash:s,lineDashOffset:r,cornerRadius:a,opacity:1}}};kV([ru],A6.prototype,"angleKey",2),kV([ru],A6.prototype,"angleName",2),kV([ru],A6.prototype,"radiusKey",2),kV([ru],A6.prototype,"radiusName",2),kV([ru],A6.prototype,"angleKeyAxis",2),kV([ru],A6.prototype,"radiusKeyAxis",2),kV([ru],A6.prototype,"legendItemName",2),kV([ru],A6.prototype,"fill",2),kV([ru],A6.prototype,"fillOpacity",2),kV([ru],A6.prototype,"stroke",2),kV([ru],A6.prototype,"strokeWidth",2),kV([ru],A6.prototype,"strokeOpacity",2),kV([ru],A6.prototype,"lineDash",2),kV([ru],A6.prototype,"lineDashOffset",2),kV([ru],A6.prototype,"cornerRadius",2),kV([ru],A6.prototype,"styler",2),kV([ru],A6.prototype,"itemStyler",2),kV([ru],A6.prototype,"rotation",2),kV([ru],A6.prototype,"stackGroup",2),kV([ru],A6.prototype,"normalizedTo",2),kV([ru],A6.prototype,"label",2),kV([ru],A6.prototype,"tooltip",2);var{motion:L6}=uE;function N6(){const e={startAngle:new Map,endAngle:new Map},t=["startAngle","endAngle"],i=(t,i)=>({startAngle:e.startAngle.get(t)[i],endAngle:e.endAngle.get(t)[i]});return{calculate:(i,n,o)=>{for(const a of t){const t=e[a];let l=("removed"===o||"updated"===o?i:n)[a],d=("removed"===o?i:n)[a];var s,r;if(Number.isNaN(d))d=null!==(s=null===(r=i.previousDatum)||void 0===r?void 0:r[a])&&void 0!==s?s:Number.NaN;const c=l-d;Math.abs(c)>Math.PI&&(l-=2*Math.sign(c)*Math.PI),t.set(n,{from:l,to:d})}},from:e=>i(e,"from"),to:e=>i(e,"to")}}function T6(e,t,i){if("updated"===i){if(null==e.previousDatum||Number.isNaN(e.previousDatum.startAngle)||Number.isNaN(e.previousDatum.endAngle))return"added";if(Number.isNaN(t.startAngle)||Number.isNaN(t.endAngle))return"removed"}return"added"===i&&null!=e.previousDatum?"updated":i}function R6(e,t){let{innerRadius:i,outerRadius:n,columnWidth:o,axisInnerRadius:s,axisOuterRadius:r,startAngle:a,endAngle:l}=t;return{innerRadius:i,outerRadius:n,columnWidth:o,axisInnerRadius:s,axisOuterRadius:r,startAngle:a,endAngle:l}}var{SectorBox:E6,motion:P6}=uE;function O6(e){const{negative:t,innerRadius:i,outerRadius:n,stackInnerRadius:o,stackOuterRadius:s}=e;return{innerRadius:t?s:o,outerRadius:t?o:s,clipInnerRadius:t?n:i,clipOuterRadius:t?i:n}}function F6(e,t){const{startAngle:i,endAngle:n}=t,{innerRadius:o,outerRadius:s,clipInnerRadius:r,clipOuterRadius:a}=O6(t);return{innerRadius:o,outerRadius:s,startAngle:i,endAngle:n,clipSector:new E6(i,n,r,a)}}var{Sector:z6,SectorBox:B6}=uE,V6=class extends M6{constructor(e){super(e,{animationResetFns:{item:F6}}),this.properties=new A6}setZIndex(e){return super.setZIndex(e),this.contentGroup.zIndex=[0,Lh.FOREGROUND,e],this.highlightGroup.zIndex=[0,Lh.HIGHLIGHT,e],this.labelGroup.zIndex=[0,Lh.LABEL,e],!0}getStackId(){var e,t;const i=null!==(e=null===(t=this.seriesGrouping)||void 0===t?void 0:t.groupIndex)&&void 0!==e?e:this.id;return"nightingale-stack-".concat(i,"-yValues")}nodeFactory(){return new z6}updateItemPath(e,t,i){const{negative:n}=t;if(e.centerX=0,e.centerY=0,e.startOuterCornerRadius=n?0:this.properties.cornerRadius,e.endOuterCornerRadius=n?0:this.properties.cornerRadius,e.startInnerCornerRadius=n?this.properties.cornerRadius:0,e.endInnerCornerRadius=n?this.properties.cornerRadius:0,i){const{startAngle:i,endAngle:n}=t,{innerRadius:o,outerRadius:s,clipInnerRadius:r,clipOuterRadius:a}=O6(t);e.innerRadius=o,e.outerRadius=s,e.startAngle=i,e.endAngle=n,e.clipSector=new B6(i,n,r,a)}}getColumnTransitionFunctions(){return function(e){const t=N6();return{toFn:(i,n,o)=>{const{startAngle:s,endAngle:r}=t.to(n);let a,l,d;if("removed"===o)a=e,l=e,d=new E6(s,r,a,l);else{let t,i;({innerRadius:a,outerRadius:l,clipInnerRadius:t,clipOuterRadius:i}=O6(n)),Number.isNaN(a)&&(a=e),Number.isNaN(l)&&(l=e),Number.isNaN(t)&&(t=e),Number.isNaN(i)&&(i=e),d=new E6(s,r,t,i)}return{innerRadius:a,outerRadius:l,startAngle:s,endAngle:r,clipSector:d}},fromFn:(i,n,o)=>{o=T6(i,n,o),t.calculate(i,n,o);const{startAngle:s,endAngle:r}=t.from(n);let a,l,d;return"removed"===o||"updated"===o?(a=i.innerRadius,l=i.outerRadius,d=i.clipSector):(a=e,l=e),null!==d&&void 0!==d||(d=new E6(s,r,a,l)),{innerRadius:a,outerRadius:l,startAngle:s,endAngle:r,clipSector:d,phase:P6.NODE_UPDATE_STATE_TO_PHASE_MAPPING[o]}}}}(this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius())}hasItemStylers(){return null!=this.properties.itemStyler||null!=this.properties.styler||null!=this.properties.label.itemStyler}};V6.className="NightingaleSeries",V6.type="nightingale";var{nightingaleSeriesThemeableOptionsDef:G6}=uE,H6=p(p(p({},Yc),G6),{},{type:pd(jd("nightingale")),angleKey:pd(Ad),radiusKey:pd(Ad),angleName:Ad,radiusName:Ad,legendItemName:Ad,grouped:Cd,stacked:Cd,stackGroup:Ad,normalizedTo:Dd});H6.angleKeyAxis=gd(Ad),H6.radiusKeyAxis=gd(Ad);var{FILL_GRADIENT_RADIAL_SERIES_DEFAULTS:j6,FILL_IMAGE_DEFAULTS:W6,FILL_PATTERN_DEFAULTS:_6}=uE,K6={series:{fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",j6],["image",W6],["pattern",_6]]},stroke:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$ref:"chartBackgroundColor"},{$palette:"stroke"}]},strokeWidth:1,label:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}),highlight:p(p({},uE.multiSeriesHighlightStyle()),{},{bringToFront:!1})},axes:{[Bh.ANGLE_CATEGORY]:{shape:{$findFirstSiblingNotOperation:Vh.CIRCLE},groupPaddingInner:0,paddingInner:0,label:{spacing:10}},[Bh.RADIUS_NUMBER]:{shape:{$findFirstSiblingNotOperation:Vh.CIRCLE}}}},U6={type:"series",name:"nightingale",chartType:"polar",enterprise:!0,stackable:!0,groupable:!0,stackedByDefault:!0,version:GC,dependencies:[gz],options:H6,defaultAxes:{angle:{type:Bh.ANGLE_CATEGORY},radius:{type:Bh.RADIUS_NUMBER}},axisKeys:{[_u.X]:"xKeyAxis",[_u.Y]:"yKeyAxis"},themeTemplate:K6,create:e=>new V6(e)},{SeriesProperties:Y6,makeSeriesTooltip:$6,Label:Z6,DropShadow:X6}=uE,q6=class extends Z6{},Q6=class extends Z6{constructor(){super(...arguments),this.spacing=0}};kV([ru],Q6.prototype,"spacing",2),kV([ru],Q6.prototype,"placement",2);var J6=class extends Y6{constructor(){super(...arguments),this.fills=[],this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.direction="vertical",this.reverse=void 0,this.spacing=0,this.aspectRatio=void 0,this.shadow=(new X6).set({enabled:!1}),this.label=new q6,this.stageLabel=new Q6,this.tooltip=$6()}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{fills:t,strokes:i,fillOpacity:n,strokeWidth:o,strokeOpacity:s,lineDash:r,lineDashOffset:a}=this;return{fill:t[e%t.length],fillOpacity:n,stroke:i[e%i.length],strokeWidth:o,strokeOpacity:s,lineDash:r,lineDashOffset:a,opacity:1}}};function e8(e,t){let{x:i,y:n,top:o,right:s,bottom:r,left:a}=t;e.x0=i-o/2,e.x1=i+o/2,e.x2=i+r/2,e.x3=i-r/2,e.y0=n-a/2,e.y1=n-s/2,e.y2=n+s/2,e.y3=n+a/2}kV([ru],J6.prototype,"stageKey",2),kV([ru],J6.prototype,"valueKey",2),kV([ru],J6.prototype,"fills",2),kV([ru],J6.prototype,"fillOpacity",2),kV([ru],J6.prototype,"strokes",2),kV([ru],J6.prototype,"strokeWidth",2),kV([ru],J6.prototype,"strokeOpacity",2),kV([ru],J6.prototype,"lineDash",2),kV([ru],J6.prototype,"lineDashOffset",2),kV([ru],J6.prototype,"direction",2),kV([ru],J6.prototype,"reverse",2),kV([ru],J6.prototype,"spacing",2),kV([ru],J6.prototype,"aspectRatio",2),kV([ru],J6.prototype,"itemStyler",2),kV([ru],J6.prototype,"shadow",2),kV([ru],J6.prototype,"label",2),kV([ru],J6.prototype,"stageLabel",2),kV([ru],J6.prototype,"tooltip",2);var{valueProperty:t8,SeriesNodePickMode:i8,createDatumId:n8,BBox:o8,Group:s8,Selection:r8,Text:a8,PointerEvents:l8,fromToMotion:d8,seriesLabelFadeInAnimation:c8,getLabelStyles:u8}=uE,h8=class extends uE.DataModelSeries{constructor(e){super({moduleCtx:e,categoryKey:void 0,pickModes:[i8.EXACT_SHAPE_MATCH,i8.NEAREST_NODE]}),this.properties=new J6,this.itemGroup=this.contentGroup.appendChild(new s8({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new s8({name:"itemLabelGroup"})),this.stageLabelGroup=this.contentGroup.appendChild(new s8({name:"stageLabelGroup"})),this.datumSelection=r8.select(this.itemGroup,()=>this.nodeFactory()),this.labelSelection=r8.select(this.itemLabelGroup,a8),this.stageLabelSelection=r8.select(this.stageLabelGroup,a8),this.highlightLabelSelection=r8.select(this.highlightLabelGroup,a8),this.highlightDatumSelection=r8.select(this.highlightNodeGroup,()=>this.nodeFactory()),this.animationState=new Vm("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{clear:"empty",reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable()),this.itemLabelGroup.pointerEvents=l8.None,this.stageLabelGroup.pointerEvents=l8.None,this.cleanup.register(this.ctx.eventsHub.on("legend:item-click",e=>this.onLegendItemClick(e)))}nodeFactory(){return new O1}getNodeData(){var e;return null===(e=this.contextNodeData)||void 0===e?void 0:e.nodeData}resetAnimation(e){"initial"===e?this.animationState.transition("reset"):"ready"===e&&this.animationState.transition("skip")}async processData(e){if(null==this.data)return;const{id:t,visible:i,ctx:{legendManager:n}}=this,{stageKey:o,valueKey:s}=this.properties,r=this.visible?{}:{forceValue:0};await this.requestDataModel(e,this.data,{props:[t8(o,"category",{id:"xValue"}),t8(s,"number",p(p({id:"yValue"},r),{},{validation:(e,o,s)=>i&&n.getItemEnabled({seriesId:t,itemId:s}),invalidValue:0}))]})}createNodeData(){var e,t,i,n,o,s;const{id:r,dataModel:a,processedData:l,properties:d,visible:c,ctx:{legendManager:u}}=this,{stageKey:h,valueKey:p,direction:g,reverse:m="horizontal"===g,spacing:f,aspectRatio:v,label:y,stageLabel:b}=d;if(null==a||null==l)return;const x="horizontal"===g,C=a.resolveColumnById(this,"xValue",l),S=a.resolveColumnById(this,"yValue",l),w=a.getDomain(this,"xValue","value",l).domain,M=a.getDomain(this,"yValue","value",l).domain,k=Wm(b);let D,I;x?(D="center",I="before"===b.placement?"bottom":"top"):(D="after"===b.placement?"left":"right",I="middle");const A=b.enabled?[]:void 0;let L=0,N=0,T=0;const R=null!==(e=null===(t=l.dataSources.get(this.id))||void 0===t?void 0:t.data)&&void 0!==e?e:[];for(const[_,K]of R.entries()){const e=C[_],t=S[_],i=c&&u.getItemEnabled({seriesId:r,itemId:_});if(T+=t,null==A)continue;const n=this.getLabelText(e,K,h,"x",w,this.properties.stageLabel,{datum:K,value:t,stageKey:h,valueKey:p}),{width:o,height:s}=Ua(n)?_m(n,y):k.measureLines(Gl(n));L=Math.max(L,o),N=Math.max(N,s),A.push({x:Number.NaN,y:Number.NaN,text:n,textAlign:D,textBaseline:I,visible:i})}const E=null!==(i=null===(n=this._nodeDataDependencies)||void 0===n?void 0:n.seriesRectWidth)&&void 0!==i?i:0,P=null!==(o=null===(s=this._nodeDataDependencies)||void 0===s?void 0:s.seriesRectHeight)&&void 0!==o?o:0,O=f*(l.input.count-1);let F,z,B;if(x){const e=N+b.spacing;F=new o8(0,"before"===b.placement?e:0,E,P-e)}else{const e=L+b.spacing;F=new o8("after"===b.placement?0:e,0,E-e,P)}if(null!=v&&0!==v){const e="horizontal"===g?1/v:v,t=Math.min(F.width,F.height*e),i=t/e;F=new o8(F.x+(F.width-t)/2,F.y+(F.height-i)/2,t,i)}x?B="before"===b.placement?F.y-b.spacing:F.y+F.height+b.spacing:z="after"===b.placement?F.x+F.width+b.spacing:F.x-b.spacing;const V=F.width-(x?O:0),G=F.height-(x?0:O);if(V<0||G<0)return;const H=[],j=[];let W=0;for(const[_,K]of R.entries()){const e=C[_],t=S[_],i=c&&u.getItemEnabled({seriesId:r,itemId:_}),n=W+t,o=(W+n)/(2*T),s=(n-W)/T,a=x?V*o+f*_:.5*V,l=x?.5*G:G*o+f*_,d=F.x+a,g=F.y+l;if(null!=A){const e=A[_];e.x=null!==z&&void 0!==z?z:d,e.y=null!==B&&void 0!==B?B:g}let v,b,w,k;if(x){const e=V*s;v=e,w=e;const t=(a+e/2)*(G/F.width),i=(a-e/2)*(G/F.width);b=m?F.height-t:t,k=m?F.height-i:i}else{const e=G*s;b=e,k=e;const t=(l-e/2)*(V/F.height),i=(l+e/2)*(V/F.height);v=m?F.width-t:t,w=m?F.width-i:i}const D={x:d,y:g,text:this.getLabelText(t,K,p,"y",M,y,{datum:K,value:t,stageKey:h,valueKey:p}),textAlign:"center",textBaseline:"middle",visible:i};j.push(D),H.push({series:this,itemId:p,datum:K,datumIndex:_,index:_,xValue:e,yValue:t,x:d,y:g,top:v,right:b,bottom:w,left:k,label:D,enabled:i,midPoint:{x:d,y:g},style:this.getItemStyle({datumIndex:_,datum:K},!1)}),W=n}return{itemId:r,nodeData:H,labelData:j,stageLabelData:A,bounds:F}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(e){var t,i,n,o,s,r,a,l;let{seriesRect:d}=e;this.checkResize(d);const{datumSelection:c,labelSelection:u,stageLabelSelection:h,highlightDatumSelection:p,highlightLabelSelection:g}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let m=null===(t=this.ctx.highlightManager)||void 0===t?void 0:t.getActiveHighlight();null==m||m.series===this&&null!=m.datum||(m=void 0);const f=null!==(i=null===(n=this.contextNodeData)||void 0===n?void 0:n.nodeData)&&void 0!==i?i:[],v=null!==(o=null===(s=this.contextNodeData)||void 0===s?void 0:s.labelData)&&void 0!==o?o:[],y=null!==(r=null===(a=this.contextNodeData)||void 0===a?void 0:a.stageLabelData)&&void 0!==r?r:[];this.datumSelection=this.updateDatumSelection({nodeData:f,datumSelection:c}),this.updateDatumStyles({datumSelection:c,isHighlight:!1}),this.updateDatumNodes({datumSelection:c,isHighlight:!1}),this.labelSelection=this.updateLabelSelection({labelData:v,labelSelection:u}),this.updateLabelNodes({labelSelection:u,labelProperties:this.properties.label}),this.stageLabelSelection=this.updateStageLabelSelection({stageLabelData:y,stageLabelSelection:h}),this.updateLabelNodes({labelSelection:h,labelProperties:this.properties.stageLabel,checkActiveHighlight:!0});const b=null!==(l=this.getHighlightLabelData(v,m))&&void 0!==l?l:[];this.highlightLabelSelection=g.update(b),this.updateLabelNodes({labelSelection:this.highlightLabelSelection,labelProperties:this.properties.label,isHighlight:!0}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:null==m?[]:[m],datumSelection:p}),this.updateDatumStyles({datumSelection:p,isHighlight:!0}),this.updateDatumNodes({datumSelection:p,isHighlight:!0}),this.animationState.transition("update")}updateDatumSelection(e){return e.datumSelection.update(e.nodeData)}getItemStyle(e,t){let{datumIndex:i,datum:n}=e;const{properties:o}=this,{itemStyler:s}=o;let r=xu(this.getHighlightStyle(t,i),o.getStyle(i));if(null!=s&&null!=i){const e=this.cachedDatumCallback(n8(i,t?"highlight":"node"),()=>{const e=this.makeItemStylerParams(n,i,t,r);return this.callWithContext(s,e)});e&&(r=xu(e,r))}return r}makeItemStylerParams(e,t,i,n){var o,s;const{id:r,properties:a}=this,{stageKey:l,valueKey:d}=a,c=null===(o=this.ctx.highlightManager)||void 0===o?void 0:o.getActiveHighlight(),u=this.getHighlightStateString(c,i,t),h=null!==(s=this.filterItemStylerFillParams(n.fill))&&void 0!==s?s:n.fill;return p(p({seriesId:r,datum:e,stageKey:l,valueKey:d,highlightState:u},n),{},{fill:h})}updateDatumStyles(e){let{datumSelection:t,isHighlight:i}=e;t.each((e,t)=>{t.style=this.getItemStyle(t,i)})}updateDatumNodes(e){var t;let{datumSelection:i}=e;const{properties:n}=this,{shadow:o}=n,s=null===(t=this.contextNodeData)||void 0===t?void 0:t.bounds,r=s?{series:s,axis:s}:void 0;i.each((e,t)=>{e.setStyleProperties(t.style,r),e8(e,t),e.fillShadow=o})}updateLabelSelection(e){return e.labelSelection.update(this.properties.label.enabled?e.labelData:[])}updateStageLabelSelection(e){return e.stageLabelSelection.update(e.stageLabelData)}updateLabelNodes(e){var t;const i=null===(t=this.ctx.highlightManager)||void 0===t?void 0:t.getActiveHighlight(),{labelSelection:n,labelProperties:o,isHighlight:s=!1,checkActiveHighlight:r=!1}=e;n.each((e,t,n)=>{var a,l,d,c;const{visible:u,x:h,y:p,text:g,textAlign:m,textBaseline:f}=t,v=s||r&&(null===i||void 0===i?void 0:i.datumIndex)===n,y=this.getHighlightStyle(v,n),b=u8(this,void 0,this.properties,o,v,i),{color:x,fontSize:C,fontStyle:S,fontWeight:w,fontFamily:M}=b;e.visible=u,e.x=h,e.y=p,e.text=g,e.fill=x,e.opacity=(null!==(a=y.opacity)&&void 0!==a?a:1)*(null!==(l=b.fillOpacity)&&void 0!==l?l:1),e.fillOpacity=(null!==(d=y.opacity)&&void 0!==d?d:1)*(null!==(c=b.fillOpacity)&&void 0!==c?c:1),e.fontStyle=S,e.fontWeight=w,e.fontSize=C,e.fontFamily=M,e.textAlign=m,e.textBaseline=f,e.setBoxing(b)})}getHighlightLabelData(e,t){if(null!==t&&void 0!==t&&t.label)return[p({},t.label)]}computeFocusBounds(e){var t;const i=null===(t=this.getNodeData())||void 0===t?void 0:t[e.datumIndex];if(void 0!==i)for(const n of this.datumSelection)if(n.datum===i)return n.node}getTooltipContent(e){var t;const{id:i,dataModel:n,processedData:o,properties:s}=this,{stageKey:r,valueKey:a,tooltip:l}=s;if(!n||!o)return;const d=null===(t=o.dataSources.get(this.id))||void 0===t?void 0:t.data[e],c=n.resolveColumnById(this,"xValue",o)[e],u=n.resolveColumnById(this,"yValue",o)[e];if(null==c)return;const h=this.getLabelText(c,d,r,"x",n.getDomain(this,"xValue","value",o).domain,this.properties.stageLabel,{datum:d,value:c,stageKey:r,valueKey:a}),g=this.getItemStyle({datumIndex:e,datum:d},!1);return this.formatTooltipWithContext(l,{symbol:this.legendItemSymbol(e),data:[{label:ed(h),value:ed(u)}]},p({seriesId:i,datum:d,title:void 0,stageKey:r,valueKey:a},g))}getSeriesDomain(){return{domain:[Number.NaN,Number.NaN]}}getSeriesRange(){return[Number.NaN,Number.NaN]}pickNodeClosestDatum(e){let t,{x:i,y:n}=e,o=1/0;return this.datumSelection.each((e,s)=>{const r=e.distanceSquared(i,n);r<o&&(o=r,t=s)}),null==t?void 0:{datum:t,distance:Math.sqrt(o)}}legendItemSymbol(e){var t,i;const{fills:n,strokes:o,strokeWidth:s,fillOpacity:r,strokeOpacity:a,lineDash:l,lineDashOffset:d}=this.properties;return{marker:{fill:null!==(t=n[e])&&void 0!==t?t:"black",fillOpacity:r,stroke:null!==(i=o[e])&&void 0!==i?i:"black",strokeWidth:s,strokeOpacity:a,lineDash:l,lineDashOffset:d}}}getLegendData(e){var t,i;const{processedData:n,dataModel:o,id:s,ctx:{legendManager:r},visible:a}=this;if(!o||!n||"category"!==e)return[];const{showInLegend:l}=this.properties,d=[],c=o.resolveColumnById(this,"xValue",n),u=null!==(t=null===(i=n.dataSources.get(this.id))||void 0===i?void 0:i.data)&&void 0!==t?t:[];for(const[h]of u.entries()){const e=c[h];d.push({legendType:"category",id:s,itemId:h,seriesId:s,enabled:a&&r.getItemEnabled({seriesId:s,itemId:h}),label:{text:e},symbol:this.legendItemSymbol(h),hideInLegend:!l})}return d}animateReset(){this.ctx.animationManager.skipCurrentBatch(),this.ctx.animationManager.stopByAnimationGroupId(this.id)}animateEmptyUpdateReady(){const{datumSelection:e,labelSelection:t,properties:i}=this,n=(o=i.direction,{fromFn:(e,t)=>{const{x:i,y:n}=t;let{top:s,right:r,bottom:a,left:l}=t;return"vertical"===o?(s=0,a=0):(l=0,r=0),{x:i,y:n,top:s,right:r,bottom:a,left:l}},toFn:(e,t)=>{const{x:i,y:n,top:o,right:s,bottom:r,left:a}=t;return{x:i,y:n,top:o,right:s,bottom:r,left:a}},applyFn:e8});var o;d8(this.id,"nodes",this.ctx.animationManager,[e],n),c8(this,"labels",this.ctx.animationManager,t)}hasItemStylers(){return null!=this.properties.itemStyler||null!=this.properties.label.itemStyler}};h8.className="PyramidSeries",h8.type="pyramid";var{pyramidSeriesThemeableOptionsDef:p8}=uE,g8=p(p(p({},p8),Yc),{},{type:pd(jd("pyramid")),stageKey:pd(Ad),valueKey:pd(Ad)}),m8={series:{direction:"vertical",strokeWidth:{$isUserOption:["./strokes/0",2,0]},spacing:2,fills:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},{$palette:"fills"},{$applySwitch:[{$path:["/type",void 0,{$value:"$1"}]},{$value:"$1"},["gradient",uE.FILL_GRADIENT_LINEAR_DEFAULTS],["pattern",uE.FILL_PATTERN_DEFAULTS],["image",uE.FILL_IMAGE_DEFAULTS]]}]},strokes:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},{$palette:"strokes"}]},label:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"}}),stageLabel:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:12}),shadow:{enabled:!1,color:Hh,xOffset:3,yOffset:3,blur:5},highlight:{unhighlightedItem:{opacity:.4}}}},f8={type:"series",name:"pyramid",chartType:"standalone",enterprise:!0,solo:!0,version:GC,dependencies:[W0],options:g8,themeTemplate:m8,create:e=>new h8(e)},v8={series:{stroke:{$palette:"stroke"},label:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}),marker:{enabled:!0,fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",uE.FILL_GRADIENT_RADIAL_REVERSED_DEFAULTS],["image",uE.FILL_IMAGE_DEFAULTS],["pattern",uE.FILL_PATTERN_DEFAULTS]]},stroke:{$palette:"stroke"},fillOpacity:1,shape:"circle",size:6,strokeOpacity:1,strokeWidth:{$isUserOption:["./stroke",1,0]}},highlight:uE.markerSeriesHighlightStyle(),tooltip:{range:{$path:["/tooltip/range","nearest"]}}},axes:{[Bh.ANGLE_CATEGORY]:{label:{spacing:10}}}},y8=xu({series:{stroke:uE.SAFE_STROKE_FILL_OPERATION,strokeWidth:2}},v8),b8=xu({series:{fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",uE.FILL_GRADIENT_LINEAR_DEFAULTS],["image",uE.FILL_IMAGE_DEFAULTS],["pattern",uE.FILL_PATTERN_DEFAULTS]]},fillOpacity:.8,strokeWidth:2,marker:{enabled:!1}}},v8),{Label:x8,SeriesMarker:C8,SeriesProperties:S8,makeSeriesTooltip:w8}=uE,M8=class extends S8{constructor(){super(...arguments),this.angleKeyAxis="angle",this.radiusKeyAxis="radius",this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.marker=new C8,this.label=new x8,this.tooltip=w8(),this.connectMissingData=!1}};kV([ru],M8.prototype,"angleKey",2),kV([ru],M8.prototype,"radiusKey",2),kV([ru],M8.prototype,"angleName",2),kV([ru],M8.prototype,"radiusName",2),kV([ru],M8.prototype,"angleKeyAxis",2),kV([ru],M8.prototype,"radiusKeyAxis",2),kV([ru],M8.prototype,"legendItemName",2),kV([ru],M8.prototype,"stroke",2),kV([ru],M8.prototype,"strokeWidth",2),kV([ru],M8.prototype,"strokeOpacity",2),kV([ru],M8.prototype,"lineDash",2),kV([ru],M8.prototype,"lineDashOffset",2),kV([ru],M8.prototype,"rotation",2),kV([ru],M8.prototype,"styler",2),kV([ru],M8.prototype,"marker",2),kV([ru],M8.prototype,"label",2),kV([ru],M8.prototype,"tooltip",2),kV([ru],M8.prototype,"connectMissingData",2);var{DEFAULT_POLAR_DIRECTION_KEYS:k8,DEFAULT_POLAR_DIRECTION_NAMES:D8,PolarAxis:I8,SeriesNodePickMode:A8,valueProperty:L8,fixNumericExtent:N8,seriesLabelFadeInAnimation:T8,markerFadeInAnimation:R8,resetMarkerFn:E8,resetLabelFn:P8,animationValidation:O8,computeMarkerFocusBounds:F8,BBox:z8,Group:B8,Path:V8,Selection:G8,Text:H8,Marker:j8,updateLabelNode:W8,getMarkerStyles:_8}=uE,K8=class extends uE.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.angleKey=n.properties.angleKey,this.radiusKey=n.properties.radiusKey}},U8=class extends uE.PolarSeries{constructor(e){super({moduleCtx:e,categoryKey:"angleValue",propertyKeys:k8,propertyNames:D8,pickModes:[A8.NEAREST_NODE,A8.EXACT_SHAPE_MATCH],canHaveAxes:!0,animationResetFns:{item:E8,label:P8},clipFocusBox:!1}),this.NodeEvent=K8,this.lineGroup=this.contentGroup.appendChild(new B8({name:"radar-line"})),this.lineSelection=G8.select(this.lineGroup,V8),this.resetInvalidToZero=!1,this.circleCache={r:0,cx:0,cy:0},this.lineGroup.zIndex=0,this.itemGroup.zIndex=1}nodeFactory(){return new j8}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return{domain:[]};if(e===_u.Angle){return{domain:t.getDomain(this,"angleValue","value",i).domain,sortMetadata:t.getKeySortMetadata(this,"angleValue",i)}}{const e=t.getDomain(this,"radiusValue","value",i).domain,n=Rg(0===e.length?e:[0].concat(e));return{domain:N8(n)}}}async processData(e){var t,i;const{angleKey:n,radiusKey:o}=this.properties,s=[];this.ctx.animationManager.isSkipped()||s.push(O8());const r=null===(t=this.axes[_u.Radius])||void 0===t?void 0:t.scale.type,a=null===(i=this.axes[_u.Angle])||void 0===i?void 0:i.scale.type;await this.requestDataModel(e,this.data,{props:[L8(n,a,{id:"angleValue"}),L8(o,r,{id:"radiusValue",invalidValue:void 0}),...s]}),this.animationState.transition("updateData")}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,n=this.circleCache;return(e!==n.r||t!==n.cx||i!==n.cy)&&(this.circleCache={r:e,cx:t,cy:i},!0)}getAxisInnerRadius(){const e=this.axes[_u.Radius];return e instanceof I8?this.radius*e.innerRadiusRatio:0}maybeRefreshNodeData(){var e,t;(this.didCircleChange()||this.nodeDataRefresh)&&(this.contextNodeData=this.createNodeData(),this.nodeData=null!==(e=null===(t=this.contextNodeData)||void 0===t?void 0:t.nodeData)&&void 0!==e?e:[],this.nodeDataRefresh=!1)}createNodeData(){var e,t,i,n;const{processedData:o,dataModel:s}=this;if(!o||!s)return;const{angleKey:r,radiusKey:a,angleName:l,radiusName:d,legendItemName:c,marker:u,label:h}=this.properties,p=null===(e=this.axes[_u.Angle])||void 0===e?void 0:e.scale,g=null===(t=this.axes[_u.Radius])||void 0===t?void 0:t.scale;if(!p||!g)return;const m=s.resolveColumnById(this,"angleValue",o),f=s.resolveColumnById(this,"radiusValue",o),v=this.getAxisInnerRadius(),y=this.getSeriesDomain(_u.Radius).domain,b=(null!==(i=null===(n=o.dataSources.get(this.id))||void 0===n?void 0:n.data)&&void 0!==i?i:[]).map((e,t)=>{const i=m[t],n=f[t],o=p.convert(i),s=this.radius+v-g.convert(n),b=Math.cos(o),x=Math.sin(o),C=b*s,S=x*s;let w;if(h.enabled){const t=this.getLabelText(n,e,a,"radius",y,h,{value:n,datum:e,angleKey:r,radiusKey:a,angleName:l,radiusName:d,legendItemName:c});if(t){let e="right";Va(b,0)?e="center":b>0&&(e="left");let i="bottom";Va(x,0)?i="middle":x>0&&(i="top"),w={x:C+b*u.size,y:S+x*u.size,text:t,textAlign:e,textBaseline:i}}}return{series:this,datum:e,datumIndex:t,index:t,point:{x:C,y:S,size:u.size},midPoint:{x:C,y:S},label:w,angleValue:i,radiusValue:n,missing:!ol(o)||!ol(s)}});return{itemId:a,nodeData:b,labelData:b,styles:_8(this,this.properties,u)}}update(e){var t,i;let{seriesRect:n}=e;const o=this.checkResize(n),s=!this.ctx.animationManager.isSkipped(),{series:r}=null!==(t=null===(i=this.ctx.highlightManager)||void 0===i?void 0:i.getActiveHighlight())&&void 0!==t?t:{};this.highlightGroup.visible=(s||this.visible)&&r===this,this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updatePathSelections(),this.updateMarkerSelection(),this.updateHighlightSelection(),this.updatePathNodes(),this.hasItemStylers()&&(this.updateDatumStyles(this.itemSelection,!1),this.updateDatumStyles(this.highlightSelection,!0)),this.updateMarkers(this.itemSelection,!1),this.updateMarkers(this.highlightSelection,!0),this.updateLabels(),o&&this.animationState.transition("resize"),this.animationState.transition("update")}updatePathSelections(){const e=this.visible?[!0]:[];this.lineSelection.update(e)}updateMarkerSelection(){const{marker:e,styler:t}=this.properties;e.isDirty()&&(this.itemSelection.clear(),this.itemSelection.cleanup(),this.itemSelection=G8.select(this.itemGroup,()=>this.nodeFactory(),!1));const i=null==t?e.enabled:this.getStyle().marker.enabled,n=this.visible&&e.shape&&i?this.nodeData:[];this.itemSelection.update(n)}updateHighlightSelection(){var e;const{marker:t,styler:i}=this.properties;t.isDirty()&&(this.highlightSelection.clear(),this.highlightSelection.cleanup(),this.highlightSelection=G8.select(this.highlightGroup,()=>this.nodeFactory(),!1));const n=null==i?t.enabled:this.getStyle().marker.enabled,o=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),s=this.visible&&t.shape&&n&&null!==o&&void 0!==o&&o.datum?[p({},o)]:[];this.highlightSelection.update(s)}getMarkerFill(e){var t;return null!==(t=null===e||void 0===e?void 0:e.fill)&&void 0!==t?t:this.getStyle().marker.fill}getDatumStylerProperties(e){const{id:t,properties:i}=this,{angleKey:n,radiusKey:o}=i;return{seriesId:t,datum:e,angleKey:n,radiusKey:o}}updateDatumStyles(e,t){const i=this.ctx.highlightManager.getActiveHighlight();e.each((e,n)=>{const o=this.getHighlightState(i,t,n.datumIndex),s=this.getStyle(o),{stroke:r,strokeWidth:a,strokeOpacity:l}=s;n.style=this.getMarkerStyle(this.properties.marker,n,this.getDatumStylerProperties(n.datum),{isHighlight:t,highlightState:o},s.marker,{stroke:r,strokeWidth:a,strokeOpacity:l})})}updateMarkers(e,t){const i=this.getShapeFillBBox(),{contextNodeData:n}=this;if(!n)return;const o=this.ctx.highlightManager.getActiveHighlight();e.each((e,s)=>{var r;const a=null!==(r=s.style)&&void 0!==r?r:n.styles[this.getHighlightState(o,t,s.datumIndex)];this.applyMarkerStyle(a,e,s.point,i)})}updateLabels(){var e;const{properties:t}=this,i=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),n=(null===i||void 0===i?void 0:i.series)===this&&null!==i&&void 0!==i&&i.datum?[p({},i)]:[];this.labelSelection.update(this.nodeData).each((e,n)=>{if(n.label){var o;const s=!1;e.fillOpacity=null!==(o=this.getHighlightStyle(s,n.datumIndex).opacity)&&void 0!==o?o:1,W8(this,e,t,t.label,n.label,s,i)}}),this.highlightLabelSelection.update(n).each((e,n)=>{if(n.label){var o;const s=!0;e.fillOpacity=null!==(o=this.getHighlightStyle(s,n.datumIndex).opacity)&&void 0!==o?o:1,W8(this,e,t,t.label,n.label,s,i)}})}getTooltipContent(e){var t;const{id:i,dataModel:n,processedData:o,axes:s,properties:r}=this,{angleKey:a,angleName:l,radiusKey:d,radiusName:c,legendItemName:u,tooltip:h,marker:g}=r,m=s[_u.Angle],f=s[_u.Radius];if(!n||!o||!m||!f)return;const v=null===(t=o.dataSources.get(this.id))||void 0===t?void 0:t.data[e],y=n.resolveColumnById(this,"angleValue",o)[e],b=n.resolveColumnById(this,"radiusValue",o)[e];if(null==y)return;const x=this.getMarkerStyle(g,{datum:v,datumIndex:e},this.getDatumStylerProperties(v),{isHighlight:!1});return this.formatTooltipWithContext(h,{heading:this.getAxisValueText(m,"tooltip",y,v,a,void 0),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:d,value:this.getAxisValueText(f,"tooltip",b,v,d,void 0),missing:uE.isTooltipValueMissing(b)}]},p({seriesId:i,datum:v,title:l,angleKey:a,radiusKey:d,angleName:l,radiusName:c,legendItemName:u},x))}legendItemSymbol(){var e,t,i,n,o;const{stroke:s,strokeWidth:r,strokeOpacity:a,lineDash:l,marker:d}=this.getStyle();return{marker:{shape:d.shape,enabled:d.enabled||r<=0,fill:null!==(e=null!==(t=null!==(i=this.getMarkerFill())&&void 0!==i?i:d.stroke)&&void 0!==t?t:s)&&void 0!==e?e:"rgba(0, 0, 0, 0)",stroke:null!==(n=null!==(o=d.stroke)&&void 0!==o?o:s)&&void 0!==n?n:"rgba(0, 0, 0, 0)",fillOpacity:d.fillOpacity,strokeOpacity:d.strokeOpacity,strokeWidth:d.strokeWidth,lineDash:d.lineDash,lineDashOffset:d.lineDashOffset},line:{enabled:!0,stroke:s,strokeOpacity:a,strokeWidth:r,lineDash:l}}}getLegendData(e){var t;if("category"!==e)return[];const{id:i,ctx:{legendManager:n},visible:o}=this,{radiusKey:s,radiusName:r,legendItemName:a,showInLegend:l}=this.properties;return[{legendType:"category",id:i,itemId:s,seriesId:i,enabled:o&&n.getItemEnabled({seriesId:i,itemId:s}),label:{text:null!==(t=null!==a&&void 0!==a?a:r)&&void 0!==t?t:s},symbol:this.legendItemSymbol(),legendItemName:a,hideInLegend:!l}]}pickNodeClosestDatum(e){const{nodeData:t,centerX:i,centerY:n}=this,{x:o,y:s}=e,r=this.radius;if(Math.hypot(o-i,s-n)>r+this.maxChartMarkerSize)return;let a,l=1/0;for(const u of t){const{point:{x:t=Number.NaN,y:o=Number.NaN}={}}=u;if(Number.isNaN(t)||Number.isNaN(o))continue;const s=Math.hypot(e.x-t-i,e.y-o-n);s<l&&(l=s,a=u)}if(a){var d,c;return{datum:a,distance:Math.max(l-(null!==(d=null===(c=a.point)||void 0===c?void 0:c.size)&&void 0!==d?d:0)/2,0)}}}computeLabelsBBox(){const{label:e}=this.properties;this.maybeRefreshNodeData();const t=[],i=new H8;for(const n of this.nodeData){if(!e.enabled||!n.label)continue;i.text=n.label.text,i.x=n.label.x,i.y=n.label.y,i.setFont(e),i.setAlign(n.label);const o=i.getBBox();t.push(o)}return 0===t.length?null:z8.merge(t)}getLineNode(){var e;return null===(e=this.lineSelection)||void 0===e?void 0:e.at(0)}beforePathAnimation(){this.updatePathNodes()}getPathNodesStyle(){var e;const t=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),i=this.getHighlightState(t);return xu(this.getHighlightStyle(void 0,void 0,i),this.getStyle(i))}getLinePoints(){const{nodeData:e,resetInvalidToZero:t}=this,{connectMissingData:i}=this.properties;if(0===e.length)return[];const n=this.axes[_u.Radius],o=this.axes[_u.Angle],s=null===o||void 0===o?void 0:o.isReversed(),r=(null===n||void 0===n?void 0:n.isReversed())&&!s?[...e].reverse():e,a=[];let l,d=!1;for(const[c,u]of r.entries()){let{x:e,y:n}=u.point;const o=Number.isNaN(e)||Number.isNaN(n);o||null!==l&&void 0!==l||(l=u),o&&!i&&(e=0,n=0);const s=0===c||!t&&!i&&(o||d);a.push({x:e,y:n,moveTo:s}),d=o}return void 0!==l&&a.push({x:l.point.x,y:l.point.y,moveTo:!1}),a}animateSinglePath(e,t,i){const{path:n}=e;n.clear(!0);const o=this.getAxisInnerRadius(),s=this.axes[_u.Radius],r=(null===s||void 0===s?void 0:s.isReversed())?this.radius+o-(null===s||void 0===s?void 0:s.scale.convert(0)):o;for(const a of t){const{x:e,y:t,arc:o,radius:s=0,startAngle:l=0,endAngle:d=0,moveTo:c}=a,u=Math.atan2(t,e),h=r*Math.cos(u)*(1-i)+e*i,p=r*Math.sin(u)*(1-i)+t*i;o?n.arc(e,t,s,l,d):c?n.moveTo(h,p):n.lineTo(h,p)}e.checkPathDirty()}animatePaths(e){const t=this.getLinePoints(),i=this.getLineNode();i&&this.animateSinglePath(i,t,e)}animateEmptyUpdateReady(){const{itemSelection:e,labelSelection:t}=this,{animationManager:i}=this.ctx;this.beforePathAnimation(),i.animate({id:"".concat(this.id,"_'path"),groupId:this.id,from:0,to:1,phase:"initial",collapsable:!1,onUpdate:e=>this.animatePaths(e),onStop:()=>this.animatePaths(1)}),R8(this,i,"added",e),T8(this,"labels",i,t,this.highlightLabelSelection)}animateWaitingUpdateReady(e){super.animateWaitingUpdateReady(e),this.resetPaths()}animateReadyResize(e){super.animateReadyResize(e),this.resetPaths()}resetPaths(){const e=this.getLineNode();if(e){const{path:t}=e,i=this.getLinePoints(),n=this.getStyle();e.fill=void 0,e.stroke=n.stroke,e.strokeWidth=n.strokeWidth,e.strokeOpacity=n.strokeOpacity,e.lineDash=n.lineDash,e.lineDashOffset=n.lineDashOffset,t.clear(!0);for(const{x:e,y:o,moveTo:s}of i)s?t.moveTo(e,o):t.lineTo(e,o);return e.checkPathDirty(),n}}getStylerResult(e,t){const{styler:i}=this.properties;if(i){var n;const o=this.makeStylerParams(t),s=null!==(n=this.cachedCallWithContext(i,o))&&void 0!==n?n:{},r=this.ctx.optionsGraphService.resolvePartial(["series","".concat(this.declarationOrder)],s,{pick:!1});r&&(e=r)}return e}getFormattedMarkerStyle(e){const{angleKey:t,radiusKey:i}=this.properties;return this.getMarkerStyle(this.properties.marker,e,{angleKey:t,radiusKey:i},{isHighlight:!0})}computeFocusBounds(e){return F8(this,e)}hasItemStylers(){return null!=this.properties.styler||null!=this.properties.marker.itemStyler||null!=this.properties.label.itemStyler}};U8.className="RadarSeries";var Y8=class extends M8{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1}};kV([ru],Y8.prototype,"fill",2),kV([ru],Y8.prototype,"fillOpacity",2);var{Group:$8,HighlightState:Z8,Path:X8,PointerEvents:q8,Selection:Q8,toHighlightString:J8}=uE,e7=class extends U8{constructor(e){super(e),this.properties=new Y8,this.areaGroup=this.contentGroup.appendChild(new $8({name:"radar-area"})),this.areaSelection=Q8.select(this.areaGroup,X8),this.resetInvalidToZero=!0,this.areaGroup.zIndex=-1}updatePathSelections(){const e=this.visible?[!0]:[];this.areaSelection.update(e),super.updatePathSelections()}getAreaNode(){return this.areaSelection.at(0)}getMarkerFill(e){var t;if(null!=(null===e||void 0===e?void 0:e.fill))return e.fill;const i=this.getStyle();return null!==(t=i.marker.fill)&&void 0!==t?t:i.fill}updatePathNodes(){const e=this.getPathNodesStyle(),{fill:t,fillOpacity:i,strokeWidth:n,stroke:o,strokeOpacity:s,lineDash:r,lineDashOffset:a,opacity:l}=e,d=this.getLineNode();d&&d.setProperties({fill:void 0,lineJoin:"round",lineCap:"round",pointerEvents:q8.None,opacity:l,stroke:o,strokeWidth:n,strokeOpacity:s,lineDash:r,lineDashOffset:a});const c=this.getAreaNode();c&&(c.setStyleProperties({fill:t,fillOpacity:i,stroke:void 0},this.getShapeFillBBox()),c.setProperties({lineJoin:"round",pointerEvents:q8.None,opacity:l}))}animatePaths(e){super.animatePaths(e);const t=this.getAreaNode();t&&this.animateSinglePath(t,this.getAreaPoints(),e)}getAreaPoints(){var e,t;const i=this.getLinePoints(),n=e=>{const t=this.axes[e];return t instanceof uE.PolarAxis?t:void 0},o=n(_u.Radius),s=n(_u.Angle);if(!(null===o||void 0===o?void 0:o.isReversed()))return i;const r=null!==(e=null===s||void 0===s||null===(t=s.getAxisLinePoints())||void 0===t?void 0:t.points)&&void 0!==e?e:[];return i.concat(...r)}resetPaths(){const e=super.resetPaths(),t=this.getAreaNode();if(t){const{path:i}=t,n=this.getAreaPoints(),o=null!==e&&void 0!==e?e:this.getStyle(),s=this.getShapeFillBBox();t.setStyleProperties({fill:o.fill,stroke:void 0,fillOpacity:o.fillOpacity,lineDash:o.lineDash,lineDashOffset:o.lineDashOffset},s),t.lineJoin=t.lineCap="round",i.clear(!0);for(const{x:e,y:t,moveTo:r,arc:a,radius:l=0,startAngle:d=0,endAngle:c=0}of n)a?i.arc(e,t,l,d,c):r?i.moveTo(e,t):i.lineTo(e,t);return i.closePath(),t.checkPathDirty(),o}}makeStylerParams(e){const{properties:t}=this,i=J8(null!==e&&void 0!==e?e:Z8.None);return{marker:{fill:t.marker.fill,fillOpacity:t.marker.fillOpacity,size:t.marker.size,shape:t.marker.shape,stroke:t.marker.stroke,strokeOpacity:t.marker.strokeOpacity,strokeWidth:t.marker.strokeWidth,lineDash:t.marker.lineDash,lineDashOffset:t.marker.lineDashOffset},highlightState:i,fill:t.fill,fillOpacity:t.fillOpacity,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,seriesId:this.id,stroke:t.stroke,strokeOpacity:t.strokeOpacity,strokeWidth:t.strokeWidth,angleKey:t.angleKey,radiusKey:t.radiusKey}}getStyle(e){var t,i,n,o,s,r,a,l,d,c,u,h,p,g,m,f,v,y,b,x,C,S,w;const{marker:M,fill:k,fillOpacity:D,lineDash:I,lineDashOffset:A,stroke:L,strokeOpacity:N,strokeWidth:T}=this.properties,{size:R,shape:E,fill:P="transparent",fillOpacity:O}=M,F=this.getStylerResult({},e);return null!==(t=F.marker)&&void 0!==t||(F.marker={}),{fill:null!==(i=F.fill)&&void 0!==i?i:k,fillOpacity:null!==(n=F.fillOpacity)&&void 0!==n?n:D,lineDash:null!==(o=F.lineDash)&&void 0!==o?o:I,lineDashOffset:null!==(s=F.lineDashOffset)&&void 0!==s?s:A,stroke:null!==(r=F.stroke)&&void 0!==r?r:L,strokeOpacity:null!==(a=F.strokeOpacity)&&void 0!==a?a:N,strokeWidth:null!==(l=F.strokeWidth)&&void 0!==l?l:T,marker:{enabled:null!==(d=F.marker.enabled)&&void 0!==d?d:M.enabled,fill:null!==(c=F.marker.fill)&&void 0!==c?c:P,fillOpacity:null!==(u=F.marker.fillOpacity)&&void 0!==u?u:O,shape:null!==(h=F.marker.shape)&&void 0!==h?h:E,size:null!==(p=F.marker.size)&&void 0!==p?p:R,lineDash:null!==(g=null!==(m=F.marker.lineDash)&&void 0!==m?m:M.lineDash)&&void 0!==g?g:I,lineDashOffset:null!==(f=null!==(v=F.marker.lineDashOffset)&&void 0!==v?v:M.lineDashOffset)&&void 0!==f?f:A,stroke:null!==(y=null!==(b=F.marker.stroke)&&void 0!==b?b:M.stroke)&&void 0!==y?y:L,strokeOpacity:null!==(x=null!==(C=F.marker.strokeOpacity)&&void 0!==C?C:M.strokeOpacity)&&void 0!==x?x:N,strokeWidth:null!==(S=null!==(w=F.marker.strokeWidth)&&void 0!==w?w:M.strokeWidth)&&void 0!==S?S:T}}}};e7.className="RadarAreaSeries",e7.type="radar-area";var{radarAreaSeriesThemeableOptionsDef:t7}=uE,i7=p(p(p({},Yc),t7),{},{type:pd(jd("radar-area")),angleKey:pd(Ad),radiusKey:pd(Ad),angleName:Ad,radiusName:Ad,legendItemName:Ad});i7.angleKeyAxis=gd(Ad),i7.radiusKeyAxis=gd(Ad);var n7={type:"series",name:"radar-area",chartType:"polar",enterprise:!0,version:GC,dependencies:[gz],options:i7,defaultAxes:{angle:{type:Bh.ANGLE_CATEGORY},radius:{type:Bh.RADIUS_NUMBER}},axisKeys:{[_u.Angle]:"angleKeyAxis",[_u.Radius]:"radiusKeyAxis"},themeTemplate:b8,create:e=>new e7(e)},{HighlightState:o7,PointerEvents:s7,toHighlightString:r7}=uE,a7=class extends U8{constructor(){super(...arguments),this.properties=new M8}updatePathSelections(){this.lineSelection.update(this.visible?[!0]:[])}updatePathNodes(){const e=this.getLineNode();if(!e)return;const t=this.getPathNodesStyle(),{strokeWidth:i,stroke:n,strokeOpacity:o,lineDash:s,lineDashOffset:r,opacity:a}=t;e.setProperties({fill:void 0,lineJoin:"round",lineCap:"round",pointerEvents:s7.None,opacity:a,stroke:n,strokeWidth:i,strokeOpacity:o,lineDash:s,lineDashOffset:r})}makeStylerParams(e){const{properties:t}=this,i=r7(null!==e&&void 0!==e?e:o7.None);return{marker:{fill:t.marker.fill,fillOpacity:t.marker.fillOpacity,size:t.marker.size,shape:t.marker.shape,stroke:t.marker.stroke,strokeOpacity:t.marker.strokeOpacity,strokeWidth:t.marker.strokeWidth,lineDash:t.marker.lineDash,lineDashOffset:t.marker.lineDashOffset},highlightState:i,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,seriesId:this.id,stroke:t.stroke,strokeOpacity:t.strokeOpacity,strokeWidth:t.strokeWidth,angleKey:t.angleKey,radiusKey:t.radiusKey}}getStyle(e){var t,i,n,o,s,r,a,l,d,c,u,h,p,g,m,f,v,y,b,x,C;const{marker:S,lineDash:w,lineDashOffset:M,stroke:k,strokeOpacity:D,strokeWidth:I}=this.properties,{size:A,shape:L,fill:N="transparent",fillOpacity:T}=S,R=this.getStylerResult({},e);return null!==(t=R.marker)&&void 0!==t||(R.marker={}),{lineDash:null!==(i=R.lineDash)&&void 0!==i?i:w,lineDashOffset:null!==(n=R.lineDashOffset)&&void 0!==n?n:M,stroke:null!==(o=R.stroke)&&void 0!==o?o:k,strokeOpacity:null!==(s=R.strokeOpacity)&&void 0!==s?s:D,strokeWidth:null!==(r=R.strokeWidth)&&void 0!==r?r:I,marker:{enabled:null!==(a=R.marker.enabled)&&void 0!==a?a:S.enabled,fill:null!==(l=R.marker.fill)&&void 0!==l?l:N,fillOpacity:null!==(d=R.marker.fillOpacity)&&void 0!==d?d:T,shape:null!==(c=R.marker.shape)&&void 0!==c?c:L,size:null!==(u=R.marker.size)&&void 0!==u?u:A,lineDash:null!==(h=null!==(p=R.marker.lineDash)&&void 0!==p?p:S.lineDash)&&void 0!==h?h:w,lineDashOffset:null!==(g=null!==(m=R.marker.lineDashOffset)&&void 0!==m?m:S.lineDashOffset)&&void 0!==g?g:M,stroke:null!==(f=null!==(v=R.marker.stroke)&&void 0!==v?v:S.stroke)&&void 0!==f?f:k,strokeOpacity:null!==(y=null!==(b=R.marker.strokeOpacity)&&void 0!==b?b:S.strokeOpacity)&&void 0!==y?y:D,strokeWidth:null!==(x=null!==(C=R.marker.strokeWidth)&&void 0!==C?C:S.strokeWidth)&&void 0!==x?x:I}}}};a7.className="RadarLineSeries",a7.type="radar-line";var{radarLineSeriesThemeableOptionsDef:l7}=uE,d7=p(p(p({},Yc),l7),{},{type:pd(jd("radar-line")),angleKey:pd(Ad),radiusKey:pd(Ad),angleName:Ad,radiusName:Ad,legendItemName:Ad});d7.angleKeyAxis=gd(Ad),d7.radiusKeyAxis=gd(Ad);var c7={type:"series",name:"radar-line",chartType:"polar",enterprise:!0,version:GC,dependencies:[gz],options:d7,defaultAxes:{angle:{type:Bh.ANGLE_CATEGORY},radius:{type:Bh.RADIUS_NUMBER}},axisKeys:{[_u.Angle]:"angleKeyAxis",[_u.Radius]:"radiusKeyAxis"},themeTemplate:y8,create:e=>new a7(e)},{SeriesProperties:u7,makeSeriesTooltip:h7,Label:p7}=uE,g7=class extends u7{constructor(){super(...arguments),this.angleKeyAxis="angle",this.radiusKeyAxis="radius",this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new p7,this.tooltip=h7()}getStyle(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:o,lineDash:s,lineDashOffset:r,cornerRadius:a}=this;return{fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:o,lineDash:s,lineDashOffset:r,cornerRadius:a,opacity:1}}};kV([ru],g7.prototype,"angleKey",2),kV([ru],g7.prototype,"radiusKey",2),kV([ru],g7.prototype,"angleName",2),kV([ru],g7.prototype,"radiusName",2),kV([ru],g7.prototype,"angleKeyAxis",2),kV([ru],g7.prototype,"radiusKeyAxis",2),kV([ru],g7.prototype,"legendItemName",2),kV([ru],g7.prototype,"fill",2),kV([ru],g7.prototype,"fillOpacity",2),kV([ru],g7.prototype,"stroke",2),kV([ru],g7.prototype,"strokeWidth",2),kV([ru],g7.prototype,"strokeOpacity",2),kV([ru],g7.prototype,"lineDash",2),kV([ru],g7.prototype,"lineDashOffset",2),kV([ru],g7.prototype,"cornerRadius",2),kV([ru],g7.prototype,"styler",2),kV([ru],g7.prototype,"itemStyler",2),kV([ru],g7.prototype,"rotation",2),kV([ru],g7.prototype,"stackGroup",2),kV([ru],g7.prototype,"normalizedTo",2),kV([ru],g7.prototype,"label",2),kV([ru],g7.prototype,"tooltip",2);var{SectorBox:m7,motion:f7}=uE;function v7(e){return{toFn:(t,i,n)=>{let o,s,r,a,l;return"removed"===n?(o=e,s=e,r=i.innerRadius,a=i.outerRadius,l=new m7(o,s,r,a)):(o=i.startAngle,s=i.endAngle,r=Number.isNaN(i.innerRadius)?t.innerRadius:i.innerRadius,a=Number.isNaN(i.outerRadius)?t.outerRadius:i.outerRadius,l=i.clipSector),{startAngle:o,endAngle:s,innerRadius:r,outerRadius:a,clipSector:l}},fromFn:(t,i,n)=>{let o,s,r,a,l;n=function(e,t,i){if("updated"===i){if(null==e.previousDatum||Number.isNaN(e.previousDatum.innerRadius)||Number.isNaN(e.previousDatum.outerRadius))return"added";if(Number.isNaN(t.innerRadius)||Number.isNaN(t.outerRadius))return"removed"}return"added"===i&&null!=e.previousDatum?"updated":i}(t,i,n),"removed"===n||"updated"===n?(o=t.startAngle,s=t.endAngle,r=t.innerRadius,a=t.outerRadius,l=t.clipSector):(o=e,s=e,r=i.innerRadius,a=i.outerRadius),null!==l&&void 0!==l||(l=new m7(o,s,r,a));return{startAngle:o,endAngle:s,innerRadius:r,outerRadius:a,clipSector:l,phase:f7.NODE_UPDATE_STATE_TO_PHASE_MAPPING[n]}}}}function y7(e,t){return{centerX:0,centerY:0,innerRadius:t.innerRadius,outerRadius:t.outerRadius,startAngle:t.startAngle,endAngle:t.endAngle,clipSector:t.clipSector}}var{DEFAULT_POLAR_DIRECTION_KEYS:b7,DEFAULT_POLAR_DIRECTION_NAMES:x7,PolarAxis:C7,diff:S7,groupAccumulativeValueProperty:w7,keyProperty:M7,normaliseGroupTo:k7,valueProperty:D7,fixNumericExtent:I7,resetLabelFn:A7,seriesLabelFadeInAnimation:L7,seriesLabelFadeOutAnimation:N7,animationValidation:T7,createDatumId:R7,CategoryScale:E7,Sector:P7,SectorBox:O7,motion:F7,updateLabelNode:z7,getItemStyles:B7}=uE,V7=class extends uE.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.angleKey=n.properties.angleKey,this.radiusKey=n.properties.radiusKey}},G7=class extends uE.PolarSeries{constructor(e){super({moduleCtx:e,categoryKey:"radiusValue",propertyKeys:b7,propertyNames:x7,canHaveAxes:!0,animationResetFns:{item:y7,label:A7}}),this.properties=new g7,this.NodeEvent=V7,this.groupScale=new E7,this.circleCache={r:0,cx:0,cy:0}}nodeFactory(){return new P7}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return{domain:[]};if(e===_u.Angle){const e=t.getDomain(this,"angleValue-end","value",i).domain,n=[Math.min(e[0],0),Math.max(e[1],0)];return{domain:I7(n)}}return t.getDomain(this,"radiusValue","key",i)}async processData(e){var t,i;const{angleKey:n,radiusKey:o,normalizedTo:s}=this.properties,r=!this.ctx.animationManager.isSkipped(),a=this.getStackId(),l="".concat(a,"-trailing"),d=[];Ka(s)&&d.push(k7([a,l],Math.abs(s))),this.needsDataModelDiff()&&this.processedData&&d.push(S7(this.id,this.processedData)),r&&d.push(T7());const c=this.visible?{}:{forceValue:0},u=null===(t=this.axes[_u.Radius])||void 0===t?void 0:t.scale.type,h=null===(i=this.axes[_u.Angle])||void 0===i?void 0:i.scale.type;await this.requestDataModel(e,this.data,{props:[M7(o,u,{id:"radiusValue"}),D7(n,h,p({id:"angleValue-raw",invalidValue:null},c)),...w7(n,"normal",p({id:"angleValue-end",rangeId:"angleValue-range",invalidValue:null,groupId:a,separateNegative:!0},c),h),...w7(n,"trailing",p({id:"angleValue-start",invalidValue:null,groupId:l,separateNegative:!0},c),h),...d],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,n=this.circleCache;return(e!==n.r||t!==n.cx||i!==n.cy)&&(this.circleCache={r:e,cx:t,cy:i},!0)}maybeRefreshNodeData(){var e,t;(this.didCircleChange()||this.nodeDataRefresh)&&(this.contextNodeData=this.createNodeData(),this.nodeData=null!==(e=null===(t=this.contextNodeData)||void 0===t?void 0:t.nodeData)&&void 0!==e?e:[],this.nodeDataRefresh=!1)}getAxisInnerRadius(){const e=this.axes[_u.Radius];return e instanceof C7?this.radius*e.innerRadiusRatio:0}createNodeData(){var e,t,i;const{processedData:n,dataModel:o}=this;if(!o||!n||"grouped"!==n.type)return;const s=this.axes[_u.Angle],r=this.axes[_u.Radius],a=null===s||void 0===s?void 0:s.scale,l=null===r||void 0===r?void 0:r.scale;if(!a||!l)return;const d=o.resolveKeysById(this,"radiusValue",n),c=o.resolveColumnById(this,"angleValue-start",n),u=o.resolveColumnById(this,"angleValue-end",n),h=o.resolveColumnById(this,"angleValue-raw",n),p=o.resolveProcessedDataIndexById(this,"angleValue-range");let g=0;r instanceof zG&&(g=r.groupPaddingInner);const{groupScale:m}=this,{index:f,visibleGroupCount:v}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);m.domain=Array.from({length:v}).map((e,t)=>String(t)),m.range=[0,Math.abs(null!==(e=l.bandwidth)&&void 0!==e?e:0)],m.paddingInner=v>1?g:0;const y=m.bandwidth>=1?m.bandwidth:m.rawBandwidth,b=s.isReversed(),x=r.isReversed(),C=x?this.radius:this.getAxisInnerRadius(),S=(x?this.getAxisInnerRadius():this.radius)+C,w=this.getSeriesDomain(_u.Angle).domain,{angleKey:M,radiusKey:k,angleName:D,radiusName:I,legendItemName:A,label:L}=this.properties,N=(e,t,i,n)=>{const o=this.getLabelText(t,e,M,"angle",w,L,{value:t,datum:e,angleKey:M,radiusKey:k,angleName:D,radiusName:I,legendItemName:A});if(o)return{x:i,y:n,text:o,textAlign:"center",textBaseline:"middle"}},T=[],R=B7((e,t,i)=>n6(this,e,t,i)),E={itemId:k,nodeData:T,labelData:T,styles:R};if(!this.visible)return E;const{dataSources:P}=n,O=null!==(t=null===(i=P.get(this.id))||void 0===i?void 0:i.data)&&void 0!==t?t:[];for(const{datumIndex:F,group:z}of o.forEachGroupDatum(this,n)){const e=O[F],t=d[F];if(null==t)return;const i=h[F],n=c[F],o=u[F],s=i>=0&&!Object.is(i,-0),r=z.aggregation[p][s?1:0],g=s===b;let v=a.convert(n,{clamp:!0}),x=a.convert(o,{clamp:!0}),C=a.convert(0,{clamp:!0}),w=a.convert(r,{clamp:!0});g&&([C,w]=[w,C],[v,x]=[x,v]);const M=S-l.convert(t)+m.convert(String(f)),k=M+y,D=(M+k)/2,I=v+Gp(v,x)/2,A=Math.cos(I)*D,L=Math.sin(I)*D,R=this.properties.label.enabled?N(e,i,A,L):void 0,E=new O7(v,x,M,k);T.push({series:this,datum:e,datumIndex:F,point:{x:A,y:L,size:0},midPoint:{x:A,y:L},label:R,angleValue:i,radiusValue:t,innerRadius:M,outerRadius:k,startAngle:C,endAngle:w,clipSector:E,reversed:g,index:F})}return E}update(e){let{seriesRect:t}=e;const i=this.checkResize(t);this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),i&&this.animationState.transition("resize"),this.animationState.transition("update")}updateSectorSelection(e,t){var i;let n=[];const o=null===(i=this.ctx.highlightManager)||void 0===i?void 0:i.getActiveHighlight();t?null!==o&&void 0!==o&&o.datum&&o.series===this&&n.push(o):n=this.nodeData;const{contextNodeData:s}=this;if(!s)return;const r=this.ctx.highlightManager.getActiveHighlight(),a=this.getShapeFillBBox(),l=this.hasItemStylers();e.update(n,void 0,e=>this.getDatumId(e)).each((e,i)=>{var n;const d=vU(i);if(null==d)return;if(l){const e=this.getHighlightState(o,t,i.datumIndex);i.style=n6(this,i,t,e)}const c=null!==(n=i.style)&&void 0!==n?n:s.styles[this.getHighlightState(r,t,i.datumIndex)],u=c.cornerRadius,h=c.fill,p=$v(h)&&"item"!==h.bounds?{centerX:0,centerY:0}:void 0;e.setStyleProperties(c,a,p),e.lineJoin="round",e.inset=null==e.stroke?0:e.strokeWidth/2,e.startInnerCornerRadius=d.reversed?u:0,e.startOuterCornerRadius=d.reversed?u:0,e.endInnerCornerRadius=d.reversed?0:u,e.endOuterCornerRadius=d.reversed?0:u,t&&(e.startAngle=i.startAngle,e.endAngle=i.endAngle,e.clipSector=i.clipSector,e.innerRadius=i.innerRadius,e.outerRadius=i.outerRadius)})}updateLabels(){var e;const{properties:t}=this,i=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),n=(null===i||void 0===i?void 0:i.series)===this&&null!==i&&void 0!==i&&i.datum?i:void 0,o=n?[n]:[];this.labelSelection.update(this.nodeData).each((e,n)=>{var o;const s=!1;z7(this,e,t,t.label,n.label,s,i),e.fillOpacity=null!==(o=this.getHighlightStyle(s,n.datumIndex).opacity)&&void 0!==o?o:1}),this.highlightLabelSelection.update(o,void 0,e=>this.getDatumId(e)).each((e,n)=>{var o;const s=!0;z7(this,e,t,t.label,n.label,s,i),e.fillOpacity=null!==(o=this.getHighlightStyle(s,n.datumIndex).opacity)&&void 0!==o?o:1})}getBarTransitionFunctions(){var e;const t=null===(e=this.axes[_u.Angle])||void 0===e?void 0:e.scale;let i=0;if(!t)return v7(i);const n=Math.min(t.domain[0],t.domain[1]),o=Math.max(t.domain[0],t.domain[1]);return n<=0&&o>=0&&(i=t.convert(0)),v7(i)}animateEmptyUpdateReady(){const{labelSelection:e}=this,t=this.getBarTransitionFunctions();F7.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],t),L7(this,"labels",this.ctx.animationManager,e,this.highlightLabelSelection)}animateClearingUpdateEmpty(){const{itemSelection:e}=this,{animationManager:t}=this.ctx,i=this.getBarTransitionFunctions();F7.fromToMotion(this.id,"datums",t,[e],i),N7(this,"labels",t,this.labelSelection,this.highlightLabelSelection)}getTooltipContent(e){var t,i;const{id:n,dataModel:o,processedData:s,axes:r,properties:a}=this,{angleKey:l,angleName:d,radiusKey:c,radiusName:u,legendItemName:h,tooltip:g}=a,m=r[_u.Angle],f=r[_u.Radius],v=null===(t=this.nodeData)||void 0===t?void 0:t[e];if(!o||!s||!m||!f||!v)return;const y=null===(i=s.dataSources.get(this.id))||void 0===i?void 0:i.data[e],b=o.resolveKeysById(this,"radiusValue",s)[e],x=o.resolveColumnById(this,"angleValue-raw",s)[e];if(null==b)return;const C=n6(this,v,!1);return this.formatTooltipWithContext(g,{heading:this.getAxisValueText(f,"tooltip",b,y,c,void 0),symbol:this.legendItemSymbol(),data:[{label:d,fallbackLabel:l,value:this.getAxisValueText(m,"tooltip",x,y,l,void 0),missing:uE.isTooltipValueMissing(x)}]},p({seriesId:n,datum:y,title:d,angleKey:l,angleName:d,radiusKey:c,radiusName:u,legendItemName:h},C))}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.itemSelection.nodes())}legendItemSymbol(){const{fill:e,stroke:t,fillOpacity:i,strokeOpacity:n,strokeWidth:o,lineDash:s,lineDashOffset:r}=i6(this,!1,uE.HighlightState.None),a={fill:null!==e&&void 0!==e?e:"rgba(0, 0, 0, 0)",stroke:null!==t&&void 0!==t?t:"rgba(0, 0, 0, 0)",fillOpacity:i,strokeOpacity:n,strokeWidth:o,lineDash:s,lineDashOffset:r};return $v(a.fill)&&(a.fill=p(p({},a.fill),{},{gradient:"linear",rotation:0,reverse:!1})),{marker:a}}getLegendData(e){var t;if("category"!==e)return[];const{id:i,visible:n}=this,{angleKey:o,angleName:s,legendItemName:r,showInLegend:a}=this.properties;return[{legendType:"category",id:i,itemId:o,seriesId:i,enabled:n,label:{text:null!==(t=null!==r&&void 0!==r?r:s)&&void 0!==t?t:o},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!a}]}getDatumId(e){return R7(e.radiusValue)}computeLabelsBBox(){return null}getStackId(){var e,t;const i=null!==(e=null===(t=this.seriesGrouping)||void 0===t?void 0:t.groupIndex)&&void 0!==e?e:this.id;return"radialBar-stack-".concat(i,"-xValues")}hasItemStylers(){return null!=this.properties.itemStyler||null!=this.properties.styler||null!=this.properties.label.itemStyler}};G7.className="RadialBarSeries",G7.type="radial-bar";var{radialBarSeriesThemeableOptionsDef:H7}=uE,j7=p(p(p({},Yc),H7),{},{type:pd(jd("radial-bar")),angleKey:pd(Ad),radiusKey:pd(Ad),angleName:Ad,radiusName:Ad,legendItemName:Ad,grouped:Cd,stacked:Cd,stackGroup:Ad,normalizedTo:Dd});j7.angleKeyAxis=gd(Ad),j7.radiusKeyAxis=gd(Ad);var{FILL_GRADIENT_CONIC_SERIES_DEFAULTS:W7,FILL_IMAGE_DEFAULTS:_7,FILL_PATTERN_DEFAULTS:K7}=uE,U7={series:{fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",W7],["image",_7],["pattern",K7]]},stroke:{$palette:"stroke"},strokeWidth:{$isUserOption:["./stroke",1,0]},label:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"}}),highlight:uE.multiSeriesHighlightStyle()},axes:{[Bh.RADIUS_CATEGORY]:{innerRadiusRatio:.2,groupPaddingInner:.2,paddingInner:.2,paddingOuter:.1}}},Y7={type:"series",name:"radial-bar",chartType:"polar",enterprise:!0,stackable:!0,groupable:!0,version:GC,dependencies:[gz],options:j7,defaultAxes:{angle:{type:Bh.ANGLE_NUMBER},radius:{type:Bh.RADIUS_CATEGORY}},axisKeys:{[_u.Angle]:"angleKeyAxis",[_u.Radius]:"radiusKeyAxis"},themeTemplate:U7,create:e=>new G7(e)},$7=class extends A6{};kV([ru],$7.prototype,"columnWidthRatio",2),kV([ru],$7.prototype,"maxColumnWidthRatio",2);var{PolarAxis:Z7,RadialColumnShape:X7,getRadialColumnWidth:q7}=uE,Q7=class extends M6{constructor(e){super(e,{animationResetFns:{item:R6}}),this.properties=new $7}getStackId(){var e,t;const i=null!==(e=null===(t=this.seriesGrouping)||void 0===t?void 0:t.groupIndex)&&void 0!==e?e:this.id;return"radarColumn-stack-".concat(i,"-yValues")}nodeFactory(){return new X7}getColumnTransitionFunctions(){return function(e){const t=N6();return{toFn:(i,n,o)=>{const{startAngle:s,endAngle:r}=t.to(n);let a,l,d,c,u;return"removed"===o?(a=i.innerRadius,l=i.innerRadius,d=i.columnWidth,c=i.axisInnerRadius,u=i.axisOuterRadius):(a=Number.isNaN(n.innerRadius)?e:n.innerRadius,l=Number.isNaN(n.outerRadius)?e:n.outerRadius,d=Number.isNaN(n.columnWidth)?i.columnWidth:n.columnWidth,c=n.axisInnerRadius,u=n.axisOuterRadius),{innerRadius:a,outerRadius:l,columnWidth:d,axisInnerRadius:c,axisOuterRadius:u,startAngle:s,endAngle:r}},fromFn:(i,n,o)=>{o=T6(i,n,o),t.calculate(i,n,o);const{startAngle:s,endAngle:r}=t.from(n);let a,l,d,c,u;return"removed"===o||"updated"===o?(a=i.innerRadius,l=i.outerRadius,d=i.columnWidth,c=i.axisInnerRadius,u=i.axisOuterRadius):(a=e,l=e,d=n.columnWidth,c=n.axisInnerRadius,u=n.axisOuterRadius),{innerRadius:a,outerRadius:l,columnWidth:d,axisInnerRadius:c,axisOuterRadius:u,startAngle:s,endAngle:r,phase:L6.NODE_UPDATE_STATE_TO_PHASE_MAPPING[o]}}}}(this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius())}isRadiusAxisCircle(){const e=this.axes[_u.Radius];return e instanceof Z7&&"circle"===e.shape}updateItemPath(e,t,i){e.isBeveled=this.isRadiusAxisCircle(),i&&(e.innerRadius=t.innerRadius,e.outerRadius=t.outerRadius,e.startAngle=t.startAngle,e.endAngle=t.endAngle,e.columnWidth=t.columnWidth,e.axisInnerRadius=t.axisInnerRadius,e.axisOuterRadius=t.axisOuterRadius)}getColumnWidth(e,t){const{columnWidthRatio:i=.5,maxColumnWidthRatio:n=.5}=this.properties;return q7(e,t,this.radius,i,n)}hasItemStylers(){return null!=this.properties.itemStyler||null!=this.properties.styler||null!=this.properties.label.itemStyler}};Q7.className="RadialColumnSeries",Q7.type="radial-column";var{radialColumnSeriesThemeableOptionsDef:J7}=uE,e9=p(p(p({},Yc),J7),{},{type:pd(jd("radial-column")),angleKey:pd(Ad),radiusKey:pd(Ad),angleName:Ad,radiusName:Ad,legendItemName:Ad,grouped:Cd,stacked:Cd,stackGroup:Ad,normalizedTo:Dd});e9.angleKeyAxis=gd(Ad),e9.radiusKeyAxis=gd(Ad);var{FILL_GRADIENT_RADIAL_SERIES_DEFAULTS:t9,FILL_IMAGE_DEFAULTS:i9,FILL_PATTERN_DEFAULTS:n9}=uE,o9={series:{fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",t9],["image",i9],["pattern",n9]]},stroke:{$palette:"stroke"},columnWidthRatio:.5,maxColumnWidthRatio:.5,strokeWidth:{$isUserOption:["./stroke",1,0]},label:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}),highlight:uE.multiSeriesHighlightStyle()},axes:{[Bh.ANGLE_CATEGORY]:{shape:{$findFirstSiblingNotOperation:Vh.CIRCLE},groupPaddingInner:0,paddingInner:0,label:{spacing:10}},[Bh.RADIUS_NUMBER]:{shape:{$findFirstSiblingNotOperation:Vh.CIRCLE},innerRadiusRatio:.5}}},s9={type:"series",name:"radial-column",chartType:"polar",enterprise:!0,stackable:!0,groupable:!0,version:GC,dependencies:[gz],options:e9,defaultAxes:{angle:{type:Bh.ANGLE_CATEGORY},radius:{type:Bh.RADIUS_NUMBER}},axisKeys:{[_u.Angle]:"angleKeyAxis",[_u.Radius]:"radiusKeyAxis"},themeTemplate:o9,create:e=>new Q7(e)},{SvgPath:r9,Rotatable:a9,Translatable:l9,Scalable:d9}=uE,c9=class extends(a9(d9(l9(r9)))){constructor(){super(...arguments),this.scalingCenterX=.5,this.scalingCenterY=.5,this.rotationCenterX=.5,this.rotationCenterY=.5}};c9.defaultPathData="M0.50245 0.53745C0.481767 0.53745 0.465 0.520683 0.465 0.5C0.465 0.479317 0.481767 0.46255 0.50245 0.46255L1 0.500012L0.50245 0.53745Z";var{getColorStops:u9}=uE,{makeSeriesTooltip:h9,SeriesProperties:p9,AxisLabel:g9,Label:m9}=uE,f9=class extends m9{};kV([ru],f9.prototype,"spacing",2);var v9=class extends kh{constructor(){super(...arguments),this.label=new f9}getStyle(){const{fill:e="black",fillOpacity:t=1,stroke:i="black",strokeWidth:n=0,strokeOpacity:o=1,lineDash:s=[0],lineDashOffset:r=0}=this;return{fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:o,lineDash:s,lineDashOffset:r}}};kV([ru],v9.prototype,"text",2),kV([ru],v9.prototype,"value",2),kV([ru],v9.prototype,"shape",2),kV([ru],v9.prototype,"placement",2),kV([ru],v9.prototype,"spacing",2),kV([ru],v9.prototype,"size",2),kV([ru],v9.prototype,"rotation",2),kV([ru],v9.prototype,"fill",2),kV([ru],v9.prototype,"fillOpacity",2),kV([ru],v9.prototype,"stroke",2),kV([ru],v9.prototype,"strokeWidth",2),kV([ru],v9.prototype,"strokeOpacity",2),kV([ru],v9.prototype,"lineDash",2),kV([ru],v9.prototype,"lineDashOffset",2),kV([ru],v9.prototype,"label",2);var y9=class extends kh{constructor(){super(...arguments),this.enabled=!0,this.fills=new Dh(uE.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}getStyle(e,t){const{enabled:i,fill:n,fills:o,fillMode:s,fillOpacity:r,stroke:a,strokeWidth:l,strokeOpacity:d,lineDash:c,lineDashOffset:u}=this;return{fill:i?null!==n&&void 0!==n?n:D9(o,s,e,t):"none",fillOpacity:r,stroke:a,strokeWidth:l,strokeOpacity:d,lineDash:c,lineDashOffset:u}}};kV([ru],y9.prototype,"enabled",2),kV([ru],y9.prototype,"fills",2),kV([ru],y9.prototype,"fillMode",2),kV([ru],y9.prototype,"fill",2),kV([ru],y9.prototype,"fillOpacity",2),kV([ru],y9.prototype,"stroke",2),kV([ru],y9.prototype,"strokeWidth",2),kV([ru],y9.prototype,"strokeOpacity",2),kV([ru],y9.prototype,"lineDash",2),kV([ru],y9.prototype,"lineDashOffset",2);var b9=class extends kh{constructor(){super(...arguments),this.values=void 0,this.step=void 0,this.minSpacing=0,this.maxSpacing=1e3}};kV([ru],b9.prototype,"values",2),kV([ru],b9.prototype,"step",2),kV([ru],b9.prototype,"minSpacing",2),kV([ru],b9.prototype,"maxSpacing",2);var x9=class extends g9{},C9=class extends kh{constructor(){super(...arguments),this.min=0,this.max=1,this.fills=new Dh(uE.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.defaultFill="black",this.interval=new b9,this.label=new x9}getStyle(e,t,i){var n;const{fill:o,fills:s,defaultFill:r,fillMode:a,fillOpacity:l,stroke:d,strokeWidth:c,strokeOpacity:u,lineDash:h,lineDashOffset:p}=this;return{fill:null!==(n=null!==o&&void 0!==o?o:e&&0===s.length?r:void 0)&&void 0!==n?n:D9(s,a,t,i),fillOpacity:l,stroke:d,strokeWidth:c,strokeOpacity:u,lineDash:h,lineDashOffset:p}}};kV([ru],C9.prototype,"min",2),kV([ru],C9.prototype,"max",2),kV([ru],C9.prototype,"fills",2),kV([ru],C9.prototype,"fillMode",2),kV([ru],C9.prototype,"fill",2),kV([ru],C9.prototype,"fillOpacity",2),kV([ru],C9.prototype,"stroke",2),kV([ru],C9.prototype,"strokeWidth",2),kV([ru],C9.prototype,"strokeOpacity",2),kV([ru],C9.prototype,"lineDash",2),kV([ru],C9.prototype,"lineDashOffset",2),kV([ru],C9.prototype,"defaultFill",2),kV([ru],C9.prototype,"interval",2),kV([ru],C9.prototype,"label",2);var S9=class extends kh{constructor(){super(...arguments),this.enabled=!0,this.spacing=0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};kV([ru],S9.prototype,"enabled",2),kV([ru],S9.prototype,"radiusRatio",2),kV([ru],S9.prototype,"spacing",2),kV([ru],S9.prototype,"fill",2),kV([ru],S9.prototype,"fillOpacity",2),kV([ru],S9.prototype,"stroke",2),kV([ru],S9.prototype,"strokeWidth",2),kV([ru],S9.prototype,"strokeOpacity",2),kV([ru],S9.prototype,"lineDash",2),kV([ru],S9.prototype,"lineDashOffset",2);var w9=class extends eZ{};kV([ru],w9.prototype,"text",2);var M9=class extends tZ{};kV([ru],M9.prototype,"text",2);var k9=class extends p9{constructor(){super(...arguments),this.startAngle=0,this.endAngle=0,this.segmentation=new Q2,this.defaultColorRange=[],this.targets=new Dh(v9),this.defaultTarget=new v9,this.outerRadiusRatio=1,this.innerRadiusRatio=1,this.cornerRadius=0,this.cornerMode="container",this.spacing=0,this.scale=new C9,this.bar=new y9,this.needle=new S9,this.label=new w9,this.secondaryLabel=new M9,this.tooltip=h9()}};function D9(e,t,i,n){const{domain:o,range:s}=n,[r,a]=s,l=Pp((r+a)/2+Math.PI),d=Op(a-r);return{type:"gradient",gradient:"conic",colorSpace:"oklch",colorStops:u9(e,i,o,t).map(e=>{let{color:t,stop:i}=e;i=Math.min(Math.max(i,0),1);return i=(r+d*i-l)/(2*Math.PI),i=(i%1+1)%1,{stop:i,color:t}}),bounds:"series",rotation:Vp(l)+90}}kV([ru],k9.prototype,"value",2),kV([ru],k9.prototype,"startAngle",2),kV([ru],k9.prototype,"endAngle",2),kV([ru],k9.prototype,"segmentation",2),kV([ru],k9.prototype,"defaultColorRange",2),kV([ru],k9.prototype,"targets",2),kV([ru],k9.prototype,"defaultTarget",2),kV([ru],k9.prototype,"outerRadiusRatio",2),kV([ru],k9.prototype,"innerRadiusRatio",2),kV([ru],k9.prototype,"outerRadius",2),kV([ru],k9.prototype,"innerRadius",2),kV([ru],k9.prototype,"cornerRadius",2),kV([ru],k9.prototype,"cornerMode",2),kV([ru],k9.prototype,"spacing",2),kV([ru],k9.prototype,"scale",2),kV([ru],k9.prototype,"bar",2),kV([ru],k9.prototype,"needle",2),kV([ru],k9.prototype,"label",2),kV([ru],k9.prototype,"secondaryLabel",2),kV([ru],k9.prototype,"tooltip",2);var{SectorBox:I9}=uE;function A9(e,t,i){return Math.max(e,i.startAngle)<=Math.min(t,i.endAngle)}function L9(e){return null!=e.clipStartAngle&&null!=e.clipEndAngle}function N9(e,t){const{clipStartAngle:i,clipEndAngle:n,innerRadius:o,outerRadius:s}=e;return new I9(i,t?i:n,o,s)}function T9(e,t){const i=e?"initial":"update";return{node:{fromFn(t,n){const o=t.previousDatum;let{startAngle:s,endAngle:r}=null!==o&&void 0!==o?o:n;const a=null!=o&&L9(o)?N9(o,e):void 0,l=L9(n)?N9(n,e):void 0;let d;return null!=a&&null!=l?d=a:null==a&&null!=l?(d=l,s=n.startAngle,r=n.endAngle):null!=a&&null==l?(d=void 0,s=n.startAngle,r=n.endAngle):e&&(r=s),{startAngle:s,endAngle:r,clipSector:d,phase:i}},toFn(e,t){const{startAngle:i,endAngle:n}=t;let o;return L9(t)&&(o=N9(t,!1)),{startAngle:i,endAngle:n,clipSector:o}},applyFn(e,t){const{startAngle:i,endAngle:n}=t;let{clipSector:o}=t;null!=o&&(o=new I9(Math.max(i,o.startAngle),Math.min(n,o.endAngle),o.innerRadius,o.outerRadius));const s=null==o||A9(i,n,o);e.startAngle=i,e.endAngle=n,e.clipSector=o,e.visible=s}},needle:{fromFn(n){var o;let{angle:s}=null!==(o=n.previousDatum)&&void 0!==o?o:n.datum;return e&&(s=t),{rotation:s,phase:i}},toFn(e,t){const{angle:i}=t;return{rotation:i}}}}}function R9(e,t){const{startAngle:i,endAngle:n}=t,o=function(e){const{startAngle:t,endAngle:i,clipStartAngle:n,clipEndAngle:o,innerRadius:s,outerRadius:r}=e;if(null!=n&&null!=o)return new I9(Math.max(n,t),Math.min(o,i),s,r)}(t);return{startAngle:i,endAngle:n,clipSector:o,visible:null==o||A9(i,n,o)}}function E9(e,t){const{angle:i}=t;return{rotation:i}}var P9={top:0,middle:.5,bottom:1};var{fromToMotion:O9,resetMotion:F9,SeriesNodePickMode:z9,createDatumId:B9,sectorBox:V9,BBox:G9,Group:H9,PointerEvents:j9,Selection:W9,Sector:_9,SectorBox:K9,Text:U9,Marker:Y9}=uE,$9={inside:90,middle:0,outside:-90},Z9=[{textAlign:"left",textBaseline:"top"},{textAlign:"right",textBaseline:"top"},{textAlign:"right",textBaseline:"bottom"},{textAlign:"left",textBaseline:"bottom"}],X9=[{textAlign:"right",textBaseline:"bottom"},{textAlign:"left",textBaseline:"bottom"},{textAlign:"left",textBaseline:"top"},{textAlign:"right",textBaseline:"top"}],q9=class extends uE.Series{constructor(e){super({moduleCtx:e,pickModes:[z9.EXACT_SHAPE_MATCH,z9.NEAREST_NODE]}),this.centerX=0,this.centerY=0,this.radius=0,this.textAlign="center",this.verticalAlign="middle",this.properties=new k9,this.scale=new dG,this.scaleGroup=this.contentGroup.appendChild(new H9({name:"scaleGroup"})),this.itemGroup=this.contentGroup.appendChild(new H9({name:"itemGroup"})),this.itemNeedleGroup=this.contentGroup.appendChild(new H9({name:"itemNeedleGroup"})),this.itemTargetGroup=this.contentGroup.appendChild(new H9({name:"itemTargetGroup"})),this.itemTargetLabelGroup=this.contentGroup.appendChild(new H9({name:"itemTargetLabelGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new H9({name:"itemLabelGroup"})),this.highlightTargetGroup=this.highlightGroup.appendChild(new H9({name:"itemTargetLabelGroup"})),this.tickGroup=this.contentGroup.appendChild(new H9({name:"tickGroup"})),this.scaleSelection=W9.select(this.scaleGroup,()=>this.nodeFactory()),this.datumSelection=W9.select(this.itemGroup,()=>this.nodeFactory()),this.needleSelection=W9.select(this.itemNeedleGroup,c9),this.targetSelection=W9.select(this.itemTargetGroup,()=>this.markerFactory()),this.targetLabelSelection=W9.select(this.itemTargetLabelGroup,U9),this.labelSelection=W9.select(this.itemLabelGroup,U9),this.highlightTargetSelection=W9.select(this.highlightTargetGroup,()=>this.markerFactory()),this.tickSelection=W9.select(this.tickGroup,uE.TransformableText),this.datumUnion=new _2,this.animationState=new Vm("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.animateReadyResize(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateWaitingUpdateReady()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty"},reset:"empty",skip:"ready"}}),this.scaleGroup.pointerEvents=j9.None,this.tickGroup.pointerEvents=j9.None,this.itemNeedleGroup.pointerEvents=j9.None,this.itemLabelGroup.pointerEvents=j9.None}get hasData(){return null!=this.properties.value}nodeFactory(){return new _9}markerFactory(){const e=new Y9;return e.size=1,e}processData(){this.nodeDataRefresh=!0,this.animationState.transition("updateData")}formatLabel(e){const{min:t,max:i}=this.properties.scale;return U2(e,{min:t,max:i})}layoutScale(){var e,t,i;const{scale:n,properties:o}=this,{seriesRectWidth:s,seriesRectHeight:r}=this.nodeDataDependencies,{scale:a,outerRadius:l}=this.properties,{min:d,max:c,label:u,interval:h}=a,p=Bp(o.startAngle-90),g=Bp(o.endAngle-90),m=Op(g-p)>Math.PI,f=m||zp(1.5*Math.PI,p,g),v=m||zp(0*Math.PI,p,g),y=m||zp(.5*Math.PI,p,g),b=m||zp(1*Math.PI,p,g);let x,C;x=b&&!v?"right":!b&&v?"left":"center",C=f&&!y?"bottom":!f&&y?"top":"middle";const S=V9({startAngle:p,endAngle:g,innerRadius:0,outerRadius:.5}),w=2*-(S.x+S.width/2),M=2*-(S.y+S.height/2),k=Math.min(s/S.width,r/S.height);n.domain=[d,c],n.range=[p,g],n.arcLength=k/2;const{maxSpacing:D,minSpacing:I}=h,{arcLength:A}=n,L=D?Math.floor(A/D):1,N=I?Math.floor(A/I):1/0,T=Math.floor(4/Math.PI*Math.abs(n.range[0]-n.range[1])),R=Math.max(L,Math.min(N,T)),E=null!==(e=null!==(t=h.values)&&void 0!==t?t:null===(i=n.ticks({nice:[!1,!1],interval:h.step,minTickCount:L,maxTickCount:N,tickCount:R}))||void 0===i?void 0:i.ticks)&&void 0!==e?e:[],P=Xf(E,"string"===typeof u.format?u.format:void 0),O=Wm(u),F=E.map((e,t)=>{let i;if(u.formatter&&(i=x0(this.ctx,u.formatter,{value:e,index:t,domain:n.domain,boundSeries:void 0})),null!==i&&void 0!==i||(i=null===P||void 0===P?void 0:P(e)),null==i)return;const{width:o,height:s}=Ua(i)?_m(i,u):O.measureLines(Gl(i));return{index:t,value:e,text:i,width:o,height:s}}).filter(e=>null!=e),z=F.reduce((e,t)=>Math.max(e,t.width),0),B=F.reduce((e,t)=>Math.max(e,t.height),0),V=u.enabled?Math.max(z,B)+u.spacing:0,G=Math.max(.5*k-V,0),H=null!==l&&void 0!==l?l:G;return this.centerX=s/2+w*H,this.centerY=r/2+M*H,this.radius=H,this.textAlign=x,this.verticalAlign=C,F}getShapeFillBBox(){const{centerX:e,centerY:t,radius:i}=this,n=new G9(e-i,t-i,2*i,2*i);return{series:n,axis:n}}getTargets(){const{properties:e}=this,t=e.defaultTarget;return Array.from(e.targets).map(e=>{var i,n,o,s,r,a,l,d,c,u;const{text:h=t.text,value:p=(null!==(i=t.value)&&void 0!==i?i:0),shape:g=(null!==(n=t.shape)&&void 0!==n?n:"triangle"),rotation:m=(null!==(o=t.rotation)&&void 0!==o?o:0),placement:f=(null!==(s=t.placement)&&void 0!==s?s:"middle"),spacing:v=(null!==(r=t.spacing)&&void 0!==r?r:0),size:y=(null!==(a=t.size)&&void 0!==a?a:0)}=e,{enabled:b=t.label.enabled,color:x=(null!==(l=t.label.color)&&void 0!==l?l:"black"),fontStyle:C=(null!==(d=t.label.fontStyle)&&void 0!==d?d:"normal"),fontWeight:S=(null!==(c=t.label.fontWeight)&&void 0!==c?c:"normal"),fontSize:w=t.label.fontSize,fontFamily:M=t.label.fontFamily,spacing:k=(null!==(u=t.label.spacing)&&void 0!==u?u:0)}=e.label;return{text:h,value:p,shape:g,placement:f,spacing:v,size:y,rotation:m,label:{enabled:b,color:x,fontStyle:C,fontWeight:S,fontSize:w,fontFamily:M,spacing:k},style:e.getStyle()}})}getTargetRadius(e){const{radius:t,properties:i}=this,{innerRadiusRatio:n,outerRadiusRatio:o}=i,{placement:s,spacing:r,size:a}=e,l=t*o,d=t*n;switch(s){case"inside":return Math.max(d-r-a/2,0);case"outside":return l+r+a/2;default:return(d+l)/2}}getTargetLabel(e){const{scale:t}=this,{value:i,size:n,placement:o,label:s}=e,{spacing:r,color:a,fontStyle:l,fontWeight:d,fontSize:c,fontFamily:u}=s,h=t.convert(i),p=Math.trunc(Pp(h)/(Math.PI/2)),g=n/2+r;let m,f,v,y;switch(o){case"outside":({textAlign:m,textBaseline:f}=Z9[p]),v=g*Math.cos(h),y=g*Math.sin(h);break;case"inside":({textAlign:m,textBaseline:f}=X9[p]),v=-g*Math.cos(h),y=-g*Math.sin(h);break;default:m="center",f="bottom",v=0,y=-g}return{offsetX:v,offsetY:y,fill:a,textAlign:m,textBaseline:f,fontStyle:l,fontWeight:d,fontSize:c,fontFamily:u,lineHeight:void 0}}createNodeData(){const e=this.layoutScale(),{id:t,scale:i,properties:n,radius:o,centerX:s,centerY:r}=this,{value:a,innerRadiusRatio:l,outerRadiusRatio:d,segmentation:c,cornerRadius:u,cornerMode:h,needle:p,bar:g,scale:m,label:f,secondaryLabel:v}=n,{outerRadius:y=o*d,innerRadius:b=o*l,defaultColorRange:x}=n,C=this.getTargets(),S=[],w=[],M=[],k=[],D=[],I="item"===h,A=i.convert(i.domain[0]),L=i.convert(a),N=Math.ceil(Op(L-A)*o);let T=c.enabled?c.interval.getSegments(i,N):void 0;const R=g.getStyle(x,i),E=m.getStyle(g.enabled,x,i);if(null==T&&I){const e={value:a,segmentStart:Math.min(...i.domain),segmentEnd:Math.max(...i.domain)},t=Math.min(u,(y-b)/2)/((b+y)/2);S.push({series:this,itemId:"value",datum:e,datumIndex:{type:0},type:0,centerX:s,centerY:r,outerRadius:y,innerRadius:b,startAngle:A-t,endAngle:L+t,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:u,endCornerRadius:u,style:R}),D.push({series:this,itemId:"scale",datum:e,datumIndex:{type:0},type:0,centerX:s,centerY:r,outerRadius:y,innerRadius:b,startAngle:i.range[0]-t,endAngle:i.range[1]+t,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:u,endCornerRadius:u,style:E})}else{null!==T&&void 0!==T||(T=i.domain);for(let e=0;e<T.length-1;e++){const t=T[e],n=T[e+1],o={value:a,segmentStart:t,segmentEnd:n},l=0===e,d=e===T.length-2,c=i.convert(t),h=i.convert(n);S.push({series:this,itemId:"value-".concat(e),datum:o,datumIndex:{type:0},type:0,centerX:s,centerY:r,outerRadius:y,innerRadius:b,startAngle:c,endAngle:h,clipStartAngle:A,clipEndAngle:L,startCornerRadius:I||l?u:0,endCornerRadius:I||d?u:0,style:R}),D.push({series:this,itemId:"scale-".concat(e),datum:o,datumIndex:{type:0},type:0,centerX:s,centerY:r,outerRadius:y,innerRadius:b,startAngle:c,endAngle:h,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:I||l?u:0,endCornerRadius:I||d?u:0,style:E})}}if(!p.enabled&&f.enabled){const{text:e,color:t,fontSize:i,minimumFontSize:n,fontStyle:o,fontWeight:l,fontFamily:d,lineHeight:c,formatter:u=e=>this.formatLabel(e.value)}=f;k.push({label:"primary",centerX:s,centerY:r,text:e,value:a,fill:t,fontSize:i,minimumFontSize:n,fontStyle:o,fontWeight:l,fontFamily:d,lineHeight:c,formatter:u})}if(!p.enabled&&v.enabled){const{text:e,color:t,fontSize:i,minimumFontSize:n,fontStyle:o,fontWeight:l,fontFamily:d,lineHeight:c,formatter:u}=v;k.push({label:"secondary",centerX:s,centerY:r,text:e,value:a,fill:t,fontSize:i,minimumFontSize:n,fontStyle:o,fontWeight:l,fontFamily:d,lineHeight:c,formatter:u})}if(p.enabled){let e=null==p.radiusRatio?b:o*p.radiusRatio;e=Math.max(e-p.spacing,0);const t=i.convert(a);M.push({centerX:s,centerY:r,radius:e,angle:t,series:this})}for(let P=0;P<C.length;P+=1){const e=C[P],{value:t,text:n,size:o,shape:a,style:l}=e;if(t<Math.min(...i.domain)||t>Math.max(...i.domain))continue;const d=this.getTargetRadius(e),c=i.convert(t),u=Bp(e.rotation+$9[e.placement]);w.push({series:this,itemId:"target-".concat(P),midPoint:{x:d*Math.cos(c)+s,y:d*Math.sin(c)+r},datum:{value:t},datumIndex:{type:1,index:P},type:1,value:t,text:n,centerX:s,centerY:r,shape:a,radius:d,angle:c,rotation:u,size:o,label:this.getTargetLabel(e),style:l})}return{itemId:t,nodeData:S,needleData:M,targetData:w,labelData:k,scaleData:D,tickData:e}}updateSelections(e){(this.nodeDataRefresh||e)&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}highlightDatum(e){if(null!=e&&e.series===this&&1===e.type)return e}update(e){var t,i,n,o,s,r,a,l,d,c,u,h;let{seriesRect:p}=e;const{datumSelection:g,labelSelection:m,needleSelection:f,targetSelection:v,targetLabelSelection:y,scaleSelection:b,highlightTargetSelection:x,tickSelection:C}=this,S=this.checkResize(p);this.updateSelections(S),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();const w=null!==(t=null===(i=this.contextNodeData)||void 0===i?void 0:i.nodeData)&&void 0!==t?t:[],M=null!==(n=null===(o=this.contextNodeData)||void 0===o?void 0:o.labelData)&&void 0!==n?n:[],k=null!==(s=null===(r=this.contextNodeData)||void 0===r?void 0:r.needleData)&&void 0!==s?s:[],D=null!==(a=null===(l=this.contextNodeData)||void 0===l?void 0:l.targetData)&&void 0!==a?a:[],I=null!==(d=null===(c=this.contextNodeData)||void 0===c?void 0:c.scaleData)&&void 0!==d?d:[],A=null!==(u=null===(h=this.contextNodeData)||void 0===h?void 0:h.tickData)&&void 0!==u?u:[],L=this.highlightDatum(this.ctx.highlightManager.getActiveHighlight());this.scaleSelection=this.updateScaleSelection({scaleData:I,scaleSelection:b}),this.updateScaleNodes({scaleSelection:b}),this.needleSelection=this.updateNeedleSelection({needleData:k,needleSelection:f}),this.updateNeedleNodes({needleSelection:f}),this.targetSelection=this.updateTargetSelection({targetData:D,targetSelection:v}),this.updateTargetStyles({targetSelection:v,isHighlight:!1}),this.updateTargetNodes({targetSelection:v}),this.targetLabelSelection=this.updateTargetLabelSelection({targetData:D,targetLabelSelection:y}),this.updateTargetLabelNodes({targetLabelSelection:y}),this.datumSelection=this.updateDatumSelection({nodeData:w,datumSelection:g}),this.updateDatumNodes({datumSelection:g}),this.labelSelection=this.updateLabelSelection({labelData:M,labelSelection:m}),this.updateLabelNodes({labelSelection:m}),this.highlightTargetSelection=this.updateTargetSelection({targetData:null==L?[]:[L],targetSelection:x}),this.updateTargetStyles({targetSelection:x,isHighlight:!0}),this.updateTargetNodes({targetSelection:x}),this.tickSelection=this.updateTickSelection({tickData:A,tickSelection:C}),this.updateTickNodes({tickSelection:C}),S&&this.animationState.transition("resize"),this.animationState.transition("update")}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>B9(e.nodeData.length,t.itemId))}updateDatumNodes(e){var t;const{datumSelection:i}=e,{ctx:n,properties:o}=this,{segmentation:s}=o,r=null!==(t=s.spacing)&&void 0!==t?t:0,a=n.animationManager.isSkipped(),l=this.getShapeFillBBox();i.each((e,t)=>{const{centerX:i,centerY:n,innerRadius:o,outerRadius:s,startCornerRadius:d,endCornerRadius:c}=t;e.centerX=i,e.centerY=n,e.innerRadius=o,e.outerRadius=s,e.pointerEvents=this.properties.bar.enabled?uE.PointerEvents.All:uE.PointerEvents.None,e.setStyleProperties(t.style,l),e.startOuterCornerRadius=d,e.startInnerCornerRadius=d,e.endOuterCornerRadius=c,e.endInnerCornerRadius=c,e.radialEdgeInset=(r+e.strokeWidth)/2,e.concentricEdgeInset=e.strokeWidth/2,(a||null==e.previousDatum)&&e.setProperties(R9(0,t))}),this.datumUnion.update(i,this.itemGroup,uE.Sector,(e,t,i)=>{var n,o,s;null!==(n=e.clipSector)&&void 0!==n||(e.clipSector=new K9(Number.NaN,Number.NaN,Number.NaN,Number.NaN)),e.centerX=t.centerX,e.centerY=t.centerY,e.outerRadius=e.clipSector.outerRadius=t.outerRadius,e.innerRadius=e.clipSector.innerRadius=t.innerRadius,e.startAngle=e.clipSector.startAngle=t.startAngle,e.startInnerCornerRadius=t.startInnerCornerRadius,e.startOuterCornerRadius=t.startOuterCornerRadius,e.endAngle=i.endAngle,e.clipSector.endAngle=null!==(o=null===(s=i.clipSector)||void 0===s?void 0:s.endAngle)&&void 0!==o?o:i.endAngle,e.endInnerCornerRadius=i.endInnerCornerRadius,e.endOuterCornerRadius=i.endOuterCornerRadius,e.pointerEvents=uE.PointerEvents.None})}updateScaleSelection(e){return e.scaleSelection.update(e.scaleData,void 0,t=>B9(e.scaleData.length,t.itemId))}updateScaleNodes(e){var t;const{scaleSelection:i}=e,{segmentation:n}=this.properties,o=null!==(t=n.spacing)&&void 0!==t?t:0,s=this.getShapeFillBBox();i.each((e,t)=>{const{centerX:i,centerY:n,innerRadius:r,outerRadius:a,startCornerRadius:l,endCornerRadius:d}=t;e.centerX=i,e.centerY=n,e.innerRadius=r,e.outerRadius=a,e.setStyleProperties(t.style,s),e.startOuterCornerRadius=l,e.startInnerCornerRadius=l,e.endOuterCornerRadius=d,e.endInnerCornerRadius=d,e.radialEdgeInset=(o+e.strokeWidth)/2,e.concentricEdgeInset=e.strokeWidth/2,e.setProperties(R9(0,t))})}updateNeedleSelection(e){return e.needleSelection.update(e.needleData,void 0,()=>B9(0))}updateNeedleNodes(e){const{needleSelection:t}=e,{fill:i,fillOpacity:n,stroke:o,strokeOpacity:s,strokeWidth:r,lineDash:a,lineDashOffset:l}=this.properties.needle,d=this.ctx.animationManager.isSkipped();t.each((e,t)=>{const{centerX:c,centerY:u,radius:h}=t,p=2*h;e.d=c9.defaultPathData,e.setStyleProperties({fill:i,fillOpacity:n,stroke:o,strokeOpacity:s,strokeWidth:r/p,lineDash:a.map(e=>e/p),lineDashOffset:l/p}),e.translationX=c,e.translationY=u,e.scalingX=p,e.scalingY=p,d&&e.setProperties(E9(0,t))})}updateTargetSelection(e){return e.targetSelection.update(e.targetData,void 0,e=>e.itemId)}updateTargetStyles(e){let{targetSelection:t,isHighlight:i}=e;t.each((e,t)=>{t.style=this.getTargetStyle(i,t)})}updateTargetNodes(e){let{targetSelection:t}=e;t.each((e,t)=>{const{centerX:i,centerY:n,angle:o,radius:s,shape:r,size:a,rotation:l}=t;e.setStyleProperties(t.style),e.size=a,e.shape="line"===r?$2:r,e.translationX=i+s*Math.cos(o),e.translationY=n+s*Math.sin(o),e.rotation=o+l})}getTargetStyle(e,t){let{datumIndex:i,style:n}=t;return xu(this.getHighlightStyle(e,i),p(p({},n),{},{opacity:1}))}updateTargetLabelSelection(e){return e.targetLabelSelection.update(e.targetData,void 0,e=>e.itemId)}updateTargetLabelNodes(e){const{targetLabelSelection:t}=e;t.each((e,t)=>{const{centerX:i,centerY:n,radius:o,angle:s,text:r}=t,{offsetX:a,offsetY:l,fill:d,fontStyle:c,fontWeight:u,fontSize:h,fontFamily:p,textAlign:g,textBaseline:m}=t.label;null!=r?(e.visible=!0,e.x=i+o*Math.cos(s)+a,e.y=n+o*Math.sin(s)+l,e.text=r,e.fill=d,e.fontStyle=c,e.fontWeight=u,e.fontSize=h,e.fontFamily=p,e.textAlign=g,e.textBaseline=m):e.visible=!1})}updateLabelSelection(e){return e.labelSelection.update(e.labelData,void 0,e=>e.label)}updateLabelNodes(e){const{labelSelection:t}=e,i=this.ctx.animationManager.isSkipped();t.each((e,t)=>{e.fill=t.fill,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.fontFamily=t.fontFamily}),(i||this.labelsHaveExplicitText())&&this.formatLabelText()}updateTickSelection(e){return e.tickSelection.update(e.tickData,void 0,e=>e.index)}updateTickNodes(e){var t;const{scale:i,radius:n,centerX:o,centerY:s,properties:r}=this,{enabled:a,color:l,fontFamily:d,fontSize:c,fontStyle:u,fontWeight:h,spacing:p}=r.scale.label,g=Bp(null!==(t=r.scale.label.rotation)&&void 0!==t?t:0);e.tickSelection.each((e,t)=>{if(!a)return void(e.visible=!1);e.visible=!0,e.text=t.text,e.fill=l,e.fontFamily=d,e.fontSize=c,e.fontStyle=u,e.fontWeight=h,e.textAlign="center",e.textBaseline="middle";const r=i.convert(t.value),{width:m,height:f}=t,v=Math.abs(n*Math.cos(r)),y=Math.abs(n*Math.sin(r)),b=Math.min(Math.max(Math.abs(n/Math.tan(r)),v-m/2),v+m/2),x=Math.min(Math.max(Math.abs(n*Math.tan(r)),y-f/2),y+f/2),C=Math.hypot(b,x),S=o+(C+p)*Math.cos(r),w=s+(C+p)*Math.sin(r);e.x=S,e.y=w,e.rotationCenterX=S,e.rotationCenterY=w,e.rotation=g})}labelsHaveExplicitText(){for(const{datum:e}of this.labelSelection)if(null==e.text)return!1;return!0}formatLabelText(e){const{labelSelection:t,radius:i,textAlign:n,verticalAlign:o}=this,{spacing:s,innerRadiusRatio:r}=this.properties;!function(e,t,i,n,o,s){const{padding:r,textAlign:a,verticalAlign:l}=n;let d,c;if(i.each((e,t)=>{"primary"===t.label?d=t:"secondary"===t.label&&(c=t)}),null==d)return;const u=Y2(e.id,t,d,null===s||void 0===s?void 0:s.label);if(null==u)return;const h=null==c?void 0:Y2(e.id,t,c,null===s||void 0===s?void 0:s.secondaryLabel),p={padding:r},g="center"===a?2:1,m="middle"===l?2:1,f=e=>({width:Math.sqrt(Math.max(o**2-(e/m)**2,0))*g,height:Math.min(e,m*o),meta:null});let v,y,b;if(null!=c&&null!=h){var x;const e=$$(ed(u),d,ed(h),c,p,f);v=null===e||void 0===e?void 0:e.label,y=null===e||void 0===e?void 0:e.secondaryLabel,b=null!==(x=null===e||void 0===e?void 0:e.height)&&void 0!==x?x:0}else{var C;const e=Z$(ed(u),d,p,f);v=null===e||void 0===e?void 0:e[0],y=void 0,b=null!==(C=null===e||void 0===e?void 0:e[0].height)&&void 0!==C?C:0}const S=b*P9[l];i.each((e,t)=>{let i;if("primary"===t.label?i=v:"secondary"===t.label&&(i=y),null==i)return void(e.visible=!1);e.visible=!0,e.text=i.text,e.fontSize=i.fontSize,e.lineHeight=i.lineHeight,e.textAlign=a,e.textBaseline="middle";const n="primary"===t.label?i.height/2:b-i.height/2;e.y=t.centerY+n-S,e.x=t.centerX})}(this,this.ctx,t,{padding:s,textAlign:n,verticalAlign:o},i*r,e)}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),F9([this.datumSelection],R9),F9([this.needleSelection],E9),this.formatLabelText()}resetAnimation(e){"initial"===e?this.animationState.transition("reset"):"ready"===e&&this.animationState.transition("skip")}animateLabelText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{animationManager:t}=this.ctx;let i,n,o,s;if(this.labelSelection.each((t,r)=>{var a,l,d;if(t.opacity=1,"primary"===r.label)i=null!==(a=null!==(l=null===(d=t.previousDatum)||void 0===d?void 0:d.value)&&void 0!==l?l:e.from)&&void 0!==a?a:r.value,n=r.value;else if("secondary"===r.label){var c,u,h;o=null!==(c=null!==(u=null===(h=t.previousDatum)||void 0===h?void 0:h.value)&&void 0!==u?u:e.from)&&void 0!==c?c:r.value,s=r.value}}),this.labelsHaveExplicitText());else if(null==n||null==s)this.formatLabelText();else if(i===n&&o===s)this.formatLabelText({label:n,secondaryLabel:s});else{var r;const a="".concat(this.id,"_labels");t.animate({id:a,groupId:"label",from:{label:i,secondaryLabel:o},to:{label:n,secondaryLabel:s},phase:null!==(r=e.phase)&&void 0!==r?r:"update",onUpdate:e=>this.formatLabelText(e),onStop:()=>this.formatLabelText({label:n,secondaryLabel:s})})}}animateEmptyUpdateReady(){const{animationManager:e}=this.ctx,{node:t,needle:i}=T9(!0,this.scale.range[0]);O9(this.id,"node",e,[this.datumSelection],t,(e,t)=>t.itemId),O9(this.id,"needle",e,[this.needleSelection],i,()=>"needle"),O9(this.id,"label",e,[this.labelSelection],K2,(e,t)=>t.label),this.animateLabelText({from:this.properties.scale.min,phase:"initial"})}animateWaitingUpdateReady(){const{animationManager:e}=this.ctx,{node:t,needle:i}=T9(!1,this.scale.range[0]);O9(this.id,"node",e,[this.datumSelection],t,(e,t)=>t.itemId),O9(this.id,"needle",e,[this.needleSelection],i,()=>"needle"),this.animateLabelText()}animateReadyResize(){this.resetAllAnimation()}dataCount(){return Number.NaN}getSeriesDomain(){return{domain:[Number.NaN,Number.NaN]}}getSeriesRange(){return[Number.NaN,Number.NaN]}getLegendData(){return[]}getTooltipContent(e){const{id:t,properties:i}=this,{tooltip:n}=i;let o,s,r;if(0===e.type?(o=i.value,s=i.label.text,r=this.ctx.localeManager.t("ariaLabelGaugeValue")):(({value:o,text:s}=i.targets[e.index]),r=this.ctx.localeManager.t("ariaLabelGaugeTarget")),null!=o)return this.formatTooltipWithContext(n,{data:[{label:s,fallbackLabel:r,value:this.formatLabel(o)}]},{seriesId:t,title:void 0,datum:void 0,value:o})}pickNodeClosestDatum(e){return Z2(this,e)}pickFocus(e){return X2(this,e)}getCaptionText(){const{value:e}=this.properties,t=[];return t.push(this.formatLabel(e)),this.labelSelection.each((e,i)=>{const n=Y2(this.id,this.ctx,i);null!=n&&t.push(ed(n))}),t.join(". ")}getCategoryValue(e){}datumIndexForCategoryValue(e){}hasItemStylers(){return null!=this.properties.label.itemStyler}};q9.className="RadialGaugeSeries",q9.type="radial-gauge";var Q9={type:"series",name:"radial-gauge",chartType:"standalone",enterprise:!0,dependencies:[W2],version:GC,options:ju,themeTemplate:{minWidth:200,minHeight:200,tooltip:{enabled:!1},series:{outerRadiusRatio:1,innerRadiusRatio:.8,startAngle:270,endAngle:450,defaultColorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$interpolate:[{$palette:"secondDivergingColors"},5]},uE.SAFE_RANGE2_OPERATION]},scale:{defaultFill:{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["/2",uE.SAFE_STROKE_FILL_OPERATION,{$palette:"hierarchyColors"}]},strokeWidth:{$isUserOption:["./stroke",2,0]},label:{fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:12}},bar:{strokeWidth:{$isUserOption:["./stroke",2,0]}},segmentation:{enabled:!1,interval:{},spacing:2},defaultTarget:{fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},size:10,shape:"triangle",placement:"outside",spacing:5,label:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:5}},needle:{enabled:!1,fill:{$ref:"foregroundColor"},spacing:10},label:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:56,minimumFontSize:18/56,fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}}),secondaryLabel:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:Oh.LARGE},minimumFontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"}}),tooltip:{range:{$path:["/tooltip/range",10]}}}},create:e=>new q9(e)},{BBox:J9,Path:eee}=uE,tee=class extends eee{constructor(){super(...arguments),this.x1=0,this.x2=0,this.y1=0,this.y2=0,this.height=0,this.inset=0,this.elbows=[]}computeBBox(){const e=Math.min(this.x1,this.x2),t=Math.max(this.x1,this.x2)-e,i=Math.min(this.y1,this.y2),n=Math.max(this.y1,this.y2)-i+this.height;return new J9(e,i,t,n)}updatePath(){const{path:e,inset:t}=this;e.clear();const i=this.height-2*this.inset,n=i/2;let o=this.x1+t,s=this.y1+t;e.moveTo(o,s);for(const l of this.elbows)this.updatePathSection(o,s,l.x,l.y,i,-n),o=l.x,s=l.y;const r=this.x2-t,a=this.y2+t;this.updatePathSection(o,s,r,a,i,-n),e.lineTo(r,a+i),o=r,s=a;for(const l of this.elbows.toReversed())this.updatePathSection(o,s,l.x,l.y,i,n),o=l.x,s=l.y;this.updatePathSection(o,s,this.x1+t,this.y1+t,i,n),e.closePath()}updatePathSection(e,t,i,n,o,s){const{path:r}=this,a=pv.from(e,t+s+o/2),l=pv.from(i,n+s+o/2);if(Math.abs(l.y-a.y)<2)return void r.lineTo(l.x,l.y);let d=pv.angle(pv.sub(l,a));d<0&&(d=2*Math.PI+d);const c=Math.PI/2,u=Math.PI,h=1.5*Math.PI,p=iee(a,l,0),g=iee(a,l,o);p.radius<o?r.cubicCurveTo((a.x+l.x)/2,a.y,(a.x+l.x)/2,l.y,l.x,l.y):d>=h?(r.arc(a.x,t-p.radius,p.radius,c,c+g.angle,!0),r.arc(l.x,n+g.radius,g.radius,h+g.angle,h),r.lineTo(l.x,l.y)):d>0&&d<=c?(r.arc(a.x,t+g.radius,g.radius,h,h+g.angle),r.arc(l.x,n-p.radius,p.radius,c+p.angle,c,!0),r.lineTo(l.x,l.y)):d>c&&d<=u?(r.arc(a.x,t+g.radius,g.radius-o,h,h+g.angle,!0),r.arc(l.x,n-p.radius,p.radius+o,c+p.angle,c),r.lineTo(l.x,l.y)):(r.arc(a.x,t-p.radius,p.radius+o,c,c+p.angle),r.arc(l.x,n+g.radius,g.radius-o,h+g.angle,h,!0),r.lineTo(l.x,l.y))}};function iee(e,t,i){const n=pv.angle(pv.sub(t,e)),o=pv.distance(e,t),s=pv.add(e,pv.rotate(pv.from(o/2,0),n)),r=-1/pv.gradient(e,t),a=pv.intercept(s,r),l=(d=.1,c=.5,u=Math.PI/2-Math.abs(pv.gradient(e,t)),za(d,(c-d)*u+d,c));var d,c,u;const h=pv.intersectAtX(r,a,e.x),p=Math.max(i,pv.distance(e,h)*l);return{angle:pv.angle(pv.sub(h,e),pv.sub(h,s))/-(1.1-l),radius:p}}kV([_y()],tee.prototype,"x1",2),kV([_y()],tee.prototype,"x2",2),kV([_y()],tee.prototype,"y1",2),kV([_y()],tee.prototype,"y2",2),kV([_y()],tee.prototype,"height",2),kV([_y()],tee.prototype,"inset",2);var{FillGradientDefaults:nee,FillPatternDefaults:oee,FillImageDefaults:see,makeSeriesTooltip:ree,SeriesProperties:aee,Label:lee}=uE,dee=class extends lee{constructor(){super(...arguments),this.spacing=1,this.placement=void 0,this.edgePlacement=void 0}};kV([ru],dee.prototype,"spacing",2),kV([ru],dee.prototype,"placement",2),kV([ru],dee.prototype,"edgePlacement",2);var cee=class extends kh{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};kV([ru],cee.prototype,"fill",2),kV([ru],cee.prototype,"fillOpacity",2),kV([ru],cee.prototype,"stroke",2),kV([ru],cee.prototype,"strokeOpacity",2),kV([ru],cee.prototype,"strokeWidth",2),kV([ru],cee.prototype,"lineDash",2),kV([ru],cee.prototype,"lineDashOffset",2),kV([ru],cee.prototype,"itemStyler",2);var uee=class extends kh{constructor(){super(...arguments),this.spacing=1,this.minSpacing=0,this.width=1,this.alignment="justify",this.verticalAlignment="center",this.sort="auto",this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};kV([ru],uee.prototype,"spacing",2),kV([ru],uee.prototype,"minSpacing",2),kV([ru],uee.prototype,"width",2),kV([ru],uee.prototype,"alignment",2),kV([ru],uee.prototype,"verticalAlignment",2),kV([ru],uee.prototype,"sort",2),kV([ru],uee.prototype,"fill",2),kV([ru],uee.prototype,"fillOpacity",2),kV([ru],uee.prototype,"stroke",2),kV([ru],uee.prototype,"strokeOpacity",2),kV([ru],uee.prototype,"strokeWidth",2),kV([ru],uee.prototype,"lineDash",2),kV([ru],uee.prototype,"lineDashOffset",2),kV([ru],uee.prototype,"itemStyler",2);var hee=class extends aee{constructor(){super(...arguments),this.nodes=void 0,this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.fillGradientDefaults=new nee,this.fillPatternDefaults=new oee,this.fillImageDefaults=new see,this.defaultColorRange=[],this.defaultPatternFills=[],this.fills=[],this.strokes=[],this.label=new dee,this.link=new cee,this.node=new uee,this.tooltip=ree()}getStyle(e,t,i,n){const{fillOpacity:o,strokeWidth:s,strokeOpacity:r,lineDash:a,lineDashOffset:l,fill:d=t[n%t.length],stroke:c=i[n%t.length]}=e?this.link:this.node;return{fill:d,fillOpacity:o,stroke:c,strokeWidth:s,strokeOpacity:r,lineDash:a,lineDashOffset:l}}};kV([ru],hee.prototype,"nodes",2),kV([ru],hee.prototype,"fromKey",2),kV([ru],hee.prototype,"toKey",2),kV([ru],hee.prototype,"idKey",2),kV([ru],hee.prototype,"idName",2),kV([ru],hee.prototype,"labelKey",2),kV([ru],hee.prototype,"labelName",2),kV([ru],hee.prototype,"sizeKey",2),kV([ru],hee.prototype,"sizeName",2),kV([ru],hee.prototype,"fillGradientDefaults",2),kV([ru],hee.prototype,"fillPatternDefaults",2),kV([ru],hee.prototype,"fillImageDefaults",2),kV([ru],hee.prototype,"defaultColorRange",2),kV([ru],hee.prototype,"defaultPatternFills",2),kV([ru],hee.prototype,"fills",2),kV([ru],hee.prototype,"strokes",2),kV([ru],hee.prototype,"label",2),kV([ru],hee.prototype,"link",2),kV([ru],hee.prototype,"node",2),kV([ru],hee.prototype,"tooltip",2);var{Transformable:pee,SeriesNodePickMode:gee,createDatumId:mee,getShapeStyle:fee,getLabelStyles:vee,Rect:yee,BBox:bee}=uE,xee=class extends i1{constructor(e){super({moduleCtx:e,pickModes:[gee.NEAREST_NODE,gee.EXACT_SHAPE_MATCH]}),this.properties=new hee}isLabelEnabled(){return(null!=this.properties.labelKey||null==this.nodes)&&this.properties.label.enabled}linkFactory(){return new tee}nodeFactory(){return new yee}createNodeData(){var e,t;const i=null!==(e=null===(t=this._nodeDataDependencies)||void 0===t?void 0:t.seriesRectWidth)&&void 0!==e?e:0,n=this.properties.node.width,{nodeGraph:o,links:s,maxPathLength:r}=this.getNodeGraph(this.createNode.bind(this,n),this.createLink,{includeCircularReferences:!1}),a=o;if(0===a.size)return;const l=this.initialiseColumns(r);this.assignNodesToColumns(a,l,r);const d=Wm(this.properties.label),{columnLabelInsetBefore:c,columnLabelInsetAfter:u}=this.getColumnLabelInsets(l,d,r),h=(i-n-c-u)/(r-1);this.positionNodesInColumnsX(l,h,c),this.createGhostNodesAndColumnDiffs(a,l),this.weightNodes(l);const{sizeScale:p,nodeSpacing:g}=this.getScaleAndSpacing(l,1);if(p<0)return void jr.warnOnce("There was insufficient space to display the Sankey Series. Reduce [node.spacing], [node.minSpacing], or provide a larger container.");this.positionNodesInColumnsY(l,1,p,g),this.sortAndPositionLinks(a,p);const m=[],f=[];return this.createNodesNodeData(m,a,l,h,d,f),this.createLinksNodeData(m,s,1,p),{itemId:this.id,nodeData:m,labelData:f}}createNode(e,t){return p(p({},t),{},{x:Number.NaN,y:Number.NaN,width:e,height:Number.NaN})}createLink(e){return p(p({},e),{},{x1:Number.NaN,x2:Number.NaN,y1:Number.NaN,y2:Number.NaN,height:Number.NaN,elbows:[]})}initialiseColumns(e){const t=[];for(let i=0;i<e;i+=1)t.push({index:i,size:0,nodes:[],x:0});return t}assignNodesToColumns(e,t,i){const{fromKey:n,toKey:o,sizeKey:s,labelKey:r}=this.properties;for(const a of e.values()){const{datum:e,linksBefore:l,linksAfter:d}=a,c=Math.max(l.reduce((e,t)=>{let{link:i}=t;return e+i.size},0),d.reduce((e,t)=>{let{link:i}=t;return e+i.size},0));if(0===l.length&&0===d.length||0===c){a.columnIndex=-1;continue}const u=this.getNodeColumn(t,a,i);e.size=c;const{label:h}=this.properties,p=h.enabled?this.getLabelText(e.label,e.datum,r,"label",[],this.properties.label,{datum:e.datum,value:e.label,fromKey:n,toKey:o,sizeKey:s,size:c}):void 0;e.label=ed(p),u.nodes.push(a),u.size+=c,a.columnIndex=u.index}}getNodeColumn(e,t,i){const{node:{alignment:n}}=this.properties,{linksBefore:o,linksAfter:s,maxPathLengthBefore:r,maxPathLengthAfter:a}=t;let l;switch(n){case"left":l=e[r];break;case"right":l=e[i-1-a];break;case"center":if(0!==o.length)l=e[r];else if(0===s.length)l=e[0];else{l=e[s.reduce((e,t)=>Math.min(e,t.node.maxPathLengthBefore),i)-1]}break;case"justify":l=0===s.length?e[i-1]:e[r]}return l}getColumnLabelInsets(e,t,i){var n,o;const{label:{spacing:s,placement:r,edgePlacement:a},node:{width:l}}=this.properties,d=null!==(n=null===(o=this._nodeDataDependencies)||void 0===o?void 0:o.seriesRectWidth)&&void 0!==n?n:0;let c=0,u=0;if(this.isLabelEnabled()&&("outside"===a||null==a)){const n=(e,n)=>{const o=n;if(null==o.datum.label||""===o.datum.label)return e;let c=(d-l)/(i-1)-s;"center"===r&&null==a&&(c/=2);const u=Ym(o.datum.label,{maxWidth:c,maxHeight:o.datum.height,font:this.properties.label,textWrap:"never"});let{width:h}=t.measureLines(u);return"center"===r&&null==a&&(h/=2),Math.max(e,h)};"right"===r&&"outside"!==a||(c=l+e[0].nodes.reduce(n,0)),"left"===r&&"outside"!==a||(u=l+e.at(-1).nodes.reduce(n,0))}return{columnLabelInsetBefore:c,columnLabelInsetAfter:u}}positionNodesInColumnsX(e,t,i){for(let n=0;n<e.length;n++){const o=e[n];o.x=i+n*t;for(const e of o.nodes)e.datum.x=o.x}}createGhostNodesAndColumnDiffs(e,t){for(const i of e.values()){i.weight=0;let e=1/0;for(const t of i.linksAfter){const n=t.node;e=Math.min(e,n.columnIndex-i.columnIndex)}if(e===1/0)for(const t of i.linksBefore){const n=t.node;e=Math.min(e,i.columnIndex-n.columnIndex)}i.closestColumnDiff=e,this.createNodeGhostNodes(i,t,e)}}createNodeGhostNodes(e,t,i){for(const n of e.linksAfter){const o=n.node;if(!(o.columnIndex<=e.columnIndex))for(let s=o.columnIndex-1;s>e.columnIndex;s--){const r=n.link.size,a={ghost:!0,datum:p(p({},e.datum),{},{size:r,y:0,height:0}),weight:0,linksBefore:[{node:{columnIndex:s-1,datum:{size:r}}}],linksAfter:[{node:{columnIndex:s+1,datum:{size:r}}}],link:n.link,columnIndex:e.columnIndex,size:e.datum.size,closestColumnDiff:i,fromNode:{y:o.datum.y},toNode:{y:0}};t[s].size+=r,t[s].nodes.push(a)}}}weightNodes(e){const{properties:t}=this;if("data"===t.node.sort)return;if("auto"!==t.node.sort){for(const t of e)t.nodes.sort((e,t)=>this.sortNodes(e,t));return}const i=e.toSorted((e,t)=>{const i=e.nodes.reduce((e,t)=>Math.max(e,t.datum.size),0);return t.nodes.reduce((e,t)=>Math.max(e,t.datum.size),0)-i}),n={};for(let o=0;o<i.length;o++)n[i[o].index]=Math.pow(10,i.length-o-1);for(const o of e){for(const e of o.nodes)"ghost"in e&&e.ghost?e.weight=e.size/o.size*n[o.index]:e.weight=e.datum.size/o.size*n[o.index];o.nodes.sort((e,t)=>e.weight-t.weight)}for(const o of e){for(const t of o.nodes)"ghost"in t&&t.ghost||(t.weight+=t.linksBefore.reduce((t,i)=>{if(i.node.columnIndex!==o.index-1)return t;const s=e[i.node.columnIndex].nodes.indexOf(i.node)*n[i.node.columnIndex];return Math.max(t,s)},0),t.weight+=t.linksAfter.reduce((t,i)=>{if(i.node.columnIndex!==o.index+1)return t;const s=e[i.node.columnIndex].nodes.indexOf(i.node)*n[i.node.columnIndex];return Math.max(t,s)},0));o.nodes.sort((e,t)=>this.sortNodes(e,t))}}getScaleAndSpacing(e,t){var i,n;const o=null!==(i=null===(n=this._nodeDataDependencies)||void 0===n?void 0:n.seriesRectHeight)&&void 0!==i?i:0,s=i=>e.reduce((e,n)=>{let{size:s,nodes:r}=n;const a=o-r.length*t,l=(1-(r.length-1)*i/a)/s;return Math.min(e,l)},1/0);let r=this.properties.node.spacing,a=s(r);for(;a<0&&r>this.properties.node.minSpacing;)r-=1,a=s(r);return{nodeSpacing:r,sizeScale:a}}positionNodesInColumnsY(e,t,i,n){var o,s;const r=null!==(o=null===(s=this._nodeDataDependencies)||void 0===s?void 0:s.seriesRectHeight)&&void 0!==o?o:0;for(const a of e){let e=0;for(const n of a.nodes){const o=r*n.datum.size*i;n.datum.height=Math.max(t,o),e+=o}const o=n*(a.nodes.length-1);let s=0;"bottom"===this.properties.node.verticalAlignment?s=r-e-o:"center"===this.properties.node.verticalAlignment&&(s=(r-e-o)/2);for(const t of a.nodes)t.datum.y=s,s+=r*t.datum.size*i+n,"ghost"in t&&t.ghost&&t.link.elbows.push({x:a.x,y:t.datum.y})}}sortAndPositionLinks(e,t){var i,n;const o=null!==(i=null===(n=this._nodeDataDependencies)||void 0===n?void 0:n.seriesRectHeight)&&void 0!==i?i:0;for(const{datum:s,linksBefore:r,linksAfter:a}of e.values()){let e=s.y;r.sort((e,t)=>this.sortNodes(e.node,t.node));for(const{link:n}of r)n.y2=e,e+=n.size*o*t;let i=s.y;a.sort((e,t)=>this.sortNodes(e.node,t.node,{invertColumnSort:!0}));for(const{link:n}of a)n.y1=i,i+=n.size*o*t}}createNodesNodeData(e,t,i,n,o,s){for(const[r,a]of i.entries()){const l=0===r,d=r===i.length-1;let c=-1/0;a.nodes.sort((e,t)=>e.datum.y-t.datum.y);for(const i of a.nodes){if("ghost"in i&&i.ghost)continue;const{datum:r}=i;r.midPoint={x:r.x+r.width/2,y:r.y+r.height/2},e.push(r),c=this.createNodeLabelData(t,n,o,s,r,l,d,c)}}}createNodeLabelData(e,t,i,n,o,s,r,a){var l,d;if(null==o.label)return a;const{label:{spacing:c,edgePlacement:u,fontSize:h}}=this.properties,p=null!==(l=null===(d=this._nodeDataDependencies)||void 0===d?void 0:d.seriesRectWidth)&&void 0!==l?l:0,g=o.y+o.height/2;let m;if(!s&&!r){const t=Vl(h),i=g-t,n=g+t;let s=p;for(const{datum:a}of e.values()){a.x>o.x&&Math.max(a.y,i)<=Math.min(a.y+a.height,n)&&(s=Math.min(s,a.x-c))}const r=s-o.x-2*c;m=Ym(o.label,{maxWidth:r,maxHeight:o.height,font:this.properties.label,textWrap:"never",overflow:"hide"})}if(null==m||""===m){const e=null==u&&(s||r)?c:2*c;m=Ym(o.label,{maxWidth:t-e,maxHeight:o.height,font:this.properties.label,textWrap:"never"})}if(""===m)return a;const{height:f}=i.measureLines(m),v=g-f/2,y=g+f/2,{x:b,textAlign:x}=this.getNodeLabelPlacement(o,s,r);return v>=a&&(n.push({x:b,y:g,textAlign:x,text:m,size:o.size,nodeDatum:o,datumIndex:o.datumIndex}),a=y),a}getNodeLabelPlacement(e,t,i){const{label:{spacing:n,placement:o,edgePlacement:s}}=this.properties;let r=e.x+e.width+n,a="left",l=o;return t&&null==s&&null==o&&(l="left"),"outside"===s?(t&&(l="left"),i&&(l="right")):"inside"===s&&(t&&(l="right"),i&&(l="left")),"left"===l?(r=e.x-n,a="right"):"center"===l&&(r=e.x+e.width/2,a="center"),{x:r,textAlign:a}}createLinksNodeData(e,t,i,n){var o,s;const r=null!==(o=null===(s=this._nodeDataDependencies)||void 0===s?void 0:s.seriesRectHeight)&&void 0!==o?o:0,a=this.properties.node.width;for(const l of t){const{fromNode:t,toNode:o,size:s}=l;l.height=Math.max(i,r*s*n),l.x1=t.x+a,l.x2=o.x,l.midPoint={x:(l.x1+l.x2)/2,y:(l.y1+l.y2)/2+l.height/2},e.push(l)}}sortNodes(e,t,i){const{properties:n}=this;var o,s,r,a;return"ascending"===n.node.sort?(null!==(o=e.datum.label)&&void 0!==o?o:"").localeCompare(null!==(s=t.datum.label)&&void 0!==s?s:""):"descending"===n.node.sort?(null!==(r=t.datum.label)&&void 0!==r?r:"").localeCompare(null!==(a=e.datum.label)&&void 0!==a?a:""):"data"===n.node.sort?0:e.columnIndex<t.columnIndex?null!==i&&void 0!==i&&i.invertColumnSort?1:-1:e.columnIndex>t.columnIndex?null!==i&&void 0!==i&&i.invertColumnSort?-1:1:e.weight===t.weight?e.datum.size-t.datum.size:e.closestColumnDiff<t.closestColumnDiff?1:e.closestColumnDiff>t.closestColumnDiff?-1:e.weight-t.weight}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t)}updateLabelNodes(e){const t=this.getHighlightedDatum();e.labelSelection.each((e,i)=>{var n;const{x:o,y:s,textAlign:r,text:a,datumIndex:l,nodeDatum:d}=i,c=i,u=this.isLabelHighlighted(d,t),h=this.getHighlightStyle(u,l),p=vee(this,void 0,c,this.properties.label,u,t),{color:g,fontStyle:m,fontWeight:f,fontSize:v,fontFamily:y}=p;e.visible=!0,e.x=o,e.y=s,e.text=a,e.fill=g,e.fontStyle=m,e.fontWeight=f,e.fontSize=v,e.fontFamily=y,e.textAlign=r,e.textBaseline="middle";const b=null!==(n=h.opacity)&&void 0!==n?n:1;e.opacity=b,e.fillOpacity=b,e.setBoxing(p)})}updateNodeSelection(e){return e.datumSelection.update(e.nodeData,void 0,e=>mee(e.type,e.id))}getNodeStyle(e,t,i){const{properties:n}=this,{fills:o,strokes:s,defaultColorRange:r,defaultPatternFills:a,fillGradientDefaults:l,fillPatternDefaults:d,fillImageDefaults:c}=n,{itemStyler:u}=n.node,h=r[t%r.length].map(e=>({color:e})),g=a[t%a.length],m=xu(this.getHighlightStyle(i,e.datumIndex),n.getStyle(!1,o,s,t)),f=null!=n.node.fill;let v=fee(m,f?l:p(p({},l.toJson()),{},{colorStops:h}),f?d:p(p({},d.toJson()),{},{fill:g,stroke:g}),c);if(null!=u&&null!=e.datumIndex){const t=this.cachedDatumCallback(mee(e.datumIndex.index,"node",i?"highlight":"node"),()=>{const t=this.makeItemStylerParams(e,i,v);return this.callWithContext(u,t)});t&&(v=xu(t,v,p(p({},l.toJson()),{},{colorStops:h}),p(p({},d.toJson()),{},{fill:g,stroke:g}),c))}return v.opacity=1,v}makeItemStylerParams(e,t,i){var n,o;let{datum:s,datumIndex:r,size:a=0,label:l}=e;const{id:d}=this,c=null===(n=this.ctx.highlightManager)||void 0===n?void 0:n.getActiveHighlight(),u=this.getHighlightStateString(c,t,r),h=null!==(o=this.filterItemStylerFillParams(i.fill))&&void 0!==o?o:i.fill;return p(p({seriesId:d,datum:s,highlightState:u},i),{},{size:a,label:l,fill:h})}updateNodeNodes(e){const{datumSelection:t,isHighlight:i}=e,n=this.getShapeFillBBox();t.each((e,t)=>{const{datumIndex:o}=t,s=this.getNodeStyle(t,o.index,i);e.x=t.x,e.y=t.y,e.width=Math.max(t.width,0),e.height=Math.max(t.height,0),e.setStyleProperties(s,n)})}getShapeFillBBox(){var e,t,i,n;const o=null!==(e=null===(t=this._nodeDataDependencies)||void 0===t?void 0:t.seriesRectWidth)&&void 0!==e?e:0,s=null!==(i=null===(n=this._nodeDataDependencies)||void 0===n?void 0:n.seriesRectHeight)&&void 0!==i?i:0,r=new bee(0,0,o,s);return{series:r,axis:r}}updateLinkSelection(e){return e.datumSelection.update(e.nodeData,void 0,e=>mee(e.type,e.index,e.fromNode.id,e.toNode.id))}getLinkStyle(e,t,i){let{datumIndex:n,datum:o}=e;const{id:s,properties:r}=this,{fills:a,strokes:l,defaultColorRange:d,defaultPatternFills:c,fillGradientDefaults:u,fillPatternDefaults:h,fillImageDefaults:g}=r,{itemStyler:m}=r.link,f=d[t.index%d.length].map(e=>({color:e})),v=c[t.index%c.length],y=xu(this.getHighlightStyle(i,n),r.getStyle(!0,a,l,t.index)),b=null!=r.link.fill;let x=fee(y,b?u:p(p({},u.toJson()),{},{colorStops:f}),b?h:p(p({},h.toJson()),{},{fill:v,stroke:v}),g);if(null!=m&&null!=n){const e=this.cachedDatumCallback(mee(n.index,"link",i?"highlight":"node"),()=>{var e;const t=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),r=this.getHighlightStateString(t,i,n);return this.callWithContext(m,p({seriesId:s,datum:o,highlightState:r},x))});e&&(x=xu(e,x,p(p({},u.toJson()),{},{colorStops:f}),p(p({},h.toJson()),{},{fill:v,stroke:v}),g))}return x.opacity=1,x}updateLinkNodes(e){const{datumSelection:t,isHighlight:i}=e,n=this.getShapeFillBBox();t.each((e,t)=>{const o=t.fromNode.datumIndex,s=this.getLinkStyle(t,o,i);e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.height=t.height,e.elbows=t.elbows,e.setStyleProperties(s,n),e.inset=e.strokeWidth/2})}getTooltipContent(e){var t,i,n;const{id:o,linksProcessedData:s,nodesProcessedData:r,properties:a,ctx:{formatManager:l}}=this,{fromKey:d,toKey:c,sizeKey:u,sizeName:h,tooltip:g}=a,m=null===(t=this.contextNodeData)||void 0===t?void 0:t.nodeData.find(t=>t.datumIndex.type===e.type&&t.datumIndex.index===e.index);if(null==m)return;const f=0===m.type?m.fromNode.index:m.index,v=0===m.type?"".concat(m.fromNode.label," - ").concat(m.toNode.label):m.label,y=0===e.type?null===s||void 0===s||null===(i=s.dataSources.get(this.id))||void 0===i?void 0:i.data[e.index]:null===r||void 0===r||null===(n=r.dataSources.get(this.id))||void 0===n?void 0:n.data[e.index],b=m.size;let x;if(0===m.type){const t=m.fromNode.datumIndex;x=this.getLinkStyle({datumIndex:e,datum:y},t,!1)}else x=this.getNodeStyle({datumIndex:e,datum:y},e.index,!1);const C=[];if(null!=u){const e=l.format(this.callWithContext.bind(this),{type:"number",value:b,datum:y,seriesId:o,legendItemName:void 0,key:u,source:"tooltip",property:"size",domain:[],boundSeries:this.getFormatterContext("size"),fractionDigits:void 0});C.push({label:h,fallbackLabel:u,value:null!==e&&void 0!==e?e:String(b)})}return this.formatTooltipWithContext(g,{title:v,symbol:this.legendItemSymbol(m.type,f,x),data:C},p({seriesId:o,datum:y,title:v,fromKey:d,toKey:c,sizeKey:u,sizeName:h,size:b},x))}computeFocusBounds(e){if(e instanceof yee){const{x:t,y:i,width:n,height:o}=e,s=new bee(t,i,n,o);return pee.toCanvas(this.contentGroup,s)}return e}hasItemStylers(){return null!=this.properties.node.itemStyler||null!=this.properties.link.itemStyler||null!=this.properties.label.itemStyler}};xee.className="SankeySeries",xee.type="sankey";var{sankeySeriesThemeableOptionsDef:Cee}=uE,See=p(p(p({},Cee),Yc),{},{type:pd(jd("sankey")),fromKey:pd(Ad),toKey:pd(Ad),sizeKey:Ad,sizeName:Ad});See.fillGradientDefaults=gd(nc),See.fillPatternDefaults=gd(oc),See.fillImageDefaults=gd(sc),See.defaultColorRange=gd(_d(_d(wd))),See.defaultPatternFills=gd(_d(wd));var wee={type:"series",name:"sankey",chartType:"standalone",enterprise:!0,solo:!0,version:GC,dependencies:[W0],options:See,themeTemplate:{seriesArea:{padding:{top:10,bottom:10}},series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},fillGradientDefaults:uE.FILL_GRADIENT_LINEAR_DEFAULTS,fillPatternDefaults:uE.FILL_PATTERN_DEFAULTS,fillImageDefaults:uE.FILL_IMAGE_DEFAULTS,defaultColorRange:{$palette:"gradients"},defaultPatternFills:uE.SAFE_FILLS_OPERATION,highlight:{unhighlightedItem:{opacity:.5}},label:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!0,fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:10}),node:{spacing:{$if:[{$greaterThan:[{$path:"./minSpacing"},20]},{$path:"./minSpacing"},20]},minSpacing:0,width:10,strokeWidth:{$isUserOption:["./stroke",2,0]}},link:{fillOpacity:.5,strokeWidth:{$isUserOption:["./stroke",2,0]}}},legend:{enabled:!1,toggleSeries:!1}},create:e=>new xee(e)},{HierarchySeriesProperties:Mee,makeSeriesTooltip:kee,HighlightProperties:Dee}=uE,Iee=class extends kh{};kV([ru],Iee.prototype,"fill",2),kV([ru],Iee.prototype,"fillOpacity",2),kV([ru],Iee.prototype,"stroke",2),kV([ru],Iee.prototype,"strokeWidth",2),kV([ru],Iee.prototype,"strokeOpacity",2),kV([ru],Iee.prototype,"opacity",2);var Aee=class extends Dee{constructor(){super(...arguments),this.highlightedBranch=new Iee,this.unhighlightedBranch=new Iee}};kV([ru],Aee.prototype,"highlightedBranch",2),kV([ru],Aee.prototype,"unhighlightedBranch",2);var Lee=class extends Mee{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=0,this.strokeOpacity=1,this.cornerRadius=0,this.highlight=new Aee,this.label=new eZ,this.secondaryLabel=new tZ,this.tooltip=kee()}getStyle(e){const{fills:t,strokes:i,fillOpacity:n,strokeWidth:o,strokeOpacity:s}=this;return{fill:t[e%t.length],fillOpacity:n,stroke:i[e%i.length],strokeWidth:o,strokeOpacity:s,opacity:1}}};kV([ru],Lee.prototype,"sizeName",2),kV([ru],Lee.prototype,"labelKey",2),kV([ru],Lee.prototype,"secondaryLabelKey",2),kV([ru],Lee.prototype,"fillOpacity",2),kV([ru],Lee.prototype,"strokeWidth",2),kV([ru],Lee.prototype,"strokeOpacity",2),kV([ru],Lee.prototype,"cornerRadius",2),kV([ru],Lee.prototype,"sectorSpacing",2),kV([ru],Lee.prototype,"padding",2),kV([ru],Lee.prototype,"itemStyler",2),kV([ru],Lee.prototype,"highlight",2),kV([ru],Lee.prototype,"label",2),kV([ru],Lee.prototype,"secondaryLabel",2),kV([ru],Lee.prototype,"tooltip",2);var{fromToMotion:Nee,createDatumId:Tee,PointerEvents:Ree,Sector:Eee,Group:Pee,ScalableGroup:Oee,Selection:Fee,TransformableText:zee,BBox:Bee,getLabelStyles:Vee,toHierarchyHighlightString:Gee}=uE,Hee=class extends uE.HierarchyNode{constructor(){super(...arguments),this.label=void 0,this.secondaryLabel=void 0,this.contentHeight=0,this.bbox=void 0,this.startAngle=0,this.endAngle=0}};function jee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*Math.PI/e.sumSize;for(const n of e.children){const e=t+n.sumSize*i;n.startAngle=t,n.endAngle=e,jee(n,t,i),t=e}}var Wee=class extends uE.HierarchySeries{constructor(e){super(e),this.NodeClass=Hee,this.properties=new Lee,this.scalingGroup=this.contentGroup.appendChild(new Oee),this.sectorGroup=this.scalingGroup.appendChild(new Pee),this.highlightSectorGroup=this.scalingGroup.appendChild(new Pee),this.sectorLabelGroup=this.scalingGroup.appendChild(new Pee),this.datumSelection=Fee.select(this.sectorGroup,Eee),this.labelSelection=Fee.select(this.sectorLabelGroup,Pee),this.highlightSelection=Fee.select(this.highlightSectorGroup,Eee),this.sectorLabelGroup.pointerEvents=Ree.None}processData(){super.processData(),jee(this.rootNode)}updateSelections(){const e=this.getActiveHighlightNode();if(this.highlightSelection.update(null==e?[]:[e],void 0,e=>this.getDatumId(e)),!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:t}=this;if(null==t)return;if(null==t.seriesRect)return;const i=Array.from(this.rootNode);this.datumSelection.update(i,void 0,e=>this.getDatumId(e)),this.labelSelection.update(i,e=>{e.append([new zee({tag:0}),new zee({tag:1})])},e=>this.getDatumId(e))}getItemStyle(e,t){var i,n;const{properties:o,colorScale:s}=this,{itemStyler:r}=o,a=null!==(i=null===(n=e.datumIndex)||void 0===n?void 0:n[0])&&void 0!==i?i:0,l=this.getActiveHighlightNode(),d=this.getHierarchyHighlightState(t,l,e),c=this.getHierarchyHighlightStyles(d,this.properties.highlight),u=xu(c,o.getStyle(a));null!=e.colorValue&&null==(null===c||void 0===c?void 0:c.fill)&&(u.fill=s.convert(e.colorValue));let h=u;if(null!=r&&null!=e){const i=this.cachedDatumCallback(Tee(this.getDatumId(e),t?"highlight":"node"),()=>{const t=this.makeItemStylerParams(e,h,Gee(d));return this.callWithContext(r,t)});i&&(h=xu(i,h))}return h}makeItemStylerParams(e,t,i){var n,o;const{id:s}=this,r=null!==(n=this.filterItemStylerFillParams(t.fill))&&void 0!==n?n:t.fill;return p(p({seriesId:s,datum:e.datum,depth:null!==(o=e.depth)&&void 0!==o?o:0,highlightState:i},t),{},{fill:r})}updateNodes(){var e,t;const{chart:i,data:n,maxDepth:o}=this;if(null==i||null==n)return;const{width:s,height:r}=i.seriesRect,{sectorSpacing:a=0,padding:l=0,cornerRadius:d,childrenKey:c,colorKey:u,colorName:h,labelKey:g,secondaryLabelKey:m,sizeKey:f,sizeName:v}=this.properties;this.contentGroup.translationX=s/2,this.contentGroup.translationY=r/2;const y=.5*a,b=Math.min(s,r)/2,x=b/(o+1),C=-Math.PI/2,S={series:new Bee(-b,-b,2*b,2*b),axis:new Bee(-b,-b,2*b,2*b)};null===(e=this.rootNode)||void 0===e||e.walk(e=>{const{startAngle:t,endAngle:i}=e;if(null!=e.depth){const n=(t+i)/2+C,o=(e.depth+.5)*x;e.midPoint.x=Math.cos(n)*o,e.midPoint.y=Math.sin(n)*o}}),null===(t=this.rootNode)||void 0===t||t.walk(e=>{const{datum:t,depth:i,startAngle:n,endAngle:o,parent:s,sumSize:r}=e;let a,d;if(e.label=void 0,e.secondaryLabel=void 0,e.contentHeight=0,null!=t&&null!=i&&null!=g){const e=t[g];a=this.getLabelText(e,t,g,"label",[],this.properties.label,{depth:i,datum:t,childrenKey:c,colorKey:u,colorName:h,labelKey:g,secondaryLabelKey:m,sizeKey:f,sizeName:v,value:e})}if(""===a&&(a=void 0),null!=t&&null!=i&&null!=m){const e=t[m];d=this.getLabelText(e,t,m,"secondaryLabel",[],this.properties.secondaryLabel,{depth:i,datum:t,childrenKey:c,colorKey:u,colorName:h,labelKey:g,secondaryLabelKey:m,sizeKey:f,sizeName:v,value:e})}if(""===d&&(d=void 0),null==i)return;const b=i*x+y,S=(i+1)*x-y,w=b>y?y/b:y,M=S>y?y/S:y,k=o+w-(n+w),D=o+M-(n+M),I=q$(ed(a),this.properties.label,ed(d),this.properties.secondaryLabel,{padding:l},e=>{if(0===i&&(null===s||void 0===s?void 0:s.sumSize)===r){return{width:2*Math.sqrt(S**2-(.5*e)**2),height:e,meta:0}}const t=e,n=2*Math.sqrt(S**2-(b+t)**2),o=k<Math.PI?2*b*Math.tan(.5*k):1/0,a=Math.min(n,o),l=Math.PI/4;let d,c;return 0===i?(d=e,c=Math.sqrt(S**2-(d/2)**2)-e/(2*Math.tan(.5*D))):Pp(k)<l?(d=2*b*Math.tan(.5*k),c=Math.sqrt(S**2-(d/2)**2)-b):(c=0,d=0),a>=c?{width:a,height:t,meta:1}:{width:c,height:d,meta:2}});if(null==I)return;const{width:A,height:L,meta:N,label:T,secondaryLabel:R}=I,E=C+(n+o)/2,P=(Math.sin(E)>=0?3:12)&(Math.cos(E)>=0?6:9);let O;switch(N){case 0:O=0;break;case 1:{const e=S-(x-L)*.58,t=Math.sqrt((S-l)**2-(A/2)**2);O=Math.min(e,t);break}case 2:if(0===i){O=.5*(L/(2*Math.tan(.5*k))+.5*A+(Math.sqrt(S**2-(.5*L)**2)-.5*A))}else O=.5*(b+S)}if(null!=T){const{fontStyle:t="normal",fontFamily:i,fontWeight:n="normal",color:o="black"}=this.properties.label;e.label=p(p({},T),{},{fontStyle:t,fontFamily:i,fontWeight:n,color:o,labelPlacement:N,circleQuarter:P,radius:O,theta:E})}if(null!=R){const{fontStyle:t="normal",fontFamily:i,fontWeight:n="normal",color:o="black"}=this.properties.secondaryLabel;e.secondaryLabel=p(p({},R),{},{fontStyle:t,fontFamily:i,fontWeight:n,color:o,labelPlacement:N,circleQuarter:P,radius:O,theta:E})}e.contentHeight=I.height});const w=(e,t,i)=>{const{depth:n,startAngle:o,endAngle:s}=e;if(null==n)return void(t.visible=!1);t.visible=!0;const r=this.getItemStyle(e,i),a=r.fill,l=r.strokeWidth,c=$v(a)&&"item"!==a.bounds?S:void 0;t.setStyleProperties(r,c),t.centerX=0,t.centerY=0,t.innerRadius=n*x,t.outerRadius=(n+1)*x,t.startAngle=o+C,t.endAngle=s+C,t.inset=y+.5*l,t.cornerRadius=d};this.datumSelection.each((e,t)=>{w(t,e,!1)}),this.highlightSelection.each((e,t)=>{w(t,e,!0)});const M=this.getActiveHighlightNode(),k=(e,t,i,n)=>{var o,s,r,a,l;const{depth:d,contentHeight:c}=e,u=0===i,h=u?e.label:e.secondaryLabel;if(null==d||null==h)return void(t.visible=!1);const{labelPlacement:p,circleQuarter:g,radius:m,theta:f}=h,v=this.getHierarchyHighlightState(n,M,e),{opacity:y}=null!==(o=this.getHierarchyHighlightStyles(v,this.properties.highlight))&&void 0!==o?o:{},b={childrenKey:this.properties.childrenKey,colorKey:this.properties.colorKey,colorName:null!==(s=this.properties.colorName)&&void 0!==s?s:this.properties.colorKey,depth:null!==(r=e.depth)&&void 0!==r?r:Number.NaN,labelKey:this.properties.labelKey,secondaryLabelKey:this.properties.secondaryLabelKey,sizeKey:this.properties.sizeKey,sizeName:null!==(a=this.properties.sizeName)&&void 0!==a?a:this.properties.sizeKey},x=u?this.properties.label:this.properties.secondaryLabel,C=null===(l=this.ctx.highlightManager)||void 0===l?void 0:l.getActiveHighlight(),S=Vee(this,e,b,x,n,C);switch(t.text=h.text,t.fontSize=h.fontSize,t.lineHeight=h.lineHeight,t.fontStyle=h.fontStyle,t.fontFamily=h.fontFamily,t.fontWeight=h.fontWeight,t.fillOpacity=null!==y&&void 0!==y?y:1,t.fill=S.color,t.setBoxing(S),p){case 0:t.textAlign="center",t.textBaseline="top",t.translationX=0,t.translationY=(u?0:c-h.height)-.5*c,t.rotation=0;break;case 1:{const e=0!==(3&g),i=u===!e?m:m-(c-h.height);t.textAlign="center",t.textBaseline=e?"bottom":"top",t.translationX=Math.cos(f)*i,t.translationY=Math.sin(f)*i,t.rotation=e?f-.5*Math.PI:f+.5*Math.PI;break}case 2:{const e=0!==(6&g),i=u===!e?.5*(c-h.height):.5*(h.height-c);t.textAlign="center",t.textBaseline="middle",t.translationX=Math.cos(f)*m+Math.cos(f+Math.PI/2)*i,t.translationY=Math.sin(f)*m+Math.sin(f+Math.PI/2)*i,t.rotation=e?f:f+Math.PI;break}}t.visible=!0},D=this.getActiveHighlightNode();for(const p of this.labelSelection.selectByClass(zee)){const e=p.closestDatum();k(e,p,p.tag,e===D)}}getTooltipContent(e){const{id:t,properties:i,ctx:n}=this,{labelKey:o,secondaryLabelKey:s,childrenKey:r,sizeKey:a,sizeName:l,colorKey:d,colorName:c,tooltip:u}=i,{formatManager:h}=n,g=e.reduce((e,t)=>null===e||void 0===e?void 0:e.children[t],this.rootNode);if(null==g)return;const{datum:m,depth:f}=g;if(null==m||null==f)return;const v=[],y=null==a?void 0:m[a];if(null!=y){var b,x;const e=[0,null!==(b=null===(x=this.rootNode)||void 0===x?void 0:x.sumSize)&&void 0!==b?b:0],i=h.format(this.callWithContext.bind(this),{type:"number",value:y,datum:m,seriesId:t,legendItemName:void 0,key:a,source:"tooltip",property:"size",boundSeries:this.getFormatterContext("size"),domain:e,fractionDigits:void 0});v.push({label:l,fallbackLabel:a,value:null!==i&&void 0!==i?i:Fg(y)})}const C=null==d?void 0:m[d];if(null!=C){const{colorDomain:e}=this,i=h.format(this.callWithContext.bind(this),{type:"number",value:C,datum:m,seriesId:t,legendItemName:void 0,key:d,source:"tooltip",property:"color",boundSeries:this.getFormatterContext("color"),domain:e,fractionDigits:void 0});v.push({label:c,fallbackLabel:d,value:null!==i&&void 0!==i?i:Fg(C)})}const S=this.getItemStyle(p(p({},g),{},{colorValue:null!==C&&void 0!==C?C:g.colorValue}),!1),w={shape:"square",fill:S.fill,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0};return $v(w.fill)&&(w.fill=p(p({},w.fill),{},{gradient:"linear",rotation:0,reverse:!1})),this.formatTooltipWithContext(u,{title:null==o?void 0:m[o],symbol:{marker:w},data:v},p({seriesId:t,datum:m,title:void 0,depth:f,labelKey:o,secondaryLabelKey:s,childrenKey:r,sizeKey:a,sizeName:l,colorKey:d,colorName:c},S))}createNodeData(){}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.datumSelection.nodes())}animateEmptyUpdateReady(){Nee(this.id,"nodes",this.ctx.animationManager,[this.scalingGroup],{toFn:()=>({scalingX:1,scalingY:1}),fromFn:()=>({scalingX:0,scalingY:0})})}computeFocusBounds(e){return e}hasItemStylers(){return null!=this.properties.itemStyler||null!=this.properties.label.itemStyler}};Wee.className="SunburstSeries",Wee.type="sunburst";var{sunburstSeriesThemeableOptionsDef:_ee}=uE,Kee=p(p(p({},_ee),Mu(Yc,["highlightStyle","highlight","showInLegend"])),{},{type:pd(jd("sunburst")),labelKey:Ad,secondaryLabelKey:Ad,childrenKey:Ad,sizeKey:Ad,colorKey:Ad,sizeName:Ad,colorName:Ad}),Uee={series:{fills:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},{$palette:"fills"},{$applySwitch:[{$path:["/type",void 0,{$value:"$1"}]},{$value:"$1"},["gradient",uE.FILL_GRADIENT_RADIAL_REVERSED_SERIES_DEFAULTS],["pattern",uE.FILL_PATTERN_DEFAULTS],["image",uE.FILL_IMAGE_DEFAULTS]]}]},strokes:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},{$palette:"strokes"}]},colorRange:{$palette:"divergingColors"},strokeWidth:{$isUserOption:["./strokes/0",2,0]},label:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!0,fontFamily:{$ref:"fontFamily"},fontSize:{$rem:Oh.LARGE},minimumFontSize:{$rem:9/Ph},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"},overflowStrategy:"ellipsis",wrapping:"never",spacing:2}),secondaryLabel:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!0,fontFamily:{$ref:"fontFamily"},fontSize:{$rem:Oh.SMALLEST},minimumFontSize:{$rem:7/Ph},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"},overflowStrategy:"ellipsis",wrapping:"never"}),sectorSpacing:2,padding:3,highlight:{unhighlightedItem:{fillOpacity:.6,strokeOpacity:.6},unhighlightedBranch:{fillOpacity:.2,strokeOpacity:.2}}},gradientLegend:{enabled:{$if:[{$path:"../series/0/colorKey"},!0,!1]}}},Yee={type:"series",name:"sunburst",chartType:"standalone",enterprise:!0,solo:!0,version:GC,dependencies:[W0],options:Kee,themeTemplate:Uee,create:e=>new Wee(e)},{HierarchySeriesProperties:$ee,makeSeriesTooltip:Zee,Label:Xee}=uE,qee=class extends Xee{constructor(){super(...arguments),this.spacing=0}};kV([ru],qee.prototype,"spacing",2);var Qee=class extends kh{};kV([ru],Qee.prototype,"fill",2),kV([ru],Qee.prototype,"fillOpacity",2),kV([ru],Qee.prototype,"stroke",2),kV([ru],Qee.prototype,"strokeWidth",2),kV([ru],Qee.prototype,"strokeOpacity",2),kV([ru],Qee.prototype,"opacity",2);var Jee=class extends kh{constructor(){super(...arguments),this.highlightedItem=new Qee,this.unhighlightedItem=new Qee}};kV([ru],Jee.prototype,"highlightedItem",2),kV([ru],Jee.prototype,"unhighlightedItem",2);var ete=class extends kh{};kV([ru],ete.prototype,"fill",2),kV([ru],ete.prototype,"fillOpacity",2),kV([ru],ete.prototype,"stroke",2),kV([ru],ete.prototype,"strokeWidth",2),kV([ru],ete.prototype,"strokeOpacity",2),kV([ru],ete.prototype,"opacity",2);var tte=class extends kh{constructor(){super(...arguments),this.highlightedBranch=new ete,this.highlightedItem=new ete,this.unhighlightedItem=new ete,this.unhighlightedBranch=new ete}};kV([ru],tte.prototype,"highlightedBranch",2),kV([ru],tte.prototype,"highlightedItem",2),kV([ru],tte.prototype,"unhighlightedItem",2),kV([ru],tte.prototype,"unhighlightedBranch",2);var ite=class extends kh{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.gap=0,this.padding=0,this.interactive=!0,this.label=new qee,this.highlight=new Jee}};kV([ru],ite.prototype,"fill",2),kV([ru],ite.prototype,"fillOpacity",2),kV([ru],ite.prototype,"stroke",2),kV([ru],ite.prototype,"strokeWidth",2),kV([ru],ite.prototype,"strokeOpacity",2),kV([ru],ite.prototype,"cornerRadius",2),kV([ru],ite.prototype,"textAlign",2),kV([ru],ite.prototype,"gap",2),kV([ru],ite.prototype,"padding",2),kV([ru],ite.prototype,"interactive",2),kV([ru],ite.prototype,"label",2),kV([ru],ite.prototype,"highlight",2);var nte=class extends kh{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.verticalAlign="middle",this.gap=0,this.padding=0,this.label=new eZ,this.secondaryLabel=new tZ,this.highlight=new tte}};kV([ru],nte.prototype,"fill",2),kV([ru],nte.prototype,"fillOpacity",2),kV([ru],nte.prototype,"stroke",2),kV([ru],nte.prototype,"strokeWidth",2),kV([ru],nte.prototype,"strokeOpacity",2),kV([ru],nte.prototype,"cornerRadius",2),kV([ru],nte.prototype,"textAlign",2),kV([ru],nte.prototype,"verticalAlign",2),kV([ru],nte.prototype,"gap",2),kV([ru],nte.prototype,"padding",2),kV([ru],nte.prototype,"label",2),kV([ru],nte.prototype,"secondaryLabel",2),kV([ru],nte.prototype,"highlight",2);var ote=class extends $ee{constructor(){super(...arguments),this.tooltip=Zee(),this.group=new ite,this.tile=new nte,this.undocumentedGroupFills=[],this.undocumentedGroupStrokes=[]}getStyle(e,t,i,n){const{fillOpacity:o,strokeWidth:s,strokeOpacity:r,fill:a=(e?t[n%t.length]:t[Math.min(n,t.length)]),stroke:l=(e?i[n%t.length]:i[Math.min(n,i.length)])}=e?this.tile:this.group;return{fill:a,fillOpacity:o,stroke:l,strokeWidth:s,strokeOpacity:r,opacity:1}}};kV([ru],ote.prototype,"sizeName",2),kV([ru],ote.prototype,"labelKey",2),kV([ru],ote.prototype,"secondaryLabelKey",2),kV([ru],ote.prototype,"itemStyler",2),kV([ru],ote.prototype,"tooltip",2),kV([ru],ote.prototype,"group",2),kV([ru],ote.prototype,"tile",2),kV([ru],ote.prototype,"undocumentedGroupFills",2),kV([ru],ote.prototype,"undocumentedGroupStrokes",2);var{createDatumId:ste,Rect:rte,Group:ate,BBox:lte,Selection:dte,Text:cte,Transformable:ute,getLabelStyles:hte,HierarchyHighlightState:pte,toHierarchyHighlightString:gte}=uE,mte=class extends uE.HierarchyNode{constructor(){super(...arguments),this.labelValue=void 0,this.secondaryLabelValue=void 0,this.label=void 0,this.secondaryLabel=void 0,this.bbox=void 0,this.padding=void 0}};function fte(e){return e.children.length>0?e.sumSize-e.sizeValue:e.sizeValue}var vte={left:0,center:.5,right:1},yte={top:0,middle:.5,bottom:1},bte=(uE.Group,class extends uE.HierarchySeries{constructor(){super(...arguments),this.NodeClass=mte,this.properties=new ote,this.rectGroup=this.contentGroup.appendChild(new ate),this.datumSelection=dte.select(this.rectGroup,rte),this.labelSelection=dte.select(this.labelGroup,ate),this.highlightSelection=dte.select(this.rectGroup,rte)}groupTitleHeight(e,t){const{labelValue:i}=e,{label:n}=this.properties.group;if(null!=i&&!(n.fontSize>t.width/3||n.fontSize>t.height/3)){const{height:e}=Wm(n).measureLines(i);return Math.max(e,n.fontSize)}}getNodePadding(e,t){if(null==e.parent)return{top:0,right:0,bottom:0,left:0};if(0===e.children.length){const{padding:e}=this.properties.tile;return{top:e,right:e,bottom:e,left:e}}const{label:{spacing:i},padding:n}=this.properties.group,o=this.groupTitleHeight(e,t);return{top:n+(null==o?0:o+i),right:n,bottom:n,left:n}}sortChildren(e){let{children:t}=e;const i=Array.from(t,(e,t)=>t).filter(e=>fte(t[e])>0).sort((e,i)=>fte(t[i])-fte(t[e]));return{sortedChildrenIndices:i,childAt:e=>{const n=i[e];return t[n]}}}squarify(e,t){const{datum:i,children:n}=e;if(t.width<=0||t.height<=0)return e.bbox=void 0,e.padding=void 0,e.midPoint.x=Number.NaN,void(e.midPoint.y=Number.NaN);const o=null==i?{top:0,right:0,bottom:0,left:0}:this.getNodePadding(e,t);null==e.parent?(e.bbox=void 0,e.padding=void 0,e.midPoint.x=Number.NaN,e.midPoint.y=Number.NaN):(e.bbox=t,e.padding=o,e.midPoint.x=t.x+t.width/2,e.midPoint.y=t.y);const{sortedChildrenIndices:s,childAt:r}=this.sortChildren(e),a=s.every(e=>0===n[e].children.length),l=t.width-o.left-o.right,d=t.height-o.top-o.bottom;if(l<=0||d<=0)return;const c=s.length;let u=0,h=0,p=1/0,g=s.reduce((e,t)=>e+fte(n[t]),0);const m=new lte(t.x+o.left,t.y+o.top,l,d),f=m.clone();let v=0;for(;v<c;){const e=fte(r(v)),t=fte(r(h)),i=f.width<f.height;u+=e;const n=i?f.height:f.width,o=i?f.width:f.height,s=o*t/u;let l=n*u/g;const d=Math.max(s,l)/Math.min(s,l),c=Math.abs(1-d);if(c<p){p=c,v++;continue}u-=e,l=n*u/g;let y=i?f.x:f.y;for(let p=h;p<v;p++){const e=r(p),t=fte(e),n=i?y:f.x,s=i?f.y:y,d=o*t/u,c=new lte(n,s,i?d:l,i?l:d);this.applyGap(m,c,a),this.squarify(e,c),g-=t,y+=d}i?(f.y+=l,f.height-=l):(f.x+=l,f.width-=l),h=v,u=0,p=1/0}const y=f.width<f.height;let b=y?f.x:f.y;for(let x=h;x<c;x++){const e=r(x),t=y?b:f.x,i=y?f.y:b,n=fte(e)/g,o=f.width*(y?n:1),s=f.height*(y?1:n),l=new lte(t,i,o,s);this.applyGap(m,l,a),this.squarify(e,l),b+=y?o:s}}applyGap(e,t,i){const n=i?.5*this.properties.tile.gap:.5*this.properties.group.gap,o=e=>({left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height}),s=o(e),r=o(t),a=["top","right","bottom","left"];for(const l of a)Va(s[l],r[l])||t.shrink(n,l)}createNodeData(){}getItemStyle(e,t,i){var n,o,s;const{properties:r,colorScale:a}=this,{itemStyler:l}=r,d=null!==(n=null===(o=e.datumIndex)||void 0===o?void 0:o[0])&&void 0!==n?n:0,c=t?r.fills:r.undocumentedGroupFills,u=t?r.strokes:r.undocumentedGroupStrokes,h=t?d:null!==(s=e.depth)&&void 0!==s?s:-1,p=this.getActiveHighlightNode(),g=this.getHierarchyHighlightState(i,p,e),m=this.getGroupHighlightState(i,p,e),f=t?g:m,v=t?this.getTileHighlightStyle(g,m,p):this.getGroupHighlightStyle(m),y=xu(v,r.getStyle(t,c,u,h));t&&null!=e.colorValue&&null==(null===v||void 0===v?void 0:v.fill)&&(y.fill=a.convert(e.colorValue));let b=y;if(null!=l&&null!=e){const t=this.cachedDatumCallback(ste(this.getDatumId(e),i?"highlight":"node"),()=>{const t=this.makeItemStylerParams(e,b,gte(f));return this.callWithContext(l,t)});t&&(b=xu(t,b))}return b}makeItemStylerParams(e,t,i){var n,o;const{id:s}=this,r=null!==(n=this.filterItemStylerFillParams(t.fill))&&void 0!==n?n:t.fill;return p(p({seriesId:s,datum:e.datum,depth:null!==(o=e.depth)&&void 0!==o?o:-1,highlightState:i},t),{},{fill:r})}updateSelections(){var e;const t=this.getActiveHighlightNode();if(this.highlightSelection.update(null==t?[]:[t],void 0,e=>this.getDatumId(e)),!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{seriesRect:i}=null!==(e=this.chart)&&void 0!==e?e:{};if(!i)return;const n=Array.from(this.rootNode);this.datumSelection.update(n,void 0,e=>this.getDatumId(e)),this.labelSelection.update(n,e=>{e.append([new cte({tag:0}),new cte({tag:1})])},e=>this.getDatumId(e))}getActiveHighlightNode(){const e=super.getActiveHighlightNode();if(null===e||void 0===e||!e.children.length||this.properties.group.interactive)return e}updateNodes(){var e,t,i;const{rootNode:n,data:o}=this,{childrenKey:s,colorKey:r,colorName:a,labelKey:l,secondaryLabelKey:d,sizeKey:c,sizeName:u,tile:h,group:p}=this.properties,{seriesRect:g}=null!==(e=this.chart)&&void 0!==e?e:{};if(!g||!o)return;null===(t=this.rootNode)||void 0===t||t.walk(e=>{const{datum:t,depth:i,children:n}=e,o=0===n.length,g=o?h.label:p.label;let m,f;if(g.enabled&&null!=t&&null!=i&&null!=l){const e=t[l];m=this.getLabelText(e,t,l,"label",[],g,{depth:i,datum:t,childrenKey:s,colorKey:r,colorName:a,labelKey:l,secondaryLabelKey:d,sizeKey:c,sizeName:u,value:e})}if(""===m&&(m=void 0),h.secondaryLabel.enabled&&o&&null!=t&&null!=i&&null!=d){const e=t[d];f=this.getLabelText(e,t,d,"secondaryLabel",[],h.secondaryLabel,{depth:i,datum:t,childrenKey:s,colorKey:r,colorName:a,labelKey:l,secondaryLabelKey:d,sizeKey:c,sizeName:u,value:e})}""===f&&(f=void 0),e.labelValue=ed(m),e.secondaryLabelValue=ed(f)});const{width:m,height:f}=g;this.squarify(n,new lte(0,0,m,f)),null===(i=this.rootNode)||void 0===i||i.walk(e=>{const{bbox:t,children:i,labelValue:n,secondaryLabelValue:o}=e;if(e.label=void 0,e.secondaryLabel=void 0,null!=t)if(0===i.length){var s,r;const i={width:t.width,height:t.height,meta:null},a=q$(n,this.properties.tile.label,o,this.properties.tile.secondaryLabel,{padding:h.padding},()=>i);if(null==a)return;const{height:l,label:d,secondaryLabel:c}=a,{textAlign:u,verticalAlign:p,padding:g}=h,m=null!==(s=vte[u])&&void 0!==s?s:.5,f=t.x+g+(t.width-2*g)*m,v=null!==(r=yte[p])&&void 0!==r?r:.5,y=t.y+g+.5*l+(t.height-2*g-l)*v;if(null!=d){const{fontStyle:t="normal",fontFamily:i,fontWeight:n="normal",color:o="black"}=this.properties.tile.label;e.label={text:d.text,fontSize:d.fontSize,lineHeight:d.lineHeight,fontStyle:t,fontFamily:i,fontWeight:n,color:o,textAlign:u,verticalAlign:"middle",x:f,y:y-.5*(l-d.height)}}if(null!=c){const{fontStyle:t="normal",fontFamily:i,fontWeight:n="normal",color:o="black"}=this.properties.tile.secondaryLabel;e.secondaryLabel={text:c.text,fontSize:c.fontSize,lineHeight:c.fontSize,fontStyle:t,fontFamily:i,fontWeight:n,color:o,textAlign:u,verticalAlign:"middle",x:f,y:y+.5*(l-c.height)}}}else{if(null==n)return;{var a;const{padding:i,textAlign:o}=p,s=this.groupTitleHeight(e,t);if(null==s)return;const r=t.width-2*i,l=Ym(n,{maxWidth:t.width-2*i,font:p.label,textWrap:"never"}),d=null!==(a=vte[o])&&void 0!==a?a:.5,{fontStyle:c="normal",fontFamily:u,fontWeight:h="normal",color:g="black"}=this.properties.group.label;e.label={text:l,fontSize:p.label.fontSize,lineHeight:Vl(p.label.fontSize),fontStyle:c,fontFamily:u,fontWeight:h,color:g,textAlign:o,verticalAlign:"middle",x:t.x+i+r*d,y:t.y+i+.5*s}}}});const v={series:new lte(0,0,m,f),axis:new lte(0,0,m,f)},y=(e,t,i)=>{var n;const{bbox:o}=e;if(null==o)return void(t.visible=!1);const{depth:s=-1}=e,r=0===e.children.length,a=this.getItemStyle(e,r,i);t.crisp=!0,t.setStyleProperties(a,v),t.cornerRadius=r?h.cornerRadius:p.cornerRadius,t.zIndex=[0,s,i?1:0];const l=null===(n=e.parent)||void 0===n?void 0:n.children.every(e=>0===e.children.length),d=null==e.parent?void 0:e.parent.bbox,c=null==e.parent?void 0:e.parent.padding;!0===l&&null!=d&&null!=c?(t.clipBBox=o,t.x=d.x+c.left,t.y=d.y+c.top,t.width=d.width-(c.left+c.right),t.height=d.height-(c.top+c.bottom)):(t.clipBBox=void 0,t.x=o.x,t.y=o.y,t.width=o.width,t.height=o.height),t.visible=!0};this.datumSelection.each((e,t)=>y(t,e,!1)),this.highlightSelection.each((e,t)=>{y(t,e,!0)});const b=(e,t,i,n)=>{var o,s,r,a,l;const d=0===e.children.length,c=0===i?e.label:e.secondaryLabel;if(null==c)return void(t.visible=!1);let u,g;0===i?(u=d?h.label:p.label,g=["series","".concat(this.declarationOrder),d?"tile":"group","label"]):(u=h.secondaryLabel,g=["series","".concat(this.declarationOrder),"tile","secondaryLabel"]);const{opacity:m}=null!==(o=this.getItemStyle(e,d,n))&&void 0!==o?o:{},f={childrenKey:this.properties.childrenKey,colorKey:this.properties.colorKey,colorName:null!==(s=this.properties.colorName)&&void 0!==s?s:this.properties.colorKey,depth:null!==(r=e.depth)&&void 0!==r?r:Number.NaN,labelKey:this.properties.labelKey,secondaryLabelKey:this.properties.secondaryLabelKey,sizeKey:this.properties.sizeKey,sizeName:null!==(a=this.properties.sizeName)&&void 0!==a?a:this.properties.sizeKey},v=null===(l=this.ctx.highlightManager)||void 0===l?void 0:l.getActiveHighlight(),y=hte(this,e,f,u,n,v,g);t.text=c.text,t.fontSize=c.fontSize,t.lineHeight=c.lineHeight,t.fontStyle=c.fontStyle,t.fontFamily=c.fontFamily,t.fontWeight=c.fontWeight,t.fillOpacity=null!==m&&void 0!==m?m:1,t.fill=y.color,t.setBoxing(y),t.textAlign=c.textAlign,t.textBaseline=c.verticalAlign,t.x=c.x,t.y=c.y,t.visible=!0,t.zIndex=1},x=this.getActiveHighlightNode();for(const C of this.labelSelection.selectByClass(cte)){const e=C.closestDatum();b(e,C,C.tag,e===x)}}getGroupHighlightState(e,t,i){var n,o;const s=i.datumIndex,r=null===t||void 0===t?void 0:t.datumIndex,a=this.isDescendantDatumIndex(s,r);var l;if(0===(null===(n=i.children)||void 0===n?void 0:n.length))return null==s||null==t||0===(null===(l=t.children)||void 0===l?void 0:l.length)?pte.None:a?pte.Item:pte.OtherItem;if(null==t||0===(null===(o=t.children)||void 0===o?void 0:o.length))return pte.None;const d=null!=i.depth&&null!=t.depth&&i.depth===t.depth;return a&&!d?pte.None:e?pte.Item:pte.OtherItem}getTileHighlightStyle(e,t,i){if((null===i||void 0===i?void 0:i.children)&&i.children.length>0){const e=this.getGroupHighlightStyle(t);if(null==(null===e||void 0===e?void 0:e.fillOpacity)&&null==(null===e||void 0===e?void 0:e.strokeOpacity))return;return{fillOpacity:e.fillOpacity,strokeOpacity:e.strokeOpacity}}return this.getHierarchyHighlightStyles(e,this.properties.tile.highlight)}getGroupHighlightStyle(e){const{highlight:t}=this.properties.group;switch(e){case pte.Item:return t.highlightedItem;case pte.OtherItem:return t.unhighlightedItem;default:return}}getHighlightStateString(e,t,i){var n,o;if(null==i)return gte(pte.None);const s=i.reduce((e,t)=>null===e||void 0===e?void 0:e.children[t],this.rootNode),r=this.getActiveHighlightNode();if(null==s)return gte(pte.None);if(0===(null!==(n=null===(o=s.children)||void 0===o?void 0:o.length)&&void 0!==n?n:0)){const e=this.getHierarchyHighlightState(null!==t&&void 0!==t&&t,r,s);return gte(e)}const a=this.getGroupHighlightState(null!==t&&void 0!==t&&t,r,s);return gte(a)}isDescendantDatumIndex(e,t){if(null==t||0===t.length)return!0;if(null==e||e.length<t.length)return!1;for(let i=0;i<t.length;i+=1)if(e[i]!==t[i])return!1;return!0}pickNodesExactShape(e){const t=super.pickNodesExactShape(e);return t.sort((e,t)=>t.datumIndex.length-e.datumIndex.length),t}pickNodeClosestDatum(e){const t=this.pickNodesExactShape(e);return 0!==t.length?{datum:t[0],distance:0}:this.pickNodeNearestDistantObject(e,this.datumSelection.nodes())}getTooltipContent(e){const{id:t,properties:i,ctx:n}=this,{formatManager:o}=n,{labelKey:s,secondaryLabelKey:r,childrenKey:a,sizeKey:l,sizeName:d,colorKey:c,colorName:u,tooltip:h}=i,g=e.reduce((e,t)=>null===e||void 0===e?void 0:e.children[t],this.rootNode);if(null==g)return;const{datum:m,depth:f,children:v}=g;if(null==m||null==f)return;const y=0===v.length,b=[],x=null==l?void 0:m[l];if(null!=x){var C,S;const e=[0,null!==(C=null===(S=this.rootNode)||void 0===S?void 0:S.sumSize)&&void 0!==C?C:0],i=o.format(this.callWithContext.bind(this),{type:"number",value:x,datum:m,seriesId:t,legendItemName:void 0,key:l,source:"tooltip",property:"size",boundSeries:this.getFormatterContext("size"),domain:e,fractionDigits:void 0});b.push({label:d,fallbackLabel:l,value:null!==i&&void 0!==i?i:Fg(x)})}const w=null==c?void 0:m[c];if(null!=w){const{colorDomain:e}=this,i=o.format(this.callWithContext.bind(this),{type:"number",value:w,datum:m,seriesId:t,legendItemName:void 0,key:c,source:"tooltip",property:"color",boundSeries:this.getFormatterContext("color"),domain:e,fractionDigits:void 0});b.push({label:u,fallbackLabel:c,value:null!==i&&void 0!==i?i:Fg(w)})}const M=this.getItemStyle(p(p({},g),{},{colorValue:null!==w&&void 0!==w?w:g.colorValue}),y,!1),k={shape:"square",fill:M.fill,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0};$v(k.fill)&&(k.fill=p(p({},k.fill),{},{gradient:"linear",rotation:0,reverse:!1}));const D=y?{marker:k}:void 0;return this.formatTooltipWithContext(h,{title:null==s?void 0:m[s],symbol:D,data:b},p({seriesId:t,datum:m,title:void 0,depth:f,labelKey:s,secondaryLabelKey:r,childrenKey:a,sizeKey:l,sizeName:d,colorKey:c,colorName:u},M))}computeFocusBounds(e){return ute.toCanvas(this.contentGroup,e.getBBox())}hasItemStylers(){return null!=this.properties.itemStyler||null!=this.properties.tile.label.itemStyler||null!=this.properties.group.label.itemStyler}});bte.className="TreemapSeries",bte.type="treemap";var{treemapSeriesThemeableOptionsDef:xte}=uE,Cte=p(p(p({},xte),Mu(Yc,["highlightStyle","highlight","showInLegend"])),{},{type:pd(jd("treemap")),labelKey:Ad,secondaryLabelKey:Ad,childrenKey:Ad,sizeKey:Ad,colorKey:Ad,sizeName:Ad,colorName:Ad});Cte.undocumentedGroupFills=gd(_d(wd)),Cte.undocumentedGroupStrokes=gd(_d(wd));var Ste={type:"series",name:"treemap",chartType:"standalone",enterprise:!0,solo:!0,version:GC,dependencies:[W0],options:Cte,themeTemplate:{series:{fills:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},{$palette:"fills"},{$applySwitch:[{$path:["/type",void 0,{$value:"$1"}]},{$value:"$1"},["gradient",uE.FILL_GRADIENT_LINEAR_DEFAULTS],["pattern",uE.FILL_PATTERN_DEFAULTS],["image",uE.FILL_IMAGE_DEFAULTS]]}]},strokes:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},{$palette:"strokes"}]},colorRange:{$palette:"divergingColors"},undocumentedGroupFills:{$palette:"hierarchyColors"},undocumentedGroupStrokes:{$palette:"secondHierarchyColors"},group:{label:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!0,color:{$ref:"textColor"},fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},spacing:4}),fill:void 0,stroke:void 0,strokeWidth:1,padding:4,gap:2,textAlign:"left",highlight:{unhighlightedItem:{opacity:.2,fillOpacity:.2,strokeOpacity:.2}}},tile:{label:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!0,color:{$ref:"chartBackgroundColor"},fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:1.5},minimumFontSize:{$rem:Oh.SMALLER},fontFamily:{$ref:"fontFamily"},wrapping:"on-space",overflowStrategy:"ellipsis",spacing:2}),secondaryLabel:p(p({},uE.LABEL_BOXING_DEFAULTS),{},{enabled:!0,color:{$ref:"chartBackgroundColor"},fontStyle:void 0,fontWeight:void 0,fontSize:{$ref:"fontSize"},minimumFontSize:{$rem:Oh.SMALLER},fontFamily:{$ref:"fontFamily"},wrapping:"never",overflowStrategy:"ellipsis"}),fill:void 0,stroke:void 0,strokeWidth:{$isUserOption:["../strokes/0",2,{$isUserOption:["./stroke",2,0]}]},padding:3,gap:1,highlight:{unhighlightedItem:{fillOpacity:.6,strokeOpacity:.6},unhighlightedBranch:{fillOpacity:.2,strokeOpacity:.2}}}},gradientLegend:{enabled:{$if:[{$path:"../series/0/colorKey"},!0,!1]}}},create:e=>new bte(e)},wte=[[JB,yG].flat(),[eV,XY,Y$,x2,V2,kZ,RZ,YX,zq,IQ].flat(),WG,WK,JK,oU,fU,IU,LU,GU,jU,V0,_Q,JQ,cJ,zJ,b0].flat(),{DEFAULT_ANNOTATION_HANDLE_FILL:Mte,DEFAULT_ANNOTATION_STATISTICS_COLOR:kte,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:Dte,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:Ite,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:Ate,DEFAULT_ANNOTATION_STATISTICS_FILL:Lte,DEFAULT_ANNOTATION_STATISTICS_STROKE:Nte,DEFAULT_FIBONACCI_STROKES:Tte,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL:Rte,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR:Ete,DEFAULT_TEXTBOX_COLOR:Pte,DEFAULT_TEXTBOX_FILL:Ote,DEFAULT_TEXTBOX_STROKE:Fte,DEFAULT_TEXT_ANNOTATION_COLOR:zte}=n,Bte={stroke:Ete},Vte={fill:Mte},Gte={color:"white",fill:Ete},Hte={color:Ete},jte={color:zte,fontSize:{$rem:Oh.LARGE},fontFamily:{$ref:"fontFamily"}},Wte=p(p({},jte),{},{fontSize:{$ref:"fontSize"},color:kte,fill:Lte,stroke:Nte,strokeWidth:1,divider:{stroke:Dte,strokeWidth:1,strokeOpacity:.5}}),_te=p(p({},Bte),{},{background:{fill:Rte,fillOpacity:.2},handle:p({},Vte),text:p({},Hte),statistics:p({},Wte)}),Kte={line:p(p({},Bte),{},{handle:p({},Vte),text:p({},Hte)}),"horizontal-line":p(p({},Bte),{},{handle:p({},Vte),axisLabel:p({},Gte),text:p({},Hte)}),"vertical-line":p(p({},Bte),{},{handle:p({},Vte),axisLabel:p({},Gte),text:p({},Hte)}),"disjoint-channel":p(p({},Bte),{},{background:{fill:Rte,fillOpacity:.2},handle:p({},Vte),text:p({},Hte)}),"parallel-channel":p(p({},Bte),{},{background:{fill:Rte,fillOpacity:.2},handle:p({},Vte),text:p({},Hte)}),"fibonacci-retracement":p(p({},Bte),{},{strokes:Tte,rangeStroke:Ete,handle:p({},Vte),text:p(p({},Hte),{},{position:"center"}),label:p(p({},jte),{},{color:void 0,fontSize:{$rem:Oh.SMALLER}})}),"fibonacci-retracement-trend-based":p(p({},Bte),{},{strokes:Tte,rangeStroke:Ete,handle:p({},Vte),text:p(p({},Hte),{},{position:"center"}),label:p(p({},jte),{},{color:void 0,fontSize:{$rem:Oh.SMALLER}})}),callout:p(p(p({},Bte),jte),{},{color:{$ref:"textColor"},handle:p({},Vte),fill:Rte,fillOpacity:.2}),comment:p(p({},jte),{},{color:"white",fontWeight:700,handle:p({},Vte),fill:Ete}),note:p(p({},jte),{},{color:Pte,fill:Ete,stroke:{$ref:"chartBackgroundColor"},strokeWidth:1,strokeOpacity:1,handle:p({},Vte),background:{fill:Ote,stroke:Fte,strokeWidth:1}}),text:p(p({},jte),{},{handle:p({},Vte)}),arrow:p(p({},Bte),{},{handle:p({},Vte),text:p({},Hte)}),"arrow-up":{fill:{$palette:"up.fill"},handle:p(p({},Vte),{},{stroke:Ete})},"arrow-down":{fill:{$palette:"down.fill"},handle:p(p({},Vte),{},{stroke:Ete})},"date-range":p({},_te),"price-range":p({},_te),"date-price-range":p({},_te),"quick-date-price-range":{up:p(p({},Bte),{},{fill:Rte,fillOpacity:.2,handle:p({},Vte),statistics:p(p({},Wte),{},{color:"#fff",fill:Rte,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}})}),down:p(p({},Bte),{},{stroke:Ate,fill:Ite,fillOpacity:.2,handle:p(p({},Vte),{},{stroke:Ate}),statistics:p(p({},Wte),{},{color:"#fff",fill:Ite,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}})})},axesButtons:{enabled:!0}},{SAFE_STROKE_FILL_OPERATION:Ute}=uE,Yte=["ohlc","line","step-line","hlc","high-low","candlestick","hollow-candlestick"],$te=[{icon:"trend-line-drawing",tooltip:"toolbarAnnotationsLineAnnotations",value:"line-menu"},{icon:"fibonacci-retracement-drawing",tooltip:"toolbarAnnotationsFibonacciAnnotations",value:"fibonacci-menu"},{icon:"text-annotation",tooltip:"toolbarAnnotationsTextAnnotations",value:"text-menu"},{icon:"arrow-drawing",tooltip:"toolbarAnnotationsShapeAnnotations",value:"shape-menu"},{icon:"measurer-drawing",tooltip:"toolbarAnnotationsMeasurerAnnotations",value:"measurer-menu"},{icon:"delete",tooltip:"toolbarAnnotationsClearAll",value:"clear"}];var Zte="range-area";function Xte(e,t){return[p(p({type:"candlestick",focusPriority:0},e),t)]}function qte(e,t){var i;return null!==(i=t[e])&&void 0!==i?i:t.default}var Qte={chartType:Gd("candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"),dateKey:Ad,openKey:Ad,highKey:Ad,lowKey:Ad,closeKey:Ad,volumeKey:Ad,navigator:Cd,volume:Cd,rangeButtons:Cd,statusBar:Cd,toolbar:Cd,zoom:Cd,sync:Cd,theme:kd,container:kd,width:kd,height:kd,minWidth:kd,minHeight:kd,listeners:kd,initialState:kd,title:kd,data:xd,formatter:kd};({theme:kd,container:kd,animation:kd,background:kd,contextMenu:kd,context:()=>!0,listeners:kd,locale:kd,width:kd,height:kd,minWidth:kd,minHeight:kd,title:kd,subtitle:kd,footnote:kd,padding:kd,tooltip:p(p({},eu),Kc.tooltip)}).overrideDevicePixelRatio=gd(Pd);var Jte={type:"preset",name:"price-volume",enterprise:!0,dependencies:[oU,cJ],version:GC,options:Qte,create:function(e,t,i){const{dateKey:n="date",highKey:o="high",openKey:s="open",lowKey:r="low",closeKey:a="close",volumeKey:d="volume",chartType:c="candlestick",navigator:u=!1,volume:h=!0,rangeButtons:g=!0,statusBar:m=!0,toolbar:f=!0,zoom:v=!0,sync:y=!1,theme:b,data:x,formatter:C}=e,S=l(e,SV),w=function(e,t,i,n,o,s){const r={xKey:t,openKey:o,closeKey:s,highKey:i,lowKey:n},a={xKey:t,yKey:s},l={pickOutsideVisibleMinorAxis:!0};switch(null!==e&&void 0!==e?e:"candlestick"){case"ohlc":return function(e,t){return[p(p({type:"ohlc",focusPriority:0},e),t)]}(l,r);case"line":case"step-line":return function(e,t){return[p(p({type:"line",focusPriority:0},e),t)]}(l,a);case"hlc":return function(e,t,i){let{xKey:n,highKey:o,closeKey:s,lowKey:r}=i;return[p(p({type:Zte,focusPriority:0},e),{},{xKey:n,yHighKey:o,yLowKey:s}),p(p({type:Zte,focusPriority:0},e),{},{xKey:n,yHighKey:s,yLowKey:r}),p(p({type:"line"},e),t)]}(l,a,r);case"high-low":return function(e,t){let{xKey:i,highKey:n,lowKey:o}=t;return[p(p({type:"range-bar"},e),{},{xKey:i,yHighKey:n,yLowKey:o,tooltip:{range:"nearest"},focusPriority:0})]}(l,r);case"candlestick":case"hollow-candlestick":return Xte(l,r);default:return jr.warnOnce("unknown chart type: ".concat(e,"; expected one of: ").concat(Yte.join(", "))),Xte(l,r)}}(c,n,o,r,s,a),M=function(e,t,i,n,o,s){return o?[{type:"bar",xKey:t,yKey:s,yKeyAxis:"yVolume",tooltip:{enabled:!1},simpleItemStyler(t){const{up:o,down:s}=e().palette;return{fill:t[i]<t[n]?null===o||void 0===o?void 0:o.fill:null===s||void 0===s?void 0:s.fill}},focusPriority:1,highlight:{unhighlightedSeries:{opacity:1}}}]:[]}(i,n,s,a,h,d),k={navigator:p({enabled:u},h?{miniChart:{enabled:u,series:[{type:"line",xKey:n,yKey:d,stroke:Ute,marker:{enabled:!1}}]},height:40,minHandle:{height:46},maxHandle:{height:46}}:null)},D={annotations:{enabled:f,optionsToolbar:{enabled:f},snap:!0,toolbar:{enabled:f,buttons:$te,padding:0},data:x,xKey:n,volumeKey:h?d:void 0}},I=m?{statusBar:{enabled:!0,highKey:o,openKey:s,lowKey:r,closeKey:a,volumeKey:h?d:void 0}}:null,A={zoom:{enabled:v,autoScaling:{enabled:!0},onDataChange:{stickToEnd:!0},enableIndependentAxes:!0}},L={ranges:{enabled:g}},N=y?{sync:{enabled:y,nodeInteraction:!0,zoom:!0}}:null,T=h?{yVolume:{type:"number",position:"left",label:{enabled:!1},crosshair:{enabled:!1},gridLine:{enabled:!1},nice:!1,layoutConstraints:{stacked:!1,width:20,unit:"percent",align:"end"}}}:{};return p(p(p(p(p(p(p({theme:p({baseTheme:"string"===typeof b?b:"ag-financial"},xu("object"===typeof b?b:null,{overrides:{common:{title:{padding:4},padding:{top:6,right:8,bottom:6},chartToolbar:{enabled:f},annotations:p({},Kte),axes:{number:{interval:{maxSpacing:45},label:{format:".2f"}},category:{gridLine:{enabled:!0}},time:{gridLine:{enabled:!0}},"unit-time":{gridLine:{enabled:!0}},"ordinal-time":{gridLine:{enabled:!0}}}},bar:{series:{fillOpacity:.5,highlight:{unhighlightedItem:{opacity:1},unhighlightedSeries:{opacity:1}}}},line:{series:p({marker:{enabled:!1},highlight:{unhighlightedSeries:{opacity:1}}},qte(c,{hlc:{stroke:{$palette:"altNeutral.stroke"},strokeWidth:2},line:{stroke:{$palette:"neutral.stroke"}},"step-line":{stroke:{$palette:"neutral.stroke"},interpolation:{type:"step"}}}))},candlestick:{series:p({highlight:{unhighlightedItem:{opacity:1},unhighlightedSeries:{opacity:1}}},qte(c,{"hollow-candlestick":{item:{up:{fill:"transparent"}}}}))},ohlc:{series:{highlight:{unhighlightedItem:{opacity:1},unhighlightedSeries:{opacity:1}}}},"range-area":{series:p({fillOpacity:.3,strokeWidth:2,highlight:{bringToFront:!1,unhighlightedItem:{opacity:1},unhighlightedSeries:{opacity:1}}},qte(c,{hlc:{fill:{$if:[{$eq:[{$value:"$index"},1]},{$palette:"up.fill"},{$palette:"down.fill"}]},stroke:{$if:[{$eq:[{$value:"$index"},1]},{$palette:"up.stroke"},{$palette:"down.stroke"}]}}}))},"range-bar":{series:p({highlight:{unhighlightedItem:{opacity:1},unhighlightedSeries:{opacity:1}}},qte(c,{"high-low":{fill:{$palette:"neutral.fill"},stroke:{$palette:"neutral.stroke"}}}))}}})),animation:{enabled:!1},legend:{enabled:!1},series:[...M,...w],axes:p(p({y:{type:"number",position:"right",crosshair:{enabled:!0,snap:!1},layoutConstraints:{stacked:!1,width:100,unit:"percent",align:"start"}}},T),{},{x:{type:"ordinal-time",position:"bottom",line:{enabled:!1},label:{enabled:!0},crosshair:{enabled:!0}}}),tooltip:{enabled:!1},data:x,formatter:C},D),k),I),A),L),N),S)}},eie=[Jte,Jz,kB,Y$,RZ,zq,YX,WG,WK,JK,oU,fU,IU,LU,GU,V0,_Q,JQ,zJ,b0,yG,ZB,YB],tie=[H3,Q9],iie=[iV,uG,aG,HG,BG,U6,n7,c7,Y7,s9,WG,fU,LU,V0].flat(),nie=[nV,wte,iie,[O4,U4,x5,j5,J5],tie,eie,D1,f8,wee,Yee,Ste].flat();lE.create.bind(lE),lE.__createSparkline.bind(lE),PV.setGridContext.bind(PV),PV.setLicenseKey.bind(PV);ca.setRegistryMode(ca.RegistryMode.Enterprise),da.styles=FV,da.licenseManager=e=>{var t,i;return new PV(null!==(t=null===(i=e.container)||void 0===i?void 0:i.ownerDocument)&&void 0!==t?t:"undefined"===typeof document?void 0:document)},da.injectWatermark=OV,da.createBackground=e=>new IV(e),da.createForeground=e=>new AV(e),ca.registerModules([nie]);const oie=e=>{let{rowData:t}=e;const i=t.reduce((e,t)=>{const i=t.city,n=t.revenue,o=t.profit,s=e.find(e=>e.city===i);return s?(s.revenue+=n,s.profit+=o):e.push({city:i,revenue:n,profit:o}),e},[]);return i.sort((e,t)=>t.revenue-e.revenue),(0,ao.jsx)(pV,{options:{data:i,contextMenu:{enabled:!1},title:{text:"Revenue vs Profit by City",fontSize:12,fontFamily:"Roboto Serif, serif"},width:510,height:320,axes:{x:{type:"category",title:{text:"City",fontSize:10,fontFamily:"Roboto Serif, serif",color:"#555555"}},y:{type:"number",title:{text:"Revenue (\u20b9 Lakhs)",fontSize:10,fontFamily:"Roboto Serif, serif",color:"#555555"}}},series:[{type:"bar",xKey:"city",yKey:"revenue",fill:"#f5b800",tooltip:{enabled:!1},label:{enabled:!0,fontSize:12,fontFamily:"Roboto Serif, serif",formatter:e=>{let{value:t}=e;return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(t)}}},{type:"line",xKey:"city",yKey:"profit",stroke:"#ff0000",strokeWidth:2,marker:{shape:"circle",size:6,fill:"#ff0000"},tooltip:{enabled:!0}}]}})};const sie=Ii();function rie(e){let{props:t,name:i,defaultTheme:n,themeId:o}=e,s=fo(n);return o&&(s=s[o]||s),function(e){const{theme:t,name:i,props:n}=e;return t&&t.components&&t.components[i]&&t.components[i].defaultProps?ro(t.components[i].defaultProps,n):n}({theme:s,name:i,props:t})}const aie=(e,t,i)=>{const n=e.keys[0];if(Array.isArray(t))t.forEach((t,n)=>{i((t,i)=>{n<=e.keys.length-1&&(0===n?Object.assign(t,i):t[e.up(e.keys[n])]=i)},t)});else if(t&&"object"===typeof t){(Object.keys(t).length>e.keys.length?e.keys:(o=e.keys,s=Object.keys(t),o.filter(e=>s.includes(e)))).forEach(o=>{if(e.keys.includes(o)){const s=t[o];void 0!==s&&i((t,i)=>{n===o?Object.assign(t,i):t[e.up(o)]=i},s)}})}else"number"!==typeof t&&"string"!==typeof t||i((e,t)=>{Object.assign(e,t)},t);var o,s};function lie(e){return"--Grid-".concat(e,"Spacing")}function die(e){return"--Grid-parent-".concat(e,"Spacing")}const cie="--Grid-columns",uie="--Grid-parent-columns",hie=e=>{let{theme:t,ownerState:i}=e;const n={};return aie(t.breakpoints,i.size,(e,t)=>{let i={};"grow"===t&&(i={flexBasis:0,flexGrow:1,maxWidth:"100%"}),"auto"===t&&(i={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),"number"===typeof t&&(i={flexGrow:0,flexBasis:"auto",width:"calc(100% * ".concat(t," / var(").concat(uie,") - (var(").concat(uie,") - ").concat(t,") * (var(").concat(die("column"),") / var(").concat(uie,")))")}),e(n,i)}),n},pie=e=>{let{theme:t,ownerState:i}=e;const n={};return aie(t.breakpoints,i.offset,(e,t)=>{let i={};"auto"===t&&(i={marginLeft:"auto"}),"number"===typeof t&&(i={marginLeft:0===t?"0px":"calc(100% * ".concat(t," / var(").concat(uie,") + var(").concat(die("column"),") * ").concat(t," / var(").concat(uie,"))")}),e(n,i)}),n},gie=e=>{let{theme:t,ownerState:i}=e;if(!i.container)return{};const n={[cie]:12};return aie(t.breakpoints,i.columns,(e,t)=>{const i=null!==t&&void 0!==t?t:12;e(n,{[cie]:i,"> *":{[uie]:i}})}),n},mie=e=>{let{theme:t,ownerState:i}=e;if(!i.container)return{};const n={};return aie(t.breakpoints,i.rowSpacing,(e,i)=>{var o;const s="string"===typeof i?i:null===(o=t.spacing)||void 0===o?void 0:o.call(t,i);e(n,{[lie("row")]:s,"> *":{[die("row")]:s}})}),n},fie=e=>{let{theme:t,ownerState:i}=e;if(!i.container)return{};const n={};return aie(t.breakpoints,i.columnSpacing,(e,i)=>{var o;const s="string"===typeof i?i:null===(o=t.spacing)||void 0===o?void 0:o.call(t,i);e(n,{[lie("column")]:s,"> *":{[die("column")]:s}})}),n},vie=e=>{let{theme:t,ownerState:i}=e;if(!i.container)return{};const n={};return aie(t.breakpoints,i.direction,(e,t)=>{e(n,{flexDirection:t})}),n},yie=e=>{let{ownerState:t}=e;return p({minWidth:0,boxSizing:"border-box"},t.container&&p(p({display:"flex",flexWrap:"wrap"},t.wrap&&"wrap"!==t.wrap&&{flexWrap:t.wrap}),{},{gap:"var(".concat(lie("row"),") var(").concat(lie("column"),")")}))},bie=e=>{const t=[];return Object.entries(e).forEach(e=>{let[i,n]=e;!1!==n&&void 0!==n&&t.push("grid-".concat(i,"-").concat(String(n)))}),t},xie=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"xs";function i(e){return void 0!==e&&("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e&&e>0)}if(i(e))return["spacing-".concat(t,"-").concat(String(e))];if("object"===typeof e&&!Array.isArray(e)){const t=[];return Object.entries(e).forEach(e=>{let[n,o]=e;i(o)&&t.push("spacing-".concat(n,"-").concat(String(o)))}),t}return[]},Cie=e=>void 0===e?[]:"object"===typeof e?Object.entries(e).map(e=>{let[t,i]=e;return"direction-".concat(t,"-").concat(i)}):["direction-xs-".concat(String(e))];const Sie=["className","children","columns","container","component","direction","wrap","size","offset","spacing","rowSpacing","columnSpacing","unstable_level"],wie=fi(),Mie=sie("div",{name:"MuiGrid",slot:"Root"});function kie(e){return rie({props:e,name:"MuiGrid",defaultTheme:wie})}const Die=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=Mie,useThemeProps:i=kie,useTheme:n=fo,componentName:s="MuiGrid"}=e;function r(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;const n={};return null===e||(Array.isArray(e)?e.forEach((e,o)=>{null!==e&&i(e)&&t.keys[o]&&(n[t.keys[o]]=e)}):"object"===typeof e?Object.keys(e).forEach(t=>{const o=e[t];null!==o&&void 0!==o&&i(o)&&(n[t]=o)}):n[t.keys[0]]=e),n}const a=t(gie,fie,mie,hie,vie,yie,pie),d=o.forwardRef(function(e,t){var d,c,u,h,g,v;const y=n(),b=Po(i(e));!function(e,t){const i=[];void 0!==e.item&&(delete e.item,i.push("item")),void 0!==e.zeroMinWidth&&(delete e.zeroMinWidth,i.push("zeroMinWidth")),t.keys.forEach(t=>{void 0!==e[t]&&(i.push(t),delete e[t])})}(b,y.breakpoints);const{className:x,children:C,columns:S=12,container:w=!1,component:M="div",direction:k="row",wrap:D="wrap",size:I={},offset:A={},spacing:L=0,rowSpacing:N=L,columnSpacing:T=L,unstable_level:R=0}=b,E=l(b,Sie),P=r(I,y.breakpoints,e=>!1!==e),O=r(A,y.breakpoints),F=null!==(d=e.columns)&&void 0!==d?d:R?void 0:S,z=null!==(c=e.spacing)&&void 0!==c?c:R?void 0:L,B=null!==(u=null!==(h=e.rowSpacing)&&void 0!==h?h:e.spacing)&&void 0!==u?u:R?void 0:N,V=null!==(g=null!==(v=e.columnSpacing)&&void 0!==v?v:e.spacing)&&void 0!==g?g:R?void 0:T,G=p(p({},b),{},{level:R,columns:F,container:w,direction:k,wrap:D,spacing:z,rowSpacing:B,columnSpacing:V,size:P,offset:O}),H=((e,t)=>{const{container:i,direction:n,spacing:o,wrap:r,size:a}=e;return f({root:["root",i&&"container","wrap"!==r&&"wrap-xs-".concat(String(r)),...Cie(n),...bie(a),...i?xie(o,t.breakpoints.keys[0]):[]]},e=>Co(s,e),{})})(G,y);return(0,ao.jsx)(a,p(p({ref:t,as:M,ownerState:G,className:m(H.root,x)},E),{},{children:o.Children.map(C,e=>{var t,i;return o.isValidElement(e)&&function(e,t){var i,n;return o.isValidElement(e)&&-1!==t.indexOf(null!==(i=e.type.muiName)&&void 0!==i?i:null===(n=e.type)||void 0===n||null===(n=n._payload)||void 0===n||null===(n=n.value)||void 0===n?void 0:n.muiName)}(e,["Grid"])&&w&&e.props.container?o.cloneElement(e,{unstable_level:null!==(t=null===(i=e.props)||void 0===i?void 0:i.unstable_level)&&void 0!==t?t:R+1}):e})}))});return d.muiName="Grid",d}({createStyledComponent:no("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.container&&t.container]}}),componentName:"MuiGrid",useThemeProps:e=>uo({props:e,name:"MuiGrid"}),useTheme:vo});const Iie=Die;ca.registerModules([nie]);const Aie=e=>{let{rowData:t}=e;const i=t.reduce((e,t)=>{const i=t.year,n=t.revenue,o=t.profit,s=e.find(e=>e.year===i);return s?(s.revenue+=n,s.profit+=o):e.push({year:i,revenue:n,profit:o}),e},[]);return(0,ao.jsx)(pV,{options:{data:i,contextMenu:{enabled:!1},title:{text:"Revenue vs Profit by Year",fontSize:12,fontFamily:"Roboto Serif, serif"},width:400,height:320,axes:{x:{type:"category",title:{text:"Year",fontSize:10,fontFamily:"Roboto Serif, serif",color:"#555555"}},y:{type:"number",title:{text:"Revenue (\u20b9 Lakhs)",fontSize:10,fontFamily:"Roboto Serif, serif",color:"#555555"}}},series:[{type:"line",xKey:"year",yKey:"revenue"},{type:"line",xKey:"year",yKey:"profit"}]}})};ca.registerModules([WG,XB,IU,V2,Pz,YB,fU]);const Lie=()=>{const e=(0,o.useMemo)(()=>{const e=[],t=[2020,2021,2022,2023,2024],i=[{city:"Chennai",state:"Tamil Nadu"},{city:"Bengaluru",state:"Karnataka"},{city:"Hyderabad",state:"Telangana"},{city:"Mumbai",state:"Maharashtra"},{city:"Delhi",state:"Delhi"}],n=["Alphonso","Banganapalli","Totapuri","Kesar","Dasheri"];for(let s=0;s<50;s++){const o=Math.floor(400*Math.random())+100,r=o*(Math.floor(5*Math.random())+8),a=Math.floor(r*(.3*Math.random()+.2));e.push({year:t[s%t.length],city:i[s%i.length].city,state:i[s%i.length].state,variety:n[s%n.length],mangoSales:o,revenue:r,profit:a})}const o={};return e.forEach(e=>{o[e.variety]=(o[e.variety]||0)+e.mangoSales}),Object.entries(o).map(e=>{let[t,i]=e;return{group:t,value:i}}).sort((e,t)=>t.value-e.value)},[]),t=(0,o.useMemo)(()=>({data:e,title:{text:"Top Sold Mango Varieties in India",fontSize:12,fontFamily:"Roboto Serif, serif"},subtitle:{text:"(In Tons)",fontSize:10,fontFamily:"Roboto Serif, serif"},width:400,height:320,seriesArea:{padding:{left:0,right:10}},contextMenu:{enabled:!1},series:[{type:"funnel",stageKey:"group",valueKey:"value",fills:["#05c2f1","#e96219","#ffbd23","#58af16","#126bb9"],tooltip:{enabled:!1},label:{enabled:!0,fontSize:12,formatter:e=>"".concat((new Intl.NumberFormat).format(e.datum.value)," tons")}}]}),[e]);return(0,ao.jsx)(pV,{options:t})},Nie=()=>{const e=[],t=[2021,2022,2023,2024,2025],i=[{city:"Chennai",state:"Tamil Nadu"},{city:"Bengaluru",state:"Karnataka"},{city:"Hyderabad",state:"Telangana"},{city:"Mumbai",state:"Maharashtra"},{city:"Delhi",state:"Delhi"}],n=["Alphonso","Banganapalli","Totapuri","Kesar","Dasheri"];for(let o=0;o<50;o++){const s=Math.floor(400*Math.random())+100,r=s*(Math.floor(5*Math.random())+8),a=Math.floor(r*(.3*Math.random()+.2)),l=a/r*100;e.push({year:t[o%t.length],city:i[o%i.length].city,state:i[o%i.length].state,variety:n[o%n.length],mangoSales:s,revenue:r,profit:a,profitMargin:parseFloat(l.toFixed(2))})}return e},Tie=Nie();var Rie,Eie,Pie=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){const n=t?this.allAsyncListeners:this.allSyncListeners;let o=n.get(e);return!o&&i&&(o=new Set,n.set(e,o)),o}noRegisteredListenersExist(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size}addEventListener(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.getListeners(e,i,!0).add(t)}removeEventListener(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=this.getListeners(e,i,!1);n&&(n.delete(t),0===n.size&&(i?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getGlobalListeners(t).add(e)}removeGlobalListener(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getGlobalListeners(t).delete(e)}dispatchEvent(e){this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){var i;const n=e.type;if(t&&"event"in e){const t=e.event;t instanceof Event&&(e.eventPath=t.composedPath())}const{frameworkOverrides:o}=this,s=e=>{const i=o?()=>o.wrapIncoming(e):e;t?this.dispatchAsync(i):i()},r=this.getListeners(n,t,!1);if((null!==(i=null===r||void 0===r?void 0:r.size)&&void 0!==i?i:0)>0){const t=new Set(r);for(const i of t)null!==r&&void 0!==r&&r.has(i)&&s(()=>i(e))}const a=this.getGlobalListeners(t);if(a.size>0){const t=new Set(a);for(const i of t)s(()=>i(n,e))}}getGlobalListeners(e){return e?this.globalAsyncListeners:this.globalSyncListeners}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const e=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(e):e(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[];for(const t of e)t()}},Oie=e=>null==e||""===e?null:e;function Fie(e){return null!=e&&""!==e}function zie(e){return!Fie(e)}var Bie=e=>null!=e&&"function"===typeof e.toString?e.toString():null,Vie=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return null==e?null==t?0:-1:null==t?1:("object"===typeof e&&e.toNumber&&(e=e.toNumber()),"object"===typeof t&&t.toNumber&&(t=t.toNumber()),i&&"string"===typeof e?e.localeCompare(t):e>t?1:e<t?-1:0)},Gie=/[&<>"']/g,Hie={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function jie(e){var t;return null!==(t=null===e||void 0===e?void 0:e.toString().toString())&&void 0!==t?t:null}function Wie(e){var t,i;return null!==(t=null===(i=jie(e))||void 0===i?void 0:i.replace(Gie,e=>Hie[e]))&&void 0!==t?t:null}function _ie(e){return"string"===typeof e&&e.startsWith("=")&&e.length>1}function Kie(e){return e.eRootDiv.getRootNode()}function Uie(e){return Kie(e).activeElement}function Yie(e){const{gos:t,eRootDiv:i}=e;let n=null;const o=t.get("getDocument");return o&&Fie(o)?n=o():i&&(n=i.ownerDocument),n&&Fie(n)?n:document}function $ie(e){const t=Uie(e);return null===t||t===Yie(e).body}function Zie(e){return Yie(e).defaultView||window}function Xie(e){let t=null,i=null;try{t=Yie(e).fullscreenElement}catch(o){}finally{t||(t=Kie(e));const o=t.querySelector("body");if(o)i=o;else if(t instanceof ShadowRoot)i=t;else if(t instanceof Document){var n;i=null===(n=t)||void 0===n?void 0:n.documentElement}else i=t}return i}function qie(e,t,i){null==i||"string"===typeof i&&""==i?Jie(e,t):Qie(e,t,i)}function Qie(e,t,i){e.setAttribute(ene(t),i.toString())}function Jie(e,t){e.removeAttribute(ene(t))}function ene(e){return"aria-".concat(e)}function tne(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function ine(e,t){qie(e,"label",t)}function nne(e,t){qie(e,"labelledby",t)}function one(e,t){qie(e,"live",t)}function sne(e,t){qie(e,"invalid",t)}function rne(e,t){qie(e,"disabled",t)}function ane(e,t){qie(e,"hidden",t)}function lne(e,t){Qie(e,"expanded",t)}function dne(e){Jie(e,"expanded")}function cne(e,t){Qie(e,"setsize",t)}function une(e,t){Qie(e,"posinset",t)}function hne(e,t){Qie(e,"rowcount",t)}function pne(e,t){Qie(e,"rowindex",t)}function gne(e,t){Qie(e,"colcount",t)}function mne(e,t){Qie(e,"colindex",t)}function fne(e,t){Qie(e,"colspan",t)}function vne(e,t){Qie(e,"sort",t)}function yne(e){Jie(e,"sort")}function bne(e,t){Qie(e,"checked",void 0===t?"mixed":t)}function xne(e,t){qie(e,"owns",t)}function Cne(e,t){return void 0===t?e("ariaIndeterminate","indeterminate"):!0===t?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var Sne="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function wne(e){if(!e)return!1;if(!e.matches("input, select, button, textarea"))return!1;return!!e.matches(Sne)&&Vne(e)}function Mne(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipAriaHidden:n}=i;e.classList.toggle("ag-hidden",!t),n||ane(e,!t)}function kne(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipAriaHidden:n}=i;e.classList.toggle("ag-invisible",!t),n||ane(e,!t)}function Dne(e,t){var i;const n="disabled",o=t?e=>e.setAttribute(n,""):e=>e.removeAttribute(n);o(e);const s=null!==(i=e.querySelectorAll("input"))&&void 0!==i?i:[];for(const r of s)o(r)}function Ine(e,t,i){let n=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,"number"==typeof i){if(++n>i)break}else if(e===i)break}return!1}function Ane(e){const{height:t,width:i,borderTopWidth:n,borderRightWidth:o,borderBottomWidth:s,borderLeftWidth:r,paddingTop:a,paddingRight:l,paddingBottom:d,paddingLeft:c,marginTop:u,marginRight:h,marginBottom:p,marginLeft:g,boxSizing:m}=window.getComputedStyle(e),f=Number.parseFloat;return{height:f(t||"0"),width:f(i||"0"),borderTopWidth:f(n||"0"),borderRightWidth:f(o||"0"),borderBottomWidth:f(s||"0"),borderLeftWidth:f(r||"0"),paddingTop:f(a||"0"),paddingRight:f(l||"0"),paddingBottom:f(d||"0"),paddingLeft:f(c||"0"),marginTop:f(u||"0"),marginRight:f(h||"0"),marginBottom:f(p||"0"),marginLeft:f(g||"0"),boxSizing:m}}function Lne(e){const t=Ane(e);return"border-box"===t.boxSizing?t.height-t.paddingTop-t.paddingBottom-t.borderTopWidth-t.borderBottomWidth:t.height}function Nne(e){const t=Ane(e);return"border-box"===t.boxSizing?t.width-t.paddingLeft-t.paddingRight-t.borderLeftWidth-t.borderRightWidth:t.width}function Tne(e){const{height:t,marginBottom:i,marginTop:n}=Ane(e);return Math.floor(t+i+n)}function Rne(e){const{width:t,marginLeft:i,marginRight:n}=Ane(e);return Math.floor(t+i+n)}function Ene(e){const t=e.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:n,borderRightWidth:o,borderBottomWidth:s}=Ane(e);return{top:t.top+(i||0),left:t.left+(n||0),right:t.right+(o||0),bottom:t.bottom+(s||0)}}function Pne(e,t){let i=e.scrollLeft;return t&&(i=Math.abs(i)),i}function One(e,t,i){i&&(t*=-1),e.scrollLeft=t}function Fne(e){for(;null!==e&&void 0!==e&&e.firstChild;)e.firstChild.remove()}function zne(e){null!==e&&void 0!==e&&e.parentNode&&e.remove()}function Bne(e){return!!e.offsetParent}function Vne(e){if(e.checkVisibility)return e.checkVisibility({checkVisibilityCSS:!0});return!(!Bne(e)||"visible"!==window.getComputedStyle(e).visibility)}function Gne(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function Hne(e){return()=>{const t=e();return!t||(jne(t)||Wne(t))}}function jne(e){return e.clientWidth<e.scrollWidth}function Wne(e){return e.clientHeight<e.scrollHeight}function _ne(e,t){"flex"===t?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):Kne(e,t)}function Kne(e,t){t=Yne(t),e.style.width=t,e.style.maxWidth=t,e.style.minWidth=t}function Une(e,t){t=Yne(t),e.style.height=t,e.style.maxHeight=t,e.style.minHeight=t}function Yne(e){return"number"===typeof e?"".concat(e,"px"):e}function $ne(e){return e instanceof Node||e instanceof HTMLElement}function Zne(e,t,i){null==i||""===i?e.removeAttribute(t):e.setAttribute(t,i.toString())}function Xne(e,t,i){const n=Zie(e).ResizeObserver,o=n?new n(i):null;return null===o||void 0===o||o.observe(t),()=>null===o||void 0===o?void 0:o.disconnect()}function qne(e,t){const i=Zie(e);i.requestAnimationFrame?i.requestAnimationFrame(t):i.webkitRequestAnimationFrame?i.webkitRequestAnimationFrame(t):i.setTimeout(t,0)}var Qne,Jne="data-ref";function eoe(){return null!==Qne&&void 0!==Qne||(Qne=document.createTextNode(" ")),Qne.cloneNode()}function toe(e){const{attrs:t,children:i,cls:n,ref:o,role:s,tag:r}=e,a=document.createElement(r);if(n&&(a.className=n),o&&a.setAttribute(Jne,o),s&&a.setAttribute("role",s),t)for(const l of Object.keys(t))a.setAttribute(l,t[l]);if(i)if("string"===typeof i)a.textContent=i;else{let e=!0;for(const t of i)t&&("string"===typeof t?(a.appendChild(document.createTextNode(t)),e=!1):"function"===typeof t?a.appendChild(t()):(e&&(a.appendChild(eoe()),e=!1),a.append(toe(t)),a.appendChild(eoe())))}return a}var ioe=["touchstart","touchend","touchmove","touchcancel","scroll"],noe=["wheel"],ooe={},soe=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t=>{if("boolean"===typeof ooe[t])return ooe[t];const i=document.createElement(e[t]||"div");return ooe[t="on"+t]=t in i}})();function roe(e,t){return!(!t||!e)&&function(e){const t=e;if(t.path)return t.path;if(t.composedPath)return t.composedPath();return function(e){const t=[];let i=e.target;for(;i;)t.push(i),i=i.parentElement;return t}(t)}(t).indexOf(e)>=0}var aoe=e=>{const t=ioe.includes(e),i=noe.includes(e);return!!t||!i&&void 0};function loe(e,t,i){if(0===i)return!1;const n=Math.abs(e.clientX-t.clientX),o=Math.abs(e.clientY-t.clientY);return Math.max(n,o)<=i}var doe=(e,t)=>{const i=e.identifier;for(let n=0,o=t.length;n<o;++n){const e=t[n];if(e.identifier===i)return e}return null};function coe(e,t){return e.gos.isElementInThisInstance(t.target)}function uoe(e,t,i){const n=e.getBoundingClientRect().height,o=function(e){var t;const i=Xie(e);return null!==(t=null===i||void 0===i?void 0:i.clientWidth)&&void 0!==t?t:window.innerWidth||-1}(i)-2,s=function(e){var t;const i=Xie(e);return null!==(t=null===i||void 0===i?void 0:i.clientHeight)&&void 0!==t?t:window.innerHeight||-1}(i)-2;if(!e.offsetParent)return;const r=Ene(e.offsetParent),{clientY:a,clientX:l}=t;let d=a-r.top-n/2,c=l-r.left-10;const u=Yie(i),h=u.defaultView||window,p=h.pageYOffset||u.documentElement.scrollTop,g=h.pageXOffset||u.documentElement.scrollLeft;o>0&&c+e.clientWidth>o+g&&(c=o+g-e.clientWidth),c<0&&(c=0),s>0&&d+e.clientHeight>s+p&&(d=s+p-e.clientHeight),d<0&&(d=0),e.style.left="".concat(c,"px"),e.style.top="".concat(d,"px")}var hoe=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(const o of i){const[t,i,n,s]=o;t.addEventListener(i,n,s),e.push(o)}},poe=e=>{if(e){for(const[t,i,n,o]of e)t.removeEventListener(i,n,o);e.length=0}},goe=e=>{e.cancelable&&e.preventDefault()};function moe(e,t){return t}function foe(e){var t;return null!==(t=null===e||void 0===e?void 0:e.getLocaleTextFunc())&&void 0!==t?t:moe}var voe=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.beans=e,this.stubContext=e.context,this.eventSvc=e.eventSvc,this.gos=e.gos}destroy(){const{destroyFunctions:e}=this;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,i){this.localEventService||(this.localEventService=new Pie),this.localEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){var n;null===(n=this.localEventService)||void 0===n||n.removeEventListener(e,t,i)}dispatchLocalEvent(e){var t;null===(t=this.localEventService)||void 0===t||t.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventSvc,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const i=[];for(const n of Object.keys(t)){const o=t[n];o&&i.push(this._setupListener(e,n,o))}return i}_setupListener(e,t,i){if(this.destroyed)return()=>null;let n;if(function(e){return void 0!==e.__addEventListener}(e))e.__addEventListener(t,i),n=()=>(e.__removeEventListener(t,i),null);else{const o=function(e){return"global"===e.eventServiceType}(e);e instanceof HTMLElement?function(e,t,i){const n=aoe(t);let o;null!=n&&(o={passive:n}),e.addEventListener(t,i,o)}(e,t,i):o?e.addListener(t,i):e.addEventListener(t,i),n=o?()=>(e.removeListener(t,i),null):()=>(e.removeEventListener(t,i),null)}return this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter(e=>e!==n),null)}setupPropertyListener(e,t){const{gos:i}=this;i.addPropertyEventListener(e,t);const n=()=>(i.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter(e=>e!==n),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupPropertyListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const i=e.join("-")+this.propertyListenerId++,n=e=>{if(e.changeSet){if(e.changeSet&&e.changeSet.id===this.lastChangeSetIdLookup[i])return;this.lastChangeSetIdLookup[i]=e.changeSet.id}const n={type:"propertyChanged",changeSet:e.changeSet,source:e.source};t(n)};for(const o of e)this.setupPropertyListener(o,n)}getLocaleTextFunc(){return foe(this.beans.localeSvc)}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createOptionalManagedBean(e,t){return e?this.createManagedBean(e,t):void 0}createManagedBean(e,t){const i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.stubContext).createBean(e,i)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};var yoe=class extends voe{},boe=new Set,xoe=(e,t)=>{boe.has(t)||(boe.add(t),e())};xoe._set=boe;var Coe={pending:!1,funcs:[]},Soe={pending:!1,funcs:[]};function woe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"setTimeout",i=arguments.length>2?arguments[2]:void 0;const n="raf"===t?Soe:Coe;if(n.funcs.push(e),n.pending)return;n.pending=!0;const o=()=>{const e=n.funcs.slice();n.funcs.length=0,n.pending=!1;for(const t of e)t()};"raf"===t?qne(i,o):window.setTimeout(o,0)}function Moe(e,t,i){let n;return function(){for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];const a=this;return window.clearTimeout(n),n=window.setTimeout(function(){e.isAlive()&&t.apply(a,s)},i),n}}function koe(e,t){let i=0;return function(){const n=Date.now();if(!(n-i<t)){i=n;for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];e.apply(this,s)}}}function Doe(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;const o=Date.now();let s=null,r=!1;const a=()=>{null!=s&&(window.clearInterval(s),s=null)};e.addDestroyFunc(a);const l=()=>{const e=Date.now()-o>n;(t()||e)&&(i(),r=!0,a())};l(),r||(s=window.setInterval(l,10))}var Ioe=new Set(["__proto__","constructor","prototype"]);function Aoe(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Fie(t)&&function(e,t){if(null!=e)if(Array.isArray(e))for(let i=0;i<e.length;i++)t(i.toString(),e[i]);else for(const i of Object.keys(e).filter(e=>!Ioe.has(e)))t(i,e[i])}(t,(t,o)=>{let s=e[t];if(s!==o){if(n){if(null==s&&null!=o){"object"===typeof o&&o.constructor===Object&&(s={},e[t]=s)}}Loe(o)&&Loe(s)&&!Array.isArray(s)?Aoe(s,o,i,n):(i||void 0!==o)&&(e[t]=o)}})}function Loe(e){return"object"===typeof e&&null!==e}var Noe=class e{static applyGlobalGridOptions(t){if(!e.gridOptions)return p({},t);let i={};return Aoe(i,e.gridOptions,!0,!0),"deep"===e.mergeStrategy?Aoe(i,t,!0,!0):i=p(p({},i),t),e.gridOptions.context&&(i.context=e.gridOptions.context),t.context&&("deep"===e.mergeStrategy&&i.context&&Aoe(t.context,i.context,!0,!0),i.context=t.context),i}static applyGlobalGridOption(t,i){if("deep"===e.mergeStrategy){const n=Roe(t);if(n&&"object"===typeof n&&"object"===typeof i)return e.applyGlobalGridOptions({[t]:i})[t]}return i}};Noe.gridOptions=void 0,Noe.mergeStrategy="shallow";var Toe=Noe;function Roe(e){var t;return null===(t=Toe.gridOptions)||void 0===t?void 0:t[e]}var Eoe={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"\t",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,refreshAfterGroupEdit:!1,rowDragInsertDelay:500,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,enableFilterHandlers:!1},Poe="https://www.ag-grid.com";function Ooe(e,t){if(e.get("debug")){for(var i=arguments.length,n=new Array(i>2?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];console.log("AG Grid: "+t,...n)}}function Foe(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];xoe(()=>console.warn("AG Grid: "+e,...i),e+(null===i||void 0===i?void 0:i.join("")))}function zoe(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];xoe(()=>console.error("AG Grid: "+e,...i),e+(null===i||void 0===i?void 0:i.join("")))}var Boe,Voe=new Set,Goe={},Hoe={},joe=!1,Woe=!1,_oe=!1;function Koe(e){var t;Boe||(Boe=e.version);const i=e=>"You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ".concat(e," Please update all modules to the same version.");e.version?function(e){const[t,i]=e.version.split(".")||[],[n,o]=Boe.split(".")||[];return t===n&&i===o}(e)||zoe(i("'".concat(e.moduleName,"' is version ").concat(e.version," but the other modules are version ").concat(Boe,"."))):zoe(i("'".concat(e.moduleName,"' is incompatible.")));const n=null===(t=e.validate)||void 0===t?void 0:t.call(e);n&&!n.isValid&&zoe("".concat(n.message))}function Uoe(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n||(joe=!0),Koe(e);const o=null!==(i=e.rowModels)&&void 0!==i?i:["all"];let s;Voe.add(e),void 0!==t?(Woe=!0,void 0===Hoe[t]&&(Hoe[t]={}),s=Hoe[t]):s=Goe;for(const r of o)void 0===s[r]&&(s[r]={}),s[r][e.moduleName]=e;if(e.dependsOn)for(const r of e.dependsOn)Uoe(r,t,n)}function Yoe(e,t,i){const n=i=>{var n,o;return!(null===(n=Goe[i])||void 0===n||!n[e])||!(null===(o=Hoe[t])||void 0===o||null===(o=o[i])||void 0===o||!o[e])};return n(i)||n("all")}function $oe(){return Woe}function Zoe(e,t){var i,n,o;const s=null!==(i=Hoe[e])&&void 0!==i?i:{};return[...Object.values(null!==(n=s.all)&&void 0!==n?n:{}),...Object.values(null!==(o=s[t])&&void 0!==o?o:{})]}function Xoe(){return _oe}var qoe=class{static register(e){Uoe(e,void 0)}static registerModules(e){for(const t of e)Uoe(t,void 0)}},Qoe="35.0.1",Joe="_version_",ese=null,tse="".concat(Poe,"/javascript-data-grid");function ise(e,t,i){var n,o;return null!==(n=null===(o=ese)||void 0===o?void 0:o(e,t))&&void 0!==n?n:[ase(e,t,i)]}function nse(e,t,i,n,o){e("".concat(n?"warning":"error"," #").concat(t),...ise(t,i,o))}function ose(e){let t=e;return e instanceof Error?t=e.toString():"object"===typeof e&&(t=function(e){if(!e)return String(e);const t={};for(const i of Object.keys(e))"object"!==typeof e[i]&&"function"!==typeof e[i]&&(t[i]=e[i]);return JSON.stringify(t)}(e)),t}function sse(e,t){return"".concat(e,"?").concat(t.toString())}function rse(e,t){const i=new URLSearchParams;if(i.append(Joe,Qoe),t)for(const s of Object.keys(t))i.append(s,ose(t[s]));const n="".concat(tse,"/errors/").concat(e),o=sse(n,i);return o.length<=2e3?o:function(e,t,i){const n=Array.from(t.entries()).sort((e,t)=>t[1].length-e[1].length);let o=sse(e,t);for(const[s,r]of n){if(s===Joe)continue;const n=o.length-i;if(n<=0)break;const a="...",l=n+a.length,d=r.length-l>100?r.slice(0,r.length-l)+a:r.slice(0,100)+a;t.set(s,d),o=sse(e,t)}return o}(n,i,2e3)}var ase=(e,t,i)=>{const n=rse(e,t),o="".concat(i?i+" \n":"","Visit ").concat(n);return Xoe()?o:"".concat(o).concat(i?"":" \n  Alternatively register the ValidationModule to see the full message in the console.")};function lse(){nse(Foe,arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],!0)}function dse(){nse(zoe,arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],!1)}function cse(e,t,i){nse(zoe,e,t,!1,i)}function use(e,t){const i=t[0];return"error #".concat(i," ")+ise(i,t[1],e).join(" ")}function hse(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return use(void 0,t)}function pse(e,t){return e.get("rowModelType")===t}function gse(e,t){return pse(e,"clientSide")}function mse(e,t){return pse(e,"serverSide")}function fse(e,t){return e.get("domLayout")===t}function vse(e){return void 0!==Gse(e)}function yse(e){return"function"===typeof e.get("getRowHeight")}function bse(e){let{gos:t,formula:i}=e;const n=t.get("rowNumbers");return n||!(null===i||void 0===i||!i.active)&&!1!==n}function xse(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;const{gos:o,environment:s}=e;if(null==n&&(n=s.getDefaultRowHeight()),yse(o)){if(i)return{height:n,estimated:!0};const e={node:t,data:t.data},s=o.getCallback("getRowHeight")(e);if(Sse(s))return 0===s&&lse(23),{height:Math.max(1,s),estimated:!1}}if(t.detail&&o.get("masterDetail"))return function(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");if(Sse(t))return{height:t,estimated:!1};return{height:300,estimated:!1}}(o);const r=o.get("rowHeight");return{height:r&&Sse(r)?r:n,estimated:!1}}function Cse(e){const{environment:t,gos:i}=e,n=i.get("rowHeight");if(!n||zie(n))return t.getDefaultRowHeight();const o=t.refreshRowHeightVariable();return-1!==o?o:(lse(24),t.getDefaultRowHeight())}function Sse(e){return!isNaN(e)&&"number"===typeof e&&isFinite(e)}function wse(e,t,i){const n=t[e.getDomDataKey()];return n?n[i]:void 0}function Mse(e,t,i,n){const o=e.getDomDataKey();let s=t[o];zie(s)&&(s={},t[o]=s),s[i]=n}function kse(e){return!e.get("ensureDomOrder")&&e.get("animateRows")}function Dse(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||fse(e,"print"))}function Ise(e){const t=e.get("autoGroupColumnDef");return!(null!==t&&void 0!==t&&t.comparator)&&!e.get("treeData")}function Ase(e){const t=e.get("groupAggFiltering");return"function"===typeof t?e.getCallback("groupAggFiltering"):!0===t?()=>!0:void 0}function Lse(e){return e.get("grandTotalRow")}function Nse(e){const t=e.get("groupTotalRow");return"function"===typeof t?e.getCallback("groupTotalRow"):()=>null!==t&&void 0!==t?t:void 0}function Tse(e){return!!e.get("groupHideOpenParents")||"multipleColumns"===e.get("groupDisplayType")}function Rse(e,t){return!t&&"groupRows"===e.get("groupDisplayType")}function Ese(e,t,i){return!!t.group&&!t.footer&&Rse(e,i)}function Pse(e){const t=e.getCallback("getRowId");return void 0===t?t:e=>{let i=t(e);return"string"!==typeof i&&(xoe(()=>lse(25,{id:i}),"getRowIdString"),i=String(i)),i}}function Ose(e,t){const i=e.get("suppressGroupChangesColumnVisibility");if(!0===i)return!1;if(t&&"suppressHideOnGroup"===i)return!1;if(!t&&"suppressShowOnUngroup"===i)return!1;const n=e.get("suppressRowGroupHidesColumns");if(t&&!0===n)return!1;const o=e.get("suppressMakeColumnVisibleAfterUnGroup");return!(!t&&!0===o)}function Fse(e){var t;return null===(t=null===e||void 0===e?void 0:e.checkboxes)||void 0===t||t}function zse(e){var t;if("object"===typeof e)return null!==(t=e.checkboxLocation)&&void 0!==t?t:"selectionColumn"}function Bse(e){const t=e.get("cellSelection");return void 0!==t?!!t:e.get("enableRangeSelection")}function Vse(e){var t,i;const n=null!==(t=e.get("cellSelection"))&&void 0!==t&&t;return null!==(i="object"===typeof n&&n.enableColumnSelection)&&void 0!==i&&i}function Gse(e){const t="beanName"in e&&"gos"===e.beanName?e.get("rowSelection"):e.rowSelection;if("string"===typeof t)switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(null===t||void 0===t?void 0:t.mode){case"multiRow":case"singleRow":return t.mode;default:return}}function Hse(e){const t=e.get("rowSelection");if("string"===typeof t){const t=e.get("groupSelectsChildren"),i=e.get("groupSelectsFiltered");return t&&i?"filteredDescendants":t?"descendants":"self"}return"multiRow"===(null===t||void 0===t?void 0:t.mode)?t.groupSelects:void 0}function jse(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=e.get("rowSelection");return"object"!==typeof i?t?"all":void 0:"multiRow"===i.mode?i.selectAll:"all"}function Wse(e){const t=Hse(e);return"descendants"===t||"filteredDescendants"===t}function _se(e){return"legacy"===e.get("columnMenu")}function Kse(e,t){return e.addCommon(t)}function Use(e,t){var i,n,o,s;return null!==(i=null!==(n=null!==(o=e[t])&&void 0!==o?o:null===(s=e.gridOptions)||void 0===s?void 0:s[t])&&void 0!==n?n:Roe(t))&&void 0!==i?i:Eoe[t]}function Yse(e,t){let{gos:i}=e;return 2===t.button||t.ctrlKey&&i.get("allowContextMenuWithControlKey")}var $se={resizable:!0,sortable:!0},Zse=0;function Xse(){return Zse++}function qse(e){return e instanceof ere}var Qse=["asc","desc",null],Jse=[{type:"absolute",direction:"asc"},{type:"absolute",direction:"desc"},null],ere=class extends yoe{constructor(e,t,i,n){super(),this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=n,this.isColumn=!0,this.instanceId=Xse(),this.autoHeaderHeight=null,this.sortDef=tre(),this._wasSortExplicitlyRemoved=!1,this.moving=!1,this.resizing=!1,this.menuVisible=!1,this.formulaRef=null,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new Pie,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=Wie(i)}destroy(){var e;super.destroy(),null===(e=this.beans.rowSpanSvc)||void 0===e||e.deregister(this)}getInstanceId(){return this.instanceId}initState(){const{colDef:e,beans:{sortSvc:t,pinnedCols:i,colFlex:n}}=this;null===t||void 0===t||t.initCol(this);const o=e.hide;this.visible=void 0!==o?!o:!e.initialHide,null===i||void 0===i||i.initCol(this),null===n||void 0===n||n.initCol(this)}setColDef(e,t,i){const n=e.spanRows!==this.colDef.spanRows;var o;(this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),n)&&(null===(o=this.beans.rowSpanSvc)||void 0===o||o.deregister(this),this.initRowSpan());this.dispatchColEvent("colDefChanged",i)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.initState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan(),this.addPivotListener()}initDotNotation(){const{gos:e,colDef:{field:t,tooltipField:i}}=this,n=e.get("suppressFieldDotNotation");this.fieldContainsDots=Fie(t)&&t.includes(".")&&!n,this.tooltipFieldContainsDots=Fie(i)&&i.includes(".")&&!n}initMinAndMaxWidths(){var e,t;const i=this.colDef;this.minWidth=null!==(e=i.minWidth)&&void 0!==e?e:this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=null!==(t=i.maxWidth)&&void 0!==t?t:Number.MAX_SAFE_INTEGER}initTooltip(){var e;null===(e=this.beans.tooltipSvc)||void 0===e||e.initCol(this)}initRowSpan(){var e;this.colDef.spanRows&&(null===(e=this.beans.rowSpanSvc)||void 0===e||e.register(this))}addPivotListener(){const e=this.beans.pivotColDefSvc,t=this.colDef.pivotValueColumn;e&&t&&this.addManagedListeners(t,{colDefChanged:t=>{const i=e.recreateColDef(this.colDef);this.setColDef(i,i,t.source)}})}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const i=e.width,n=e.initialWidth;return t=null!=i?i:null!=n?n:200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){var t,i;return null!==(t=null===(i=this.beans.showRowGroupCols)||void 0===i?void 0:i.isRowGroupDisplayed(this,e))&&void 0!==t&&t}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(e,t){this.colEventSvc.addEventListener(e,t)}__removeEventListener(e,t){this.colEventSvc.removeEventListener(e,t)}addEventListener(e,t){var i,n,o,s;this.frameworkEventListenerService=null===(i=(n=this.beans.frameworkOverrides).createLocalEventListenerWrapper)||void 0===i?void 0:i.call(n,this.frameworkEventListenerService,this.colEventSvc);const r=null!==(o=null===(s=this.frameworkEventListenerService)||void 0===s?void 0:s.wrap(e,t))&&void 0!==o?o:t;this.colEventSvc.addEventListener(e,r)}removeEventListener(e,t){var i,n;const o=null!==(i=null===(n=this.frameworkEventListenerService)||void 0===n?void 0:n.unwrap(e,t))&&void 0!==i?i:t;this.colEventSvc.removeEventListener(e,o)}createColumnFunctionCallbackParams(e){return Kse(this.gos,{node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){var t,i;return null!==(t=null===(i=this.beans.cellNavigation)||void 0===i?void 0:i.isSuppressNavigable(this,e))&&void 0!==t&&t}isCellEditable(e){var t,i;return null!==(t=null===(i=this.beans.editSvc)||void 0===i?void 0:i.isCellEditable({rowNode:e,column:this}))&&void 0!==t&&t}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){var t,i;return null!==(t=null===(i=this.beans.selectionSvc)||void 0===i?void 0:i.isCellCheckboxSelection(this,e))&&void 0!==t&&t}isSuppressPaste(e){var t,i;return this.isColumnFunc(e,null!==(t=null===(i=this.colDef)||void 0===i?void 0:i.suppressPaste)&&void 0!==t?t:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){var t;return null!==(t=this.colDef[e])&&void 0!==t?t:$se[e]}isColumnFunc(e,t){if("boolean"===typeof t)return t;if("function"===typeof t){return t(this.createColumnFunctionCallbackParams(e))}return!1}createColumnEvent(e,t){return Kse(this.gos,{type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sortDef.direction}getSortDef(){return this.sortDef.direction?this.sortDef:null}getColDefAllowedSortTypes(){const e=[],{sort:t,initialSort:i}=this.colDef,n=null===t?t:are(null===t||void 0===t?void 0:t.type),o=null===i?i:are(null===i||void 0===i?void 0:i.type);return n&&e.push(n),o&&e.push(o),e}getSortingOrder(){var e,t;const i=this.getColDefAllowedSortTypes().includes("absolute")?Jse:Qse;return(null!==(e=null!==(t=this.colDef.sortingOrder)&&void 0!==t?t:this.gos.get("sortingOrder"))&&void 0!==e?e:i).map(e=>tre(e))}getAvailableSortTypes(){const e=this.getSortingOrder().reduce((e,t)=>(t.direction&&e.push(t.type),e),this.getColDefAllowedSortTypes());return new Set(e)}get wasSortExplicitlyRemoved(){return this._wasSortExplicitlyRemoved}setSortDef(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]||(this._wasSortExplicitlyRemoved=!e.direction),this.sortDef=e}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return"asc"===this.getSort()}isSortDescending(){return"desc"===this.getSort()}isSortNone(){return zie(this.getSort())}isSorting(){return Fie(this.getSort())}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchColEvent("leftChanged",t))}isFilterActive(){return this.filterActive}isHovered(){var e;return lse(261),!(null===(e=this.beans.colHover)||void 0===e||!e.isHovered(this))}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.dispatchColEvent("firstRightPinnedChanged",t))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.dispatchColEvent("lastLeftPinnedChanged",t))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return"left"===this.pinned||"right"===this.pinned}isPinnedLeft(){return"left"===this.pinned}isPinnedRight(){return"right"===this.pinned}getPinned(){return this.pinned}setVisible(e,t){const i=!0===e;this.visible!==i&&(this.visible=i,this.dispatchColEvent("visibleChanged",t)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getFirstRealParent(){let e=this.getOriginalParent();for(;null!==(t=e)&&void 0!==t&&t.isPadding();){var t;e=e.getOriginalParent()}return e}getColumnGroupPaddingInfo(){var e;let t=this.getParent();if(null===(e=t)||void 0===e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const i=t.getPaddingLevel()+1;let n=!0;for(;t;){if(!t.isPadding()){n=!1;break}t=t.getParent()}return{numberOfParents:i,isSpanningTotal:n}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return Kse(this.gos,{node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(zie(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.colSpan(t);return Math.max(i,1)}getRowSpan(e){if(zie(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.rowSpan(t);return Math.max(i,1)}setActualWidth(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,null!=this.flex&&"flex"!==t&&"gridInitializing"!==t&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.dispatchColEvent("widthChanged",e)}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return!0===this.colDef.enablePivot}isAllowValue(){return!0===this.colDef.enableValue}isAllowRowGroup(){return!0===this.colDef.enableRowGroup}isAllowFormula(){return!0===this.colDef.allowFormula}dispatchColEvent(e,t,i){const n=this.createColumnEvent(e,t);i&&Aoe(n,i),this.colEventSvc.dispatchEvent(n)}dispatchStateUpdatedEvent(e){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:e})}};function tre(e){return ore(e)?{direction:e.direction,type:e.type}:{direction:rre(e),type:are(e)}}function ire(e){return"asc"===e||"desc"===e||null===e}function nre(e){return"default"===e||"absolute"===e}function ore(e){if(!e||"object"!==typeof e)return!1;const t=e;return nre(t.type)&&ire(t.direction)}function sre(e,t){return e?t?e.type===t.type&&e.direction===t.direction:!e||null===e.direction:!t||null===t.direction}function rre(e){return ire(e)?e:null}function are(e){return nre(e)?e:"default"}function lre(e){return e instanceof dre}var dre=class extends yoe{constructor(e,t,i,n){super(),this.colGroupDef=e,this.groupId=t,this.padding=i,this.level=n,this.isColumn=!1,this.expandable=!1,this.instanceId=Xse(),this.expandableListenerRemoveCallback=null,this.expanded=!(null===e||void 0===e||!e.openByDefault)}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return!!this.children&&this.children.some(e=>e.isVisible())}isPadding(){return this.padding}setExpanded(e){this.expanded=void 0!==e&&e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}forEachLeafColumn(e){if(this.children)for(const t of this.children)qse(t)?e(t):lre(t)&&t.forEachLeafColumn(e)}addLeafColumns(e){if(this.children)for(const t of this.children)qse(t)?e.push(t):lre(t)&&t.addLeafColumns(e)}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);for(const t of this.getLeafColumns())t.__addEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=()=>{for(const t of this.getLeafColumns())t.__removeEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1;const n=this.findChildrenRemovingPadding();for(let s=0,r=n.length;s<r;s++){const o=n[s];if(!o.isVisible())continue;const r=o.getColumnGroupShow();"open"===r?(e=!0,i=!0):"closed"===r?(t=!0,i=!0):(e=!0,t=!0)}const o=e&&t&&i;this.expandable!==o&&(this.expandable=o,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=i=>{for(const n of i){lre(n)&&n.isPadding()?t(n.children):e.push(n)}};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},cre={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function ure(e,t,i){const n={},o=e.gos;return Object.assign(n,o.get("defaultColGroupDef")),Object.assign(n,t),o.validateColDef(n,i),n}var hre=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=Bie(e);let i=0;for(;;){let n=null!==e&&void 0!==e?e:t;if(n?0!==i&&(n+="_"+i):n=i,!this.existingKeys[n]){const t=String(n);return e&&i>0&&lse(273,{providedId:e,usedId:t}),this.existingKeys[t]=!0,t}i++}}};Object.freeze([]);function pre(e){if(null!==e&&void 0!==e&&e.length)return e[e.length-1]}function gre(e,t,i){if(e===t)return!0;if(!e||!t)return null==e&&null==t;const n=e.length;if(n!==t.length)return!1;for(let o=0;o<n;o++)if(e[o]!==t[o]&&(null===i||void 0===i||!i(e[o],t[o])))return!1;return!0}function mre(e,t){if(e)for(const i of e)if(t(i))return!0}function fre(e,t){const i=e.indexOf(t);i>=0&&e.splice(i,1)}function vre(e,t){let i=0,n=0;for(;i<e.length;i++)t.includes(e[i])||(e[n]=e[i],n++);for(;n<e.length;)e.pop()}function yre(e,t,i){for(let n=0;n<t.length;n++)fre(e,t[n]);for(let n=t.length-1;n>=0;n--)e.splice(i,0,t[n])}var bre="ag-Grid-AutoColumn",xre="ag-Grid-SelectionColumn",Cre="ag-Grid-RowNumbersColumn";function Sre(e){const t=[],i=e=>{for(let n=0;n<e.length;n++){const o=e[n];qse(o)?t.push(o):lre(o)&&i(o.getChildren())}};return i(e),t}function wre(e){return e.reduce((e,t)=>e+t.getActualWidth(),0)}function Mre(e,t,i){const n={};if(!t)return;Kre(null,t,e=>{n[e.getInstanceId()]=e}),i&&Kre(null,i,e=>{n[e.getInstanceId()]=null});const o=Object.values(n).filter(e=>null!=e);e.context.destroyBeans(o)}function kre(e){return e.getId().startsWith(bre)}function Dre(e){var t;const i="string"===typeof e?e:"getColId"in e?e.getColId():e.colId;return null!==(t=null===i||void 0===i?void 0:i.startsWith(xre))&&void 0!==t&&t}function Ire(e){var t;const i="string"===typeof e?e:"getColId"in e?e.getColId():e.colId;return null!==(t=null===i||void 0===i?void 0:i.startsWith(Cre))&&void 0!==t&&t}function Are(e){return Dre(e)||Ire(e)}function Lre(e){let t=[];return e instanceof Array?t=e:"string"===typeof e&&(t=e.split(",")),t}function Nre(e,t){return gre(e,t,(e,t)=>e.getColId()===t.getColId())}function Tre(e){e.map={};for(const t of e.list)e.map[t.getId()]=t}function Rre(e){return"optionsUpdated"===e?"gridOptionsChanged":e}function Ere(e,t){const i=e===t,n=e.getColDef()===t,o=e.getColId()==t;return i||n||o}function Pre(e,t){const i=p(p({},e),{},{sort:void 0,colId:t}),n=Ore(e);return n&&(i.sort=n.direction,i.sortType=n.type),i}function Ore(e){const{sort:t,initialSort:i}=e,n=ore(t)||ire(t),o=ore(i)||ire(i);return n?tre(t):o?tre(i):null}var Fre=(e,t)=>{lre(e)&&e.setupExpandable(),e.originalParent=t};function zre(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;const r=new hre,{existingCols:a,existingGroups:l,existingColKeys:d}=Bre(o);r.addExistingKeys(d);const c=Vre(e,i,0,n,a,r,l,s),{colGroupSvc:u}=e,h=null!==(t=null===u||void 0===u?void 0:u.findMaxDepth(c,0))&&void 0!==t?t:0,p=u?u.balanceColumnTree(c,0,h,r):c;return Kre(null,p,Fre),{columnTree:p,treeDepth:h}}function Bre(e){const t=[],i=[],n=[];return e&&Kre(null,e,e=>{if(lre(e)){const t=e;i.push(t)}else{const i=e;n.push(i.getId()),t.push(i)}}),{existingCols:t,existingGroups:i,existingColKeys:n}}function Vre(e,t,i,n,o,s,r,a){if(!t)return[];const{colGroupSvc:l}=e,d=new Array(t.length);for(let c=0;c<d.length;c++){const u=t[c];l&&_re(u)?d[c]=l.createProvidedColumnGroup(n,u,i,o,s,r,a):d[c]=Gre(e,n,u,o,s,a)}return d}function Gre(e,t,i,n,o,s){var r;const a=function(e,t){if(!t)return;for(let i=0;i<t.length;i++){const n=t[i].getUserProvidedColDef();if(!n)continue;if(null!=e.colId){if(t[i].getId()===e.colId)return{idx:i,column:t[i]};continue}if(null!=e.field){if(n.field===e.field)return{idx:i,column:t[i]}}else if(n===e)return{idx:i,column:t[i]}}return}(i,n);a&&(null===n||void 0===n||n.splice(a.idx,1));let l=null===a||void 0===a?void 0:a.column;if(l){const t=Wre(e,i,l.getColId());l.setColDef(t,i,s),jre(e,l,t,s)}else{const n=o.getUniqueKey(i.colId,i.field),s=Wre(e,i,n);l=new ere(s,i,n,t),e.context.createBean(l)}return null===(r=e.dataTypeSvc)||void 0===r||r.addColumnListeners(l),l}function Hre(e,t,i,n,o,s,r,a){const{sortSvc:l,pinnedCols:d,colFlex:c}=e;void 0!==i&&t.setVisible(!i,a),l&&(l.updateColSort(t,n,a),void 0!==o&&l.setColSortIndex(t,o)),void 0!==s&&(null===d||void 0===d||d.setColPinned(t,s)),void 0!==r&&(null===c||void 0===c||c.setColFlex(t,r))}function jre(e,t,i,n){Hre(e,t,i.hide,i.sort,i.sortIndex,i.pinned,i.flex,n);const o=t.getFlex();if(!(null!=o&&o>0))if(null!=i.width)t.setActualWidth(i.width,n);else{const e=t.getActualWidth();t.setActualWidth(e,n)}}function Wre(e,t,i,n){const{gos:o,dataTypeSvc:s}=e,r={};Aoe(r,o.get("defaultColDef"),!1,!0);const a=function(e,t,i,n){var o,s,r;const a=null===(o=e.dataTypeSvc)||void 0===o?void 0:o.updateColDefAndGetColumnType(t,i,n),l=null!==(s=null!==(r=i.type)&&void 0!==r?r:a)&&void 0!==s?s:t.type;return t.type=l,l?Lre(l):void 0}(e,r,t,i);a&&function(e,t,i){if(!t.length)return;const n=Object.assign({},cre),o=e.gos.get("columnTypes")||{};for(const s of Object.keys(o)){const e=o[s];if(s in n)lse(34,{key:s});else{e.type&&lse(35),n[s]=e}}for(const s of t){const e=n[s.trim()];e?Aoe(i,e,!1,!0):lse(36,{t:s})}}(e,a,r);const l=r.cellDataType;Aoe(r,t,!1,!0),void 0!==l&&(r.cellDataType=l);const d=o.get("autoGroupColumnDef"),c=Ise(o);return t.rowGroup&&d&&c&&Aoe(r,{sort:d.sort,initialSort:d.initialSort},!1,!0),null===s||void 0===s||s.postProcess(r),null===s||void 0===s||s.validateColDef(r),o.validateColDef(r,i,n),r}function _re(e){return void 0!==e.children}function Kre(e,t,i){if(t)for(let n=0;n<t.length;n++){const o=t[n];lre(o)&&Kre(o,o.getChildren(),i),i(o,e)}}function Ure(e,t){const i=[],n=[],o=[];e.forEach(e=>{const t=e.getColDef().lockPosition;"right"===t?o.push(e):"left"===t||!0===t?i.push(e):n.push(e)});return t.get("enableRtl")?[...o,...n,...i]:[...i,...n,...o]}function Yre(e,t){let i=!0;return Kre(null,t,t=>{if(!lre(t))return;const n=t,o=n.getColGroupDef();if(!(null===o||void 0===o?void 0:o.marryChildren))return;const s=[];for(const i of n.getLeafColumns()){const t=e.indexOf(i);s.push(t)}Math.max.apply(Math,s)-Math.min.apply(Math,s)>n.getLeafColumns().length-1&&(i=!1)}),i}function $re(e,t){if(!e||0==e.length)return;const i=t(e[0]);for(let n=1;n<e.length;n++)if(i!==t(e[n]))return;return i}function Zre(e,t,i){if(!t.length)return;const n=1===t.length?t[0]:null,o=$re(t,e=>e.getPinned());e.dispatchEvent({type:"columnPinned",pinned:null!=o?o:null,columns:t,column:n,source:i})}function Xre(e,t,i,n){e.dispatchEvent({type:t,columns:i,column:i&&1==i.length?i[0]:null,source:n})}function qre(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;null!==t&&void 0!==t&&t.length&&e.dispatchEvent({type:"columnResized",columns:t,column:1===t.length?t[0]:null,flexColumns:o,finished:i,source:n})}function Qre(e,t,i){var n;const{colModel:o,rowGroupColsSvc:s,pivotColsSvc:r,autoColSvc:a,selectionColSvc:l,colAnimation:d,visibleCols:c,pivotResultCols:u,environment:h,valueColsSvc:p,eventSvc:g,gos:m}=e,f=null!==(n=o.getColDefCols())&&void 0!==n?n:[],v=null===l||void 0===l?void 0:l.getColumns();if(!f.length&&(null===v||void 0===v||!v.length))return!1;if(null!==t&&void 0!==t&&t.state&&!t.state.forEach)return lse(32),!1;const y=(n,o,a,l,d)=>{if(!n)return;const c=((e,t)=>(i,n)=>{const o={value1:void 0,value2:void 0};let s=!1;return e&&(void 0!==e[i]&&(o.value1=e[i],s=!0),Fie(n)&&void 0!==e[n]&&(o.value2=e[n],s=!0)),!s&&t&&(void 0!==t[i]&&(o.value1=t[i]),Fie(n)&&void 0!==t[n]&&(o.value2=t[n])),o})(o,t.defaultState),u=c("flex").value1,g=c("sort").value1,m=c("sortType").value1,f=ire(g)||nre(m),v=are(m),y=rre(g),b=f?{type:v,direction:y}:void 0;if(Hre(e,n,c("hide").value1,b,c("sortIndex").value1,c("pinned").value1,u,i),null==u){const e=c("width").value1;if(null!=e){var x;const t=null!==(x=n.getColDef().minWidth)&&void 0!==x?x:h.getDefaultColumnMinWidth();null!=t&&e>=t&&n.setActualWidth(e,i)}}!d&&n.isPrimary()&&(null===p||void 0===p||p.syncColumnWithState(n,i,c),null===s||void 0===s||s.syncColumnWithState(n,i,c,a),null===r||void 0===r||r.syncColumnWithState(n,i,c,l))},b=(n,d,u)=>{var h,p,f,v;const b=eae(e,i),x=d.slice(),C={},S={},w=[],M=[],k=[];let D=0;const I=null!==(h=null===s||void 0===s?void 0:s.columns.slice())&&void 0!==h?h:[],A=null!==(p=null===r||void 0===r?void 0:r.columns.slice())&&void 0!==p?p:[];for(const e of n){const t=e.colId;if(t.startsWith(bre)){w.push(e),k.push(e);continue}if(Dre(t)){M.push(e),k.push(e);continue}const i=u(t);i?(y(i,e,C,S,!1),fre(x,i)):(k.push(e),D+=1)}const L=e=>y(e,null,C,S,!1);x.forEach(L),null===s||void 0===s||s.sortColumns(nae.bind(s,C,I)),null===r||void 0===r||r.sortColumns(nae.bind(r,S,A)),o.refreshCols(!1,i);const N=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(const n of t){const t=e(n.colId);fre(i,t),y(t,n,null,null,!0)}i.forEach(L)};return N(e=>{var t;return null!==(t=null===a||void 0===a?void 0:a.getColumn(e))&&void 0!==t?t:null},w,null===a||void 0===a||null===(f=a.getColumns())||void 0===f?void 0:f.slice()),N(e=>{var t;return null!==(t=null===l||void 0===l?void 0:l.getColumn(e))&&void 0!==t?t:null},M,null===l||void 0===l||null===(v=l.getColumns())||void 0===v?void 0:v.slice()),function(e,t,i){if(!e.applyOrder||!e.state)return;const n=[];for(const o of e.state)null!=o.colId&&n.push(o.colId);!function(e,t,i,n){if(null==e)return;let o=[];const s={};for(const a of t){if(s[a])continue;const t=e.map[a];t&&(o.push(t),s[a]=!0)}let r=0;for(const a of e.list){const e=a.getColId();if(null!=s[e])continue;e.startsWith(bre)?o.splice(r++,0,a):o.push(a)}if(o=Ure(o,n),!Yre(o,i.getColTree()))return void lse(39);e.list=o}(t.cols,n,t,i)}(t,o,m),c.refresh(i),g.dispatchEvent({type:"columnEverythingChanged",source:i}),b(),{unmatchedAndAutoStates:k,unmatchedCount:D}};null===d||void 0===d||d.start();let{unmatchedAndAutoStates:x,unmatchedCount:C}=b(t.state||[],f,e=>o.getColDefCol(e));if(x.length>0||Fie(t.defaultState)){var S,w;C=b(x,null!==(S=null===u||void 0===u||null===(w=u.getPivotResultCols())||void 0===w?void 0:w.list)&&void 0!==S?S:[],e=>{var t;return null!==(t=null===u||void 0===u?void 0:u.getPivotResultCol(e))&&void 0!==t?t:null}).unmatchedCount}return null===d||void 0===d||d.finish(),0===C}function Jre(e,t){var i,n,o,s;const{colModel:r,autoColSvc:a,selectionColSvc:l,eventSvc:d,gos:c}=e,u=r.getColDefCols();if(null===u||void 0===u||!u.length)return;const h=Sre(r.getColDefColTree()),p=[];let g=1e3,m=1e3;const f=e=>{const t=iae(e);zie(t.rowGroupIndex)&&t.rowGroup&&(t.rowGroupIndex=g++),zie(t.pivotIndex)&&t.pivot&&(t.pivotIndex=m++),p.push(t)};null===a||void 0===a||null===(i=a.getColumns())||void 0===i||i.forEach(f),null===l||void 0===l||null===(n=l.getColumns())||void 0===n||n.forEach(f),null===h||void 0===h||h.forEach(f),Qre(e,{state:p},t);const v=null!==(o=null===a||void 0===a?void 0:a.getColumns())&&void 0!==o?o:[];Qre(e,{state:[...null!==(s=null===l||void 0===l?void 0:l.getColumns())&&void 0!==s?s:[],...v,...u].map(e=>({colId:e.colId})),applyOrder:!0},t),d.dispatchEvent(Kse(c,{type:"columnsReset",source:t}))}function eae(e,t){var i,n,o;const{rowGroupColsSvc:s,pivotColsSvc:r,valueColsSvc:a,colModel:l,sortSvc:d,eventSvc:c}=e,u={rowGroupColumns:null!==(i=null===s||void 0===s?void 0:s.columns.slice())&&void 0!==i?i:[],pivotColumns:null!==(n=null===r||void 0===r?void 0:r.columns.slice())&&void 0!==n?n:[],valueColumns:null!==(o=null===a||void 0===a?void 0:a.columns.slice())&&void 0!==o?o:[]},h=tae(e),p={};for(const g of h)p[g.colId]=g;return()=>{var i,n;const o=(e,i,n,o)=>{if(gre(i.map(o),n.map(o)))return;const s=new Set(i);for(const t of n)s.delete(t)||s.add(t);const r=[...s];c.dispatchEvent({type:e,columns:r,column:1===r.length?r[0]:null,source:t})},a=e=>{const t=[];return l.forAllCols(i=>{const n=p[i.getColId()];n&&e(n,i)&&t.push(i)}),t},g=e=>e.getColId();o("columnRowGroupChanged",u.rowGroupColumns,null!==(i=null===s||void 0===s?void 0:s.columns)&&void 0!==i?i:[],g),o("columnPivotChanged",u.pivotColumns,null!==(n=null===r||void 0===r?void 0:r.columns)&&void 0!==n?n:[],g);const m=a((e,t)=>{const i=null!=e.aggFunc,n=i!=t.isValueActive(),o=i&&e.aggFunc!=t.getAggFunc();return n||o});m.length>0&&Xre(c,"columnValueChanged",m,t);qre(c,a((e,t)=>e.width!=t.getActualWidth()),!0,t);Zre(c,a((e,t)=>e.pinned!=t.getPinned()),t);!function(e,t,i){if(!t.length)return;const n=1===t.length?t[0]:null,o=$re(t,e=>e.isVisible());e.dispatchEvent({type:"columnVisible",visible:o,columns:t,column:n,source:i})}(c,a((e,t)=>e.hide==t.isVisible()),t);const f=a((e,t)=>!sre(t.getSortDef(),{type:are(e.sortType),direction:rre(e.sort)})||e.sortIndex!=t.getSortIndex());f.length>0&&(null===d||void 0===d||d.dispatchSortChangedEvents(t,f));const v=tae(e);!function(e,t,i,n,o){const s={};for(const c of t)s[c.colId]=c;const r={};for(const c of e)s[c.colId]&&(r[c.colId]=!0);const a=e.filter(e=>r[e.colId]),l=t.filter(e=>r[e.colId]),d=[];if(l.forEach((e,t)=>{const i=null===a||void 0===a?void 0:a[t];if(i&&i.colId!==e.colId){const e=n.getCol(i.colId);e&&d.push(e)}}),!d.length)return;o.dispatchEvent({type:"columnMoved",columns:d,column:1===d.length?d[0]:null,finished:!0,source:i})}(h,v,t,l,c)}}function tae(e){const{colModel:t,rowGroupColsSvc:i,pivotColsSvc:n}=e;if(zie(t.getColDefCols())||!t.isAlive())return[];const o=null===i||void 0===i?void 0:i.columns,s=null===n||void 0===n?void 0:n.columns,r=[];t.forAllCols(e=>(e=>{var t,i;const n=e.isRowGroupActive()&&o?o.indexOf(e):null,a=e.isPivotActive()&&s?s.indexOf(e):null,l=e.isValueActive()?e.getAggFunc():null,d=null!=e.getSortIndex()?e.getSortIndex():null;r.push({colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:e.getSort(),sortType:null===(t=e.getSortDef())||void 0===t?void 0:t.type,sortIndex:d,aggFunc:l,rowGroup:e.isRowGroupActive(),rowGroupIndex:n,pivot:e.isPivotActive(),pivotIndex:a,flex:null!==(i=e.getFlex())&&void 0!==i?i:null})})(e));const a=new Map(t.getCols().map((e,t)=>[e.getColId(),t]));return r.sort((e,t)=>(a.has(e.colId)?a.get(e.colId):-1)-(a.has(t.colId)?a.get(t.colId):-1)),r}function iae(e){const t=(e,t)=>null!=e?e:null!=t?t:null,i=e.getColDef(),n=tre(t(i.sort,i.initialSort)),o=n.direction,s=n.type,r=t(i.sortIndex,i.initialSortIndex),a=t(i.hide,i.initialHide),l=t(i.pinned,i.initialPinned),d=t(i.width,i.initialWidth),c=t(i.flex,i.initialFlex);let u=t(i.rowGroupIndex,i.initialRowGroupIndex),h=t(i.rowGroup,i.initialRowGroup);null!=u||h||(u=null,h=null);let p=t(i.pivotIndex,i.initialPivotIndex),g=t(i.pivot,i.initialPivot);null!=p||g||(p=null,g=null);const m=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:o,sortType:s,sortIndex:r,hide:a,pinned:l,width:d,flex:c,rowGroup:h,rowGroupIndex:u,pivot:g,pivotIndex:p,aggFunc:m}}var nae=(e,t,i,n)=>{const o=e[i.getId()],s=e[n.getId()],r=null!=o,a=null!=s;if(r&&a)return o-s;if(r)return-1;if(a)return 1;const l=t.indexOf(i),d=t.indexOf(n),c=l>=0;return c&&d>=0?l-d:c?-1:1},oae=class extends yoe{constructor(){super(...arguments),this.dispatchColumnChangedEvent=Xre,this.columns=[],this.columnIndexMap={},this.updateIndexMap=()=>{this.columnIndexMap={},this.columns.forEach((e,t)=>this.columnIndexMap[e.getId()]=t)}}wireBeans(e){this.colModel=e.colModel,this.aggFuncSvc=e.aggFuncSvc,this.visibleCols=e.visibleCols,this.groupHierarchCols=e.groupHierarchyColSvc}sortColumns(e){const{groupHierarchCols:t}=this;this.columns.sort((i,n)=>{var o;return null!==(o=null===t||void 0===t?void 0:t.compareVirtualColumns(i,n))&&void 0!==o?o:e(i,n)}),this.updateIndexMap()}setColumns(e,t){this.setColList(e,this.columns,this.eventName,!0,!0,this.columnProcessors.set,t)}addColumns(e,t){this.updateColList(e,this.columns,!0,!0,this.columnProcessors.add,this.eventName,t)}removeColumns(e,t){this.updateColList(e,this.columns,!1,!0,this.columnProcessors.remove,this.eventName,t)}getColumnIndex(e){return this.columnIndexMap[e]}setColList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0;const a=this.colModel.getCols();if(!a||0===a.length)return;const l=new Map;t.forEach((e,t)=>l.set(e,t)),t.length=0;for(const c of e){const e=this.colModel.getColDefCol(c);e&&t.push(e)}t.forEach((e,t)=>{const i=l.get(e);void 0!==i?n&&i!==t||l.delete(e):l.set(e,0)}),this.updateIndexMap();const d=this.colModel.getColDefCols();for(const c of null!==d&&void 0!==d?d:[]){s(c,t.indexOf(c)>=0,r)}o&&this.colModel.refreshCols(!1,r),this.visibleCols.refresh(r),this.dispatchColumnChangedEvent(this.eventSvc,i,[...l.keys()],r)}updateColList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0;if(!e||0===e.length)return;let a=!1;const l=new Set;for(const c of e){if(!c)continue;const e=this.colModel.getColDefCol(c);if(e){if(l.add(e),i){if(t.indexOf(e)>=0)continue;t.push(e)}else{const i=t.indexOf(e);if(i<0)continue;for(let e=i+1;e<t.length;e++)l.add(t[e]);fre(t,e)}o(e,i,r),a=!0}}if(!a)return;this.updateIndexMap(),n&&this.colModel.refreshCols(!1,r),this.visibleCols.refresh(r);const d=Array.from(l);this.eventSvc.dispatchEvent({type:s,columns:d,column:1===d.length?d[0]:null,source:r})}extractCols(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=this.columns,n=[],o=[],{setFlagFunc:s,getIndexFunc:r,getInitialIndexFunc:a,getValueFunc:l,getInitialValueFunc:d}=this.columnExtractors,c=this.colModel.getColDefCols();for(const m of null!==c&&void 0!==c?c:[]){const e=!t.includes(m),s=m.getColDef(),c=l(s),u=d(s),h=r(s),p=a(s);let g;if(g=void 0!==c?c:void 0!==h?null!==h&&h>=0:e?void 0!==u?u:!!(void 0!==p)&&(null!=p&&p>=0):i.indexOf(m)>=0,g){(e?null!=h||null!=p:null!=h)?n.push(m):o.push(m)}}const u=e=>{var t;const i=e.getColDef();return null!==(t=r(i))&&void 0!==t?t:a(i)};n.sort((e,t)=>u(e)-u(t));const h=[],p=this.groupHierarchCols,g=e=>{p?p.expandColumnInto(h,e):h.push(e)};n.forEach(g);for(const m of i)o.indexOf(m)>=0&&g(m);for(const m of o)h.indexOf(m)<0&&g(m);for(const m of i)h.indexOf(m)<0&&s(m,!1,e);for(const m of h)i.indexOf(m)<0&&s(m,!0,e);return this.columns=h,this.updateIndexMap(),this.columns}restoreColumnOrder(e,t){const i=this.columns,n=this.colModel.getColDefCols();if(!i.length||!n)return e;const o=Object.keys(t),s=new Set(o),r=new Set(o),a=new Set(i.map(e=>{const t=e.getColId();return r.delete(t),t}).concat(o)),l=[],d={};let c=0;for(let b=0;b<n.length;b++){const e=n[b].getColId();a.has(e)&&(l.push(e),d[e]=c++)}let u=1e3,h=!1,p=0;const g=this.columnOrdering.enableProp,m=this.columnOrdering.initialEnableProp,f=this.columnOrdering.indexProp,v=this.columnOrdering.initialIndexProp,y=e=>{const i=d[e];for(let n=p;n<i;n++){const e=l[n];r.has(e)&&(t[e][f]=u++,r.delete(e))}p=i};for(const b of i){const i=b.getColId();if(s.has(i))y(i),t[i][f]=u++;else{const n=b.getColDef();if(null===n[f]||void 0===n[f]&&null==n[v]){if(!h){if(n[g]||void 0===n[g]&&n[m])y(i);else{for(const e of r)t[e][f]=u+d[e];u+=l.length,h=!0}}e[i]||(e[i]={colId:i}),e[i][f]=u++}}}return e}},sae=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let i;return i="number"!==typeof t?0:t+1,this.existingIds[e]=i,i}},rae=class extends yoe{};function aae(e,t,i){return i&&e.addDestroyFunc(()=>t.destroyBean(i)),null!==i&&void 0!==i?i:e}var lae=null;var dae=class{constructor(e){this.cssClassStates={},this.getGui=e}toggleCss(e,t){if(!e)return;if(e.includes(" ")){const i=(e||"").split(" ");if(i.length>1){for(const e of i)this.toggleCss(e,t);return}}var i;this.cssClassStates[e]!==t&&e.length&&(null===(i=this.getGui())||void 0===i||i.classList.toggle(e,t),this.cssClassStates[e]=t)}},cae=0,uae=class extends voe{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=cae++,this.cssManager=new dae(()=>this.eGui),this.componentSelectors=new Map((null!==t&&void 0!==t?t:[]).map(e=>[e.selector,e])),e&&this.setTemplate(e)}preConstruct(){var e;this.wireTemplate(this.getGui());const t="component-"+(null===(e=Object.getPrototypeOf(this))||void 0===e||null===(e=e.constructor)||void 0===e?void 0:e.name);for(const n of null!==(i=this.css)&&void 0!==i?i:[]){var i;this.beans.environment.addGlobalCSS(n,t)}}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getDataRefAttribute(e){return e.getAttribute?e.getAttribute(Jne):null}applyElementsToComponent(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(void 0===t&&(t=this.getDataRefAttribute(e)),t){const o=this[t];if(o===lae)this[t]=null!==n&&void 0!==n?n:e;else{const e=null===i||void 0===i?void 0:i[t];if(!this.suppressDataRefValidation&&!e)throw new Error("data-ref: ".concat(t," on ").concat(this.constructor.name," with ").concat(o))}}}createChildComponentsFromTags(e,t){const i=[];for(const o of null!==(n=e.childNodes)&&void 0!==n?n:[]){var n;i.push(o)}for(const o of i){if(!(o instanceof HTMLElement))continue;const i=this.createComponentFromElement(o,e=>{const t=e.getGui();if(t)for(const n of null!==(i=o.attributes)&&void 0!==i?i:[]){var i;t.setAttribute(n.name,n.value)}},t);if(i){if(i.addItems&&o.children.length){this.createChildComponentsFromTags(o,t);const e=Array.prototype.slice.call(o.children);i.addItems(e)}this.swapComponentForNode(i,e,o)}else o.childNodes&&this.createChildComponentsFromTags(o,t)}}createComponentFromElement(e,t,i){const n=e.nodeName,o=this.getDataRefAttribute(e),s=0===n.indexOf("AG-"),r=s?this.componentSelectors.get(n):null;let a=null;if(r){const e=i&&o?i[o]:void 0;a=new r.component(e),a.setParentComponent(this),this.createBean(a,null,t)}else if(s)throw new Error("selector: ".concat(n));return this.applyElementsToComponent(e,o,i,a),a}swapComponentForNode(e,t,i){const n=e.getGui();t.replaceChild(n,i),t.insertBefore(document.createComment(i.nodeName),n),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e,t){const i=null!==t&&void 0!==t?t:this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui());for(const n of e)n.setAttribute("tabindex",i.toString())}setTemplate(e,t,i){let n;n="string"===typeof e||null==e?Gne(e):toe(e),this.setTemplateFromElement(n,t,i)}setTemplateFromElement(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.eGui=e,this.suppressDataRefValidation=n,t)for(let o=0;o<t.length;o++){const e=t[o];this.componentSelectors.set(e.selector,e)}this.wireTemplate(e,i)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let i=t;return null==e?null:(i||(i=this.eGui),$ne(e)?{element:e,parent:i}:{element:e.getGui(),parent:i})}prependChild(e,t){const{element:i,parent:n}=this.getContainerAndElement(e,t)||{};i&&n&&n.insertAdjacentElement("afterbegin",i)}appendChild(e,t){const{element:i,parent:n}=this.getContainerAndElement(e,t)||{};i&&n&&n.appendChild(i)}isDisplayed(){return this.displayed}setVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e!==this.visible){this.visible=e;const{skipAriaHidden:i}=t;kne(this.eGui,e,{skipAriaHidden:i})}}setDisplayed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:i}=t;Mne(this.eGui,e,{skipAriaHidden:i});const n={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(n)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(e,t,i){this.eGui.addEventListener(e,t,i),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCss(e){this.cssManager.toggleCss(e,!0)}removeCss(e){this.cssManager.toggleCss(e,!1)}toggleCss(e,t){this.cssManager.toggleCss(e,t)}registerCSS(e){this.css||(this.css=[]),this.css.push(e)}},hae=class extends uae{};var pae=class e{constructor(e){this.status=0,this.resolution=null,this.waiters=[],e(e=>this.onDone(e),e=>this.onReject(e))}static all(t){return t.length?new e(e=>{let i=t.length;const n=new Array(i);t.forEach((t,o)=>{t.then(t=>{n[o]=t,i--,0===i&&e(n)})})}):e.resolve()}static resolve(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new e(e=>e(t))}then(t){return new e(e=>{1===this.status?e(t(this.resolution)):this.waiters.push(i=>e(t(i)))})}onDone(e){this.status=1,this.resolution=e;for(const t of this.waiters)t(e)}onReject(e){}};function gae(e,t,i,n){const{name:o}=i;let s,r,a,l,d,c;if(t){const i=t,u=i[o+"Selector"],h=u?u(n):null,p=t=>{if("string"===typeof t)s=t;else if(null!=t&&!0!==t){e.isFrameworkComponent(t)?a=t:r=t}};h?(p(h.component),l=h.params,d=h.popup,c=h.popupPosition):p(i[o])}return{compName:s,jsComp:r,fwComp:a,paramsFromSelector:l,popupFromSelector:d,popupPositionFromSelector:c}}var mae={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},fae={name:"headerComponent",optionalMethods:["refresh"]},vae={name:"innerHeaderComponent"},yae={name:"innerHeaderGroupComponent"},bae={name:"headerGroupComponent"},xae={name:"innerRenderer",cellRenderer:!0,optionalMethods:["afterGuiAttached"]},Cae={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},Sae={name:"loadingCellRenderer",cellRenderer:!0},wae={name:"tooltipComponent"},Mae={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},kae={name:"loadingCellRenderer",cellRenderer:!0},Dae={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},Iae={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};function Aae(e,t,i){return e.getCompDetails(t,xae,void 0,i)}function Lae(e,t,i){return e.getCompDetails(t,Cae,void 0,i)}function Nae(e,t,i){return e.getCompDetails(t,Sae,"agSkeletonCellRenderer",i,!0)}function Tae(e){const t=e;return null!=(null===t||void 0===t?void 0:t.getFrameworkComponentInstance)?t.getFrameworkComponentInstance():e}function Rae(e){return"object"===typeof e&&!!e.getComp}var Eae={BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",DELETE:"Delete",F2:"F2",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",PAGE_HOME:"Home",PAGE_END:"End",A:"KeyA",C:"KeyC",D:"KeyD",V:"KeyV",X:"KeyX",Y:"KeyY",Z:"KeyZ"};function Pae(e){const{keyCode:t}=e;let i;switch(t){case 65:i=Eae.A;break;case 67:i=Eae.C;break;case 86:i=Eae.V;break;case 68:i=Eae.D;break;case 90:i=Eae.Z;break;case 89:i=Eae.Y;break;default:i=e.code}return i}var Oae,Fae,zae,Bae,Vae,Gae,Hae,jae=class extends uae{isPopup(){return!0}setParentComponent(e){e.addCss("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;(null===e||void 0===e?void 0:e.isAlive())&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}};function Wae(){return void 0===Oae&&(Oae=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),Oae}function _ae(){return void 0===Fae&&(Fae=/(firefox)/i.test(navigator.userAgent)),Fae}function Kae(){return void 0===zae&&(zae=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),zae}function Uae(){return void 0===Bae&&(Bae=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),Bae}function Yae(e){if(!e)return null;const t=e.tabIndex,i=e.getAttribute("tabIndex");return-1!==t||null!==i&&(""!==i||_ae())?t.toString():null}function $ae(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let i=t.offsetWidth-t.clientWidth;0===i&&0===t.clientWidth&&(i=null),t.parentNode&&t.remove(),null!=i&&(Gae=i,Vae=0===i)}function Zae(){return null==Vae&&$ae(),Vae}var Xae=!1,qae=0;function Qae(e){const t=Xae,i="keydown"===e.type;i&&(e.ctrlKey||e.metaKey||e.altKey)||t!==i&&(Xae=i)}function Jae(e){const t=Yie(e);var i;return i=t,qae>0||(i.addEventListener("keydown",Qae),i.addEventListener("mousedown",Qae)),qae++,()=>{qae--,function(e){qae>0||(e.removeEventListener("keydown",Qae),e.removeEventListener("mousedown",Qae))}(t)}}function ele(){return Xae}function tle(e,t){let i=Sne;t&&(i+=", "+t),arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(i+=', [tabindex="-1"]');const n=Array.prototype.slice.apply(e.querySelectorAll("[tabindex], input, select, button, textarea, [href]")).filter(e=>Vne(e)),o=Array.prototype.slice.apply(e.querySelectorAll(i));if(!o.length)return n;return s=o,n.filter(e=>-1===s.indexOf(e));var s}function ile(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=tle(e,arguments.length>3&&void 0!==arguments[3]&&arguments[3]?".ag-tab-guard":null,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),n=t?pre(i):i[0];return!!n&&(n.focus({preventScroll:!0}),!0)}function nle(e,t,i,n){const o=tle(t,i?':not([tabindex="-1"])':null),s=Uie(e);let r;r=i?o.findIndex(e=>e.contains(s)):o.indexOf(s);const a=r+(n?-1:1);return a<0||a>=o.length?null:o[a]}function ole(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,i=0;for(;e&&null===Yae(e)&&++i<=t;)e=e.parentElement;return null===Yae(e)?null:e}var sle="ag-focus-managed",rle=class extends voe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isStopPropagation:()=>!1,stopPropagation:()=>{}},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.eFocusable=e,this.stopPropagationCallbacks=t,this.callbacks=i,this.callbacks=p({shouldStopEventPropagation:()=>!1,onTabKeyDown:e=>{if(e.defaultPrevented)return;const t=nle(this.beans,this.eFocusable,!1,e.shiftKey);t&&(t.focus(),e.preventDefault())}},i)}postConstruct(){const{eFocusable:e,callbacks:{onFocusIn:t,onFocusOut:i}}=this;e.classList.add(sle),this.addKeyDownListeners(e),t&&this.addManagedElementListeners(e,{focusin:t}),i&&this.addManagedElementListeners(e,{focusout:i})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:e=>{if(e.defaultPrevented||this.stopPropagationCallbacks.isStopPropagation(e))return;const{callbacks:t}=this;t.shouldStopEventPropagation(e)?this.stopPropagationCallbacks.stopPropagation(e):e.key===Eae.TAB?t.onTabKeyDown(e):t.handleKeyDown&&t.handleKeyDown(e)}})}},ale="ag-tab-guard",lle="ag-tab-guard-top",dle="ag-tab-guard-bottom",cle=class extends voe{constructor(e,t){super(),this.stopPropagationCallbacks=t,this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:i,eTopGuard:n,eBottomGuard:o,focusTrapActive:s,forceFocusOutWhenTabGuardsAreEmpty:r,isFocusableContainer:a,focusInnerElement:l,onFocusIn:d,onFocusOut:c,shouldStopEventPropagation:u,onTabKeyDown:h,handleKeyDown:p,isEmpty:g,eFocusableElement:m}=e;this.comp=i,this.eTopGuard=n,this.eBottomGuard=o,this.providedFocusInnerElement=l,this.eFocusableElement=m,this.focusTrapActive=!!s,this.forceFocusOutWhenTabGuardsAreEmpty=!!r,this.isFocusableContainer=!!a,this.providedFocusIn=d,this.providedFocusOut=c,this.providedShouldStopEventPropagation=u,this.providedOnTabKeyDown=h,this.providedHandleKeyDown=p,this.providedIsEmpty=g}postConstruct(){this.createManagedBean(new rle(this.eFocusableElement,this.stopPropagationCallbacks,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards();for(const e of[this.eTopGuard,this.eBottomGuard])this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)})}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);if(this.skipTabGuardFocus)return void(this.skipTabGuardFocus=!1);if(this.forceFocusOutWhenTabGuardsAreEmpty){if(this.providedIsEmpty?this.providedIsEmpty():0===tle(this.eFocusableElement,".ag-tab-guard").length)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}findNextElementOutsideAndFocus(e){var t;const i=tle(Yie(this.beans).body,null,!0),n=i.indexOf(e?this.eTopGuard:this.eBottomGuard);if(-1===n)return;let o,s;e?(o=0,s=n):(o=n+1,s=i.length);const r=i.slice(o,s),a=this.gos.get("tabIndex");r.sort((e,t)=>{const i=Number.parseInt(e.getAttribute("tabindex")||"0"),n=Number.parseInt(t.getAttribute("tabindex")||"0");return n===a?1:i===a?-1:0===i?1:0===n?-1:i-n}),null===(t=r[e?r.length-1:0])||void 0===t||t.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown)return void this.providedOnTabKeyDown(e);if(this.focusTrapActive)return;if(e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=tle(this.eFocusableElement);return this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(-1,1)),!!t.length&&(t[e?t.length-1:0].focus({preventScroll:!0}),!0)}getNextFocusableElement(e){return nle(this.beans,this.eFocusableElement,!1,e)}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(null===t||void 0===t||t)}setAllowFocus(e){this.allowFocus=e}},ule="ag-resizer-wrapper",hle=(e,t)=>({tag:"div",ref:"".concat(e,"Resizer"),cls:"ag-resizer ag-resizer-".concat(t)}),ple={tag:"div",cls:ule,children:[hle("eTopLeft","topLeft"),hle("eTop","top"),hle("eTopRight","topRight"),hle("eRight","right"),hle("eBottomRight","bottomRight"),hle("eBottom","bottom"),hle("eBottomLeft","bottomLeft"),hle("eLeft","left")]},gle=class extends voe{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=p({popup:!1},t)}wireBeans(e){this.popupSvc=e.popupSvc,this.dragSvc=e.dragSvc}center(e){const{clientHeight:t,clientWidth:i}=this.offsetParent,n=i/2-this.getWidth()/2,o=t/2-this.getHeight()/2;this.offsetElement(n,o,e)}initialisePosition(e){if(this.positioned)return;const{centered:t,forcePopupParentAsOffsetParent:i,minWidth:n,width:o,minHeight:s,height:r,x:a,y:l}=this.config;this.offsetParent||this.setOffsetParent();let d=0,c=0;const u=Vne(this.element);if(u){const e=this.findBoundaryElement(),t=window.getComputedStyle(e);if(null!=t.minWidth){const i=e.offsetWidth-this.element.offsetWidth;c=Number.parseInt(t.minWidth,10)-i}if(null!=t.minHeight){const i=e.offsetHeight-this.element.offsetHeight;d=Number.parseInt(t.minHeight,10)-i}}if(this.minHeight=s||d,this.minWidth=n||c,o&&this.setWidth(o),r&&this.setHeight(r),o&&r||this.refreshSize(),t)this.center(e);else if(a||l)this.offsetElement(a,l,e);else if(u&&i){let t=this.boundaryEl,i=!0;if(t||(t=this.findBoundaryElement(),i=!1),t){const n=Number.parseFloat(t.style.top),o=Number.parseFloat(t.style.left);i?this.offsetElement(Number.isNaN(o)?0:o,Number.isNaN(n)?0:n,e):this.setPosition(o,n)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};var n,o;e?(null===(n=this.dragSvc)||void 0===n||n.addDragSource(i),this.moveElementDragListener=i):(null===(o=this.dragSvc)||void 0===o||o.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),"boolean"===typeof e){if(!1===e)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}for(const i of Object.keys(e)){const n=!!e[i],o=this.getResizerElement(i),s={dragStartPixels:0,eElement:o,onDragStart:e=>this.onResizeStart(e,i),onDragging:this.onResize.bind(this),onDragStop:e=>this.onResizeEnd(e,i)};if(n||!this.isAlive()&&!n){var t;if(n)null===(t=this.dragSvc)||void 0===t||t.addDragSource(s),this.resizeListeners.push(s),o.style.pointerEvents="all";else o.style.pointerEvents="none";this.resizable[i]=n}}}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;-1!==t&&(this.element.style.width="".concat(t,"px")),-1!==e&&(this.element.style.height="".concat(e,"px"))}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,i=this.element;let n=!1;if("string"===typeof e&&e.includes("%"))Une(i,e),e=Tne(i),n=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const t=this.getAvailableHeight();t&&e>t&&(e=t)}this.getHeight()!==e&&(n?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?Une(i,e):(i.style.height="".concat(e,"px"),i.style.flex="0 0 auto",this.lastSize.height="number"===typeof e?e:Number.parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:i}=this.offsetParent;if(!i)return null;const n=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),s=e?this.position.y:n.top,r=e?0:o.top;let a=0;if(t){const e=this.element.parentElement;if(e){const{bottom:t}=e.getBoundingClientRect();a=t-n.bottom}}return i+r-s-a}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:i}=this.config;let n=!1;if("string"===typeof e&&e.includes("%"))Kne(t,e),e=Rne(t),n=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:t}=this.offsetParent,n=i?this.position.x:this.element.getBoundingClientRect().left;t&&e+n>t&&(e=t-n)}this.getWidth()!==e&&(n?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?Kne(t,e):(t.style.width="".concat(e,"px"),t.style.flex=" unset",this.lastSize.width="number"===typeof e?e:Number.parseFloat(e)))}offsetElement(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;const{forcePopupParentAsOffsetParent:o}=this.config,s=o?this.boundaryEl:this.element;s&&(null===(e=this.popupSvc)||void 0===e||e.positionPopup({ePopup:s,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:t,y:i}),postProcessCallback:n}),this.setPosition(Number.parseFloat(s.style.left),Number.parseFloat(s.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const e=this.getAvailableHeight();this.element.style.setProperty("max-height","".concat(e,"px"))};var i,n;e&&this.popupSvc?(null===(i=this.resizeObserverSubscriber)||void 0===i||i.call(this),this.resizeObserverSubscriber=Xne(this.beans,null===(n=this.popupSvc)||void 0===n?void 0:n.getPopupParent(),t)):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:i,isTop:n,anywhereWithin:o,topBuffer:s}=e,r=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y;return{movementX:this.shouldSkipX(t,!!i,!!o,r)?0:r,movementY:this.shouldSkipY(t,!!n,s,a)?0:a}}shouldSkipX(e,t,i,n){const o=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:o.left;let l=a<=0&&s.left>=e.clientX||s.right<=e.clientX&&s.right<=r.right;return!!l||(l=t?n<0&&e.clientX>a+s.left||n>0&&e.clientX<a+s.left:i?n<0&&e.clientX>r.right||n>0&&e.clientX<a+s.left:n<0&&e.clientX>r.right||n>0&&e.clientX<r.right,l)}shouldSkipY(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;const o=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:o.top;let l=a<=0&&s.top>=e.clientY||s.bottom<=e.clientY&&s.bottom<=r.bottom;return!!l||(l=t?n<0&&e.clientY>a+s.top+i||n>0&&e.clientY<a+s.top:n<0&&e.clientY>r.bottom||n>0&&e.clientY<r.bottom,l)}createResizeMap(){const e=e=>({element:this.element.querySelector("[data-ref=".concat(e,"Resizer]"))});this.resizerMap={topLeft:e("eTopLeft"),top:e("eTop"),topRight:e("eTopRight"),right:e("eRight"),bottomRight:e("eBottomRight"),bottom:e("eBottom"),bottomLeft:e("eBottomLeft"),left:e("eLeft")}}addResizers(){if(this.resizersAdded)return;const e=this.element;e&&(e.appendChild(toe(ple)),this.createResizeMap(),this.resizersAdded=!0)}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(".".concat(ule));null===e||void 0===e||e.remove(),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:n}=this.config;i||n||this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const e=this.element.parentElement;return e?Array.prototype.slice.call(e.children).filter(e=>!e.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,i=0;for(const n of e){const e=!!n.style.flex&&"0 0 auto"!==n.style.flex;if(n===this.element)continue;let o=this.minHeight||0,s=this.minWidth||0;if(e){const e=window.getComputedStyle(n);e.minHeight&&(o=Number.parseInt(e.minHeight,10)),e.minWidth&&(s=Number.parseInt(e.minWidth,10))}else o=n.offsetHeight,s=n.offsetWidth;t+=o,i+=s}return{height:t,width:i}}applySizeToSiblings(e){let t=null;const i=this.getSiblings();if(i){for(let n=0;n<i.length;n++){const o=i[n];o!==t&&(e?o.style.height="".concat(o.offsetHeight,"px"):o.style.width="".concat(o.offsetWidth,"px"),o.style.flex="0 0 auto",o===this.element&&(t=i[n+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:n,isRight:o,isBottom:s,isLeft:r}=this.currentResizer,a=o||r,l=s||n,{movementX:d,movementY:c}=this.calculateMouseMovement({e:e,isLeft:r,isTop:n}),u=this.position.x,h=this.position.y;let p=0,g=0;if(a&&d){const e=r?-1:1,t=this.getWidth(),i=t+d*e;let n=!1;r&&(p=t-i,(u+p<=0||i<=this.minWidth)&&(n=!0,p=0)),n||this.setWidth(i)}if(l&&c){const e=n?-1:1,t=this.getHeight(),i=t+c*e;let o=!1;n?(g=t-i,(h+g<=0||i<=this.minHeight)&&(o=!0,g=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&t<i&&this.getMinSizeOfSiblings().height+i>this.element.parentElement.offsetHeight&&(o=!0),o||this.setHeight(i)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&p||g)&&this.offsetElement(u+p,h+g)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:i}=this.position;let n;this.config.calculateTopBuffer&&(n=this.config.calculateTopBuffer());const{movementX:o,movementY:s}=this.calculateMouseMovement({e:e,isTop:!0,anywhereWithin:!0,topBuffer:n});this.offsetElement(t+o,i+s),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent&&this.popupSvc?this.offsetParent=this.popupSvc.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if("static"!==window.getComputedStyle(e).position)return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){var e;const t=this.resizeListeners.pop();null===(e=this.dragSvc)||void 0===e||e.removeDragSource(t)}}destroy(){var e;(super.destroy(),this.moveElementDragListener)&&(null===(e=this.dragSvc)||void 0===e||e.removeDragSource(this.moveElementDragListener));this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},mle=new RegExp("[".concat("T"," ]")),fle=new RegExp("^\\d{4}-\\d{2}-\\d{2}(".concat("T","\\d{2}:\\d{2}:\\d{2}\\D?)?"));function vle(e,t){return e.toString().padStart(t,"0")}function yle(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"T";if(!e)return null;let n=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(e=>vle(e,2)).join("-");return t&&(n+=i+[e.getHours(),e.getMinutes(),e.getSeconds()].map(e=>vle(e,2)).join(":")),n}function ble(e){return e?!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?[String(e.getFullYear()),String(e.getMonth()+1),vle(e.getDate(),2),vle(e.getHours(),2),":".concat(vle(e.getMinutes(),2)),":".concat(vle(e.getSeconds(),2))]:[e.getFullYear(),e.getMonth()+1,vle(e.getDate(),2)].map(String):null}var xle=["January","February","March","April","May","June","July","August","September","October","November","December"];function Cle(e){return!!Sle(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}function Sle(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;if(!(arguments.length>2?arguments[2]:void 0)&&!fle.test(e))return null;const[i,n]=e.split(mle);if(!i)return null;const o=i.split("-").map(e=>Number.parseInt(e,10));if(3!==o.filter(e=>!isNaN(e)).length)return null;const[s,r,a]=o,l=new Date(s,r-1,a);if(l.getFullYear()!==s||l.getMonth()!==r-1||l.getDate()!==a)return null;if(!n&&t)return null;if(!n||"00:00:00"===n)return l;const[d,c,u]=n.split(":").map(e=>Number.parseInt(e,10));if(d>=0&&d<24)l.setHours(d);else if(t)return null;if(c>=0&&c<60)l.setMinutes(c);else if(t)return null;if(u>=0&&u<60)l.setSeconds(u);else if(t)return null;return l}function wle(e){var t;if(e.altKey||e.ctrlKey||e.metaKey)return!1;return 1===(null===(t=e.key)||void 0===t?void 0:t.length)}var Mle=class extends uae{constructor(e,t,i){super(t,i),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{},this.registerCSS(".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}")}postConstruct(){this.addCss("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:i,labelAlignment:n,disabled:o,labelEllipsis:s}=this.config;null!=o&&this.setDisabled(o),null!=e&&this.setLabelSeparator(e),null!=t&&this.setLabel(t),null!=i&&this.setLabelWidth(i),null!=s&&this.setLabelEllipsis(s),this.setLabelAlignment(n||this.labelAlignment),this.refreshLabel()}refreshLabel(){const{label:e,eLabel:t}=this;Fne(t),"string"===typeof e?t.innerText=e+this.labelSeparator:e&&t.appendChild(e),""===e?(Mne(t,!1),tne(t,"presentation")):(Mne(t,!0),tne(t,null))}setLabelSeparator(e){return this.labelSeparator===e||(this.labelSeparator=e,null!=this.label&&this.refreshLabel()),this}getLabelId(){const e=this.eLabel;return e.id=e.id||"ag-".concat(this.getCompId(),"-label"),e.id}getLabel(){return this.label}setLabel(e){return this.label===e||(this.label=e,this.refreshLabel()),this}setLabelAlignment(e){const t=this.getGui().classList;return t.toggle("ag-label-align-left","left"===e),t.toggle("ag-label-align-right","right"===e),t.toggle("ag-label-align-top","top"===e),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return null==this.label||_ne(this.eLabel,e),this}setDisabled(e){e=!!e;const t=this.getGui();return Dne(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},kle=class extends Mle{constructor(e,t,i,n){super(e,t,i),this.className=n}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:i,ariaLabel:n}=this.config;null!=e&&this.setWidth(e),null!=t&&this.setValue(t),null!=i&&this.onValueChange(i),null!=n&&this.setAriaLabel(n),this.className&&this.addCss(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),i=this.getLabel();null==i||""==i||null!==e.getAttribute("aria-label")?nne(e,""):nne(e,null!==t&&void 0!==t?t:"")}setAriaLabel(e){return ine(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return Kne(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e||(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"})),this}};var Dle,Ile,Ale,Lle,Nle=class extends kle{constructor(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"input";super(e,null!==(i=null===e||void 0===e?void 0:e.template)&&void 0!==i?i:function(e){return{tag:"div",role:"presentation",children:[{tag:"div",ref:"eLabel",cls:"ag-input-field-label"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-input-wrapper",role:"presentation",children:[{tag:e,ref:"eInput",cls:"ag-input-field-input"}]}]}}(o),[],t),this.inputType=n,this.displayFieldTag=o,this.eLabel=lae,this.eWrapper=lae,this.eInput=lae}postConstruct(){super.postConstruct(),this.setInputType(this.inputType);const{eLabel:e,eWrapper:t,eInput:i,className:n}=this;e.classList.add("".concat(n,"-label")),t.classList.add("".concat(n,"-input-wrapper")),i.classList.add("".concat(n,"-input")),this.addCss("ag-input-field"),i.id=i.id||"ag-".concat(this.getCompId(),"-input");const{inputName:o,inputWidth:s,inputPlaceholder:r,autoComplete:a,tabIndex:l}=this.config;null!=o&&this.setInputName(o),null!=s&&this.setInputWidth(s),null!=r&&this.setInputPlaceholder(r),null!=a&&this.setAutoComplete(a),this.addInputListeners(),this.activateTabIndex([i],l)}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(e){"input"===this.displayFieldTag&&(this.inputType=e,Zne(this.eInput,"type",e))}getInputElement(){return this.eInput}getWrapperElement(){return this.eWrapper}setInputWidth(e){return _ne(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){return this.eInput.maxLength=e,this}setInputPlaceholder(e){return Zne(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return ine(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return Dne(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(!0===e)Zne(this.eInput,"autocomplete",null);else{const t="string"===typeof e?e:"off";Zne(this.eInput,"autocomplete",t)}return this}},Tle=class extends Nle{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ag-checkbox",arguments.length>2&&void 0!==arguments[2]?arguments[2]:"checkbox"),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t,name:i}=this.config;"boolean"===typeof e&&this.setReadOnly(e),"boolean"===typeof t&&this.setPassive(t),null!=i&&this.setName(i)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return void 0===this.selected||!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){return this.getInputElement().name=e,this}isSelected(){return this.selected}setSelected(e,t){if(this.isSelected()===e)return;this.previousValue=this.isSelected(),e=this.selected="boolean"===typeof e?e:void 0;const i=this.eInput;i.checked=e,i.indeterminate=void 0===e,t||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(e,t,i){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:i});const n=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:n.id,name:n.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){const t=this.eWrapper.classList;t.toggle("ag-checked",!0===e),t.toggle("ag-indeterminate",null==e)}},Rle={selector:"AG-CHECKBOX",component:Tle},Ele="object"!==typeof window||!(null!==(Rie=window)&&void 0!==Rie&&null!==(Rie=Rie.document)&&void 0!==Rie&&null!==(Rie=Rie.fonts)&&void 0!==Rie&&Rie.forEach),Ple=(e,t,i,n,o,s)=>{if(Ele)return;n&&(e="@layer ".concat(CSS.escape(n).replaceAll("\\.",".")," { ").concat(e," }"));let r=Fle.map.get(t);if(r||(r=[],Fle.map.set(t,r)),r.some(t=>t.css===e))return;const a=document.createElement("style");s&&a.setAttribute("nonce",s),a.dataset.agGlobalCss=i,a.textContent=e;const l={css:e,el:a,priority:o};let d;for(const c of r){if(c.priority>o)break;d=c}if(d){d.el.insertAdjacentElement("afterend",a);const e=r.indexOf(d);r.splice(e+1,0,l)}else t.insertBefore(a,t.querySelector(":not(title, meta)")),r.push(l)},Ole=(e,t,i,n)=>{Ple(':where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none;&:where(.invalid){box-shadow:inset var(--ag-focus-error-shadow)}}&:where(button){color:inherit}}:where(.ag-root-wrapper,ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-tab-guard{display:block;height:0;position:absolute;width:0}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-chart,.ag-dnd-ghost,.ag-external,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-resizer{pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}',e,"shared",t,0,i),null===n||void 0===n||n.forEach((n,o)=>n.forEach(n=>Ple(n,e,o,t,0,i)))},Fle=null!==(Eie=(Dle="object"===typeof window?window:{}).agStyleInjectionState)&&void 0!==Eie?Eie:Dle.agStyleInjectionState={map:new WeakMap,grids:new Set},zle=e=>new Gle(e),Ble="$default",Vle=0,Gle=class{constructor(e){var t;let{feature:i,params:n,modeParams:o={},css:s,cssImports:r}=e;this.feature=i,this.css=s,this.cssImports=r,this.modeParams=p({[Ble]:p(p({},null!==(t=o[Ble])&&void 0!==t?t:{}),null!==n&&void 0!==n?n:{})},o)}use(e,t,i){let n=this._inject;if(null==n){let{css:e}=this;if(e){var o;const t="ag-theme-".concat(null!==(o=this.feature)&&void 0!==o?o:"part","-").concat(++Vle);"function"===typeof e&&(e=e()),e=":where(.".concat(t,") {\n").concat(e,"\n}\n");for(const i of null!==(s=this.cssImports)&&void 0!==s?s:[]){var s;e="@import url(".concat(JSON.stringify(i),");\n").concat(e)}n={css:e,class:t}}else n=!1;this._inject=n}return n&&e&&Ple(n.css,e,n.class,t,1,i),!!n&&n.class}},Hle=e=>"--ag-".concat(e.replace(/[A-Z]/g,e=>"-".concat(e)).toLowerCase()),jle=e=>"var(".concat(Hle(e),")"),Wle=e=>({ref:"accentColor",mix:e}),_le=e=>({ref:"foregroundColor",mix:e}),Kle=e=>({ref:"foregroundColor",mix:e,onto:"backgroundColor"}),Ule={ref:"backgroundColor"},Yle={ref:"foregroundColor"},$le={ref:"accentColor"},Zle={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:_le(.15),chromeBackgroundColor:Kle(.02),browserColorScheme:"light"},Xle=p(p({},Zle),{},{textColor:Yle,accentColor:"#2196f3",invalidColor:"#e02525",fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],subtleTextColor:{ref:"textColor",mix:.5},borderWidth:1,borderRadius:4,spacing:8,fontSize:14,focusShadow:{spread:3,color:Wle(.5)},focusErrorShadow:{spread:3,color:{ref:"invalidColor",onto:"backgroundColor",mix:.5}},popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},dragAndDropImageBackgroundColor:Ule,dragAndDropImageBorder:!0,dragAndDropImageNotAllowedBorder:{color:{ref:"invalidColor",onto:"dragAndDropImageBackgroundColor",mix:.5}},dragAndDropImageShadow:{ref:"popupShadow"},iconSize:16,iconColor:"inherit",toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:$le,toggleButtonOffBackgroundColor:Kle(.3),toggleButtonSwitchBackgroundColor:Ule,toggleButtonSwitchInset:2,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipErrorBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.1},tooltipTextColor:{ref:"textColor"},tooltipErrorTextColor:{ref:"invalidColor"},tooltipBorder:!0,tooltipErrorBorder:{color:{ref:"invalidColor",onto:"backgroundColor",mix:.25}}}),qle=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"],Qle=(e=>{const t=new Map;return i=>{const n=i;return t.has(n)||t.set(n,e(i)),t.get(n)}})(e=>{var t;return e=e.toLowerCase(),null!==(t=qle.find(t=>e.endsWith(t.toLowerCase())))&&void 0!==t?t:"length"}),Jle=e=>"object"===typeof e&&null!==e&&void 0!==e&&e.ref?jle(e.ref):"string"===typeof e?e:"number"===typeof e&&String(e),ede=e=>{if("string"===typeof e)return e;if(e&&"ref"in e){const t=jle(e.ref);if(null==e.mix)return t;const i=e.onto?jle(e.onto):"transparent";return"color-mix(in srgb, ".concat(i,", ").concat(t," ").concat(((e,t,i)=>Math.max(t,Math.min(i,e)))(100*e.mix,0,100),"%)")}return!1},tde=e=>{if("string"===typeof e)return e;if("number"===typeof e)return"".concat(e,"px");if(e&&"calc"in e){const t=e.calc.replace(/ ?[*/+] ?/g," $& ");return"calc(".concat(t.replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,e=>"-"===e[0]?e:" "+jle(e)+" "),")")}return!(!e||!("ref"in e))&&jle(e.ref)},ide=(e,t)=>{var i,n,o;return"string"===typeof e?e:!0===e?ide({},t):!1===e?"columnBorder"===t?ide({color:"transparent"},t):"none":e&&"ref"in e?jle(e.ref):nde(null!==(i=e.style)&&void 0!==i?i:"solid")+" "+tde(null!==(n=e.width)&&void 0!==n?n:{ref:"borderWidth"})+" "+ede(null!==(o=e.color)&&void 0!==o?o:{ref:"borderColor"})},nde=Jle,ode=e=>"string"===typeof e?e.includes(",")?e:sde(e):e&&"googleFont"in e?ode(e.googleFont):e&&"ref"in e?jle(e.ref):!!Array.isArray(e)&&e.map(e=>("object"===typeof e&&"googleFont"in e&&(e=e.googleFont),sde(e))).join(", "),sde=e=>/^[\w-]+$|\w\(/.test(e)?e:JSON.stringify(e),rde=Jle,ade=e=>"string"===typeof e?e:e&&"url"in e?"url(".concat(JSON.stringify(e.url),")"):e&&"svg"in e?ade({url:"data:image/svg+xml,".concat(encodeURIComponent(e.svg))}):!(!e||!("ref"in e))&&jle(e.ref),lde={color:ede,colorScheme:Jle,length:tde,scale:Jle,border:ide,borderStyle:nde,shadow:e=>{var t,i,n,o,s;return"string"===typeof e?e:!1===e?"none":e&&"ref"in e?jle(e.ref):[tde(null!==(t=e.offsetX)&&void 0!==t?t:0),tde(null!==(i=e.offsetY)&&void 0!==i?i:0),tde(null!==(n=e.radius)&&void 0!==n?n:0),tde(null!==(o=e.spread)&&void 0!==o?o:0),ede(null!==(s=e.color)&&void 0!==s?s:{ref:"foregroundColor"})].join(" ")},image:ade,fontFamily:ode,fontWeight:rde,duration:(e,t,i)=>"string"===typeof e?e:"number"===typeof e?(e>=10&&i.warn(104,{value:e,param:t}),"".concat(e,"s")):!(!e||!("ref"in e))&&jle(e.ref)},dde=(e,t,i)=>{const n=Qle(e);return lde[n](t,e,i)},cde=class e{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.themeLogger=e,this.parts=t}withPart(t){return"function"===typeof t&&(t=t()),t instanceof Gle?new e(this.themeLogger,[...this.parts,t]):(this.themeLogger.preInitErr(259,"Invalid part",{part:t}),this)}withoutPart(e){return this.withPart(zle({feature:e}))}withParams(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ble;return this.withPart(zle({modeParams:{[t]:e}}))}_startUse(e){let{styleContainer:t,cssLayer:i,nonce:n,loadThemeGoogleFonts:o,moduleCss:s}=e;if(Ele)return;gde(),Ole(t,i,n,s);const r=hde(this);if(r.length>0)for(const a of r)o&&mde(a,n);for(const a of this.parts)a.use(t,i,n)}_getCssClass(){var e;return null!==(e=this._cssClassCache)&&void 0!==e?e:this._cssClassCache=ude(this.parts).map(e=>e.use(void 0,void 0,void 0)).filter(Boolean).join(" ")}_getModeParams(){let e=this._paramsCache;if(!e){const i={[Ble]:p({},Xle)};for(const e of ude(this.parts))for(const n of Object.keys(e.modeParams)){const o=e.modeParams[n];if(o){var t;const e=null!==(t=i[n])&&void 0!==t?t:i[n]={},s=new Set;for(const t of Object.keys(o)){const i=o[t];void 0!==i&&(e[t]=i,s.add(t))}if(n===Ble)for(const t of Object.keys(i)){const e=i[t];if(t!==Ble)for(const t of s)delete e[t]}}}this._paramsCache=e=i}return e}_getPerInstanceCss(e){const t="##SELECTOR##";let i=this._paramsCssCache;if(!i){let e="",n="";const o=this._getModeParams();for(const t of Object.keys(o)){const i=o[t];if(t!==Ble){const i="object"===typeof CSS?CSS.escape(t):t,o=':where([data-ag-theme-mode="'.concat(i,'"]) & {\n');e+=o,n+=o}for(const t of Object.keys(i).sort()){const o=i[t],s=dde(t,o,this.themeLogger);if(!1===s)this.themeLogger.error(107,{key:t,value:o});else{const i=Hle(t),o=i.replace("--ag-","--ag-inherited-");e+="\t".concat(i,": var(").concat(o,", ").concat(s,");\n"),n+="\t".concat(o,": var(").concat(i,");\n")}}t!==Ble&&(e+="}\n",n+="}\n")}let s="".concat(t," {\n").concat(e,"}\n");s+=":has(> ".concat(t,"):not(").concat(t,") {\n").concat(n,"}\n"),this._paramsCssCache=i=s}return i.replaceAll(t,":where(.".concat(e,")"))}},ude=e=>{const t=new Map;for(const n of e)t.set(n.feature,n);const i=[];for(const n of e)n.feature&&t.get(n.feature)!==n||i.push(n);return i},hde=e=>{const t=new Set,i=e=>{if(Array.isArray(e))e.forEach(i);else{const i=null===e||void 0===e?void 0:e.googleFont;"string"===typeof i&&t.add(i)}};return Object.values(e._getModeParams()).flatMap(e=>Object.values(e)).forEach(i),Array.from(t).sort()},pde=!1,gde=()=>{if(!pde){pde=!0;for(const e of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))e.remove()}},mde=async(e,t)=>{const i="@import url('https://".concat(fde,"/css2?family=").concat(encodeURIComponent(e),":wght@100;200;300;400;500;600;700;800;900&display=swap');\n");Ple(i,document.head,"googleFont:".concat(e),void 0,0,t)},fde="fonts.googleapis.com",vde=1,yde=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,this.instanceId=vde++,null!==e&&void 0!==e&&e.beanClasses&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){this.id=e.id,this.beans.context=this,this.destroyCallback=e.destroyCallback;for(const i of Object.keys(e.providedBeanInstances))this.beans[i]=e.providedBeanInstances[i];for(const i of e.beanClasses){const e=new i;e.beanName?this.beans[e.beanName]=e:console.error("Bean ".concat(i.name," is missing beanName")),this.createdBeans.push(e)}for(const i of null!==(t=e.derivedBeans)&&void 0!==t?t:[]){var t;const{beanName:e,bean:n}=i(this);this.beans[e]=n,this.createdBeans.push(n)}e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){return this.initBeans([e],t),e}initBeans(e,t){const i=this.beans;for(const a of e){var n,o;null===(n=a.preWireBeans)||void 0===n||n.call(a,i),null===(o=a.wireBeans)||void 0===o||o.call(a,i)}for(const a of e){var s;null===(s=a.preConstruct)||void 0===s||s.call(a)}t&&e.forEach(t);for(const a of e){var r;null===(r=a.postConstruct)||void 0===r||r.call(a)}}getBeans(){return this.beans}getBean(e){return this.beans[e]}getId(){return this.id}destroy(){var e;if(this.destroyed)return;this.destroyed=!0;const t=this.getBeanInstances();this.beanDestroyComparator&&t.sort(this.beanDestroyComparator),this.destroyBeans(t),this.beans={},this.createdBeans=[],null===(e=this.destroyCallback)||void 0===e||e.call(this)}destroyBean(e){var t;null===e||void 0===e||null===(t=e.destroy)||void 0===t||t.call(e)}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},bde=0,xde={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},Cde=class extends voe{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1,this.paramsClass="ag-theme-params-".concat(++bde),this.globalCSS=[]}wireBeans(e){this.eRootDiv=e.eRootDiv}postConstruct(){var e;const{gos:t,eRootDiv:i}=this;t.setInstanceDomData(i);const n=t.get("themeStyleContainer"),o="undefined"!==typeof ShadowRoot,s=o&&i.getRootNode()instanceof ShadowRoot;this.eStyleContainer=null!==(e="function"===typeof n?n():n)&&void 0!==e?e:s?i:document.head,n||s||!o||wde(i,this.shadowRootError.bind(this),this.addDestroyFunc.bind(this)),this.cssLayer=t.get("themeCssLayer"),this.styleNonce=t.get("styleNonce"),this.addManagedPropertyListener("theme",()=>this.handleThemeChange()),this.handleThemeChange(),this.getSizeEl(xde),this.initVariables(),this.addDestroyFunc(()=>(e=>{if(Fle.grids.delete(e),0===Fle.grids.size){Fle.map=new WeakMap;for(const e of document.head.querySelectorAll("style[data-ag-global-css]"))e.remove()}})(this)),this.mutationObserver=new MutationObserver(()=>{this.fireStylesChangedEvent("themeChanged")}),this.addDestroyFunc(()=>this.mutationObserver.disconnect())}applyThemeClasses(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const{theme:i}=this;let n;n=i?"".concat(this.paramsClass," ").concat(i._getCssClass()):this.applyLegacyThemeClasses();for(const o of Array.from(e.classList))o.startsWith("ag-theme-")&&e.classList.remove(o);if(n){const i=e.className;e.className="".concat(i).concat(i?" ":"").concat(n).concat(null!==t&&void 0!==t&&t.length?" "+t.join(" "):"")}}applyLegacyThemeClasses(){let e="";this.mutationObserver.disconnect();let t=this.eRootDiv;for(;t;){let i=!1;for(const n of Array.from(t.classList))n.startsWith("ag-theme-")&&(i=!0,e=e?"".concat(e," ").concat(n):n);i&&this.mutationObserver.observe(t,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement}return e}addGlobalCSS(e,t){this.theme?Ple(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce):this.globalCSS.push([e,t])}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(xde)}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(null!=t)return t;const i=this.measureSizeEl(e);return"detached"===i||"no-styles"===i?(e.cacheDefault&&this.lastKnownValues.set(e,e.defaultValue),e.defaultValue):(this.lastKnownValues.set(e,i),i)}measureSizeEl(e){const t=this.getSizeEl(e);if(null==t.offsetParent)return"detached";const i=t.offsetWidth;return i===Sde?"no-styles":(this.sizesMeasured=!0,i)}getMeasurementContainer(){let e=this.eMeasurementContainer;return e||(e=this.eMeasurementContainer=toe({tag:"div",cls:"ag-measurement-container"}),this.eRootDiv.appendChild(e)),e}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;const i=this.getMeasurementContainer();t=toe({tag:"div"});const{border:n,noWarn:o}=e;n?(t.className="ag-measurement-element-border",t.style.setProperty("--ag-internal-measurement-border","var(".concat(e.cssName,", solid ").concat(Sde,"px)"))):t.style.width="var(".concat(e.cssName,", ").concat(Sde,"px)"),i.appendChild(t),this.sizeEls.set(e,t);let s=this.measureSizeEl(e);"no-styles"!==s||o||this.varError(e);const r=Xne(this.beans,t,()=>{const t=this.measureSizeEl(e);"detached"!==t&&"no-styles"!==t&&(this.lastKnownValues.set(e,t),t!==s&&(s=t,this.fireStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>r()),t}handleThemeChange(){const{gos:e,theme:t}=this,i=e.get("theme");let n;if("legacy"===i)n=void 0;else{const e=null!==i&&void 0!==i?i:this.getDefaultTheme();e instanceof cde?n=e:this.themeError(e)}n!==t&&this.handleNewTheme(n),this.postProcessThemeChange(n,i)}handleNewTheme(e){const{gos:t,eRootDiv:i,globalCSS:n}=this,o=this.getAdditionalCss();if(e){s=this,Fle.grids.add(s),Ole(this.eStyleContainer,this.cssLayer,this.styleNonce,o);for(const[e,t]of n)Ple(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce);n.length=0}var s;this.theme=e,null===e||void 0===e||e._startUse({loadThemeGoogleFonts:t.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer,nonce:this.styleNonce,moduleCss:o});let r=this.eParamsStyle;if(!r){r=this.eParamsStyle=toe({tag:"style"});const e=t.get("styleNonce");e&&r.setAttribute("nonce",e),i.appendChild(r)}Ele||(r.textContent=(null===e||void 0===e?void 0:e._getPerInstanceCss(this.paramsClass))||""),this.applyThemeClasses(i),this.fireStylesChangedEvent("themeChanged")}fireStylesChangedEvent(e){this.eventSvc.dispatchEvent({type:"stylesChanged",[e]:!0})}},Sde=15538,wde=(e,t,i)=>{let n=60;const o=setInterval(()=>{"undefined"!==typeof ShadowRoot&&e.getRootNode()instanceof ShadowRoot&&(t(),clearInterval(o)),(Bne(e)||--n<0)&&clearInterval(o)},1e3);i(()=>clearInterval(o))},Mde=class extends voe{constructor(){super(...arguments),this.beanName="registry"}registerDynamicBeans(e){if(e){var t;null!==(t=this.dynamicBeans)&&void 0!==t||(this.dynamicBeans={});for(const t of Object.keys(e))this.dynamicBeans[t]=e[t]}}createDynamicBean(e,t){if(!this.dynamicBeans)throw new Error(this.getDynamicError(e,!0));const i=this.dynamicBeans[e];if(null!=i){for(var n=arguments.length,o=new Array(n>2?n-2:0),s=2;s<n;s++)o[s-2]=arguments[s];return new i(...o)}if(t)throw new Error(this.getDynamicError(e,!1))}},kde=class extends voe{constructor(){super(...arguments),this.beanName="eventSvc",this.eventServiceType="global",this.globalSvc=new Pie}addListener(e,t,i){this.globalSvc.addEventListener(e,t,i)}removeListener(e,t,i){this.globalSvc.removeEventListener(e,t,i)}addGlobalListener(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.globalSvc.addGlobalListener(e,t)}removeGlobalListener(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.globalSvc.removeGlobalListener(e,t)}dispatchEvent(e){this.globalSvc.dispatchEvent(this.gos.addCommon(e))}dispatchEventOnce(e){this.globalSvc.dispatchEventOnce(this.gos.addCommon(e))}},Dde=class extends voe{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshTooltip()}setBrowserTooltip(e,t){const i="title",n=this.ctrl.getGui();n&&(null==e||""==e&&!t?n.removeAttribute(i):n.setAttribute(i,e))}updateTooltipText(){const{getTooltipValue:e}=this.ctrl;e&&(this.tooltip=e())}createTooltipFeatureIfNeeded(){if(null==this.tooltipManager){const e=this.beans.registry.createDynamicBean("tooltipStateManager",!0,this.ctrl,()=>this.tooltip);e&&(this.tooltipManager=this.createBean(e,this.beans.context))}}attemptToShowTooltip(){var e;null===(e=this.tooltipManager)||void 0===e||e.prepareToShowTooltip()}attemptToHideTooltip(){var e;null===(e=this.tooltipManager)||void 0===e||e.hideTooltip()}setTooltipAndRefresh(e){this.tooltip=e,this.refreshTooltip()}refreshTooltip(e){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)):(this.setBrowserTooltip(e?"":null,e),this.createTooltipFeatureIfNeeded())}destroy(){this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context),super.destroy()}},Ide=!1,Ade=class extends voe{constructor(e,t){super(),this.tooltipCtrl=e,this.getTooltipValue=t,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(e){this.popupSvc=e.popupSvc}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const e=this.tooltipCtrl.getGui();0===this.tooltipTrigger&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),1===this.tooltipTrigger&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){const t=this.gos.get(e);return Math.max(200,t)}getTooltipDelay(e){var t,i,n,o,s,r;return"show"===e?null!==(o=null===(s=(r=this.tooltipCtrl).getTooltipShowDelayOverride)||void 0===s?void 0:s.call(r))&&void 0!==o?o:this.getGridOptionsTooltipDelay("tooltipShowDelay"):null!==(t=null===(i=(n=this.tooltipCtrl).getTooltipHideDelayOverride)||void 0===i?void 0:i.call(n))&&void 0!==t?t:this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gos.get("tooltipTrigger");return e&&"hover"!==e?1:0}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),Uae()||(Ide?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},100):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&2===this.state&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){var t;const i=e.relatedTarget,n=this.tooltipCtrl.getGui(),o=null===(t=this.tooltipComp)||void 0===t?void 0:t.getGui();this.isInteractingWithTooltip||n.contains(i)||this.interactionEnabled&&null!==o&&void 0!==o&&o.contains(i)||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(e){if(0!=this.state||Ide)return;let t=0;e&&(t=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=1}isLastTooltipHiddenRecently(){return Date.now()-Ile<1e3}setToDoNothing(e){e||2!==this.state||this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.clearEventHandlers(),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){var e,t,i;const n=this.getTooltipValue(),o=this.tooltipCtrl;if(!Fie(n)||o.shouldDisplayTooltip&&!o.shouldDisplayTooltip())return void this.setToDoNothing();const s=this.gos.addCommon(p({location:null!==(e=null===(t=o.getLocation)||void 0===t?void 0:t.call(o))&&void 0!==e?e:"UNKNOWN",value:n,hideTooltipCallback:()=>this.hideTooltip(!0)},null===(i=o.getAdditionalParams)||void 0===i?void 0:i.call(o)));this.state=2,this.tooltipInstanceCount++;const r=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.createTooltipComp(s,r)}hideTooltip(e){!e&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),Ile=Date.now()),this.eventSvc.dispatchEvent({type:"tooltipHide",parentGui:this.tooltipCtrl.getGui()}),e&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(e,t){var i;if(2!==this.state||this.tooltipInstanceCount!==e)return void this.destroyBean(t);const n=t.getGui();this.tooltipComp=t,n.classList.contains("ag-tooltip")||n.classList.add("ag-tooltip-custom"),0===this.tooltipTrigger&&n.classList.add("ag-tooltip-animate"),this.interactionEnabled&&n.classList.add("ag-tooltip-interactive");const o=this.getLocaleTextFunc(),s=null===(i=this.popupSvc)||void 0===i?void 0:i.addPopup({eChild:n,ariaLabel:o("ariaLabelTooltip","Tooltip")});if(s&&(this.tooltipPopupDestroyFunc=s.hideFunc),this.positionTooltip(),1===this.tooltipTrigger){const e=()=>this.setToDoNothing();[this.onBodyScrollEventCallback]=this.addManagedEventListeners({bodyScroll:e}),this.setEventHandlers(e)}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(n,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(Yie(this.beans),{keydown:e=>{n.contains(null===e||void 0===e?void 0:e.target)||this.onKeyDown()}}),1===this.tooltipTrigger&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(n,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventSvc.dispatchEvent({type:"tooltipShow",tooltipGui:n,parentGui:this.tooltipCtrl.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){var e;const t=null===(e=this.tooltipComp)||void 0===e?void 0:e.getGui(),i=Uie(this.beans);return!!t&&t.contains(i)}onTooltipFocusOut(e){const t=this.tooltipCtrl.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};var t,i;this.lastMouseEvent?null===(t=this.popupSvc)||void 0===t||t.positionPopupUnderMouseEvent(p(p({},e),{},{mouseEvent:this.lastMouseEvent})):null===(i=this.popupSvc)||void 0===i||i.positionPopupByComponent(p(p({},e),{},{eventSource:this.tooltipCtrl.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,i=0===this.tooltipTrigger?1e3:0;window.setTimeout(()=>{e(),this.destroyBean(t)},i),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){for(const e of[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener])e&&e();this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){Ide=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},100)}unlockService(){Ide=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}},Lde=0,Nde=class extends voe{constructor(){super(...arguments),this.beanName="popupSvc",this.popupList=[]}postConstruct(){this.addManagedEventListeners({stylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){const e=this.gos.get("popupParent");return e||this.getDefaultPopupParent()}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:i,nudgeY:n,skipObserver:o}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:!0,skipObserver:o,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.additionalParams,e.type,e.ePopup,null,e.mouseEvent)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:o,eventSource:s,alignSide:r="left",position:a="over",type:l}=e,d=s.getBoundingClientRect(),c=this.getParentRect();this.setAlignedTo(s,t);this.positionPopup({ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:o,updatePosition:()=>{let i,o=d.left-c.left;if("right"===r&&(o-=t.offsetWidth-d.width),"over"===a)i=d.top-c.top,this.setAlignedStyles(t,"over");else{this.setAlignedStyles(t,"under");i="under"===this.shouldRenderUnderOrAbove(t,d,c,e.nudgeY||0)?d.top-c.top+d.height:d.top-t.offsetHeight-2*(n||0)-c.top}return{x:o,y:i}},postProcessCallback:()=>this.callPostProcessPopup(e.additionalParams,l,t,s,null)})}positionPopupForMenu(e){const{eventSource:t,ePopup:i,event:n}=e,o=t.getBoundingClientRect(),s=this.getParentRect();this.setAlignedTo(t,i);let r=!1;this.positionPopup({ePopup:i,keepWithinBounds:!0,updatePosition:()=>{const e=this.keepXYWithinBounds(i,o.top-s.top,0),t=i.clientWidth>0?i.clientWidth:200;r||(i.style.minWidth="".concat(t,"px"),r=!0);const n=s.right-s.left-t;let a;return this.gos.get("enableRtl")?(a=d(),a<0&&(a=l(),this.setAlignedStyles(i,"left")),a>n&&(a=0,this.setAlignedStyles(i,"right"))):(a=l(),a>n&&(a=d(),this.setAlignedStyles(i,"right")),a<0&&(a=0,this.setAlignedStyles(i,"left"))),{x:a,y:e};function l(){return o.right-s.left-2}function d(){return o.left-s.left-t}},postProcessCallback:()=>this.callPostProcessPopup(e.additionalParams,"subMenu",i,t,n instanceof MouseEvent?n:void 0)})}shouldRenderUnderOrAbove(e,t,i,n){const o=i.bottom-t.bottom,s=t.top-i.top,r=e.offsetHeight+n;return o>r?"under":s>r||s>o?"above":"under"}setAlignedStyles(e,t){const i=this.getPopupIndex(e);if(-1===i)return;const n=this.popupList[i],{alignedToElement:o}=n;if(!o)return;const s=["right","left","over","above","under"];for(const r of s)o.classList.remove("ag-has-popup-positioned-".concat(r)),e.classList.remove("ag-popup-positioned-".concat(r));t&&(o.classList.add("ag-has-popup-positioned-".concat(t)),e.classList.add("ag-popup-positioned-".concat(t)))}setAlignedTo(e,t){const i=this.getPopupIndex(t);if(-1!==i){this.popupList[i].alignedToElement=e}}positionPopup(e){var t=this;const{ePopup:i,keepWithinBounds:n,nudgeX:o,nudgeY:s,skipObserver:r,updatePosition:a}=e,l={width:0,height:0},d=function(){let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{x:d,y:c}=a();r&&i.clientWidth===l.width&&i.clientHeight===l.height||(l.width=i.clientWidth,l.height=i.clientHeight,o&&(d+=o),s&&(c+=s),n&&(d=t.keepXYWithinBounds(i,d,1),c=t.keepXYWithinBounds(i,c,0)),i.style.left="".concat(d,"px"),i.style.top="".concat(c,"px"),e.postProcessCallback&&e.postProcessCallback())};if(d(),!r){const e=Xne(this.beans,i,()=>d(!0));setTimeout(()=>e(),200)}}getParentRect(){const e=Yie(this.beans);let t=this.getPopupParent();return t===e.body?t=e.documentElement:"static"===getComputedStyle(t).position&&(t=t.offsetParent),Ene(t)}keepXYWithinBounds(e,t,i){const n=0===i,o=n?"clientHeight":"clientWidth",s=n?"top":"left",r=n?"height":"width",a=n?"scrollTop":"scrollLeft",l=Yie(this.beans),d=l.documentElement,c=this.getPopupParent(),u=e.getBoundingClientRect(),h=c.getBoundingClientRect(),p=l.documentElement.getBoundingClientRect(),g=c===l.body,m=Math.ceil(u[r]);let f=g?(n?Tne:Rne)(d)+d[a]:c[o];g&&(f-=Math.abs(p[s]-h[s]));const v=f-m;return Math.min(Math.max(t,0),Math.max(v,0))}addPopup(e){const{eChild:t,ariaLabel:i,ariaOwns:n,alwaysOnTop:o,positionCallback:s,anchorToElement:r}=e,a=this.getPopupIndex(t);if(-1!==a){return{hideFunc:this.popupList[a].hideFunc}}this.initialisePopupPosition(t);const l=this.createPopupWrapper(t,!!o,i,n),d=this.addEventListenersToPopup(p(p({},e),{},{wrapperEl:l}));return s&&s(),this.addPopupToPopupList(t,l,d,r),{hideFunc:d}}initialisePopupPosition(e){const t=this.getPopupParent().getBoundingClientRect();Fie(e.style.top)||(e.style.top="".concat(-1*t.top,"px")),Fie(e.style.left)||(e.style.left="".concat(-1*t.left,"px"))}createPopupWrapper(e,t,i,n){const o=this.getPopupParent(),{environment:s,gos:r}=this.beans,a=toe({tag:"div"});return s.applyThemeClasses(a),a.classList.add("ag-popup"),e.classList.add(r.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||tne(e,"dialog"),i?ine(e,i):n&&(e.id||(e.id="popup-component-".concat(Lde)),xne(n,e.id)),a.appendChild(e),o.appendChild(a),t?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),a}addEventListenersToPopup(e){var t=this;const i=this.beans,n=Yie(i),{wrapperEl:o,eChild:s,closedCallback:r,afterGuiAttached:a,closeOnEsc:l,modal:d,ariaOwns:c}=e;let u=!1;const h=e=>{if(!o.contains(Uie(i)))return;e.key!==Eae.ESCAPE||this.isStopPropagation(e)||m({keyboardEvent:e})},p=e=>m({mouseEvent:e}),g=e=>m({touchEvent:e}),m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mouseEvent:i,touchEvent:a,keyboardEvent:l,forceHide:d}=e;(d||!t.isEventFromCurrentPopup({mouseEvent:i,touchEvent:a},s)&&!u)&&(u=!0,o.remove(),n.removeEventListener("keydown",h),n.removeEventListener("mousedown",p),n.removeEventListener("touchstart",g),n.removeEventListener("contextmenu",p),t.eventSvc.removeListener("dragStarted",p),r&&r(i||a||l),t.removePopupFromPopupList(s,c))};return a&&a({hidePopup:m}),window.setTimeout(()=>{l&&n.addEventListener("keydown",h),d&&(n.addEventListener("mousedown",p),this.eventSvc.addListener("dragStarted",p),n.addEventListener("touchstart",g),n.addEventListener("contextmenu",p))},0),m}addPopupToPopupList(e,t,i,n){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:Lde,isAnchored:!!n}),n&&this.setPopupPositionRelatedToElement(e,n),Lde+=1}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const i=this.getPopupIndex(e);if(-1===i)return;const n=this.popupList[i];if(n.stopAnchoringPromise&&n.stopAnchoringPromise.then(e=>e&&e()),n.stopAnchoringPromise=void 0,n.isAnchored=!1,!t)return;const o=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:n.hideFunc});return n.stopAnchoringPromise=o,n.isAnchored=!0,o}removePopupFromPopupList(e,t){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),t&&xne(t,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:n,ePopup:o}=e,s=n.getBoundingClientRect(),r=e=>Number.parseInt(e.substring(0,e.length-1),10),a=(e,t)=>{const n=i[e]-s[e],a=r(o.style[e]);return{initialDiff:n,lastDiff:n,initial:a,last:a,direction:t}},l=a("top",0),d=a("left",1),c=this.beans.frameworkOverrides;return new pae(i=>{c.wrapIncoming(()=>{var s,a;(s=()=>{const i=t.getBoundingClientRect(),s=n.getBoundingClientRect();if(0==s.top&&0==s.left&&0==s.height&&0==s.width)return void e.hidePopup();const a=(e,t)=>{const n=r(o.style[t]);e.last!==n&&(e.initial=n,e.last=n);const a=i[t]-s[t];if(a!=e.lastDiff){const i=this.keepXYWithinBounds(o,e.initial+e.initialDiff-a,e.direction);o.style[t]="".concat(i,"px"),e.last=i}e.lastDiff=a};a(l,"top"),a(d,"left")},a=200,new pae(e=>{e(window.setInterval(s,a))})).then(e=>{i(()=>{null!=e&&window.clearInterval(e)})})},"popupPositioning")})}isEventFromCurrentPopup(e,t){const{mouseEvent:i,touchEvent:n}=e,o=i||n;if(!o)return!1;const s=this.getPopupIndex(t);if(-1===s)return!1;for(let r=s;r<this.popupList.length;r++){if(roe(this.popupList[r].element,o))return!0}return this.isElementWithinCustomPopup(o.target)}isElementWithinCustomPopup(e){const t=Yie(this.beans);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||null===e.parentElement)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){const t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),n=i.length,o=this.getWrapper(e);if(!o||n<=1||!t.contains(e))return;const s=[],r=[];for(const c of i)c!==o&&(c.classList.contains("ag-always-on-top")?r.push(c):s.push(c));const a=[],l=r.length,d=o.classList.contains("ag-always-on-top")||!l?[...s,...r,o]:[...s,o,...r];for(let c=0;c<=n;c++){const e=d[c];if(i[c]===d[c]||e===o)continue;const n=e.querySelectorAll("div");for(const t of n)0!==t.scrollTop&&a.push([t,t.scrollTop]);0===c?t.insertAdjacentElement("afterbegin",e):d[c-1].insertAdjacentElement("afterend",e)}for(;a.length;){const e=a.pop();e[0].scrollTop=e[1]}}handleThemeChange(e){if(e.themeChanged){const e=this.beans.environment;for(const t of this.popupList)e.applyThemeClasses(t.wrapper)}}},Tde=(e,t)=>{if(null!=t&&null!==e&&void 0!==e&&e.setPointerCapture)try{return e.setPointerCapture(t),e.hasPointerCapture(t)}catch(i){}return!1},Rde=e=>{const{eElement:t,onLost:i}=e;t&&i&&(t.removeEventListener("lostpointercapture",i),e.onLost=null)},Ede=(e,t)=>{Rde(e);const{eElement:i,pointerId:n}=e;i&&t.pointerId===n&&Tde(i,n)},Pde={passive:!0},Ode={passive:!1},Fde=e=>{if(Lle){if(Lle.has(e))return!1}else Lle=new WeakSet;return Lle.add(e),!0},zde=class extends voe{constructor(){super(...arguments),this.beanName="dragSvc",this.dragging=!1,this.drag=null,this.dragSources=[]}get startTarget(){var e,t;return null!==(e=null===(t=this.drag)||void 0===t?void 0:t.start.target)&&void 0!==e?e:null}isPointer(){var e;return!(null===(e=Ale)||void 0===e||!e.has(Kie(this.beans)))}hasPointerCapture(){var e,t,i;const n=null===(e=this.drag)||void 0===e?void 0:e.pointerCapture;return!(!n||null===(t=(i=this.beans.eRootDiv).hasPointerCapture)||void 0===t||!t.call(i,n.pointerId))}destroy(){this.drag&&this.cancelDrag();const e=this.dragSources;for(const t of e)Bde(t);e.length=0,super.destroy()}removeDragSource(e){const t=this.dragSources;for(let i=0,n=t.length;i<n;++i){const n=t[i];if(n.params===e){t.splice(i,1),Bde(n);break}}}addDragSource(e){if(!this.isAlive())return;const{eElement:t,includeTouch:i}=e,n=[];let o;if(i){const e=t.style;e&&(o=e.touchAction,e.touchAction="none")}const s={handlers:n,params:e,oldTouchAction:o};this.dragSources.push(s);hoe(n,[t,"pointerdown",t=>this.onPointerDown(e,t),Ode],[t,"mousedown",t=>this.onMouseDown(e,t)]);const r=this.gos.get("suppressTouch");if(i&&!r){hoe(n,[t,"touchstart",t=>this.onTouchStart(e,t),Ode])}}cancelDrag(e){var t,i;const n=this.drag;null!==e&&void 0!==e||(e=null===n||void 0===n?void 0:n.eElement),e&&this.eventSvc.dispatchEvent({type:"dragCancelled",target:e}),null===n||void 0===n||null===(t=(i=n.params).onDragCancel)||void 0===t||t.call(i),this.destroyDrag()}shouldPreventMouseEvent(e){const t=e.type;return("mousemove"===t||"pointermove"===t)&&e.cancelable&&coe(this.beans,e)&&!wne(Gde(e))}initDrag(e){this.drag=e;const t=this.beans,i=e=>this.onScroll(e),n=Kie(t),o=Yie(t);for(var s=arguments.length,r=new Array(s>1?s-1:0),a=1;a<s;a++)r[a-1]=arguments[a];hoe(e.handlers,[n,"contextmenu",goe],[n,"keydown",e=>this.onKeyDown(e)],[o,"scroll",i,{capture:!0}],[o.defaultView||window,"scroll",i],...r)}destroyDrag(){this.dragging=!1;const e=this.drag;if(e){var t;const i=e.rootEl;(null===(t=Ale)||void 0===t?void 0:t.get(i))===e&&Ale.delete(i),this.drag=null,(e=>{if(!e)return;Rde(e);const{eElement:t,pointerId:i}=e;if(t){try{t.releasePointerCapture(i)}catch(n){}e.eElement=null}})(e.pointerCapture),poe(e.handlers)}}onPointerDown(e,t){var i;if(this.isPointer())return;const n=this.beans;if(null!==(i=Lle)&&void 0!==i&&i.has(t))return;const o=t.pointerType;if("touch"===o){if(n.gos.get("suppressTouch")||!e.includeTouch)return;if(e.stopPropagationForTouch&&t.stopPropagation(),wne(Gde(t)))return}if(!t.isPrimary)return;if("mouse"===o&&0!==t.button)return;this.destroyDrag();const s=Kie(n),r=e.eElement,a=t.pointerId,l=new Vde(s,e,t,a);null!==Ale&&void 0!==Ale||(Ale=new WeakMap),Ale.set(s,l);const d=e=>this.draggingPreventDefault(e);this.initDrag(l,[s,"pointerup",e=>{e.pointerId===a&&this.onMouseOrPointerUp(e)}],[s,"pointercancel",e=>{e.pointerId===a&&Fde(e)&&this.cancelDrag()}],[s,"pointermove",e=>{e.pointerId===a&&this.onMouseOrPointerMove(e)},Ode],[s,"touchmove",d,Ode],[r,"mousemove",d,Ode]),0===e.dragStartPixels?this.onMouseOrPointerMove(t):Fde(t)}onTouchStart(e,t){var i;if(this.gos.get("suppressTouch")||!e.includeTouch)return;if(!Fde(t))return;if(wne(Gde(t)))return;if(e.stopPropagationForTouch&&t.stopPropagation(),this.isPointer())return void(this.dragging&&goe(t));this.destroyDrag();const n=this.beans,o=Kie(n),s=new Vde(o,e,t.touches[0]),r=e=>this.onTouchUp(e),a=e=>this.onTouchCancel(e),l=Kie(n),d=null!==(i=t.target)&&void 0!==i?i:e.eElement;this.initDrag(s,[d,"touchmove",e=>this.onTouchMove(e),Pde],[d,"touchend",r,Pde],[d,"touchcancel",a,Pde],[l,"touchmove",e=>this.draggingPreventDefault(e),Ode],[l,"touchend",r,Ode],[l,"touchcancel",a,Ode]),0===e.dragStartPixels&&this.onMove(s.start)}draggingPreventDefault(e){this.dragging&&goe(e)}onMouseDown(e,t){var i;if(0!==t.button)return;if(null!==(i=Lle)&&void 0!==i&&i.has(t))return;if(this.isPointer())return;const n=this.beans;this.destroyDrag();const o=new Vde(Kie(n),e,t),s=Kie(n);this.initDrag(o,[s,"mousemove",e=>this.onMouseOrPointerMove(e)],[s,"mouseup",e=>this.onMouseOrPointerUp(e)]),0===e.dragStartPixels?this.onMouseOrPointerMove(t):Fde(t)}onScroll(e){if(!Fde(e))return;const t=this.drag,i=null===t||void 0===t?void 0:t.lastDrag;var n,o;i&&this.dragging&&(null===(n=t.params)||void 0===n||null===(o=n.onDragging)||void 0===o||o.call(n,i))}onMouseOrPointerMove(e){if(Fde(e)){var t;if(Wae())null===(t=Yie(this.beans).getSelection())||void 0===t||t.removeAllRanges();this.shouldPreventMouseEvent(e)&&goe(e),this.onMove(e)}}onTouchCancel(e){const t=this.drag;t&&Fde(e)&&doe(t.start,e.changedTouches)&&this.cancelDrag()}onTouchMove(e){const t=this.drag;if(!t||!Fde(e))return;const i=doe(t.start,e.touches);i&&(this.onMove(i),this.draggingPreventDefault(e))}onMove(e){var t;const i=this.drag;if(!i)return;i.lastDrag=e;const n=i.params;if(!this.dragging){var o,s;const t=i.start,r=n.dragStartPixels;if(loe(e,t,null!==r&&void 0!==r?r:4))return;if(this.dragging=!0,n.capturePointer&&(i.pointerCapture=((e,t)=>{if("undefined"===typeof PointerEvent||!(t instanceof PointerEvent))return null;const i=t.pointerId;if(!Tde(e,i))return null;const n={eElement:e,pointerId:i,onLost(e){Ede(n,e)}};return e.addEventListener("lostpointercapture",n.onLost),n})(this.beans.eRootDiv,e)),this.eventSvc.dispatchEvent({type:"dragStarted",target:n.eElement}),null===(o=n.onDragStart)||void 0===o||o.call(n,t),this.drag!==i)return;if(null===(s=n.onDragging)||void 0===s||s.call(n,t),this.drag!==i)return}null===(t=n.onDragging)||void 0===t||t.call(n,e)}onTouchUp(e){const t=this.drag;t&&Fde(e)&&this.onUp(doe(t.start,e.changedTouches))}onMouseOrPointerUp(e){Fde(e)&&this.onUp(e)}onUp(e){const t=this.drag;if(t){var i,n;if(e||(e=t.lastDrag),e&&this.dragging)this.dragging=!1,null===(i=(n=t.params).onDragStop)||void 0===i||i.call(n,e),this.eventSvc.dispatchEvent({type:"dragStopped",target:t.params.eElement});this.destroyDrag()}}onKeyDown(e){e.key===Eae.ESCAPE&&this.cancelDrag()}},Bde=e=>{poe(e.handlers);const t=e.oldTouchAction;if(null!=t){const i=e.params.eElement.style;i&&(i.touchAction=t)}},Vde=class{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.rootEl=e,this.params=t,this.start=i,this.pointerId=n,this.handlers=[],this.lastDrag=null,this.pointerCapture=null,this.eElement=t.eElement}},Gde=e=>{const t=e.target;return t instanceof Element?t:null},Hde=class extends voe{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.dragSource=null,this.dragImageCompPromise=null,this.dragImageComp=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.dropTargets=[],this.externalDropZoneCount=0,this.lastDropTarget=null}addDragSource(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i={capturePointer:!0,dragSource:e,eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:t=>this.onDragStart(e,t),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push(i),this.beans.dragSvc.addDragSource(i)}setDragImageCompIcon(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.dragImageComp;i&&(t||this.dragImageLastIcon!==e)&&(this.dragImageLastIcon=e,i.setIcon(e,t))}removeDragSource(e){const{dragSourceAndParamsList:t,beans:i}=this;for(let o=0,s=t.length;o<s;o++)if(t[o].dragSource===e){var n;const e=t[o];null===(n=i.dragSvc)||void 0===n||n.removeDragSource(e),t.splice(o,1);break}}destroy(){const{dragSourceAndParamsList:e,dropTargets:t,beans:i}=this,n=i.dragSvc;for(const o of e)null===n||void 0===n||n.removeDragSource(o);e.length=0,t.length=0,this.externalDropZoneCount=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){const e=this.lastMouseEvent;e&&this.onDragging(e,!0)}onDragStart(e,t){var i;this.lastMouseEvent=t,this.dragSource=e,this.dragItem=e.getDragItem();const n=e.eElement.getBoundingClientRect();this.dragInitialSourcePointerOffsetX=t.clientX-n.left,this.dragInitialSourcePointerOffsetY=t.clientY-n.top,null===(i=e.onDragStarted)||void 0===i||i.call(e),this.createAndUpdateDragImageComp(e)}onDragStop(e){var t;const{dragSource:i,lastDropTarget:n}=this;if(null===i||void 0===i||null===(t=i.onDragStopped)||void 0===t||t.call(i),n){var o;const t=this.dropTargetEvent(n,e,!1);null===(o=n.onDragStop)||void 0===o||o.call(n,t)}this.clearDragAndDropProperties()}onDragCancel(){var e;const{dragSource:t,lastDropTarget:i,lastMouseEvent:n}=this;if(null===t||void 0===t||null===(e=t.onDragCancelled)||void 0===e||e.call(t),i&&n){var o;const e=this.dropTargetEvent(i,n,!1);null===(o=i.onDragCancel)||void 0===o||o.call(i,e)}this.clearDragAndDropProperties()}onDragging(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.positionDragImageComp(e);const i=this.findCurrentDropTarget(e),{lastDropTarget:n,dragSource:o,dragItem:s}=this;let r=!1;if(i!==n){if(r=!0,n){var a;const i=this.dropTargetEvent(n,e,t);null===(a=n.onDragLeave)||void 0===a||a.call(n,i)}if(null===n||i?null===n&&i&&this.handleEnter(o,s):this.handleExit(o,s),i){var l;const n=this.dropTargetEvent(i,e,t);null===(l=i.onDragEnter)||void 0===l||l.call(i,n)}this.lastDropTarget=i}else if(i){var d;const n=this.dropTargetEvent(i,e,t);null===(d=i.onDragging)||void 0===d||d.call(i,n),null!==n&&void 0!==n&&n.changed&&(r=!0)}this.lastMouseEvent=e,r&&this.updateDragImageComp()}clearDragAndDropProperties(){this.removeDragImageComp(this.dragImageComp),this.dragImageCompPromise=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.lastDropTarget=null,this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.dragSource=null}getAllContainersFromDropTarget(e){var t;const i=e.getContainer(),n=null===(t=e.getSecondaryContainers)||void 0===t?void 0:t.call(e),o=null===n||void 0===n?void 0:n.length;if(!o)return[[i]];const s=new Array(o+1);s[0]=[i];for(let r=0;r<o;++r)s[r+1]=n[r];return s}isMouseOnDropTarget(e,t){const i=this.getAllContainersFromDropTarget(t);let n=!1;const o=(e,t)=>{for(const i of t){const{width:t,height:n,left:o,right:s,top:r,bottom:a}=i.getBoundingClientRect();if(0===t||0===n)return!1;const l=e.clientX>=o&&e.clientX<s,d=e.clientY>=r&&e.clientY<a;if(!l||!d)return!1}return!0};for(const a of i)if(o(e,a)){n=!0;break}const{eElement:s,type:r}=this.dragSource;return!(t.targetContainsSource&&!t.getContainer().contains(s))&&(n&&t.isInterestedIn(r,s))}findCurrentDropTarget(e){const t=[],i=this.dropTargets;for(let s=0,r=i.length;s<r;++s){const n=i[s];this.isMouseOnDropTarget(e,n)&&t.push(n)}const n=t.length;if(0===n)return null;if(1===n)return t[0];const o=Kie(this.beans).elementsFromPoint(e.clientX,e.clientY);for(let s=0,r=o.length;s<r;++s){const e=o[s];for(let i=0,n=t.length;i<n;i++){const n=t[i],o=this.getAllContainersFromDropTarget(n);let s=!1;for(let t=0,i=o.length;t<i&&!s;t++){const i=o[t];for(let t=0,n=i.length;t<n;t++)if(i[t]===e){s=!0;break}}if(s)return n}}return null}addDropTarget(e){this.dropTargets.push(e),e.external&&this.externalDropZoneCount++}removeDropTarget(e){const t=e.getContainer(),i=this.dropTargets;let n=0;for(let o=0,s=i.length;o<s;++o){const e=i[o];e.getContainer()!==t?(n!==o&&(i[n]=e),++n):e.external&&--this.externalDropZoneCount}i.length=n}hasExternalDropZones(){return this.externalDropZoneCount>0}findExternalZone(e){const t=this.dropTargets;for(let i=0,n=t.length;i<n;++i){const n=t[i];if(n.external&&n.getContainer()===e)return n}return null}dropTargetEvent(e,t,i){var n;const{dragSource:o,dragItem:s,lastDraggingEvent:r,lastMouseEvent:a,dragInitialSourcePointerOffsetX:l,dragInitialSourcePointerOffsetY:d}=this,c=e.getContainer(),u=c.getBoundingClientRect(),{clientX:h,clientY:p}=t,g=h-((null===a||void 0===a?void 0:a.clientX)||0),m=p-((null===a||void 0===a?void 0:a.clientY)||0),f=this.createEvent({event:t,x:h-u.left,y:p-u.top,vDirection:m>0?"down":m<0?"up":null,hDirection:g<0?"left":g>0?"right":null,initialSourcePointerOffsetX:l,initialSourcePointerOffsetY:d,dragSource:o,fromNudge:i,dragItem:s,dropZoneTarget:c,dropTarget:null!==(n=null===r||void 0===r?void 0:r.dropTarget)&&void 0!==n?n:null,changed:!(null===r||void 0===r||!r.changed)});return this.lastDraggingEvent=f,f}positionDragImageComp(e){var t;const i=null===(t=this.dragImageComp)||void 0===t?void 0:t.getGui();i&&uoe(i,e,this.beans)}removeDragImageComp(e){var t;(this.dragImageComp===e&&(this.dragImageComp=null),e)&&(null===(t=e.getGui())||void 0===t||t.remove(),this.destroyBean(e))}createAndUpdateDragImageComp(e){var t;const i=null!==(t=this.createDragImageComp(e))&&void 0!==t?t:null;this.dragImageCompPromise=i,null===i||void 0===i||i.then(e=>{if(i!==this.dragImageCompPromise||!this.lastMouseEvent||!this.isAlive())return void this.destroyBean(e);this.dragImageCompPromise=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0;const t=this.dragImageComp;t!==e&&(this.dragImageComp=e,this.removeDragImageComp(t)),e&&(this.appendDragImageComp(e),this.updateDragImageComp())})}appendDragImageComp(e){var t;const i=e.getGui(),n=i.style;n.position="absolute",n.zIndex="9999",null!==(t=this.beans.dragSvc)&&void 0!==t&&t.hasPointerCapture()&&(n.pointerEvents="none"),this.gos.setInstanceDomData(i),this.beans.environment.applyThemeClasses(i),n.top="20px",n.left="20px";const o=Xie(this.beans);o?o.appendChild(i):this.warnNoBody()}updateDragImageComp(){var e,t;const{dragImageComp:i,dragSource:n,lastDropTarget:o,lastDraggingEvent:s,dragImageLastLabel:r}=this;if(!i)return;this.setDragImageCompIcon(null!==(e=null===o||void 0===o||null===(t=o.getIconName)||void 0===t?void 0:t.call(o,s))&&void 0!==e?e:null);let a=null===n||void 0===n?void 0:n.dragItemName;"function"===typeof a&&(a=a(s)),a||(a=""),r!==a&&(this.dragImageLastLabel=a,i.setLabel(a))}},jde=class extends voe{constructor(e,t){super(),this.comp=e,this.stopPropagationCallbacks=t}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:i,eFocusableElement:n,stopPropagationCallbacks:o}=this,s=[t,i],r={setTabIndex:e=>{for(const t of s)null==e?t.removeAttribute("tabindex"):t.setAttribute("tabindex",e)}};this.addTabGuards(t,i);const{focusTrapActive:a=!1,onFocusIn:l,onFocusOut:d,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:h,shouldStopEventPropagation:p,isEmpty:g,forceFocusOutWhenTabGuardsAreEmpty:m,isFocusableContainer:f}=e;this.tabGuardCtrl=this.createManagedBean(new cle({comp:r,focusTrapActive:a,eTopGuard:t,eBottomGuard:i,eFocusableElement:n,onFocusIn:l,onFocusOut:d,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:h,shouldStopEventPropagation:p,isEmpty:g,forceFocusOutWhenTabGuardsAreEmpty:m,isFocusableContainer:f},o))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=Yie(this.beans).createElement("div"),i="top"===e?lle:dle;return t.classList.add(ale,i),tne(t,"presentation"),t}addTabGuards(e,t){const i=this.eFocusableElement;i.prepend(e),i.append(t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];Fne(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,i){$ne(t)||(t=t.getGui());const{eBottomGuard:n}=this;n?n.before(t):e(t,i)}destroy(){const{eTopGuard:e,eBottomGuard:t}=this;zne(e),zne(t),super.destroy()}},Wde=class extends uae{initialiseTabGuard(e,t){this.tabGuardFeature=this.createManagedBean(new jde(this,t)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},_de=(e=>(e[e.ToolPanel=0]="ToolPanel",e[e.HeaderCell=1]="HeaderCell",e[e.RowDrag=2]="RowDrag",e[e.ChartPanel=3]="ChartPanel",e[e.AdvancedFilterBuilder=4]="AdvancedFilterBuilder",e))(_de||{});function Kde(e,t){return e+"_"+t}function Ude(e){return e instanceof Yde}var Yde=class extends yoe{constructor(e,t,i,n){super(),this.providedColumnGroup=e,this.groupId=t,this.partId=i,this.pinned=n,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.colIdSanitised=Wie(this.getUniqueId())}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return Kde(this.groupId,this.partId)}isEmptyGroup(){return 0===this.displayedChildren.length}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!(!e||0===e.length)&&e.every(e=>e.isMoving())}checkLeft(){for(const e of this.displayedChildren)Ude(e)&&e.checkLeft();if(this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const e=pre(this.displayedChildren).getLeft();this.setLeft(e)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;for(const i of null!==(t=this.displayedChildren)&&void 0!==t?t:[]){var t;e+=i.getActualWidth()}return e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;for(const t of this.displayedChildren)t.isResizable()&&(e=!0);return e}getMinWidth(){let e=0;for(const t of this.displayedChildren)e+=t.getMinWidth();return e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){var e;return!(null===(e=this.getColGroupDef())||void 0===e||!e.autoHeaderHeight)}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){for(const i of null!==(t=this.displayedChildren)&&void 0!==t?t:[]){var t;qse(i)?e.push(i):Ude(i)&&i.addDisplayedLeafColumns(e)}}addLeafColumns(e){for(const i of null!==(t=this.children)&&void 0!==t?t:[]){var t;qse(i)?e.push(i):Ude(i)&&i.addLeafColumns(e)}}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return this.isPadding()&&null!==e&&void 0!==e&&e.isPadding()?1+e.getPaddingLevel():0}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;null!==(t=e)&&void 0!==t&&t.isPadding();){var t;e=e.getParent()}if(!(!!e&&e.getProvidedColumnGroup().isExpandable()))return this.displayedChildren=this.children,void this.dispatchLocalEvent({type:"displayedChildrenChanged"});for(const o of null!==(i=this.children)&&void 0!==i?i:[]){var i,n;if(Ude(o)&&!(null!==(n=o.displayedChildren)&&void 0!==n&&n.length))continue;switch(o.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(o);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(o);break;default:this.displayedChildren.push(o)}}this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},$de="row-group-",Zde="t-",Xde="b-",qde=0,Qde=class{constructor(e){this.id=void 0,this.destroyed=!1,this._groupData=void 0,this.master=!1,this.detail=void 0,this.rowIndex=null,this.field=null,this.rowGroupColumn=null,this.key=null,this.sourceRowIndex=-1,this._leafs=void 0,this.childrenMapped=null,this.treeParent=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=qde++,this.alreadyRendered=!1,this.formulaRowIndex=null,this.hovered=!1,this.__selected=!1,this.beans=e}get groupData(){var e,t;const i=this._groupData;return void 0!==i?i:this.footer?null===(n=this.sibling)||void 0===n?void 0:n.groupData:null!==(e=null===(t=this.beans.groupStage)||void 0===t?void 0:t.loadGroupData(this))&&void 0!==e?e:null;var n}set groupData(e){this._groupData=e}get allLeafChildren(){var e,t,i;const n=this._leafs;return void 0===n?null!==(e=null===(t=this.beans.groupStage)||void 0===t||null===(i=t.loadLeafs)||void 0===i?void 0:i.call(t,this))&&void 0!==e?e:null:n}set allLeafChildren(e){this._leafs=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){var i;const{valueCache:n,eventSvc:o}=this.beans,s=this.data;this.data=e,null===n||void 0===n||n.onDataChanged(),this.updateDataOnDetailNode(),this.resetQuickFilterAggregateText();const r=this.createDataChangedEvent(e,s,t);if(null===(i=this.__localEventService)||void 0===i||i.dispatchEvent(r),this.sibling){var a;this.sibling.data=e;const i=this.sibling.createDataChangedEvent(e,s,t);null===(a=this.sibling.__localEventService)||void 0===a||a.dispatchEvent(i)}o.dispatchEvent({type:"rowNodeDataChanged",node:this});const l=this.pinnedSibling;var d;l&&(l.data=e,null===(d=l.__localEventService)||void 0===d||d.dispatchEvent(l.createDataChangedEvent(e,s,t)),o.dispatchEvent({type:"rowNodeDataChanged",node:l}))}updateDataOnDetailNode(){const e=this.detailNode;e&&(e.data=this.data)}createDataChangedEvent(e,t,i){return{type:"dataChanged",node:this,oldData:t,newData:e,update:i}}getRowIndexString(){return null==this.rowIndex?(dse(13),null):"top"===this.rowPinned?Zde+this.rowIndex:"bottom"===this.rowPinned?Xde+this.rowIndex:this.rowIndex.toString()}setDataAndId(e,t){var i,n;const{selectionSvc:o}=this.beans,s=null===o||void 0===o||null===(i=o.createDaemonNode)||void 0===i?void 0:i.call(o,this),r=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),o&&(o.updateRowSelectable(this),o.syncInRowNode(this,s));const a=this.createDataChangedEvent(e,r,!1);null===(n=this.__localEventService)||void 0===n||n.dispatchEvent(a)}setId(e){const t=Pse(this.beans.gos);if(t)if(this.data){var i,n;const e=null!==(i=null===(n=this.parent)||void 0===n?void 0:n.getRoute())&&void 0!==i?i:[];this.id=t({data:this.data,parentKeys:e.length>0?e:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith($de)&&dse(14,{groupPrefix:$de})}else this.id=void 0;else this.id=e}setRowTop(e){if(this.oldRowTop=this.rowTop,this.rowTop===e)return;this.rowTop=e,this.dispatchRowEvent("topChanged");const t=null!==e;this.displayed!==t&&(this.displayed=t,this.dispatchRowEvent("displayedChanged"))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setRowHeight(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setExpanded(e,t,i){var n;null===(n=this.beans.expansionSvc)||void 0===n||n.setExpanded(this,e,t,i)}setDataValue(e,t,i){var n;const{colModel:o,valueSvc:s,gos:r,editSvc:a}=this.beans,l="string"!==typeof e?e:null!==(n=o.getCol(e))&&void 0!==n?n:o.getColDefCol(e);if(!l)return!1;const d=s.getValueForDisplay({column:l,node:this,source:"api"}).value;if(r.get("readOnlyEdit")){const{beans:{eventSvc:e},data:n,rowIndex:o,rowPinned:s}=this;return e.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:o,rowPinned:s,column:l,colDef:l.colDef,data:n,node:this,oldValue:d,newValue:t,value:t,source:i}),!1}if(a&&!a.committing){const e=a.setDataValue({rowNode:this,column:l},t,i);if(null!=e)return e}const c=s.setValue(this,l,t,i);var u;(this.dispatchCellChangedEvent(l,t,d),c)&&(null===(u=this.pinnedSibling)||void 0===u||u.dispatchCellChangedEvent(l,t,d));return c}updateHasChildren(){var e;let t=this.group&&!this.footer||!(null===(e=this.childrenAfterGroup)||void 0===e||!e.length);const{rowChildrenSvc:i}=this.beans;i&&(t=i.getHasChildrenValue(this)),t!==this.__hasChildren&&(this.__hasChildren=!!t,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return null==this.__hasChildren&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,i){var n;const o={type:"cellChanged",node:this,column:e,newValue:t,oldValue:i};null===(n=this.__localEventService)||void 0===n||n.dispatchEvent(o)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){var e,t;return null!==(e=null===(t=this.beans.expansionSvc)||void 0===t?void 0:t.isExpandable(this))&&void 0!==e&&e}isSelected(){if(this.footer)return this.sibling.isSelected();const e=this.rowPinned&&this.pinnedSibling;return e?e.isSelected():this.__selected}depthFirstSearch(e){const t=this.childrenAfterGroup;if(t)for(let i=0,n=t.length;i<n;++i)t[i].depthFirstSearch(e);e(this)}dispatchRowEvent(e){var t;null===(t=this.__localEventService)||void 0===t||t.dispatchEvent({type:e,node:this})}setSelected(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"api";null===(t=this.beans.selectionSvc)||void 0===t||t.setNodesSelected({nodes:[this],newValue:e,clearSelection:i,source:n})}isRowPinned(){return!!this.rowPinned}__addEventListener(e,t){var i;(null!==(i=this.__localEventService)&&void 0!==i?i:this.__localEventService=new Pie).addEventListener(e,t)}__removeEventListener(e,t){this.removeLocalListener(e,t)}addEventListener(e,t){var i,n,o,s,r,a;null===(i=this.beans.validation)||void 0===i||i.checkRowEvents(e);const l=null!==(n=this.__localEventService)&&void 0!==n?n:this.__localEventService=new Pie;this.frameworkEventListenerService=null===(o=(s=this.beans.frameworkOverrides).createLocalEventListenerWrapper)||void 0===o?void 0:o.call(s,this.frameworkEventListenerService,l);const d=null!==(r=null===(a=this.frameworkEventListenerService)||void 0===a?void 0:a.wrap(e,t))&&void 0!==r?r:t;l.addEventListener(e,d)}removeEventListener(e,t){var i,n;const o=null!==(i=null===(n=this.frameworkEventListenerService)||void 0===n?void 0:n.unwrap(e,t))&&void 0!==i?i:t;this.removeLocalListener(e,o)}removeLocalListener(e,t){const i=this.__localEventService;i&&(i.removeEventListener(e,t),i.noRegisteredListenersExist()&&(this.__localEventService=null))}isFullWidthCell(){if(lse(61),this.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return!!e&&e({rowNode:this})}getRoute(){if(-1===this.level)return[];if(null==this.key)return;const e=[];let t=this;for(;null!=(null===(i=t)||void 0===i?void 0:i.key);){var i;e.push(t.key),t=t.parent}return e.reverse()}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent("rowIndexChanged"))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent("allChildrenCountChanged"))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent("uiLevelChanged"))}getFirstChild(){var e,t;const i=this.childStore;return i?i.getFirstNode():null!==(e=null===(t=this.childrenAfterSort)||void 0===t?void 0:t[0])&&void 0!==e?e:null}_destroy(e){if(this.destroyed)return!1;if(this.destroyed=!0,e?this.clearRowTopAndRowIndex():(this.setRowTop(null),this.setRowIndex(null)),!this.footer){const t=this.detailNode;t&&t._destroy(e);const i=this.sibling;i&&i._destroy(e)}return!0}};function Jde(e,t,i){return Kse(t,{type:i,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned})}var ece=new Set(["__autoHeights","__checkAutoHeightsDebounced","__localEventService","__objectId","_groupData","_leafs","childStore","groupValue","oldRowTop","sticky","treeNodeFlags","treeParent"]),tce=(e,t)=>{const i=new Qde(t);for(const n of Object.keys(e))ece.has(n)||(i[n]=e[n]);return i.oldRowTop=null,i},ice=(e,t,i)=>{if(!i)return;let n=i.rowIndex;if(null==n)return;n+=t;const o=e.getRowCount();for(;n>=0&&n<o;){const i=e.getRow(n);if(!i||!i.footer&&!i.detail)return i;n+=t}},nce={agSetColumnFilter:"agSetColumnFilterHandler",agMultiColumnFilter:"agMultiColumnFilterHandler",agGroupColumnFilter:"agGroupColumnFilterHandler",agNumberColumnFilter:"agNumberColumnFilterHandler",agDateColumnFilter:"agDateColumnFilterHandler",agTextColumnFilter:"agTextColumnFilterHandler"};new Set(Object.values(nce));function oce(e){return toe(e)}var sce=class extends gle{},rce="__ag_Grid_Stop_Propagation";function ace(e){e[rce]=!0}function lce(e){return!0===e[rce]}var dce={isStopPropagation:lce,stopPropagation:ace},cce=class extends rle{constructor(e,t){super(e,dce,t)}};var uce={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"},hce=class extends yoe{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.gos.get("domLayout"),t={autoHeight:"autoHeight"===e,normal:"normal"===e,print:"print"===e},i=t.autoHeight?uce.AUTO_HEIGHT:t.print?uce.PRINT:uce.NORMAL;this.view.updateLayoutClasses(i,t)}},pce="Viewport",gce="fakeVScrollComp",mce=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"],fce=class extends yoe{constructor(e){super(),this.clearRetryListenerFncs=[],this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.lastIsHorizontalScrollShowing=!1,this.scrollTimer=0,this.isScrollActive=!1,this.isVerticalPositionInvalidated=!0,this.isHorizontalPositionInvalidated=!0,this.eBodyViewport=e,this.resetLastHScrollDebounced=Moe(this,()=>this.lastScrollSource[1]=null,150),this.resetLastVScrollDebounced=Moe(this,()=>this.lastScrollSource[0]=null,150)}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.animationFrameSvc=e.animationFrameSvc,this.visibleCols=e.visibleCols}destroy(){super.destroy(),this.clearRetryListenerFncs=[],window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");const e=this.invalidateVerticalScroll.bind(this),t=this.invalidateHorizontalScroll.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),bodyHeightChanged:e,scrollGapChanged:t}),this.addManagedElementListeners(this.eBodyViewport,{scroll:e}),this.ctrlsSvc.whenReady(this,e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}invalidateHorizontalScroll(){this.isHorizontalPositionInvalidated=!0}invalidateVerticalScroll(){this.isVerticalPositionInvalidated=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,pce)});for(const e of mce){const t=this.ctrlsSvc.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsSvc.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),i=t?Moe(this,this.onVScroll.bind(this,pce),100):this.onVScroll.bind(this,pce),n=t?Moe(this,this.onVScroll.bind(this,gce),100):this.onVScroll.bind(this,gce);this.addManagedElementListeners(this.eBodyViewport,{scroll:i}),this.registerScrollPartner(e,n)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){null==this.centerRowsCtrl||(void 0===e&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...mce,pce]){if(this.lastScrollSource[1]===t)continue;One(this.getViewportForSource(t),e,this.enableRtl)}}getViewportForSource(e){return e===pce?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(e).eViewport}isControllingScroll(e,t){return null==this.lastScrollSource[t]?(0===t?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.eViewport,{scrollLeft:i}=t;if(this.shouldBlockScrollUpdate(1,i,!0))return;const n=Pne(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(n),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;if(t=e===pce?this.eBodyViewport.scrollTop:this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0))return;const{animationFrameSvc:i}=this;null===i||void 0===i||i.setScrollTop(t),this.nextScrollTop=t,e===pce?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,null!==i&&void 0!==i&&i.active?i.schedule():this.scrollGridIfNeeded(!0),this.resetLastVScrollDebounced()}doHorizontalScroll(e){const t=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}isScrolling(){return this.isScrollActive}fireScrollEvent(e){const t={type:"bodyScroll",direction:1===e?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.isScrollActive=!0,this.eventSvc.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{this.scrollTimer=0,this.isScrollActive=!1,this.eventSvc.dispatchEvent(p(p({},t),{},{type:"bodyScrollEnd"}))},150)}shouldBlockScrollUpdate(e,t){return!(arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&!Uae())&&(0===e?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t))}shouldBlockVerticalScroll(e){const t=Lne(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return!!(e<0||e+t>i)}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.eViewport;if(this.enableRtl){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){const e=this.scrollLeft;let t=!1;for(const i of mce){if(this.getViewportForSource(i).scrollLeft!==e){t=!0;break}}t&&this.onHScroll(pce)}scrollGridIfNeeded(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,e&&this.invalidateVerticalScroll(),this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(e=this.enableRtl?e>0?0:i:Math.min(Math.max(e,0),i)),One(this.centerRowsCtrl.eViewport,Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.invalidateVerticalScroll(),this.eBodyViewport.scrollTop=e}getVScrollPosition(){if(!this.isVerticalPositionInvalidated){const{lastOffsetHeight:e,lastScrollTop:t}=this;return{top:t,bottom:t+e}}this.isVerticalPositionInvalidated=!1;const{scrollTop:e,offsetHeight:t}=this.eBodyViewport;return this.lastScrollTop=e,this.lastOffsetHeight=t,{top:e,bottom:e+t}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.isHorizontalPositionInvalidated&&(this.lastIsHorizontalScrollShowing=this.centerRowsCtrl.isHorizontalScrollShowing(),this.isHorizontalPositionInvalidated=!1),this.lastIsHorizontalScrollShowing}scrollHorizontally(e){const t=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.eViewport.scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{rowModel:i}=this.beans,n=i.getRowCount();let o=-1;for(let s=0;s<n;s++){const t=i.getRow(s);if("function"===typeof e){if(t&&e(t)){o=s;break}}else if(e===t||e===t.data){o=s;break}}o>=0&&this.ensureIndexVisible(o,t)}ensureIndexVisible(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(fse(this.gos,"print"))return;const{rowModel:n}=this.beans,o=n.getRowCount();if("number"!==typeof e||e<0||e>=o)return void lse(88,{index:e});this.clearRetryListeners();const{frameworkOverrides:s,pageBounds:r,rowContainerHeight:a,rowRenderer:l}=this.beans;s.wrapIncoming(()=>{var o,s;const d=this.ctrlsSvc.getGridBodyCtrl(),c=n.getRow(e);let u,h,p=0;this.invalidateVerticalScroll();do{const{stickyTopHeight:e,stickyBottomHeight:i}=d,n=c.rowTop,o=c.rowHeight,s=r.getPixelOffset(),g=c.rowTop-s,m=g+c.rowHeight,f=this.getVScrollPosition(),v=a.divStretchOffset,y=f.top+v,b=f.bottom+v,x=b-y,C=a.getScrollPositionForPixel(g),S=a.getScrollPositionForPixel(m-x),w=Math.min((C+S)/2,g);let M=null;"top"===t?M=C-e:"bottom"===t?M=S+i:"middle"===t?M=w:y+e>g?M=C-e:b-i<m&&(M=S-C>x?C-e:S+i),null!==M&&(this.setVerticalScrollPosition(M),l.redraw({afterScroll:!0})),u=n!==c.rowTop||o!==c.rowHeight,h=e!==d.stickyTopHeight||i!==d.stickyBottomHeight,p++}while((u||h)&&p<10);if(null===(o=this.animationFrameSvc)||void 0===o||o.flushAllFrames(),i<10&&(null!==c&&void 0!==c&&c.stub||null===(s=this.beans.rowAutoHeight)||void 0===s||!s.areRowsMeasured())){const o=this.getVScrollPosition().top;this.clearRetryListenerFncs=this.addManagedEventListeners({bodyScroll:()=>{const e=this.getVScrollPosition().top;o!==e&&this.clearRetryListeners()},modelUpdated:()=>{this.clearRetryListeners(),e>=n.getRowCount()||this.ensureIndexVisible(e,t,i+1)}})}})}clearRetryListeners(){for(const e of this.clearRetryListenerFncs)e();this.clearRetryListenerFncs=[]}ensureColumnVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";const{colModel:i,frameworkOverrides:n}=this.beans,o=i.getCol(e);if(!o)return;if(o.isPinned())return;if(!this.visibleCols.isColDisplayed(o))return;const s=this.getPositionedHorizontalScroll(o,t);n.wrapIncoming(()=>{var e;null!==s&&this.centerRowsCtrl.setCenterViewportScrollLeft(s),this.centerRowsCtrl.onHorizontalViewportChanged(),null===(e=this.animationFrameSvc)||void 0===e||e.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:i,columnAfterEnd:n}=this.isColumnOutsideViewport(e),o=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),s=this.centerRowsCtrl.getCenterWidth(),r=this.enableRtl;let a=(r?i:n)||o,l=r?n:i;"auto"!==t&&(a="start"===t,l="end"===t);const d="middle"===t;if(a||l||d){const{colLeft:t,colMiddle:i,colRight:n}=this.getColumnBounds(e);return d?i-s/2:a?r?n:t:r?t-s:n-s}return null}isColumnOutsideViewport(e){const{start:t,end:i}=this.getViewportBounds(),{colLeft:n,colRight:o}=this.getColumnBounds(e),s=this.enableRtl;return{columnBeforeStart:s?t>o:i<o,columnAfterEnd:s?i<n:t>n}}getColumnBounds(e){const t=this.enableRtl,i=this.visibleCols.bodyWidth,n=e.getActualWidth(),o=e.getLeft(),s=t?-1:1,r=t?i-o:o;return{colLeft:r,colMiddle:r+n/2*s,colRight:r+n*s}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft();return{start:t,end:e+t,width:e}}},vce=class extends yoe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=fse(this.gos,"print"),{visibleCols:t,scrollVisibleSvc:i}=this.beans,n=t.bodyWidth,o=t.getColsLeftWidth(),s=t.getDisplayedColumnsRightWidth();let r;if(e)r=n+o+s;else if(r=n,this.addSpacer){0===(this.gos.get("enableRtl")?o:s)&&i.verticalScrollShowing&&(r+=i.getScrollbarWidth())}this.callback(r)}},yce=class extends yoe{constructor(e){super(),this.centerContainerCtrl=e}wireBeans(e){this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const{beans:e,centerContainerCtrl:t,gridBodyCtrl:i}=this,n=()=>{qne(e,()=>{this.onCenterViewportResized()})};t.registerViewportResizeListener(n),i.registerBodyViewportResizeListener(n)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){const{pinnedCols:e,colFlex:t}=this.beans;null===e||void 0===e||e.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const i=this.centerContainerCtrl.getCenterWidth();i!==this.centerWidth&&(this.centerWidth=i,null===t||void 0===t||t.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=Lne(this.gridBodyCtrl.eBodyViewport);this.bodyHeight!==e&&(this.bodyHeight=e,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){if(!this.isAlive())return;const e={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(e)}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,t)}};function bce(e,t,i,n){var o;const s=null===(o=t.getColDef().cellRendererParams)||void 0===o?void 0:o.suppressMouseEventHandling;return xce(e,t,i,n,s)}function xce(e,t,i,n,o){return!!o&&o(Kse(e,{column:t,node:i,event:n}))}function Cce(e,t,i){let n=t;for(;n;){const t=wse(e,n,i);if(t)return t;n=n.parentElement}return null}var Sce="cellCtrl";function wce(e,t){return Cce(e,t,Sce)}var Mce="renderedRow";function kce(e,t){return Cce(e,t,Mce)}function Dce(e,t,i,n,o){const s=n?n.getColDef().suppressKeyboardEvent:void 0;if(!s)return!1;const r=Kse(e,{event:t,editing:o,column:n,node:i,data:i.data,colDef:n.getColDef()});if(s){if(s(r))return!0}return!1}function Ice(e){var t,i;const{pinnedRowModel:n,rowModel:o,rangeSvc:s,visibleCols:r}=e;if(!s||0===r.allCols.length)return;const a=null===(t=null===n||void 0===n?void 0:n.isEmpty("top"))||void 0===t||t?null:"top";let l,d;var c;null===(i=null===n||void 0===n?void 0:n.isEmpty("bottom"))||void 0===i||i?(l=null,d=o.getRowCount()-1):(l="bottom",d=null!==(c=null===n||void 0===n?void 0:n.getPinnedBottomRowCount())&&void 0!==c?c:-1);s.setCellRange({rowStartIndex:0,rowStartPinned:a,rowEndIndex:d,rowEndPinned:l})}var Ace=class extends yoe{constructor(e){super(),this.element=e}postConstruct(){var e;this.addKeyboardListeners(),this.addMouseListeners(),null===(e=this.beans.touchSvc)||void 0===e||e.mockRowContextMenu(this),this.editSvc=this.beans.editSvc}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){const e=["dblclick","contextmenu","mouseover","mouseout","click",soe("touchstart")?"touchstart":"mousedown"];for(const t of e){const e=this.processMouseEvent.bind(this,t);this.addManagedElementListeners(this.element,{[t]:e})}}processMouseEvent(e,t){if(!coe(this.beans,t)||lce(t))return;const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);var o;"contextmenu"===e?(null!==i&&void 0!==i&&i.column&&i.dispatchCellContextMenuEvent(t),null===(o=this.beans.contextMenuSvc)||void 0===o||o.handleContextMenuMouseEvent(t,void 0,n,i)):(i&&i.onMouseEvent(e,t),n&&n.onMouseEvent(e,t))}getControlsForEventTarget(e){const{gos:t}=this;return{cellCtrl:wce(t,e),rowCtrl:kce(t,e)}}processKeyboardEvent(e,t){const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):null!==n&&void 0!==n&&n.isFullWidth()&&this.processFullWidthRowKeyboardEvent(n,e,t))}processCellKeyboardEvent(e,t,i){var n,o;const s=null!==(n=null===(o=this.editSvc)||void 0===o?void 0:o.isEditing(e,{withOpenEditor:!0}))&&void 0!==n&&n;if(!Dce(this.gos,i,e.rowNode,e.column,s)&&"keydown"===t){var r;!s&&(null===(r=this.beans.navigation)||void 0===r?void 0:r.handlePageScrollingKey(i))||e.onKeyDown(i),this.doGridOperations(i,s),wle(i)&&e.processCharacter(i)}"keydown"===t&&this.eventSvc.dispatchEvent(e.createEvent(i,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,i){const{rowNode:n}=e,{focusSvc:o,navigation:s}=this.beans,r=o.getFocusedCell(),a=null===r||void 0===r?void 0:r.column;if(!Dce(this.gos,i,n,a,!1)){const n=i.key;if("keydown"===t)switch(n){case Eae.PAGE_HOME:case Eae.PAGE_END:case Eae.PAGE_UP:case Eae.PAGE_DOWN:null===s||void 0===s||s.handlePageScrollingKey(i,!0);break;case Eae.LEFT:case Eae.RIGHT:if(!this.gos.get("embedFullWidthRows"))break;case Eae.UP:case Eae.DOWN:e.onKeyboardNavigate(i);break;case Eae.TAB:e.onTabKeyDown(i)}}"keydown"===t&&this.eventSvc.dispatchEvent(e.createRowEvent("cellKeyDown",i))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey)return;if(t)return;if(!coe(this.beans,e))return;const i=Pae(e),{clipboardSvc:n,undoRedo:o}=this.beans;return i===Eae.A?this.onCtrlAndA(e):i===Eae.C?this.onCtrlAndC(n,e):i===Eae.D?this.onCtrlAndD(n,e):i===Eae.V?this.onCtrlAndV(n,e):i===Eae.X?this.onCtrlAndX(n,e):i===Eae.Y?this.onCtrlAndY(o):i===Eae.Z?this.onCtrlAndZ(o,e):void 0}onCtrlAndA(e){const{beans:{rowModel:t,rangeSvc:i,selectionSvc:n},gos:o}=this;i&&Bse(o)&&!function(e){var t;const i=e.get("rowSelection");return"string"!==typeof i&&"multiRow"===(null===i||void 0===i?void 0:i.mode)&&null!==(t=i.ctrlASelectsRows)&&void 0!==t&&t}(o)&&t.isRowsToRender()?Ice(this.beans):n&&n.selectAllRowNodes({source:"keyboardSelectAll",selectAll:jse(o)}),e.preventDefault()}onCtrlAndC(e,t){var i;if(!e||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:n}=this.getControlsForEventTarget(t.target);null!==(i=this.editSvc)&&void 0!==i&&i.isEditing(n,{withOpenEditor:!0})||(t.preventDefault(),e.copyToClipboard())}onCtrlAndX(e,t){var i;if(!e||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:n}=this.getControlsForEventTarget(t.target);null!==(i=this.editSvc)&&void 0!==i&&i.isEditing(n,{withOpenEditor:!0})||(t.preventDefault(),e.cutToClipboard(void 0,"ui"))}onCtrlAndV(e,t){var i;const{cellCtrl:n}=this.getControlsForEventTarget(t.target);null!==(i=this.editSvc)&&void 0!==i&&i.isEditing(n,{withOpenEditor:!0})||e&&!this.gos.get("suppressClipboardPaste")&&e.pasteFromClipboard()}onCtrlAndD(e,t){e&&!this.gos.get("suppressClipboardPaste")&&e.copyRangeDown(),t.preventDefault()}onCtrlAndZ(e,t){this.gos.get("undoRedoCellEditing")&&e&&(t.preventDefault(),t.shiftKey?e.redo("ui"):e.undo("ui"))}onCtrlAndY(e){null===e||void 0===e||e.redo("ui")}},Lce=class extends yoe{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(e){const t=e.uiContainerHeight,i=null!=t?"".concat(t,"px"):"";this.eContainer.style.height=i,this.eViewport&&(this.eViewport.style.height=i)}},Nce=e=>e.topRowCtrls,Tce=e=>e.getStickyTopRowCtrls(),Rce=e=>e.getStickyBottomRowCtrls(),Ece=e=>e.bottomRowCtrls,Pce=e=>e.allRowCtrls,Oce=e=>e.getCtrls("top"),Fce=e=>e.getCtrls("center"),zce=e=>e.getCtrls("bottom"),Bce={center:{type:"center",name:"center-cols",getRowCtrls:Pce,getSpannedRowCtrls:Fce},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:Pce,getSpannedRowCtrls:Fce},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:Pce,getSpannedRowCtrls:Fce},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:Pce},topCenter:{type:"center",name:"floating-top",getRowCtrls:Nce,getSpannedRowCtrls:Oce},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:Nce,getSpannedRowCtrls:Oce},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:Nce,getSpannedRowCtrls:Oce},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:Nce},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:Tce},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:Tce},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:Tce},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:Tce},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:Rce},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:Rce},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:Rce},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:Rce},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:Ece,getSpannedRowCtrls:zce},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:Ece,getSpannedRowCtrls:zce},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:Ece,getSpannedRowCtrls:zce},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:Ece}};function Vce(e){const t=jce(e);return"ag-".concat(t.name,"-viewport")}function Gce(e){var t;const i=jce(e);return null!==(t=i.container)&&void 0!==t?t:"ag-".concat(i.name,"-container")}function Hce(e){const t=jce(e);return"ag-".concat(t.name,"-spanned-cells-container")}function jce(e){return Bce[e]}var Wce=["center","left","right","fullWidth"],_ce=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],Kce=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],Uce=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],Yce=["stickyTopCenter","stickyTopLeft","stickyTopRight"],$ce=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],Zce=[...Yce,"stickyTopFullWidth",...$ce,"stickyBottomFullWidth"],Xce=["topCenter","topLeft","topRight","bottomCenter","bottomLeft","bottomRight","center","left","right",...Yce,...$ce],qce=class extends yoe{constructor(e){super(),this.name=e,this.visible=!0,this.EMPTY_CTRLS=[],this.options=jce(e)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new yce(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop("".concat(e.offset,"px"))}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}setComp(e,t,i,n){var o;this.comp=e,this.eContainer=t,this.eSpannedContainer=i,this.eViewport=n,this.createManagedBean(new Ace(null!==(o=this.eViewport)&&void 0!==o?o:this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const{pinnedCols:s,rangeSvc:r}=this.beans,a=()=>this.onPinnedWidthChanged();this.forContainers(Kce,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(null===s||void 0===s?void 0:s.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:a})}),this.forContainers(Uce,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(null===s||void 0===s?void 0:s.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:a})}),this.forContainers(Wce,()=>this.createManagedBean(new Lce(this.eContainer,"center"===this.name?n:void 0))),r&&this.forContainers(Xce,()=>this.createManagedBean(r.createDragListenerFeature(this.eContainer))),this.forContainers(_ce,()=>this.createManagedBean(new vce(e=>this.comp.setContainerWidth("".concat(e,"px"))))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}addListeners(){const{spannedRowRenderer:e,gos:t}=this.beans,i=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({displayedColumnsChanged:i,displayedColumnsWidthChanged:i,displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),i(),this.onDisplayedRowsChanged(),e&&this.options.getSpannedRowCtrls&&t.get("enableCellSpan")&&this.addManagedListeners(e,{spannedRowsUpdated:()=>{const t=this.options.getSpannedRowCtrls(e);t&&this.comp.setSpannedRowCtrls(t,!1)}})}listenOnDomOrder(){if(Zce.indexOf(this.name)>=0)return void this.comp.setDomOrder(!0);const e=()=>{const e=this.gos.get("ensureDomOrder"),t=fse(this.gos,"print");this.comp.setDomOrder(e||t)};this.addManagedPropertyListener("domLayout",e),e()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const{dragSvc:e}=this.beans;if(!e)return;const t=t=>{e.dragging&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",t))}onHorizontalViewportChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,i,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return Nne(this.eViewport)}getCenterViewportScrollLeft(){return Pne(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=Xne(this.beans,this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return Bne(this.eViewport)}getViewportScrollLeft(){return Pne(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||jne(this.eViewport)}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){One(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(null!=this.options.pinnedType)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||0===t.length)return void this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});const i=fse(this.gos,"print"),n=this.gos.get("embedFullWidthRows")||i,o=t.filter(e=>{const t=e.isFullWidth();return this.options.fullWidth?!n&&t:n||!t});this.comp.setRowCtrls({rowCtrls:o,useFlushSync:e})}},Qce="ag-force-vertical-scroll",Jce=class extends yoe{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colModel=e.colModel,this.scrollVisibleSvc=e.scrollVisibleSvc,this.pinnedRowModel=e.pinnedRowModel,this.filterManager=e.filterManager,this.rowGroupColsSvc=e.rowGroupColsSvc}setComp(e,t,i,n,o,s,r){var a,l;this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=n,this.eBottom=o,this.eStickyTop=s,this.eStickyBottom=r,this.eCenterColsViewport=i.querySelector(".".concat(Vce("center"))),this.eFullWidthContainer=i.querySelector(".".concat(Gce("fullWidth"))),this.eStickyTopFullWidthContainer=s.querySelector(".".concat(Gce("stickyTopFullWidth"))),this.eStickyBottomFullWidthContainer=r.querySelector(".".concat(Gce("stickyBottomFullWidth"))),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",e=>this.setCellTextSelection(e.currentValue)),this.createManagedBean(new hce(this.comp)),this.scrollFeature=this.createManagedBean(new fce(i)),null===(a=this.beans.rowDragSvc)||void 0===a||a.setupRowDrag(i,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([n,i,o,s,r]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),null===(l=this.filterManager)||void 0===l||l.setupAdvFilterHeaderComp(n),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){const e=this.setFloatingHeights.bind(this),t=this.setGridRootRole.bind(this),i=this.toggleRowResizeStyles.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,pinnedRowsChanged:e,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:t,columnPivotChanged:t,rowResizeStarted:i,rowResizeEnded:i}),this.addManagedPropertyListener("treeData",t)}toggleRowResizeStyles(e){const t="rowResizeStarted"===e.type;this.eBodyViewport.classList.toggle("ag-prevent-animation",t)}onGridColumnsChanged(){const e=this.beans.colModel.getCols();this.comp.setColumnCount(e.length)}onScrollVisibilityChanged(){const{scrollVisibleSvc:e}=this,t=e.verticalScrollShowing;this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();const i=t&&e.getScrollbarWidth()||0,n=Zae()?16:0,o="calc(100% + ".concat(i+n,"px)");qne(this.beans,()=>this.comp.setBodyViewportWidth(o)),this.updateScrollingClasses()}setGridRootRole(){const{rowGroupColsSvc:e,colModel:t,gos:i}=this;let n=i.get("treeData");if(!n){const i=t.isPivotMode();n=(e?e.columns.length:0)>=(i?2:1)}this.comp.setGridRootRole(n?"treegrid":"grid")}addFocusListeners(e){for(const t of e)this.addManagedElementListeners(t,{focusin:e=>{const{target:i}=e,n=Ine(i,"ag-root",t);t.classList.toggle("ag-has-focus",!n)},focusout:e=>{const{target:i,relatedTarget:n}=e,o=t.contains(n),s=Ine(n,"ag-root",t);Ine(i,"ag-root",t)||o&&!s||t.classList.remove("ag-has-focus")}})}setColumnMovingCss(e){this.comp.setColumnMovingCss("ag-column-moving",e)}setCellTextSelection(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.comp.setCellSelectableCss("ag-selectable",e)}updateScrollingClasses(){const{eGridBody:{classList:e},scrollVisibleSvc:t}=this;e.toggle("ag-body-vertical-content-no-gap",!t.verticalScrollGap),e.toggle("ag-body-horizontal-content-no-gap",!t.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){var e;null===(e=this.beans.editSvc)||void 0===e||e.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){var e,t,i,n;const o=(null!==(e=null===(t=this.ctrlsSvc.getHeaderRowContainerCtrl())||void 0===t?void 0:t.getRowCount())&&void 0!==e?e:0)+(null!==(i=null===(n=this.filterManager)||void 0===n?void 0:n.getHeaderRowCount())&&void 0!==i?i:0),{rowModel:s}=this.beans,r=s.isLastRowIndexKnown()?s.getRowCount():-1,a=-1===r?-1:o+r;this.comp.setRowCount(a)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?Qce:null,i=fse(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||i&&Wne(this.eBodyViewport)}setupRowAnimationCssClass(){const{rowContainerHeight:e,environment:t}=this.beans;let i=t.sizesMeasured;const n=()=>{const t=i&&kse(this.gos)&&!e.stretching,n=t?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(n,t)};n(),this.addManagedEventListeners({heightScaleChanged:n}),this.addManagedPropertyListener("animateRows",n),this.addManagedEventListeners({stylesChanged:()=>{!i&&t.sizesMeasured&&(i=!0,n())}})}addBodyViewportListener(){const{eBodyViewport:e,eStickyTop:t,eStickyBottom:i,eTop:n,eBottom:o,beans:{popupSvc:s,touchSvc:r}}=this,a=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(e,{contextmenu:a}),null===r||void 0===r||r.mockBodyContextMenu(this,a),this.addManagedElementListeners(e,{wheel:this.onBodyViewportWheel.bind(this,s)});const l=this.onStickyWheel.bind(this);for(const c of[t,i,n,o])this.addManagedElementListeners(c,{wheel:l});const d=this.onHorizontalWheel.bind(this);for(const c of["left","right","topLeft","topRight","bottomLeft","bottomRight"])this.addManagedElementListeners(this.ctrlsSvc.get(c).eContainer,{wheel:d});this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:i,shiftKey:n}=e;(n||Math.abs(t)>Math.abs(i))&&coe(this.beans,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaY:t}=e;this.scrollVertically(t)>0&&e.preventDefault()}onHorizontalWheel(e){const{deltaX:t,deltaY:i,shiftKey:n}=e;(n||Math.abs(t)>Math.abs(i))&&this.scrollGridBodyToMatchEvent(e)}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:i}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||i})}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;if(this.gos.get("preventDefaultOnContextMenu")){(e||i).preventDefault()}const{target:n}=e||t;var o;n!==this.eBodyViewport&&n!==this.ctrlsSvc.get("center").eViewport||(null===(o=this.beans.contextMenuSvc)||void 0===o||o.showContextMenu({mouseEvent:e,touchEvent:i,value:null,anchorToElement:this.eGridBody,source:"ui"}))}onBodyViewportWheel(e,t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&null!==e&&void 0!==e&&e.hasAnchoredPopup()&&t.preventDefault()}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}setFloatingHeights(){const{pinnedRowModel:e,beans:{environment:t}}=this,i=null===e||void 0===e?void 0:e.getPinnedTopTotalHeight(),n=null===e||void 0===e?void 0:e.getPinnedBottomTotalHeight(),o=t.getPinnedRowBorderWidth()-t.getRowBorderWidth(),s=i?o+i:0,r=n?o+n:0;this.comp.setTopHeight(s),this.comp.setBottomHeight(r),this.comp.setTopInvisible(s<=0),this.comp.setBottomInvisible(r<=0),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.comp.setStickyTopHeight("".concat(e,"px")),this.stickyTopHeight=e}setStickyBottomHeight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.comp.setStickyBottomHeight("".concat(e,"px")),this.stickyBottomHeight=e}setStickyWidth(e){if(e){const e=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth("calc(100% - ".concat(e,"px)")),this.comp.setStickyBottomWidth("calc(100% - ".concat(e,"px)"))}else this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%")}setStickyTopOffsetTop(){var e,t,i,n;const o=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(null!==(e=null===(t=this.filterManager)||void 0===t?void 0:t.getHeaderHeight())&&void 0!==e?e:0),s=null!==(i=null===(n=this.pinnedRowModel)||void 0===n?void 0:n.getPinnedTopTotalHeight())&&void 0!==i?i:0;let r=0;o>0&&(r+=o),s>0&&(r+=s),r>0&&(r+=1),this.comp.setStickyTopTop("".concat(r,"px"))}setStickyBottomOffsetBottom(){var e;const{pinnedRowModel:t,scrollVisibleSvc:i,comp:n}=this,o=(null!==(e=null===t||void 0===t?void 0:t.getPinnedBottomTotalHeight())&&void 0!==e?e:0)+(i.horizontalScrollShowing&&i.getScrollbarWidth()||0);n.setStickyBottomBottom("".concat(o,"px"))}};function eue(e,t){var i,n;return null!==(i=null===(n=wce(e,t.target))||void 0===n?void 0:n.getFocusedCellPosition())&&void 0!==i?i:null}var tue=class extends hae{constructor(e,t){super(),this.direction=t,this.eViewport=lae,this.eContainer=lae,this.hideTimeout=0,this.setTemplate(e)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.toggleCss("ag-apple-scrollbar",Kae()||Uae())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.invisibleScrollbar=Zae(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.toggleCss("ag-scrollbar-active",!0),i=()=>this.toggleCss("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:i,touchend:i})}onScrollVisibilityChanged(){void 0===this.invisibleScrollbar&&this.initialiseInvisibleScrollbar(),qne(this.beans,()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.toggleCss("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.toggleCss("ag-scrollbar-scrolling",!1),this.hideTimeout=0},400)}})}attemptSettingScrollPosition(e){const t=this.eViewport;Doe(this,()=>Vne(t),()=>this.setScrollPosition(e),100)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}},iue={tag:"div",cls:"ag-body-horizontal-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eLeftSpacer",cls:"ag-horizontal-left-spacer"},{tag:"div",ref:"eViewport",cls:"ag-body-horizontal-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-horizontal-scroll-container"}]},{tag:"div",ref:"eRightSpacer",cls:"ag-horizontal-right-spacer"}]},nue=class extends tue{constructor(){super(iue,"horizontal"),this.eLeftSpacer=lae,this.eRightSpacer=lae,this.setScrollVisibleDebounce=0}wireBeans(e){this.visibleCols=e.visibleCols,this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new vce(e=>this.eContainer.style.width="".concat(e,"px"))),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){var e,t;if(!this.invisibleScrollbar)return;const i=null!==(e=null===(t=this.beans.pinnedRowModel)||void 0===t?void 0:t.getPinnedBottomTotalHeight())&&void 0!==e?e:0;this.getGui().style.bottom="".concat(i,"px")}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleSvc.verticalScrollShowing;let t=this.visibleCols.getDisplayedColumnsRightWidth();const i=!this.enableRtl&&e,n=this.scrollVisibleSvc.getScrollbarWidth();i&&(t+=n),Kne(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=n);let o=this.visibleCols.getColsLeftWidth();this.enableRtl&&e&&(o+=n),Kne(this.eLeftSpacer,o),this.eLeftSpacer.classList.toggle("ag-scroller-corner",o<=n)}setScrollVisible(){const e=this.scrollVisibleSvc.horizontalScrollShowing,t=this.invisibleScrollbar,i=this.gos.get("suppressHorizontalScroll"),n=e&&this.scrollVisibleSvc.getScrollbarWidth()||0,o=i?0:0===n&&t?16:n,s=()=>{this.setScrollVisibleDebounce=0,this.toggleCss("ag-scrollbar-invisible",t),Une(this.getGui(),o),Une(this.eViewport,o),Une(this.eContainer,o),o||this.eContainer.style.setProperty("min-height","1px"),this.setVisible(e,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),e?this.setScrollVisibleDebounce=window.setTimeout(s,100):s()}getScrollPosition(){return Pne(this.eViewport,this.enableRtl)}setScrollPosition(e){Vne(this.eViewport)||this.attemptSettingScrollPosition(e),One(this.eViewport,e,this.enableRtl)}},oue={tag:"div",cls:"ag-body-vertical-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eViewport",cls:"ag-body-vertical-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-vertical-scroll-container"}]}]},sue=class extends tue{constructor(){super(oue,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new Lce(this.eContainer));const{ctrlsSvc:e}=this.beans;e.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,e)})}setScrollVisible(){const{scrollVisibleSvc:e}=this.beans,t=e.verticalScrollShowing,i=this.invisibleScrollbar,n=t&&e.getScrollbarWidth()||0,o=0===n&&i?16:n;this.toggleCss("ag-scrollbar-invisible",i),Kne(this.getGui(),o),Kne(this.eViewport,o),Kne(this.eContainer,o),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(e){const t=e.getGridBodyCtrl().eBodyViewport,i=this.getScrollPosition(),n=t.scrollTop;i!=n&&this.setScrollPosition(n,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(e,t){t||Vne(this.eViewport)||this.attemptSettingScrollPosition(e),this.eViewport.scrollTop=e}};function rue(e,t,i,n){return zie(e)?[]:lue(e.headerClass,e,t,i,n)}function aue(e,t,i){e.toggleCss("ag-column-first",i.isColAtEdge(t,"first")),e.toggleCss("ag-column-last",i.isColAtEdge(t,"last"))}function lue(e,t,i,n,o){if(zie(e))return[];let s;if("function"===typeof e){const r=function(e,t,i,n){return Kse(t,{colDef:e,column:i,columnGroup:n})}(t,i,n,o);s=e(r)}else s=e;return"string"===typeof s?[s]:Array.isArray(s)?[...s]:[]}function due(e){const{rowIndex:t,rowPinned:i,column:n}=e;return"".concat(t,".").concat(null==i?"null":i,".").concat(n.getId())}function cue(e,t){const i=e.column===t.column,n=e.rowPinned===t.rowPinned,o=e.rowIndex===t.rowIndex;return i&&n&&o}function uue(e,t){switch(e.rowPinned){case"top":if("top"!==t.rowPinned)return!0;break;case"bottom":if("bottom"!==t.rowPinned)return!1;break;default:if(Fie(t.rowPinned))return"top"!==t.rowPinned}return e.rowIndex<t.rowIndex}function hue(e,t){return!e&&!t||!(!e||!t)&&(e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned)}function pue(e){let t,i=0;const{pinnedRowModel:n,rowModel:o,pageBounds:s}=e;return null!==n&&void 0!==n&&n.getPinnedTopRowCount()?t="top":o.getRowCount()?(t=null,i=s.getFirstRow()):null!==n&&void 0!==n&&n.getPinnedBottomRowCount()&&(t="bottom"),void 0===t?null:{rowIndex:i,rowPinned:t}}function gue(e){let t,i=null;const{pinnedRowModel:n,pageBounds:o}=e,s=null===n||void 0===n?void 0:n.getPinnedBottomRowCount(),r=null===n||void 0===n?void 0:n.getPinnedTopRowCount();return s?(i="bottom",t=s-1):e.rowModel.getRowCount()?t=o.getLastRow():r&&(i="top",t=r-1),void 0===t?null:{rowIndex:t,rowPinned:i}}function mue(e,t){var i,n;switch(t.rowPinned){case"top":return null===(i=e.pinnedRowModel)||void 0===i?void 0:i.getPinnedTopRow(t.rowIndex);case"bottom":return null===(n=e.pinnedRowModel)||void 0===n?void 0:n.getPinnedBottomRow(t.rowIndex);default:return e.rowModel.getRow(t.rowIndex)}}function fue(e,t){var i;const n=null===(i=e.spannedRowRenderer)||void 0===i?void 0:i.getCellByPosition(t);if(n)return n;const o=e.rowRenderer.getRowByPosition(t);return o?o.getCellCtrl(t.column):null}function vue(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{rowIndex:n,rowPinned:o}=t,{pageBounds:s,pinnedRowModel:r,rowModel:a}=e;if(0===n)return"top"===o?null:"bottom"===o&&a.isRowsToRender()?{rowIndex:s.getLastRow(),rowPinned:null}:null!==r&&void 0!==r&&r.isRowsToRender("top")?{rowIndex:r.getPinnedTopRowCount()-1,rowPinned:"top"}:null;if(i){var l;return null!==(l=bue(e,o?void 0:a.getRow(n),!0))&&void 0!==l?l:{rowIndex:n-1,rowPinned:o}}return{rowIndex:n-1,rowPinned:o}}function yue(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{rowIndex:n,rowPinned:o}=t,{pageBounds:s,pinnedRowModel:r,rowModel:a}=e;if(function(e,t){const{rowPinned:i,rowIndex:n}=t,{pinnedRowModel:o,pageBounds:s}=e;if("top"===i){var r;return(null!==(r=null===o||void 0===o?void 0:o.getPinnedTopRowCount())&&void 0!==r?r:0)-1<=n}if("bottom"===i){var a;return(null!==(a=null===o||void 0===o?void 0:o.getPinnedBottomRowCount())&&void 0!==a?a:0)-1<=n}const l=s.getLastRow();return l<=n}(e,t))return"bottom"===o?null:"top"===o&&a.isRowsToRender()?{rowIndex:s.getFirstRow(),rowPinned:null}:null!==r&&void 0!==r&&r.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;if(i){var l;return null!==(l=bue(e,o?void 0:a.getRow(n)))&&void 0!==l?l:{rowIndex:n+1,rowPinned:o}}return{rowIndex:n+1,rowPinned:o}}function bue(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{gos:n,rowRenderer:o}=e;if(null===t||void 0===t||!t.sticky||!Dse(n))return;const s=o.getStickyTopRowCtrls(),r=o.getStickyBottomRowCtrls(),a=!r.some(e=>e.rowNode.rowIndex===t.rowIndex),l=a?s:r,d=(i?-1:1)*(a?-1:1);let c;for(let u=0;u<l.length;u++)if(l[u].rowNode.rowIndex===t.rowIndex){c=l[u+d];break}return c?{rowIndex:c.rowNode.rowIndex,rowPinned:null}:void 0}function xue(e){var t;return e.gos.get("suppressHeaderFocus")||!(null===(t=e.overlays)||void 0===t||!t.exclusive)}function Cue(e){var t;return e.gos.get("suppressCellFocus")||!(null===(t=e.overlays)||void 0===t||!t.exclusive)}function Sue(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=e.ctrlsSvc.get("gridCtrl");return!(i||!n.focusNextInnerContainer(t))||((i||!t&&!n.isDetailGrid())&&n.forceFocusOutOfContainer(t),!1)}function wue(e,t){const i=e.focusSvc,n=i.getFocusedCell();if(n&&t&&cue(n,t)){const{rowIndex:n,rowPinned:o,column:s}=t;$ie(e)&&i.setFocusedCell({rowIndex:n,column:s,rowPinned:o,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!ele()})}}function Mue(e){var t,i;return null!==(t=null===(i=e.ctrlsSvc.getHeaderRowContainerCtrl())||void 0===i?void 0:i.getRowCount())&&void 0!==t?t:0}function kue(e){const t=[],i=e.ctrlsSvc.getHeaderRowContainerCtrls();for(const n of i){if(!n)continue;const i=n.getGroupRowCount()||0;for(let o=0;o<i;o++){const i=n.getGroupRowCtrlAtIndex(o),s=t[o];if(i){const n=Due(e,i);(null==s||n>s)&&(t[o]=n)}}}return t}function Due(e,t){let i=e.colModel.isPivotMode()?function(e){var t;return null!==(t=e.gos.get("pivotGroupHeaderHeight"))&&void 0!==t?t:Nue(e)}(e):Nue(e);const n=t.getHeaderCellCtrls();for(const o of n){const{column:e}=o,t=e.getAutoHeaderHeight();null!=t&&t>i&&e.isAutoHeaderHeight()&&(i=t)}return i}function Iue(e){let t=e.colModel.isPivotMode()?function(e){var t;return null!==(t=e.gos.get("pivotHeaderHeight"))&&void 0!==t?t:Aue(e)}(e):Aue(e);return e.colModel.forAllCols(e=>{const i=e.getAutoHeaderHeight();null!=i&&i>t&&e.isAutoHeaderHeight()&&(t=i)}),t}function Aue(e){var t;return null!==(t=e.gos.get("headerHeight"))&&void 0!==t?t:e.environment.getDefaultHeaderHeight()}function Lue(e){var t;return null!==(t=e.gos.get("floatingFiltersHeight"))&&void 0!==t?t:Aue(e)}function Nue(e){var t;return null!==(t=e.gos.get("groupHeaderHeight"))&&void 0!==t?t:Aue(e)}var Tue=class extends yoe{setComp(e,t,i){this.comp=e,this.eGui=t;const{beans:n}=this,{headerNavigation:o,touchSvc:s,ctrlsSvc:r}=n;o&&this.createManagedBean(new cce(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,n),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,n)}),this.onPivotModeChanged(n),this.setupHeaderHeight();const a=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:a}),null===s||void 0===s||s.mockHeaderContextMenu(this,a),r.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({headerRowsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>qne(this.beans,()=>e()),stylesChanged:e,advancedFilterEnabledChanged:e})}setHeaderHeight(){var e;const{beans:t}=this;let i=0;const n=kue(t).reduce((e,t)=>e+t,0),o=Iue(t);if(null!==(e=t.filterManager)&&void 0!==e&&e.hasFloatingFilters()&&(i+=Lue(t)),i+=n,i+=o,this.headerHeight===i)return;this.headerHeight=i;const s="".concat(i+1,"px");this.comp.setHeightAndMinHeight(s),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(e){const t=e.colModel.isPivotMode();this.comp.toggleCss("ag-pivot-on",t),this.comp.toggleCss("ag-pivot-off",!t)}onDisplayedColumnsChanged(e){const t=e.visibleCols.allCols.some(e=>e.isSpanHeaderHeight());this.comp.toggleCss("ag-header-allow-overflow",t)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),i=e.shiftKey,n=i!==t?"LEFT":"RIGHT",{beans:o}=this,{headerNavigation:s,focusSvc:r}=o;(s.navigateHorizontally(n,!0,e)||!i&&r.focusOverlay(!1)||Sue(o,i,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;const{headerNavigation:i}=this.beans;switch(e.key){case Eae.LEFT:t="LEFT";case Eae.RIGHT:Fie(t)||(t="RIGHT"),i.navigateHorizontally(t,!1,e)&&e.preventDefault();break;case Eae.UP:t="UP";case Eae.DOWN:Fie(t)||(t="DOWN"),i.navigateVertically(t,e)&&e.preventDefault();break;default:return}}onFocusOut(e){const{relatedTarget:t}=e,{eGui:i,beans:n}=this;!t&&i.contains(Uie(n))||i.contains(t)||(n.focusSvc.focusedHeader=null)}onHeaderContextMenu(e,t,i){var n;const{menuSvc:o,ctrlsSvc:s}=this.beans;if(!e&&!i||null===o||void 0===o||!o.isHeaderContextMenuEnabled())return;const{target:r}=null!==e&&void 0!==e?e:t;r!==this.eGui&&r!==(null===(n=s.getHeaderRowContainerCtrl())||void 0===n?void 0:n.eViewport)||o.showHeaderContextMenu(void 0,e,i)}},Rue=class extends yoe{constructor(e,t,i,n){super(),this.columnOrGroup=e,this.eCell=t,this.colsSpanning=n,this.columnOrGroup=e,this.ariaEl=t.querySelector("[role=columnheader]")||t,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){const{beans:e,colsSpanning:t}=this;return e.gos.get("enableRtl")&&t?pre(t):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const{gos:e,colAnimation:t}=this.beans,i=e.get("suppressColumnMoveAnimation"),n=Fie(this.columnOrGroup.getOldLeft());(null===t||void 0===t?void 0:t.isActive())&&n&&!i?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=this.modifyLeftForPrintLayout(e,e.getOldLeft()),i=this.modifyLeftForPrintLayout(e,e.getLeft());this.setLeft(t),this.actualLeft=i,this.beans.colAnimation.executeNextVMTurn(()=>{this.actualLeft===i&&this.setLeft(i)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){const{gos:i,visibleCols:n}=this.beans;if(!fse(i,"print"))return t;if("left"===e.getPinned())return t;const o=n.getColsLeftWidth();if("right"===e.getPinned()){return o+n.bodyWidth+t}return o+t}setLeft(e){if(Fie(e)&&(this.eCell.style.left="".concat(e,"px")),Ude(this.columnOrGroup)){const e=this.columnOrGroup.getLeafColumns();if(!e.length)return;e.length>1&&fne(this.ariaEl,e.length)}}},Eue=0,Pue="headerCtrl",Oue=class extends yoe{constructor(e,t){super(),this.column=e,this.rowCtrl=t,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.reAttemptToFocus=!1,this.instanceId=e.getUniqueId()+"-"+Eue++}postConstruct(){const e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}setComp(e,t,i,n,o){var s;(t.setAttribute("col-id",this.column.colIdSanitised),this.wireComp(e,t,i,n,o),this.reAttemptToFocus)&&(this.reAttemptToFocus=!1,this.focus(null!==(s=this.lastFocusEvent)&&void 0!==s?s:void 0))}shouldStopEventPropagation(e){const{headerRowIndex:t,column:i}=this.beans.focusSvc.focusedHeader,n=i.getDefinition(),o=null===n||void 0===n?void 0:n.suppressHeaderKeyboardEvent;if(!Fie(o))return!1;return!!o(Kse(this.gos,{colDef:n,column:i,headerRowIndex:t,event:e}))}getWrapperHasFocus(){return Uie(this.beans)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){const e=this.column.getDefinition();if(!e)return;const{headerStyle:t}=e;let i;if("function"===typeof t){i=t(this.getHeaderClassParams())}else i=t;i&&this.comp.setUserStyles(i)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){const{wrapperElement:t,checkMeasuringCallback:i,compBean:n}=e,{beans:o}=this,s=e=>{if(!this.isAlive()||!n.isAlive())return;const{paddingTop:i,paddingBottom:r,borderBottomWidth:a,borderTopWidth:l}=Ane(this.eGui),d=i+r+a+l,c=t.offsetHeight+d;if(e<5){const i=Yie(o);if(!(null!==i&&void 0!==i&&i.contains(t))||0==c)return void woe(()=>s(e+1),"raf",o)}this.setColHeaderHeight(this.column,c)};let r,a=!1;const l=()=>{const e=this.column.isAutoHeaderHeight();e&&!a&&d(),!e&&a&&c()},d=()=>{a=!0,this.comp.toggleCss("ag-header-cell-auto-height",!0),s(0),r=Xne(this.beans,t,()=>s(0))},c=()=>{a=!1,r&&r(),this.comp.toggleCss("ag-header-cell-auto-height",!1),r=void 0};l(),n.addDestroyFunc(()=>c()),n.addManagedListeners(this.column,{widthChanged:()=>a&&s(0)}),n.addManagedEventListeners({sortChanged:()=>{a&&window.setTimeout(()=>s(0))}}),i&&i(l)}onDisplayedColumnsChanged(){const{comp:e,column:t,beans:i,eGui:n}=this;e&&t&&n&&(aue(e,t,i.visibleCols),mne(n,i.visibleCols.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const e=xue(this.beans);this.eGui&&Zne(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){const t=Uie(this.beans),i=e.key===Eae.LEFT||e.key===Eae.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey&&!e.ctrlKey&&!e.metaKey)return;(this.isResizing||i)&&(e.preventDefault(),e.stopImmediatePropagation());var n;if((e.ctrlKey||e.metaKey)&&Pae(e)===Eae.C)return null===(n=this.beans.clipboardSvc)||void 0===n?void 0:n.copyToClipboard();if(!i)return;const o=e.key===Eae.LEFT!==this.gos.get("enableRtl")?"left":"right";if(e.altKey){var s;this.isResizing=!0,this.resizeMultiplier+=1;const t=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(t,e.shiftKey),null===(s=this.resizeFeature)||void 0===s||s.toggleColumnResizing(!0)}else this.moveHeader(o)}moveHeader(e){var t;null===(t=this.beans.colMoves)||void 0===t||t.moveHeader(e,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){const t=this.getResizeDiff(e),{pinnedCols:i}=this.beans;return i?i.getHeaderResizeDiff(t,this.column):t}getResizeDiff(e){const{gos:t,column:i}=this;let n=e.key===Eae.LEFT!==t.get("enableRtl");const o=i.getPinned(),s=t.get("enableRtl");return o&&s!==("right"===o)&&(n=!n),(n?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{var e;null===(e=this.resizeFeature)||void 0===e||e.toggleColumnResizing(!1)},150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case Eae.PAGE_DOWN:case Eae.PAGE_UP:case Eae.PAGE_HOME:case Eae.PAGE_END:t&&e.preventDefault()}}addDomData(e){const t=Pue,{eGui:i,gos:n}=this;Mse(n,i,t,this),e.addDestroyFunc(()=>Mse(n,i,t,null))}focus(e){if(!this.isAlive())return!1;const{eGui:t}=this;return t?(this.lastFocusEvent=e||null,t.focus()):this.reAttemptToFocus=!0,!0}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){var e;this.dragSource&&(null===(e=this.beans.dragAndDrop)||void 0===e||e.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,i){const n=null!==e&&void 0!==e?e:t,{menuSvc:o,gos:s}=this.beans;s.get("preventDefaultOnContextMenu")&&n.preventDefault(),null!==o&&void 0!==o&&o.isHeaderContextMenuEnabled(i)&&o.showHeaderContextMenu(i,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",i)}dispatchColumnMouseEvent(e,t){this.eventSvc.dispatchEvent({type:e,column:t})}setColHeaderHeight(e,t){if(!e.setAutoHeaderHeight(t))return;const{eventSvc:i}=this;e.isColumn?i.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"}):i.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},Fue=class extends Oue{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}wireComp(e,t,i,n,o){this.comp=e;const{rowCtrl:s,column:r,beans:a}=this,{colResize:l,context:d,colHover:c,rangeSvc:u}=a,h=aae(this,d,o);this.setGui(t,h),this.updateState(),this.setupWidth(h),this.setupMovingCss(h),this.setupMenuClass(h),this.setupSortableClass(h),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:n,checkMeasuringCallback:e=>this.setRefreshFunction("measuring",e),compBean:h}),this.addColumnHoverListener(h),this.setupFilterClass(h),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(h),this.setupSelectAll(h),this.setupUserComp(),this.refreshAria(),l?this.resizeFeature=h.createManagedBean(l.createResizeFeature(s.pinned,r,i,e,this)):Mne(i,!1),null===c||void 0===c||c.createHoverFeature(h,[r],t),null===u||void 0===u||u.createRangeHighlightFeature(h,r,e),h.createManagedBean(new Rue(r,t,a)),h.createManagedBean(new cce(t,{shouldStopEventPropagation:e=>this.shouldStopEventPropagation(e),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(h),h.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],()=>this.refresh()),h.addManagedListeners(r,{colDefChanged:()=>this.refresh(),formulaRefChanged:()=>this.refresh(),headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const p=()=>this.checkDisplayName();h.addManagedEventListeners({columnValueChanged:p,columnRowGroupChanged:p,columnPivotChanged:p,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),h.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){var i;null===(i=this.beans.colResize)||void 0===i||i.resizeHeader(this.column,e,t)}getHeaderClassParams(){const{column:e,beans:t}=this,i=e.colDef;return Kse(t.gos,{colDef:i,column:e,floatingFilter:!1})}setupUserComp(){const e=this.lookupUserCompDetails();e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return function(e,t,i){return e.getCompDetails(t,fae,"agColumnHeader",i)}(this.beans.userCompFactory,t,e)}createParams(){const{menuSvc:e,sortSvc:t,colFilter:i,gos:n}=this.beans;return Kse(n,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!(null===e||void 0===e||!e.isHeaderFilterButtonEnabled(this.column)),enableFilterIcon:!!i&&(!this.openFilterEnabled||_se(this.gos)),showColumnMenu:(t,i)=>{null===e||void 0===e||e.showColumnMenu({column:this.column,buttonElement:t,positionBy:"button",onClosedCallback:i})},showColumnMenuAfterMouseClick:(t,i)=>{null===e||void 0===e||e.showColumnMenu({column:this.column,mouseEvent:t,positionBy:"mouse",onClosedCallback:i})},showFilter:t=>{null===e||void 0===e||e.showFilterMenu({column:this.column,buttonElement:t,containerType:"columnFilter",positionBy:"button"})},progressSort:e=>{null===t||void 0===t||t.progressSort(this.column,!!e,"uiColumnSorted")},setSort:(e,i)=>{null===t||void 0===t||t.setSortForColumn(this.column,tre(e),!!i,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(e,t)=>{n.assertModuleRegistered("Tooltip",3),this.setupTooltip(e,t)}})}setupSelectAll(e){var t;const{selectionSvc:i}=this.beans;i&&(this.selectAllFeature=e.createOptionalManagedBean(i.createSelectAllFeature(this.column)),null===(t=this.selectAllFeature)||void 0===t||t.setComp(this),e.addManagedPropertyListener("rowSelection",()=>{const t=i.createSelectAllFeature(this.column);var n;t&&!this.selectAllFeature?(this.selectAllFeature=e.createManagedBean(t),null===(n=this.selectAllFeature)||void 0===n||n.setComp(this),this.comp.refreshSelectAllGui()):this.selectAllFeature&&!t&&(this.comp.removeSelectAllGui(),this.selectAllFeature=this.destroyBean(this.selectAllFeature))}))}getSelectAllGui(){var e;return null===(e=this.selectAllFeature)||void 0===e?void 0:e.getCheckboxGui()}handleKeyDown(e){var t;(super.handleKeyDown(e),e.key===Eae.SPACE)?null===(t=this.selectAllFeature)||void 0===t||t.onSpaceKeyDown(e):e.key===Eae.ENTER?this.onEnterKeyDown(e):e.key===Eae.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){const{column:t,gos:i,sortable:n,beans:o}=this;let s=!1;var r;if((e.ctrlKey||e.metaKey)&&(s=this.showMenuOnKeyPress(e,!0)),!s)if(!e.altKey&&Vse(i))null===(r=o.rangeSvc)||void 0===r||r.handleColumnSelection(t,e);else if(n){var a;null===(a=o.sortSvc)||void 0===a||a.progressSort(t,e.shiftKey,"uiColumnSorted")}}showMenuOnKeyPress(e,t){const i=this.comp.getUserCompInstance();return!!zue(i)&&(!!i.onMenuKeyboardShortcut(t)&&(e.preventDefault(),!0))}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),ele()&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){var i;this.tooltipFeature=null===(i=this.beans.tooltipSvc)||void 0===i?void 0:i.setupHeaderTooltip(this.tooltipFeature,this,e,t)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){const e=()=>{const e=rue(this.column.getColDef(),this.gos,this.column,null),t=this.userHeaderClasses;this.userHeaderClasses=new Set(e);for(const i of e)t.has(i)?t.delete(i):this.comp.toggleCss(i,!0);for(const i of t)this.comp.toggleCss(i,!1)};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){var t,i;this.dragSourceElement=e,this.removeDragSource(),e&&this.draggable&&(this.dragSource=null!==(t=null===(i=this.beans.colMoves)||void 0===i?void 0:i.setDragSourceForHeader(e,this.column,this.displayName))&&void 0!==t?t:null)}updateState(){const{menuSvc:e}=this.beans;this.menuEnabled=!(null===e||void 0===e||!e.isColumnMenuInHeaderEnabled(this.column)),this.openFilterEnabled=!(null===e||void 0===e||!e.isFilterMenuInHeaderEnabled(this.column)),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria();for(const e of Object.values(this.refreshFunctions))e()}refreshHeaderComp(){const e=this.lookupUserCompDetails();if(!e)return;!!(null!=this.comp.getUserCompInstance()&&this.userCompDetails.componentClass==e.componentClass)&&this.attemptHeaderCompRefresh(e.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();if(!t)return!1;if(!t.refresh)return!1;return t.refresh(e)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const e=this.column.getActualWidth();this.comp.setWidth("".concat(e,"px"))};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.toggleCss("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{var e;null===(e=this.comp)||void 0===e||e.toggleCss("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.toggleCss("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const e=this.column.isFilterActive();this.comp.toggleCss("ag-header-cell-filtered",e),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const e=!!this.column.getColDef().wrapHeaderText;this.comp.toggleCss("ag-header-cell-wrap-text",e)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=0===e,i=1===e;this.comp.toggleCss("ag-header-highlight-before",t),this.comp.toggleCss("ag-header-highlight-after",i)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){var e,t;const{eGui:i,column:n,comp:o,beans:s}=this,r=kue(this.beans),a=0===r.reduce((e,t)=>e+t,0);if(o.toggleCss("ag-header-parent-hidden",a),!n.isSpanHeaderHeight())return i.style.removeProperty("top"),i.style.removeProperty("height"),o.toggleCss("ag-header-span-height",!1),void o.toggleCss("ag-header-span-total",!1);const{numberOfParents:l,isSpanningTotal:d}=this.column.getColumnGroupPaddingInfo();o.toggleCss("ag-header-span-height",l>0);const c=Iue(s);if(0===l)return o.toggleCss("ag-header-span-total",!1),i.style.setProperty("top","0px"),void i.style.setProperty("height","".concat(c,"px"));o.toggleCss("ag-header-span-total",d);const u=(null!==(e=null===(t=this.column.getFirstRealParent())||void 0===t?void 0:t.getLevel())&&void 0!==e?e:-1)+1,h=r.length-u;let p=0;for(let g=0;g<h;g++)p+=r[r.length-1-g];i.style.setProperty("top","".concat(-p,"px")),i.style.setProperty("height","".concat(c+p,"px"))}refreshAriaSort(){let e=null;const{beans:t,column:i,comp:n,sortable:o}=this;if(o){var s,r;const o=this.getLocaleTextFunc(),a=null!==(s=null===(r=t.sortSvc)||void 0===r?void 0:r.getDisplaySortForColumn(i))&&void 0!==s?s:null;n.setAriaSort(function(e){const t=null===e||void 0===e?void 0:e.direction;return"asc"===t?"ascending":"desc"===t?"descending":"mixed"===t?"other":"none"}(a)),e=o("ariaSortableColumn","Press ENTER to sort")}else n.setAriaSort();this.setAriaDescriptionProperty("sort",e)}refreshAriaMenu(){let e=null;if(this.menuEnabled){e=this.getLocaleTextFunc()("ariaMenuColumn","Press ALT DOWN to open column menu")}this.setAriaDescriptionProperty("menu",e)}refreshAriaFilterButton(){let e=null;const{openFilterEnabled:t,gos:i}=this;if(t&&!_se(i)){e=this.getLocaleTextFunc()("ariaFilterColumn","Press CTRL ENTER to open filter")}this.setAriaDescriptionProperty("filterButton",e)}refreshAriaFiltered(){let e=null;if(this.column.isFilterActive()){e=this.getLocaleTextFunc()("ariaColumnFiltered","Column Filtered")}this.setAriaDescriptionProperty("filter",e)}refreshAriaCellSelection(){let e=null;const{gos:t,column:i,beans:n}=this;if(Vse(t)){var o;const t=this.getLocaleTextFunc(),s=null===(o=n.rangeSvc)||void 0===o?void 0:o.isColumnInAnyRange(i);e=t("ariaColumnCellSelection","Press CTRL+SPACE to ".concat(s?"de":"","select all visible cells in this column"))}this.setAriaDescriptionProperty("cellSelection",e)}setAriaDescriptionProperty(e,t){const i=this.ariaDescriptionProperties;null!=t?i.set(e,t):i.delete(e)}announceAriaDescription(){var e;const{beans:t,eGui:i,ariaDescriptionProperties:n}=this;if(!i.contains(Uie(t)))return;const o=Array.from(n.keys()).sort((e,t)=>"filter"===e?-1:t.charCodeAt(0)-e.charCodeAt(0)).map(e=>n.get(e)).join(". ");null===(e=t.ariaAnnounce)||void 0===e||e.announceValue(o,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered(),this.refreshAriaCellSelection()}addColumnHoverListener(e){var t;null===(t=this.beans.colHover)||void 0===t||t.addHeaderColumnHoverListener(e,this.comp,this.column)}addActiveHeaderMouseListeners(e){const t=e=>this.handleMouseOverChange("mouseenter"===e.type);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},contextmenu:e=>this.handleContextMenuMouseEvent(e,void 0,this.column)})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.toggleCss("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return zue(t)?t.getAnchorElementForMenu(e):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function zue(e){return"function"===typeof(null===e||void 0===e?void 0:e.getAnchorElementForMenu)&&"function"===typeof e.onMenuKeyboardShortcut}var Bue=0,Vue=class extends yoe{constructor(e,t,i){super(),this.rowIndex=e,this.pinned=t,this.type=i,this.instanceId=Bue++,this.comp=null,this.allCtrls=[];let n="ag-header-row-column";"group"===i?n="ag-header-row-group":"filter"===i&&(n="ag-header-row-filter"),this.headerRowClass="ag-header-row ".concat(n)}setRowIndex(e){var t;this.rowIndex=e,null===(t=this.comp)||void 0===t||t.setRowIndex(this.getAriaRowIndex()),this.onRowHeightChanged()}postConstruct(){this.isPrintLayout=fse(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return!!this.comp&&this.allCtrls.every(e=>null!=e.eGui)}setComp(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.comp=e,t=aae(this,this.beans.context,t),i&&(this.setRowIndex(this.rowIndex),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this),i=this.onDisplayedColumnsChanged.bind(this);e.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:i,virtualColumnsChanged:e=>this.onVirtualColumnsChanged(e.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,stylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",i),e.addManagedPropertyListener("ensureDomOrder",e=>this.isEnsureDomOrder=e.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}onDisplayedColumnsChanged(){this.isPrintLayout=fse(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){if(!this.comp)return;const e=this.getWidthForRow();this.comp.setWidth("".concat(e,"px"))}getWidthForRow(){const{visibleCols:e}=this.beans;if(this.isPrintLayout){return null!=this.pinned?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null)}return e.getContainerWidth(this.pinned)}onRowHeightChanged(){if(!this.comp)return;const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let e=0;const t=kue(this.beans);for(let n=0;n<t.length;n++){if(n===this.rowIndex&&"group"===this.type)return{topOffset:e,rowHeight:t[n]};e+=t[n]}const i=Iue(this.beans);if("column"===this.type)return{topOffset:e,rowHeight:i};e+=i;return{topOffset:e,rowHeight:Lue(this.beans)}}onVirtualColumnsChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.comp)return;const t=this.getUpdatedHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,i,e)}getUpdatedHeaderCtrls(){const e=this.ctrlsById;this.ctrlsById=new Map;const t=this.getColumnsInViewport();for(const n of t)this.recycleAndCreateHeaderCtrls(n,this.ctrlsById,e);const i=e=>{const{focusSvc:t,visibleCols:i}=this.beans;if(!t.isHeaderWrapperFocused(e))return!1;return i.isVisible(e.column)};if(e)for(const[n,o]of e){i(o)?this.ctrlsById.set(n,o):this.destroyBean(o)}return this.allCtrls=Array.from(this.ctrlsById.values()),this.allCtrls}getHeaderCellCtrls(){return this.allCtrls}recycleAndCreateHeaderCtrls(e,t,i){if(e.isEmptyGroup())return;const n=e.getUniqueId();let o;i&&(o=i.get(n),i.delete(n));if(o&&o.column!=e&&(this.destroyBean(o),o=void 0),null==o)switch(this.type){case"filter":o=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,e,this));break;case"group":o=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,e,this));break;default:o=this.createBean(new Fue(e,this))}t.set(n,o)}getColumnsInViewport(){if(!this.isPrintLayout)return this.getComponentsToRender();if(this.pinned)return[];const e=[];for(const t of["left",null,"right"])e.push(...this.getComponentsToRender(t));return e}getComponentsToRender(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pinned;return"group"===this.type?this.beans.colViewport.getHeadersToRender(e,this.rowIndex):this.beans.colViewport.getColumnHeadersToRender(e)}focusHeader(e,t){const i=this.allCtrls.find(t=>t.column==e);if(!i)return!1;return i.focus(t)}destroy(){this.allCtrls=this.destroyBeans(this.allCtrls),this.ctrlsById=void 0,this.comp=null,super.destroy()}},Gue=class extends yoe{constructor(e){super(),this.pinned=e,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(e,t){this.comp=e,this.eViewport=t;const{pinnedCols:i,ctrlsSvc:n,colModel:o,colMoves:s}=this.beans;this.setupCenterWidth(),null===i||void 0===i||i.setupHeaderPinnedWidth(this),this.setupDragAndDrop(s,this.eViewport);const r=this.refresh.bind(this,!0);this.addManagedEventListeners({displayedColumnsChanged:r,advancedFilterEnabledChanged:r});const a="".concat("string"===typeof this.pinned?this.pinned:"center","Header");n.register(a,this),o.ready&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{focusSvc:t,filterManager:i,visibleCols:n}=this.beans;let o=0;const s=t.getFocusHeaderToUseAfterRefresh(),r=this.getAllCtrls();(()=>{const t=n.headerGroupRowCount;o=t,e||(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls));const i=this.groupsRowCtrls.length;if(i!==t)if(i>t){for(let e=t;e<i;e++)this.destroyBean(this.groupsRowCtrls[e]);this.groupsRowCtrls.length=t}else for(let e=i;e<t;e++){const t=this.createBean(new Vue(e,this.pinned,"group"));this.groupsRowCtrls.push(t)}})(),(()=>{const t=o++;this.hidden?this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl):null!=this.columnsRowCtrl&&e?this.columnsRowCtrl.rowIndex!==t&&this.columnsRowCtrl.setRowIndex(t):(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.columnsRowCtrl=this.createBean(new Vue(t,this.pinned,"column")))})(),(()=>{this.includeFloatingFilter=!(null===i||void 0===i||!i.hasFloatingFilters())&&!this.hidden;const t=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter)return void t();e||t();const n=o++;if(this.filtersRowCtrl){this.filtersRowCtrl.rowIndex!==n&&this.filtersRowCtrl.setRowIndex(n)}else this.filtersRowCtrl=this.createBean(new Vue(n,this.pinned,"filter"))})();const a=this.getAllCtrls();this.comp.setCtrls(a),this.restoreFocusOnHeader(t,s),r.length!==a.length&&this.beans.eventSvc.dispatchEvent({type:"headerRowsChanged"})}getHeaderCtrlForColumn(e){const t=t=>null===t||void 0===t?void 0:t.getHeaderCellCtrls().find(t=>t.column===e);if(qse(e))return t(this.columnsRowCtrl);if(0!==this.groupsRowCtrls.length)for(let i=0;i<this.groupsRowCtrls.length;i++){const e=t(this.groupsRowCtrls[i]);if(e)return e}}getHtmlElementForColumnHeader(e){var t,i;return null!==(t=null===(i=this.getHeaderCtrlForColumn(e))||void 0===i?void 0:i.eGui)&&void 0!==t?t:null}getRowType(e){var t;return null===(t=this.getAllCtrls()[e])||void 0===t?void 0:t.type}focusHeader(e,t,i){const n=this.getAllCtrls()[e];return!!n&&n.focusHeader(t,i)}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(e,t){const i=null===e||void 0===e?void 0:e.createBodyDropTarget(this.pinned,t);i&&this.createManagedBean(i)}restoreFocusOnHeader(e,t){if(!t)return;const{column:i}=t;i.getPinned()==this.pinned&&e.focusHeaderPosition({headerPosition:t,scroll:!1})}setupCenterWidth(){null==this.pinned&&this.createManagedBean(new vce(e=>this.comp.setCenterWidth("".concat(e,"px")),!0))}};function Hue(e){const{enterpriseMenuFactory:t,filterMenuFactory:i,gos:n}=e;return t&&_se(n)?t:i}var jue=class extends hae{constructor(){super()}};function Wue(e,t,i){const n=_ue(e,t,i);if(n){const{className:e}=n;if("string"===typeof e&&e.includes("ag-icon")||"object"===typeof e&&e["ag-icon"])return n}const o=oce({tag:"span"});return o.appendChild(n),o}function _ue(e,t,i){let n=null;"smallDown"===e?lse(262):"smallLeft"===e?lse(263):"smallRight"===e&&lse(264);const o=null===i||void 0===i?void 0:i.getColDef().icons;if(o&&(n=o[e]),t.gos&&!n){const i=t.gos.get("icons");i&&(n=i[e])}if(n){let t;if("function"===typeof n)t=n();else{if("string"!==typeof n)return void lse(38,{iconName:e});t=n}return"string"===typeof t?Gne(t):$ne(t)?t:void lse(133,{iconName:e})}{const i=t.registry.getIcon(e);var s;if(!i)null===(s=t.validation)||void 0===s||s.validateIcon(e);return oce({tag:"span",cls:"ag-icon ag-icon-".concat(null!==i&&void 0!==i?i:e),role:"presentation",attrs:{unselectable:"on"}})}}var Kue={tag:"div",cls:"ag-overlay-loading-center",children:[{tag:"span",ref:"eLoadingIcon",cls:"ag-loading-icon"},{tag:"span",ref:"eLoadingText",cls:"ag-loading-text"}]},Uue={tag:"div",cls:"ag-overlay-exporting-center",children:[{tag:"span",ref:"eExportingIcon",cls:"ag-loading-icon"},{tag:"span",ref:"eExportingText",cls:"ag-exporting-text"}]},Yue={tag:"span",cls:"ag-overlay-no-rows-center"},$ue={tag:"span",cls:"ag-overlay-no-matching-rows-center"},Zue={tag:"div",children:[{tag:"div",ref:"eGhost",cls:"ag-dnd-ghost ag-unselectable",children:[{tag:"span",ref:"eIcon",cls:"ag-dnd-ghost-icon ag-shake-left-to-right"},{tag:"div",ref:"eLabel",cls:"ag-dnd-ghost-label"}]}]},Xue={tag:"div",cls:"ag-cell-wrapper ag-checkbox-cell",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]};var que=e=>{let t=e.childrenAfterGroup;for(;null!==(i=t)&&void 0!==i&&i.length;){var i;const e=t[0];if(e.sourceRowIndex>=0)return e;t=e.childrenAfterGroup}},Que=(e,t,i,n)=>{var o;if(!t.size||!e)return!1;let s=!1;const r=null!==(o=e.length)&&void 0!==o?o:0;let a=-1;i&&(a=i.sourceRowIndex,(i=a<0?que(i):null)&&(a=i.sourceRowIndex)),a<0||a>=r?a=r:n||++a;let l=a,d=Math.min(a,r-1);for(const h of t){const e=h.sourceRowIndex;e<l&&(l=e),e>d&&(d=e)}let c=l;for(let h=l;h<a;++h){const i=e[h];t.has(i)||(i.sourceRowIndex!==c&&(i.sourceRowIndex=c,e[c]=i,s=!0),++c)}let u=d;for(let h=d;h>=a;--h){const i=e[h];t.has(i)||(i.sourceRowIndex!==u&&(i.sourceRowIndex=u,e[u]=i,s=!0),--u)}for(const h of t)h.sourceRowIndex!==c&&(h.sourceRowIndex=c,e[c]=h,s=!0),++c;return s},Jue=class{constructor(){this.reordered=!1,this.removals=[],this.updates=new Set,this.adds=new Set}};function ehe(e){return!(!e.rowPinned||!e.pinnedSibling)}var the,ihe=class extends cle{constructor(e){super(e,dce)}},nhe=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.eElement=e,this.preventClick=t,this.startListener=null,this.handlers=[],this.eventSvc=void 0,this.touchStart=null,this.lastTapTime=null,this.longPressTimer=0,this.moved=!1}addEventListener(e,t){let i=this.eventSvc;if(!i){if(null===i)return;this.eventSvc=i=new Pie;const e=this.onTouchStart.bind(this);this.startListener=e,this.eElement.addEventListener("touchstart",e,{passive:!0})}i.addEventListener(e,t)}removeEventListener(e,t){var i;null===(i=this.eventSvc)||void 0===i||i.removeEventListener(e,t)}onTouchStart(e){if(this.touchStart||!(e=>{if(the){if(the.has(e))return!1}else the=new WeakSet;return the.add(e),!0})(e))return;const t=e.touches[0];this.touchStart=t;const i=this.handlers;if(!i.length){const e=this.eElement,t=e.ownerDocument,n=this.onTouchMove.bind(this),o=this.onTouchEnd.bind(this),s=this.onTouchCancel.bind(this),r={passive:!0},a={passive:!1};hoe(i,[e,"touchmove",n,r],[t,"touchcancel",s,r],[t,"touchend",o,a],[t,"contextmenu",goe,a])}this.clearLongPress(),this.longPressTimer=window.setTimeout(()=>{var i;(this.longPressTimer=0,this.touchStart!==t||this.moved)||(this.moved=!0,null===(i=this.eventSvc)||void 0===i||i.dispatchEvent({type:"longTap",touchStart:t,touchEvent:e}))},550)}onTouchMove(e){const{moved:t,touchStart:i}=this;if(!t&&i){const t=doe(i,e.touches);t&&!loe(t,i,4)&&(this.clearLongPress(),this.moved=!0)}}onTouchEnd(e){const t=this.touchStart;if(t&&doe(t,e.changedTouches)){var i;if(!this.moved)null===(i=this.eventSvc)||void 0===i||i.dispatchEvent({type:"tap",touchStart:t}),this.checkDoubleTap(t);this.preventClick&&goe(e),this.cancel()}}onTouchCancel(e){const t=this.touchStart;t&&doe(t,e.changedTouches)&&(this.lastTapTime=null,this.cancel())}checkDoubleTap(e){let t=Date.now();const i=this.lastTapTime;if(i){var n;if(t-i>500)null===(n=this.eventSvc)||void 0===n||n.dispatchEvent({type:"doubleTap",touchStart:e}),t=null}this.lastTapTime=t}cancel(){this.clearLongPress(),poe(this.handlers),this.touchStart=null}clearLongPress(){window.clearTimeout(this.longPressTimer),this.longPressTimer=0,this.moved=!1}destroy(){const e=this.startListener;e&&(this.startListener=null,this.eElement.removeEventListener("touchstart",e)),this.cancel(),this.eElement=null,this.eventSvc=null}},ohe=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript";var t;this.frameworkName=e,this.renderingEngine="vanilla",this.batchFrameworkComps=!1,this.wrapIncoming=e=>e(),this.wrapOutgoing=e=>e(),this.baseDocLink="".concat(Poe,"/").concat(this.frameworkName,"-data-grid"),t=this.baseDocLink,tse=t}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return this.baseDocLink+(e?"/"+e:"")}};function she(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionSvc").api}}var rhe=Object.fromEntries(["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","pageBoundsListener","rowSpanSvc","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"].map((e,t)=>[e,t]));function ahe(e,t){var i,n;return(null!==(i=e.beanName?rhe[e.beanName]:void 0)&&void 0!==i?i:Number.MAX_SAFE_INTEGER)-(null!==(n=t.beanName?rhe[t.beanName]:void 0)&&void 0!==n?n:Number.MAX_SAFE_INTEGER)}function lhe(e,t){return"gridDestroySvc"===(null===e||void 0===e?void 0:e.beanName)?-1:"gridDestroySvc"===(null===t||void 0===t?void 0:t.beanName)?1:0}var dhe=class extends yoe{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.beans.context.getId());const{dragAndDrop:n,ctrlsSvc:o}=this.beans;null===n||void 0===n||n.registerGridDropTarget(()=>this.eGui,this),this.createManagedBean(new hce(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");const s=Xne(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>s()),o.register("gridCtrl",this)}isDetailGrid(){var e;const t=ole(this.getGui());return(null===t||void 0===t||null===(e=t.getAttribute("row-id"))||void 0===e?void 0:e.startsWith("detail"))||!1}getOptionalSelectors(){var e,t,i,n,o;const s=this.beans;return{paginationSelector:null===(e=s.pagination)||void 0===e?void 0:e.getPaginationSelector(),gridHeaderDropZonesSelector:null===(t=s.registry)||void 0===t?void 0:t.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:null===(i=s.sideBar)||void 0===i?void 0:i.getSelector(),statusBarSelector:null===(n=s.registry)||void 0===n?void 0:n.getSelector("AG-STATUS-BAR"),watermarkSelector:null===(o=s.licenseManager)||void 0===o?void 0:o.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){const{view:t}=this;if(!1===e)t.setCursor(null);else{const i=1===e?"ew-resize":"ns-resize";t.setCursor(i)}}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:i,nextIndex:n}=this.getNextFocusableIndex(t,e);if(n<0||n>=t.length)return!1;if(0===n){if(i>0){const{visibleCols:e,focusSvc:t}=this.beans,i=pre(e.allCols);if(t.focusGridView({column:i,backwards:!0}))return!0}return!1}return this.focusContainer(t[n],e)}focusInnerElement(e){const t=this.gos.getCallback("focusGridInnerElement");if(null!==t&&void 0!==t&&t({fromBottom:!!e}))return!0;const i=this.getFocusableContainers(),{focusSvc:n,visibleCols:o}=this.beans,s=o.allCols;if(e){if(i.length>1)return this.focusContainer(pre(i),e);const t=pre(s);if(n.focusGridView({column:t,backwards:e}))return!0}if(0===this.gos.get("headerHeight")||xue(this.beans)){if(n.focusGridView({column:s[0],backwards:e}))return!0;for(let t=1;t<i.length;t++)if(ile(i[t].getGui(),e))return!0;return!1}return n.focusFirstHeader()}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){const t=this.view.getFocusableContainers(),{nextIndex:i}=this.getNextFocusableIndex(t,e),n=t[i];n?this.focusContainer(n):this.forceFocusOutOfContainer(e)}isFocusable(){var e;const t=this.beans;return!Cue(t)||!xue(t)||!(null===(e=t.sideBar)||void 0===e||null===(e=e.comp)||void 0===e||!e.isDisplayed())}getNextFocusableIndex(e,t){const i=Uie(this.beans),n=e.findIndex(e=>e.getGui().contains(i));return{indexWithFocus:n,nextIndex:n+(t?-1:1)}}focusContainer(e,t){var i,n;null===(i=e.setAllowFocus)||void 0===i||i.call(e,!0);const o=ile(e.getGui(),t,!1,!0);return null===(n=e.setAllowFocus)||void 0===n||n.call(e,!1),o}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},che=(e,t)=>{for(const i of Object.keys(t))t[i]=e;return t},uhe=p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p({dispatchEvent:"CommunityCore"},che("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,isModuleRegistered:0})),che("GridState",{getState:0,setState:0})),che("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0})),che("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0})),che("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0})),che("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0})),che("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0})),che("ValueCache",{expireValueCache:0})),che("CellApi",{getCellValue:0})),che("SharedMenu",{showColumnMenu:0,hidePopupMenu:0})),che("Sort",{onSortChanged:0})),che("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,forEachPinnedRow:0})),che("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0})),che("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0})),che("HighlightChanges",{flashCells:0})),che("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getRowDropPositionIndicator:0,setRowDropPositionIndicator:0})),che("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0})),che("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0})),che("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0})),che("ColumnMove",{moveColumnByIndex:0,moveColumns:0})),che("ColumnResize",{setColumnWidths:0})),che("ColumnHover",{isColumnHovered:0})),che("EditCore",{getCellEditorInstances:0,getEditingCells:0,getEditRowValues:0,stopEditing:0,startEditingCell:0,isEditing:0,validateEdit:0})),che("BatchEdit",{startBatchEdit:0,cancelBatchEdit:0,commitBatchEdit:0,isBatchEditing:0})),che("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0})),che("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0})),che("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,hideColumnFilter:0,getColumnFilterHandler:0,doFilterAction:0})),che("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0})),che("Find",{findGetActiveMatch:0,findGetTotalMatches:0,findGoTo:0,findNext:0,findPrevious:0,findGetNumMatches:0,findGetParts:0,findClearActive:0,findRefresh:0})),che("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0})),che("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0})),che("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0})),che("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0,onRowHeightChanged:0,resetRowHeights:0})),che("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0})),che("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0})),che("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0})),che("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0})),che("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0})),che("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0})),che("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0})),che("ContextMenu",{showContextMenu:0})),che("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0})),che("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0})),che("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0})),che("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0})),che("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0})),che("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0,onRowHeightChanged:0,resetRowHeights:0})),che("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0})),che("StatusBar",{getStatusPanel:0})),che("AiToolkit",{getStructuredSchema:0})),hhe={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},phe=(e,t)=>e.eventSvc.dispatchEvent(t),ghe=class{};Reflect.defineProperty(ghe,"name",{value:"GridApi"});function mhe(e){return e.context.getId()}function fhe(e,t){e.gos.updateGridOptions({options:t})}var vhe=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}depthFirstSearchChangedPath(e,t){const{rowNode:i,children:n}=e;if(n)for(let o=0;o<n.length;++o)this.depthFirstSearchChangedPath(n[o],t);t(i)}depthFirstSearchEverything(e,t,i){const n=e.childrenAfterGroup;if(n)for(let o=0,s=n.length;o<s;++o){const e=n[o];e.childrenAfterGroup?this.depthFirstSearchEverything(e,t,i):i&&t(e)}t(e)}forEachChangedNodeDepthFirst(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){const e={rowNode:t,children:null};this.mapToItems[t.id]=e,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;){this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={});for(const e of t)this.nodeIdsToColumns[i.id][e.getId()]=!0;i=i.parent}}linkPathItems(e,t){let i=e;for(let n=0;n<t;n++){const e=this.mapToItems[i.id],t=this.mapToItems[i.parent.id];t.children||(t.children=[]),t.children.push(e),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const i=this.nodeIdsToColumns[e.id];return t.filter(e=>i[e.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const i=this.nodeIdsToColumns[e.id];return t.filter(e=>!i[e.getId()])}},yhe={moduleName:"Drag",version:Qoe,beans:[class extends zde{shouldPreventMouseEvent(e){return this.gos.get("enableCellTextSelection")&&super.shouldPreventMouseEvent(e)}}]},bhe={moduleName:"SharedDragAndDrop",version:Qoe,beans:[class extends Hde{createEvent(e){return Kse(this.gos,e)}createDragImageComp(e){const{gos:t,beans:i}=this,n=(o=i.userCompFactory,s=Kse(t,{dragSource:e}),o.getCompDetailsFromGridOptions(mae,"agDragAndDropImage",s,!0));var o,s;return null===n||void 0===n?void 0:n.newAgStackInstance()}handleEnter(e,t){var i;null===e||void 0===e||null===(i=e.onGridEnter)||void 0===i||i.call(e,t)}handleExit(e,t){var i;null===e||void 0===e||null===(i=e.onGridExit)||void 0===i||i.call(e,t)}warnNoBody(){lse(54)}isDropZoneWithinThisGrid(e){return this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody.contains(e.dropZoneTarget)}registerGridDropTarget(e,t){const i={getContainer:e,isInterestedIn:e=>1===e||0===e,getIconName:()=>"notAllowed"};this.addDropTarget(i),t.addDestroyFunc(()=>this.removeDropTarget(i))}}],dependsOn:[yhe],userComponents:{agDragAndDropImage:class extends hae{constructor(){super(),this.dragSource=null,this.eIcon=lae,this.eLabel=lae,this.eGhost=lae,this.registerCSS(".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}.ag-dnd-ghost-not-allowed{border:var(--ag-drag-and-drop-image-not-allowed-border)}")}postConstruct(){const e=e=>Wue(e,this.beans,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(Zue),this.beans.environment.applyThemeClasses(this.eGhost)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t){const{eGhost:i,eIcon:n,dragSource:o,dropIconMap:s,gos:r}=this;Fne(n);let a=null;e||(e=null!==o&&void 0!==o&&o.getDefaultIconName?o.getDefaultIconName():"notAllowed"),a=s[e],i.classList.toggle("ag-dnd-ghost-not-allowed","notAllowed"===e),n.classList.toggle("ag-shake-left-to-right",t),a===s.hide&&r.get("suppressDragLeaveHidesColumns")||a&&n.appendChild(a)}setLabel(e){this.eLabel.textContent=e}}},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},xhe={moduleName:"HorizontalResize",version:Qoe,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:i}=this.beans;i.addDragSource(t);return()=>i.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const i=t instanceof MouseEvent&&!0===t.shiftKey;e.onResizeStart(i)}setResizeIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(1),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}}],dependsOn:[yhe]};var Che=class extends yoe{constructor(e){super(),this.pinned=e,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;if(t)for(const i of t)i.isPrimary()&&(i.isAnyFunctionActive()||(i.isAllowValue()?this.columnsToAggregate.push(i):i.isAllowRowGroup()?this.columnsToGroup.push(i):i.isAllowPivot()&&this.columnsToPivot.push(i)))}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){const{valueColsSvc:t,rowGroupColsSvc:i,pivotColsSvc:n}=this.beans;this.columnsToAggregate.length>0&&(null===t||void 0===t||t.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop")),this.columnsToGroup.length>0&&(null===i||void 0===i||i.addColumns(this.columnsToGroup,"toolPanelDragAndDrop")),this.columnsToPivot.length>0&&(null===n||void 0===n||n.addColumns(this.columnsToPivot,"toolPanelDragAndDrop"))}onDragCancel(){this.clearColumnsList()}};function She(e){const{isFromHeader:t,fromLeft:i,xPosition:n,fromEnter:o,fakeEvent:s,pinned:r,gos:a,colModel:l,colMoves:d,visibleCols:c}=e;let{allMovingColumns:u}=e;t&&(u=function(e){const t=[...e];for(const n of e){let e=null,o=n.getParent();for(;null!=o&&1===o.getDisplayedLeafColumns().length;)e=o,o=o.getParent();if(null!=e){var i;const n=null!==(i=e.getColGroupDef())&&void 0!==i&&i.marryChildren?e.getProvidedColumnGroup().getLeafColumns():e.getLeafColumns();for(const e of n)t.includes(e)||t.push(e)}}return t}(u));const h=u.slice();!function(e,t){if(!t||t.length<=1)return;t.filter(t=>e.indexOf(t)<0).length>0||t.sort((t,i)=>e.indexOf(t)-e.indexOf(i))}(l.getCols(),h);const p=function(e){const{movingCols:t,draggingRight:i,xPosition:n,pinned:o,gos:s,colModel:r,visibleCols:a}=e,l=s.get("suppressMovableColumns")||t.some(e=>e.getColDef().suppressMovable);if(l)return[];const d=function(e,t){switch(t){case"left":return e.leftCols;case"right":return e.rightCols;default:return e.centerCols}}(a,o),c=r.getCols(),u=d.filter(e=>t.includes(e)),h=d.filter(e=>!t.includes(e)),p=c.filter(e=>!t.includes(e));let g,m=0,f=n;if(i){let e=0;for(const t of u)e+=t.getActualWidth();f-=e}if(f>0){for(let e=0;e<h.length;e++){if(f-=h[e].getActualWidth(),f<0)break;m++}i&&m++}if(m>0){const e=h[m-1];g=p.indexOf(e)+1}else g=p.indexOf(h[0]),-1===g&&(g=0);const v=[g],y=(e,t)=>e-t;if(i){let e=g+1;const t=c.length-1;for(;e<=t;)v.push(e),e++;v.sort(y)}else{let e=g;const t=c.length-1;let i=c[e];for(;e<=t&&d.indexOf(i)<0;)e++,v.push(e),i=c[e];e=g-1;const n=0;for(;e>=n;)v.push(e),e--;v.sort(y).reverse()}return v}({movingCols:h,draggingRight:i,xPosition:n,pinned:r,gos:a,colModel:l,visibleCols:c}),g=function(e,t){const i=t.getCols(),n=e.map(e=>i.indexOf(e)).sort((e,t)=>e-t),o=n[0],s=pre(n);return s-o!==n.length-1?null:o}(h,l);if(0===p.length)return;const m=p[0];if(null!==g&&(t||!o)&&!s){if(!i&&m>=g)return;if(i&&m<=g)return}const f=function(e,t,i,n){const o=n.allCols;let s=null,r=null;for(let a=0;a<e.length;a++){const n=e[a],l=i.getProposedColumnOrder(t,n);if(!i.doesOrderPassRules(l))continue;const d=l.filter(e=>o.includes(e));if(null===r)r=d;else if(!gre(d,r))break;const c=Mhe(l);(null===s||c<s.fragCount)&&(s={move:n,fragCount:c})}return s}(p,h,d,c);if(!f)return;const v=f.move;return v>l.getCols().length-h.length?void 0:{columns:h,toIndex:v}}function whe(e){const{columns:t,toIndex:i}=She(e)||{},{finished:n,colMoves:o}=e;return t&&null!=i?(o.moveColumns(t,i,"uiColumnMoved",n),n?null:{columns:t,toIndex:i}):null}function Mhe(e){function t(e){const t=[];let i=e.getOriginalParent();for(;null!=i;)t.push(i),i=i.getOriginalParent();return t}let i=0;for(let n=0;n<e.length-1;n++){let o=t(e[n]),s=t(e[n+1]);[o,s]=o.length>s.length?[o,s]:[s,o];for(const e of o)-1===s.indexOf(e)&&i++}return i}function khe(e){var t;const{pinned:i,fromKeyboard:n,gos:o,ctrlsSvc:s,useHeaderRow:r,skipScrollPadding:a}=e;let l=null===(t=s.getHeaderRowContainerCtrl(i))||void 0===t?void 0:t.eViewport,{x:d}=e;return l?(n&&(d-=l.getBoundingClientRect().left),o.get("enableRtl")&&(r&&(l=l.querySelector(".ag-header-row")),d=l.clientWidth-d),null!=i||a||(d+=s.get("center").getCenterViewportScrollLeft()),d):0}function Dhe(e,t){for(const i of e)i.moving=t,i.dispatchColEvent("movingChanged","uiColumnMoved")}var Ihe=class extends yoe{constructor(e){super(),this.pinned=e,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!Fie(e)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){var e;const{pinned:t,lastDraggingEvent:i}=this,{dragItem:n}=i||{},o=null!==(e=null===n||void 0===n?void 0:n.columns)&&void 0!==e?e:[];for(const s of o){const e=s.getPinned();if(s.getColDef().lockPinned){if(e==t)return"move";continue}const i=null===n||void 0===n?void 0:n.containerType;if(i===t||!t)return"move";if(t&&(!e||i!==t))return"pinned"}return"notAllowed"}onDragEnter(e){const t=e.dragItem,i=t.columns;if(0===e.dragSource.type)this.setColumnsVisible(i,!0,"uiColumnDragged");else{const e=t.visibleState,n=(i||[]).filter(t=>e[t.getId()]&&!t.isVisible());this.setColumnsVisible(n,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(i,this.pinned),this.onDragging(e,!0,!0)}onDragging(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lastDraggingEvent,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const{gos:o,ctrlsSvc:s}=this.beans,r=o.get("suppressMoveWhenColumnDragging");if(n&&!r)return void this.finishColumnMoving();if(this.lastDraggingEvent=e,!e||!n&&zie(e.hDirection))return;const a=khe({x:e.x,pinned:this.pinned,gos:o,ctrlsSvc:s});t||this.checkCenterForScrolling(a),r?this.handleColumnDragWhileSuppressingMovement(e,t,i,a,n):this.handleColumnDragWhileAllowingMovement(e,t,i,a,n)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.updateDragItemContainerType(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i){if(null===e||void 0===e||!e.length)return;const n=e.filter(e=>!e.getColDef().lockVisible);n.length&&this.beans.colModel.setColsVisible(n,t,i)}finishColumnMoving(){this.clearHighlighted();const e=this.lastMovedInfo;if(!e)return;const{columns:t,toIndex:i}=e;this.beans.colMoves.moveColumns(t,i,"uiColumnMoved",!0)}updateDragItemContainerType(){const{lastDraggingEvent:e}=this;if(this.gos.get("suppressMoveWhenColumnDragging")||!e)return;const t=e.dragItem;t&&(t.containerType=this.pinned)}handleColumnDragWhileSuppressingMovement(e,t,i,n,o){const s=this.getAllMovingColumns(e,!0);if(o){const e=this.isAttemptingToPin(s);e&&this.attemptToPinColumns(s,void 0,!0);const{fromLeft:n,xPosition:o}=this.getNormalisedXPositionInfo(s,e)||{};if(null==n||null==o)return void this.finishColumnMoving();this.moveColumnsAfterHighlight({allMovingColumns:s,xPosition:o,fromEnter:t,fakeEvent:i,fromLeft:n})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(s,n)}}handleColumnDragWhileAllowingMovement(e,t,i,n,o){const s=this.getAllMovingColumns(e),r="right"===this.normaliseDirection(e.hDirection),a=1===e.dragSource.type,l=whe(p(p({},this.getMoveColumnParams({allMovingColumns:s,isFromHeader:a,xPosition:n,fromLeft:r,fromEnter:t,fakeEvent:i})),{},{finished:o}));l&&(this.lastMovedInfo=l)}getAllMovingColumns(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.dragSource.getDragItem();let n=null;t?(n=i.columnsInSplit,n||(n=i.columns)):n=i.columns;return n?n.filter(e=>!e.getColDef().lockPinned||e.getPinned()==this.pinned):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:i,xPosition:n,fromLeft:o,fromEnter:s,fakeEvent:r}=e,{gos:a,colModel:l,colMoves:d,visibleCols:c}=this.beans;return{allMovingColumns:t,isFromHeader:i,fromLeft:o,xPosition:n,pinned:this.pinned,fromEnter:s,fakeEvent:r,gos:a,colModel:l,colMoves:d,visibleCols:c}}highlightHoveredColumn(e,t){var i;const{gos:n,colModel:o}=this.beans,s=n.get("enableRtl"),r=o.getCols().filter(e=>e.isVisible()&&e.getPinned()===this.pinned);let a,l=null,d=null,c=null;for(const u of r){if(d=u.getActualWidth(),l=this.getNormalisedColumnLeft(u,0,s),null!=l){if(l<=t&&l+d>=t){c=u;break}}l=null,d=null}if(c)-1!==e.indexOf(c)&&(c=null);else{for(let e=r.length-1;e>=0;e--){const t=r[e],i=r[e].getParent();if(!i){c=t;break}const n=null===i||void 0===i?void 0:i.getDisplayedLeafColumns();if(n.length){c=pre(n);break}}if(!c)return;l=this.getNormalisedColumnLeft(c,0,s),d=c.getActualWidth()}(null===(i=this.lastHighlightedColumn)||void 0===i?void 0:i.column)!==c&&this.clearHighlighted(),null!=c&&null!=l&&null!=d&&(a=t-l<d/2?0:1,Ahe(c,a),this.lastHighlightedColumn={column:c,position:a})}getNormalisedXPositionInfo(e,t){const{gos:i,visibleCols:n}=this.beans,o=i.get("enableRtl"),{firstMovingCol:s,column:r,position:a}=this.getColumnMoveAndTargetInfo(e,t,o);if(!s||!r||null==a)return;const l=n.allCols,d=l.indexOf(s),c=l.indexOf(r),u=0===a,h=d<c||d===c&&!u;let p=0;if(u?h&&(p-=1):h||(p+=1),c+p===d)return;const g=l[c+p];if(!g)return;return{fromLeft:h,xPosition:this.getNormalisedColumnLeft(g,20,o)}}getColumnMoveAndTargetInfo(e,t,i){const n=this.lastHighlightedColumn||{},{firstMovingCol:o,lastMovingCol:s}=function(e){const t=e.length;let i,n;for(let o=0;o<t;o++){if(!i){const t=e[o];null!=t.getLeft()&&(i=t)}if(!n){const i=e[t-1-o];null!=i.getLeft()&&(n=i)}if(i&&n)break}return{firstMovingCol:i,lastMovingCol:n}}(e);if(!o||!s||n.column||!t)return p({firstMovingCol:o},n);const r="left"===this.getPinDirection();return{firstMovingCol:o,position:r?1:0,column:r!==i?o:s}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case"left":return"right";case"right":return"left"}return e}getNormalisedColumnLeft(e,t,i){const{gos:n,ctrlsSvc:o}=this.beans,s=e.getLeft();if(null==s)return null;const r=e.getActualWidth();return khe({x:i?s+r-t:s+t,pinned:e.getPinned(),useHeaderRow:i,skipScrollPadding:!0,gos:n,ctrlsSvc:o})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,i=this.failedMoveAttempts>7;return t&&i||e.some(e=>e.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:i,fromEnter:n,fakeEvent:o,fromLeft:s}=e,r=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:i,fromLeft:s,fromEnter:n,fakeEvent:o}),{columns:a,toIndex:l}=She(r)||{};a&&null!=l&&(this.lastMovedInfo={columns:a,toIndex:l}),this.finishColumnMoving()}clearHighlighted(){const{lastHighlightedColumn:e}=this;e&&(Ahe(e.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.beans.ctrlsSvc.get("center"),i=t.getCenterViewportScrollLeft(),n=i+t.getCenterWidth();let o,s;this.gos.get("enableRtl")?(o=e<i+50,s=e>n-50):(s=e<i+50,o=e>n-50),this.needToMoveRight=o,this.needToMoveLeft=s,s||o?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.beans.dragAndDrop.setDragImageCompIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.beans.dragAndDrop.setDragImageCompIcon(this.getIconName()))}moveInterval(){let e;this.intervalCount++,e=10+5*this.intervalCount,e>100&&(e=100);let t=null;const i=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),0!==t)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const{pinnedCols:e,dragAndDrop:t,gos:i}=this.beans;if(this.failedMoveAttempts<=8||!e)return;if(t.setDragImageCompIcon("pinned"),!i.get("suppressMoveWhenColumnDragging")){var n;const e=null===(n=this.lastDraggingEvent)||void 0===n?void 0:n.dragItem.columns;this.attemptToPinColumns(e,void 0,!0)}}}getPinDirection(){return this.needToMoveLeft||"left"===this.pinned?"left":this.needToMoveRight||"right"===this.pinned?"right":void 0}attemptToPinColumns(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=(e||[]).filter(e=>!e.getColDef().lockPinned);if(!n.length)return 0;i&&(t=this.getPinDirection());const{pinnedCols:o,dragAndDrop:s}=this.beans;return null===o||void 0===o||o.setColsPinned(n,t,"uiColumnDragged"),i&&s.nudge(),n.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}};function Ahe(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}var Lhe=class extends yoe{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){const{ctrlsSvc:e,dragAndDrop:t}=this.beans,i=this.pinned;e.whenReady(this,e=>{let t;const n=e.gridBodyCtrl.eBodyViewport;switch(i){case"left":t=[[n,e.left.eContainer],[e.bottomLeft.eContainer],[e.topLeft.eContainer]];break;case"right":t=[[n,e.right.eContainer],[e.bottomRight.eContainer],[e.topRight.eContainer]];break;default:t=[[n,e.center.eViewport],[e.bottomCenter.eViewport],[e.topCenter.eViewport]]}this.eSecondaryContainers=t}),this.moveColumnFeature=this.createManagedBean(new Ihe(i)),this.bodyDropPivotTarget=this.createManagedBean(new Che(i)),t.addDropTarget(this),this.addDestroyFunc(()=>t.removeDropTarget(this))}isInterestedIn(e){return 1===e||0===e&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.beans.colModel.isPivotMode()&&0===e.dragSource.type}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}};var Nhe={moduleName:"ColumnMove",version:Qoe,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(e,t,i){const n=this.beans.colModel.getCols();if(!n)return;const o=n[e];this.moveColumns([o],t,i)}moveColumns(e,t,i){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const{colModel:o,colAnimation:s,visibleCols:r,eventSvc:a}=this.beans,l=o.getCols();if(!l)return;if(t>l.length-e.length)return void lse(30,{toIndex:t});null===s||void 0===s||s.start();const d=o.getColsForKeys(e);this.doesMovePassRules(d,t)&&(yre(o.getCols(),d,t),r.refresh(i),a.dispatchEvent({type:"columnMoved",columns:d,column:1===d.length?d[0]:null,toIndex:t,finished:n,source:i})),null===s||void 0===s||s.finish()}doesMovePassRules(e,t){const i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){const{colModel:t,gos:i}=this.beans;if(!Yre(e,t.getColTree()))return!1;return!!(e=>{const t=e=>e?"left"===e||!0===e?-1:1:0,n=i.get("enableRtl");let o=n?1:-1,s=!0;for(const i of e){const e=t(i.getColDef().lockPosition);n?e>o&&(s=!1):e<o&&(s=!1),o=e}return s})(e)}getProposedColumnOrder(e,t){const i=this.beans.colModel.getCols().slice();return yre(i,e,t),i}createBodyDropTarget(e,t){return new Lhe(e,t)}moveHeader(e,t,i,n,o){const{ctrlsSvc:s,gos:r,colModel:a,visibleCols:l,focusSvc:d}=this.beans,c=t.getBoundingClientRect(),u=c.left,h=Ude(i),g=h?c.width:i.getActualWidth(),m="left"===e!==r.get("enableRtl"),f=khe({x:m?u-20:u+g+20,pinned:n,fromKeyboard:!0,gos:r,ctrlsSvc:s}),v=d.focusedHeader;let y;if(whe({allMovingColumns:h?i.getLeafColumns():[i],isFromHeader:!0,fromLeft:"right"===e,xPosition:f,pinned:n,fromEnter:!1,fakeEvent:!1,gos:r,colModel:a,colMoves:this,visibleCols:l,finished:!0}),h){const e=i.getDisplayedLeafColumns();y=m?e[0]:pre(e)}else y=i;if(s.getScrollFeature().ensureColumnVisible(y,"auto"),(!o.isAlive()||r.get("ensureDomOrder"))&&v){let e;if(h){const t=i.getGroupId(),n=i.getLeafColumns();if(!n.length)return;const o=n[0].getParent();if(!o)return;e=function(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return}(o,t)}else e=i;e&&d.focusHeaderPosition({headerPosition:p(p({},v),{},{column:e})})}}setDragSourceForHeader(e,t,i){const{gos:n,colModel:o,dragAndDrop:s,visibleCols:r}=this.beans;let a=!n.get("suppressDragLeaveHidesColumns");const l=Ude(t),d=l?t.getProvidedColumnGroup().getLeafColumns():[t],c=l?()=>function(e,t){var i;const n=e.getProvidedColumnGroup().getLeafColumns(),o={};for(const l of n)o[l.getId()]=l.isVisible();const s=[];for(const l of t)n.indexOf(l)>=0&&(s.push(l),fre(n,l));for(const l of n)s.push(l);const r=[],a=e.getLeafColumns();for(const l of s)-1!==a.indexOf(l)&&r.push(l);return{columns:s,columnsInSplit:r,visibleState:o,containerType:null===(i=r[0])||void 0===i?void 0:i.pinned}}(t,r.allCols):()=>function(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t,containerType:e.pinned}}(t),u={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:c,dragItemName:i,onDragStarted:()=>{a=!n.get("suppressDragLeaveHidesColumns"),Dhe(d,!0)},onDragStopped:()=>Dhe(d,!1),onDragCancelled:()=>Dhe(d,!1),onGridEnter:e=>{if(a){const{columns:t=[],visibleState:i}=null!==e&&void 0!==e?e:{},n=l?e=>!i||i[e.getColId()]:()=>!0,s=t.filter(e=>!e.getColDef().lockVisible&&n(e));o.setColsVisible(s,!0,"uiColumnMoved")}},onGridExit:e=>{if(a){var t;const i=(null===e||void 0===e||null===(t=e.columns)||void 0===t?void 0:t.filter(e=>!e.getColDef().lockVisible))||[];o.setColsVisible(i,!1,"uiColumnMoved")}}};return s.addDragSource(u,!0),u}},class extends yoe{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){if(this.active)return;const{gos:e}=this;e.get("suppressColumnMoveAnimation")||e.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount,{gridBodyCtrl:t}=this;t.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&t.setColumnMovingCss(!1)})}flush(e,t){const{executeNextFuncs:i,executeLaterFuncs:n}=this;if(0===i.length&&0===n.length)return e(),void t();const o=e=>{for(;e.length;){const t=e.pop();t&&t()}};this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e(),o(i)},0),window.setTimeout(()=>{t(),o(n)},200)})}}],apiFunctions:{moveColumnByIndex:function(e,t,i){var n;null===(n=e.colMoves)||void 0===n||n.moveColumnByIndex(t,i,"api")},moveColumns:function(e,t,i){var n;null===(n=e.colMoves)||void 0===n||n.moveColumns(t,i,"api")}},dependsOn:[bhe],css:[":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}"]},The={moduleName:"AutoWidth",version:Qoe,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){const i=this.getHeaderCellForColumn(e);if(!i)return-1;const n=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(e);return t||n.push(i),this.getPreferredWidthForElements(n)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.getPreferredWidthForElements([t]):-1}getPreferredWidthForElements(e,t){const i=document.createElement("form");i.style.position="fixed";const n=this.centerRowContainerCtrl.eContainer;for(const s of e)this.cloneItemIntoDummy(s,i);n.appendChild(i);const o=i.offsetWidth;return i.remove(),o+(t=null!==t&&void 0!==t?t:this.gos.get("autoSizePadding"))}getHeaderCellForColumn(e){let t=null;for(const i of this.beans.ctrlsSvc.getHeaderRowContainerCtrls()){const n=i.getHtmlElementForColumnHeader(e);null!=n&&(t=n)}return t}cloneItemIntoDummy(e,t){const i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";const n=document.createElement("div"),o=n.classList;["ag-header-cell","ag-header-group-cell"].some(e=>i.classList.contains(e))?(o.add("ag-header","ag-header-row"),n.style.position="static"):o.add("ag-row");let s=e.parentElement;for(;s;){if(["ag-header-row","ag-row"].some(e=>s.classList.contains(e))){for(let e=0;e<s.classList.length;e++){const t=s.classList[e];"ag-row-position-absolute"!=t&&o.add(t)}break}s=s.parentElement}n.appendChild(i),t.appendChild(n)}}]};var Rhe=class extends yoe{constructor(e,t,i,n){super(),this.comp=e,this.eResize=t,this.pinned=i,this.columnGroup=n}postConstruct(){if(!this.columnGroup.isResizable())return void this.comp.setResizableDisplayed(!1);const{horizontalResizeSvc:e,gos:t,colAutosize:i}=this.beans,n=e.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(n),!t.get("suppressAutoSize")&&i&&this.addDestroyFunc(i.addColumnGroupResize(this.eResize,this.columnGroup,()=>this.resizeLeafColumnsToFit("uiColumnResized")))}onResizeStart(e){const{columnsToResize:t,resizeStartWidth:i,resizeRatios:n,groupAfterColumns:o,groupAfterStartWidth:s,groupAfterRatios:r}=this.getInitialValues(e);this.resizeCols=t,this.resizeStartWidth=i,this.resizeRatios=n,this.resizeTakeFromCols=o,this.resizeTakeFromStartWidth=s,this.resizeTakeFromRatios=r,this.toggleColumnResizing(!0)}onResizing(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"uiColumnResized";const n=this.normaliseDragChange(t),o=this.resizeStartWidth+n;this.resizeColumnsFromLocalValues(o,i,e)}getInitialValues(e){const t=e=>e.reduce((e,t)=>e+t.getActualWidth(),0),i=(e,t)=>e.map(e=>e.getActualWidth()/t),n=this.getColumnsToResize(),o=t(n),s={columnsToResize:n,resizeStartWidth:o,resizeRatios:i(n,o)};let r=null;var a,l;e&&(r=null!==(a=null===(l=this.beans.colGroupSvc)||void 0===l?void 0:l.getGroupAtDirection(this.columnGroup,"After"))&&void 0!==a?a:null);if(r){const e=r.getDisplayedLeafColumns(),n=s.groupAfterColumns=e.filter(e=>e.isResizable()),o=s.groupAfterStartWidth=t(n);s.groupAfterRatios=i(n,o)}else s.groupAfterColumns=void 0,s.groupAfterStartWidth=void 0,s.groupAfterRatios=void 0;return s}resizeLeafColumnsToFit(e){const t=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();t>i.resizeStartWidth&&this.resizeColumns(i,t,e,!0)}resizeColumnsFromLocalValues(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!this.resizeCols||!this.resizeRatios)return;const n={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(n,e,t,i)}resizeColumns(e,t,i){var n;let o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const{columnsToResize:s,resizeStartWidth:r,resizeRatios:a,groupAfterColumns:l,groupAfterStartWidth:d,groupAfterRatios:c}=e,u=[];if(u.push({columns:s,ratios:a,width:t}),l){const e=t-r;u.push({columns:l,ratios:c,width:d-e})}null===(n=this.beans.colResize)||void 0===n||n.resizeColumnSets({resizeSets:u,finished:o,source:i}),o&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.toggleCss("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(e=>e.isResizable())}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?"left"!==this.pinned&&(t*=-1):"right"===this.pinned&&(t*=-1),t}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},Ehe=class extends yoe{constructor(e,t,i,n,o){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=n,this.ctrl=o}postConstruct(){const e=[];let t,i;const n=()=>{if(Mne(this.eResize,t),!t)return;const{horizontalResizeSvc:n,colAutosize:o}=this.beans,s=n.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});e.push(s),i&&o&&e.push(o.addColumnAutosizeListeners(this.eResize,this.column))},o=()=>{for(const t of e)t();e.length=0},s=()=>{const e=this.column.isResizable(),s=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(e!==t||s!==i)&&(t=e,i=s,o(),n())};s(),this.addDestroyFunc(o),this.ctrl.setRefreshFunction("resize",s)}onResizing(e,t){const{column:i,lastResizeAmount:n,resizeStartWidth:o,beans:s}=this,r=this.normaliseResizeAmount(t),a=[{key:i,newWidth:o+r}],{pinnedCols:l,ctrlsSvc:d,colResize:c}=s;if(this.column.getPinned()){var u,h;if((null!==(u=null===l||void 0===l?void 0:l.leftWidth)&&void 0!==u?u:0)+(null!==(h=null===l||void 0===l?void 0:l.rightWidth)&&void 0!==h?h:0)+(r-n)>Nne(d.getGridBodyCtrl().eBodyViewport)-50)return}this.lastResizeAmount=r,null===c||void 0===c||c.setColumnWidths(a,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.column.resizing=e,this.comp.toggleCss("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const i="left"!==this.pinned,n="right"===this.pinned;return this.gos.get("enableRtl")?i&&(t*=-1):n&&(t*=-1),t}};var Phe={moduleName:"ColumnResize",version:Qoe,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(e,t,i,n){const o=[],{colModel:s,gos:r,visibleCols:a}=this.beans;for(const l of e){const e=s.getColDefCol(l.key)||s.getCol(l.key);if(!e)continue;o.push({width:l.newWidth,ratios:[1],columns:[e]});if("shift"===r.get("colResizeDefault")&&(t=!t),t){const t=a.getColAfter(e);if(!t)continue;const i=e.getActualWidth()-l.newWidth,n=t.getActualWidth()+i;o.push({width:n,ratios:[1],columns:[t]})}}0!==o.length&&this.resizeColumnSets({resizeSets:o,finished:i,source:n})}resizeColumnSets(e){const{resizeSets:t,finished:i,source:n}=e,o=!t||t.every(e=>function(e){const{columns:t,width:i}=e;let n=0,o=0,s=!0;for(const l of t){n+=l.getMinWidth()||0;const e=l.getMaxWidth();e>0?o+=e:s=!1}const r=i>=n,a=!s||i<=o;return r&&a}(e));if(!o){if(i){const e=t&&t.length>0?t[0].columns:null;qre(this.eventSvc,e,i,n)}return}const s=[],r=[];for(const u of t){const{width:e,columns:t,ratios:i}=u,o={},a={};for(const n of t)r.push(n);let l=!0,d=0;for(;l;){if(d++,d>1e3){dse(31);break}l=!1;const n=[];let s=0,r=e;t.forEach((e,t)=>{if(a[e.getId()])r-=o[e.getId()];else{n.push(e);const o=i[t];s+=o}});const c=1/s;n.forEach((t,s)=>{let d;s===n.length-1?d=r:(d=Math.round(i[s]*e*c),r-=d);const u=t.getMinWidth(),h=t.getMaxWidth();d<u?(d=u,a[t.getId()]=!0,l=!0):h>0&&d>h&&(d=h,a[t.getId()]=!0,l=!0),o[t.getId()]=d})}for(const r of t){const e=o[r.getId()];r.getActualWidth()!==e&&(r.setActualWidth(e,n),s.push(r))}}const a=s.length>0;let l=[];if(a){var d;const{colFlex:e,visibleCols:t,colViewport:i}=this.beans;l=null!==(d=null===e||void 0===e?void 0:e.refreshFlexedColumns({resizingCols:r,skipSetLeft:!0}))&&void 0!==d?d:[],t.setLeftValues(n),t.updateBodyWidths(),i.checkViewportColumns()}const c=r.concat(l);(a||i)&&qre(this.eventSvc,c,i,n,l)}resizeHeader(e,t,i){if(!e.isResizable())return;const n=e.getActualWidth(),o=e.getMinWidth(),s=e.getMaxWidth(),r=Math.min(Math.max(n+t,o),s);this.setColumnWidths([{key:e,newWidth:r}],i,!0,"uiColumnResized")}createResizeFeature(e,t,i,n,o){return new Ehe(e,t,i,n,o)}createGroupResizeFeature(e,t,i,n){return new Rhe(e,t,i,n)}}],apiFunctions:{setColumnWidths:function(e,t){var i;let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"api";null===(i=e.colResize)||void 0===i||i.setColumnWidths(t,!1,n,o)}},dependsOn:[xhe,The]},Ohe=class extends yoe{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);for(const t of this.columnGroup.getLeafColumns())t.__addEventListener("widthChanged",e),t.__addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.__removeEventListener("widthChanged",e),t.__removeEventListener("visibleChanged",e)})}removeListenersOnChildrenColumns(){for(const e of this.removeChildListenersFuncs)e();this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth("".concat(e,"px")),this.comp.toggleCss("ag-hidden",0===e)}};function Fhe(e,t){for(let i=0;i<t.length;i++){const n=e.indexOf(t[i]);n>=0&&(e[n]=e[e.length-1],e.pop())}}function zhe(e,t,i){if(e)for(let n=0;n<e.length;n++){const o=e[n];if(Ude(o)){zhe(t?o.getDisplayedChildren():o.getChildren(),t,i)}i(o)}}function Bhe(e){const t=[];return zhe(e,!0,e=>{qse(e)&&t.push(e)}),t}var Vhe={moduleName:"ColumnGroup",version:Qoe,dynamicBeans:{headerGroupCellCtrl:class extends Oue{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}wireComp(e,t,i,n,o){const{column:s,beans:r}=this,{context:a,colNames:l,colHover:d,rangeSvc:c,colResize:u}=r;this.comp=e,o=aae(this,a,o),this.setGui(t,o),this.displayName=l.getDisplayNameForColumnGroup(s,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(o),this.setupExpandable(o),this.setupTooltip(),this.refreshAnnouncement(),this.setupAutoHeight({wrapperElement:n,compBean:o}),this.setupUserComp(),this.addHeaderMouseListeners(o,n),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const h=this.rowCtrl.pinned,p=s.getProvidedColumnGroup().getLeafColumns();null===d||void 0===d||d.createHoverFeature(o,p,t),null===c||void 0===c||c.createRangeHighlightFeature(o,s,e),o.createManagedBean(new Rue(s,t,r)),o.createManagedBean(new Ohe(e,s)),u?this.resizeFeature=o.createManagedBean(u.createGroupResizeFeature(e,i,h,s)):e.setResizableDisplayed(!1),o.createManagedBean(new cce(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(o,p),this.addManagedEventListeners({cellSelectionChanged:()=>this.refreshAnnouncement()}),o.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(o),o.addDestroyFunc(()=>this.clearComponent())}getHeaderClassParams(){const{column:e,beans:t}=this,i=e.getDefinition();return Kse(t.gos,{colDef:i,columnGroup:e,floatingFilter:!1})}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,i=e.get("groupHeaderHeight");null!=i?0===i?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(i):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const i of t)e.addManagedListeners(i,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,i)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),i=t[0]===e,n=pre(t)===e;if(!i&&!n)return;const o=e.getHighlighted();let s=!1,r=!1;if(!!this.rowCtrl.getHeaderCellCtrls().find(e=>e.column.isMoving())){const e=this.beans.gos.get("enableRtl"),t=1===o,a=0===o;i&&(e?r=t:s=a),n&&(e?s=a:r=t)}this.comp.toggleCss("ag-header-highlight-before",s),this.comp.toggleCss("ag-header-highlight-after",r)}resizeHeader(e,t){const{resizeFeature:i}=this;if(!i)return;const n=i.getInitialValues(t);i.resizeColumns(n,n.resizeStartWidth+e,"uiColumnResized",!0)}resizeLeafColumnsToFit(e){var t;null===(t=this.resizeFeature)||void 0===t||t.resizeLeafColumnsToFit(e)}setupUserComp(){const{colGroupSvc:e,userCompFactory:t,gos:i,enterpriseMenuFactory:n}=this.beans,o=this.column,s=o.getProvidedColumnGroup(),r=function(e,t){const i=t.columnGroup.getColGroupDef();return e.getCompDetails(i,bae,"agColumnGroupHeader",t)}(t,Kse(i,{displayName:this.displayName,columnGroup:o,setExpanded:t=>{e.setColumnGroupOpened(s,t,"gridInitializing")},setTooltip:(e,t)=>{i.assertModuleRegistered("Tooltip",3),this.setupTooltip(e,t)},showColumnMenu:(e,t)=>null===n||void 0===n?void 0:n.showMenuAfterButtonClick(s,e,"columnMenu",t),showColumnMenuAfterMouseClick:(e,t)=>null===n||void 0===n?void 0:n.showMenuAfterMouseEvent(s,e,"columnMenu",t),eGridHeader:this.eGui}));r&&this.comp.setUserCompDetails(r)}addHeaderMouseListeners(e,t){const{column:i,comp:n,beans:{rangeSvc:o},gos:s}=this,r=e=>this.handleMouseOverChange("mouseenter"===e.type);e.addManagedListeners(this.eGui,{mouseenter:r,mouseleave:r,click:()=>this.dispatchColumnMouseEvent("columnHeaderClicked",i.getProvidedColumnGroup()),contextmenu:e=>this.handleContextMenuMouseEvent(e,void 0,i.getProvidedColumnGroup())}),n.toggleCss("ag-header-group-cell-selectable",Vse(s));const a=null===o||void 0===o?void 0:o.createHeaderGroupCellMouseListenerFeature(this.column,t);a&&this.createManagedBean(a)}handleMouseOverChange(e){this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t){var i;this.tooltipFeature=null===(i=this.beans.tooltipSvc)||void 0===i?void 0:i.setupHeaderGroupTooltip(this.tooltipFeature,this,e,t)}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const i=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:i,expandableChanged:i})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){const{column:e}=this,t=e.getColGroupDef(),i=rue(t,this.gos,null,e);if(e.isPadding()){i.push("ag-header-group-cell-no-group");e.getLeafColumns().every(e=>e.isSpanHeaderHeight())&&i.push("ag-header-span-height")}else i.push("ag-header-group-cell-with-group"),null!==t&&void 0!==t&&t.wrapHeaderText&&i.push("ag-header-cell-wrap-text");for(const n of i)this.comp.toggleCss(n,!0)}setupMovingCss(e){const{column:t}=this,i=t.getProvidedColumnGroup().getLeafColumns(),n=()=>this.comp.toggleCss("ag-header-cell-moving",t.isMoving());for(const o of i)e.addManagedListeners(o,{movingChanged:n});n()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription())}handleKeyDown(e){super.handleKeyDown(e);if(!this.getWrapperHasFocus())return;const{column:t,expandable:i,gos:n,beans:o}=this,s=Vse(n);var r;if(e.key==Eae.ENTER)if(s&&!e.altKey)null===(r=o.rangeSvc)||void 0===r||r.handleColumnSelection(t,e);else if(i){const e=!t.isExpanded();o.colGroupSvc.setColumnGroupOpened(t.getProvidedColumnGroup(),e,"uiColumnExpanded")}}refreshAnnouncement(){let e;const{gos:t,column:i,beans:n}=this;if(Vse(t)){var o;const t=this.getLocaleTextFunc(),s=null===(o=n.rangeSvc)||void 0===o?void 0:o.isColumnInAnyRange(i);e=t("ariaColumnCellSelection","Press CTRL+SPACE to ".concat(s?"de":"","select all visible cells in this column group"))}this.ariaAnnouncement=e}announceAriaDescription(){var e;const{beans:t,eGui:i,ariaAnnouncement:n}=this;n&&i.contains(Uie(t))&&(null===(e=t.ariaAnnounce)||void 0===e||e.announceValue(n,"columnHeader"))}setDragSource(e){var t,i;this.isAlive()&&!this.isSuppressMoving()&&(this.removeDragSource(),e&&(this.dragSource=null!==(t=null===(i=this.beans.colMoves)||void 0===i?void 0:i.setDragSourceForHeader(e,this.column,this.displayName))&&void 0!==t?t:null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some(e=>e.getColDef().suppressMovable||e.getColDef().lockPosition)}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}}},beans:[class extends yoe{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){const e=[];return Kre(null,this.beans.colModel.getColTree(),t=>{lre(t)&&e.push({groupId:t.getGroupId(),open:t.isExpanded()})}),e}resetColumnGroupState(e){const t=this.beans.colModel.getColDefColTree();if(!t)return;const i=[];Kre(null,t,e=>{if(lre(e)){const t=e.getColGroupDef(),n={groupId:e.getGroupId(),open:t?t.openByDefault:void 0};i.push(n)}}),this.setColumnGroupState(i,e)}setColumnGroupState(e,t){const{colModel:i,colAnimation:n,visibleCols:o,eventSvc:s}=this.beans;if(!i.getColTree().length)return;null===n||void 0===n||n.start();const r=[];for(const a of e){const e=a.groupId,t=a.open,i=this.getProvidedColGroup(e);i&&(i.isExpanded()!==t&&(i.setExpanded(t),r.push(i)))}o.refresh(t,!0),r.length&&s.dispatchEvent({type:"columnGroupOpened",columnGroup:1===r.length?r[0]:void 0,columnGroups:r}),null===n||void 0===n||n.finish()}setColumnGroupOpened(e,t,i){let n;n=lre(e)?e.getId():e||"",this.setColumnGroupState([{groupId:n,open:t}],i)}getProvidedColGroup(e){let t=null;return Kre(null,this.beans.colModel.getColTree(),i=>{lre(i)&&i.getId()===e&&(t=i)}),t}getGroupAtDirection(e,t){const i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),n=e.getDisplayedLeafColumns(),o="After"===t?pre(n):n[0],s="getCol".concat(t);for(;;){const t=this.beans.visibleCols[s](o);if(!t)return null;const n=this.getColGroupAtLevel(t,i);if(n!==e)return n}}getColGroupAtLevel(e,t){let i,n,o=e.getParent();for(;;){if(i=o.getProvidedColumnGroup().getLevel(),n=o.getPaddingLevel(),i+n<=t)break;o=o.getParent()}return o}updateOpenClosedVisibility(){zhe(this.beans.visibleCols.getAllTrees(),!1,e=>{Ude(e)&&e.calculateDisplayedColumns()})}getColumnGroup(e,t){if(!e)return null;if(Ude(e))return e;const i=this.beans.visibleCols.getAllTrees(),n="number"===typeof t;let o=null;return zhe(i,!1,i=>{if(Ude(i)){const s=i;let r;r=n?e===s.getGroupId()&&t===s.getPartId():e===s.getGroupId(),r&&(o=s)}}),o}createColumnGroups(e){const{columns:t,idCreator:i,pinned:n,oldDisplayedGroups:o,isStandaloneStructure:s}=e,r=this.mapOldGroupsById(o),a=[];let l=t;for(;l.length;){const e=l;l=[];let t=0;const o=o=>{const d=t;t=o;const c=e[d],u=(Ude(c)?c.getProvidedColumnGroup():c).getOriginalParent();if(null==u){for(let t=d;t<o;t++)a.push(e[t]);return}const h=this.createColumnGroup(u,i,r,n,s);for(let t=d;t<o;t++)h.addChild(e[t]);l.push(h)};for(let i=1;i<e.length;i++){const n=e[i],s=(Ude(n)?n.getProvidedColumnGroup():n).getOriginalParent(),r=e[t];s!==(Ude(r)?r.getProvidedColumnGroup():r).getOriginalParent()&&o(i)}t<e.length&&o(e.length)}return s||this.setupParentsIntoCols(a,null),a}createProvidedColumnGroup(e,t,i,n,o,s,r){const a=o.getUniqueKey(t.groupId||null,null),l=ure(this.beans,t,a),d=new dre(l,a,!1,i);this.createBean(d);const c=this.findExistingGroup(t,s);c&&s.splice(c.idx,1);const u=null===c||void 0===c?void 0:c.group;u&&d.setExpanded(u.isExpanded());const h=Vre(this.beans,l.children,i+1,e,n,o,s,r);return d.setChildren(h),d}balanceColumnTree(e,t,i,n){const o=[];for(let s=0;s<e.length;s++){const r=e[s];if(lre(r)){const e=r,s=this.balanceColumnTree(e.getChildren(),t+1,i,n);e.setChildren(s),o.push(e)}else{let s,a;for(let e=t;e<i;e++){const t=n.getUniqueKey(null,null),i=ure(this.beans,null,t),o=new dre(i,t,!0,e);this.createBean(o),a&&a.setChildren([o]),a=o,s||(s=a)}if(s&&a){o.push(s);if(e.some(e=>lre(e))){a.setChildren([r]);continue}a.setChildren(e);break}o.push(r)}}return o}findDepth(e){let t=0,i=e;for(;null!==(n=i)&&void 0!==n&&n[0]&&lre(i[0]);){var n;t++,i=i[0].getChildren()}return t}findMaxDepth(e,t){let i=t;for(let n=0;n<e.length;n++){const o=e[n];if(lre(o)){const e=o,n=this.findMaxDepth(e.getChildren(),t+1);i<n&&(i=n)}}return i}balanceTreeForAutoCols(e,t){const i=[];for(const n of e){let e=n;for(let i=t-1;i>=0;i--){const t=new dre(null,"FAKE_PATH_".concat(n.getId(),"}_").concat(i),!0,i);this.createBean(t),t.setChildren([e]),e.originalParent=t,e=t}0===t&&(n.originalParent=null),i.push(e)}return i}findExistingGroup(e,t){if(null!=e.groupId)for(let i=0;i<t.length;i++){const n=t[i];if(n.getColGroupDef()&&n.getId()===e.groupId)return{idx:i,group:n}}}createColumnGroup(e,t,i,n,o){const s=e.getGroupId(),r=t.getInstanceIdForKey(s);let a=i[Kde(s,r)];return a&&a.getProvidedColumnGroup()!==e&&(a=null),Fie(a)?a.reset():(a=new Yde(e,s,r,n),o||this.createBean(a)),a}mapOldGroupsById(e){const t={},i=e=>{for(const n of e)if(Ude(n)){const e=n;t[n.getUniqueId()]=e,i(e.getChildren())}};return e&&i(e),t}setupParentsIntoCols(e,t){for(const i of null!==e&&void 0!==e?e:[])if(i.parent!==t&&(this.beans.colViewport.colsWithinViewportHash=""),i.parent=t,Ude(i)){const e=i;this.setupParentsIntoCols(e.getChildren(),e)}}}],apiFunctions:{getAllDisplayedColumnGroups:function(e){return e.visibleCols.getAllTrees()},getCenterDisplayedColumnGroups:function(e){return e.visibleCols.treeCenter},getColumnGroup:function(e,t,i){var n,o;return null!==(n=null===(o=e.colGroupSvc)||void 0===o?void 0:o.getColumnGroup(t,i))&&void 0!==n?n:null},getColumnGroupState:function(e){var t,i;return null!==(t=null===(i=e.colGroupSvc)||void 0===i?void 0:i.getColumnGroupState())&&void 0!==t?t:[]},getDisplayNameForColumnGroup:function(e,t,i){return e.colNames.getDisplayNameForColumnGroup(t,i)||""},getLeftDisplayedColumnGroups:function(e){return e.visibleCols.treeLeft},getProvidedColumnGroup:function(e,t){var i,n;return null!==(i=null===(n=e.colGroupSvc)||void 0===n?void 0:n.getProvidedColGroup(t))&&void 0!==i?i:null},getRightDisplayedColumnGroups:function(e){return e.visibleCols.treeRight},resetColumnGroupState:function(e){var t;null===(t=e.colGroupSvc)||void 0===t||t.resetColumnGroupState("api")},setColumnGroupOpened:function(e,t,i){var n;null===(n=e.colGroupSvc)||void 0===n||n.setColumnGroupOpened(t,i,"api")},setColumnGroupState:function(e,t){var i;null===(i=e.colGroupSvc)||void 0===i||i.setColumnGroupState(t,"api")}}},Ghe={tag:"div",cls:"ag-skeleton-container"},Hhe={moduleName:"CheckboxCellRenderer",version:Qoe,userComponents:{agCheckboxCellRenderer:class extends hae{constructor(){super(Xue,[Rle]),this.eCheckbox=lae,this.registerCSS(".ag-checkbox-cell{height:100%}")}init(e){this.refresh(e);const{eCheckbox:t,beans:i}=this,n=t.getInputElement();n.setAttribute("tabindex","-1"),one(n,"polite"),this.addManagedListeners(n,{click:e=>{if(ace(e),t.isDisabled())return;const i=t.getValue();this.onCheckboxChanged(i)},dblclick:e=>{ace(e)}}),this.addManagedElementListeners(e.eGridCell,{keydown:n=>{if(n.key===Eae.SPACE&&!t.isDisabled()){e.eGridCell===Uie(i)&&t.toggle();const o=t.getValue();this.onCheckboxChanged(o),n.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){var t;let i,n=!0;const{value:o,column:s,node:r}=e;if(r.group&&s)if("boolean"===typeof o)i=o;else{const e=s.getColId();e.startsWith(bre)?i=null==o||""===o?void 0:"true"===o:r.aggData&&void 0!==r.aggData[e]||r.sourceRowIndex>=0?i=null!==o&&void 0!==o?o:void 0:n=!1}else i=null!==o&&void 0!==o?o:void 0;const{eCheckbox:a}=this;if(!n)return void a.setDisplayed(!1);a.setValue(i);const l=null!==(t=e.disabled)&&void 0!==t?t:!(null!==s&&void 0!==s&&s.isCellEditable(r));a.setDisabled(l);const d=this.getLocaleTextFunc(),c=Cne(d,i),u=l?c:"".concat(d("ariaToggleCellValue","Press SPACE to toggle cell value")," (").concat(c,")");a.setInputAriaLabel(u)}onCheckboxChanged(e){const{params:t}=this,{column:i,node:n,value:o}=t,{editSvc:s}=this.beans;if(!i)return;const r={rowNode:n,column:i};null===s||void 0===s||s.dispatchCellEvent(r,null,"cellEditingStarted",{value:o});const a=n.setDataValue(i,e,"ui");null===s||void 0===s||s.dispatchCellEvent(r,null,"cellEditingStopped",{oldValue:o,newValue:e,valueChanged:a}),a||this.updateCheckbox(t)}}}},jhe={moduleName:"SkeletonCellRenderer",version:Qoe,userComponents:{agSkeletonCellRenderer:class extends hae{constructor(){super(Ghe)}init(e){const t="ag-cell-skeleton-renderer-".concat(this.getCompId());this.getGui().setAttribute("id",t),this.addDestroyFunc(()=>nne(e.eParentOfValue)),nne(e.eParentOfValue,t),e.deferRender?this.setupLoading(e):e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){const e=this.getLocaleTextFunc();this.getGui().textContent=e("loadingError","ERR");const t=e("ariaSkeletonCellLoadingFailed","Row failed to load");ine(this.getGui(),t)}setupLoading(e){const t=oce({tag:"div",cls:"ag-skeleton-effect"}),i=e.node.rowIndex;if(null!=i){const e=75+25*(i%2===0?Math.sin(i):Math.cos(i));t.style.width="".concat(e,"%")}this.getGui().appendChild(t);const n=this.getLocaleTextFunc(),o=e.deferRender?n("ariaDeferSkeletonCellLoading","Cell is loading"):n("ariaSkeletonCellLoading","Row data is loading");ine(this.getGui(),o)}refresh(e){return!1}}}};function Whe(e,t,i){if(!t||!e)return;if(!i)return e[t];const n=t.split(".");let o=e;for(let s=0;s<n.length;s++){if(null==o)return;o=o[n[s]]}return o}var _he=["dateTimeString","dateString","text","number","boolean","date"];function Khe(e,t){const i=p(p({},e),t);return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...Lre(e.columnTypes),...Lre(t.columnTypes)]),i}function Uhe(e,t,i){return t?t.baseDataType===e.baseDataType||(lse(46),!1):(lse(45,{parentCellDataType:i}),!1)}function Yhe(e,t){if(e.valueFormatter)return i=>{var n;if(null!==(n=i.node)&&void 0!==n&&n.group){var o;const t=(null!==(o=i.colDef.pivotValueColumn)&&void 0!==o?o:i.column).getAggFunc();if(t){if("first"===t||"last"===t)return e.valueFormatter(i);if("number"===e.baseDataType&&"count"!==t){if("number"===typeof i.value)return e.valueFormatter(i);if("object"===typeof i.value){if(!i.value)return;if("toNumber"in i.value)return e.valueFormatter(p(p({},i),{},{value:i.value.toNumber()}));if("value"in i.value)return e.valueFormatter(p(p({},i),{},{value:i.value.value}))}}return}}else if(t.get("groupHideOpenParents")&&i.column.isRowGroupActive()){var s;if("string"===typeof i.value&&(null===(s=e.dataTypeMatcher)||void 0===s||!s.call(e,i.value)))return}return e.valueFormatter(i)}}function $he(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(i=>{let[n,o]=i;return function(e,t,i,n){if(!t[i])return!1;const o=e[i];return null===o?(t[i]=!1,!1):void 0===n?!!o:o===n}(e,t,n,o)})}function Zhe(e,t){const i=iae(e);for(const n of t)delete i[n],"rowGroup"===n?delete i.rowGroupIndex:"pivot"===n&&delete i.pivotIndex;return i}var Xhe={moduleName:"DataType",version:Qoe,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[],this.columnDefinitionPropsPerDataType={number:()=>({cellEditor:"agNumberCellEditor"}),boolean:()=>({cellEditor:"agCheckboxCellEditor",cellRenderer:"agCheckboxCellRenderer",getFindText:()=>null,suppressKeyboardEvent:e=>!!e.colDef.editable&&e.event.key===Eae.SPACE}),date(e){let{formatValue:t}=e;return{cellEditor:"agDateCellEditor",keyCreator:t}},dateString(e){let{formatValue:t}=e;return{cellEditor:"agDateStringCellEditor",keyCreator:t}},dateTime(e){return this.date(e)},dateTimeString(e){return this.dateString(e)},object(e){let{formatValue:t,colModel:i,colId:n}=e;return{cellEditorParams:{useFormatter:!0},comparator:(e,o)=>{const s=i.getColDefCol(n),r=null===s||void 0===s?void 0:s.getColDef();if(!s||!r)return 0;const a=null==e?"":t({column:s,node:null,value:e}),l=null==o?"":t({column:s,node:null,value:o});return a===l?0:a>l?1:-1},keyCreator:t}},text:()=>({})}}wireBeans(e){this.colModel=e.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(e)})}processDataTypeDefinitions(){var e;const t=this.getDefaultDataTypes(),i={},n={},o=e=>t=>{const{column:i,node:n,value:o}=t;let s=i.getColDef().valueFormatter;return s===e.groupSafeValueFormatter&&(s=e.valueFormatter),this.beans.valueSvc.formatValue(i,n,o,s)};for(const u of Object.keys(t)){const e=t[u],s=p(p({},e),{},{groupSafeValueFormatter:Yhe(e,this.gos)});i[u]=s,n[u]=o(s)}const s=null!==(e=this.gos.get("dataTypeDefinitions"))&&void 0!==e?e:{},r={};for(const u of Object.keys(s)){const e=s[u],a=this.processDataTypeDefinition(e,s,[u],t);a&&(i[u]=a,e.dataTypeMatcher&&(r[u]=e.dataTypeMatcher),n[u]=o(a))}const{valueParser:a,valueFormatter:l}=t.object,{valueParser:d,valueFormatter:c}=i.object;this.hasObjectValueParser=d!==a,this.hasObjectValueFormatter=c!==l,this.formatValueFuncs=n,this.dataTypeDefinitions=i,this.dataTypeMatchers=this.sortKeysInMatchers(r,t)}sortKeysInMatchers(e,t){const i=p({},e);for(const o of _he){var n;delete i[o],i[o]=null!==(n=e[o])&&void 0!==n?n:t[o].dataTypeMatcher}return i}processDataTypeDefinition(e,t,i,n){let o;const s=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let i=n[s];const r=t[s];if(i&&r&&(i=r),!Uhe(e,i,s))return;o=Khe(i,e)}else{if(i.includes(s))return void lse(44);const r=t[s];if(!Uhe(e,r,s))return;const a=this.processDataTypeDefinition(r,t,[...i,s],n);if(!a)return;o=Khe(a,e)}return p(p({},o),{},{groupSafeValueFormatter:Yhe(o,this.gos)})}updateColDefAndGetColumnType(e,t,i){let{cellDataType:n}=t;const{field:o}=t;if(void 0===n&&(n=e.cellDataType),null!=n&&!0!==n||(n=!!this.canInferCellDataType(e,t)&&this.inferCellDataType(o,i)),!n)return void(e.cellDataType=!1);const s=this.dataTypeDefinitions[n];if(s)return e.cellDataType=n,s.groupSafeValueFormatter&&(e.valueFormatter=s.groupSafeValueFormatter),s.valueParser&&(e.valueParser=s.valueParser),s.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,n,s,i),s.columnTypes;lse(47,{cellDataType:n})}addColumnListeners(e){if(!this.isPendingInference)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const i=e=>{t.add(e.key)};e.__addEventListener("columnStateUpdated",i),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.__removeEventListener("columnStateUpdated",i))}canInferCellDataType(e,t){const{gos:i}=this;if(!gse(i))return!1;const n={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if($he(t,n))return!1;const o=null===t.type?e.type:t.type;if(o){var s;const e=null!==(s=i.get("columnTypes"))&&void 0!==s?s:{};if(Lre(o).some(t=>{const i=e[t.trim()];return i&&$he(i,n)}))return!1}return!$he(e,n)}inferCellDataType(e,t){if(!e)return;let i;const n=this.getInitialData();if(n){const t=e.includes(".")&&!this.gos.get("suppressFieldDotNotation");i=Whe(n,e,t)}else this.initWaitForRowData(t);if(null==i)return;const o=Object.keys(this.dataTypeMatchers).find(e=>this.dataTypeMatchers[e](i));return null!==o&&void 0!==o?o:"object"}getInitialData(){const e=this.gos.get("rowData");if(null!==e&&void 0!==e&&e.length)return e[0];if(this.initialData)return this.initialData;{var t;const e=null===(t=this.beans.rowModel.rootNode)||void 0===t?void 0:t._leafs;if(null!==e&&void 0!==e&&e.length)return e[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isPendingInference)return;this.isPendingInference=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:i,eventSvc:n}=this.beans;t&&i&&(i.shouldQueueResizeOperations=!0);const[o]=this.addManagedEventListeners({rowDataUpdateStarted:e=>{const{firstRowData:s}=e;s&&(null===o||void 0===o||o(),this.isPendingInference=!1,this.processColumnsPendingInference(s,t),this.columnStateUpdatesPendingInference={},t&&(null===i||void 0===i||i.processResizeOperations()),n.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(e,t){this.initialData=e;const i=[];this.destroyColumnStateUpdateListeners();const n={},o={};for(const s of Object.keys(this.columnStateUpdatesPendingInference)){const e=this.columnStateUpdatesPendingInference[s],r=this.colModel.getCol(s);if(!r)return;const a=r.getColDef();if(!this.resetColDefIntoCol(r,"cellDataTypeInferred"))return;const l=r.getColDef();if(t&&l.type&&l.type!==a.type){const t=Zhe(r,e);t.rowGroup&&null==t.rowGroupIndex&&(n[s]=t),t.pivot&&null==t.pivotIndex&&(o[s]=t),i.push(t)}}t&&i.push(...this.generateColumnStateForRowGroupAndPivotIndexes(n,o)),i.length&&Qre(this.beans,{state:i},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(e,t){const i={},{rowGroupColsSvc:n,pivotColsSvc:o}=this.beans;return null===n||void 0===n||n.restoreColumnOrder(i,e),null===o||void 0===o||o.restoreColumnOrder(i,t),Object.values(i)}resetColDefIntoCol(e,t){const i=e.getUserProvidedColDef();if(!i)return!1;const n=Wre(this.beans,i,e.getColId());return e.setColDef(n,i,t),!0}getDateStringTypeDefinition(e){var t;const{dateString:i}=this.dataTypeDefinitions;return e&&null!==(t=this.getDataTypeDefinition(e))&&void 0!==t?t:i}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDateIncludesTimeFlag(e){return"dateTime"===e||"dateTimeString"===e}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){var t;return null===(t=this.getDataTypeDefinition(e))||void 0===t?void 0:t.baseDataType}checkType(e,t){var i,n;if(null==t)return!0;const o=null===(i=this.getDataTypeDefinition(e))||void 0===i?void 0:i.dataTypeMatcher;return!o||(!(!e.getColDef().allowFormula||null===(n=this.beans.formula)||void 0===n||!n.isFormula(t))||o(t))}validateColDef(e){const t=e=>lse(48,{property:e});if("object"===e.cellDataType){const{object:i}=this.dataTypeDefinitions;e.valueFormatter!==i.groupSafeValueFormatter||this.hasObjectValueFormatter||t("Formatter"),e.editable&&e.valueParser===i.valueParser&&!this.hasObjectValueParser&&t("Parser")}}postProcess(e){var t;const i=e.cellDataType;if(!i||"string"!==typeof i)return;const{dataTypeDefinitions:n,beans:o,formatValueFuncs:s}=this,r=n[i];r&&(null===(t=o.colFilter)||void 0===t||t.setColDefPropsForDataType(e,r,s[i]))}getFormatValue(e){return this.formatValueFuncs[e]}isColPendingInference(e){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[e]}setColDefPropertiesForBaseDataType(e,t,i,n){const o=this.formatValueFuncs[t],s=this.columnDefinitionPropsPerDataType[i.baseDataType]({colDef:e,cellDataType:t,colModel:this.colModel,dataTypeDefinition:i,colId:n,formatValue:o});Object.assign(e,s)}getDateObjectTypeDef(e){const t=this.getLocaleTextFunc(),i=this.getDateIncludesTimeFlag(e);return{baseDataType:e,valueParser:e=>Sle(e.newValue&&String(e.newValue)),valueFormatter:e=>{var n;return null==e.value?"":e.value instanceof Date&&!isNaN(e.value.getTime())?null!==(n=yle(e.value,i))&&void 0!==n?n:"":t("invalidDate","Invalid Date")},dataTypeMatcher:e=>e instanceof Date}}getDateStringTypeDef(e){const t=this.getDateIncludesTimeFlag(e);return{baseDataType:e,dateParser:e=>{var t;return null!==(t=Sle(e))&&void 0!==t?t:void 0},dateFormatter:e=>{var i;return null!==(i=yle(null!==e&&void 0!==e?e:null,t))&&void 0!==i?i:void 0},valueParser:e=>Cle(String(e.newValue))?e.newValue:null,valueFormatter:e=>Cle(String(e.value))?String(e.value):"",dataTypeMatcher:e=>"string"===typeof e&&Cle(e)}}getDefaultDataTypes(){const e=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:e=>{var t,i;return""===(null===(t=e.newValue)||void 0===t||null===(i=t.trim)||void 0===i?void 0:i.call(t))?null:Number(e.newValue)},valueFormatter:t=>null==t.value?"":"number"!==typeof t.value||isNaN(t.value)?e("invalidNumber","Invalid Number"):String(t.value),dataTypeMatcher:e=>"number"===typeof e},text:{baseDataType:"text",valueParser:e=>""===e.newValue?null:Bie(e.newValue),dataTypeMatcher:e=>"string"===typeof e},boolean:{baseDataType:"boolean",valueParser:e=>{var t,i;return null==e.newValue?e.newValue:""===(null===(t=e.newValue)||void 0===t||null===(i=t.trim)||void 0===i?void 0:i.call(t))?null:"true"===String(e.newValue).toLowerCase()},valueFormatter:e=>null==e.value?"":String(e.value),dataTypeMatcher:e=>"boolean"===typeof e},date:this.getDateObjectTypeDef("date"),dateString:this.getDateStringTypeDef("dateString"),dateTime:this.getDateObjectTypeDef("dateTime"),dateTimeString:p(p({},this.getDateStringTypeDef("dateTimeString")),{},{dataTypeMatcher:e=>"string"===typeof e&&function(e){return Cle(e,!0)}(e)}),object:{baseDataType:"object",valueParser:()=>null,valueFormatter:e=>{var t;return null!==(t=Bie(e.value))&&void 0!==t?t:""}}}}destroyColumnStateUpdateListeners(){for(const e of this.columnStateUpdateListenerDestroyFuncs)e();this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}}],dependsOn:[Hhe]},qhe={moduleName:"ColumnFlex",version:Qoe,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="colFlex",this.columnsHidden=!1}refreshFlexedColumns(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=null!==(e=t.source)&&void 0!==e?e:"flex";null!=t.viewportWidth&&(this.flexViewportWidth=t.viewportWidth);const n=this.flexViewportWidth,{visibleCols:o,colDelayRenderSvc:s}=this.beans,r=o.centerCols;let a=-1;if(t.resizingCols){const e=new Set(t.resizingCols);for(let t=r.length-1;t>=0;t--)if(e.has(r[t])){a=t;break}}let l=!1;const d=r.map((e,t)=>{const i=e.getFlex(),n=null!=i&&i>0&&t>a;return l||(l=n),{col:e,isFlex:n,flex:Math.max(0,null!==i&&void 0!==i?i:0),initialSize:e.getActualWidth(),min:e.getMinWidth(),max:e.getMaxWidth(),targetSize:0}});if(l?(null===s||void 0===s||s.hideColumns("colFlex"),this.columnsHidden=!0):this.columnsHidden&&this.revealColumns(s),!n||!l)return[];let c=d.length,u=d.reduce((e,t)=>e+t.flex,0),h=n;const p=(e,t)=>{e.frozenSize=t,e.col.setActualWidth(t,i),h-=t,u-=e.flex,c-=1},g=e=>null!=e.frozenSize;for(const f of d)f.isFlex||p(f,f.initialSize);for(;c>0;){const e=Math.round(u<1?h*u:h);let t,i=0,n=0;for(const r of d){if(g(r))continue;t=r,n+=e*(r.flex/u);const o=n-i,s=Math.round(o);r.targetSize=s,i+=s}t&&(t.targetSize+=e-i);let o=0;for(const r of d){if(g(r))continue;const e=r.targetSize,t=Math.min(Math.max(e,r.min),r.max);o+=t-e,r.violationType=t===e?void 0:t<e?"max":"min",r.targetSize=t}const s=0===o?"all":o>0?"min":"max";for(const r of d)g(r)||"all"!==s&&r.violationType!==s||p(r,r.targetSize)}t.skipSetLeft||o.setLeftValues(i),t.updateBodyWidths&&o.updateBodyWidths();const m=d.filter(e=>e.isFlex&&!e.violationType).map(e=>e.col);if(t.fireResizedEvent){const e=d.filter(e=>e.initialSize!==e.frozenSize).map(e=>e.col),t=d.filter(e=>e.flex).map(e=>e.col);qre(this.eventSvc,e,!0,i,t)}return this.revealColumns(s),m}revealColumns(e){this.columnsHidden&&(null===e||void 0===e||e.revealColumns("colFlex"),this.columnsHidden=!1)}initCol(e){const{flex:t,initialFlex:i}=e.colDef;void 0!==t?e.flex=t:void 0!==i&&(e.flex=i)}setColFlex(e,t){e.flex=null!==t&&void 0!==t?t:null,e.dispatchStateUpdatedEvent("flex")}}]};var Qhe,Jhe={moduleName:"CellRendererFunction",version:Qoe,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(e,t){if(!e.cellRenderer)return null;return class{refresh(){return!1}getGui(){return this.eGui}init(e){const i=t(e),n=typeof i;this.eGui="string"!==n&&"number"!==n&&"boolean"!==n?null!=i?i:oce({tag:"span"}):Gne("<span>"+i+"</span>")}}}}]},epe={wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:Ule,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},cellFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:$le,rangeSelectionBackgroundColor:Wle(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:Wle(.5),rangeHeaderHighlightColor:(Qhe=.08,{ref:"foregroundColor",mix:Qhe,onto:"headerBackgroundColor"}),rowNumbersSelectedColor:Wle(.5),rowHoverColor:Wle(.08),columnHoverColor:Wle(.05),selectedRowBackgroundColor:Wle(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},dataBackgroundColor:Ule,oddRowBackgroundColor:{ref:"dataBackgroundColor"},wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,paginationPanelHeight:{ref:"rowHeight",calc:"max(rowHeight, 22px)"},dragHandleColor:_le(.7),headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:_le(.1),iconButtonActiveColor:$le,iconButtonActiveBackgroundColor:Wle(.28),iconButtonActiveIndicatorColor:$le,menuBorder:{color:_le(.2)},menuBackgroundColor:Kle(.03),menuTextColor:Kle(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:_le(.8),dialogShadow:{ref:"popupShadow"},cellEditingBorder:{color:$le},cellEditingShadow:{ref:"cardShadow"},fullRowEditInvalidBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.25},dialogBorder:{color:_le(.2)},panelBackgroundColor:Ule,panelTitleBarHeight:{ref:"headerHeight"},panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,columnDropCellBackgroundColor:_le(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:_le(.13)},selectCellBackgroundColor:_le(.07),selectCellBorder:{color:_le(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterPanelApplyButtonColor:Ule,filterPanelApplyButtonBackgroundColor:$le,filterPanelCardSubtleColor:{ref:"textColor",mix:.7},filterPanelCardSubtleHoverColor:{ref:"textColor"},findMatchColor:Yle,findMatchBackgroundColor:"#ffff00",findActiveMatchColor:Yle,findActiveMatchBackgroundColor:"#ffa500",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:_le(.15),statusBarLabelColor:Yle,statusBarLabelFontWeight:500,statusBarValueColor:Yle,statusBarValueFontWeight:500,pinnedSourceRowTextColor:{ref:"textColor"},pinnedSourceRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedSourceRowFontWeight:600,pinnedRowFontWeight:600,pinnedRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedRowTextColor:{ref:"textColor"},rowDragIndicatorColor:{ref:"rangeSelectionBorderColor"},rowDragIndicatorWidth:2,columnDragIndicatorColor:{ref:"accentColor"},columnDragIndicatorWidth:2},tpe={cellBatchEditBackgroundColor:"rgba(220 181 139 / 16%)",cellBatchEditTextColor:"#422f00",rowBatchEditBackgroundColor:{ref:"cellBatchEditBackgroundColor"},rowBatchEditTextColor:{ref:"cellBatchEditTextColor"}},ipe=p(p({},tpe),{},{cellBatchEditTextColor:"#f3d0b3"}),npe=(()=>zle({feature:"batchEditStyle",params:tpe,css:".ag-cell-batch-edit{background-color:var(--ag-cell-batch-edit-background-color);color:var(--ag-cell-batch-edit-text-color);display:inherit}.ag-row-batch-edit{background-color:var(--ag-row-batch-edit-background-color);color:var(--ag-row-batch-edit-text-color)}"}))(),ope=":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}",spe={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}},rpe=(()=>zle({feature:"buttonStyle",params:p(p({},spe),{},{buttonBackgroundColor:Ule,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:$le}}),css:ope}))(),ape=(()=>zle({feature:"buttonStyle",params:p(p({},spe),{},{buttonBackgroundColor:Ule,buttonBorder:{color:$le},buttonFontWeight:600,buttonTextColor:$le,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBackgroundColor:$le,buttonActiveTextColor:Ule}),css:ope}))(),lpe=(()=>zle({feature:"columnDropStyle",css:".ag-column-drop-vertical-empty-message{align-items:center;border:dashed var(--ag-border-width);border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}"}))(),dpe={warn:function(){lse(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])},error:function(){dse(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])},preInitErr:function(){cse(arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=1?void 0:arguments[1])}},cpe=()=>{return(e=dpe,new cde(e)).withParams(epe).withPart(rpe).withPart(lpe).withPart(npe);var e},upe=(()=>zle({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:Ule,checkboxUncheckedBorderColor:Kle(.3),checkboxCheckedBackgroundColor:$le,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:Ule,checkboxIndeterminateBackgroundColor:Kle(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:Ule,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:'.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-cell-editing-error .ag-checkbox-input-wrapper:focus-within{box-shadow:var(--ag-focus-error-shadow)}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}'}))(),hpe=()=>p(p(p({},Zle),ipe),{},{backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:Kle(.05),rowHoverColor:Wle(.15),selectedRowBackgroundColor:Wle(.2),menuBackgroundColor:Kle(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",filterPanelApplyButtonColor:Yle,findMatchColor:Ule,findActiveMatchColor:Ule,checkboxUncheckedBorderColor:Kle(.4),toggleButtonOffBackgroundColor:Kle(.4),rowBatchEditBackgroundColor:Kle(.1)}),ppe=()=>p(p({},hpe()),{},{backgroundColor:"#1f2836"}),gpe=(()=>zle({feature:"colorScheme",params:Zle,modeParams:{light:Zle,dark:hpe(),"dark-blue":ppe()}}))(),mpe=zle({feature:"iconSet",css:".ag-icon-aggregation:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M24 6H8v2l8 8-8 8v2h16v-2H11l8-8-8-8h13z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-arrows:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.515 11.171 2.687 16l4.828 4.829-1.414 1.414L-.142 16l6.243-6.243zm16.97 0 1.414-1.414L32.142 16l-6.243 6.243-1.414-1.414L29.313 16zM16.028 13.2l2.829 2.828-2.829 2.829-2.828-2.829zm-4.857 11.285L16 29.313l4.829-4.828 1.414 1.414L16 32.142l-6.243-6.243zm0-16.97L9.757 6.101 16-.142l6.243 6.243-1.414 1.414L16 2.687z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-asc:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333 5.332 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-aasc:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='%23000' d='M13.201 8.08q.65 0 1.135.222.487.222.759.618.27.396.279.919H14.19a.72.72 0 0 0-.293-.536q-.26-.191-.705-.192-.302.001-.51.086a.7.7 0 0 0-.32.23.56.56 0 0 0-.108.338.5.5 0 0 0 .065.273.7.7 0 0 0 .204.203q.127.083.295.146.168.06.36.102l.525.125q.382.086.701.229.32.143.554.35.234.21.362.49.131.284.134.648a1.6 1.6 0 0 1-.273.93q-.27.391-.777.608-.504.214-1.217.214-.708 0-1.232-.217a1.8 1.8 0 0 1-.816-.642q-.29-.428-.305-1.058h1.194q.02.294.17.49.15.195.402.294.253.097.573.097.313 0 .544-.09a.84.84 0 0 0 .362-.255.6.6 0 0 0 .129-.374q0-.195-.117-.33a.9.9 0 0 0-.337-.228 3.4 3.4 0 0 0-.54-.171l-.635-.16q-.738-.18-1.166-.562t-.426-1.03a1.53 1.53 0 0 1 .284-.927q.287-.396.79-.618a2.8 2.8 0 0 1 1.14-.223'/%3E%3Cpath fill='%23000' fill-rule='evenodd' d='M5.813 14H4.489l-.432-1.332H1.948L1.515 14H.19l2.017-5.84h1.592zm-3.551-2.296h1.481l-.718-2.21H2.98zM8.452 8.16q.645 0 1.075.19.43.191.648.531a1.4 1.4 0 0 1 .217.775q0 .343-.137.602-.137.256-.376.422a1.6 1.6 0 0 1-.542.231v.057q.333.015.624.188.294.175.476.489.183.31.183.74 0 .466-.231.831a1.56 1.56 0 0 1-.676.573Q9.265 14 8.609 14H6.114V8.16zM7.35 12.99h1.006q.517 0 .753-.196a.66.66 0 0 0 .237-.531.8.8 0 0 0-.116-.428.8.8 0 0 0-.334-.29 1.15 1.15 0 0 0-.511-.106H7.349zm0-2.386h.916q.254 0 .45-.09a.75.75 0 0 0 .313-.256.67.67 0 0 0 .118-.396.64.64 0 0 0-.226-.511q-.223-.195-.633-.194H7.35z' clip-rule='evenodd'/%3E%3Cpath fill='%23000' d='M7.166.377a.75.75 0 0 1 .919.066l3.333 3a.75.75 0 0 1-1.003 1.115L7.609 2.033 5.113 4.53a.75.75 0 0 1-1.06-1.06l3-3z'/%3E%3C/svg%3E\")}.ag-icon-cancel:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M16 2.667A13.32 13.32 0 0 0 2.667 16c0 7.373 5.96 13.333 13.333 13.333S29.333 23.373 29.333 16 23.373 2.667 16 2.667m6.667 18.12-1.88 1.88L16 17.88l-4.787 4.787-1.88-1.88L14.12 16l-4.787-4.787 1.88-1.88L16 14.12l4.787-4.787 1.88 1.88L17.88 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-chart:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Echart%3C/title%3E%3Cg fill='%23000' fill-rule='nonzero'%3E%3Cpath d='M14 7h4v18h-4zM8 17h4v8H8zM20 13h4v12h-4z'/%3E%3C/g%3E%3C/svg%3E\")}.ag-icon-color-picker:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M23.907 17.587 10.574 4.254l-1.88 1.88 3.173 3.173-8.28 8.28 10.16 10.16zm-16.547 0 6.387-6.387 6.387 6.387zm18.387 2s-2.667 2.893-2.667 4.667c0 1.467 1.2 2.667 2.667 2.667s2.667-1.2 2.667-2.667c0-1.773-2.667-4.667-2.667-4.667' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-columns:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M26 25H6V7h20zM12 11H8v12h4zm6 0h-4v12h4zm6 12V11h-4v12z' style='fill-rule:nonzero' transform='translate(0 -1)'/%3E%3C/svg%3E\")}.ag-icon-contracted:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m12 6 10 10-10 10-2-2 8-8-8-8z'/%3E%3C/svg%3E\")}.ag-icon-copy:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M22 1.333H6A2.675 2.675 0 0 0 3.333 4v18.667H6V4h16zm4 5.334H11.333a2.675 2.675 0 0 0-2.667 2.667v18.667c0 1.467 1.2 2.667 2.667 2.667H26c1.467 0 2.667-1.2 2.667-2.667V9.334c0-1.467-1.2-2.667-2.667-2.667M26 28H11.333V9.333H26z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-cross:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M15.984 13.894 27.05 2.828l2.122 2.122-11.066 11.066 11.066 11.066-2.122 2.12-11.066-11.066L4.918 29.202l-2.12-2.12 11.066-11.066L2.798 4.95l2.12-2.122z'/%3E%3C/svg%3E\")}.ag-icon-csv:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='translate(3.934 -.054)scale(.06285)'/%3E%3Cpath d='M.688-.226a.2.2 0 0 1-.017.074.28.28 0 0 1-.145.14.412.412 0 0 1-.234.013.28.28 0 0 1-.202-.168.468.468 0 0 1-.04-.19q0-.086.025-.155a.319.319 0 0 1 .182-.191.4.4 0 0 1 .134-.025q.087 0 .155.035a.3.3 0 0 1 .104.085.17.17 0 0 1 .036.097.06.06 0 0 1-.018.044.06.06 0 0 1-.042.019.06.06 0 0 1-.042-.013.2.2 0 0 1-.031-.046.2.2 0 0 0-.066-.079.16.16 0 0 0-.095-.027.17.17 0 0 0-.142.068.3.3 0 0 0-.053.193.4.4 0 0 0 .023.139.2.2 0 0 0 .067.083.2.2 0 0 0 .1.027q.063 0 .106-.031a.2.2 0 0 0 .065-.091.2.2 0 0 1 .023-.046q.014-.018.044-.018a.06.06 0 0 1 .044.018.06.06 0 0 1 .019.045' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 7.122 25.977)'/%3E%3Cpath d='M.622-.215a.2.2 0 0 1-.033.117.23.23 0 0 1-.098.081.4.4 0 0 1-.153.029.34.34 0 0 1-.175-.04.23.23 0 0 1-.079-.077.17.17 0 0 1-.031-.093q0-.027.019-.045a.06.06 0 0 1 .046-.019.06.06 0 0 1 .039.014.1.1 0 0 1 .027.044.3.3 0 0 0 .03.057q.015.023.044.038.03.015.076.015.065 0 .105-.03a.09.09 0 0 0 .04-.075.08.08 0 0 0-.022-.058.14.14 0 0 0-.056-.034 1 1 0 0 0-.092-.025.7.7 0 0 1-.129-.042.2.2 0 0 1-.083-.066.17.17 0 0 1-.03-.104q0-.058.032-.105a.2.2 0 0 1 .093-.07.4.4 0 0 1 .144-.025q.066 0 .114.016a.3.3 0 0 1 .08.044.2.2 0 0 1 .046.057q.015.03.015.058a.07.07 0 0 1-.018.046.06.06 0 0 1-.046.021q-.025 0-.038-.012a.2.2 0 0 1-.028-.041.2.2 0 0 0-.047-.063Q.387-.625.326-.625a.15.15 0 0 0-.09.025q-.035.024-.035.059 0 .021.012.037a.1.1 0 0 0 .032.027.4.4 0 0 0 .111.036q.06.015.11.031.048.018.083.042a.2.2 0 0 1 .054.062.2.2 0 0 1 .019.091' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 13.339 25.977)'/%3E%3Cpath d='m.184-.633.162.48.163-.483q.013-.038.019-.053a.062.062 0 0 1 .061-.039q.018 0 .034.009a.1.1 0 0 1 .025.025q.009.015.009.031L.654-.64l-.007.025-.009.024-.173.468-.019.051a.2.2 0 0 1-.021.042.1.1 0 0 1-.033.03.1.1 0 0 1-.049.012.1.1 0 0 1-.05-.011A.1.1 0 0 1 .26-.03a.2.2 0 0 1-.021-.042L.22-.123.05-.587.041-.612.033-.638.03-.662q0-.025.02-.046a.07.07 0 0 1 .05-.02q.037 0 .053.023.015.023.031.072' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 18.94 25.977)'/%3E%3C/svg%3E\")}.ag-icon-cut:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M13.775 15.198 3.835 2.945a1.501 1.501 0 0 1 2.33-1.89l14.997 18.488A6.003 6.003 0 0 1 29.657 25c0 3.311-2.688 6-6 6s-6-2.689-6-6c0-1.335.437-2.569 1.176-3.566l-3.127-3.855-3.001 3.7A5.97 5.97 0 0 1 14 25c0 3.311-2.689 6-6 6s-6-2.689-6-6a6.003 6.003 0 0 1 8.315-5.536zm9.882 6.702a3.1 3.1 0 0 0-3.1 3.1c0 1.711 1.389 3.1 3.1 3.1s3.1-1.389 3.1-3.1-1.389-3.1-3.1-3.1M8 21.95a3.05 3.05 0 1 0 .001 6.101A3.05 3.05 0 0 0 8 21.95m9.63-11.505 1.932 2.381 8.015-9.881a1.5 1.5 0 0 0-2.329-1.89z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-desc:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m26.667 16-1.88-1.88-7.453 7.44V5.333h-2.667V21.56l-7.44-7.453L5.334 16l10.667 10.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-adesc:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='%23000' d='M10.387 11.47a.75.75 0 0 1 1.06 1.06l-3 3-.113.093a.75.75 0 0 1-.919-.065l-3.333-3a.75.75 0 0 1 1.003-1.116l2.806 2.525zM13.201 3.08q.65 0 1.135.222.487.223.759.619.27.396.279.918H14.19a.72.72 0 0 0-.293-.536q-.26-.192-.705-.192-.302.001-.51.086a.7.7 0 0 0-.32.23.56.56 0 0 0-.108.338.5.5 0 0 0 .065.273.7.7 0 0 0 .204.203q.127.083.295.146.168.06.36.102l.525.125a3.7 3.7 0 0 1 .701.229q.32.143.554.35.234.21.362.492.131.282.134.647a1.6 1.6 0 0 1-.273.93 1.74 1.74 0 0 1-.777.607q-.504.214-1.217.214-.708 0-1.232-.217a1.8 1.8 0 0 1-.816-.641q-.29-.429-.305-1.059h1.194q.02.294.17.49.15.195.402.294.253.098.573.098.313 0 .544-.092a.84.84 0 0 0 .362-.254.6.6 0 0 0 .129-.373.5.5 0 0 0-.117-.33.9.9 0 0 0-.337-.23 3.4 3.4 0 0 0-.54-.17l-.635-.16q-.738-.18-1.166-.562t-.426-1.03a1.53 1.53 0 0 1 .284-.926q.287-.396.79-.62a2.8 2.8 0 0 1 1.14-.222'/%3E%3Cpath fill='%23000' fill-rule='evenodd' d='M5.813 9H4.489l-.432-1.332H1.948L1.515 9H.19l2.017-5.84h1.592zM2.262 6.704h1.481l-.718-2.21H2.98zM8.452 3.16q.645 0 1.075.19.43.192.648.53a1.4 1.4 0 0 1 .217.776q0 .342-.137.602a1.2 1.2 0 0 1-.376.423 1.6 1.6 0 0 1-.542.23v.058q.333.014.624.187.294.175.476.489.183.31.183.74 0 .465-.231.83a1.56 1.56 0 0 1-.676.574Q9.265 9 8.609 9H6.114V3.16zM7.35 7.99h1.006q.517 0 .753-.196a.66.66 0 0 0 .237-.531.8.8 0 0 0-.116-.428.8.8 0 0 0-.334-.291 1.15 1.15 0 0 0-.511-.106H7.349zm0-2.386h.916q.254 0 .45-.09a.75.75 0 0 0 .313-.256.67.67 0 0 0 .118-.397.64.64 0 0 0-.226-.51q-.223-.194-.633-.194H7.35z' clip-rule='evenodd'/%3E%3C/svg%3E\")}.ag-icon-down:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m26.667 16-1.88-1.88-7.453 7.44V5.333h-2.667V21.56l-7.44-7.453L5.334 16l10.667 10.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-excel:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='translate(3.934 -.054)scale(.06285)'/%3E%3Cpath d='m.052-.139.16-.234-.135-.208a.4.4 0 0 1-.028-.052.1.1 0 0 1-.01-.042.05.05 0 0 1 .018-.037.07.07 0 0 1 .045-.016q.03 0 .047.018a1 1 0 0 1 .047.066l.107.174.115-.174.024-.038.019-.026.021-.015a.1.1 0 0 1 .027-.005.06.06 0 0 1 .044.016.05.05 0 0 1 .018.039q0 .033-.038.089l-.141.211.152.234a.3.3 0 0 1 .03.051.1.1 0 0 1 .009.038.1.1 0 0 1-.008.031.1.1 0 0 1-.024.023.1.1 0 0 1-.034.008.1.1 0 0 1-.035-.008.1.1 0 0 1-.023-.022L.427-.067.301-.265l-.134.204-.022.034-.016.019a.1.1 0 0 1-.022.015.1.1 0 0 1-.03.005.06.06 0 0 1-.044-.016.06.06 0 0 1-.017-.047q0-.036.036-.088' style='fill-rule:nonzero' transform='matrix(17.82892 0 0 16.50777 10.371 25.928)'/%3E%3C/svg%3E\")}.ag-icon-expanded:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M20 26 10 16 20 6l2 2-8 8 8 8z'/%3E%3C/svg%3E\")}.ag-icon-eye-slash:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye-slash%3C/title%3E%3Cpath fill='%23000' fill-rule='nonzero' d='M8.95 10.364 7 8.414 8.414 7l2.32 2.32A13.2 13.2 0 0 1 16.5 8c5.608 0 10.542 3.515 12.381 8.667L29 17l-.119.333a13 13 0 0 1-4.255 5.879l1.466 1.466-1.414 1.414-1.754-1.753A13.2 13.2 0 0 1 16.5 26c-5.608 0-10.542-3.515-12.381-8.667L4 17l.119-.333a13 13 0 0 1 4.83-6.303m1.445 1.445A11.02 11.02 0 0 0 6.148 17c1.646 4.177 5.728 7 10.352 7 1.76 0 3.441-.409 4.94-1.146l-1.878-1.878A5.06 5.06 0 0 1 16.5 22c-2.789 0-5.05-2.239-5.05-5 0-1.158.398-2.223 1.065-3.07zm1.855-.974 1.794 1.795A5.07 5.07 0 0 1 16.5 12c2.789 0 5.05 2.239 5.05 5 0 .9-.24 1.745-.661 2.474l2.305 2.306A11 11 0 0 0 26.852 17c-1.646-4.177-5.728-7-10.352-7-1.495 0-2.933.295-4.25.835'/%3E%3C/svg%3E\")}.ag-icon-eye:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M16.5 23c4.624 0 8.706-2.823 10.352-7-1.646-4.177-5.728-7-10.352-7s-8.706 2.823-10.352 7c1.646 4.177 5.728 7 10.352 7M4.119 15.667C5.958 10.515 10.892 7 16.5 7s10.542 3.515 12.381 8.667L29 16l-.119.333C27.042 21.485 22.108 25 16.5 25S5.958 21.485 4.119 16.333L4 16zM16.5 21c2.789 0 5.049-2.239 5.049-5s-2.26-5-5.049-5-5.049 2.239-5.049 5 2.26 5 5.049 5' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-filter:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m28 8-8 8v5l-6 6V16L6 8V6h22zM9 8l7 7v7l2-2v-5l7-7z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-first:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M24.273 22.12 18.153 16l6.12-6.12L22.393 8l-8 8 8 8zM7.727 8h2.667v16H7.727z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-group:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M14 7v1H9V7zm0-3v1H5.001V4zm-7 7H5v-1h2zm0-3H5V7h2zM3 5H1V4h2zm11 5v1H9v-1zm-7 4H5v-1h2zm7-1v1H9v-1z' style='fill-rule:nonzero' transform='matrix(2 0 0 2 0 -2)'/%3E%3C/svg%3E\")}.ag-icon-last:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m7.727 9.88 6.12 6.12-6.12 6.12L9.607 24l8-8-8-8zM21.607 8h2.667v16h-2.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-left:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M26.667 14.667H10.44l7.453-7.453L16 5.334 5.333 16.001 16 26.668l1.88-1.88-7.44-7.453h16.227z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-linked:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M5.2 16a4.136 4.136 0 0 1 4.133-4.133h5.333V9.334H9.333a6.67 6.67 0 0 0-6.667 6.667 6.67 6.67 0 0 0 6.667 6.667h5.333v-2.533H9.333A4.136 4.136 0 0 1 5.2 16.002zm5.467 1.333h10.667v-2.667H10.667zm12-8h-5.333v2.533h5.333a4.136 4.136 0 0 1 4.133 4.133 4.136 4.136 0 0 1-4.133 4.133h-5.333v2.533h5.333a6.67 6.67 0 0 0 6.667-6.667 6.67 6.67 0 0 0-6.667-6.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-loading:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M17 29h-2v-8h2zm-3.586-9L7 26.414 5.586 25 12 18.586zm13 5L25 26.414 18.586 20 20 18.586zM29 17h-8v-2h8zm-18 0H3v-2h8zm2.414-5L12 13.414 5.586 7 7 5.586zm13-5L20 13.414 18.586 12 25 5.586zM17 11h-2V3h2z' style='fill-rule:nonzero' transform='translate(-3.692 -3.692)scale(1.23077)'/%3E%3C/svg%3E\")}.ag-icon-maximize:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M14 30H2V18h2.828v7.05l8.254-8.252 2.12 2.12-8.252 8.254H14zm4-28h12v12h-2.828V6.95l-8.254 8.252-2.12-2.12 8.252-8.254H18z'/%3E%3C/svg%3E\")}.ag-icon-menu:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M20 13H0v-2h20zm0-6H0V5h20zm0-6H0v-2h20z' style='fill-rule:nonzero' transform='translate(6 9)'/%3E%3C/svg%3E\")}.ag-icon-menu-alt:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M16 19a3 3 0 1 0 0-6 3 3 0 0 0 0 6M16 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6M16 27a3 3 0 1 0 0-6 3 3 0 0 0 0 6'/%3E%3C/svg%3E\")}.ag-icon-minimize:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M2 18h12v12h-2.828v-7.05l-8.254 8.252-2.12-2.12 8.252-8.254H2zm28-4H18V2h2.828v7.05L29.082.798l2.12 2.12-8.252 8.254H30z'/%3E%3C/svg%3E\")}.ag-icon-minus:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658H7.901v-2.658z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-next:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M10.94 6 9.06 7.88 17.167 16 9.06 24.12 10.94 26l10-10z' style='fill-rule:nonzero' transform='translate(1)'/%3E%3C/svg%3E\")}.ag-icon-none:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enone%3C/title%3E%3Cg fill='%23000' fill-rule='nonzero'%3E%3Cpath d='M23.708 14.645 16 6.939l-7.708 7.706 1.416 1.416L16 9.767l6.292 6.294zM23.708 20.355 16 28.061l-7.708-7.706 1.416-1.416L16 25.233l6.292-6.294z'/%3E%3C/g%3E%3C/svg%3E\")}.ag-icon-not-allowed:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M16 2.667C8.64 2.667 2.667 8.64 2.667 16S8.64 29.333 16 29.333 29.333 23.36 29.333 16 23.36 2.667 16 2.667M5.333 16c0-5.893 4.773-10.667 10.667-10.667 2.467 0 4.733.84 6.533 2.253L7.586 22.533A10.54 10.54 0 0 1 5.333 16M16 26.667c-2.467 0-4.733-.84-6.533-2.253L24.414 9.467A10.54 10.54 0 0 1 26.667 16c0 5.893-4.773 10.667-10.667 10.667' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-paste:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M25.334 4H19.76C19.2 2.453 17.733 1.333 16 1.333S12.8 2.453 12.24 4H6.667A2.675 2.675 0 0 0 4 6.667V28c0 1.467 1.2 2.667 2.667 2.667h18.667c1.467 0 2.667-1.2 2.667-2.667V6.667C28.001 5.2 26.801 4 25.334 4M16 4c.733 0 1.333.6 1.333 1.333s-.6 1.333-1.333 1.333-1.333-.6-1.333-1.333S15.267 4 16 4m9.333 24H6.666V6.667h2.667v4h13.333v-4h2.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-pin:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m10.78 19.777-4.668-4.666s.032-1 .67-1.87c1.366-1.86 4.052-1.96 6.056-1.572l3.158-3.108c-.7-2.342 3.352-5.046 3.352-5.046l9.166 9.168q-.334.447-.67.894c-1.074 1.426-2.538 2.63-4.272 2.338l-3.32 3.218c.046.344.042.03.118 1.152.144 2.13-.64 4.324-2.632 5.34l-.746.364-4.798-4.798-7.292 7.294-1.416-1.416zm8.24-13.672c-.688.568-1.416 1.45-1.024 2.072l.49.722-4.986 4.988c-1.988-.506-4.346-.636-5.156.614l9.02 9.032q.14-.099.272-.21c1.226-1.08.764-3.04.498-4.9l4.79-4.79s1.47.938 2.936-.776l-6.79-6.79q-.026.019-.05.038' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-pivot:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M25.128 2.002c2.56.096 4.772 2.292 4.87 4.87a712 712 0 0 1 0 18.256c-.096 2.56-2.292 4.772-4.87 4.87a712 712 0 0 1-18.256 0c-2.558-.096-4.772-2.29-4.87-4.87a712 712 0 0 1 0-18.256c.096-2.56 2.292-4.772 4.87-4.87a712 712 0 0 1 18.256 0m2.966 7.954H9.892v18.136c5.086.13 10.18.098 15.264-.096 1.48-.094 2.746-1.35 2.84-2.84.192-5.064.226-10.134.098-15.2M3.968 24.1q.015.528.036 1.056c.094 1.484 1.354 2.746 2.84 2.84l1.012.036V24.1zM22 15.414l-.292.294-1.416-1.416L23 11.586l2.708 2.706-1.416 1.416-.292-.294v3.592c-.032 2.604-2.246 4.892-4.872 4.992L15.414 24l.294.292-1.416 1.416L11.586 23l2.706-2.708 1.416 1.416-.322.32c3.372.03 6.578-.164 6.614-3.034zM3.88 18.038c.002 1.346.012 2.694.038 4.04h3.938v-4.04zm.05-6.062a681 681 0 0 0-.044 4.042h3.97v-4.042zm5.962-7.99Q8.449 3.999 7.006 4c-1.57.02-2.946 1.348-3.004 2.922q-.02 1.517-.042 3.034h3.896v-2.02h2.036zm14.244-.016v3.966h3.898q-.017-.546-.038-1.092c-.094-1.48-1.35-2.746-2.84-2.84q-.51-.019-1.02-.034m-8.14-.054q-2.035.022-4.07.048v3.972h4.07zm6.106.008a213 213 0 0 0-4.07-.022v4.034h4.07z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-plus:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658h-6.77v6.77h-2.658v-6.77h-6.77v-2.658h6.77v-6.77h2.658v6.77z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-previous:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M21.94 7.88 20.06 6l-10 10 10 10 1.88-1.88L13.833 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-right:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m16 5.333-1.88 1.88 7.44 7.453H5.333v2.667H21.56l-7.44 7.453 1.88 1.88 10.667-10.667L16 5.332z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-save:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M15.708 2.355 8 10.061.292 2.355 1.708.939 8 7.233 14.292.939z' style='fill-rule:nonzero' transform='translate(8 14)'/%3E%3Cpath d='M5 26h22v2H5zM15 4h2v18h-2z'/%3E%3C/svg%3E\")}.ag-icon-small-down:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.334 10.667 16 21.334l8.667-10.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-small-left:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M21.333 7.334 10.666 16l10.667 8.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-small-right:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M10.667 24.666 21.334 16 10.667 7.333z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-small-up:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.334 21.333 16 10.666l8.667 10.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-tick:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M11.586 22.96 27.718 6.828 29.84 8.95 11.586 27.202 2.4 18.016l2.12-2.122z'/%3E%3C/svg%3E\")}.ag-icon-tree-closed:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m11.94 6-1.88 1.88L18.167 16l-8.107 8.12L11.94 26l10-10z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-tree-indeterminate:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6 13.5h20v3H6z'/%3E%3C/svg%3E\")}.ag-icon-tree-open:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M24.12 9.06 16 17.167 7.88 9.06 6 10.94l10 10 10-10z' style='fill-rule:nonzero' transform='translate(0 1)'/%3E%3C/svg%3E\")}.ag-icon-unlinked:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M22.667 9.333h-5.333v2.533h5.333a4.136 4.136 0 0 1 4.133 4.133c0 1.907-1.307 3.507-3.08 3.973l1.947 1.947c2.173-1.107 3.667-3.32 3.667-5.92a6.67 6.67 0 0 0-6.667-6.667zm-1.334 5.334h-2.92l2.667 2.667h.253zM2.667 5.693 6.814 9.84A6.65 6.65 0 0 0 2.667 16a6.67 6.67 0 0 0 6.667 6.667h5.333v-2.533H9.334a4.136 4.136 0 0 1-4.133-4.133c0-2.12 1.613-3.867 3.68-4.093l2.76 2.76h-.973v2.667h3.64l3.027 3.027v2.307h2.307l5.347 5.333 1.68-1.68L4.362 4.002 2.669 5.695z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-up:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333 5.332 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-grip:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M8 24H6v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zM8 18H6v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zM8 12H6V8h2zm6 0h-2V8h2zm6 0h-2V8h2zm6 0h-2V8h2z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-settings:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M30 8h-4.1c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2v2h14.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30zm-9 4c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3M2 24h4.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30v-2H15.9c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2zm9-4c1.7 0 3 1.3 3 3s-1.3 3-3 3-3-1.3-3-3 1.3-3 3-3'/%3E%3C/svg%3E\")}.ag-icon-column-arrow:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M11 4a1 1 0 0 1 1 1v22a1 1 0 1 1-2 0V5a1 1 0 0 1 1-1' clip-rule='evenodd'/%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M2 13a1 1 0 0 1 1-1h23.5a1 1 0 1 1 0 2H3a1 1 0 0 1-1-1' clip-rule='evenodd'/%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M2 4h18v24H2zm2 2v20h14V6zM26.793 13 23 9.207l1.414-1.414L29.621 13l-5.207 5.207L23 16.793z' clip-rule='evenodd'/%3E%3C/svg%3E\")}.ag-icon-un-pin:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='m6.112 15.111 3.272 3.271 1.436-1.402-2.476-2.479c.81-1.25 3.168-1.12 5.156-.614l4.986-4.988-.49-.722c-.392-.622.336-1.504 1.024-2.072l.008-.007.01-.006.032-.025 1.447 1.447 1.432-1.397-2.601-2.602s-4.052 2.704-3.352 5.046l-3.158 3.108c-2.004-.388-4.69-.288-6.056 1.572-.638.87-.67 1.87-.67 1.87m.581 11.582.014.014 5.502-5.501 4.783 4.783.746-.364c1.992-1.016 2.776-3.21 2.632-5.34-.055-.805-.068-.87-.088-.97-.008-.04-.017-.085-.03-.182l3.32-3.218c1.734.292 3.198-.912 4.272-2.338q.337-.447.67-.894l-.001-.001-.007-.007-.007-.007-.007-.007-3.87-3.87 1.585-1.584-1.414-1.414-14.381 14.38-1.237 1.209-5.69 5.687 1.417 1.416zM23.21 10.206l2.65 2.651c-1.465 1.714-2.935.776-2.935.776l-4.79 4.79q.041.291.087.583c.257 1.676.513 3.35-.585 4.317a4 4 0 0 1-.272.21l-3.739-3.744z' clip-rule='evenodd'/%3E%3C/svg%3E\")}.ag-icon-pinned-top:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='currentColor' d='m16.708 10.878 8.708 8.706L24 21l-6.292-6.294V27h-2V14.706L9.416 21 8 19.584q4.348-4.344 8.691-8.69zM25 6H8v2h17z'/%3E%3C/svg%3E\")}.ag-icon-pinned-bottom:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='currentColor' d='M16.708 22.122 8 13.416 9.416 12l6.292 6.294V6h2v12.294L24 12l1.416 1.416-8.691 8.69zM7.416 28h17v-2h-17z'/%3E%3C/svg%3E\")}.ag-icon-chevron-up:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M3.479 10.521a.75.75 0 0 1 0-1.06l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1-1.06 1.06l-3.47-3.47-3.47 3.47a.75.75 0 0 1-1.06 0' clip-rule='evenodd'/%3E%3C/svg%3E\")}.ag-icon-chevron-down:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M12.521 5.461a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 0 1 1.06-1.06l3.47 3.47 3.47-3.47a.75.75 0 0 1 1.06 0' clip-rule='evenodd'/%3E%3C/svg%3E\")}.ag-icon-chevron-left:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M10.53 12.512a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 0 1 0-1.06l4-4a.75.75 0 0 1 1.06 1.06l-3.47 3.47 3.47 3.47a.75.75 0 0 1 0 1.06' clip-rule='evenodd'/%3E%3C/svg%3E\")}.ag-icon-chevron-right:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M5.47 3.47a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06-1.06L8.94 8 5.47 4.53a.75.75 0 0 1 0-1.06' clip-rule='evenodd'/%3E%3C/svg%3E\")}.ag-icon-filter-add:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='currentColor' d='M19.834 8H8c0 .304.06.612.258.842 2.716 2.854 6.682 5.548 6.742 7.974V21l2-1.5v-2.684c.056-2.267 2.968-4.417 5.49-6.75v3.087c-1.081.974-2.245 1.968-3.232 3.005a1.05 1.05 0 0 0-.258.682v3.66L13 25c0-2.74.066-5.482-.002-8.222a1.05 1.05 0 0 0-.256-.62C10.026 13.304 6.06 10.61 6 8.184V6h13.834z'/%3E%3Cpath fill='currentColor' d='M26 6h2.946v2.002H26v3.313h-2.002V8.002h-2.946V6h2.946V3.04H26z'/%3E%3C/svg%3E\")}.ag-icon-edit:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='currentColor' d='M6.222 25.778h1.611l14.834-14.811-1.611-1.611-14.834 14.81zM4 28v-4.733L22.644 4.656a2.26 2.26 0 0 1 1.567-.634q.423 0 .833.167.412.166.734.478l1.589 1.6q.333.322.483.733t.15.822q0 .423-.161.839-.162.416-.472.728L8.733 28zm17.856-17.833-.8-.811 1.61 1.61z'/%3E%3C/svg%3E\")}"}),fpe={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>'},vpe={aasc:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.2012 8.07928C13.6346 8.0793 14.0128 8.15365 14.3359 8.30193C14.6609 8.45018 14.9141 8.65595 15.0947 8.9201C15.2754 9.18439 15.3683 9.49109 15.374 9.83904H14.1904C14.1676 9.60898 14.0695 9.4303 13.8965 9.30291C13.7235 9.1756 13.4889 9.1115 13.1924 9.1115C12.9909 9.1115 12.8204 9.1404 12.6816 9.19744C12.543 9.25255 12.4364 9.32917 12.3623 9.42791C12.2901 9.52678 12.2539 9.63933 12.2539 9.76482C12.2501 9.8692 12.272 9.9604 12.3193 10.0383C12.3688 10.1162 12.4369 10.1843 12.5225 10.2414C12.6079 10.2964 12.7064 10.3451 12.8184 10.3869C12.9304 10.4268 13.0505 10.4609 13.1777 10.4894L13.7031 10.6144C13.9578 10.6715 14.1914 10.7479 14.4043 10.8429C14.6173 10.938 14.8021 11.0547 14.958 11.1935C15.1138 11.3323 15.2348 11.4957 15.3203 11.6838C15.4077 11.8719 15.4522 12.088 15.4541 12.3312C15.4522 12.6885 15.3611 12.9986 15.1807 13.2609C15.0019 13.5214 14.7427 13.7248 14.4043 13.8693C14.0678 14.0118 13.6617 14.0832 13.1865 14.0832C12.7153 14.0832 12.3048 14.0107 11.9551 13.8664C11.6071 13.7219 11.3345 13.5071 11.1387 13.2238C10.9449 12.9387 10.8435 12.5862 10.834 12.1662H12.0283C12.0416 12.362 12.0984 12.5252 12.1973 12.6564C12.298 12.7857 12.4323 12.8838 12.5996 12.9504C12.7688 13.0149 12.96 13.047 13.1729 13.047C13.3817 13.047 13.563 13.0169 13.7168 12.9562C13.8727 12.8954 13.9935 12.8106 14.0791 12.7023C14.1647 12.5939 14.208 12.469 14.208 12.3283C14.2079 12.1974 14.1686 12.0875 14.0908 11.9982C14.0148 11.9089 13.9022 11.8324 13.7539 11.7697C13.6076 11.707 13.4276 11.6501 13.2148 11.5988L12.5791 11.4387C12.0869 11.3189 11.6982 11.1318 11.4131 10.8771C11.128 10.6224 10.9855 10.2793 10.9873 9.84783C10.9854 9.49418 11.0804 9.18439 11.2705 8.9201C11.4625 8.65603 11.7261 8.45015 12.0605 8.30193C12.3951 8.15369 12.7754 8.07928 13.2012 8.07928Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.8125 14.0002H4.48926L4.05664 12.6681H1.94824L1.51465 14.0002H0.19043L2.20703 8.15935H3.79883L5.8125 14.0002ZM2.26172 11.7043H3.74316L3.02539 9.49334H2.98047L2.26172 11.7043Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8.45215 8.15935C8.88165 8.15935 9.24031 8.22251 9.52734 8.34978C9.81445 8.47717 10.0303 8.65477 10.1748 8.88103C10.3192 9.10536 10.3916 9.36368 10.3916 9.65642C10.3916 9.88452 10.3461 10.085 10.2549 10.258C10.1637 10.4289 10.0384 10.5696 9.87891 10.6799C9.72117 10.7882 9.54024 10.8657 9.33691 10.9113V10.9679C9.55917 10.9775 9.76716 11.0406 9.96094 11.1564C10.1568 11.2724 10.3158 11.4356 10.4375 11.6447C10.5591 11.8519 10.6201 12.099 10.6201 12.3859C10.6201 12.6958 10.5427 12.9727 10.3887 13.216C10.2366 13.4573 10.0113 13.6486 9.71289 13.7892C9.41443 13.9299 9.04655 14.0002 8.60938 14.0002H6.11426V8.15935H8.45215ZM7.34863 12.9904H8.35547C8.69943 12.9904 8.95057 12.9252 9.1084 12.7941C9.26621 12.661 9.34473 12.4834 9.34473 12.2629C9.34468 12.1014 9.30643 11.9587 9.22852 11.8351C9.15056 11.7116 9.03903 11.6145 8.89453 11.5441C8.75195 11.4738 8.58148 11.4387 8.38379 11.4387H7.34863V12.9904ZM7.34863 10.6037H8.26465C8.43369 10.6036 8.58376 10.5737 8.71484 10.5148C8.84793 10.454 8.95227 10.3683 9.02832 10.258C9.10628 10.1477 9.14551 10.0155 9.14551 9.8615C9.14546 9.65055 9.07008 9.48001 8.91992 9.35076C8.77165 9.22169 8.56064 9.15741 8.28711 9.1574H7.34863V10.6037Z" fill="black"/><path d="M7.16602 0.377127C7.44584 0.189493 7.82551 0.20905 8.08496 0.442557L11.418 3.44256C11.7257 3.71966 11.7507 4.19428 11.4736 4.50213C11.1966 4.80961 10.7228 4.83441 10.415 4.55779L7.60938 2.03338L5.11328 4.53045C4.82042 4.82326 4.34562 4.82322 4.05273 4.53045C3.75986 4.23757 3.75989 3.7628 4.05273 3.4699L7.05273 0.4699L7.16602 0.377127Z" fill="black"/></svg>',adesc:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.3867 11.4697C10.6796 11.1771 11.1544 11.1769 11.4473 11.4697C11.7399 11.7626 11.7399 12.2374 11.4473 12.5303L8.44727 15.5303L8.33398 15.623C8.05425 15.8106 7.67449 15.7909 7.41504 15.5576L4.08203 12.5576C3.77415 12.2805 3.74927 11.8059 4.02637 11.498C4.30342 11.1907 4.77722 11.1657 5.08496 11.4424L7.89062 13.9668L10.3867 11.4697Z" fill="black"/><path d="M13.2012 3.0791C13.6346 3.07912 14.0128 3.1535 14.3359 3.30176C14.6611 3.45006 14.9141 3.65661 15.0947 3.9209C15.2752 4.18513 15.3683 4.49104 15.374 4.83887H14.1904C14.1676 4.60882 14.0695 4.43012 13.8965 4.30273C13.7235 4.17546 13.4889 4.11133 13.1924 4.11133C12.9909 4.11133 12.8204 4.14023 12.6816 4.19727C12.5431 4.25236 12.4364 4.32902 12.3623 4.42773C12.2901 4.52659 12.2539 4.63919 12.2539 4.76465C12.2501 4.86901 12.272 4.96023 12.3193 5.03809C12.3688 5.11604 12.4369 5.18417 12.5225 5.24121C12.6079 5.29623 12.7064 5.34496 12.8184 5.38672C12.9304 5.42661 13.0505 5.46075 13.1777 5.48926L13.7031 5.61426C13.9578 5.67128 14.1914 5.74776 14.4043 5.84277C14.6172 5.93784 14.8021 6.05457 14.958 6.19336C15.1139 6.33216 15.2348 6.49633 15.3203 6.68457C15.4076 6.8727 15.4522 7.08885 15.4541 7.33203C15.4521 7.68929 15.3612 7.99944 15.1807 8.26172C15.0019 8.52216 14.7427 8.72465 14.4043 8.86914C14.0678 9.01165 13.6617 9.08301 13.1865 9.08301C12.7153 9.08299 12.3048 9.01057 11.9551 8.86621C11.6072 8.72173 11.3345 8.50786 11.1387 8.22461C10.9447 7.9394 10.8435 7.58622 10.834 7.16602H12.0283C12.0416 7.36176 12.0985 7.52509 12.1973 7.65625C12.298 7.78554 12.4323 7.88365 12.5996 7.9502C12.7688 8.01477 12.96 8.04785 13.1729 8.04785C13.3817 8.04781 13.5629 8.01678 13.7168 7.95605C13.8727 7.89522 13.9935 7.81051 14.0791 7.70215C14.1646 7.59387 14.2079 7.46965 14.208 7.3291C14.208 7.19796 14.1687 7.08739 14.0908 6.99805C14.0148 6.90868 13.9022 6.83228 13.7539 6.76953C13.6076 6.70685 13.4276 6.64993 13.2148 6.59863L12.5791 6.43848C12.0868 6.31871 11.6982 6.13163 11.4131 5.87695C11.1279 5.62221 10.9855 5.27916 10.9873 4.84766C10.9854 4.49404 11.0804 4.18517 11.2705 3.9209C11.4625 3.65661 11.7259 3.45006 12.0605 3.30176C12.3951 3.15353 12.7754 3.0791 13.2012 3.0791Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.8125 9H4.48926L4.05664 7.66797H1.94824L1.51465 9H0.19043L2.20703 3.15918H3.79883L5.8125 9ZM2.26172 6.7041H3.74316L3.02539 4.49414H2.98047L2.26172 6.7041Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8.45215 3.15918C8.88181 3.15918 9.24025 3.22322 9.52734 3.35059C9.81445 3.47798 10.0303 3.6546 10.1748 3.88086C10.3193 4.10518 10.3916 4.36351 10.3916 4.65625C10.3916 4.88432 10.3461 5.08484 10.2549 5.25781C10.1636 5.4289 10.0386 5.57039 9.87891 5.68066C9.72118 5.78898 9.54022 5.86549 9.33691 5.91113V5.96875C9.55913 5.9783 9.76719 6.04044 9.96094 6.15625C10.1568 6.27223 10.3158 6.43538 10.4375 6.64453C10.5591 6.85173 10.6201 7.09875 10.6201 7.38574C10.6201 7.69567 10.5427 7.97245 10.3887 8.21582C10.2366 8.45719 10.0113 8.64841 9.71289 8.78906C9.41442 8.9297 9.04658 8.99999 8.60938 9H6.11426V3.15918H8.45215ZM7.34863 7.99023H8.35547C8.69948 7.99023 8.95057 7.92504 9.1084 7.79395C9.26621 7.66085 9.34473 7.48325 9.34473 7.2627C9.34466 7.10125 9.3064 6.95844 9.22852 6.83496C9.15056 6.71143 9.03899 6.61427 8.89453 6.54395C8.75196 6.47365 8.58145 6.43848 8.38379 6.43848H7.34863V7.99023ZM7.34863 5.60352H8.26465C8.43369 5.60347 8.58376 5.57354 8.71484 5.51465C8.84791 5.45381 8.95228 5.36807 9.02832 5.25781C9.10623 5.14755 9.14551 5.01529 9.14551 4.86133C9.14542 4.65046 9.07002 4.48078 8.91992 4.35156C8.77163 4.22228 8.56087 4.15724 8.28711 4.15723H7.34863V5.60352Z" fill="black"/></svg>',"chevron-down":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6L8 10L4 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-left":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-right":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-up":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 10L8 6L12 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"column-arrow":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 26C0 28.2092 1.79086 30 4 30H14C16.2091 30 18 28.2092 18 26V15H25.8786L24.4394 16.4393C23.8536 17.0251 23.8536 17.9749 24.4394 18.5607C25.0252 19.1464 25.9748 19.1464 26.5606 18.5607L30.5606 14.5607C31.1464 13.9749 31.1464 13.0251 30.5606 12.4393L26.5606 8.43934C25.9748 7.85356 25.0252 7.85356 24.4394 8.43934C23.8536 9.02512 23.8536 9.97488 24.4394 10.5607L25.8786 12H18V6C18 3.79086 16.2091 2 14 2H4C1.79086 2 0 3.79086 0 6V26ZM14 5H10.5V12H15V6C15 5.44772 14.5523 5 14 5ZM4 5H7.5V12H3V6C3 5.44772 3.44772 5 4 5ZM10.5 15H15V26C15 26.5522 14.5523 27 14 27H10.5V15ZM4 27H7.5V15H3V26C3 26.5522 3.44772 27 4 27Z" fill="currentColor"/></svg>',edit:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 10.6262V12.5012H5.375L10.905 6.97122L9.03 5.09622L3.5 10.6262ZM12.355 5.52122C12.4014 5.47497 12.4381 5.42002 12.4632 5.35953C12.4883 5.29905 12.5012 5.23421 12.5012 5.16872C12.5012 5.10324 12.4883 5.0384 12.4632 4.97791C12.4381 4.91742 12.4014 4.86248 12.355 4.81622L11.185 3.64622C11.1387 3.59987 11.0838 3.5631 11.0233 3.53801C10.9628 3.51291 10.898 3.5 10.8325 3.5C10.767 3.5 10.7022 3.51291 10.6417 3.53801C10.5812 3.5631 10.5263 3.59987 10.48 3.64622L9.565 4.56122L11.44 6.43622L12.355 5.52122Z" fill="currentColor"/></svg>',"filter-add":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.12126 7.75L10.8517 7.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M6.65934 11.748L9.32778 11.748" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M12.2943 1.04872V6.19184M14.9886 3.74341H9.68478" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M8.25488 3C8.04799 3.18323 7.91706 3.45099 7.91699 3.74902C7.91713 4.04868 8.04988 4.31681 8.25879 4.5H2C1.58579 4.5 1.25 4.16421 1.25 3.75C1.25 3.33579 1.58579 3 2 3H8.25488Z" fill="currentColor"/></svg>',"pinned-bottom":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M3.47 12.28A.75.75 0 0 1 4 11h8a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.53-.22ZM12.731 5.256a.75.75 0 0 1-.2.524l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2a.75.75 0 0 1 1.5 0v5.44l2.72-2.72a.75.75 0 0 1 1.26.536Z"/></svg>',"pinned-top":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.53 3.72A.75.75 0 0 1 12 5H4a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 .53.22ZM3.269 10.744a.75.75 0 0 1 .2-.524l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06L8.75 8.56V14a.75.75 0 0 1-1.5 0V8.56l-2.72 2.72a.75.75 0 0 1-1.26-.536Z"/></svg>',"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>',"un-pin":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M8 11a.75.75 0 0 0-.75.75v3.333a.75.75 0 1 0 1.5 0V11.75A.75.75 0 0 0 8 11Z"/><path fill="currentColor" d="M13.11 1.436a.75.75 0 0 0-1.22-.872l-10 14a.75.75 0 1 0 1.22.872L5.207 12.5h7.376a.75.75 0 0 0 .75-.75v-1.174a2.08 2.08 0 0 0-1.153-1.863l-1.185-.599-.005-.002a.58.58 0 0 1-.323-.522V5.165a2.083 2.083 0 0 0 1.854-2.904l.589-.825Zm-3.943 5.52v.634a2.08 2.08 0 0 0 1.153 1.863l1.185.6.005.002a.58.58 0 0 1 .323.522V11H6.28l2.887-4.044ZM9.277 1H5.25a2.084 2.084 0 0 0-.083 4.165v1.676l1.5-2.132v-.292a.75.75 0 0 0-.75-.75H5.25a.584.584 0 0 1 0-1.167h2.972L9.277 1Z"/></svg>'},ype=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5;const i=vpe[e];if(i)return i;const n=fpe[e];if(!n)throw new Error("Missing icon data for ".concat(e));return'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="'.concat(t,'" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>')+n+"</svg>"},bpe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return zle({feature:"iconSet",css:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";for(const i of[...Object.keys(fpe),...Object.keys(vpe)]){const n=ype(i,e.strokeWidth);t+=".ag-icon-".concat(i,"::before { mask-image: url('data:image/svg+xml,").concat(encodeURIComponent(n),"'); }\n")}return t}(e)})},xpe=bpe(),Cpe=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select,.ag-floating-filter-search-icon){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select,.ag-floating-filter-search-icon){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select,.ag-floating-filter-search-icon){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}',Spe={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"},colorPickerThumbSize:18,colorPickerTrackSize:12,colorPickerThumbBorderWidth:3,colorPickerTrackBorderRadius:12,colorPickerColorBorderRadius:4},wpe=(()=>zle({feature:"inputStyle",params:p(p({},Spe),{},{inputBackgroundColor:Ule,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:$le},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:Kle(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0}),css:()=>Cpe+".ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){&:focus{box-shadow:var(--ag-focus-shadow);&:where(.invalid),&:where(:invalid){box-shadow:var(--ag-focus-error-shadow)}}}"}))(),Mpe='.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:solid var(--ag-border-width) var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}',kpe={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:{ref:"borderWidth"},tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1},Dpe=(()=>zle({feature:"tabStyle",params:p(p({},kpe),{},{tabBarBorder:!0,tabBarBackgroundColor:_le(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:Ule}),css:Mpe}))(),Ipe=(()=>zle({feature:"tabStyle",params:p(p({},kpe),{},{tabBarBorder:!0,tabBarBackgroundColor:{ref:"chromeBackgroundColor"},tabHoverTextColor:$le,tabSelectedTextColor:$le,tabSelectedUnderlineColor:$le,tabSelectedUnderlineWidth:2,tabSelectedUnderlineTransitionDuration:"0.3s"}),css:Mpe}))(),Ape=(()=>cpe().withPart(upe).withPart(gpe).withPart(xpe).withPart(Dpe).withPart(wpe).withPart(lpe).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]}))(),Lpe=(()=>cpe().withPart(ape).withPart(upe).withPart(gpe).withPart(mpe).withPart(Ipe).withPart(wpe).withPart(lpe).withParams({accentColor:"#2196f3",selectedRowBackgroundColor:Wle(.3),inputFocusBorder:{color:Wle(.4)},focusShadow:{radius:2,spread:1.6,color:Wle(.4)},iconButtonHoverBackgroundColor:"transparent",iconButtonActiveBackgroundColor:"transparent",checkboxUncheckedBorderColor:Kle(.45),checkboxIndeterminateBackgroundColor:Kle(.45),checkboxIndeterminateBorderColor:Kle(.45),checkboxBorderWidth:2,checkboxBorderRadius:2,fontSize:13,dataFontSize:14,headerFontWeight:700,borderRadius:3,wrapperBorderRadius:3,tabSelectedUnderlineColor:$le,tabSelectedBorderWidth:0,tabSelectedUnderlineTransitionDuration:.3,sideButtonSelectedUnderlineColor:$le,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineTransitionDuration:.3,sideButtonBorder:!1,sideButtonSelectedBorder:!1,sideButtonBarTopPadding:{calc:"spacing * 3"},sideButtonSelectedBackgroundColor:"transparent",sideButtonHoverTextColor:$le,iconButtonHoverColor:$le,toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonSwitchInset:1,toggleButtonOffBackgroundColor:Kle(.45),colorPickerThumbSize:13,colorPickerTrackSize:11,colorPickerThumbBorderWidth:2,colorPickerTrackBorderRadius:2,colorPickerColorBorderRadius:2}))(),Npe={cssName:"--ag-cell-horizontal-padding",changeKey:"cellHorizontalPaddingChanged",defaultValue:16},Tpe={cssName:"--ag-indentation-level",changeKey:"indentationLevelChanged",defaultValue:0,noWarn:!0,cacheDefault:!0},Rpe={cssName:"--ag-row-group-indent-size",changeKey:"rowGroupIndentSizeChanged",defaultValue:0},Epe={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},Ppe={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},Ope={cssName:"--ag-row-border",changeKey:"rowBorderWidthChanged",defaultValue:1,border:!0},Fpe={cssName:"--ag-pinned-row-border",changeKey:"pinnedRowBorderWidthChanged",defaultValue:1,border:!0};function zpe(e,t,i){const n=e.visibleCols.headerGroupRowCount;if(i>=n)return{column:t,headerRowIndex:i};let o=t.getParent();for(;o&&o.getProvidedColumnGroup().getLevel()>i;)o=o.getParent();const s=t.isSpanHeaderHeight();return!o||s&&o.isPadding()?{column:t,headerRowIndex:n}:{column:o,headerRowIndex:o.getProvidedColumnGroup().getLevel()}}var Bpe=new Set(["gridPreDestroyed","fillStart","pasteStart"]),Vpe=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","pinnedRowsChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterUiChanged","filterOpened","floatingFilterUiChanged","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel","findChanged","rowResizeStarted","rowResizeEnded","columnsReset","bulkEditingStarted","bulkEditingStopped","batchEditingStarted","batchEditingStopped"],Gpe=Vpe.reduce((e,t)=>{var i;return e[t]=!(i=t)||i.length<2?i:"on"+i[0].toUpperCase()+i.substring(1),e},{}),Hpe={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agExportingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agNoMatchingRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agDateColumnFloatingFilter:"DateFilter",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agNewFiltersToolPanel:"NewFiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar",agFindCellRenderer:"Find"};var jpe={allowFormula:"Formula",aggFunc:"SharedAggregation",autoHeight:"RowAutoHeight",cellClass:"CellStyle",cellClassRules:"CellStyle",cellEditor:e=>{let{cellEditor:t,editable:i}=e;return i?"string"===typeof t&&null!==(n=Hpe[t])&&void 0!==n?n:"CustomEditor":null;var n},cellRenderer:e=>{let{cellRenderer:t}=e;return"string"!==typeof t?null:Hpe[t]},cellStyle:"CellStyle",columnChooserParams:"ColumnMenu",contextMenuItems:"ContextMenu",dndSource:"DragAndDrop",dndSourceOnRowDrag:"DragAndDrop",editable:e=>{let{editable:t,cellEditor:i}=e;return t&&!i?"TextEditor":null},enableCellChangeFlash:"HighlightChanges",enablePivot:"SharedPivot",enableRowGroup:"SharedRowGrouping",enableValue:"SharedAggregation",filter:e=>{let{filter:t}=e;return t&&"string"!==typeof t&&"boolean"!==typeof t?"CustomFilter":"string"===typeof t&&null!==(i=Hpe[t])&&void 0!==i?i:"ColumnFilter";var i},floatingFilter:"ColumnFilter",getQuickFilterText:"QuickFilter",headerTooltip:"Tooltip",headerTooltipValueGetter:"Tooltip",mainMenuItems:"ColumnMenu",menuTabs:e=>{var t;const i=["columnsMenuTab","generalMenuTab"];return null!==(t=e.menuTabs)&&void 0!==t&&t.some(e=>i.includes(e))?"ColumnMenu":null},pivot:"SharedPivot",pivotIndex:"SharedPivot",rowDrag:"RowDrag",rowGroup:"SharedRowGrouping",rowGroupIndex:"SharedRowGrouping",tooltipField:"Tooltip",tooltipValueGetter:"Tooltip",tooltipComponentSelector:"Tooltip",spanRows:"CellSpan",groupHierarchy:"SharedRowGrouping"};var Wpe={alignedGrids:"AlignedGrids",allowContextMenuWithControlKey:"ContextMenu",autoSizeStrategy:"ColumnAutoSize",cellSelection:"CellSelection",columnHoverHighlight:"ColumnHover",datasource:"InfiniteRowModel",doesExternalFilterPass:"ExternalFilter",editType:"EditCore",invalidEditValueMode:"EditCore",enableAdvancedFilter:"AdvancedFilter",enableCellSpan:"CellSpan",enableCharts:"IntegratedCharts",enableRangeSelection:"CellSelection",enableRowPinning:"PinnedRow",findSearchValue:"Find",getFullRowEditValidationErrors:"EditCore",getContextMenuItems:"ContextMenu",getLocaleText:"Locale",getMainMenuItems:"ColumnMenu",getRowClass:"RowStyle",getRowStyle:"RowStyle",groupTotalRow:"SharedRowGrouping",grandTotalRow:"ClientSideRowModelHierarchy",initialState:"GridState",isExternalFilterPresent:"ExternalFilter",isRowPinnable:"PinnedRow",isRowPinned:"PinnedRow",localeText:"Locale",masterDetail:"SharedMasterDetail",pagination:"Pagination",pinnedBottomRowData:"PinnedRow",pinnedTopRowData:"PinnedRow",pivotMode:"SharedPivot",pivotPanelShow:"RowGroupingPanel",quickFilterText:"QuickFilter",rowClass:"RowStyle",rowClassRules:"RowStyle",rowData:"ClientSideRowModel",rowDragManaged:"RowDrag",refreshAfterGroupEdit:["RowGrouping","TreeData"],rowGroupPanelShow:"RowGroupingPanel",rowNumbers:"RowNumbers",rowSelection:"SharedRowSelection",rowStyle:"RowStyle",serverSideDatasource:"ServerSideRowModel",sideBar:"SideBar",statusBar:"StatusBar",treeData:"SharedTreeData",undoRedoCellEditing:"UndoRedoEdit",valueCache:"ValueCache",viewportDatasource:"ViewportRowModel"},_pe=0,Kpe=0,Upe="__ag_grid_instance";var Ype=class extends yoe{constructor(e,t){super(),this.column=e,this.eGui=t,this.lastMovingChanged=0}postConstruct(){this.addManagedElementListeners(this.eGui,{click:e=>e&&this.onClick(e)}),this.addManagedListeners(this.column,{movingChanged:()=>{this.lastMovingChanged=Date.now()}})}onClick(e){const{sortSvc:t,rangeSvc:i,gos:n}=this.beans;if(!Vse(n)||e.altKey){if(this.column.isSortable()){const i=this.column.isMoving(),n=Date.now()-this.lastMovingChanged<50;i||n||null===t||void 0===t||t.progressSortFromEvent(this.column,e)}}else null===i||void 0===i||i.handleColumnSelection(this.column,e)}};var $pe={tag:"div",cls:"ag-header-group-cell-label",role:"presentation",children:[{tag:"span",ref:"agLabel",cls:"ag-header-group-text",role:"presentation"},{tag:"span",ref:"agOpened",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"},{tag:"span",ref:"agClosed",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"}]},Zpe={moduleName:"ColumnHeaderComp",version:Qoe,userComponents:{agColumnHeader:class extends hae{constructor(){super(...arguments),this.eFilter=lae,this.eFilterButton=lae,this.eSortIndicator=lae,this.eMenu=lae,this.eLabel=lae,this.eText=lae,this.eColRef=lae,this.eSortOrder=lae,this.eSortAsc=lae,this.eSortDesc=lae,this.eSortMixed=lae,this.eSortNone=lae,this.eSortAbsoluteAsc=lae,this.eSortAbsoluteDesc=lae,this.isLoadingInnerComponent=!1}refresh(e){var t;const i=this.params;if(this.params=e,this.workOutTemplate(e,!(null===(t=this.beans)||void 0===t||!t.sortSvc))!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||e.enableSorting!=this.currentSort||e.column.formulaRef!=this.currentRef||null!=this.currentSuppressMenuHide&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||i.enableFilterButton!=e.enableFilterButton||i.enableFilterIcon!=e.enableFilterIcon)return!1;if(this.innerHeaderComponent){var n,o;const t=p({},e);Aoe(t,e.innerHeaderComponentParams),null===(n=(o=this.innerHeaderComponent).refresh)||void 0===n||n.call(o,t)}else this.setDisplayName(e);return!0}workOutTemplate(e,t){const{formula:i}=this.beans,n=e.template;return n?null!==n&&void 0!==n&&n.trim?n.trim():n:function(e,t){const i={"aria-hidden":"true"};return{tag:"div",cls:"ag-cell-label-container",role:"presentation",children:[{tag:"span",ref:"eMenu",cls:"ag-header-icon ag-header-cell-menu-button",attrs:i},{tag:"span",ref:"eFilterButton",cls:"ag-header-icon ag-header-cell-filter-button",attrs:i},{tag:"div",ref:"eLabel",cls:"ag-header-cell-label",role:"presentation",children:[e?{tag:"span",ref:"eColRef",cls:"ag-header-col-ref"}:null,{tag:"span",ref:"eText",cls:"ag-header-cell-text"},{tag:"span",ref:"eFilter",cls:"ag-header-icon ag-header-label-icon ag-filter-icon",attrs:i},t?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:null]}]}}(!(null===i||void 0===i||!i.active),t)}init(e){this.params=e;const{sortSvc:t,touchSvc:i,rowNumbersSvc:n,userCompFactory:o}=this.beans,s=null===t||void 0===t?void 0:t.getSortIndicatorSelector();var r;(this.currentTemplate=this.workOutTemplate(e,!!s),this.setTemplate(this.currentTemplate,s?[s]:void 0),this.eLabel)&&(null!==(r=this.mouseListener)&&void 0!==r||(this.mouseListener=this.createManagedBean(new Ype(e.column,this.eLabel))));null===i||void 0===i||i.setupForHeader(this),this.setMenu(),this.setupSort(),this.setupColumnRefIndicator(),null===n||void 0===n||n.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(o,e),this.setDisplayName(e)}workOutInnerHeaderComponent(e,t){const i=function(e,t,i){return e.getCompDetails(t,vae,void 0,i)}(e,t,t);i&&(this.isLoadingInnerComponent=!0,i.newAgStackInstance().then(e=>{this.isLoadingInnerComponent=!1,e&&(this.isAlive()?(this.innerHeaderComponent=e,this.eText&&this.eText.appendChild(e.getGui())):this.destroyBean(e))}))}setDisplayName(e){const{displayName:t}=e,i=this.currentDisplayName;this.currentDisplayName=t,!this.eText||i===t||this.innerHeaderComponent||this.isLoadingInnerComponent||(this.eText.textContent=jie(t))}addInIcon(e,t,i){const n=_ue(e,this.beans,i);n&&t.appendChild(n)}workOutShowMenu(){var e;return this.params.enableMenu&&!(null===(e=this.beans.menuSvc)||void 0===e||!e.isHeaderMenuButtonEnabled())}shouldSuppressMenuHide(){var e;return!(null===(e=this.beans.menuSvc)||void 0===e||!e.isHeaderMenuButtonAlwaysShowEnabled())}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu)return zne(this.eMenu),void(this.eMenu=void 0);const{gos:e,eMenu:t,params:i}=this,n=_se(e);this.addInIcon(n?"menu":"menuAlt",t,i.column),t.classList.toggle("ag-header-menu-icon",!n);const o=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=o,this.addManagedElementListeners(t,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(o)}toggleMenuAlwaysShow(e){var t;null===(t=this.eMenu)||void 0===t||t.classList.toggle("ag-header-menu-always-show",e)}showColumnMenu(e){const{currentSuppressMenuHide:t,params:i}=this;t||this.toggleMenuAlwaysShow(!0),i.showColumnMenu(e,()=>{t||this.toggleMenuAlwaysShow(!1)})}onMenuKeyboardShortcut(e){const{params:t,gos:i,beans:n,eMenu:o,eFilterButton:s}=this,r=t.column,a=_se(i);var l,d;if(e&&!a){if(null!==(l=n.menuSvc)&&void 0!==l&&l.isFilterMenuInHeaderEnabled(r))return t.showFilter(null!==(d=null!==s&&void 0!==s?s:o)&&void 0!==d?d:this.getGui()),!0}else if(t.enableMenu){var c;return this.showColumnMenu(null!==(c=null!==o&&void 0!==o?o:s)&&void 0!==c?c:this.getGui()),!0}return!1}setupSort(){const{sortSvc:e}=this.beans;if(!e)return;const{enableSorting:t,column:i}=this.params;if(this.currentSort=t,!this.eSortIndicator){this.eSortIndicator=this.createBean(e.createSortIndicator(!0));const{eSortIndicator:t,eSortOrder:i,eSortAsc:n,eSortDesc:o,eSortMixed:s,eSortNone:r,eSortAbsoluteAsc:a,eSortAbsoluteDesc:l}=this;t.attachCustomElements(i,n,o,s,r,a,l)}this.eSortIndicator.setupSort(i),this.currentSort&&e.setupHeader(this,i)}setupColumnRefIndicator(){const{eColRef:e,beans:{editModelSvc:t},params:i}=this;e&&(this.currentRef=i.column.formulaRef,e.textContent=this.currentRef,Mne(e,!1),this.addManagedEventListeners({cellEditingStarted:()=>{const i=null===t||void 0===t?void 0:t.getEditPositions(),n=!!this.currentRef&&!(null===i||void 0===i||!i.some(e=>e.column.isAllowFormula()));Mne(e,n)},cellEditingStopped:()=>{Mne(e,!1)}}))}setupFilterIcon(){const{eFilter:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterIcon,e,()=>{const i=t.column.isFilterActive();Mne(e,i,{skipAriaHidden:!0})},"filterActive")}setupFilterButton(){const{eFilterButton:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterButton,e,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(e,{click:()=>t.showFilter(e)}):this.eFilterButton=void 0}configureFilter(e,t,i,n){if(!e)return zne(t),!1;const o=this.params.column;return this.addInIcon(n,t,o),this.addManagedListeners(o,{filterChanged:i}),i(),!0}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){var t;const{eFilterButton:i,eMenu:n}=this;var o;return e?null!==(o=null!==i&&void 0!==i?i:n)&&void 0!==o?o:this.getGui():null!==(t=null!==n&&void 0!==n?n:i)&&void 0!==t?t:this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent=this.destroyBean(this.innerHeaderComponent),this.mouseListener=this.destroyBean(this.mouseListener)}}},icons:{menu:"menu",menuAlt:"menu-alt"}},Xpe={moduleName:"ColumnGroupHeaderComp",version:Qoe,userComponents:{agColumnGroupHeader:class extends hae{constructor(){super($pe),this.agOpened=lae,this.agClosed=lae,this.agLabel=lae,this.isLoadingInnerComponent=!1}init(e){const{userCompFactory:t,touchSvc:i}=this.beans;this.params=e,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(t,e),this.setupLabel(e),this.addGroupExpandIcon(e),this.setupExpandIcons(),null===i||void 0===i||i.setupForHeaderGroup(this)}checkWarnings(){this.params.template&&lse(89)}workOutInnerHeaderGroupComponent(e,t){const i=function(e,t,i){return e.getCompDetails(t,yae,void 0,i)}(e,t,t);i&&(this.isLoadingInnerComponent=!0,i.newAgStackInstance().then(e=>{this.isLoadingInnerComponent=!1,e&&(this.isAlive()?(this.innerHeaderGroupComponent=e,this.agLabel.appendChild(e.getGui())):this.destroyBean(e))}))}setupExpandIcons(){const{agOpened:e,agClosed:t,params:{columnGroup:i},beans:{colGroupSvc:n}}=this;this.addInIcon("columnGroupOpened",e),this.addInIcon("columnGroupClosed",t);const o=e=>{if(lce(e))return;const t=!i.isExpanded();n.setColumnGroupOpened(i.getProvidedColumnGroup(),t,"uiColumnExpanded")};this.addTouchAndClickListeners(t,o),this.addTouchAndClickListeners(e,o);const s=e=>{ace(e)};this.addManagedElementListeners(t,{dblclick:s}),this.addManagedElementListeners(e,{dblclick:s}),this.addManagedElementListeners(this.getGui(),{dblclick:o}),this.updateIconVisibility();const r=i.getProvidedColumnGroup(),a=this.updateIconVisibility.bind(this);this.addManagedListeners(r,{expandedChanged:a,expandableChanged:a})}addTouchAndClickListeners(e,t){var i;null===(i=this.beans.touchSvc)||void 0===i||i.setupForHeaderGroupElement(this,e,t),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){const{agOpened:e,agClosed:t,params:{columnGroup:i}}=this;if(i.isExpandable()){const n=i.isExpanded();Mne(e,n),Mne(t,!n)}else Mne(e,!1),Mne(t,!1)}addInIcon(e,t){const i=_ue(e,this.beans,null);i&&t.appendChild(i)}addGroupExpandIcon(e){if(!e.columnGroup.isExpandable()){const{agOpened:e,agClosed:t}=this;Mne(e,!1),Mne(t,!1)}}setupLabel(e){var t;const{displayName:i,columnGroup:n}=e,{innerHeaderGroupComponent:o,isLoadingInnerComponent:s}=this,r=o||s;Fie(i)&&!r&&(this.agLabel.textContent=jie(i)),this.toggleCss("ag-sticky-label",!(null!==(t=n.getColGroupDef())&&void 0!==t&&t.suppressStickyLabel))}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}}},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}},qpe={moduleName:"AnimationFrame",version:Qoe,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.p1={list:[],sorted:!1},this.p2={list:[],sorted:!1},this.f1={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastScrollTop=0,this.taskCount=0}setScrollTop(e){this.scrollGoingDown=e>=this.lastScrollTop,0===e&&(this.scrollGoingDown=!0),this.lastScrollTop=e}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame"),this.batchFrameworkComps=this.beans.frameworkOverrides.batchFrameworkComps}verify(){!1===this.active&&lse(92)}createTask(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.verify();let s=i;n&&this.batchFrameworkComps&&(s="f1");const r={task:e,index:t,createOrder:++this.taskCount,deferred:o};this.addTaskToList(this[s],r),this.schedule()}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((e,i)=>e.deferred!==i.deferred?e.deferred?-1:1:e.index!==i.index?t*(i.index-e.index):i.createOrder-e.createOrder),e.sorted=!0}addDestroyTask(e){this.verify(),this.destroyTasks.push(e),this.schedule()}executeFrame(e){const{p1:t,p2:i,f1:n,destroyTasks:o,beans:s}=this,{ctrlsSvc:r,frameworkOverrides:a}=s,l=t.list,d=i.list,c=n.list,u=Date.now();let h=0;const p=e<=0,g=r.getScrollFeature();for(;p||h<e;){if(!g.scrollGridIfNeeded()){let s;if(l.length)this.sortTaskList(t),s=l.pop().task;else if(d.length)this.sortTaskList(i),s=d.pop().task;else if(c.length)a.wrapOutgoing(()=>{for(;p||h<e;){if(g.scrollGridIfNeeded())break;if(!c.length)break;this.sortTaskList(n),s=c.pop().task,s(),h=Date.now()-u}}),s=()=>{};else{if(!o.length)break;s=o.pop()}s()}h=Date.now()-u}l.length||d.length||c.length||o.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);qne(this.beans,e)}isQueueEmpty(){return!this.ticking}}]},Qpe={moduleName:"Touch",version:Qoe,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(e,t){this.mockContextMenu(e,e.eBodyViewport,t)}mockHeaderContextMenu(e,t){this.mockContextMenu(e,e.eGui,t)}mockRowContextMenu(e){if(!Uae())return;this.mockContextMenu(e,e.element,(t,i,n)=>{var o,s;const{rowCtrl:r,cellCtrl:a}=e.getControlsForEventTarget(null!==(o=null===n||void 0===n?void 0:n.target)&&void 0!==o?o:null);null!==a&&void 0!==a&&a.column&&a.dispatchCellContextMenuEvent(null!==n&&void 0!==n?n:null),null===(s=this.beans.contextMenuSvc)||void 0===s||s.handleContextMenuMouseEvent(void 0,n,r,a)})}handleCellDoubleClick(e,t){return!!(()=>{if(!Uae()||soe("dblclick"))return!1;const t=Date.now(),i=t-e.lastIPadMouseClickEvent<200;return e.lastIPadMouseClickEvent=t,i})()&&(e.onCellDoubleClicked(t),t.preventDefault(),!0)}setupForHeader(e){const{gos:t,sortSvc:i,menuSvc:n}=this.beans;if(t.get("suppressTouch"))return;const{params:o,eMenu:s,eFilterButton:r}=e,a=new nhe(e.getGui(),!0);e.addDestroyFunc(()=>a.destroy());const l=e.shouldSuppressMenuHide(),d=l&&Fie(s)&&o.enableMenu;let c=a;if(d&&(c=new nhe(s,!0),e.addDestroyFunc(()=>c.destroy())),o.enableMenu||null!==n&&void 0!==n&&n.isHeaderContextMenuEnabled(o.column)){const t=d?"tap":"longTap",i=e=>o.showColumnMenuAfterMouseClick(e.touchStart);e.addManagedListeners(c,{[t]:i}),e.addManagedListeners(a,{longTap:i})}if(o.enableSorting){const t=e=>{const t=e.touchStart.target;l&&(null!==s&&void 0!==s&&s.contains(t)||null!==r&&void 0!==r&&r.contains(t))||null===i||void 0===i||i.progressSort(o.column,!1,"uiColumnSorted")};e.addManagedListeners(a,{tap:t})}if(o.enableFilterButton&&r){const t=new nhe(r,!0);e.addManagedListeners(t,{tap:()=>o.showFilter(r)}),e.addDestroyFunc(()=>t.destroy())}}setupForHeaderGroup(e){var t;const i=e.params;if(null!==(t=this.beans.menuSvc)&&void 0!==t&&t.isHeaderContextMenuEnabled(i.columnGroup.getProvidedColumnGroup())){const t=new nhe(i.eGridHeader,!0),n=e=>i.showColumnMenuAfterMouseClick(e.touchStart);e.addManagedListeners(t,{longTap:n}),e.addDestroyFunc(()=>t.destroy())}}setupForHeaderGroupElement(e,t,i){const n=new nhe(t,!0);e.addManagedListeners(n,{tap:i}),e.addDestroyFunc(()=>n.destroy())}mockContextMenu(e,t,i){if(!Uae())return;const n=new nhe(t);e.addManagedListeners(n,{longTap:e=>{coe(this.beans,e.touchEvent)&&i(void 0,e.touchStart,e.touchEvent)}}),e.addDestroyFunc(()=>n.destroy())}}]};var Jpe=class{constructor(){this.cellValidations=new Map}getCellValidation(e){var t;const{rowNode:i,column:n}=e||{};return null===(t=this.cellValidations)||void 0===t||null===(t=t.get(i))||void 0===t?void 0:t.get(n)}hasCellValidation(e){return null!==e&&void 0!==e&&e.rowNode&&e.column?!!this.getCellValidation(e):this.cellValidations.size>0}setCellValidation(e,t){const{rowNode:i,column:n}=e;this.cellValidations.has(i)||this.cellValidations.set(i,new Map),this.cellValidations.get(i).set(n,t)}clearCellValidation(e){var t;const{rowNode:i,column:n}=e;null===(t=this.cellValidations.get(i))||void 0===t||t.delete(n)}setCellValidationMap(e){this.cellValidations=e}getCellValidationMap(){return this.cellValidations}clearCellValidationMap(){this.cellValidations.clear()}},ege=class{constructor(){this.rowValidations=new Map}getRowValidation(e){const{rowNode:t}=e||{};return this.rowValidations.get(t)}hasRowValidation(e){return null!==e&&void 0!==e&&e.rowNode?!!this.getRowValidation(e):this.rowValidations.size>0}setRowValidation(e,t){let{rowNode:i}=e;this.rowValidations.set(i,t)}clearRowValidation(e){let{rowNode:t}=e;this.rowValidations.delete(t)}setRowValidationMap(e){this.rowValidations=e}getRowValidationMap(){return this.rowValidations}clearRowValidationMap(){this.rowValidations.clear()}};function tge(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{rowIndex:n,rowId:o,rowCtrl:s,rowPinned:r}=i;if(s)return s;const{rowModel:a,rowRenderer:l}=e;let{rowNode:d}=i;return d||(o?d=function(e,t,i){const{rowModel:n,pinnedRowModel:o}=e;let s;return null!==s&&void 0!==s||(s=null===n||void 0===n?void 0:n.getRowNode(t)),i?null!==s&&void 0!==s||(s=null===o||void 0===o?void 0:o.getPinnedRowById(t,i)):(null!==s&&void 0!==s||(s=null===o||void 0===o?void 0:o.getPinnedRowById(t,"top")),null!==s&&void 0!==s||(s=null===o||void 0===o?void 0:o.getPinnedRowById(t,"bottom"))),s}(e,o,r):null!=n&&(d=a.getRow(n))),null===(t=l.getRowCtrls(d?[d]:[]))||void 0===t?void 0:t[0]}function ige(e){var t,i,n,o;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{cellCtrl:r,colId:a,columnId:l,column:d}=s;if(r)return r;const c=e.colModel.getCol(null!==(t=null!==a&&void 0!==a?a:l)&&void 0!==t?t:nge(d)),u=null!==(i=s.rowCtrl)&&void 0!==i?i:tge(e,s),h=null!==(n=null===u||void 0===u?void 0:u.getCellCtrl(c))&&void 0!==n?n:void 0;if(h)return h;const p=null!==(o=s.rowNode)&&void 0!==o?o:null===u||void 0===u?void 0:u.rowNode;var g;return p?null===(g=e.rowRenderer.getCellCtrls([p],[c]))||void 0===g?void 0:g[0]:void 0}function nge(e){if(e)return"string"===typeof e?e:e.getColId()}var oge=Symbol("unedited");function sge(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=[],n=e.rowRenderer.getCellCtrls(t.rowNodes,t.columns);for(const s of n){var o;const e=null===(o=s.comp)||void 0===o?void 0:o.getCellEditor();e&&i.push({ctrl:s,editor:Tae(e)})}return i}function rge(e,t,i){const n={editorValueExists:!1};if(cge(e)){var o,s;const e=null===(o=t.getValidationErrors)||void 0===o?void 0:o.call(t);if((null!==(s=null===e||void 0===e?void 0:e.length)&&void 0!==s?s:0)>0)return n}if(null!==i&&void 0!==i&&i.isCancelling)return n;if(null!==i&&void 0!==i&&i.isStopping){var r;const e=null===t||void 0===t||null===(r=t.isCancelAfterEnd)||void 0===r?void 0:r.call(t);if(e)return p(p({},n),{},{isCancelAfterEnd:e})}return{editorValue:t.getValue(),editorValueExists:!0}}function age(e,t){for(const r of null!==(i=null===(n=e.editModelSvc)||void 0===n?void 0:n.getEditPositions())&&void 0!==i?i:[]){var i,n,o;const a=ige(e,r);if(!a)continue;const l=null===(o=a.comp)||void 0===o?void 0:o.getCellEditor();if(!l)continue;const{editorValue:d,editorValueExists:c,isCancelAfterEnd:u}=rge(e,l,t);var s;if(u)null===(s=e.editModelSvc)||void 0===s||s.setEdit(r,{editorState:{isCancelAfterEnd:u}});lge(e,r,d,void 0,!c,t)}}function lge(e,t,i,n,o,s){var r;const{editModelSvc:a,valueSvc:l}=e;if(!a)return;const{rowNode:d,column:c}=t;if(!d||!c)return;let u=a.getEdit(t,!0);if(null===(r=u)||void 0===r||!r.sourceValue){const i={sourceValue:l.getValue(c,d,void 0,"api"),pendingValue:u?dge(e,u.editorValue,!1,c):oge};null!==s&&void 0!==s&&s.persist&&(i.state="changed"),u=a.setEdit(t,i)}a.setEdit(t,{editorValue:o?dge(e,u.sourceValue,!0,c):i}),null!==s&&void 0!==s&&s.persist&&function(e,t){const{editModelSvc:i}=e,n=null===i||void 0===i?void 0:i.getEdit(t,!0);null===i||void 0===i||i.setEdit(t,{pendingValue:dge(e,null===n||void 0===n?void 0:n.editorValue,!1,t.column)})}(e,t)}function dge(e,t,i,n){const{formula:o}=e;var s;return n.isAllowFormula()&&null!==o&&void 0!==o&&o.isFormula(t)&&null!==(s=null===o||void 0===o?void 0:o.normaliseFormula(t,i))&&void 0!==s?s:t}function cge(e){var t;const{gos:i,colModel:n}=e,o=!!i.get("getFullRowEditValidationErrors"),s=null===(t=n.getColumnDefs())||void 0===t?void 0:t.filter(e=>e.editable).some(e=>{let{cellEditorParams:t}=e;const{minLength:i,maxLength:n,getValidationErrors:o,min:s,max:r}=t||{};return void 0!==i||void 0!==n||void 0!==o||void 0!==s||void 0!==r}),r=e.gridApi.getCellEditorInstances().some(e=>e.getValidationElement||e.getValidationErrors);return s||o||r}function uge(e,t){if(!t&&!cge(e))return;const i=sge(e),n=new Jpe,{ariaAnnounce:o,localeSvc:s,editModelSvc:r,gos:a}=e,l="fullRow"===a.get("editType"),d=foe(s)("ariaValidationErrorPrefix","Cell Editor Validation");for(const x of i){var c,u,h,p;const{ctrl:e,editor:t}=x,{rowNode:i,column:s}=e,r=null!==(c=null===(u=t.getValidationErrors)||void 0===u?void 0:u.call(t))&&void 0!==c?c:[],a=(null===(h=t.getValidationElement)||void 0===h?void 0:h.call(t,!1))||!(null!==(p=t.isPopup)&&void 0!==p&&p.call(t))&&e.eGui;if(a){const e=null!=r&&r.length>0,t=e?r.join(". "):"";sne(a,e),e&&o.announceValue("".concat(d," ").concat(r),"editorValidation"),a instanceof HTMLInputElement?a.setCustomValidity(t):a.classList.toggle("invalid",e)}(null===r||void 0===r?void 0:r.length)>0&&n.setCellValidation({rowNode:i,column:s},{errorMessages:r})}age(e,{persist:!1}),null===r||void 0===r||r.setCellValidationModel(n);const g=new Set;for(const{ctrl:x}of i)g.add(x.rowCtrl);if(l){const t=hge(e);null===r||void 0===r||r.setRowValidationModel(t)}for(const x of g.values()){var m;null===(m=x.rowEditStyleFeature)||void 0===m||m.applyRowStyles();for(const e of x.getAllCellCtrls()){var f,v,y,b;null===(f=e.tooltipFeature)||void 0===f||f.refreshTooltip(!0),null===(v=e.editorTooltipFeature)||void 0===v||v.refreshTooltip(!0),null===(y=e.editStyleFeature)||void 0===y||null===(b=y.applyCellStyles)||void 0===b||b.call(y)}}}var hge=e=>{var t;const i=new ege,n=e.gos.get("getFullRowEditValidationErrors"),o=null===(t=e.editModelSvc)||void 0===t?void 0:t.getEditMap();if(!o)return i;for(const a of o.keys()){var s;const e=o.get(a);if(!e)continue;const t=[],{rowIndex:l,rowPinned:d}=a;for(const i of e.keys()){var r;const n=e.get(i);if(!n)continue;const{editorValue:o,pendingValue:s,sourceValue:a}=n,c=null!==(r=null!==o&&void 0!==o?o:s===oge?void 0:s)&&void 0!==r?r:a;t.push({column:i,colId:i.getColId(),rowIndex:l,rowPinned:d,oldValue:a,newValue:c})}const c=null!==(s=null===n||void 0===n?void 0:n({editorsState:t}))&&void 0!==s?s:[];c.length>0&&i.setRowValidation({rowNode:a},{errorMessages:c})}return i};var pge=class extends yoe{constructor(e,t,i,n){super(),this.cellCtrl=e,this.rowNode=i,this.rowCtrl=n,this.beans=t}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(e){const t=e.key;switch(t){case Eae.ENTER:this.onEnterKeyDown(e);break;case Eae.F2:this.onF2KeyDown(e);break;case Eae.ESCAPE:this.onEscapeKeyDown(e);break;case Eae.TAB:this.onTabKeyDown(e);break;case Eae.BACKSPACE:case Eae.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case Eae.DOWN:case Eae.UP:case Eae.RIGHT:case Eae.LEFT:this.onNavigationKeyDown(e,t)}}onNavigationKeyDown(e,t){var i;const{cellCtrl:n,beans:o}=this;if(null===(i=o.editSvc)||void 0===i||!i.isEditing(n,{withOpenEditor:!0})){if(e.shiftKey&&n.isRangeSelectionEnabled())this.onShiftRangeSelect(e);else{var s;const i=n.getFocusedCellPosition();null===(s=o.navigation)||void 0===s||s.navigateToNextCell(e,t,i,!0)}e.preventDefault()}}onShiftRangeSelect(e){const{rangeSvc:t,navigation:i}=this.beans;if(!t)return;const n=t.extendLatestRangeInDirection(e);n&&(e.key===Eae.LEFT||e.key===Eae.RIGHT?null===i||void 0===i||i.ensureColumnVisible(n.column):null===i||void 0===i||i.ensureRowVisible(n.rowIndex))}onTabKeyDown(e){var t;null===(t=this.beans.navigation)||void 0===t||t.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:i,beans:n,rowNode:o}=this,{gos:s,rangeSvc:r,eventSvc:a,editSvc:l}=n;if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),!function(e){return e===Eae.DELETE||!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&e===Eae.BACKSPACE&&Kae()}(e,s.get("enableCellEditingOnBackspace"))||null!==l&&void 0!==l&&l.isEditing(i,{withOpenEditor:!0})){if(null===l||void 0===l||!l.isEditing(i,{withOpenEditor:!0})){var d;null===(d=n.editSvc)||void 0===d||d.startEditing(i,{startedEdit:!0,event:t})}}else if(r&&Bse(s))r.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(i.isCellEditable()){const{column:e}=i,t=this.beans.valueSvc.getDeleteValue(e,o);o.setDataValue(e,t,"cellClear")}a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}onEnterKeyDown(e){const{cellCtrl:t,beans:i}=this,{editSvc:n,navigation:o}=i,s=null===n||void 0===n?void 0:n.isEditing(t,{withOpenEditor:!0}),r=t.rowNode,a=null===n||void 0===n?void 0:n.isRowEditing(r,{withOpenEditor:!0}),l=t=>{(null===n||void 0===n?void 0:n.startEditing(t,{startedEdit:!0,event:e,source:"edit"}))&&e.preventDefault()};if(s||a){var d;if(this.isCtrlEnter(e))return void(null===n||void 0===n||n.applyBulkEdit(t,(null===i||void 0===i||null===(d=i.rangeSvc)||void 0===d?void 0:d.getCellRanges())||[]));if(uge(i),"block-stop"===(null===n||void 0===n?void 0:n.checkNavWithValidation(void 0,e)))return;null!==n&&void 0!==n&&n.isEditing(t,{withOpenEditor:!0})?null===n||void 0===n||n.stopEditing(t,{event:e,source:"edit"}):a&&!t.isCellEditable()?null===n||void 0===n||n.stopEditing({rowNode:r},{event:e,source:"edit"}):l(t)}else if(i.gos.get("enterNavigatesVertically")){const i=e.shiftKey?Eae.UP:Eae.DOWN;null===o||void 0===o||o.navigateToNextCell(null,i,t.cellPosition,!1)}else{if(null!==n&&void 0!==n&&n.hasValidationErrors())return;null!==n&&void 0!==n&&n.hasValidationErrors(t)&&n.revertSingleCellEdit(t,!0),l(t)}}isCtrlEnter(e){return(e.ctrlKey||e.metaKey)&&e.key===Eae.ENTER}onF2KeyDown(e){const{cellCtrl:t,beans:{editSvc:i}}=this;(null===i||void 0===i?void 0:i.isEditing())&&(uge(this.beans),"block-stop"===(null===i||void 0===i?void 0:i.checkNavWithValidation(void 0,e)))||null===i||void 0===i||i.startEditing(t,{startedEdit:!0,event:e})}onEscapeKeyDown(e){const{cellCtrl:t,beans:{editSvc:i}}=this;"block-stop"===(null===i||void 0===i?void 0:i.checkNavWithValidation(t,e))&&i.revertSingleCellEdit(t),setTimeout(()=>{null===i||void 0===i||i.stopEditing(t,{event:e,cancel:!0})})}processCharacter(e){const t=e.target!==this.eGui,{beans:{editSvc:i},cellCtrl:n}=this;if(t)return;if(null!==i&&void 0!==i&&i.isEditing(n,{withOpenEditor:!0}))return;if(e.key===Eae.SPACE)this.onSpaceKeyDown(e);else if(null!==i&&void 0!==i&&i.isCellEditable(n,"ui")){var o;if(null!==i&&void 0!==i&&i.hasValidationErrors()&&(null===i||void 0===i||!i.hasValidationErrors(n)))return;null===i||void 0===i||i.startEditing(n,{startedEdit:!0,event:e,source:"api"});const t=n.editCompDetails;!(null!==t&&void 0!==t&&null!==(o=t.params)&&void 0!==o&&o.suppressPreventDefault)&&e.preventDefault()}}onSpaceKeyDown(e){const{gos:t,editSvc:i}=this.beans,{rowNode:n}=this.cellCtrl;var o;null!==i&&void 0!==i&&i.isEditing(this.cellCtrl,{withOpenEditor:!0})||!vse(t)||(null===(o=this.beans.selectionSvc)||void 0===o||o.handleSelectionEvent(e,n,"spaceKey"));e.preventDefault()}},gge=class extends yoe{constructor(e,t,i){super(),this.cellCtrl=e,this.column=i,this.beans=t}onMouseEvent(e,t){if(!lce(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t)}}onCellClicked(e){var t;if(null!==(t=this.beans.touchSvc)&&void 0!==t&&t.handleCellDoubleClick(this,e))return;const{eventSvc:i,rangeSvc:n,editSvc:o,editModelSvc:s,frameworkOverrides:r,gos:a}=this.beans,l=e.ctrlKey||e.metaKey,{cellCtrl:d}=this,{column:c,cellPosition:u,rowNode:h}=d,p=bce(a,c,h,e);n&&l&&!p&&n.getCellRangeCount(u)>1&&n.intersectLastRange(!0);const g=d.createEvent(e,"cellClicked");g.isEventHandlingSuppressed=p,i.dispatchEvent(g);const m=c.getColDef();if(m.onCellClicked&&window.setTimeout(()=>{r.wrapOutgoing(()=>{m.onCellClicked(g)})},0),!p&&"editing"!==(null===s||void 0===s?void 0:s.getState(d))){var f,v;const t=null===o||void 0===o?void 0:o.isEditing(),i=null!==(f=null===s||void 0===s?void 0:s.getCellValidationModel().getCellValidationMap().size)&&void 0!==f?f:0,n=null!==(v=null===s||void 0===s?void 0:s.getRowValidationModel().getRowValidationMap().size)&&void 0!==v?v:0;if(t&&(i>0||n>0))return;null!==o&&void 0!==o&&o.shouldStartEditing(d,e)?null===o||void 0===o||o.startEditing(d,{event:e}):null!==o&&void 0!==o&&o.shouldStopEditing(d,e)&&("fullRow"===this.beans.gos.get("editType")?null===o||void 0===o||o.stopEditing(d,{event:e,source:"edit"}):null===o||void 0===o||o.stopEditing(void 0,{event:e,source:"edit"}))}}onCellDoubleClicked(e){const{column:t,beans:i,cellCtrl:n}=this,{eventSvc:o,frameworkOverrides:s,editSvc:r,editModelSvc:a,gos:l}=i,d=bce(l,n.column,n.rowNode,e),c=t.getColDef(),u=n.createEvent(e,"cellDoubleClicked");if(u.isEventHandlingSuppressed=d,o.dispatchEvent(u),"function"===typeof c.onCellDoubleClicked&&window.setTimeout(()=>{s.wrapOutgoing(()=>{c.onCellDoubleClicked(u)})},0),!d&&null!==r&&void 0!==r&&r.shouldStartEditing(n,e)&&"editing"!==(null===a||void 0===a?void 0:a.getState(n))){var h,p;const t=null===r||void 0===r?void 0:r.isEditing(),i=null!==(h=null===a||void 0===a?void 0:a.getCellValidationModel().getCellValidationMap().size)&&void 0!==h?h:0,o=null!==(p=null===a||void 0===a?void 0:a.getRowValidationModel().getRowValidationMap().size)&&void 0!==p?p:0;if(t&&(i>0||o>0))return;null===r||void 0===r||r.startEditing(n,{event:e})}}onMouseDown(e){const{shiftKey:t}=e,i=e.target,{cellCtrl:n,beans:o}=this,{eventSvc:s,rangeSvc:r,rowNumbersSvc:a,focusSvc:l,gos:d,editSvc:c}=o,{column:u,rowNode:h,cellPosition:p}=n,g=bce(d,u,h,e),m=()=>{const t=n.createEvent(e,"cellMouseDown");t.isEventHandlingSuppressed=g,s.dispatchEvent(t)};if(g)return void m();if(this.isRightClickInExistingRange(e))return;const f=r&&!r.isEmpty(),v=this.containsWidget(i),y=Ire(u);if(!a||!y||a.handleMouseDownOnCell(p,e)){if(!t||!f){const t=null===c||void 0===c?void 0:c.isEditing(n),o=d.get("enableCellTextSelection")&&e.defaultPrevented,s=(Wae()||o)&&!t&&!wne(i)&&!v;n.focusCell(s,e)}if(t&&f&&!l.isCellFocused(p)){e.preventDefault();const t=l.getFocusedCell();if(t){const{column:i,rowIndex:n,rowPinned:o}=t;null!==c&&void 0!==c&&c.isEditing(t)&&(null===c||void 0===c||c.stopEditing(t)),l.setFocusedCell({column:i,rowIndex:n,rowPinned:o,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,sourceEvent:e})}}v||(null===r||void 0===r||r.handleCellMouseDown(e,p),m())}}isRightClickInExistingRange(e){const{rangeSvc:t}=this.beans;if(t){const i=t.isCellInAnyRange(this.cellCtrl.cellPosition),n=Yse(this.beans,e);if(i&&n)return!0}return!1}containsWidget(e){return Ine(e,"ag-selection-checkbox",3)||Ine(e,"ag-drag-handle",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:i}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),null===i||void 0===i||i.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:i}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),null===i||void 0===i||i.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.eGui,i=t.contains(e.target),n=t.contains(e.relatedTarget);return i&&n}},mge=class extends yoe{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.column,this.rowNode=e.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;const e=this.cellCtrl.getCellSpan();if(e||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),e||this._legacyApplyRowSpan(),e){const t=this.refreshSpanHeight.bind(this,e);t(),this.addManagedListeners(this.beans.eventSvc,{paginationChanged:t,recalculateRowBounds:t,pinnedHeightChanged:t})}}refreshSpanHeight(e){const t=e.getCellHeight();null!=t&&(this.eContent.style.height="".concat(t,"px"))}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();gre(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;const e=this.getCellWidth();this.eContent.style.width="".concat(e,"px")}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const{column:e,rowNode:t}=this,i=e.getColSpan(t),n=[];if(1===i)n.push(e);else{let t=e;const o=e.getPinned();for(let e=0;t&&e<i&&(n.push(t),t=this.beans.visibleCols.getColAfter(t),t&&!zie(t))&&o===t.getPinned();e++);}return n}onLeftChanged(){if(!this.eSetLeft)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=e+"px"}getCellLeft(){let e;return e=this.beans.gos.get("enableRtl")&&this.colsSpanning?pre(this.colsSpanning):this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.printLayout||"left"===this.column.getPinned())return e;const{visibleCols:t}=this.beans,i=t.getColsLeftWidth();if("right"===this.column.getPinned()){return i+t.bodyWidth+(e||0)}return i+(e||0)}_legacyApplyRowSpan(e){if(1===this.rowSpan&&!e)return;const t=Cse(this.beans)*this.rowSpan;this.eContent.style.height="".concat(t,"px"),this.eContent.style.zIndex="1"}destroy(){super.destroy()}},fge=0,vge=class extends yoe{constructor(e,t,i,n){super(),this.column=e,this.rowNode=t,this.rowCtrl=n,this.rangeFeature=void 0,this.rowResizeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.editStyleFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.focusEventWhileNotReady=null,this.hasBeenFocused=!1,this.hasEdit=!1,this.tooltipFeature=void 0,this.editorTooltipFeature=void 0,this.formulaTooltipFeature=void 0,this.beans=i,this.gos=i.gos,this.editSvc=i.editSvc,this.hasEdit=!!i.editSvc;const{colId:o}=e;this.instanceId=o+"-"+fge++,this.createCellPosition(),this.updateAndFormatValue(!1)}addFeatures(){var e,t;const{beans:i}=this;this.positionFeature=new mge(this,i),this.customStyleFeature=null===(e=i.cellStyles)||void 0===e?void 0:e.createCellCustomStyleFeature(this),this.editStyleFeature=null===(t=i.editSvc)||void 0===t?void 0:t.createCellStyleFeature(this),this.mouseListener=new gge(this,i,this.column),this.keyboardListener=new pge(this,i,this.rowNode,this.rowCtrl),this.enableTooltipFeature(),this.enableFormulaTooltipFeature();const{rangeSvc:n}=i;n&&Bse(i.gos)&&(this.rangeFeature=n.createCellRangeFeature(this)),Ire(this.column)&&(this.rowResizeFeature=this.beans.rowNumbersSvc.createRowNumbersRowResizerFeature(this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){const e=this.beans.context;this.positionFeature=e.destroyBean(this.positionFeature),this.editorTooltipFeature=e.destroyBean(this.editorTooltipFeature),this.customStyleFeature=e.destroyBean(this.customStyleFeature),this.editStyleFeature=e.destroyBean(this.editStyleFeature),this.mouseListener=e.destroyBean(this.mouseListener),this.keyboardListener=e.destroyBean(this.keyboardListener),this.rangeFeature=e.destroyBean(this.rangeFeature),this.rowResizeFeature=e.destroyBean(this.rowResizeFeature),this.disableTooltipFeature(),this.disableFormulaTooltipFeature()}enableTooltipFeature(e,t){var i;this.tooltipFeature=null===(i=this.beans.tooltipSvc)||void 0===i?void 0:i.enableCellTooltipFeature(this,e,t)}enableFormulaTooltipFeature(){var e;this.formulaTooltipFeature=null===(e=this.beans.tooltipSvc)||void 0===e?void 0:e.setupFormulaTooltip(this)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}disableFormulaTooltipFeature(){this.formulaTooltipFeature=this.beans.context.destroyBean(this.formulaTooltipFeature)}enableEditorTooltipFeature(e){var t;this.editorTooltipFeature&&this.disableEditorTooltipFeature(),this.editorTooltipFeature=null===(t=this.beans.tooltipSvc)||void 0===t?void 0:t.setupCellEditorTooltip(this,e),uge(this.beans)}disableEditorTooltipFeature(){this.editorTooltipFeature=this.beans.context.destroyBean(this.editorTooltipFeature)}setComp(e,t,i,n,o,s,r){var a,l,d,c,u,h,p,g,m;(this.comp=e,this.eGui=t,this.printLayout=o,null!==r&&void 0!==r||(r=this),this.addDomData(r),this.addFeatures(),r.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.setupFocus(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(n,r),this.refreshFirstAndLastStyles(),this.checkFormulaError(),this.refreshAriaColIndex(),null===(a=this.positionFeature)||void 0===a||a.init(),null===(l=this.customStyleFeature)||void 0===l||l.setComp(e),null===(d=this.editStyleFeature)||void 0===d||d.setComp(e),null===(c=this.tooltipFeature)||void 0===c||c.refreshTooltip(),null===(u=this.keyboardListener)||void 0===u||u.init(),null===(h=this.rangeFeature)||void 0===h||h.setComp(e),null===(p=this.rowResizeFeature)||void 0===p||p.refreshRowResizer(),s&&this.isCellEditable()||this.hasEdit&&null!==(g=this.editSvc)&&void 0!==g&&g.isEditing(this,{withOpenEditor:!0}))?null===(m=this.editSvc)||void 0===m||m.startEditing(this,{startedEdit:!1,source:"api",silent:!0,continueEditing:!0}):this.showValue(!1,!0);if(this.onCompAttachedFuncs.length){for(const e of this.onCompAttachedFuncs)e();this.onCompAttachedFuncs=[]}}checkFormulaError(){var e,t;const i=!(null===(e=this.beans.formula)||void 0===e||!e.getFormulaError(this.column,this.rowNode));this.eGui.classList.toggle("formula-error",i),null===(t=this.formulaTooltipFeature)||void 0===t||t.refreshTooltip(),i?this.disableTooltipFeature():this.enableTooltipFeature()}setupAutoHeight(e,t){var i,n;this.isAutoHeight=null!==(i=null===(n=this.beans.rowAutoHeight)||void 0===n?void 0:n.setupCellAutoHeight(this,e,t))&&void 0!==i&&i}getCellAriaRole(){var e;return null!==(e=this.column.getColDef().cellAriaRole)&&void 0!==e?e:"gridcell"}isCellRenderer(){const e=this.column.getColDef();return null!=e.cellRenderer||null!=e.cellRendererSelector}getValueToDisplay(){var e;return null!==(e=this.valueFormatted)&&void 0!==e?e:this.value}getDeferLoadingCellRenderer(){var e;const{beans:t,column:i}=this,{userCompFactory:n,ctrlsSvc:o,eventSvc:s}=t,r=i.getColDef(),a=this.createCellRendererParams();a.deferRender=!0;const l=Nae(n,r,a);if(null!==(e=o.getGridBodyCtrl())&&void 0!==e&&null!==(e=e.scrollFeature)&&void 0!==e&&e.isScrolling()){let e;const t=new pae(t=>{e=t}),[i]=this.addManagedListeners(s,{bodyScrollEnd:()=>{e(),i()}});return{loadingComp:l,onReady:t}}return{loadingComp:l,onReady:pae.resolve()}}showValue(e,t){var i,n,o,s;const{beans:r,column:a,rowNode:l,rangeFeature:d}=this,{userCompFactory:c}=r;let u,h=this.getValueToDisplay();const g=l.stub&&null==(null===(i=l.groupData)||void 0===i?void 0:i[a.getId()]),m=a.getColDef();if(g||this.isCellRenderer()){const e=this.createCellRendererParams();u=!g||Ire(a)?Lae(c,m,e):Nae(c,m,e)}if(!u&&!g&&null!==(n=r.findSvc)&&void 0!==n&&n.isMatch(l,a)){const e=this.createCellRendererParams();u=Lae(c,p(p({},a.getColDef()),{},{cellRenderer:"agFindCellRenderer"}),e)}if(this.hasEdit&&this.editSvc.isBatchEditing()&&this.editSvc.isRowEditing(l,{checkSiblings:!0})){const e=this.editSvc.prepDetailsDuringBatch(this,{compDetails:u,valueToDisplay:h});e&&(e.compDetails?u=e.compDetails:e.valueToDisplay&&(h=e.valueToDisplay))}this.comp.setRenderDetails(u,h,e),null===(o=this.customRowDragComp)||void 0===o||o.refreshVisibility(),!t&&d&&qne(r,()=>null===d||void 0===d?void 0:d.refreshHandle()),null===(s=this.rowResizeFeature)||void 0===s||s.refreshRowResizer()}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e),!0),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}getCellValueClass(){let e="";return"agCheckboxCellRenderer"===this.column.getColDef().cellRenderer&&(e=" ag-allow-overflow"),"".concat("ag-cell-value").concat(e)}isIncludeControl(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(null==this.rowNode.rowPinned||t&&ehe(this.rowNode))&&!!e}isCheckboxSelection(e){const{rowSelection:t,groupDisplayType:i}=this.beans.gridOptions,n=zse(t),o=Dre(this.column);return("custom"!==i||"selectionColumn"===n||!o)&&(e.checkboxSelection||o&&"object"===typeof t&&Fse(t))}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e),!0),i=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),n=this.includeDndSource!=this.isIncludeControl(e.dndSource),o=this.isAutoHeight!=this.column.isAutoHeight();return t||i||n||o}onPopupEditorClosed(){const{editSvc:e}=this.beans;null!==e&&void 0!==e&&e.isEditing(this,{withOpenEditor:!0})&&(null===e||void 0===e||e.stopEditing(this,{source:null!==e&&void 0!==e&&e.isBatchEditing()?"ui":"api"}))}stopEditing(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{editSvc:i}=this.beans;return null!==(e=null===i||void 0===i?void 0:i.stopEditing(this,{cancel:t,source:null!==i&&void 0!==i&&i.isBatchEditing()?"ui":"api"}))&&void 0!==e&&e}createCellRendererParams(){const{value:e,valueFormatted:t,column:i,rowNode:n,comp:o,eGui:s,beans:{valueSvc:r,gos:a,editSvc:l}}=this;return Kse(a,{value:e,valueFormatted:t,getValue:()=>r.getValueForDisplay({column:i,node:n}).value,setValue:e=>(null===l||void 0===l?void 0:l.setDataValue({rowNode:n,column:i},e))||n.setDataValue(i,e),formatValue:this.formatValue.bind(this),data:n.data,node:n,pinned:i.getPinned(),colDef:i.getColDef(),column:i,refreshCell:this.refreshCell.bind(this),eGridCell:s,eParentOfValue:o.getParentOfValue(),registerRowDragger:(e,t,i,n)=>this.registerRowDragger(e,t,n),setTooltip:(e,t)=>{var i;a.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(e,t),null===(i=this.tooltipFeature)||void 0===i||i.refreshTooltip()}})}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){var t;this.refreshShouldDestroy()?null===(t=this.rowCtrl)||void 0===t||t.recreateCell(this):this.refreshCell(e);if(this.hasEdit&&this.editCompDetails){const{editSvc:e,comp:t}=this;null!==t&&void 0!==t&&t.getCellEditor()||!e.isEditing(this,{withOpenEditor:!0})||e.startEditing(this,{startedEdit:!1,source:"api",silent:!0})}}refreshCell(){let{force:e,suppressFlash:t,newData:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{editStyleFeature:n,customStyleFeature:o,rowCtrl:{rowEditStyleFeature:s},beans:{cellFlashSvc:r,filterManager:a},column:l,comp:d,suppressRefreshCell:c,tooltipFeature:u}=this;if(c)return;const{field:h,valueGetter:p,showRowGroup:g,enableCellChangeFlash:m}=l.getColDef(),f=e||null==h&&null==p&&null==g||i,v=!!d,y=this.updateAndFormatValue(v);if(v){if(f||y){var b;this.showValue(!!i,!1);const e=null===a||void 0===a?void 0:a.isSuppressFlashingCellsBecauseFiltering();!t&&!e&&m&&(null===r||void 0===r||r.flashCell(this)),null===n||void 0===n||null===(b=n.applyCellStyles)||void 0===b||b.call(n),null===o||void 0===o||o.applyUserStyles(),null===o||void 0===o||o.applyClassesFromColDef(),null===s||void 0===s||s.applyRowStyles(),this.checkFormulaError()}null===u||void 0===u||u.refreshTooltip(),null===o||void 0===o||o.applyCellClassRules()}}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(e){var t;return null!==(t=this.callValueFormatter(e))&&void 0!==t?t:e}callValueFormatter(e){return this.beans.valueSvc.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,i=this.valueFormatted,{value:n,valueFormatted:o}=this.beans.valueSvc.getValueForDisplay({column:this.column,node:this.rowNode,includeValueFormatted:!0});return this.value=n,this.valueFormatted=o,!e||(!this.valuesAreEqual(t,this.value)||this.valueFormatted!=i)}valuesAreEqual(e,t){const i=this.column.getColDef();return i.equals?i.equals(e,t):e===t}addDomData(e){const t=this.eGui;Mse(this.beans.gos,t,Sce,this),e.addDestroyFunc(()=>Mse(this.beans.gos,t,Sce,null))}createEvent(e,t){const{rowNode:i,column:n,value:o,beans:s}=this;return function(e,t,i,n,o){let{rowNode:s,column:r}=n;return Kse(e.gos,{type:i,node:s,data:s.data,value:o,column:r,colDef:r.getColDef(),rowPinned:s.rowPinned,event:t,rowIndex:s.rowIndex})}(s,e,t,{rowNode:i,column:n},o)}processCharacter(e){var t;null===(t=this.keyboardListener)||void 0===t||t.processCharacter(e)}onKeyDown(e){var t;null===(t=this.keyboardListener)||void 0===t||t.onKeyDown(e)}onMouseEvent(e,t){var i;null===(i=this.mouseListener)||void 0===i||i.onMouseEvent(e,t)}getColSpanningList(){var e,t;return null!==(e=null===(t=this.positionFeature)||void 0===t?void 0:t.getColSpanningList())&&void 0!==e?e:[]}onLeftChanged(){var e;this.comp&&(null===(e=this.positionFeature)||void 0===e||e.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{comp:e,column:t,beans:i}=this;aue(e,t,i.visibleCols)}refreshAriaColIndex(){const e=this.beans.visibleCols.getAriaColIndex(this.column);mne(this.eGui,e)}onWidthChanged(){var e;return null===(e=this.positionFeature)||void 0===e?void 0:e.onWidthChanged()}getRowPosition(){const{rowIndex:e,rowPinned:t}=this.cellPosition;return{rowIndex:e,rowPinned:t}}updateRangeBordersIfRangeCount(){var e;this.comp&&(null===(e=this.rangeFeature)||void 0===e||e.updateRangeBordersIfRangeCount())}onCellSelectionChanged(){var e;this.comp&&(null===(e=this.rangeFeature)||void 0===e||e.onCellSelectionChanged())}isRangeSelectionEnabled(){return null!=this.rangeFeature}focusCell(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1?arguments[1]:void 0;const n=null===(e=this.editSvc)||void 0===e?void 0:e.allowedFocusTargetOnValidation(this);n&&n!==this||this.beans.focusSvc.setFocusedCell(p(p({},this.getFocusedCellPosition()),{},{forceBrowserFocus:t,sourceEvent:i}))}restoreFocus(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{beans:{editSvc:t,focusSvc:i},comp:n}=this;if(!n||null!==t&&void 0!==t&&t.isEditing(this)||!this.isCellFocused()||!i.shouldTakeFocus())return;const o=()=>{if(!this.isAlive())return;const e=n.getFocusableElement();this.isCellFocused()&&e.focus({preventScroll:!0})};e?setTimeout(o,0):o()}onRowIndexChanged(){var e,t;this.createCellPosition(),this.onCellFocused(),this.restoreFocus(),null===(e=this.rangeFeature)||void 0===e||e.onCellSelectionChanged(),null===(t=this.rowResizeFeature)||void 0===t||t.refreshRowResizer()}onSuppressCellFocusChanged(e){const t=this.eGui;t&&(Ire(this.column)&&(e=!0),Zne(t,"tabindex",e?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;const e=this.column.isFirstRightPinned();this.comp.toggleCss("ag-cell-first-right-pinned",e)}onLastLeftPinnedChanged(){if(!this.comp)return;const e=this.column.isLastLeftPinned();this.comp.toggleCss("ag-cell-last-left-pinned",e)}checkCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}isCellFocused(){const e=this.checkCellFocused();return this.hasBeenFocused||(this.hasBeenFocused=e),e}setupFocus(){var e;this.restoreFocus(!0),this.onCellFocused(null!==(e=this.focusEventWhileNotReady)&&void 0!==e?e:void 0)}onCellFocused(e){var t,i;const{beans:n}=this;if(Cue(n))return;if(!this.comp)return void(e&&(this.focusEventWhileNotReady=e));const o=this.isCellFocused(),s=null!==(t=null===(i=n.editSvc)||void 0===i?void 0:i.isEditing(this))&&void 0!==t&&t;if(this.comp.toggleCss("ag-cell-focus",o),o&&null!==e&&void 0!==e&&e.forceBrowserFocus){let t=this.comp.getFocusableElement();if(s){const e=tle(t,null,!0);e.length&&(t=e[0])}t.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}o&&e&&this.rowCtrl.announceDescription()}createCellPosition(){const{rowIndex:e,rowPinned:t}=this.rowNode;this.cellPosition={rowIndex:e,rowPinned:Oie(t),column:this.column}}applyStaticCssClasses(){const{comp:e}=this;e.toggleCss("ag-cell",!0),e.toggleCss("ag-cell-not-inline-editing",!0);const t=1==this.column.isAutoHeight();e.toggleCss("ag-cell-auto-height",t),e.toggleCss("ag-cell-normal-height",!t)}onColumnHover(){var e;null===(e=this.beans.colHover)||void 0===e||e.onCellColumnHover(this.column,this.comp)}onColDefChanged(){var e,t;this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),null!==(e=this.editSvc)&&void 0!==e&&e.isEditing(this)?null===(t=this.editSvc)||void 0===t||t.handleColDefChanged(this):this.refreshOrDestroyCell({force:!0,suppressFlash:!0}))}setWrapText(){const e=1==this.column.getColDef().wrapText;this.comp.toggleCss("ag-cell-wrap-text",e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),i=this.createEvent(e,"cellContextMenu"),{beans:n}=this;n.eventSvc.dispatchEvent(i),t.onCellContextMenu&&window.setTimeout(()=>{n.frameworkOverrides.wrapOutgoing(()=>{t.onCellContextMenu(i)})},0)}getCellRenderer(){var e,t;return null!==(e=null===(t=this.comp)||void 0===t?void 0:t.getCellRenderer())&&void 0!==e?e:null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.isCellFocused()&&this.hasBrowserFocus()&&this.beans.focusSvc.attemptToRecoverFocus(),super.destroy()}hasBrowserFocus(){var e,t;return null!==(e=null===(t=this.eGui)||void 0===t?void 0:t.contains(Uie(this.beans)))&&void 0!==e&&e}createSelectionCheckbox(){var e;const t=null===(e=this.beans.selectionSvc)||void 0===e?void 0:e.createCheckboxSelectionComponent();if(t)return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){const e=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return e&&this.beans.context.createBean(e),e}registerRowDragger(e,t,i){if(this.customRowDragComp)return void this.customRowDragComp.setDragElement(e,t);const n=this.createRowDragComp(e,t,i);n&&(this.customRowDragComp=n,this.addDestroyFunc(()=>{this.beans.context.destroyBean(n),this.customRowDragComp=null}),n.refreshVisibility())}createRowDragComp(e,t,i){var n;const o=null===(n=this.beans.rowDragSvc)||void 0===n?void 0:n.createRowDragCompForCell(this.rowNode,this.column,()=>this.value,e,t,i);if(o)return this.beans.context.createBean(o),o}cellEditorAttached(){for(const e of this.onEditorAttachedFuncs)e();this.onEditorAttachedFuncs=[]}setFocusedCellPosition(e){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}};function yge(e,t,i,n,o,s){if(null==i&&null==t)return;const r={},a={},l=(e,t)=>{for(const i of e.split(" "))""!=i.trim()&&t(i)};if(i){const t=Object.keys(i);for(let o=0;o<t.length;o++){const s=t[o],d=i[s];let c;"string"===typeof d?c=!e||e.evaluate(d,n):"function"===typeof d&&(c=d(n)),l(s,e=>{c?r[e]=!0:a[e]=!0})}}if(t&&s)for(const d of Object.keys(t))l(d,e=>{r[e]||(a[e]=!0)});s&&Object.keys(a).forEach(s),Object.keys(r).forEach(o)}function bge(e){if(e.group)return e.level;const t=e.parent;return t?t.level+1:0}var xge=0,Cge=class extends yoe{constructor(e,t,i,n,o){var s,r,a;super(),this.rowNode=e,this.useAnimationFrameForCreate=n,this.printLayout=o,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=t,this.gos=t.gos,this.paginationPage=null!==(s=null===(r=t.pagination)||void 0===r?void 0:r.getCurrentPage())&&void 0!==s?s:0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+xge++,this.rowId=Wie(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=bge(this.rowNode),this.setRowType(),this.setAnimateFlags(i),this.rowStyles=this.processStylesFromGridOptions(),this.rowEditStyleFeature=null===(a=t.editSvc)||void 0===a?void 0:a.createRowStyleFeature(this),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if("function"!==typeof this.businessKeyForNodeFunc)return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=Wie(e)}updateGui(e,t){"left"===e?this.leftGui=t:"right"===e?this.rightGui=t:"fullWidth"===e?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,i,n){var o;const{context:s,focusSvc:r}=this.beans,a={rowComp:e,element:t,containerType:i,compBean:n=aae(this,s,n)};this.allRowGuis.push(a),this.updateGui(i,a),this.initialiseRowComp(a);const l=this.rowNode,d="FullWidthLoading"===this.rowType||l.stub,c=!l.data&&"infinite"===this.beans.rowModel.getType();d||c||l.rowPinned||this.beans.rowRenderer.dispatchFirstDataRenderedEvent();const u=null===(o=this.fullWidthGui)||void 0===o?void 0:o.element;if(u){var h;!(null===(h=this.beans.editSvc)||void 0===h?void 0:h.isEditing(this))&&r.isRowFocused(l.rowIndex,l.rowPinned)&&r.shouldTakeFocus()&&setTimeout(()=>u.focus({preventScroll:!0}),0)}}unsetComp(e){this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==e),this.updateGui(e,void 0)}isCacheable(){return"FullWidthDetail"===this.rowType&&this.gos.get("keepDetailRows")}setCached(e){const t=e?"none":"";for(const i of this.allRowGuis)i.element.style.display=t}initialiseRowComp(e){const t=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),vse(t)&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const i=e.rowComp,n=this.getInitialRowClasses(e.containerType);for(const o of n)i.toggleCss(o,!0);this.executeSlideAndFadeAnimations(e),this.rowNode.group&&lne(e.element,1==this.rowNode.expanded),this.setRowCompRowId(i),this.setRowCompRowBusinessKey(i),Mse(t,e.element,Mce,this),e.compBean.addDestroyFunc(()=>Mse(t,e.element,Mce,null)),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,e),this.rowNode.rowIndex,"p2",!1):this.addHoverFunctionality(e),this.isFullWidth()&&this.setupFullWidth(e),t.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask(()=>{this.isAlive()&&e.rowComp.toggleCss("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){null!=this.businessKey&&e.setRowBusinessKey(this.businessKey)}setRowCompRowId(e){const t=Wie(this.rowNode.id);this.rowId=t,null!=t&&e.setRowId(t)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(woe(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1);this.fadeInAnimation[t]&&(woe(()=>{e.rowComp.toggleCss("ag-opacity-zero",!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){var t;const i=null===(t=this.beans.rowDragSvc)||void 0===t?void 0:t.createRowDragCompForRow(this.rowNode,e.element);if(!i)return;const n=this.createBean(i,this.beans.context);this.rowDragComps.push(n),e.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(e=>e!==n),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,this.beans.context),this.destroyBean(n,this.beans.context)})}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType),i=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(i)}getFullWidthCellRenderers(){var e;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(e=>{var t;return null===e||void 0===e||null===(t=e.rowComp)||void 0===t?void 0:t.getFullWidthCellRenderer()}):[null===(e=this.fullWidthGui)||void 0===e||null===(e=e.rowComp)||void 0===e?void 0:e.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;e({eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)})}areAllContainersReady(){const{leftGui:e,centerGui:t,rightGui:i,beans:{visibleCols:n}}=this,o=!!e||!n.isPinningLeft(),s=!!t,r=!!i||!n.isPinningRight();return o&&s&&r}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return!!e&&e({rowNode:this.rowNode})}setRowType(){const{rowNode:e,gos:t,beans:{colModel:i}}=this,n=e.stub&&!t.get("suppressServerSideFullWidthLoadingRow")&&!t.get("groupHideOpenParents"),o=this.isNodeFullWidthCell(),s=t.get("masterDetail")&&e.detail,r=Ese(t,e,i.isPivotMode());this.rowType=n?"FullWidthLoading":s?"FullWidthDetail":o?"FullWidth":r?"FullWidthGroup":"Normal"}updateColumnLists(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.isFullWidth())return;const{animationFrameSvc:i}=this.beans;null!==i&&void 0!==i&&i.active&&!e&&!this.printLayout?this.updateColumnListsPending||(i.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"p1",!1),this.updateColumnListsPending=!0):this.updateColumnListsImpl(t)}getNewCellCtrl(e){var t;if(!(null===(t=this.beans.rowSpanSvc)||void 0===t?void 0:t.isCellSpanning(e,this.rowNode)))return new vge(e,this.rowNode,this.beans,this)}isCorrectCtrlForSpan(e){var t;return!(null!==(t=this.beans.rowSpanSvc)&&void 0!==t&&t.isCellSpanning(e.column,this.rowNode))}createCellCtrls(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n={list:[],map:{}},o=(e,t,i)=>{null!=i?n.list.splice(i,0,t):n.list.push(t),n.map[e]=t},s=[];for(const d of t){const t=d.getInstanceId();let i=e.map[t];i&&!this.isCorrectCtrlForSpan(i)&&(i.destroy(),i=void 0),i||(i=this.getNewCellCtrl(d)),i&&o(t,i)}for(const d of e.list){const e=d.column.getInstanceId();if(null!=n.map[e])continue;!this.isCellEligibleToBeRemoved(d,i)?s.push([e,d]):d.destroy()}if(s.length)for(const[d,c]of s){const e=n.list.findIndex(e=>e.column.getLeft()>c.column.getLeft()),t=-1===e?void 0:Math.max(e-1,0);o(d,c,t)}const{focusSvc:r,visibleCols:a}=this.beans,l=r.getFocusedCell();if(l&&l.column.getPinned()==i){const e=l.column.getInstanceId();if(!n.map[e]&&a.allCols.includes(l.column)){const t=this.createFocusedCellCtrl();if(t){const i=n.list.findIndex(e=>e.column.getLeft()>t.column.getLeft()),s=-1===i?void 0:Math.max(i-1,0);o(e,t,s)}}}return n}createFocusedCellCtrl(){const{focusSvc:e,rowSpanSvc:t}=this.beans,i=e.getFocusedCell();if(!i)return;const n=null===t||void 0===t?void 0:t.getCellSpan(i.column,this.rowNode);if(n){if(n.firstNode!==this.rowNode||!n.doesSpanContain(i))return}else if(!e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))return;return this.getNewCellCtrl(i.column)}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){for(const t of this.allRowGuis){const i=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(i,e)}}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const e=this.beans.colViewport,t=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const i=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);const n=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,n,"left");const o=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,o,"right")}}isCellEligibleToBeRemoved(e,t){const i=!0,{column:n}=e;if(n.getPinned()!=t)return i;if(!this.isCorrectCtrlForSpan(e))return i;const{visibleCols:o,editSvc:s}=this.beans,r=null===s||void 0===s?void 0:s.isEditing(e),a=e.isCellFocused();if(r||a){return!(o.allCols.indexOf(n)>=0)&&i}return i}getDomOrder(){return this.gos.get("ensureDomOrder")||fse(this.gos,"print")}listenOnDomOrder(e){e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],()=>{e.rowComp.setDomOrder(this.getDomOrder())})}setAnimateFlags(e){if(this.rowNode.sticky||!e)return;const t=Fie(this.rowNode.oldRowTop),{visibleCols:i}=this.beans,n=i.isPinningLeft(),o=i.isPinningRight();if(t){const{slideInAnimation:e}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(e.fullWidth=!0);e.center=!0,e.left=n,e.right=o}else{const{fadeInAnimation:e}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(e.fullWidth=!0);e.center=!0,e.left=n,e.right=o}}isFullWidth(){return"Normal"!==this.rowType}refreshFullWidth(){const e=(e,t)=>!e||e.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(e.element,t).params),t=e(this.fullWidthGui,null),i=e(this.centerGui,null),n=e(this.leftGui,"left"),o=e(this.rightGui,"right");return t&&i&&n&&o}addListeners(){var e;const{beans:t,gos:i,rowNode:n}=this,{expansionSvc:o,eventSvc:s,context:r,rowSpanSvc:a}=t;this.addManagedListeners(this.rowNode,p({heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this)},null!==(e=null===o||void 0===o?void 0:o.getRowExpandedListeners(this))&&void 0!==e?e:{})),n.detail&&this.addManagedListeners(n.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(n,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this),rowPinned:this.onRowPinned.bind(this)}),this.addManagedListeners(s,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),a&&this.addManagedListeners(a,{spannedCellsUpdated:e=>{let{pinned:t}=e;t&&!n.rowPinned||this.updateColumnLists()}}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,r),this.tooltipFeature=this.destroyBean(this.tooltipFeature,r),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,r)}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(i.get("rowDragEntireRow"))for(const e of this.allRowGuis)this.addRowDraggerToRow(e);else this.rowDragComps=this.destroyBeans(this.rowDragComps,r)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{for(const e of this.getAllCellCtrls())e.onRowIndexChanged()},cellChanged:e=>{for(const t of this.getAllCellCtrls())t.onCellChanged(e)}})}onRowPinned(){for(const e of this.allRowGuis)e.rowComp.toggleCss("ag-row-pinned-source",!!this.rowNode.pinnedSibling)}onRowNodeDataChanged(e){this.refreshRow({suppressFlash:!e.update,newData:!e.update})}refreshRow(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell())this.beans.rowRenderer.redrawRow(this.rowNode);else{if(this.isFullWidth()){return void(this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode))}for(const t of this.getAllCellCtrls())t.refreshCell(e);for(const e of this.allRowGuis)this.setRowCompRowId(e.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(e.rowComp);this.onRowSelected(),this.postProcessCss()}}postProcessCss(){var e;this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),null===(e=this.rowEditStyleFeature)||void 0===e||e.applyRowStyles(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.beans.rowDropHighlightSvc,t=(null===e||void 0===e?void 0:e.row)===this.rowNode?e.position:"none",i="above"===t,n="inside"===t,o="below"===t,s="none"!==t,r=i||o,a=this.rowNode.uiLevel,l=r&&a>0,d=l?a.toString():"0";for(const c of this.allRowGuis){const e=c.rowComp;e.toggleCss("ag-row-highlight-above",i),e.toggleCss("ag-row-highlight-inside",n),e.toggleCss("ag-row-highlight-below",o),e.toggleCss("ag-row-highlight-indent",l),s?c.element.style.setProperty("--ag-row-highlight-level",d):c.element.style.removeProperty("--ag-row-highlight-level")}}postProcessRowDragging(){const e=this.rowNode.dragging;for(const t of this.allRowGuis)t.rowComp.toggleCss("ag-row-dragging",e)}onDisplayedColumnsChanged(){var e;this.updateColumnLists(!0),null===(e=this.beans.rowAutoHeight)||void 0===e||e.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:Oie(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){var t;const i=this.findFullWidthInfoForEvent(e);if(!i)return;const{rowGui:n,column:o}=i;if(!(n.element===e.target))return;const s=this.rowNode,{focusSvc:r,navigation:a}=this.beans,l=r.getFocusedCell(),d={rowIndex:s.rowIndex,rowPinned:s.rowPinned,column:null!==(t=null===l||void 0===l?void 0:l.column)&&void 0!==t?t:o};null===a||void 0===a||a.navigateToNextCell(e,e.key,d,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||lce(e))return;const t=this.allRowGuis.find(t=>t.element.contains(e.target)),i=t?t.element:null,n=i===e.target,o=Uie(this.beans);let s=!1;i&&o&&(s=i.contains(o)&&o.classList.contains("ag-cell"));let r=null;var a;(n||s||(r=nle(this.beans,i,!1,e.shiftKey)),this.isFullWidth()&&n||!r)&&(null===(a=this.beans.navigation)||void 0===a||a.onTabKeyDown(this,e))}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var e;const t=null===(e=this.allRowGuis.find(e=>Vne(e.element)))||void 0===e?void 0:e.element;return t?t.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){const t=this.isFullWidth()&&e?void 0:this.gos.get("tabIndex");for(const i of this.allRowGuis)Zne(i.element,"tabindex",t)}onFullWidthRowFocused(e){const t=this.rowNode,i=!!e&&(this.isFullWidth()&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned);let n;if(this.fullWidthGui)n=this.fullWidthGui.element;else{const t=this.beans.colModel.getCol(null===e||void 0===e?void 0:e.column),i=null===t||void 0===t?void 0:t.pinned;var o,s,r;if(i)n="right"===i?null===(o=this.rightGui)||void 0===o?void 0:o.element:null===(s=this.leftGui)||void 0===s?void 0:s.element;else n=null===(r=this.centerGui)||void 0===r?void 0:r.element}n&&(n.classList.toggle("ag-full-width-focus",i),i&&null!==e&&void 0!==e&&e.forceBrowserFocus&&n.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){const i={list:[],map:{}};for(const n of e.list)n!==t&&(i.list.push(n),i.map[n.column.getInstanceId()]=n);return i}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t)}}createRowEvent(e,t){const{rowNode:i}=this;return Kse(this.gos,{type:e,node:i,data:i.data,rowIndex:i.rowIndex,rowPinned:i.rowPinned,event:t})}createRowEventWithSource(e,t){const i=this.createRowEvent(e,t);return i.source=this,i}onRowDblClick(e){if(lce(e))return;const t=this.createRowEventWithSource("rowDoubleClicked",e);t.isEventHandlingSuppressed=this.isSuppressMouseEvent(e),this.beans.eventSvc.dispatchEvent(t)}findFullWidthInfoForEvent(e){if(!e)return;const t=this.findFullWidthRowGui(e.target),i=this.getColumnForFullWidth(t);return t&&i?{rowGui:t,column:i}:void 0}findFullWidthRowGui(e){return this.allRowGuis.find(t=>t.element.contains(e))}getColumnForFullWidth(e){const{visibleCols:t}=this.beans;switch(null===e||void 0===e?void 0:e.containerType){case"center":return t.centerCols[0];case"left":return t.leftCols[0];case"right":return t.rightCols[0];default:return t.allCols[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=Ine(e.target,"ag-row-drag",3),!this.isFullWidth()||this.isSuppressMouseEvent(e))return;const{rangeSvc:t,focusSvc:i}=this.beans;null===t||void 0===t||t.removeAllCellRanges();const n=this.findFullWidthInfoForEvent(e);if(!n)return;const{rowGui:o,column:s}=n,r=o.element,a=e.target,l=this.rowNode;let d=e.defaultPrevented||Wae();r&&r.contains(a)&&wne(a)&&(d=!1),i.setFocusedCell({rowIndex:l.rowIndex,column:s,rowPinned:l.rowPinned,forceBrowserFocus:d})}isSuppressMouseEvent(e){const{gos:t,rowNode:i}=this;if(this.isFullWidth()){const n=this.findFullWidthRowGui(e.target);return function(e,t,i,n){return xce(e,void 0,i,n,null===t||void 0===t?void 0:t.suppressMouseEventHandling)}(t,null===n||void 0===n?void 0:n.rowComp.getFullWidthCellRendererParams(),i,e)}const n=wce(t,e.target);return null!=n&&bce(t,n.column,i,e)}onRowClick(e){if(lce(e)||this.lastMouseDownOnDragger)return;const t=this.isSuppressMouseEvent(e),{eventSvc:i,selectionSvc:n}=this.beans,o=this.createRowEventWithSource("rowClicked",e);o.isEventHandlingSuppressed=t,i.dispatchEvent(o),t||null===n||void 0===n||n.handleSelectionEvent(e,this.rowNode,"rowClicked")}setupDetailRowAutoHeight(e){var t;"FullWidthDetail"===this.rowType&&(null===(t=this.beans.masterDetailSvc)||void 0===t||t.setupDetailRowAutoHeight(this,e))}createFullWidthCompDetails(e,t){const{gos:i,rowNode:n}=this,o=Kse(i,{fullWidth:!0,data:n.data,node:n,value:n.key,valueFormatted:n.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(e,t,i,n)=>this.addFullWidthRowDragging(e,t,i,n),setTooltip:(e,t)=>{i.assertModuleRegistered("Tooltip",3),this.setupFullWidthRowTooltip(e,t)}}),s=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return function(e,t){return e.getCompDetailsFromGridOptions(Iae,"agDetailCellRenderer",t,!0)}(s,o);case"FullWidthGroup":{const{value:e,valueFormatted:t}=this.beans.valueSvc.getValueForDisplay({node:this.rowNode,includeValueFormatted:!0});return o.value=e,o.valueFormatted=t,function(e,t){return e.getCompDetailsFromGridOptions(Dae,"agGroupRowRenderer",t,!0)}(s,o)}case"FullWidthLoading":return function(e,t){return e.getCompDetailsFromGridOptions(kae,"agLoadingCellRenderer",t,!0)}(s,o);default:return function(e,t){return e.getCompDetailsFromGridOptions(Mae,void 0,t,!0)}(s,o)}}setupFullWidthRowTooltip(e,t){var i;this.fullWidthGui&&(this.tooltipFeature=null===(i=this.beans.tooltipSvc)||void 0===i?void 0:i.setupFullWidthRowTooltip(this.tooltipFeature,this,e,t))}addFullWidthRowDragging(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3?arguments[3]:void 0;const{rowDragSvc:o,context:s}=this.beans;if(!o||!this.isFullWidth())return;const r=o.createRowDragComp(()=>i,this.rowNode,void 0,e,t,n);this.createBean(r,s),this.addDestroyFunc(()=>{this.destroyBean(r,s)})}onUiLevelChanged(){const e=bge(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,i="ag-row-level-"+this.rowLevel;for(const e of this.allRowGuis)e.rowComp.toggleCss(t,!0),e.rowComp.toggleCss(i,!1)}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();if(this.firstRowOnPage!==e){this.firstRowOnPage=e;for(const t of this.allRowGuis)t.rowComp.toggleCss("ag-row-first",e)}if(this.lastRowOnPage!==t){this.lastRowOnPage=t;for(const e of this.allRowGuis)e.rowComp.toggleCss("ag-row-last",t)}}getAllCellCtrls(){if(0===this.leftCellCtrls.list.length&&0===this.rightCellCtrls.list.length)return this.centerCellCtrls.list;return[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){var e;const t=[];if(null===(e=this.beans.rowStyleSvc)||void 0===e||e.processClassesFromGridOptions(t,this.rowNode),t.length)for(const i of t)for(const e of this.allRowGuis)e.rowComp.toggleCss(i,!0)}postProcessRowClassRules(){var e;null===(e=this.beans.rowStyleSvc)||void 0===e||e.processRowClassRules(this.rowNode,e=>{for(const t of this.allRowGuis)t.rowComp.toggleCss(e,!0)},e=>{for(const t of this.allRowGuis)t.rowComp.toggleCss(e,!1)})}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,e=>e.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return"left"===e||"right"===e?e:null}getInitialRowClasses(e){var t;const i=this.getPinnedForContainer(e),n=this.isFullWidth(),{rowNode:o,beans:s}=this,r=[];var a;(r.push("ag-row"),r.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[e]&&r.push("ag-opacity-zero"),r.push(o.rowIndex%2===0?"ag-row-even":"ag-row-odd"),o.isRowPinned())&&(r.push("ag-row-pinned"),null!==(a=s.pinnedRowModel)&&void 0!==a&&a.isManual()&&r.push("ag-row-pinned-manual"));!o.isRowPinned()&&o.pinnedSibling&&r.push("ag-row-pinned-source"),o.isSelected()&&r.push("ag-row-selected"),o.footer&&r.push("ag-row-footer"),r.push("ag-row-level-"+this.rowLevel),o.stub&&r.push("ag-row-loading"),n&&r.push("ag-full-width-row"),null===(t=s.expansionSvc)||void 0===t||t.addExpandedCss(r,o),o.dragging&&r.push("ag-row-dragging");const{rowStyleSvc:l}=s;return l&&(l.processClassesFromGridOptions(r,o),l.preProcessRowClassRules(r,o)),r.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&r.push("ag-row-first"),this.isLastRowOnPage()&&r.push("ag-row-last"),n&&("left"===i&&r.push("ag-cell-last-left-pinned"),"right"===i&&r.push("ag-cell-first-right-pinned")),r}processStylesFromGridOptions(){var e,t;return null!==(e=null===(t=this.beans.rowStyleSvc)||void 0===t?void 0:t.processStylesFromGridOptions(this.rowNode))&&void 0!==e?e:this.emptyStyle}onRowSelected(e){var t;null===(t=this.beans.selectionSvc)||void 0===t||t.onRowCtrlSelected(this,e=>{e!==this.centerGui&&e!==this.fullWidthGui||this.announceDescription()},e)}announceDescription(){var e;null===(e=this.beans.selectionSvc)||void 0===e||e.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(e){if(!this.active)return;const{element:t,compBean:i}=e,{rowNode:n,beans:o,gos:s}=this;i.addManagedListeners(t,{pointerenter:e=>{"mouse"===e.pointerType&&n.dispatchRowEvent("mouseEnter")},pointerleave:e=>{"mouse"===e.pointerType&&n.dispatchRowEvent("mouseLeave")}}),i.addManagedListeners(n,{mouseEnter:()=>{var e;null!==(e=o.dragSvc)&&void 0!==e&&e.dragging||s.get("suppressRowHoverHighlight")||(t.classList.add("ag-row-hover"),n.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(t)}})}resetHoveredStatus(e){const t=e?[e]:this.allRowGuis.map(e=>e.element);for(const i of t)i.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(e){const t=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),i=this.applyPaginationOffset(t.top,!0)-100,n=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(i,e),n)}forEachGui(e,t){if(e)t(e);else for(const i of this.allRowGuis)t(i)}isRowRendered(){return this.allRowGuis.length>0}onRowHeightChanged(e){if(null==this.rowNode.rowHeight)return;const t=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),n=yse(this.gos)?xse(this.beans,this.rowNode).height:void 0,o=n?"".concat(Math.min(i,n)-2,"px"):void 0;this.forEachGui(e,e=>{e.element.style.height="".concat(t,"px"),o&&e.element.style.setProperty("--ag-line-height",o)})}destroyFirstPass(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.active=!1;const{rowNode:i}=this;if(!t&&kse(this.gos)&&!i.sticky){if(null!=i.rowTop){const e=this.roundRowTopToBounds(i.rowTop);this.setRowTop(e)}else for(const e of this.allRowGuis)e.rowComp.toggleCss("ag-opacity-zero",!0)}null!==(e=this.fullWidthGui)&&void 0!==e&&e.element.contains(Uie(this.beans))&&this.beans.focusSvc.attemptToRecoverFocus(),i.setHovered(!1);const n=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(n),this.beans.eventSvc.dispatchEvent(n),super.destroy()}destroySecondPass(){this.allRowGuis.length=0;const e=e=>{for(const t of e.list)t.destroy();return{list:[],map:{}}};this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,e=>{e.rowComp.toggleCss("ag-row-focus",this.rowFocused),e.rowComp.toggleCss("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const{focusSvc:e}=this.beans,t=e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses())}onPaginationChanged(){var e,t;const i=null!==(e=null===(t=this.beans.pagination)||void 0===t?void 0:t.getCurrentPage())&&void 0!==e?e:0;this.paginationPage!==i&&(this.paginationPage=i,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;return e+this.beans.pageBounds.getPixelOffset()*(t?1:-1)}setRowTop(e){if(!this.printLayout&&Fie(e)){const t=this.applyPaginationOffset(e),i=this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeight.getRealPixelPosition(t),n="".concat(i,"px");this.setRowTopStyle(n)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:"translateY(".concat(this.getInitialRowTopShared(e),")")}getInitialRowTopShared(e){if(this.printLayout)return"";const t=this.rowNode;let i;if(t.sticky)i=t.stickyRowTop;else{const n=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,o=this.applyPaginationOffset(n);i=t.isRowPinned()?o:this.beans.rowContainerHeight.getRealPixelPosition(o)}return i+"px"}setRowTopStyle(e){for(const t of this.allRowGuis)this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform("translateY(".concat(e,")"))}getCellCtrl(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=null;for(const n of this.getAllCellCtrls())n.column==e&&(i=n);if(null!=i||t)return i;for(const n of this.getAllCellCtrls())(null===n||void 0===n?void 0:n.getColSpanningList().indexOf(e))>=0&&(i=n);return i}onRowIndexChanged(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){var t,i,n,o;const s=this.rowNode.getRowIndexString();if(null===s)return;const r=(null!==(t=null===(i=this.beans.ctrlsSvc.getHeaderRowContainerCtrl())||void 0===i?void 0:i.getRowCount())&&void 0!==t?t:0)+(null!==(n=null===(o=this.beans.filterManager)||void 0===o?void 0:o.getHeaderRowCount())&&void 0!==n?n:0),a=this.rowNode.rowIndex%2===0,l=r+this.rowNode.rowIndex+1;this.forEachGui(e,e=>{e.rowComp.setRowIndex(s),e.rowComp.toggleCss("ag-row-even",a),e.rowComp.toggleCss("ag-row-odd",!a),pne(e.element,l)})}};function Sge(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}var wge={moduleName:"KeyboardNavigation",version:Qoe,beans:[class extends yoe{constructor(){super(),this.beanName="navigation",this.onPageDown=koe(this.onPageDown,100),this.onPageUp=koe(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.key,n=e.altKey,o=e.ctrlKey||e.metaKey,s=!!this.beans.rangeSvc&&e.shiftKey,r=eue(this.gos,e);let a=!1;switch(i){case Eae.PAGE_HOME:case Eae.PAGE_END:o||n||(this.onHomeOrEndKey(i),a=!0);break;case Eae.LEFT:case Eae.RIGHT:case Eae.UP:case Eae.DOWN:if(!r)return!1;!o||n||s||(this.onCtrlUpDownLeftRight(i,r),a=!0);break;case Eae.PAGE_DOWN:case Eae.PAGE_UP:o||n||(a=this.handlePageUpDown(i,r,t))}return a&&e.preventDefault(),a}handlePageUpDown(e,t,i){return i&&(t=this.beans.focusSvc.getFocusedCell()),!!t&&(e===Eae.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0)}navigateTo(e){let{scrollIndex:t,scrollType:i,scrollColumn:n,focusIndex:o,focusColumn:s,isAsync:r,rowPinned:a}=e;const{scrollFeature:l}=this.gridBodyCon;Fie(n)&&!n.isPinned()&&l.ensureColumnVisible(n),Fie(t)&&l.ensureIndexVisible(t,i),r||l.ensureIndexVisible(o);const{focusSvc:d,rangeSvc:c}=this.beans;d.setFocusedCell({rowIndex:o,column:s,rowPinned:a,forceBrowserFocus:!0}),null===c||void 0===c||c.setRangeToCell({rowIndex:o,rowPinned:a,column:s})}onPageDown(e){const t=this.beans,i=Sge(t),n=this.getViewportHeight(),{pageBounds:o,rowModel:s,rowAutoHeight:r}=t,a=o.getPixelOffset(),l=i.top+n,d=s.getRowIndexAtPixel(l+a);null!==r&&void 0!==r&&r.active?this.navigateToNextPageWithAutoHeight(e,d):this.navigateToNextPage(e,d)}onPageUp(e){const t=this.beans,i=Sge(t),{pageBounds:n,rowModel:o,rowAutoHeight:s}=t,r=n.getPixelOffset(),a=i.top,l=o.getRowIndexAtPixel(a+r);null!==s&&void 0!==s&&s.active?this.navigateToNextPageWithAutoHeight(e,l,!0):this.navigateToNextPage(e,l,!0)}navigateToNextPage(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{pageBounds:n,rowModel:o}=this.beans,s=this.getViewportHeight(),r=n.getFirstRow(),a=n.getLastRow(),l=n.getPixelOffset(),d=o.getRow(e.rowIndex),c=i?(null===d||void 0===d?void 0:d.rowHeight)-s-l:s-l,u=(null===d||void 0===d?void 0:d.rowTop)+c;let h,p=o.getRowIndexAtPixel(u+l);if(p===e.rowIndex){const n=i?-1:1;t=p=e.rowIndex+n}i?(h="bottom",p<r&&(p=r),t<r&&(t=r)):(h="top",p>a&&(p=a),t>a&&(t=a)),this.isRowTallerThanView(o.getRow(p))&&(t=p,h="top"),this.navigateTo({scrollIndex:t,scrollType:h,scrollColumn:null,focusIndex:p,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const n=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:n,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?-1:1,i=this.getViewportHeight(),{pageBounds:n,rowModel:o}=this.beans,s=n.getLastRow();let r=0,a=e.rowIndex;for(;a>=0&&a<=s;){const e=o.getRow(a);if(e){var l;const t=null!==(l=e.rowHeight)&&void 0!==l?l:0;if(r+t>i)break;r+=t}a+=t}return Math.max(0,Math.min(a,s))}getViewportHeight(){const e=this.beans,t=Sge(e),i=this.beans.scrollVisibleSvc.getScrollbarWidth();let n=t.bottom-t.top;return e.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(n-=i),n}isRowTallerThanView(e){if(!e)return!1;const t=e.rowHeight;return"number"===typeof t&&t>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const i=this.beans.cellNavigation.getNextCellToFocus(e,t,!0),n=this.getNormalisedPosition(i),{rowIndex:o,rowPinned:s,column:r}=null!==n&&void 0!==n?n:i,a=r;this.navigateTo({scrollIndex:o,scrollType:null,scrollColumn:a,focusIndex:o,focusColumn:a,rowPinned:s})}onHomeOrEndKey(e){const t=e===Eae.PAGE_HOME,{visibleCols:i,pageBounds:n,rowModel:o}=this.beans,s=i.allCols,r=t?n.getFirstRow():n.getLastRow(),a=o.getRow(r);if(!a)return;const l=(t?s:[...s].reverse()).find(e=>!e.isSuppressNavigable(a));l&&this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:l,focusIndex:r,focusColumn:l})}onTabKeyDown(e,t){const i=t.shiftKey,n=this.tabToNextCellCommon(e,i,t),o=this.beans,{ctrlsSvc:s,pageBounds:r,focusSvc:a,gos:l}=o;if(!1===n)if(i){const{rowIndex:i,rowPinned:n}=e.getRowPosition();(n?0===i:i===r.getFirstRow())&&(0===l.get("headerHeight")||xue(o)?Sue(o,!0,!0):(t.preventDefault(),a.focusPreviousFromFirstCell(t)))}else e instanceof vge&&e.focusCell(!0),(a.focusOverlay(!1)||Sue(o,i))&&t.preventDefault();else n?t.preventDefault():null===n&&s.get("gridCtrl").allowFocusForNextCoreContainer(i)}tabToNextCell(e,t){const i=this.beans,{focusSvc:n,rowRenderer:o}=i,s=n.getFocusedCell();if(!s)return!1;let r=fue(i,s);var a;if(!r&&(r=o.getRowByPosition(s),null===(a=r)||void 0===a||!a.isFullWidth()))return!1;return!!this.tabToNextCellCommon(r,e,t,"api")}tabToNextCellCommon(e,t,i){var n;let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ui";const{editSvc:s,focusSvc:r}=this.beans;let a;const l=e instanceof vge?e:null===(n=e.getAllCellCtrls())||void 0===n?void 0:n[0];return a=null!==s&&void 0!==s&&s.isEditing()?null===s||void 0===s?void 0:s.moveToNextCell(l,t,i,o):this.moveToNextCellNotEditing(e,t,i),null===a?a:a||!!r.focusedHeader}moveToNextCellNotEditing(e,t,i){const n=this.beans.visibleCols.allCols;let o;if(e instanceof Cge){if(o=p(p({},e.getRowPosition()),{},{column:t?n[0]:pre(n)}),this.gos.get("embedFullWidthRows")&&i){const t=e.findFullWidthInfoForEvent(i);t&&(o.column=t.column)}}else o=e.getFocusedCellPosition();const s=this.findNextCellToFocusOn(o,{backwards:t,startEditing:!1});if(!1===s)return null;if(s instanceof vge)s.focusCell(!0);else if(s)return this.tryToFocusFullWidthRow(s,t);return Fie(s)}findNextCellToFocusOn(e,t){let{backwards:i,startEditing:n,skipToNextEditableCell:o}=t,s=e;const r=this.beans,{cellNavigation:a,gos:l,focusSvc:d,rowRenderer:c,rangeSvc:u}=r;for(;;){e!==s&&(e=s),i||(s=this.getLastCellOfColSpan(s)),s=a.getNextTabbedCell(s,i);const t=l.getCallback("tabToNextCell");if(Fie(t)){const o=t({backwards:i,editing:n,previousCellPosition:e,nextCellPosition:s||null});if(!0===o)s=e;else{if(!1===o)return!1;s={rowIndex:o.rowIndex,column:o.column,rowPinned:o.rowPinned}}}if(!s)return null;if(s.rowIndex<0){const e=Mue(r);return d.focusHeaderPosition({headerPosition:{headerRowIndex:e+s.rowIndex,column:s.column},fromCell:!0}),null}const g="fullRow"===l.get("editType");if(n&&(!g||o)){if(!this.isCellEditable(s))continue}this.ensureCellVisible(s);const m=fue(r,s);if(!m){var h;const e=c.getRowByPosition(s);if(!e||!e.isFullWidth()||n)continue;return p(p({},e.getRowPosition()),{},{column:null===(h=s)||void 0===h?void 0:h.column})}if(!a.isSuppressNavigable(m.column,m.rowNode))return m.setFocusedCellPosition(s),null===u||void 0===u||u.setRangeToCell(s),m}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return!!t&&e.column.isCellEditable(t)}lookupRowNodeForCell(e){let{rowIndex:t,rowPinned:i}=e;const{pinnedRowModel:n,rowModel:o}=this.beans;return"top"===i?null===n||void 0===n?void 0:n.getPinnedTopRow(t):"bottom"===i?null===n||void 0===n?void 0:n.getPinnedBottomRow(t):o.getRow(t)}navigateToNextCell(e,t,i,n){let o=i,s=!1;const r=this.beans,{cellNavigation:a,focusSvc:l,gos:d}=r;for(;o&&(o===i||!this.isValidNavigateCell(o));)d.get("enableRtl")?t===Eae.LEFT&&(o=this.getLastCellOfColSpan(o)):t===Eae.RIGHT&&(o=this.getLastCellOfColSpan(o)),o=a.getNextCellToFocus(t,o),s=zie(o);if(s&&e&&e.key===Eae.UP&&(o={rowIndex:-1,rowPinned:null,column:i.column}),n){const n=d.getCallback("navigateToNextCell");if(Fie(n)){const s=n({key:t,previousCellPosition:i,nextCellPosition:o||null,event:e});o=Fie(s)?{rowPinned:s.rowPinned,rowIndex:s.rowIndex,column:s.column}:null}}if(!o)return;if(o.rowIndex<0){const t=Mue(r);return void l.focusHeaderPosition({headerPosition:{headerRowIndex:t+o.rowIndex,column:i.column},event:e||void 0,fromCell:!0})}const c=this.getNormalisedPosition(o);c?this.focusPosition(c):this.tryToFocusFullWidthRow(o)}getNormalisedPosition(e){var t;if(!(null===(t=this.beans.spannedRowRenderer)||void 0===t||!t.getCellByPosition(e)))return e;this.ensureCellVisible(e);const i=fue(this.beans,e);return i?(e=i.getFocusedCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const{visibleCols:i,rowRenderer:n,focusSvc:o,eventSvc:s}=this.beans,r=i.allCols,a=n.getRowByPosition(e);if(null===a||void 0===a||!a.isFullWidth())return!1;const l=o.getFocusedCell(),d={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?pre(r):r[0])};this.focusPosition(d);const c=null==t?null!=l&&uue(d,l):t;return s.dispatchEvent({type:"fullWidthRowFocused",rowIndex:d.rowIndex,rowPinned:d.rowPinned,column:d.column,isFullWidthCell:!0,fromBelow:c}),!0}focusPosition(e){const{focusSvc:t,rangeSvc:i}=this.beans;t.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),null===i||void 0===i||i.setRangeToCell(e)}isValidNavigateCell(e){return!!mue(this.beans,e)}getLastCellOfColSpan(e){const t=fue(this.beans,e);if(!t)return e;const i=t.getColSpanningList();return 1===i.length?e:{rowIndex:e.rowIndex,column:pre(i),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=Dse(this.gos),i=this.beans.rowModel.getRow(e.rowIndex),n=t&&(null===i||void 0===i?void 0:i.sticky),{scrollFeature:o}=this.gridBodyCon;!n&&zie(e.rowPinned)&&o.ensureIndexVisible(e.rowIndex),e.column.isPinned()||o.ensureColumnVisible(e.column)}ensureColumnVisible(e){const t=this.gridBodyCon.scrollFeature;e.isPinned()||t.ensureColumnVisible(e)}ensureRowVisible(e){this.gridBodyCon.scrollFeature.ensureIndexVisible(e)}},class extends yoe{constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(e){this.rowSpanSvc=e.rowSpanSvc}getNextCellToFocus(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const i=e===Eae.UP,n=e===Eae.DOWN,o=e===Eae.LEFT;let s,r;const{pageBounds:a,gos:l,visibleCols:d,pinnedRowModel:c}=this.beans,{rowPinned:u}=t;if(i||n)r=u&&c?i?0:"top"===u?c.getPinnedTopRowCount()-1:c.getPinnedBottomRowCount()-1:i?a.getFirstRow():a.getLastRow(),s=t.column;else{const e=l.get("enableRtl");r=t.rowIndex;s=(o!==e?d.allCols:[...d.allCols].reverse()).find(e=>this.isCellGoodToFocusOn({rowIndex:r,rowPinned:null,column:e}))}return s?{rowIndex:r,rowPinned:u,column:s}:null}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,n=!1;for(;!n;){switch(e){case Eae.UP:i=this.getCellAbove(i);break;case Eae.DOWN:i=this.getCellBelow(i);break;case Eae.RIGHT:i=this.gos.get("enableRtl")?this.getCellToLeft(i):this.getCellToRight(i);break;case Eae.LEFT:i=this.gos.get("enableRtl")?this.getCellToRight(i):this.getCellToLeft(i);break;default:i=null,lse(8,{key:e})}n=!i||this.isCellGoodToFocusOn(i)}return i}isCellGoodToFocusOn(e){const t=e.column;let i;const{pinnedRowModel:n,rowModel:o}=this.beans;switch(e.rowPinned){case"top":i=null===n||void 0===n?void 0:n.getPinnedTopRow(e.rowIndex);break;case"bottom":i=null===n||void 0===n?void 0:n.getPinnedBottomRow(e.rowIndex);break;default:i=o.getRow(e.rowIndex)}if(!i)return!1;return!this.isSuppressNavigable(t,i)}getCellToLeft(e){if(!e)return null;const t=this.beans.visibleCols.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.beans.visibleCols.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellBelow(e){var t,i;if(!e)return null;const n=null!==(t=null===(i=this.rowSpanSvc)||void 0===i?void 0:i.getCellEnd(e))&&void 0!==t?t:e,o=yue(this.beans,n,!0);return o?{rowIndex:o.rowIndex,column:e.column,rowPinned:o.rowPinned}:null}getCellAbove(e){var t,i;if(!e)return null;const n=null!==(t=null===(i=this.rowSpanSvc)||void 0===i?void 0:i.getCellStart(e))&&void 0!==t?t:e,o=vue(this.beans,{rowIndex:n.rowIndex,rowPinned:n.rowPinned},!0);return o?{rowIndex:o.rowIndex,column:e.column,rowPinned:o.rowPinned}:null}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const{visibleCols:t,pagination:i}=this.beans,n=t.allCols;let o=e.rowIndex,s=e.rowPinned,r=t.getColAfter(e.column);if(!r){var a;r=n[0];const t=yue(this.beans,e,!0);if(zie(t))return null;if(!t.rowPinned&&null!==(a=null===i||void 0===i?void 0:i.isRowInPage(t.rowIndex))&&void 0!==a&&!a)return null;o=t?t.rowIndex:null,s=t?t.rowPinned:null}return{rowIndex:o,column:r,rowPinned:s}}getNextTabbedCellBackwards(e){const{beans:t}=this,{visibleCols:i,pagination:n}=t,o=i.allCols;let s=e.rowIndex,r=e.rowPinned,a=i.getColBefore(e.column);if(!a){var l;a=pre(o);const i=vue(t,{rowIndex:e.rowIndex,rowPinned:e.rowPinned},!0);if(zie(i))return null;if(!i.rowPinned&&null!==(l=null===n||void 0===n?void 0:n.isRowInPage(i.rowIndex))&&void 0!==l&&!l)return null;s=i?i.rowIndex:null,r=i?i.rowPinned:null}return{rowIndex:s,column:a,rowPinned:r}}isSuppressNavigable(e,t){const{suppressNavigable:i}=e.colDef;if("boolean"===typeof i)return i;if("function"===typeof i){return i(e.createColumnFunctionCallbackParams(t))}return!1}},class extends yoe{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl});const t=Yie(e);this.addManagedElementListeners(t,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(e,t){let i;const{colModel:n,colGroupSvc:o,ctrlsSvc:s}=this.beans;var r;"string"===typeof e?(i=n.getCol(e),i||(i=null!==(r=null===o||void 0===o?void 0:o.getColumnGroup(e))&&void 0!==r?r:null)):i=e;if(!i)return null;const a=s.getHeaderRowContainerCtrl(),l="filter"===pre((null===a||void 0===a?void 0:a.getAllCtrls())||[]).type,d=Mue(this.beans)-1;let c=-1,u=i;for(;u;)c++,u=u.getParent();let h=c;return t&&l&&h===d-1&&h++,-1===h?null:{headerRowIndex:h,column:i}}navigateVertically(e,t){const{focusSvc:i,visibleCols:n}=this.beans,{focusedHeader:o}=i;if(!o)return!1;const{headerRowIndex:s}=o,r=o.column,a=Mue(this.beans),l=this.getHeaderRowType(s),d=n.headerGroupRowCount;let{headerRowIndex:c,column:u,headerRowIndexWithoutSpan:h}="UP"===e?function(e,t,i){const n=i-1;if("filter"!==e){const e=t instanceof ere&&t.isSpanHeaderHeight();let i=t.getParent();for(;i&&(i.getProvidedColumnGroup().getLevel()>n||e&&i.isPadding());)i=i.getParent();if(i)return e?{column:i,headerRowIndex:i.getProvidedColumnGroup().getLevel(),headerRowIndexWithoutSpan:n}:{column:i,headerRowIndex:n,headerRowIndexWithoutSpan:n}}return{column:t,headerRowIndex:n,headerRowIndexWithoutSpan:n}}(l,r,s):function(e,t,i){const n=t+1,o={column:e,headerRowIndex:n,headerRowIndexWithoutSpan:n};if(e instanceof Yde){if(n>=i)return{column:e.getDisplayedLeafColumns()[0],headerRowIndex:i,headerRowIndexWithoutSpan:n};let t=e.getDisplayedChildren()[0];if(t instanceof Yde&&t.isPadding()){const e=t.getDisplayedLeafColumns()[0];e.isSpanHeaderHeight()&&(t=e)}o.column=t;t instanceof ere&&t.isSpanHeaderHeight()&&(o.headerRowIndex=i,o.headerRowIndexWithoutSpan=n)}return o}(r,s,d),p=!1;return c<0&&(c=0,u=r,p=!0),c>=a?(c=-1,this.currentHeaderRowWithoutSpan=-1):void 0!==h&&(this.currentHeaderRowWithoutSpan=h),!(!p&&!u)&&i.focusHeaderPosition({headerPosition:{headerRowIndex:c,column:u},allowUserOverride:!0,event:t})}navigateHorizontally(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;const{focusSvc:n,gos:o}=this.beans,s=p({},n.focusedHeader);let r,a;-1!==this.currentHeaderRowWithoutSpan?s.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=s.headerRowIndex,"LEFT"===e!==o.get("enableRtl")?(a="Before",r=this.findHeader(s,a)):(a="After",r=this.findHeader(s,a));const l=o.getCallback("tabToNextHeader");if(t&&l){const e=n.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:r,direction:a});if(e){const{headerRowIndex:e}=n.focusedHeader||{};null!=e&&e!=s.headerRowIndex&&(this.currentHeaderRowWithoutSpan=e)}return e}return r||!t?n.focusHeaderPosition({headerPosition:r,direction:a,fromTab:t,allowUserOverride:!0,event:i}):this.focusNextHeaderRow(s,a,i)}focusNextHeaderRow(e,t,i){const n=this.beans,o=e.headerRowIndex;let s,r=null;const a=Mue(n),l=this.beans.visibleCols.allCols;if("Before"===t){if(o<=0)return!1;r=pre(l),s=o-1,this.currentHeaderRowWithoutSpan-=1}else r=l[0],s=o+1,this.currentHeaderRowWithoutSpan<a?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1;let{column:d,headerRowIndex:c}=zpe(this.beans,r,s);return c>=a&&(c=-1),n.focusSvc.focusHeaderPosition({headerPosition:{column:d,headerRowIndex:c},direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"After";if(!e.getPinned()){if(Ude(e)){const n=e.getDisplayedLeafColumns();t="Before"===i?pre(n):n[0]}else t=e;this.gridBodyCon.scrollFeature.ensureColumnVisible(t)}}findHeader(e,t){const{colGroupSvc:i,visibleCols:n}=this.beans;let o=e.column;if(o instanceof Yde){const e=o.getDisplayedLeafColumns();o="Before"===t?e[0]:e[e.length-1]}const s="Before"===t?n.getColBefore(o):n.getColAfter(o);if(!s)return;const r=n.headerGroupRowCount;if(e.headerRowIndex>=r)return{headerRowIndex:e.headerRowIndex,column:s};const a=null===i||void 0===i?void 0:i.getColGroupAtLevel(s,e.headerRowIndex);if(!a){return{headerRowIndex:s instanceof ere&&s.isSpanHeaderHeight()?n.headerGroupRowCount:e.headerRowIndex,column:s}}return a.isPadding()&&s.isSpanHeaderHeight()?{headerRowIndex:n.headerGroupRowCount,column:s}:{headerRowIndex:e.headerRowIndex,column:null!==a&&void 0!==a?a:s}}getHeaderRowType(e){const t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}}],apiFunctions:{getFocusedCell:function(e){return e.focusSvc.getFocusedCell()},clearFocusedCell:function(e){return e.focusSvc.clearFocusedCell()},setFocusedCell:function(e,t,i,n){e.focusSvc.setFocusedCell({rowIndex:t,column:i,rowPinned:n,forceBrowserFocus:!0})},setFocusedHeader:function(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=null===(i=e.headerNavigation)||void 0===i?void 0:i.getHeaderPositionForColumn(t,n);o&&e.focusSvc.focusHeaderPosition({headerPosition:o})},tabToNextCell:function(e,t){var i,n;return null!==(i=null===(n=e.navigation)||void 0===n?void 0:n.tabToNextCell(!1,t))&&void 0!==i&&i},tabToPreviousCell:function(e,t){var i,n;return null!==(i=null===(n=e.navigation)||void 0===n?void 0:n.tabToNextCell(!0,t))&&void 0!==i&&i}}},Mge=class extends yoe{constructor(e,t){super(),this.isLeft=e,this.elements=t,this.getWidth=e?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({["".concat(this.isLeft?"left":"right","PinnedWidthChanged")]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){const e=this.getWidth(),t=e>0;for(const i of this.elements)i&&(Mne(i,t),Kne(i,e))}},kge={moduleName:"PinnedColumn",version:Qoe,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl});const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const{gos:e,visibleCols:t,eventSvc:i}=this.beans,n=fse(e,"print"),o=n?0:t.getColsLeftWidth(),s=n?0:t.getDisplayedColumnsRightWidth();o!=this.leftWidth&&(this.leftWidth=o,i.dispatchEvent({type:"leftPinnedWidthChanged"})),s!=this.rightWidth&&(this.rightWidth=s,i.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){var e;const t=Nne(this.gridBodyCtrl.eBodyViewport);if(t<=50)return;const i=this.getPinnedColumnsOverflowingViewport(t-50),n=this.gos.getCallback("processUnpinnedColumns"),{columns:o,hasLockedPinned:s}=i;let r=o;if(r.length||s){if(n){r=n({columns:r,viewportWidth:t})}null!==(e=r)&&void 0!==e&&e.length&&(r=r.filter(e=>!Ire(e)),this.setColsPinned(r,null,"viewportSizeFeature"))}}createPinnedWidthFeature(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return new Mge(e,i)}setColsPinned(e,t,i){const{colModel:n,colAnimation:o,visibleCols:s,gos:r}=this.beans;if(!n.cols)return;if(null===e||void 0===e||!e.length)return;if(fse(r,"print"))return void lse(37);let a;null===o||void 0===o||o.start(),a=!0===t||"left"===t?"left":"right"===t?"right":null;const l=[];for(const d of e){if(!d)continue;const e=n.getCol(d);e&&(e.getPinned()!==a&&(this.setColPinned(e,a),l.push(e)))}l.length&&(s.refresh(i),Zre(this.eventSvc,l,i)),null===o||void 0===o||o.finish()}initCol(e){const{pinned:t,initialPinned:i}=e.colDef;void 0!==t?this.setColPinned(e,t):this.setColPinned(e,i)}setColPinned(e,t){e.pinned=!0===t||"left"===t?"left":"right"===t?"right":null,e.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(e){const{scrollVisibleSvc:t}=this.beans;if(null==e.pinned)return;const i="left"===e.pinned,n="right"===e.pinned;e.hidden=!0;const o=()=>{const o=i?this.leftWidth:this.rightWidth;if(null==o)return;const s=0==o,r=e.hidden!==s,a=this.gos.get("enableRtl"),l=t.getScrollbarWidth(),d=t.verticalScrollShowing&&(a&&i||!a&&n)?o+l:o;e.comp.setPinnedContainerWidth("".concat(d,"px")),e.comp.setDisplayed(!s),r&&(e.hidden=s,e.refresh())};e.addManagedEventListeners({leftPinnedWidthChanged:o,rightPinnedWidthChanged:o,scrollVisibilityChanged:o,scrollbarWidthChanged:o})}getHeaderResizeDiff(e,t){if(t.getPinned()){const{leftWidth:t,rightWidth:i}=this,n=Nne(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(t+i+e>n){if(!(n>t+i))return 0;e=n-t-i}}return e}getPinnedColumnsOverflowingViewport(e){var t,i;const n=(null!==(t=this.rightWidth)&&void 0!==t?t:0)+(null!==(i=this.leftWidth)&&void 0!==i?i:0);let o=!1;if(n<e)return{columns:[],hasLockedPinned:o};const{visibleCols:s}=this.beans,r=[...s.leftCols],a=[...s.rightCols];let l=0,d=0;const c=[];let u=n-0-e;for(;(d<r.length||l<a.length)&&u>0;){if(l<a.length){const e=a[l++];if(e.colDef.lockPinned){o=!0;continue}u-=e.getActualWidth(),c.push(e)}if(d<r.length&&u>0){const e=r[d++];if(e.colDef.lockPinned){o=!0;continue}u-=e.getActualWidth(),c.push(e)}}return{columns:c,hasLockedPinned:o}}}],css:[".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}"]},Dge=class extends voe{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=Moe(this,this.updateAnnouncement.bind(this),200)}postConstruct(){const e=this.beans,t=Yie(e),i=this.descriptionContainer=t.createElement("div");i.classList.add("ag-aria-description-container"),one(i,"polite"),qie(i,"relevant","additions text"),function(e,t){qie(e,"atomic",t)}(i,!0),e.eRootDiv.appendChild(i)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.handleAnnouncementUpdate(e)},50)}handleAnnouncementUpdate(e){if(!this.isAlive()||!this.descriptionContainer)return;let t=e;null!=t&&""!=t.replace(/[ .]/g,"")?(this.lastAnnouncement===t&&(t="".concat(t,"\u200b")),this.lastAnnouncement=t,this.descriptionContainer.textContent=t):this.lastAnnouncement=""}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(Fne(e),e.remove()),this.descriptionContainer=null,this.pendingAnnouncements.clear()}},Ige={moduleName:"Aria",version:Qoe,beans:[class extends Dge{}]},Age="ag-delay-render",Lge={moduleName:"ColumnDelayRender",version:Qoe,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="colDelayRenderSvc",this.hideRequested=!1,this.alreadyRevealed=!1,this.timesRetried=0,this.requesters=new Set}hideColumns(e){this.alreadyRevealed||this.requesters.has(e)||(this.requesters.add(e),this.hideRequested||(this.beans.ctrlsSvc.whenReady(this,e=>{e.gridBodyCtrl.eGridBody.classList.add(Age)}),this.hideRequested=!0))}revealColumns(e){if(this.alreadyRevealed||!this.isAlive())return;if(this.requesters.delete(e),this.requesters.size>0)return;const{renderStatus:t,ctrlsSvc:i}=this.beans;if(t){if(!t.areHeaderCellsRendered()&&this.timesRetried<5)return this.timesRetried++,void setTimeout(()=>this.revealColumns(e));this.timesRetried=0}i.getGridBodyCtrl().eGridBody.classList.remove(Age),this.alreadyRevealed=!0}}],css:[":where(.ag-delay-render){.ag-cell,.ag-header-cell,.ag-header-group-cell,.ag-row,.ag-spanned-cell-wrapper{visibility:hidden}}"]};var Nge={tag:"div",cls:"ag-overlay",role:"presentation",children:[{tag:"div",cls:"ag-overlay-panel",role:"presentation",children:[{tag:"div",ref:"eOverlayWrapper",cls:"ag-overlay-wrapper",role:"presentation"}]}]},Tge=class extends hae{constructor(){super(Nge),this.eOverlayWrapper=lae,this.activeOverlay=null,this.activePromise=null,this.activeCssClass=null,this.elToFocusAfter=null,this.overlayExclusive=!1,this.oldWrapperPadding=null,this.registerCSS(".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-exporting-wrapper,.ag-overlay-loading-wrapper,.ag-overlay-modal-wrapper{pointer-events:all}.ag-overlay-exporting-center,.ag-overlay-loading-center{background:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);display:flex;padding:var(--ag-spacing)}")}handleKeyDown(e){if(e.key!==Eae.TAB||e.defaultPrevented||lce(e))return;const{beans:t,eOverlayWrapper:i}=this;if(i&&nle(t,i,!1,e.shiftKey))return;let n=!1;n=e.shiftKey?t.focusSvc.focusGridView({column:pre(t.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):Sue(t,!1),n&&e.preventDefault()}updateLayoutClasses(e,t){const i=this.eOverlayWrapper;if(!i)return;const n=i.classList,{AUTO_HEIGHT:o,NORMAL:s,PRINT:r}=uce;n.toggle(o,t.autoHeight),n.toggle(s,t.normal),n.toggle(r,t.print)}postConstruct(){this.createManagedBean(new hce(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setWrapperComp(this,!1),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)}),this.addManagedEventListeners({gridSizeChanged:this.refreshWrapperPadding.bind(this)})}setWrapperTypeClass(e){var t;const i=null===(t=this.eOverlayWrapper)||void 0===t?void 0:t.classList;i?(this.activeCssClass&&i.toggle(this.activeCssClass,!1),this.activeCssClass=e,i.toggle(e,!0)):this.activeCssClass=null}showOverlay(e,t,i){if(this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,this.overlayExclusive=i,!e)return this.refreshWrapperPadding(),pae.resolve();if(this.setWrapperTypeClass(t),this.setDisplayed(!0,{skipAriaHidden:!0}),this.refreshWrapperPadding(),i&&this.isGridFocused()){const e=Uie(this.beans);e&&!$ie(this.beans)&&(this.elToFocusAfter=e)}return e.then(t=>{const n=this.eOverlayWrapper;n?this.activePromise===e?(this.activePromise=null,t&&(this.activeOverlay!==t&&(n.appendChild(t.getGui()),this.activeOverlay=t),i&&this.isGridFocused()&&ile(n))):this.activeOverlay!==t&&(this.destroyBean(t),t=null):this.destroyBean(t)}),e}refreshWrapperPadding(){if(!this.eOverlayWrapper)return void(this.oldWrapperPadding=null);let e=0;var t;!this.activeOverlay&&!this.activePromise||this.overlayExclusive||(e=(null===(t=this.beans.ctrlsSvc.get("gridHeaderCtrl"))||void 0===t?void 0:t.headerHeight)||0);e!==this.oldWrapperPadding&&(this.oldWrapperPadding=e,this.eOverlayWrapper.style.setProperty("padding-top","".concat(e,"px")))}destroyActiveOverlay(){var e,t;this.activePromise=null;const i=this.activeOverlay;if(!i)return this.overlayExclusive=!1,this.elToFocusAfter=null,void this.refreshWrapperPadding();let n=this.elToFocusAfter;this.elToFocusAfter=null,this.activeOverlay=null,this.overlayExclusive=!1,n&&!this.isGridFocused()&&(n=null),this.destroyBean(i);const o=this.eOverlayWrapper;o&&Fne(o),null===(e=n)||void 0===e||null===(t=e.focus)||void 0===t||t.call(e,{preventScroll:!0}),this.refreshWrapperPadding()}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){const e=Uie(this.beans);return!!e&&this.beans.eGridDiv.contains(e)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setWrapperComp(this,!0),super.destroy(),this.eOverlayWrapper=null}},Rge={selector:"AG-OVERLAY-WRAPPER",component:Tge},Ege=["refresh"],Pge=e=>({name:e,optionalMethods:Ege}),Oge={id:"agLoadingOverlay",overlayType:"loading",comp:Pge("loadingOverlayComponent"),wrapperCls:"ag-overlay-loading-wrapper",exclusive:!0,compKey:"loadingOverlayComponent",paramsKey:"loadingOverlayComponentParams",isSuppressed:e=>{const t=e.get("loading");return!1===t||!0===e.get("suppressLoadingOverlay")&&!0!==t}},Fge={id:"agNoRowsOverlay",overlayType:"noRows",comp:Pge("noRowsOverlayComponent"),wrapperCls:"ag-overlay-no-rows-wrapper",compKey:"noRowsOverlayComponent",paramsKey:"noRowsOverlayComponentParams",isSuppressed:e=>e.get("suppressNoRowsOverlay")},zge={id:"agNoMatchingRowsOverlay",overlayType:"noMatchingRows",comp:Pge("noMatchingRowsOverlayComponent"),wrapperCls:"ag-overlay-no-matching-rows-wrapper"},Bge={id:"agExportingOverlay",overlayType:"exporting",comp:Pge("exportingOverlayComponent"),wrapperCls:"ag-overlay-exporting-wrapper",exclusive:!0},Vge={id:"activeOverlay",comp:Pge("activeOverlay"),wrapperCls:"ag-overlay-modal-wrapper",exclusive:!0},Gge={moduleName:"Overlay",version:Qoe,userComponents:{agLoadingOverlay:class extends jue{constructor(){super(...arguments),this.eLoadingIcon=lae,this.eLoadingText=lae}init(e){var t;const{beans:i,gos:n}=this,o=Oie(null===(t=n.get("overlayLoadingTemplate"))||void 0===t?void 0:t.trim());if(this.setTemplate(null!==o&&void 0!==o?o:Kue),!o){var s,r;const t=_ue("overlayLoading",i,null);t&&this.eLoadingIcon.appendChild(t);const n=null!==(s=null===(r=e.loading)||void 0===r?void 0:r.overlayText)&&void 0!==s?s:this.getLocaleTextFunc()("loadingOoo","Loading...");this.eLoadingText.textContent=n,i.ariaAnnounce.announceValue(n,"overlay")}}},agNoRowsOverlay:class extends jue{init(e){var t;const{beans:i,gos:n}=this,o=Oie(null===(t=n.get("overlayNoRowsTemplate"))||void 0===t?void 0:t.trim());if(this.setTemplate(null!==o&&void 0!==o?o:Yue),!o){var s,r;const t=null!==(s=null===(r=e.noRows)||void 0===r?void 0:r.overlayText)&&void 0!==s?s:this.getLocaleTextFunc()("noRowsToShow","No Rows To Show");this.getGui().textContent=t,i.ariaAnnounce.announceValue(t,"overlay")}}},agNoMatchingRowsOverlay:class extends jue{init(e){var t,i;const{beans:n}=this;this.setTemplate($ue);const o=null!==(t=null===(i=e.noMatchingRows)||void 0===i?void 0:i.overlayText)&&void 0!==t?t:this.getLocaleTextFunc()("noMatchingRows","No Matching Rows");this.getGui().textContent=o,n.ariaAnnounce.announceValue(o,"overlay")}},agExportingOverlay:class extends jue{constructor(){super(...arguments),this.eExportingIcon=lae,this.eExportingText=lae}init(e){var t,i;const{beans:n}=this;this.setTemplate(Uue);const o=_ue("overlayExporting",n,null);o&&this.eExportingIcon.appendChild(o);const s=null!==(t=null===(i=e.exporting)||void 0===i?void 0:i.overlayText)&&void 0!==t?t:this.getLocaleTextFunc()("exportingOoo","Exporting...");this.eExportingText.textContent=s,n.ariaAnnounce.announceValue(s,"overlay")}}},apiFunctions:{showLoadingOverlay:function(e){var t;null===(t=e.overlays)||void 0===t||t.showLoadingOverlay()},showNoRowsOverlay:function(e){var t;null===(t=e.overlays)||void 0===t||t.showNoRowsOverlay()},hideOverlay:function(e){var t;null===(t=e.overlays)||void 0===t||t.hideOverlay()}},icons:{overlayLoading:"loading",overlayExporting:"loading"},beans:[class extends yoe{constructor(){super(...arguments),this.beanName="overlays",this.eWrapper=void 0,this.exclusive=!1,this.oldExclusive=!1,this.currentDef=null,this.showInitialOverlay=!0,this.userForcedNoRows=!1,this.exportsInProgress=0,this.newColumnsLoadedCleanup=null}postConstruct(){const e=this.gos;this.showInitialOverlay=gse(e);const t=()=>{this.userForcedNoRows||this.updateOverlay(!1)},[i,n,o,s]=this.addManagedEventListeners({newColumnsLoaded:t,rowCountReady:()=>{this.disableInitialOverlay(),t(),n()},rowDataUpdated:t,modelUpdated:t});this.newColumnsLoadedCleanup=i,this.addManagedPropertyListeners(["loading","activeOverlay","activeOverlayParams","overlayComponentParams","loadingOverlayComponentParams","noRowsOverlayComponentParams"],e=>{var t;return this.onPropChange(new Set(null===(t=e.changeSet)||void 0===t?void 0:t.properties))})}destroy(){this.doHideOverlay(),super.destroy(),this.eWrapper=void 0}setWrapperComp(e,t){this.isAlive()&&(t?this.eWrapper===e&&(this.eWrapper=void 0):this.eWrapper=e,this.updateOverlay(!1))}isVisible(){return!!this.currentDef}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos;if(!this.eWrapper||e.get("activeOverlay"))return;if(this.isDisabled(Oge))return;const t=e.get("loading");(t||void 0===t)&&this.doShowOverlay(Oge)}showNoRowsOverlay(){this.showInitialOverlay=!1;const e=this.gos;!this.eWrapper||e.get("activeOverlay")||e.get("loading")||this.isDisabled(Fge)||(this.userForcedNoRows=!0,this.doShowOverlay(Fge))}async showExportOverlay(e){const{gos:t,beans:i}=this;if(!this.eWrapper||t.get("activeOverlay")||t.get("loading")||this.isDisabled(Bge)||this.userForcedNoRows&&this.currentDef===Fge)return void e();const n=this.getDesiredDefWithOverride(Bge);if(!n)return void e();this.exportsInProgress++,this.focusedCell=i.focusSvc.getFocusedCell(),await this.doShowOverlay(n),await new Promise(e=>setTimeout(()=>e()));const o=Date.now();try{e()}finally{const e=Date.now()-o,t=Math.max(0,300-e),n=()=>{this.exportsInProgress--,0===this.exportsInProgress&&(this.updateOverlay(!1),wue(i,this.focusedCell),this.focusedCell=null)};t>0?setTimeout(()=>n(),t):n()}}hideOverlay(){const e=this.gos;this.showInitialOverlay=!1;const t=this.userForcedNoRows;this.userForcedNoRows=!1,e.get("loading")?lse(99):e.get("activeOverlay")?lse(296):this.currentDef!==zge?(this.doHideOverlay(),t&&this.getOverlayDef()!==Fge&&this.updateOverlay(!1)):lse(297)}getOverlayWrapperSelector(){return Rge}getOverlayWrapperCompClass(){return Tge}onPropChange(e){var t;const i=e.has("activeOverlay");if((i||e.has("loading"))&&this.updateOverlay(i))return;const n=this.currentDef,o=null===(t=this.eWrapper)||void 0===t?void 0:t.activeOverlay;if(o&&n){const t=e.has("activeOverlayParams");if(n===Vge){var s;if(t)null===(s=o.refresh)||void 0===s||s.call(o,this.makeCompParams(!0))}else{const t=n.paramsKey;var r;if(e.has("overlayComponentParams")||t&&e.has(t))null===(r=o.refresh)||void 0===r||r.call(o,this.makeCompParams(!1,t,n.overlayType))}}}updateOverlay(e){const t=this.eWrapper;if(!t)return this.currentDef=null,!1;const i=this.getDesiredDefWithOverride(),n=this.currentDef,o=i===Vge&&e;return i!==n?i?(this.doShowOverlay(i),!0):(this.disableInitialOverlay(),this.doHideOverlay()):o&&i?(t.hideOverlay(),this.doShowOverlay(i),!0):(i||this.disableInitialOverlay(),!1)}getDesiredDefWithOverride(e){const{gos:t}=this;let i=(e=>{var t;return e?null!==(t={agLoadingOverlay:Oge,agNoRowsOverlay:Fge,agNoMatchingRowsOverlay:zge,agExportingOverlay:Bge}[e])&&void 0!==t?t:Vge:null})(t.get("activeOverlay"));return i||(i=null!==e&&void 0!==e?e:this.getOverlayDef(),i&&this.isDisabled(i)&&(i=null)),i}getOverlayDef(){const{gos:e,beans:t}=this,{colModel:i,rowModel:n}=t,o=e.get("loading");if(void 0!==o){if(this.disableInitialOverlay(),o)return Oge}else if(this.showInitialOverlay){if(!this.isDisabled(Oge)&&(!e.get("columnDefs")||!i.ready||!e.get("rowData")))return Oge;this.disableInitialOverlay()}else this.disableInitialOverlay();return(e=>e?{loading:Oge,noRows:Fge,noMatchingRows:zge,exporting:Bge}[e]:null)(n.getOverlayType())}disableInitialOverlay(){var e;this.showInitialOverlay=!1,null===(e=this.newColumnsLoadedCleanup)||void 0===e||e.call(this),this.newColumnsLoadedCleanup=null}doShowOverlay(e){var t,i,n;const{gos:o,beans:s}=this,{userCompFactory:r}=s;this.currentDef=e;const a=e!==Vge,l=!!e.exclusive;let d,c;this.exclusive=l,(e.paramsKey&&o.get(e.paramsKey)||e.compKey&&o.get(e.compKey))&&(d=e.paramsKey),a&&(o.get("overlayComponent")||o.get("overlayComponentSelector"))&&(c=r.getCompDetailsFromGridOptions({name:"overlayComponent",optionalMethods:["refresh"]},void 0,this.makeCompParams(!1,e.paramsKey,e.overlayType))),null!==c&&void 0!==c||(c=r.getCompDetailsFromGridOptions(e.comp,a?e.id:void 0,this.makeCompParams(!a,d,e.overlayType),!1));const u=null!==(t=null===(i=c)||void 0===i?void 0:i.newAgStackInstance())&&void 0!==t?t:null,h=this.eWrapper?this.eWrapper.showOverlay(u,e.wrapperCls,l):pae.resolve();return null===(n=this.eWrapper)||void 0===n||n.refreshWrapperPadding(),this.setExclusive(l),h}makeCompParams(e,t,i){const{gos:n}=this,o=e?n.get("activeOverlayParams"):p(p(p({},n.get("overlayComponentParams")),t&&n.get(t)||null),{},{overlayType:i});return Kse(n,null!==o&&void 0!==o?o:{})}doHideOverlay(){let e=!1;this.currentDef&&(this.currentDef=null,e=!0),this.exclusive=!1;const t=this.eWrapper;return t&&(t.hideOverlay(),t.refreshWrapperPadding(),this.setExclusive(!1)),e}setExclusive(e){this.oldExclusive!==e&&(this.oldExclusive=e,this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"}))}isDisabled(e){var t,i;const{gos:n}=this;return e.overlayType&&(null===(t=n.get("suppressOverlays"))||void 0===t?void 0:t.includes(e.overlayType))||!0===(null===(i=e.isSuppressed)||void 0===i?void 0:i.call(e,n))}}]},Hge=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.rowNode.id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}}getRow(e){if(null==(null===e||void 0===e?void 0:e.id))return null;const t=this.entriesMap[e.id];if(!t)return null;this.removeFromCache(t),t.setCached(!1);return t.rowNode!=e?null:t}has(e){return null!=this.entriesMap[e.id]}removeRow(e){const t=e.id,i=this.entriesMap[t];delete this.entriesMap[t],fre(this.entriesList,i)}removeFromCache(e){const t=e.rowNode.id;delete this.entriesMap[t],fre(this.entriesList,e)}getEntries(){return this.entriesList}};function jge(e){if(!e)return;const t={top:{},bottom:{},normal:{}};for(const i of e){const e=i.id;switch(i.rowPinned){case"top":t.top[e]=i;break;case"bottom":t.bottom[e]=i;break;default:t.normal[e]=i}}return t}function Wge(e,t){const i=e.id;switch(e.rowPinned){case"top":return null!=t.top[i];case"bottom":return null!=t.bottom[i];default:return null!=t.normal[i]}}var _ge=e=>{if(e.data)return e;let t=e.childrenAfterGroup;for(;null!==(i=t)&&void 0!==i&&i.length;){var i;const e=t[0];if(e.data)return e;t=e.childrenAfterGroup}},Kge=e=>{if(!e)return e;const t=Number(e);return isNaN(t)?e:Math.abs(t)};var Uge=(e,t)=>({tag:"span",ref:"eSort".concat(e),cls:"ag-sort-indicator-icon ag-sort-".concat(t," ag-hidden"),attrs:{"aria-hidden":"true"}}),Yge={tag:"span",cls:"ag-sort-indicator-container",children:[Uge("Order","order"),Uge("Asc","ascending-icon"),Uge("Desc","descending-icon"),Uge("Mixed","mixed-icon"),Uge("AbsoluteAsc","absolute-ascending-icon"),Uge("AbsoluteDesc","absolute-descending-icon"),Uge("None","none-icon")]},$ge=class extends hae{constructor(e){super(),this.eSortOrder=lae,this.eSortAsc=lae,this.eSortDesc=lae,this.eSortMixed=lae,this.eSortNone=lae,this.eSortAbsoluteAsc=lae,this.eSortAbsoluteDesc=lae,e||this.setTemplate(Yge)}attachCustomElements(e,t,i,n,o,s,r){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=n,this.eSortNone=o,this.eSortAbsoluteAsc=s,this.eSortAbsoluteDesc=r}setupSort(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!e.isSortable()&&!e.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addInIcon("sortAbsoluteAscending",this.eSortAbsoluteAsc,e),this.addInIcon("sortAbsoluteDescending",this.eSortAbsoluteDesc,e);const i=this.updateIcons.bind(this),n=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",i),this.addManagedEventListeners({newColumnsLoaded:i,sortChanged:n,columnRowGroupChanged:n}),this.onSortChanged()}addInIcon(e,t,i){if(null==t)return;const n=_ue(e,this.beans,i);n&&t.appendChild(n)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const{eSortAsc:e,eSortDesc:t,eSortAbsoluteAsc:i,eSortAbsoluteDesc:n,eSortNone:o,column:s,gos:r,beans:a}=this,l=a.sortSvc.getDisplaySortForColumn(s),d=are(null===l||void 0===l?void 0:l.type),c=rre(null===l||void 0===l?void 0:l.direction),u=s.getAvailableSortTypes(),h=u.has("default"),p=u.has("absolute"),g="absolute"===d,m="default"===d,f="asc"===c,v="desc"===c;if(e&&Mne(e,f&&m&&h,{skipAriaHidden:!0}),t&&Mne(t,v&&m&&h,{skipAriaHidden:!0}),o){Mne(o,!(!s.getColDef().unSortIcon&&!r.get("unSortIcon"))&&!c,{skipAriaHidden:!0})}i&&Mne(i,f&&g&&p,{skipAriaHidden:!0}),n&&Mne(n,v&&g&&p,{skipAriaHidden:!0})}setupMultiSortIndicator(){const{eSortMixed:e,column:t,gos:i}=this;this.addInIcon("sortUnSort",e,t);const n=t.getColDef().showRowGroup;Ise(i)&&n&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){const{eSortMixed:e,beans:t,column:i}=this;if(e){var n;Mne(e,"mixed"===(null===(n=t.sortSvc.getDisplaySortForColumn(i))||void 0===n?void 0:n.direction),{skipAriaHidden:!0})}}updateSortOrder(){var e;const{eSortOrder:t,column:i,beans:{sortSvc:n}}=this;if(!t)return;const o=n.getColumnsWithSortingOrdered(),s=null!==(e=n.getDisplaySortIndexForColumn(i))&&void 0!==e?e:-1,r=o.some(e=>{var t;return null!==(t=n.getDisplaySortIndexForColumn(e))&&void 0!==t&&t});Mne(t,s>=0&&r,{skipAriaHidden:!0}),s>=0?t.textContent=(s+1).toString():Fne(t)}},Zge={selector:"AG-SORT-INDICATOR",component:$ge},Xge={moduleName:"Sort",version:Qoe,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(e,t,i){const n=this.getNextSortDirection(e);this.setSortForColumn(e,n,t,i)}progressSortFromEvent(e,t){const i="ctrl"===this.gos.get("multiSortKey")?t.ctrlKey||t.metaKey:t.shiftKey;this.progressSort(e,i,"uiColumnSorted")}setSortForColumn(e,t,i,n){const{gos:o,showRowGroupCols:s}=this.beans;let r=[e];if(Ise(o)&&e.getColDef().showRowGroup){var a;const t=null===s||void 0===s||null===(a=s.getSourceColumnsForGroupColumn)||void 0===a?void 0:a.call(s,e),i=null===t||void 0===t?void 0:t.filter(e=>e.isSortable());i&&(r=[e,...i])}for(const d of r)this.setColSort(d,t,n);const l=[];if(!((i||o.get("alwaysMultiSort"))&&!o.get("suppressMultiSort"))){const e=this.clearSortBarTheseColumns(r,n);l.push(...e)}this.updateSortIndex(e),l.push(...r),this.dispatchSortChangedEvents(n,l)}updateSortIndex(e){const{gos:t,colModel:i,showRowGroupCols:n}=this.beans,o=Ise(t),s=null===n||void 0===n?void 0:n.getShowRowGroupCol(e.getId()),r=o&&s||e,a=this.getColumnsWithSortingOrdered();i.forAllCols(e=>this.setColSortIndex(e,null));const l=a.filter(e=>(!o||!e.getColDef().showRowGroup)&&e!==r);(r.getSortDef()?[...l,r]:l).forEach((e,t)=>this.setColSortIndex(e,t))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let e=!1;return this.beans.colModel.forAllCols(t=>{if(t.getSortDef())return e=!0,!0}),e}dispatchSortChangedEvents(e,t){const i={type:"sortChanged",source:e};t&&(i.columns=t),this.eventSvc.dispatchEvent(i)}clearSortBarTheseColumns(e,t){const i=[];return this.beans.colModel.forAllCols(n=>{e.includes(n)||(n.getSortDef()&&i.push(n),this.setColSort(n,void 0,t))}),i}getNextSortDirection(e){const t=e.getSortingOrder(),i=e.getSortDef();let n=t.findIndex(e=>sre(e,i))+1;return n>=t.length&&(n=0),tre(t[n])}getIndexedSortMap(){var e;const{gos:t,colModel:i,showRowGroupCols:n,rowGroupColsSvc:o}=this.beans;let s=[];if(i.forAllCols(e=>{e.getSortDef()&&s.push(e)}),i.isPivotMode()){const e=Ise(t);s=s.filter(t=>{const i=!!t.getAggFunc(),o=!t.isPrimary(),s=e?null===n||void 0===n?void 0:n.getShowRowGroupCol(t.getId()):t.getColDef().showRowGroup;return i||o||s})}const r=null!==(e=null===o||void 0===o?void 0:o.columns.filter(e=>!!e.getSortDef()))&&void 0!==e?e:[],a={};s.forEach((e,t)=>a[e.getId()]=t),s.sort((e,t)=>{const i=e.getSortIndex(),n=t.getSortIndex();if(null!=i&&null!=n)return i-n;if(null==i&&null==n){return a[e.getId()]>a[t.getId()]?1:-1}return null==n?-1:1});const l=Ise(t)&&!!r.length;l&&(s=[...new Set(s.map(e=>{var t;return null!==(t=null===n||void 0===n?void 0:n.getShowRowGroupCol(e.getId()))&&void 0!==t?t:e}))]);const d=new Map;if(s.forEach((e,t)=>d.set(e,t)),l)for(const c of r){const e=n.getShowRowGroupCol(c.getId());d.set(c,d.get(e))}return d}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort((e,t)=>{let[,i]=e,[,n]=t;return i-n}).map(e=>{let[t]=e;return t})}collectSortItems(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=[],i=this.getColumnsWithSortingOrdered();for(const s of i){var n,o;const i=null===(n=s.getSortDef())||void 0===n?void 0:n.direction;if(!i)continue;const r={sort:i,type:are(null===(o=s.getSortDef())||void 0===o?void 0:o.type)};e?r.colId=s.getId():r.column=s,t.push(r)}return t}getSortModel(){return this.collectSortItems(!0)}getSortOptions(){return this.collectSortItems()}canColumnDisplayMixedSort(e){const t=Ise(this.gos),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){var t;const i=null===(t=this.beans.showRowGroupCols)||void 0===t?void 0:t.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||null===i||void 0===i||!i.length)return e.getSortDef();const n=null!=e.getColDef().field||!!e.getColDef().valueGetter?[e,...i]:i,o=n[0].getSortDef();var s;return n.every(e=>sre(e.getSortDef(),o))?o:{type:are(null===(s=e.getSortDef())||void 0===s?void 0:s.type),direction:"mixed"}}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}setupHeader(e,t){const i=()=>{const{type:i,direction:n}=tre(t.getSortDef());if(e.toggleCss("ag-header-cell-sorted-asc","asc"===n),e.toggleCss("ag-header-cell-sorted-desc","desc"===n),e.toggleCss("ag-header-cell-sorted-abs-asc","absolute"===i&&"asc"===n),e.toggleCss("ag-header-cell-sorted-abs-desc","absolute"===i&&"desc"===n),e.toggleCss("ag-header-cell-sorted-none",!n),t.getColDef().showRowGroup){var o;const i=null===(o=this.beans.showRowGroupCols)||void 0===o?void 0:o.getSourceColumnsForGroupColumn(t),s=!(null===i||void 0===i?void 0:i.every(e=>{var t;return n==(null===(t=e.getSortDef())||void 0===t?void 0:t.direction)}));e.toggleCss("ag-header-cell-sorted-mixed",s)}};e.addManagedEventListeners({sortChanged:i,columnRowGroupChanged:i})}initCol(e){const{sortIndex:t,initialSortIndex:i}=e.colDef,n=Ore(e.colDef);n&&e.setSortDef(n,!0),void 0!==t?null!==t&&(e.sortIndex=t):null!==i&&(e.sortIndex=i)}updateColSort(e,t,i){void 0!==t&&this.setColSort(e,tre(t),i)}setColSort(e,t,i){sre(e.getSortDef(),t)||(e.setSortDef(tre(t),void 0===t),e.dispatchColEvent("sortChanged",i)),e.dispatchStateUpdatedEvent("sort")}setColSortIndex(e,t){e.sortIndex=t,e.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(e){return new $ge(e)}getSortIndicatorSelector(){return Zge}},class extends yoe{constructor(){super(...arguments),this.beanName="rowNodeSorter",this.accentedSort=!1,this.primaryColumnsSortGroups=!1,this.pivotActive=!1}postConstruct(){this.firstLeaf=gse(this.gos)?que:_ge,this.addManagedPropertyListeners(["accentedSort","autoGroupColumnDef","treeData"],this.updateOptions.bind(this));const e=this.updatePivotModeState.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,columnPivotChanged:e}),this.updateOptions(),e()}updateOptions(){this.accentedSort=!!this.gos.get("accentedSort"),this.primaryColumnsSortGroups=Ise(this.gos)}updatePivotModeState(){this.pivotActive=this.beans.colModel.isPivotActive()}doFullSortInPlace(e,t){return e.sort((e,i)=>this.compareRowNodes(t,e,i))}compareRowNodes(e,t,i){if(t===i)return 0;const n=this.accentedSort;for(let o=0,s=e.length;o<s;++o){const s=e[o],r="desc"===s.sort;let a,l=this.getValue(t,s.column),d=this.getValue(i,s.column);const c=this.getComparator(s,t);if(c?a=c(l,d,t,i,r):("absolute"===s.type&&(l=Kge(l),d=Kge(d)),a=Vie(l,d,n)),a)return"asc"===s.sort?a:-a}return 0}getComparator(e,t){const i=e.column.getColDef(),n=this.getComparatorFromColDef(i,e);if(n)return n;if(!i.showRowGroup)return;const o=!t.group&&i.field;if(!o)return;const s=this.beans.colModel.getColDefCol(o);return s?this.getComparatorFromColDef(s.getColDef(),e):void 0}getComparatorFromColDef(e,t){const i=e.comparator;if(null!=i)return"object"===typeof i?i[are(t.type)]:i}getValue(e,t){const i=this.beans;if(this.primaryColumnsSortGroups){if(e.rowGroupColumn===t)return this.getGroupDataValue(e,t);if(e.group&&t.getColDef().showRowGroup)return}const n=i.valueSvc.getValue(t,e,!1,"api");if(t.isAllowFormula()){const o=i.formula;if(null!==o&&void 0!==o&&o.isFormula(n))return o.resolveValue(t,e)}return n}getGroupDataValue(e,t){var i,n;if(Rse(this.gos,this.pivotActive)){const i=this.firstLeaf(e);return i&&this.beans.valueSvc.getValue(t,i,!1,"api")}const o=null===(i=this.beans.showRowGroupCols)||void 0===i?void 0:i.getShowRowGroupCol(t.getId());return o?null===(n=e.groupData)||void 0===n?void 0:n[o.getId()]:void 0}}],apiFunctions:{onSortChanged:function(e){var t;null===(t=e.sortSvc)||void 0===t||t.onSortChanged("api")}},userComponents:{agSortIndicator:$ge},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",sortAbsoluteAscending:"aasc",sortAbsoluteDescending:"adesc"}};var qge={moduleName:"Expression",version:Qoe,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(e,t){if("string"===typeof e)return this.evaluateExpression(e,t);dse(15,{expression:e})}evaluateExpression(e,t){try{const i=this.createExpressionFunction(e);return i(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(i){return dse(16,{expression:e,params:t,e:i}),null}}createExpressionFunction(e){const t=this.cache;if(t[e])return t[e];const i=this.createFunctionBody(e),n=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",i);return t[e]=n,n}createFunctionBody(e){return e.includes("return")?e:"return "+e+";"}}]},Qge={moduleName:"ChangeDetection",version:Qoe,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){const{gos:e,rowModel:t}=this.beans;gse(e)&&(this.clientSideRowModel=t),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){const{gos:t,rowRenderer:i}=this.beans;if("paste"===e.source||t.get("suppressChangeDetection"))return;const n=e.node,o=[n],s=this.clientSideRowModel,r=null===s||void 0===s?void 0:s.rootNode;if(r&&!n.isRowPinned()){const i=t.get("aggregateOnlyChangedColumns"),a=new vhe(i,r);a.addParentNode(n.parent,[e.column]),s.doAggregate(a),a.forEachChangedNodeDepthFirst(e=>{o.push(e),e.sibling&&o.push(e.sibling)})}i.refreshCells({rowNodes:o})}}]},Jge={moduleName:"CommunityCore",version:Qoe,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){var e,t;if(this.destroyCalled)return;const{stateSvc:i,ctrlsSvc:n,context:o}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:null!==(e=null===i||void 0===i?void 0:i.getState())&&void 0!==e?e:{}}),this.destroyCalled=!0,null===(t=n.get("gridCtrl"))||void 0===t||t.destroyGridUi(),o.destroy(),super.destroy()}},class extends yoe{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new ghe,this.fns=p(p({},hhe),{},{dispatchEvent:phe}),this.preDestroyLink="";const{api:e}=this;for(const t of Object.keys(uhe))e[t]=this.makeApi(t)[t]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){const{fns:i,beans:n}=this;var o,s;i!==hhe&&(i[e]=null!==(o=null===n||void 0===n||null===(s=n.validation)||void 0===s?void 0:s.validateApiFunction(e,t))&&void 0!==o?o:t)}makeApi(e){var t=this;return{[e]:function(){const{beans:i,fns:{[e]:n}}=t;for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return n?n(i,...s):t.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:i,preDestroyLink:n}=this;if(t){const t=uhe[e];i.assertModuleRegistered(t,"api.".concat(e))&&lse(27,{fnName:e,module:t})}else lse(26,{fnName:e,preDestroyLink:n})}destroy(){super.destroy(),this.fns=hhe,this.beans=null}},class extends Mde{constructor(){super(...arguments),this.agGridDefaults={},this.agGridDefaultOverrides={},this.jsComps={},this.selectors={},this.icons={}}postConstruct(){const e=this.gos.get("components");if(null!=e)for(const t of Object.keys(e))this.jsComps[t]=e[t]}registerModule(e){const{icons:t,userComponents:i,dynamicBeans:n,selectors:o}=e;if(i){const e=(e,t,i,n)=>{this.agGridDefaults[e]=t,(i||n)&&(this.agGridDefaultOverrides[e]={params:i,processParams:n})};for(const t of Object.keys(i)){let n=i[t];if(Rae(n)&&(n=n.getComp(this.beans)),"object"===typeof n){const{classImp:i,params:o,processParams:s}=n;e(t,i,o,s)}else e(t,n)}}this.registerDynamicBeans(n);for(const s of null!==o&&void 0!==o?o:[])this.selectors[s.selector]=s;if(t)for(const s of Object.keys(t))this.icons[s]=t[s]}getUserComponent(e,t){var i;const n=(e,t,i,n)=>({componentFromFramework:t,component:e,params:i,processParams:n}),{frameworkOverrides:o}=this.beans,s=o.frameworkComponent(t,this.gos.get("components"));if(null!=s)return n(s,!0);const r=this.jsComps[t];if(r){return n(r,o.isFrameworkComponent(r))}const a=this.agGridDefaults[t];if(a){const e=this.agGridDefaultOverrides[t];return n(a,!1,null===e||void 0===e?void 0:e.params,null===e||void 0===e?void 0:e.processParams)}return null===(i=this.beans.validation)||void 0===i||i.missingUserComponent(e,t,this.agGridDefaults,this.jsComps),null}getSelector(e){return this.selectors[e]}getIcon(e){return this.icons[e]}getDynamicError(e,t){var i,n;return t?hse(279,{name:e}):null!==(i=null===(n=this.beans.validation)||void 0===n?void 0:n.missingDynamicBean(e))&&void 0!==i?i:hse(256)}},class extends yoe{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(e){this.agCompUtils=e.agCompUtils,this.registry=e.registry,this.frameworkCompWrapper=e.frameworkCompWrapper,this.gridOptions=e.gridOptions}getCompDetailsFromGridOptions(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.getCompDetails(this.gridOptions,e,t,i,n)}getCompDetails(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const{name:s,cellRenderer:r}=t;let a,l,{compName:d,jsComp:c,fwComp:u,paramsFromSelector:h,popupFromSelector:g,popupPositionFromSelector:m}=gae(this.beans.frameworkOverrides,e,t,n);const f=e=>{const t=this.registry.getUserComponent(s,e);t&&(c=t.componentFromFramework?void 0:t.component,u=t.componentFromFramework?t.component:void 0,a=t.params,l=t.processParams)};var v,y;(null!=d&&f(d),null==c&&null==u&&null!=i&&f(i),!c||!r||(y=c)&&y.prototype&&"getGui"in y.prototype)||(c=null===(v=this.agCompUtils)||void 0===v?void 0:v.adaptFunction(t,c));if(!c&&!u){const{validation:e}=this.beans;return void(!o||d===i&&i?i&&!e&&dse(146,{comp:i}):d?null!==e&&void 0!==e&&e.isProvidedUserComp(d)||dse(50,{compName:d}):i?e||dse(260,p(p({},this.gos.getModuleErrorParams()),{},{propName:s,compName:i})):dse(216,{name:s}))}const b=this.mergeParams(e,t,n,h,a,l),x=null==c,C=null!==c&&void 0!==c?c:u;return{componentFromFramework:x,componentClass:C,params:b,type:t,popupFromSelector:g,popupPositionFromSelector:m,newAgStackInstance:()=>this.newAgStackInstance(C,x,b,t)}}newAgStackInstance(e,t,i,n){var o,s;let r;r=!t?new e:this.frameworkCompWrapper.wrap(e,n.mandatoryMethods,n.optionalMethods,n),this.createBean(r);const a=null===(o=(s=r).init)||void 0===o?void 0:o.call(s,i);return null==a?pae.resolve(r):a.then(()=>r)}mergeParams(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;const r=p(p({},i),o),a=null===e||void 0===e?void 0:e[t.name+"Params"];if("function"===typeof a){Aoe(r,a(i))}else"object"===typeof a&&Aoe(r,a);return Aoe(r,n),s?s(r):r}},class extends yoe{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=function(){if(void 0!==Hae)return Hae;if(!document.body)return-1;let e=1e6;const t=_ae()?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){const n=2*e;if(i.style.height=n+"px",n>t||i.clientHeight!==n)break;e=n}return i.remove(),Hae=e,e}(),Ooe(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;Ooe(this.gos,"RowContainerHeightService - Div Stretch Offset = ".concat(t," (").concat(this.pixelsToShave," * ").concat(e,")")),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t="number"===typeof e?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=null!=e&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=e/(this.modelHeight-this.getUiBodyHeight());return this.maxScrollY*t}},class extends yoe{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.headerGroupRowCount=0,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{colFlex:i,colModel:n,colGroupSvc:o,colViewport:s,selectionColSvc:r}=this.beans;t||this.buildTrees(n,o),null===o||void 0===o||o.updateOpenClosedVisibility(),this.leftCols=Bhe(this.treeLeft),this.centerCols=Bhe(this.treeCenter),this.rightCols=Bhe(this.treeRight),null===r||void 0===r||r.refreshVisibility(this.leftCols,this.centerCols,this.rightCols),this.joinColsAriaOrder(n),this.joinCols(),this.headerGroupRowCount=this.getHeaderRowCount(),this.setLeftValues(e),this.autoHeightCols=this.allCols.filter(e=>e.isAutoHeight()),null===i||void 0===i||i.refreshFlexedColumns(),this.updateBodyWidths(),this.setFirstRightAndLastLeftPinned(n,this.leftCols,this.rightCols,e),s.checkViewportColumns(!1),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:e})}getHeaderRowCount(){if(!this.gos.get("hidePaddedHeaderRows"))return this.beans.colModel.cols.treeDepth;let e=0;for(const t of this.allCols){let i=t.getParent();for(;i;){if(!i.isPadding()){const t=i.getProvidedColumnGroup().getLevel()+1;t>e&&(e=t);break}i=i.getParent()}}return e}updateBodyWidths(){const e=wre(this.centerCols),t=wre(this.leftCols),i=wre(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==e;(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e,t,i,n){let o,s;this.gos.get("enableRtl")?(o=t?t[0]:null,s=i?pre(i):null):(o=t?pre(t):null,s=i?i[0]:null);for(const r of e.getCols())r.setLastLeftPinned(r===o,n),r.setFirstRightPinned(r===s,n)}buildTrees(e,t){const i=e.getColsToShow(),n=i.filter(e=>"left"==e.getPinned()),o=i.filter(e=>"right"==e.getPinned()),s=i.filter(e=>"left"!=e.getPinned()&&"right"!=e.getPinned()),r=new sae,a=e=>t?t.createColumnGroups(e):e.columns;this.treeLeft=a({columns:n,idCreator:r,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=a({columns:o,idCreator:r,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=a({columns:s,idCreator:r,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(e){const t=e.getCols(),i=[],n=[],o=[];for(const s of t){const e=s.getPinned();e?!0===e||"left"===e?i.push(s):o.push(s):n.push(s)}this.ariaOrderColumns=i.concat(n).concat(o)}getAriaColIndex(e){let t;return t=Ude(e)?e.getLeafColumns()[0]:e,this.ariaOrderColumns.indexOf(t)+1}setLeftValuesOfGroups(){for(const e of[this.treeLeft,this.treeRight,this.treeCenter])for(const t of e)if(Ude(t)){t.checkLeft()}}setLeftValuesOfCols(e){const{colModel:t}=this.beans;if(!t.getColDefCols())return;const i=t.getCols().slice(0),n=this.gos.get("enableRtl");for(const o of[this.leftCols,this.rightCols,this.centerCols]){if(n){let t=wre(o);for(const i of o)t-=i.getActualWidth(),i.setLeft(t,e)}else{let t=0;for(const i of o)i.setLeft(t,e),t+=i.getActualWidth()}Fhe(i,o)}for(const o of i)o.setLeft(null,e)}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(e){return this.allCols.indexOf(e)>=0}getLeftColsForRow(e){const{leftCols:t,beans:{colModel:i}}=this;return i.colSpanActive?this.getColsForRow(e,t):t}getRightColsForRow(e){const{rightCols:t,beans:{colModel:i}}=this;return i.colSpanActive?this.getColsForRow(e,t):t}getColsForRow(e,t,i,n){const o=[];let s=null;for(let r=0;r<t.length;r++){const a=t[r],l=t.length-r,d=Math.min(a.getColSpan(e),l),c=[a];if(d>1){const e=d-1;for(let i=1;i<=e;i++)c.push(t[r+i]);r+=e}let u;if(i){u=!1;for(const e of c)i(e)&&(u=!0)}else u=!0;if(u){if(0===o.length&&s){!!n&&n(a)&&o.push(s)}o.push(a)}s=a}return o}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(e){const t=this.allCols,i=t.indexOf(e);return i>0?t[i-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=e=>{this.colsAndGroupsMap[e.getUniqueId()]=e};zhe(this.treeCenter,!1,e),zhe(this.treeLeft,!1,e),zhe(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["leftCols","centerCols","rightCols"];e&&t.reverse();for(let i=0;i<t.length;i++){const n=this[t[i]];if(n.length)return e?pre(n):n[0]}return null}getColAfter(e){const t=this.allCols,i=t.indexOf(e);return i<t.length-1?t[i+1]:null}getColsLeftWidth(){return wre(this.leftCols)}getDisplayedColumnsRightWidth(){return wre(this.rightCols)}isColAtEdge(e,t){const i=this.allCols;if(!i.length)return!1;const n="first"===t;let o;if(Ude(e)){const t=e.getDisplayedLeafColumns();if(!t.length)return!1;o=n?t[0]:pre(t)}else o=e;return(n?i[0]:pre(i))===o}},class extends kde{postConstruct(){const{globalListener:e,globalSyncListener:t}=this.beans;e&&this.addGlobalListener(e,!0),t&&this.addGlobalListener(t,!1)}},class extends yoe{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.instanceId=Kpe++,this.gridReadyFired=!1,this.queueEvents=[],this.propEventSvc=new Pie,this.globalEventHandlerFactory=e=>(t,i)=>{if(!this.isAlive())return;const n=Bpe.has(t);if(n&&!e||!n&&e)return;if(!function(e){return!!Gpe[e]}(t))return;const o=(e,t)=>{const i=Gpe[e],n=this.gridOptions[i];"function"===typeof n&&this.beans.frameworkOverrides.wrapOutgoing(()=>n(t))};if(this.gridReadyFired)o(t,i);else if("gridReady"===t){o(t,i),this.gridReadyFired=!0;for(const e of this.queueEvents)o(e.eventName,e.event);this.queueEvents=[]}else this.queueEvents.push({eventName:t,event:i})}}wireBeans(e){this.gridOptions=e.gridOptions,this.validation=e.validation,this.api=e.gridApi,this.gridId=e.context.getId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.validateGridOptions(this.gridOptions),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:e=>{let{options:t}=e;this.updateGridOptions({options:t,force:!0,source:"optionsUpdated"})}})}destroy(){super.destroy(),this.queueEvents=[]}get(e){var t;return null!==(t=this.gridOptions[e])&&void 0!==t?t:Eoe[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return Fie(this.gridOptions[e])}mergeGridCommonParams(e){if(e){return t=>e(this.addCommon(t))}return e}updateGridOptions(e){let{options:t,force:i,source:n="api"}=e;const o={id:_pe++,properties:[]},s=[],{gridOptions:r,validation:a}=this;for(const l of Object.keys(t)){const e=Toe.applyGlobalGridOption(l,t[l]);null===a||void 0===a||a.warnOnInitialPropertyUpdate(n,l);const d=i||"object"===typeof e&&"api"===n,c=r[l];if(d||c!==e){r[l]=e;const t={type:l,currentValue:e,previousValue:c,changeSet:o,source:n};s.push(t)}}this.validateGridOptions(this.gridOptions),o.properties=s.map(e=>e.type);for(const l of s)Ooe(this,"Updated property ".concat(l.type," from"),l.previousValue," to ",l.currentValue),this.propEventSvc.dispatchEvent(l)}addPropertyEventListener(e,t){this.propEventSvc.addEventListener(e,t)}removePropertyEventListener(e,t){this.propEventSvc.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}addCommon(e){return e.api=this.api,e.context=this.gridOptionsContext,e}validateOptions(e,t){for(const i of Object.keys(e)){const n=e[i];if(null==n||!1===n)continue;let o=t[i];"function"===typeof o&&(o=o(e,this.gridOptions,this.beans)),o&&this.assertModuleRegistered(o,i)}}validateGridOptions(e){var t;this.validateOptions(e,Wpe),null===(t=this.validation)||void 0===t||t.processGridOptions(e)}validateColDef(e,t,i){var n,o;!i&&null!==(n=this.beans.dataTypeSvc)&&void 0!==n&&n.isColPendingInference(t)||(this.validateOptions(e,jpe),null===(o=this.validation)||void 0===o||o.validateColDef(e))}assertModuleRegistered(e,t){const i=Array.isArray(e)?e.some(e=>this.isModuleRegistered(e)):this.isModuleRegistered(e);return i||dse(200,p(p({},this.getModuleErrorParams()),{},{moduleName:e,reasonOrId:t})),i}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:$oe(),rowModelType:this.get("rowModelType"),isUmd:Xoe()}}isModuleRegistered(e){return Yoe(e,this.gridId,this.get("rowModelType"))}setInstanceDomData(e){e[Upe]=this.instanceId}isElementInThisInstance(e){let t=e;for(;t;){const e=t[Upe];if(Fie(e)){return e===this.instanceId}t=t.parentElement}return!1}},class extends yoe{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents","rowNumbers","hidePaddedHeaderRows"],e=>this.refreshAll(Rre(e.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),Rre(e.source)))}createColsFromColDefs(e){var t,i,n;const{beans:o}=this,{valueCache:s,colAutosize:r,rowGroupColsSvc:a,pivotColsSvc:l,valueColsSvc:d,visibleCols:c,eventSvc:u,groupHierarchyColSvc:h}=o,p=this.colDefs?eae(o,e):void 0;null===s||void 0===s||s.expire();const g=null===(t=this.colDefCols)||void 0===t?void 0:t.list,m=null===(i=this.colDefCols)||void 0===i?void 0:i.tree,f=zre(o,this.colDefs,!0,m,e);Mre(o,null===(n=this.colDefCols)||void 0===n?void 0:n.tree,f.columnTree);const v=f.columnTree,y=f.treeDepth,b=Sre(v),x={};for(const C of b)x[C.getId()]=C;this.colDefCols={tree:v,treeDepth:y,list:b,map:x},this.createColumnsForService([h],this.colDefCols,e),null===a||void 0===a||a.extractCols(e,g),null===l||void 0===l||l.extractCols(e,g),null===d||void 0===d||d.extractCols(e,g),this.ready=!0,this.changeEventsDispatching=!0,this.refreshCols(!0,e),this.changeEventsDispatching=!1,c.refresh(e),u.dispatchEvent({type:"columnEverythingChanged",source:e}),p&&(this.changeEventsDispatching=!0,p(),this.changeEventsDispatching=!1),u.dispatchEvent({type:"newColumnsLoaded",source:e}),"gridInitializing"===e&&(null===r||void 0===r||r.applyAutosizeStrategy())}refreshCols(e,t){var i;if(!this.colDefCols)return;const n=null===(i=this.cols)||void 0===i?void 0:i.tree;this.saveColOrder();const{autoColSvc:o,selectionColSvc:s,rowNumbersSvc:r,quickFilter:a,pivotResultCols:l,showRowGroupCols:d,rowAutoHeight:c,visibleCols:u,colViewport:h,eventSvc:p,formula:g}=this.beans,m=this.selectCols(l,this.colDefCols);null===g||void 0===g||g.setFormulasActive(m),this.createColumnsForService([o,s,r],m,t);const f=(v=this.gos,this.showingPivotResult?!v.get("enableStrictPivotColumnOrder"):v.get("maintainColumnOrder"));var v;e&&!f||this.restoreColOrder(m),this.positionLockedCols(m),null===d||void 0===d||d.refresh(),null===a||void 0===a||a.refreshCols(),this.setColSpanActive(),null===c||void 0===c||c.setAutoHeightActive(m),u.clear(),h.clear(),gre(n,this.cols.tree)||p.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(e,t,i){for(const n of e)n&&(n.createColumns(t,e=>{this.lastOrder=e(this.lastOrder),this.lastPivotOrder=e(this.lastPivotOrder)},i),n.addColumns(t))}selectCols(e,t){var i;const n=null!==(i=null===e||void 0===e?void 0:e.getPivotResultCols())&&void 0!==i?i:null;this.showingPivotResult=null!=n;const{map:o,list:s,tree:r,treeDepth:a}=null!==n&&void 0!==n?n:t;if(this.cols={list:s.slice(),map:p({},o),tree:r.slice(),treeDepth:a},n){n.list.some(e=>{var t;return void 0!==(null===(t=this.cols)||void 0===t?void 0:t.map[e.getColId()])})||(this.lastPivotOrder=null)}return this.cols}getColsToShow(){if(!this.cols)return[];const{beans:e,showingPivotResult:t,cols:i}=this,{valueColsSvc:n,selectionColSvc:o}=e,s=this.isPivotMode()&&!t,r=null===o||void 0===o?void 0:o.isSelectionColumnEnabled(),a=bse(e),l=null===n||void 0===n?void 0:n.columns;return i.list.filter(e=>{const t=kre(e);if(s){const i=null===l||void 0===l?void 0:l.includes(e);return t||i||r&&Dre(e)||a&&Ire(e)}return t||e.isVisible()})}refreshAll(e){this.ready&&(this.refreshCols(!1,e),this.beans.visibleCols.refresh(e))}setColsVisible(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;Qre(this.beans,{state:e.map(e=>({colId:"string"===typeof e?e:e.getColId(),hide:!t}))},i)}restoreColOrder(e){const t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;const i=t.filter(t=>null!=e.map[t.getId()]);if(0===i.length)return;if(i.length===e.list.length)return void(e.list=i);const n=e=>{const t=e.getOriginalParent();if(!t)return!1;return t.getChildren().length>1||n(t)};if(!i.some(e=>n(e))){const t=new Set(i);for(const n of e.list)t.has(n)||i.push(n);return void(e.list=i)}const o=new Map;for(let u=0;u<i.length;u++){const e=i[u];o.set(e,u)}const s=e.list.filter(e=>!o.has(e));if(0===s.length)return void(e.list=i);const r=(e,t)=>{const i=t?t.getOriginalParent():e.getOriginalParent();if(!i)return null;let n=null,s=null;for(const r of i.getChildren())if(r!==t&&r!==e){if(r instanceof ere){const e=o.get(r);if(null==e)continue;(null==n||n<e)&&(n=e,s=r);continue}r.forEachLeafColumn(e=>{const t=o.get(e);null!=t&&(null==n||n<t)&&(n=t,s=e)})}return null==s?r(e,i):s},a=[],l=new Map;for(const u of s){const e=r(u,null);if(null==e){a.push(u);continue}const t=l.get(e);void 0===t?l.set(e,u):Array.isArray(t)?t.push(u):l.set(e,[t,u])}const d=new Array(e.list.length);let c=d.length-1;for(let u=a.length-1;u>=0;u--)d[c--]=a[u];for(let u=i.length-1;u>=0;u--){const e=i[u],t=l.get(e);if(t)if(Array.isArray(t))for(let i=t.length-1;i>=0;i--){const e=t[i];d[c--]=e}else d[c--]=t;d[c--]=e}e.list=d}positionLockedCols(e){e.list=Ure(e.list,this.gos)}saveColOrder(){var e,t,i,n;this.showingPivotResult?this.lastPivotOrder=null!==(e=null===(t=this.cols)||void 0===t?void 0:t.list)&&void 0!==e?e:null:this.lastOrder=null!==(i=null===(n=this.cols)||void 0===n?void 0:n.list)&&void 0!==i?i:null}getColumnDefs(e){var t,i,n;return this.colDefCols&&(null===(t=this.beans.colDefFactory)||void 0===t?void 0:t.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,null!==(i=null===(n=this.cols)||void 0===n?void 0:n.list)&&void 0!==i?i:[],e))}setColSpanActive(){var e;this.colSpanActive=!(null===(e=this.cols)||void 0===e||!e.list.some(e=>null!=e.getColDef().colSpan))}isPivotMode(){return this.pivotMode}setPivotMode(e,t){if(e===this.pivotMode)return;if(this.pivotMode=e,!this.ready)return;this.refreshCols(!1,t);const{visibleCols:i,eventSvc:n}=this.beans;i.refresh(t),n.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){var e;const t=null===(e=this.beans.pivotColsSvc)||void 0===e?void 0:e.columns;return this.pivotMode&&!(null===t||void 0===t||!t.length)}recreateColumnDefs(e){var t;if(!this.cols)return;null===(t=this.beans.autoColSvc)||void 0===t||t.updateColumns(e);const i=Rre(e.source);this.createColsFromColDefs(i)}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){var e;Mre(this.beans,null===(e=this.colDefCols)||void 0===e?void 0:e.tree),super.destroy()}getColTree(){var e,t;return null!==(e=null===(t=this.cols)||void 0===t?void 0:t.tree)&&void 0!==e?e:[]}getColDefColTree(){var e,t;return null!==(e=null===(t=this.colDefCols)||void 0===t?void 0:t.tree)&&void 0!==e?e:[]}getColDefCols(){var e,t;return null!==(e=null===(t=this.colDefCols)||void 0===t?void 0:t.list)&&void 0!==e?e:null}getCols(){var e,t;return null!==(e=null===(t=this.cols)||void 0===t?void 0:t.list)&&void 0!==e?e:[]}forAllCols(e){var t,i,n,o,s;const{pivotResultCols:r,autoColSvc:a,selectionColSvc:l,groupHierarchyColSvc:d}=this.beans;mre(null===(t=this.colDefCols)||void 0===t?void 0:t.list,e)||mre(null===a||void 0===a||null===(i=a.columns)||void 0===i?void 0:i.list,e)||mre(null===l||void 0===l||null===(n=l.columns)||void 0===n?void 0:n.list,e)||mre(null===d||void 0===d||null===(o=d.columns)||void 0===o?void 0:o.list,e)||mre(null===r||void 0===r||null===(s=r.getPivotResultCols())||void 0===s?void 0:s.list,e)}getColsForKeys(e){return e?e.map(e=>this.getCol(e)).filter(e=>null!=e):[]}getColDefCol(e){var t;return null!==(t=this.colDefCols)&&void 0!==t&&t.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return null==e?null:this.getColFromCollection(e,this.cols)}getColById(e){var t,i;return null!==(t=null===(i=this.cols)||void 0===i?void 0:i.map[e])&&void 0!==t?t:null}getColFromCollection(e,t){var i,n,o;if(null==t)return null;const{map:s,list:r}=t;if("string"==typeof e&&s[e])return s[e];for(let c=0;c<r.length;c++)if(Ere(r[c],e))return r[c];const{autoColSvc:a,selectionColSvc:l,groupHierarchyColSvc:d}=this.beans;return null!==(i=null!==(n=null!==(o=null===a||void 0===a?void 0:a.getColumn(e))&&void 0!==o?o:null===l||void 0===l?void 0:l.getColumn(e))&&void 0!==n?n:null===d||void 0===d?void 0:d.getColumn(e))&&void 0!==i?i:null}},class extends yoe{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){var e,t;return null!==(e=null===(t=this.topRowBounds)||void 0===t?void 0:t.rowIndex)&&void 0!==e?e:-1}getLastRow(){var e,t;return null!==(e=null===(t=this.bottomRowBounds)||void 0===t?void 0:t.rowIndex)&&void 0!==e?e:-1}getCurrentPageHeight(){const{topRowBounds:e,bottomRowBounds:t}=this;return e&&t?Math.max(t.rowTop+t.rowHeight-e.rowTop,0):0}getCurrentPagePixelRange(){var e;const{topRowBounds:t,bottomRowBounds:i}=this;return{pageFirstPixel:null!==(e=null===t||void 0===t?void 0:t.rowTop)&&void 0!==e?e:0,pageLastPixel:i?i.rowTop+i.rowHeight:0}}calculateBounds(e,t){const{rowModel:i}=this.beans,n=i.getRowBounds(e);n&&(n.rowIndex=e),this.topRowBounds=n;const o=i.getRowBounds(t);o&&(o.rowIndex=t),this.bottomRowBounds=o,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){var e,t;const i=null!==(e=null===(t=this.topRowBounds)||void 0===t?void 0:t.rowTop)&&void 0!==e?e:0;this.pixelOffset!==i&&(this.pixelOffset=i,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},class extends yoe{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){var t,i,n,o,s;this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:null!==(t=null===e||void 0===e?void 0:e.animate)&&void 0!==t&&t,newData:null!==(i=null===e||void 0===e?void 0:e.newData)&&void 0!==i&&i,newPage:null!==(n=null===e||void 0===e?void 0:e.newPage)&&void 0!==n&&n,newPageSize:null!==(o=null===e||void 0===e?void 0:e.newPageSize)&&void 0!==o&&o,keepRenderedRows:null!==(s=null===e||void 0===e?void 0:e.keepRenderedRows)&&void 0!==s&&s})}calculatePages(){const{pageBounds:e,pagination:t,rowModel:i}=this.beans;t?t.calculatePages():e.calculateBounds(0,i.getRowCount()-1)}},class extends yoe{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{for(const e of this.getAllCellCtrls())e.onCellSelectionChanged()},t=()=>{for(const e of this.getAllCellCtrls())e.updateRangeBordersIfRangeCount()},i=()=>{this.eventSvc.addListener("cellSelectionChanged",e),this.eventSvc.addListener("columnMoved",t),this.eventSvc.addListener("columnPinned",t),this.eventSvc.addListener("columnVisible",t)},n=()=>{this.eventSvc.removeListener("cellSelectionChanged",e),this.eventSvc.removeListener("columnMoved",t),this.eventSvc.removeListener("columnPinned",t),this.eventSvc.removeListener("columnVisible",t)};this.addDestroyFunc(()=>n()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{Bse(this.gos)?i():n()});Bse(this.gos)&&i()}}wireBeans(e){this.pageBounds=e.pageBounds,this.colModel=e.colModel,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusSvc=e.focusSvc,this.rowContainerHeight=e.rowContainerHeight,this.ctrlsSvc=e.ctrlsSvc,this.editSvc=e.editSvc}postConstruct(){this.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),pinnedRowsChanged:this.onPinnedRowsChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",e=>this.onSuppressCellFocusChanged(e.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.addManagedPropertyListener("cellSelection",e=>{let{currentValue:t,previousValue:i}=e;(!i&&t||i&&!t)&&this.redrawRows()});const{stickyRowSvc:e,gos:t,showRowGroupCols:i}=this.beans;if(i&&this.addManagedPropertyListener("showOpenedGroup",()=>{const e=i.columns;e.length&&this.refreshCells({columns:e,force:!0})}),e)this.stickyRowFeature=e.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{const e=this.gridBodyCtrl;e.setStickyTopHeight(0),e.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=fse(t,"print"),this.embedFullWidthRows=this.printLayout||t.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=null!=e?e:3;this.cachedRowCtrls=new Hge(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){var e,t;return null!==(e=null===(t=this.stickyRowFeature)||void 0===t?void 0:t.stickyTopRowCtrls)&&void 0!==e?e:[]}getStickyBottomRowCtrls(){var e,t;return null!==(e=null===(t=this.stickyRowFeature)||void 0===t?void 0:t.stickyBottomRowCtrls)&&void 0!==e?e:[]}updateAllRowCtrls(){var e,t;const i=Object.values(this.rowCtrlsByRowIndex),n=Object.values(this.zombieRowCtrls),o=null!==(e=null===(t=this.cachedRowCtrls)||void 0===t?void 0:t.getEntries())&&void 0!==e?e:[];n.length>0||o.length>0?this.allRowCtrls=[...i,...n,...o]:this.allRowCtrls=i}isCellBeingRendered(e,t){var i;const n=this.rowCtrlsByRowIndex[e];if(!t||!n)return!!n;if(n.isFullWidth())return!0;return!!(null===(i=this.beans.spannedRowRenderer)||void 0===i?void 0:i.getCellByPosition({rowIndex:e,column:t,rowPinned:null}))||!!n.getCellCtrl(t)||!n.isRowRendered()}updateCellFocus(e){for(const t of this.getAllCellCtrls())t.onCellFocused(e);for(const t of this.getFullWidthRowCtrls())t.onFullWidthRowFocused(e)}onCellFocusChanged(e){if(null!=(null===e||void 0===e?void 0:e.rowIndex)&&!e.rowPinned){var t;const i=null!==(t=this.beans.colModel.getCol(e.column))&&void 0!==t?t:void 0;this.isCellBeingRendered(e.rowIndex,i)||this.redraw()}this.updateCellFocus(e)}onSuppressCellFocusChanged(e){for(const t of this.getAllCellCtrls())t.onSuppressCellFocusChanged(e);for(const t of this.getFullWidthRowCtrls())t.onSuppressCellFocusChanged(e)}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>this.onCellFocusChanged(e),cellFocusCleared:()=>this.updateCellFocus(),flashCells:e=>{const{cellFlashSvc:t}=this.beans;if(t)for(const i of this.getAllCellCtrls())t.onFlashCells(i,e)},columnHoverChanged:()=>{for(const e of this.getAllCellCtrls())e.onColumnHover()},displayedColumnsChanged:()=>{for(const e of this.getAllCellCtrls())e.onDisplayedColumnsChanged()},displayedColumnsWidthChanged:()=>{if(this.printLayout)for(const e of this.getAllCellCtrls())e.onLeftChanged()}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){for(const e of this.destroyFuncsForColumnListeners)e();this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners();const e=this.colModel.getCols();for(const t of e){const e=e=>{for(const i of this.getAllCellCtrls())i.column===t&&e(i)},i=()=>{e(e=>e.onLeftChanged())},n=()=>{e(e=>e.onWidthChanged())},o=()=>{e(e=>e.onFirstRightPinnedChanged())},s=()=>{e(e=>e.onLastLeftPinnedChanged())},r=()=>{e(e=>e.onColDefChanged())};t.__addEventListener("leftChanged",i),t.__addEventListener("widthChanged",n),t.__addEventListener("firstRightPinnedChanged",o),t.__addEventListener("lastLeftPinnedChanged",s),t.__addEventListener("colDefChanged",r),this.destroyFuncsForColumnListeners.push(()=>{t.__removeEventListener("leftChanged",i),t.__removeEventListener("widthChanged",n),t.__removeEventListener("firstRightPinnedChanged",o),t.__removeEventListener("lastLeftPinnedChanged",s),t.__removeEventListener("colDefChanged",r)})}}onDomLayoutChanged(){const e=fse(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsNotSpanningForColumn(e){const t=[];for(const n of this.getAllRowCtrls()){var i;const o=null===(i=n.getCellCtrl(e,!0))||void 0===i?void 0:i.eGui;o&&t.push(o)}return t}refreshFloatingRowComps(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.refreshFloatingRows(this.topRowCtrls,"top",e),this.refreshFloatingRows(this.bottomRowCtrls,"bottom",e)}refreshFloatingRows(e,t,i){var n;const{pinnedRowModel:o,beans:s,printLayout:r}=this,a=Object.fromEntries(e.map(e=>[e.rowNode.id,e]));null===o||void 0===o||o.forEachPinnedRow(t,(n,l)=>{const d=e[l];d&&void 0===o.getPinnedRowById(d.rowNode.id,t)&&(d.destroyFirstPass(),d.destroySecondPass()),n.id in a&&i?(e[l]=a[n.id],delete a[n.id]):e[l]=new Cge(n,s,!1,!1,r)});const l=null!==(n="top"===t?null===o||void 0===o?void 0:o.getPinnedTopRowCount():null===o||void 0===o?void 0:o.getPinnedBottomRowCount())&&void 0!==n?n:0;e.length=l}onPinnedRowDataChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}onPinnedRowsChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.sticky){var n;null===(n=this.stickyRowFeature)||void 0===n||n.refreshStickyNode(e)}else{if(null!==(t=this.cachedRowCtrls)&&void 0!==t&&t.has(e))return void this.cachedRowCtrls.removeRow(e);{const t=t=>{const i=t[e.rowIndex];i&&i.rowNode===e&&(i.destroyFirstPass(),i.destroySecondPass(),t[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":t(this.topRowCtrls);break;case"bottom":t(this.bottomRowCtrls);break;default:t(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}}i||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){const{editSvc:t}=this.beans;null!==t&&void 0!==t&&t.isEditing()&&(t.isBatchEditing()?t.cleanupEditors():t.stopEditing(void 0,{source:"api"}));if(null!=e){for(const t of null!==e&&void 0!==e?e:[])this.redrawRow(t,!0);this.dispatchDisplayedRowsChanged(!1)}else this.redrawAfterModelUpdate()}redrawAfterModelUpdate(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.getLockOnRefresh();const i=null===(e=this.beans.focusSvc)||void 0===e?void 0:e.getFocusCellToUseAfterRefresh();this.updateContainerHeights(),this.scrollToTopIfNewData(t);const n=!t.domLayoutChanged&&!!t.recycleRows,o=t.animate&&kse(this.gos),s=n?this.getRowsToRecycle():null;n||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();const{stickyRowFeature:r,gos:a}=this;if(r){r.checkStickyRows();const e=r.extraTopHeight+r.extraBottomHeight;e&&this.updateContainerHeights(e)}this.recycleRows(s,o),this.gridBodyCtrl.updateRowCount(),t.onlyBody||this.refreshFloatingRowComps(a.get("enableRowPinning")?n:void 0),this.dispatchDisplayedRowsChanged(),null!=i&&this.restoreFocusedCell(i),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const t=e.newData||e.newPage,i=this.gos.get("suppressScrollOnNewData");var n;t&&!i&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),null===(n=this.stickyRowFeature)||void 0===n||n.resetOffsets())}updateContainerHeights(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{rowContainerHeight:t}=this;if(this.printLayout)return void t.setModelHeight(null);let i=this.pageBounds.getCurrentPageHeight();0===i&&(i=1),t.setModelHeight(i+e)}getLockOnRefresh(){var e,t;if(this.refreshInProgress)throw new Error(hse(252));this.refreshInProgress=!0,null===(e=(t=this.beans.frameworkOverrides).getLockOnRefresh)||void 0===e||e.call(t)}releaseLockOnRefresh(){var e,t;this.refreshInProgress=!1,null===(e=(t=this.beans.frameworkOverrides).releaseLockOnRefresh)||void 0===e||e.call(t)}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){if(!e)return;const t=this.beans.focusSvc,i=this.findPositionToFocus(e);i?e.rowIndex===i.rowIndex&&e.rowPinned==i.rowPinned?t.doesRowOrCellHaveBrowserFocus()||this.updateCellFocus(Kse(this.gos,p(p({},i),{},{forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))):t.setFocusedCell(p(p({},i),{},{preventScrollOnBrowserFocus:!0,forceBrowserFocus:!0})):t.focusHeaderPosition({headerPosition:{headerRowIndex:Mue(this.beans)-1,column:e.column}})}findPositionToFocus(e){const{pagination:t,pageBounds:i}=this.beans;let n=e;for(null==n.rowPinned&&t&&i&&!t.isRowInPage(n.rowIndex)&&(n={rowPinned:null,rowIndex:i.getFirstRow()});n;){if(null==n.rowPinned&&i)if(n.rowIndex<i.getFirstRow()){if(n=vue(this.beans,{rowPinned:null,rowIndex:0}),!n)return null}else n.rowIndex>i.getLastRow()&&(n={rowPinned:null,rowIndex:i.getLastRow()});const t=this.getRowByPosition(n);if(null!==t&&void 0!==t&&t.isAlive())return p(p({},t.getRowPosition()),{},{column:e.column});n=vue(this.beans,n)}return null}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),i=t.length;for(let n=0;n<i;n++){const i=t[n].getAllCellCtrls(),o=i.length;for(let t=0;t<o;t++)e.push(i[t])}return e}getAllRowCtrls(){var e,t,i;const{spannedRowRenderer:n}=this.beans,o=this.getStickyTopRowCtrls(),s=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...o,...s,...null!==(e=null===n||void 0===n?void 0:n.getCtrls("top"))&&void 0!==e?e:[],...null!==(t=null===n||void 0===n?void 0:n.getCtrls("bottom"))&&void 0!==t?t:[],...null!==(i=null===n||void 0===n?void 0:n.getCtrls("center"))&&void 0!==i?i:[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(e,t,i){const n=this.rowCtrlsByRowIndex[t];n&&n.addEventListener(e,i)}refreshCells(){let{rowNodes:e,columns:t,force:i,suppressFlash:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o={force:i,newData:!1,suppressFlash:n};for(const s of this.getCellCtrls(e,t))s.refreshOrDestroyCell(o);this.refreshFullWidth(e)}refreshRows(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(const t of this.getRowCtrls(e.rowNodes))t.refreshRow(e);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=!1;for(const i of this.getRowCtrls(e)){if(!i.isFullWidth())continue;i.refreshFullWidth()||(t=!0,this.redrawRow(i.rowNode,!0))}t&&this.dispatchDisplayedRowsChanged(!1)}getRowCtrls(e){const t=jge(e),i=this.getAllRowCtrls();return e&&t?i.filter(e=>Wge(e.rowNode,t)):i}getCellCtrls(e,t){let i;Fie(t)&&(i={},t.forEach(e=>{const t=this.colModel.getCol(e);Fie(t)&&(i[t.getId()]=!0)}));const n=[];for(const o of this.getRowCtrls(e))for(const e of o.getAllCellCtrls()){const t=e.column.getId();i&&!i[t]||n.push(e)}return n}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const i=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(i,t),null===(e=this.stickyRowFeature)||void 0===e||e.destroyStickyCtrls()}getRowsToRecycle(){const e=[];for(const i of Object.keys(this.rowCtrlsByRowIndex)){null==this.rowCtrlsByRowIndex[i].rowNode.id&&e.push(i)}this.removeRowCtrls(e);const t={};for(const i of Object.values(this.rowCtrlsByRowIndex)){t[i.rowNode.id]=i}return this.rowCtrlsByRowIndex={},t}removeRowCtrls(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(const i of e){const e=this.rowCtrlsByRowIndex[i];e&&(e.destroyFirstPass(t),e.destroySecondPass()),delete this.rowCtrlsByRowIndex[i]}}onBodyScroll(e){"vertical"===e.direction&&this.redraw({afterScroll:!0})}redraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{focusSvc:t,animationFrameSvc:i}=this.beans,{afterScroll:n}=e;let o;const s=this.stickyRowFeature;s&&(o=(null===t||void 0===t?void 0:t.getFocusCellToUseAfterRefresh())||void 0);const r=this.firstRenderedRow,a=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let l=!1;if(s){l=s.checkStickyRows();const e=s.extraTopHeight+s.extraBottomHeight;e&&this.updateContainerHeights(e)}const d=this.firstRenderedRow!==r||this.lastRenderedRow!==a;if((!n||l||d)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,n),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(n&&!l),null!=o)){const e=null===t||void 0===t?void 0:t.getFocusCellToUseAfterRefresh();null!=o&&null==e&&(null===i||void 0===i||i.flushAllFrames(),this.restoreFocusedCell(o))}}removeRowCompsNotToDraw(e,t){const i={};for(const o of e)i[o]=!0;const n=Object.keys(this.rowCtrlsByRowIndex).filter(e=>!i[e]);this.removeRowCtrls(n,t)}calculateIndexesToDraw(e){var t;const i=[];for(let a=this.firstRenderedRow;a<=this.lastRenderedRow;a++)i.push(a);const n=this.beans.pagination,o=null===(t=this.beans.focusSvc)||void 0===t||null===(t=t.getFocusedCell())||void 0===t?void 0:t.rowIndex;null!=o&&(o<this.firstRenderedRow||o>this.lastRenderedRow)&&(!n||n.isRowInPage(o))&&o<this.rowModel.getRowCount()&&i.push(o);const s=e=>{const t=e.rowNode.rowIndex;null!=t&&t!==o&&(t<this.firstRenderedRow||t>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(e)&&i.push(t)};for(const a of Object.values(this.rowCtrlsByRowIndex))s(a);if(e)for(const a of Object.values(e))s(a);i.sort((e,t)=>e-t);const r=[];for(let a=0;a<i.length;a++){const e=i[a],t=this.rowModel.getRow(e);t&&!t.sticky&&r.push(e)}return r}recycleRows(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=this.calculateIndexesToDraw(e);(this.printLayout||i)&&(t=!1),this.removeRowCompsNotToDraw(n,!t);for(const o of n)this.createOrUpdateRowCtrl(o,e,t,i);if(e){const{animationFrameSvc:n}=this.beans;(null===n||void 0===n?void 0:n.active)&&i&&!this.printLayout?n.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const{visibleCols:e}=this.beans,t=e.isPinningLeft(),i=e.isPinningRight();(this.pinningLeft!==t||i!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=i,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];for(const t of this.getFullWidthRowCtrls()){const i=t.rowNode.rowIndex;e.push(i.toString())}this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=jge(e);return this.getAllRowCtrls().filter(e=>{if(!e.isFullWidth())return!1;const i=e.rowNode;return!(null!=t&&!Wge(i,t))})}createOrUpdateRowCtrl(e,t,i,n){let o,s=this.rowCtrlsByRowIndex[e];s||(o=this.rowModel.getRow(e),Fie(o)&&Fie(t)&&t[o.id]&&o.alreadyRendered&&(s=t[o.id],t[o.id]=null));if(!s){if(o||(o=this.rowModel.getRow(e)),!Fie(o))return;s=this.createRowCon(o,i,n)}o&&(o.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=s}destroyRowCtrls(e,t){const i=[];if(e)for(const n of Object.values(e))if(n)if(this.cachedRowCtrls&&n.isCacheable())this.cachedRowCtrls.addRow(n);else if(n.destroyFirstPass(!t),t){const e=n.instanceId;this.zombieRowCtrls[e]=n,i.push(()=>{n.destroySecondPass(),delete this.zombieRowCtrls[e]})}else n.destroySecondPass();t&&(i.push(()=>{this.isAlive()&&(this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged())}),window.setTimeout(()=>{for(const e of i)e()},400))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){return this.getRowBuffer()*Cse(this.beans)}workOutFirstAndLastRowsToRender(){const{rowContainerHeight:e,pageBounds:t,rowModel:i}=this;let n,o;if(e.updateOffset(),i.isRowsToRender())if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),n=t.getFirstRow(),o=t.getLastRow();else{const s=this.getRowBufferInPixels(),r=this.ctrlsSvc.getScrollFeature(),a=this.gos.get("suppressRowVirtualisation");let l,d,c=!1;do{const i=t.getPixelOffset(),{pageFirstPixel:n,pageLastPixel:o}=t.getCurrentPagePixelRange(),u=e.divStretchOffset,h=r.getVScrollPosition(),p=h.top,g=h.bottom;a?(l=n+u,d=o+u):(l=Math.max(p+i-s,n)+u,d=Math.min(g+i+s,o)+u),this.firstVisibleVPixel=Math.max(p+i,n)+u,this.lastVisibleVPixel=Math.min(g+i,o)+u,c=this.ensureAllRowsInRangeHaveHeightsCalculated(l,d)}while(c);let u=i.getRowIndexAtPixel(l),h=i.getRowIndexAtPixel(d);const p=t.getFirstRow(),g=t.getLastRow();u<p&&(u=p),h>g&&(h=g),n=u,o=h}else n=0,o=-1;const s=fse(this.gos,"normal"),r=this.gos.get("suppressMaxRenderedRowRestriction"),a=Math.max(this.getRowBuffer(),500);s&&!r&&o-n>a&&(o=n+a);const l=n!==this.firstRenderedRow,d=o!==this.lastRenderedRow;(l||d)&&(this.firstRenderedRow=n,this.lastRenderedRow=o,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:n,lastRow:o}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,qne(this.beans,()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){var i,n;const o=null===(i=this.pinnedRowModel)||void 0===i?void 0:i.ensureRowHeightsValid(),s=null===(n=this.stickyRowFeature)||void 0===n?void 0:n.ensureRowHeightsValid(),{pageBounds:r,rowModel:a}=this,l=a.ensureRowHeightsValid(e,t,r.getFirstRow(),r.getLastRow());return(l||s)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),!!(s||l||o)&&(this.updateContainerHeights(),!0)}doNotUnVirtualiseRow(e){var t;const i=!1,n=e.rowNode,o=this.focusSvc.isRowFocused(n.rowIndex,n.rowPinned),s=null===(t=this.editSvc)||void 0===t?void 0:t.isEditing(e),r=n.detail;if(!(o||s||r))return i;return!!this.isRowPresent(n)||i}isRowPresent(e){var t,i;return!!this.rowModel.isRowPresent(e)&&(null===(t=null===(i=this.beans.pagination)||void 0===i?void 0:i.isRowInPage(e.rowIndex))||void 0===t||t)}createRowCon(e,t,i){var n,o,s;const r=null!==(n=null===(o=this.cachedRowCtrls)||void 0===o?void 0:o.getRow(e))&&void 0!==n?n:null;if(r)return r;const a=i&&!this.printLayout&&!(null===(s=this.beans.animationFrameSvc)||void 0===s||!s.active);return new Cge(e,this.beans,t,a,this.printLayout)}getRenderedNodes(){const e=Object.values(this.rowCtrlsByRowIndex).map(e=>e.rowNode);return[...this.getStickyTopRowCtrls().map(e=>e.rowNode),...e,...this.getStickyBottomRowCtrls().map(e=>e.rowNode)]}getRowByPosition(e){let t;const{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find(e=>e.rowNode.rowIndex===i)||null,t||(t=this.getStickyBottomRowCtrls().find(e=>e.rowNode.rowIndex===i)||null))}return t}isRangeInRenderedViewport(e,t){if(null==e||null==t)return!1;const i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!i}},class extends yoe{constructor(){super(...arguments),this.beanName="valueSvc",this.hasEditSvc=!1,this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionSvc=e.expressionSvc,this.colModel=e.colModel,this.valueCache=e.valueCache,this.dataTypeSvc=e.dataTypeSvc,this.editSvc=e.editSvc,this.hasEditSvc=!!e.editSvc,this.formulaDataSvc=e.formulaDataSvc}postConstruct(){this.initialised||this.init()}init(){const{gos:e,valueCache:t}=this;this.executeValueGetter=t?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=mse(e),this.cellExpressions=e.get("enableCellExpressions"),this.isTreeData=e.get("treeData"),this.initialised=!0;const i=e=>this.callColumnCellValueChangedHandler(e);this.eventSvc.addListener("cellValueChanged",i,!0),this.addDestroyFunc(()=>this.eventSvc.removeListener("cellValueChanged",i,!0)),this.addManagedPropertyListener("treeData",e=>this.isTreeData=e.currentValue)}getValueForDisplay(e){const{column:t,node:i,includeValueFormatted:n,useRawFormula:o,exporting:s,source:r="ui"}=e,{showRowGroupColValueSvc:a}=this.beans,l=!t&&i.group,d=null===t||void 0===t?void 0:t.colDef.showRowGroup,c=!this.isTreeData||i.footer;if(a&&c&&(l||d)){const e=a.getGroupValue(i,t);if(null==e)return{value:null,valueFormatted:null};if(!n)return{value:e.value,valueFormatted:null};const o=a.formatAndPrefixGroupColValue(e,t,s);return{value:e.value,valueFormatted:o}}if(!t)return{value:i.key,valueFormatted:null};const u=i.leafGroup&&this.colModel.isPivotMode(),h=i.group&&i.expanded&&!i.footer&&!u,p=this.gos.get("groupSuppressBlankHeader")||!i.sibling,g=h&&!p;let m=this.getValue(t,i,g,r),f=m;const{formula:v}=this.beans,y=n&&!(s&&!1===t.colDef.useValueFormatterForExport);return t.isAllowFormula()&&null!==v&&void 0!==v&&v.isFormula(m)&&(o?(m=v.normaliseFormula(m,!0),f=v.resolveValue(t,i)):(m=v.resolveValue(t,i),f=m)),{value:m,valueFormatted:y?this.formatValue(t,i,f):null}}getValue(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ui";if(this.initialised||this.init(),!t)return;if(this.hasEditSvc&&"ui"===n){const i=this.editSvc;if(i.isEditing()){const n=i.getCellDataValue({rowNode:t,column:e},!0);if(void 0!==n)return n}}const o=e.getColDef().showRowGroup;if("string"===typeof o){var s,r;if((null!==(s=null===(r=this.beans.rowGroupColsSvc)||void 0===r?void 0:r.getColumnIndex(o))&&void 0!==s?s:-1)>t.level)return null}let a=this.resolveValue(e,t,i);if(this.cellExpressions&&_ie(a)){const i=a.substring(1);a=this.executeValueGetter(i,t.data,e,t)}return a}getFormulaFromDataSource(e,t){const i=this.formulaDataSvc;if(null===i||void 0===i||!i.hasDataSource()||!e.isAllowFormula())return;const n=i.getFormula({column:e,rowNode:t});return _ie(n)?n:void 0}resolveValue(e,t,i){const n=e.getColDef(),o=e.getColId(),s=this.isTreeData,r=this.getFormulaFromDataSource(e,t);if(void 0!==r)return r;const a=!i&&t.aggData&&void 0!==t.aggData[o];if(s&&a)return t.aggData[o];const l=t.data,d=n.field;if(s&&n.valueGetter)return this.executeValueGetter(n.valueGetter,l,e,t);if(s&&d&&l)return Whe(l,d,e.isFieldContainsDots());const c=t.groupData;if(c&&o in c)return t.groupData[o];if(a)return t.aggData[o];const u=n.showRowGroup,h="string"!==typeof u||!t.group,p=this.isSsrm&&i&&!!n.aggFunc,g=this.isSsrm&&t.footer&&t.field&&(!0===u||u===t.field);if(n.valueGetter&&!p){if(!h)return;return this.executeValueGetter(n.valueGetter,l,e,t)}if(g)return Whe(l,t.field,e.isFieldContainsDots());if(d&&l&&!p){if(!h)return;return Whe(l,d,e.isFieldContainsDots())}}parseValue(e,t,i,n){var o;const s=e.getColDef();if(s.allowFormula&&null!==(o=this.beans.formula)&&void 0!==o&&o.isFormula(i))return i;const r=s.valueParser;if(Fie(r)){var a;const o=Kse(this.gos,{node:t,data:null===t||void 0===t?void 0:t.data,oldValue:n,newValue:i,colDef:s,column:e});return"function"===typeof r?r(o):null===(a=this.expressionSvc)||void 0===a?void 0:a.evaluate(r,o)}return i}getDeleteValue(e,t){var i;return Fie(e.getColDef().valueParser)&&null!==(i=this.parseValue(e,t,"",this.getValueForDisplay({column:e,node:t}).value))&&void 0!==i?i:null}formatValue(e,t,i,n){let o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const{expressionSvc:s}=this.beans;let r,a=null;const l=e.getColDef();if(n?r=n:o&&(r=l.valueFormatter),r){const n=t?t.data:null,o=Kse(this.gos,{value:i,node:t,data:n,colDef:l,column:e});a="function"===typeof r?r(o):s?s.evaluate(r,o):null}else if(l.refData)return l.refData[i]||"";return null==a&&Array.isArray(i)&&(a=i.join(", ")),a}setValue(e,t,i,n){const o=this.colModel.getColDefCol(t);if(!e||!o)return!1;this.ensureRowData(e);const s=o.getColDef();if(!this.isSetValueSupported({column:o,newValue:i,colDef:s}))return!1;const r=Kse(this.gos,{node:e,data:e.data,oldValue:this.getValue(o,e,void 0,n),newValue:i,colDef:s,column:o});r.newValue=i;const a=this.handleExternalFormulaChange({column:o,eventSource:n,newValue:i,setterParams:r,rowNode:e});if(null!==a)return a;let l=this.computeValueChange({column:o,newValue:i,params:r,rowData:e.data,valueSetter:s.valueSetter,field:s.field});return void 0===l&&(l=!0),!!l&&this.finishValueChange(e,o,r,n)}finishValueChange(e,t,i,n){var o;e.resetQuickFilterAggregateText(),null===(o=this.valueCache)||void 0===o||o.onDataChanged();const s=this.getValue(t,e);return this.dispatchCellValueChangedEvent(e,i,s,n),e.pinnedSibling&&this.dispatchCellValueChangedEvent(e.pinnedSibling,i,s,n),!0}ensureRowData(e){zie(e.data)&&(e.data={})}isSetValueSupported(e){var t;const{column:i,newValue:n,colDef:o}=e,{field:s,valueSetter:r}=o,a=this.beans.formula,l=i.isAllowFormula()&&(null===a||void 0===a?void 0:a.isFormula(n)),d=!(null===(t=this.formulaDataSvc)||void 0===t||!t.hasDataSource());return!zie(s)||!zie(r)||d&&l?!(this.dataTypeSvc&&!this.dataTypeSvc.checkType(i,n))||(lse(135),!1):(lse(17),!1)}handleExternalFormulaChange(e){const{column:t,rowNode:i,newValue:n,eventSource:o,setterParams:s}=e,r=this.beans.formula,a=this.formulaDataSvc;if(null===a||void 0===a||!a.hasDataSource()||!t.isAllowFormula())return null;const l=null===r||void 0===r?void 0:r.isFormula(n),d=a.getFormula({column:t,rowNode:i});if(l){if(!(d!==n))return!1;a.setFormula({column:t,rowNode:i,formula:n});const e=null===r||void 0===r?void 0:r.resolveValue(t,i),l=t.getColDef();if(Fie(l.valueSetter)||!zie(l.field)){const n=p(p({},s),{},{newValue:e});this.computeValueChange({column:t,newValue:e,params:n,rowData:i.data,valueSetter:l.valueSetter,field:l.field})}return this.finishValueChange(i,t,s,o)}return void 0!==d&&a.setFormula({column:t,rowNode:i,formula:void 0}),null}computeValueChange(e){const{valueSetter:t,params:i,rowData:n,field:o,column:s,newValue:r}=e;var a;return Fie(t)?"function"===typeof t?t(i):null===(a=this.expressionSvc)||void 0===a?void 0:a.evaluate(t,i):this.setValueUsingField(n,o,r,s.isFieldContainsDots())}dispatchCellValueChangedEvent(e,t,i,n){this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t.column,colDef:t.colDef,data:e.data,node:e,oldValue:t.oldValue,newValue:i,value:i,source:n})}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;"function"===typeof t&&this.beans.frameworkOverrides.wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,i,n){if(!t)return!1;let o=!1;if(n){const n=t.split(".");let s=e;for(;n.length>0&&s;){const e=n.shift();0===n.length?(o=s[e]===i,o||(s[e]=i)):s=s[e]}}else o=e[t]===i,o||(e[t]=i);return!o}executeValueGetterWithValueCache(e,t,i,n){const o=i.getColId(),s=this.valueCache.getValue(n,o);if(void 0!==s)return s;const r=this.executeValueGetterWithoutValueCache(e,t,i,n);return this.valueCache.setValue(n,o,r),r}executeValueGetterWithoutValueCache(e,t,i,n){const o=Kse(this.gos,{data:t,node:n,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,n)});let s;var r;"function"===typeof e?s=e(o):s=null===(r=this.expressionSvc)||void 0===r?void 0:r.evaluate(e,o);return s}getValueCallback(e,t){const i=this.colModel.getColDefCol(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){const i=this.getValue(e,t),n=e.getColDef().keyCreator;let o=i;if(n){o=n(Kse(this.gos,{value:i,colDef:e.getColDef(),column:e,node:t,data:t.data}))}return"string"===typeof o||null==o||(o=String(o),"[object Object]"===o&&lse(121)),o}},class extends yoe{constructor(){super(...arguments),this.beanName="focusSvc",this.focusFallbackTimeout=null,this.needsFocusRestored=!1}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.rowRenderer=e.rowRenderer,this.navigation=e.navigation,this.filterManager=e.filterManager,this.overlays=e.overlays}postConstruct(){const e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.addDestroyFunc(Jae(this.beans))}attemptToRecoverFocus(){this.needsFocusRestored=!0,null!=this.focusFallbackTimeout&&clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=window.setTimeout(this.setFocusRecovered.bind(this),100)}setFocusRecovered(){this.needsFocusRestored=!1,null!=this.focusFallbackTimeout&&(clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=null)}shouldTakeFocus(){return this.gos.get("suppressFocusAfterRefresh")?(this.setFocusRecovered(),!1):this.needsFocusRestored?(this.setFocusRecovered(),!0):this.doesRowOrCellHaveBrowserFocus()}onColumnEverythingChanged(){if(!this.focusedCell)return;const e=this.focusedCell.column,t=this.colModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){const{gos:e,focusedCell:t}=this;return e.get("suppressFocusAfterRefresh")||e.get("suppressCellFocus")||!t?null:this.doesRowOrCellHaveBrowserFocus()?t:null}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader?null:this.isDomDataPresentInHierarchy(Uie(this.beans),Pue)?this.focusedHeader:null}doesRowOrCellHaveBrowserFocus(){const e=Uie(this.beans);return!!this.isDomDataPresentInHierarchy(e,Sce)||this.isDomDataPresentInHierarchy(e,Mce)}isDomDataPresentInHierarchy(e,t){let i=e;for(;i;){if(wse(this.gos,i,t))return!0;i=i.parentNode}return!1}getFocusedCell(){return this.focusedCell}getFocusEventParams(e){const{rowIndex:t,rowPinned:i,column:n}=e,o={rowIndex:t,rowPinned:i,column:n,isFullWidthCell:!1},s=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i});return s&&(o.isFullWidthCell=s.isFullWidth()),o}clearFocusedCell(){if(null==this.focusedCell)return;const e=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent(p({type:"cellFocusCleared"},e))}setFocusedCell(e){this.setFocusRecovered();const{column:t,rowIndex:i,rowPinned:n,forceBrowserFocus:o=!1,preventScrollOnBrowserFocus:s=!1,sourceEvent:r}=e,a=this.colModel.getCol(t);if(!a)return void(this.focusedCell=null);this.focusedCell={rowIndex:i,rowPinned:Oie(n),column:a};const l=this.getFocusEventParams(this.focusedCell);this.eventSvc.dispatchEvent(p(p(p({type:"cellFocused"},l),this.previousCellFocusParams&&{previousParams:this.previousCellFocusParams}),{},{forceBrowserFocus:o,preventScrollOnBrowserFocus:s,sourceEvent:r})),this.previousCellFocusParams=l}isCellFocused(e){return null!=this.focusedCell&&cue(e,this.focusedCell)}isHeaderWrapperFocused(e){if(null==this.focusedHeader)return!1;const{column:t,rowCtrl:{rowIndex:i,pinned:n}}=e,{column:o,headerRowIndex:s}=this.focusedHeader;return t===o&&i===s&&n==o.getPinned()}focusHeaderPosition(e){var t;if(this.setFocusRecovered(),xue(this.beans))return!1;const{direction:i,fromTab:n,allowUserOverride:o,event:s,fromCell:r,rowWithoutSpanValue:a,scroll:l=!0}=e;let{headerPosition:d}=e;if(r&&null!==(t=this.filterManager)&&void 0!==t&&t.isAdvFilterHeaderActive())return this.focusAdvancedFilter(d);if(o){const e=this.focusedHeader,t=Mue(this.beans);if(n){const n=this.gos.getCallback("tabToNextHeader");n&&(d=this.getHeaderPositionFromUserFunc({userFunc:n,direction:i,currentPosition:e,headerPosition:d,headerRowCount:t}))}else{const i=this.gos.getCallback("navigateToNextHeader");if(i&&s){d=i({key:s.key,previousHeaderPosition:e,nextHeaderPosition:d,headerRowCount:t,event:s})}}}return!!d&&this.focusProvidedHeaderPosition({headerPosition:d,direction:i,event:s,fromCell:r,rowWithoutSpanValue:a,scroll:l})}focusHeaderPositionFromUserFunc(e){if(xue(this.beans))return!1;const{userFunc:t,headerPosition:i,direction:n,event:o}=e,s=this.focusedHeader,r=Mue(this.beans),a=this.getHeaderPositionFromUserFunc({userFunc:t,direction:n,currentPosition:s,headerPosition:i,headerRowCount:r});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:n,event:o})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:i,currentPosition:n,headerPosition:o,headerRowCount:s}=e,r=t({backwards:"Before"===i,previousHeaderPosition:n,nextHeaderPosition:o,headerRowCount:s});return!0===r?n:!1===r?null:r}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:i,fromCell:n,rowWithoutSpanValue:o,event:s,scroll:r=!0}=e,{column:a,headerRowIndex:l}=t,{filterManager:d,ctrlsSvc:c,headerNavigation:u}=this.beans;if(this.focusedHeader&&(h=e.headerPosition,p=this.focusedHeader,h.headerRowIndex===p.headerRowIndex&&h.column===p.column))return!1;var h,p;if(-1===l)return null!==d&&void 0!==d&&d.isAdvFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView({column:a,event:s});r&&(null===u||void 0===u||u.scrollToColumn(a,i));const g=c.getHeaderRowContainerCtrl(a.getPinned()),m=(null===g||void 0===g?void 0:g.focusHeader(t.headerRowIndex,a,s))||!1;return u&&m&&(null!=o||n)&&(u.currentHeaderRowWithoutSpan=null!==o&&void 0!==o?o:-1),m}focusFirstHeader(){var e;if(null!==(e=this.overlays)&&void 0!==e&&e.exclusive&&this.focusOverlay())return!0;const t=this.visibleCols.allCols[0];if(!t)return!1;const i=zpe(this.beans,t,0);return this.focusHeaderPosition({headerPosition:i,rowWithoutSpanValue:0})}focusLastHeader(e){var t;if(null!==(t=this.overlays)&&void 0!==t&&t.exclusive&&this.focusOverlay(!0))return!0;const i=Mue(this.beans)-1,n=pre(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:i,column:n},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){var t;return null!==(t=this.filterManager)&&void 0!==t&&t.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(e,t){return null!=this.focusedCell&&(this.focusedCell.rowIndex===e&&this.focusedCell.rowPinned===Oie(t))}focusOverlay(e){var t,i;const n=(null===(t=this.overlays)||void 0===t?void 0:t.isVisible())&&(null===(i=this.overlays.eWrapper)||void 0===i?void 0:i.getGui());return!!n&&ile(n,e)}focusGridView(e){var t;const{backwards:i=!1,canFocusOverlay:n=!0,event:o}=e;if(null!==(t=this.overlays)&&void 0!==t&&t.exclusive)return n&&this.focusOverlay(i);if(Cue(this.beans))return i&&!xue(this.beans)?this.focusLastHeader():!(!n||!this.focusOverlay(i))||!i&&Sue(this.beans,i);const s=i?gue(this.beans):pue(this.beans);if(s){var r,a,l,d;const t=null!==(r=e.column)&&void 0!==r?r:null===(a=this.focusedHeader)||void 0===a?void 0:a.column,{rowIndex:n,rowPinned:h}=s,p=mue(this.beans,s);if(!t||!p||null==n)return!1;if(t.isSuppressNavigable(p)){var c;const e=this.gos.get("enableRtl");let i;return i=o&&o.key!==Eae.TAB?o.key:e?Eae.LEFT:Eae.RIGHT,null===(c=this.beans.navigation)||void 0===c||c.navigateToNextCell(null,i,{rowIndex:n,column:t,rowPinned:h||null},!0),!0}if(null===(l=this.navigation)||void 0===l||l.ensureCellVisible({rowIndex:n,column:t,rowPinned:h}),i){var u;const e=this.rowRenderer.getRowByPosition(s);if(null!==e&&void 0!==e&&e.isFullWidth()&&null!==(u=this.navigation)&&void 0!==u&&u.tryToFocusFullWidthRow(s,i))return!0}return this.setFocusedCell({rowIndex:n,column:t,rowPinned:Oie(h),forceBrowserFocus:!0}),null===(d=this.beans.rangeSvc)||void 0===d||d.setRangeToCell({rowIndex:n,rowPinned:h,column:t}),!0}return!(!n||!this.focusOverlay(i))||!(!i||!this.focusLastHeader())}focusAdvancedFilter(e){var t,i;return this.advFilterFocusColumn=null===e||void 0===e?void 0:e.column,null!==(t=null===(i=this.beans.advancedFilter)||void 0===i?void 0:i.getCtrl().focusHeaderComp())&&void 0!==t&&t}focusNextFromAdvancedFilter(e,t){var i,n;const o=null!==(i=t?void 0:this.advFilterFocusColumn)&&void 0!==i?i:null===(n=this.visibleCols.allCols)||void 0===n?void 0:n[0];return e?this.focusHeaderPosition({headerPosition:{column:o,headerRowIndex:Mue(this.beans)-1}}):this.focusGridView({column:o})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},class extends Cde{initVariables(){this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.getSizeEl(Epe),this.getSizeEl(Ppe),this.getSizeEl(Ope),this.getSizeEl(Fpe),this.refreshRowBorderWidthVariable()}getPinnedRowBorderWidth(){return this.getCSSVariablePixelValue(Fpe)}getRowBorderWidth(){return this.getCSSVariablePixelValue(Ope)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(Epe)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(Ppe)}getDefaultCellHorizontalPadding(){return this.getCSSVariablePixelValue(Npe)}getCellPaddingLeft(){const e=this.getDefaultCellHorizontalPadding(),t=this.getCSSVariablePixelValue(Tpe);return e-1+this.getCSSVariablePixelValue(Rpe)*t}getCellPadding(){const e=this.getDefaultCellHorizontalPadding()-1;return this.getCellPaddingLeft()+e}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}refreshRowHeightVariable(){const{eRootDiv:e}=this,t=e.style.getPropertyValue("--ag-line-height").trim(),i=this.gos.get("rowHeight");if(null==i||isNaN(i)||!isFinite(i))return null!==t&&e.style.setProperty("--ag-line-height",null),-1;const n="".concat(i,"px");return t!=n?(e.style.setProperty("--ag-line-height",n),i):""!=t?Number.parseFloat(t):-1}fireStylesChangedEvent(e){"rowBorderWidthChanged"===e&&this.refreshRowBorderWidthVariable(),super.fireStylesChangedEvent(e)}refreshRowBorderWidthVariable(){const e=this.getCSSVariablePixelValue(Ope);this.eRootDiv.style.setProperty("--ag-internal-row-border-width","".concat(e,"px"))}postProcessThemeChange(e,t){e&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&dse(t?106:239)}getAdditionalCss(){const e=new Map;return e.set("core",['.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-floating-bottom-container,.ag-floating-top-container,.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-animation.ag-prevent-animation) .ag-row{transition:none!important;&:where(.ag-row.ag-after-created){transition:none!important}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value:not(.ag-allow-overflow),.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-top:not(.ag-invisible)){border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-bottom:not(.ag-invisible)){border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-data-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-data-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%;&.ag-row-editing-invalid{background-color:var(--ag-full-row-edit-invalid-background-color)}}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-data-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}.ag-drag-handle-disabled{opacity:.35;pointer-events:none}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after,.ag-row-highlight-inside:after{background-color:var(--ag-row-drag-indicator-color);border-radius:calc(var(--ag-row-drag-indicator-width)/2);content:"";height:var(--ag-row-drag-indicator-width);pointer-events:none;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after,:where(.ag-ltr) .ag-row-highlight-inside:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after,:where(.ag-rtl) .ag-row-highlight-inside:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-highlight-indent:after{display:block;width:auto}:where(.ag-ltr) .ag-row-highlight-indent:after{left:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size));right:1px}:where(.ag-rtl) .ag-row-highlight-indent:after{left:1px;right:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size))}.ag-row-highlight-inside:after{background-color:var(--ag-selected-row-background-color);border:1px solid var(--ag-range-selection-border-color);display:block;height:auto;inset:0;width:auto}.ag-body,.ag-floating-bottom,.ag-floating-top{background-color:var(--ag-data-background-color)}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-data-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-exporting-wrapper,.ag-overlay-loading-wrapper,.ag-overlay-modal-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{background-color:var(--ag-row-loading-skeleton-effect-color)}50%{background-color:color-mix(in srgb,transparent,var(--ag-row-loading-skeleton-effect-color) 40%)}to{background-color:var(--ag-row-loading-skeleton-effect-color)}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label,:where(.ag-header-group-cell-selectable) .ag-header-cell-comp-wrapper{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-col-ref{color:var(--ag-subtle-text-color)}}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-col-ref{margin-right:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-col-ref{margin-left:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-header-cell.ag-right-aligned-header){.ag-header-col-ref{color:var(--ag-subtle-text-color)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-col-ref{margin-left:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-col-ref{margin-right:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-column-drag-indicator-color);border-radius:calc(var(--ag-column-drag-indicator-width)/2);content:"";height:100%;position:absolute;top:0;width:var(--ag-column-drag-indicator-width)}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab;:where(.ag-icon){color:var(--ag-drag-handle-color)}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color);&:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}}:where(.ag-filter-active,.ag-filter-toolpanel-group-instance-header-icon,.ag-filter-toolpanel-instance-header-icon){position:relative;&:after{background-color:var(--ag-icon-button-active-indicator-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}}:where(.ag-ltr) :where(.ag-filter-active,.ag-filter-toolpanel-group-instance-header-icon,.ag-filter-toolpanel-instance-header-icon){&:after{right:-1px}}:where(.ag-rtl) :where(.ag-filter-active,.ag-filter-toolpanel-group-instance-header-icon,.ag-filter-toolpanel-instance-header-icon){&:after{left:-1px}}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}']),function(e,t){for(const i of t.sort((e,t)=>e.moduleName.localeCompare(t.moduleName))){const t=i.css;t&&e.set("module-".concat(i.moduleName),t)}}(e,Array.from(new Set(Voe))),e}getDefaultTheme(){return Ape}varError(e){lse(9,{variable:e})}themeError(e){dse(240,{theme:e})}shadowRootError(){dse(293)}},class extends yoe{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colAnimation=e.colAnimation}postConstruct(){this.horizontalScrollShowing=!0===this.gos.get("alwaysShowHorizontalScroll"),this.verticalScrollShowing=!0===this.gos.get("alwaysShowVerticalScroll"),this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){const{colAnimation:e}=this;null!==e&&void 0!==e&&e.isActive()?e.executeLaterVMTurn(()=>{e.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){var e;const t=this.ctrlsSvc.get("center");if(!t||null!==(e=this.colAnimation)&&void 0!==e&&e.isActive())return;const i={horizontalScrollShowing:t.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(i),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsSvc.get("center"),t=e.hasHorizontalScrollGap(),i=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==i)&&(this.horizontalScrollGap=t,this.verticalScrollGap=i,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(null==this.scrollbarWidth){const e=this.gos.get("scrollbarWidth"),t="number"===typeof e&&e>=0?e:(null==Gae&&$ae(),Gae);null!=t&&(this.scrollbarWidth=t,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},class extends yoe{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){var e,t,i;this.addEventListener("ready",()=>{if(this.updateReady(),this.ready){for(const e of this.readyCallbacks)e(this.params);this.readyCallbacks.length=0}},null!==(e=null===(t=(i=this.beans.frameworkOverrides).runWhenReadyAsync)||void 0===t?void 0:t.call(i))&&void 0!==e&&e)}updateReady(){const e=Object.values(this.params);this.ready=23===e.length&&e.every(e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.isAlive())&&void 0!==t&&t})}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{const e=this.readyCallbacks.indexOf(t);e>=0&&this.readyCallbacks.splice(e,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:i}=this.params;return[e,i,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},class extends yoe{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.beans.ctrlsSvc.whenReady(this,()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){const{colModel:t,rowModel:i}=this.beans;t.setColumnDefs(null!==e&&void 0!==e?e:[],"gridInitializing"),i.start()}gridReady(){const{eventSvc:e,gos:t}=this;e.dispatchEvent({type:"gridReady"}),Ooe(t,"initialised successfully, enterprise = ".concat(t.isModuleRegistered("EnterpriseCore")))}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t)return this.waitingForColumns?(this.waitingForColumns=!1,void this.setColumnsAndData(t)):void this.beans.colModel.setColumnDefs(t,Rre(e.source))}},class extends yoe{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;const n=this.getHeaderName(e.getColDef(),e,null,null,t),{aggColNameSvc:o}=this.beans;return i&&o?o.getHeaderName(e,n):n}getDisplayNameForProvidedColumnGroup(e,t,i){const n=null===t||void 0===t?void 0:t.getColGroupDef();return n?this.getHeaderName(n,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,n,o){const s=e.headerValueGetter;if(s){const l=Kse(this.gos,{colDef:e,column:t,columnGroup:i,providedColumnGroup:n,location:o});return"function"===typeof s?s(l):"string"===typeof s?null!==(r=null===(a=this.beans.expressionSvc)||void 0===a?void 0:a.evaluate(s,l))&&void 0!==r?r:null:"";var r,a}return null!=e.headerName?e.headerName:e.field?(l=e.field)&&null!=l?l.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z])([a-z])/g,"$1 $2$3").replace(/\./g," ").split(" ").map(e=>e.substring(0,1).toUpperCase()+(e.length>1?e.substring(1,e.length):"")).join(" "):null:"";var l}},class extends yoe{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.columnsToRenderLeft=[],this.columnsToRenderRight=[],this.columnsToRenderCenter=[]}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{visibleCols:n}=this,o=n.isBodyWidthDirty;if(!(e===this.scrollWidth&&t===this.scrollPosition&&!o)){if(this.scrollWidth=e,this.scrollPosition=t,n.isBodyWidthDirty=!0,this.gos.get("enableRtl")){const i=n.bodyWidth;this.viewportLeft=i-t-e,this.viewportRight=i-t}else this.viewportLeft=t,this.viewportRight=e+t;this.colModel.ready&&this.checkViewportColumns(i)}}getColumnHeadersToRender(e){switch(e){case"left":return this.columnsToRenderLeft;case"right":return this.columnsToRenderRight;default:return this.columnsToRenderCenter}}getHeadersToRender(e,t){let i;switch(e){case"left":i=this.rowsOfHeadersToRenderLeft[t];break;case"right":i=this.rowsOfHeadersToRenderRight[t];break;default:i=this.rowsOfHeadersToRenderCenter[t]}return null!==i&&void 0!==i?i:[]}extractViewportColumns(){const e=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||0===this.viewportRight}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return!(!e.isAutoHeaderHeight()&&!function(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}(e))||this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,i=t+e.getActualWidth(),n=this.viewportLeft-200,o=this.viewportRight+200;return!(t<n&&i<n)&&!(t>o&&i>o)}getViewportColumns(){const{leftCols:e,rightCols:t}=this.visibleCols;return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.colModel.colSpanActive)return this.colsWithinViewport;const t=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:i}=this,n=i.centerCols;return i.getColsForRow(e,n,t,e=>{const t=e.getLeft();return Fie(t)&&t>this.viewportLeft})}checkViewportColumns(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}calculateHeaderRows(){const{leftCols:e,rightCols:t}=this.visibleCols;this.columnsToRenderLeft=e,this.columnsToRenderRight=t,this.columnsToRenderCenter=this.colsWithinViewport;const i=e=>{const t=new Set,i={};for(const o of e){let e=o.getParent();const s=o.isSpanHeaderHeight();for(;e;){var n;if(t.has(e))break;if(s&&e.isPadding()){e=e.getParent();continue}const o=e.getProvidedColumnGroup().getLevel();null!==(n=i[o])&&void 0!==n||(i[o]=[]),i[o].push(e),t.add(e),e=e.getParent()}}return i};this.rowsOfHeadersToRenderLeft=i(e),this.rowsOfHeadersToRenderRight=i(t),this.rowsOfHeadersToRenderCenter=i(this.headerColsWithinViewport)}extractViewport(){this.extractViewportColumns();const e=this.getViewportColumns().map(e=>"".concat(e.getId(),"-").concat(e.getPinned()||"normal")).join("#"),t=this.colsWithinViewportHash!==e;return t&&(this.colsWithinViewportHash=e,this.calculateHeaderRows()),t}},class extends yoe{constructor(){super(...arguments),this.beanName="iconSvc"}createIconNoSpan(e,t){return _ue(e,this.beans,null===t||void 0===t?void 0:t.column)}}],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId:mhe,destroy:function(e){e.gridDestroySvc.destroy()},isDestroyed:function(e){return e.gridDestroySvc.destroyCalled},getGridOption:function(e,t){return e.gos.get(t)},setGridOption:function(e,t,i){fhe(e,{[t]:i})},updateGridOptions:fhe,isModuleRegistered:function(e,t){const i=t.replace(/Module$/,"");return e.gos.isModuleRegistered(i)}},dependsOn:[Xhe,Nhe,Phe,Xge,Zpe,Vhe,Xpe,Gge,Qge,qpe,wge,kge,Ige,Qpe,Jhe,qhe,qge,jhe,Lge]},eme=["TextFilter","NumberFilter","DateFilter","SetFilter","MultiFilter","GroupFilter","CustomFilter"];function tme(e){let{moduleName:t,rowModelType:i}=e;return"To use the ".concat(t,"Module you must set the gridOption \"rowModelType='").concat(i,"'\"")}var ime=new WeakMap,nme=new WeakMap;var ome=1,sme=class{create(e,t,i,n,o,s){var r;const a=Toe.applyGlobalGridOptions(t),l=null!==(r=a.gridId)&&void 0!==r?r:String(ome++),d=this.getRegisteredModules(o,l,a.rowModelType),c=this.createBeansList(a.rowModelType,d,l),u=this.createProvidedBeans(e,a,o);if(!c)return;const h={providedBeanInstances:u,beanClasses:c,id:l,beanInitComparator:ahe,beanDestroyComparator:lhe,derivedBeans:[she],destroyCallback:()=>{nme.delete(g),ime.delete(e),function(e){delete Hoe[e]}(l),null===s||void 0===s||s()}},p=new yde(h);this.registerModuleFeatures(p,d),i(p),p.getBean("syncSvc").start(),null===n||void 0===n||n(p);const g=p.getBean("gridApi");return ime.set(e,g),nme.set(g,e),g}getRegisteredModules(e,t,i){var n;return Uoe(Jge,void 0,!0),null===e||void 0===e||null===(n=e.modules)||void 0===n||n.forEach(e=>Uoe(e,t)),function(e,t){var i,n,o,s,r;const a=null!==(i=Hoe[e])&&void 0!==i?i:{};return[...Object.values(null!==(n=Goe.all)&&void 0!==n?n:{}),...Object.values(null!==(o=a.all)&&void 0!==o?o:{}),...Object.values(null!==(s=Goe[t])&&void 0!==s?s:{}),...Object.values(null!==(r=a[t])&&void 0!==r?r:{})]}(t,rme(i))}registerModuleFeatures(e,t){const i=e.getBean("registry"),n=e.getBean("apiFunctionSvc");for(const o of t){i.registerModule(o);const e=o.apiFunctions;if(e){const t=Object.keys(e);for(const i of t)null===n||void 0===n||n.addFunction(i,e[i])}}}createProvidedBeans(e,t,i){let n=i?i.frameworkOverrides:null;zie(n)&&(n=new ohe);const o={gridOptions:t,eGridDiv:e,eRootDiv:e,globalListener:i?i.globalListener:null,globalSyncListener:i?i.globalSyncListener:null,frameworkOverrides:n};return null!==i&&void 0!==i&&i.providedBeanInstances&&Object.assign(o,i.providedBeanInstances),o}createBeansList(e,t,i){const n={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"},o=rme(e),s=n[o];if(!s)return void cse(201,{rowModelType:o},"Unknown rowModelType ".concat(o,"."));if(!joe)return void cse(272,void 0,"No AG Grid modules are registered! It is recommended to start with all Community features via the AllCommunityModule:\n                    \n    import { ModuleRegistry, AllCommunityModule } from 'ag-grid-community';\n    \n    ModuleRegistry.registerModules([ AllCommunityModule ]);\n    ");if(!e){const e=Object.entries(n).filter(e=>{let[t,n]=e;return Yoe(n,i,t)});if(1==e.length){const[t,i]=e[0];if(t!==o){const e={moduleName:i,rowModelType:t};return void cse(275,e,tme(e))}}}if(!Yoe(s,i,o)){const e=Xoe(),t="rowModelType = '".concat(o,"'"),n=e?"Unable to use ".concat(t," as that requires the ag-grid-enterprise script to be included.\n"):"Missing module ".concat(s,"Module for rowModelType ").concat(o,".");return void cse(200,{reasonOrId:t,moduleName:s,gridScoped:$oe(),gridId:i,rowModelType:o,isUmd:e},n)}const r=new Set;for(const l of t)for(const e of null!==(a=l.beans)&&void 0!==a?a:[]){var a;r.add(e)}return Array.from(r)}};function rme(e){return null!==e&&void 0!==e?e:"clientSide"}function ame(e){const t=e.rowModel;return"clientSide"===t.getType()?t:void 0}var lme=class{wrap(e,t,i,n){const o=this.createWrapper(e,n);for(const s of null!==t&&void 0!==t?t:[])this.createMethod(o,s,!0);for(const s of null!==i&&void 0!==i?i:[])this.createMethod(o,s,!1);return o}createMethod(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))}createMethodProxy(e,t,i){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(i&&lse(49,{methodName:t}),null)}}};function dme(e){return"whenTruncated"===e.get("tooltipShowMode")}var cme=class extends yoe{getFileName(e){var t;const i=this.getDefaultFileExtension();return null!==(t=e)&&void 0!==t&&t.length||(e=this.getDefaultFileName()),e.includes(".")?e:"".concat(e,".").concat(i)}getData(e){return this.beans.gridSerializer.serialize(this.createSerializingSession(e),e)}getDefaultFileName(){return"export.".concat(this.getDefaultFileExtension())}},ume=class{constructor(e){const{colModel:t,rowGroupColsSvc:i,colNames:n,valueSvc:o,gos:s,processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:d}=e;this.colModel=t,this.rowGroupColsSvc=i,this.colNames=n,this.valueSvc=o,this.gos=s,this.processCellCallback=r,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=d}prepare(e){}extractHeaderValue(e){const t=this.getHeaderName(this.processHeaderCallback,e);return null!==t&&void 0!==t?t:""}extractRowCellValue(e){var t,i;const{column:n,node:o,currentColumnIndex:s,accumulatedRowIndex:r,type:a,useRawFormula:l}=e,d=0===s&&Ese(this.gos,o,this.colModel.isPivotMode());var c,u;if(this.processRowGroupCallback&&(this.gos.get("treeData")||o.group)&&(n.isRowGroupDisplayed(null!==(t=null===(i=o.rowGroupColumn)||void 0===i?void 0:i.getColId())&&void 0!==t?t:"")||d))return{value:null!==(c=this.processRowGroupCallback(Kse(this.gos,{column:n,node:o})))&&void 0!==c?c:""};if(this.processCellCallback)return{value:null!==(u=this.processCellCallback(Kse(this.gos,{accumulatedRowIndex:r,column:n,node:o,value:this.valueSvc.getValueForDisplay({column:n,node:o}).value,type:a,parseValue:e=>this.valueSvc.parseValue(n,o,e,this.valueSvc.getValue(n,o,void 0)),formatValue:e=>{var t;return null!==(t=this.valueSvc.formatValue(n,o,e))&&void 0!==t?t:e}})))&&void 0!==u?u:""};const h=this.gos.get("treeData"),p=this.valueSvc,g=-1===o.level&&o.footer,m=!0===n.colDef.showRowGroup&&(o.group||h);if(!g&&(d||m)){let e="",t=o;for(;t&&-1!==t.level;){var f;const{value:i,valueFormatted:o}=p.getValueForDisplay({column:d?void 0:n,node:t,includeValueFormatted:!0,exporting:!0});e=" -> ".concat(null!==(f=null!==o&&void 0!==o?o:i)&&void 0!==f?f:"").concat(e),t=t.parent}return{value:e,valueFormatted:e}}const{value:v,valueFormatted:y}=p.getValueForDisplay({column:n,node:o,includeValueFormatted:!0,exporting:!0,useRawFormula:l});return{value:null!==v&&void 0!==v?v:"",valueFormatted:y}}getHeaderName(e,t){return e?e(Kse(this.gos,{column:t})):this.colNames.getDisplayNameForColumn(t,"csv",!0)}};function hme(e,t){const i=document.defaultView||window;if(!i)return void lse(52);const n=document.createElement("a"),o=i.URL.createObjectURL(t);n.setAttribute("href",o),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),n.remove(),i.setTimeout(()=>{i.URL.revokeObjectURL(o)},0)}function pme(e){const t=e.sibling;t&&(t.childrenAfterFilter=e.childrenAfterFilter)}var gme={moduleName:"SharedMenu",version:Qoe,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="menuSvc"}postConstruct(){const{enterpriseMenuFactory:e,filterMenuFactory:t}=this.beans;this.activeMenuFactory=null!==e&&void 0!==e?e:t}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){this.showColumnMenuCommon(Hue(this.beans),e,e.containerType,!0)}showHeaderContextMenu(e,t,i){var n;null===(n=this.activeMenuFactory)||void 0===n||n.showMenuAfterContextMenuEvent(e,t,i)}hidePopupMenu(){var e,t;null===(e=this.beans.contextMenuSvc)||void 0===e||e.hideActiveMenu(),null===(t=this.activeMenuFactory)||void 0===t||t.hideActiveMenu()}hideFilterMenu(){var e;null===(e=Hue(this.beans))||void 0===e||e.hideActiveMenu()}isColumnMenuInHeaderEnabled(e){var t;const{suppressHeaderMenuButton:i}=e.getColDef();return!i&&!(null===(t=this.activeMenuFactory)||void 0===t||!t.isMenuEnabled(e))&&(_se(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){var t;return!e.getColDef().suppressHeaderFilterButton&&!(null===(t=this.beans.filterManager)||void 0===t||!t.isFilterAllowed(e))}isHeaderContextMenuEnabled(e){const t=e&&qse(e)?e.getColDef():null===e||void 0===e?void 0:e.getColGroupDef();return!(null!==t&&void 0!==t&&t.suppressHeaderContextMenu)&&"new"===this.gos.get("columnMenu")}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(Uae()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!_se(this.gos)&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){var t;return!(null===(t=this.beans.filterManager)||void 0===t||!t.isFilterAllowed(e))&&!_se(this.gos)&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isFloatingFilterButtonEnabled(e){return!e.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos,t=e.get("suppressMenuHide");return _se(e)?!!e.exists("suppressMenuHide")&&t:t}showColumnMenuCommon(e,t,i,n){const{positionBy:o,onClosedCallback:s}=t,r=t.column;if("button"===o){const{buttonElement:o}=t;null===e||void 0===e||e.showMenuAfterButtonClick(r,o,i,s,n)}else if("mouse"===o){const{mouseEvent:o}=t;null===e||void 0===e||e.showMenuAfterMouseEvent(r,o,i,s,n)}else if(r){const t=this.beans,o=t.ctrlsSvc;o.getScrollFeature().ensureColumnVisible(r,"auto"),qne(t,()=>{var t;const a=null===(t=o.getHeaderRowContainerCtrl(r.getPinned()))||void 0===t?void 0:t.getHeaderCtrlForColumn(r);a&&(null===e||void 0===e||e.showMenuAfterButtonClick(r,a.getAnchorElementForMenu(n),i,s,n))})}}}],apiFunctions:{showColumnMenu:function(e,t){var i;const n=e.colModel.getCol(t);n?null===(i=e.menuSvc)||void 0===i||i.showColumnMenu({column:n,positionBy:"auto"}):dse(12,{colKey:t})},hidePopupMenu:function(e){var t;null===(t=e.menuSvc)||void 0===t||t.hidePopupMenu()}}},mme={moduleName:"Popup",version:Qoe,beans:[class extends Nde{getDefaultPopupParent(){return this.beans.ctrlsSvc.get("gridCtrl").getGui()}callPostProcessPopup(e,t,i,n,o){const s=this.gos.getCallback("postProcessPopup");if(s){const{column:r,rowNode:a}=null!==e&&void 0!==e?e:{};s({column:r,rowNode:a,ePopup:i,type:t,eventSource:n,mouseEvent:o})}}getActivePopups(){return this.popupList.map(e=>e.element)}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isStopPropagation(e){return lce(e)}}]};var fme=(e,t,i)=>{var n,o;const{editModelSvc:s}=e,r=null===s||void 0===s||null===(n=s.getCellValidationModel())||void 0===n||null===(n=n.getCellValidation(t))||void 0===n?void 0:n.errorMessages,a=null===s||void 0===s||null===(o=s.getRowValidationModel().getRowValidation(t))||void 0===o?void 0:o.errorMessages,l=r||a;return null!==l&&void 0!==l&&l.length?l.join(i("tooltipValidationErrorSeparator",". ")):void 0},vme={moduleName:"Tooltip",version:Qoe,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="tooltipSvc"}setupHeaderTooltip(e,t,i,n){e&&t.destroyBean(e);const o=this.gos,s=dme(o),{column:r,eGui:a}=t,l=r.getColDef();n||!s||l.headerComponent||(n=Hne(()=>a.querySelector(".ag-header-cell-text")));const d="header",c=this.beans.colNames.getDisplayNameForColumn(r,"header",!0),u=null!==i&&void 0!==i?i:c,h={getGui:()=>a,getLocation:()=>d,getTooltipValue:()=>{var e,t;return null!==(e=null!==i&&void 0!==i?i:null===l||void 0===l||null===(t=l.headerTooltipValueGetter)||void 0===t?void 0:t.call(l,Kse(o,{location:d,colDef:l,column:r,value:u,valueFormatted:c})))&&void 0!==e?e:null===l||void 0===l?void 0:l.headerTooltip},shouldDisplayTooltip:n,getAdditionalParams:()=>({column:r,colDef:r.getColDef()})};let p=this.createTooltipFeature(h);return p&&(p=t.createBean(p),t.setRefreshFunction("tooltip",()=>p.refreshTooltip())),p}setupHeaderGroupTooltip(e,t,i,n){e&&t.destroyBean(e);const o=this.gos,s=dme(o),{column:r,eGui:a}=t,l=r.getColGroupDef();n||!s||null!==l&&void 0!==l&&l.headerGroupComponent||(n=Hne(()=>a.querySelector(".ag-header-group-text")));const d="headerGroup",c=this.beans.colNames.getDisplayNameForColumnGroup(r,"header"),u=null!==i&&void 0!==i?i:c,h={getGui:()=>a,getLocation:()=>d,getTooltipValue:()=>{var e,t;return null!==(e=null!==i&&void 0!==i?i:null===l||void 0===l||null===(t=l.headerTooltipValueGetter)||void 0===t?void 0:t.call(l,Kse(o,{location:d,colDef:l,column:r,value:u,valueFormatted:c})))&&void 0!==e?e:null===l||void 0===l?void 0:l.headerTooltip},shouldDisplayTooltip:n,getAdditionalParams:()=>{const e={column:r};return l&&(e.colDef=l),e}},p=this.createTooltipFeature(h);return p?t.createBean(p):p}enableCellTooltipFeature(e,t,i){const{beans:n}=this,{gos:o,editSvc:s}=n,{column:r,rowNode:a}=e;let l="cell";const d=dme(o);i||(i=d&&!e.isCellRenderer()?()=>{const t=!(null===s||void 0===s||!s.isEditing(e));if(!t&&fme(n,e,this.getLocaleTextFunc()))return!0;if(!r.isTooltipEnabled())return!1;const i=Hne(()=>{const t=e.eGui;return 0===t.children.length?t:t.querySelector(".ag-cell-value")});return!t&&i()}:()=>!(null!==s&&void 0!==s&&s.isEditing(e)));const c={getGui:()=>e.eGui,getLocation:()=>l,getTooltipValue:null!=t?()=>t:()=>{const t=!!(null===s||void 0===s||!s.isEditing(e))&&fme(n,e,this.getLocaleTextFunc());if(t)return l="cellEditor",t;l="cell";const i=r.getColDef(),d=a.data;if(i.tooltipField&&Fie(d))return Whe(d,i.tooltipField,r.isTooltipFieldContainsDots());const c=i.tooltipValueGetter;return c?c(Kse(o,{location:"cell",colDef:r.getColDef(),column:r,rowIndex:e.cellPosition.rowIndex,node:a,data:a.data,value:e.value,valueFormatted:e.valueFormatted})):null},shouldDisplayTooltip:i,getAdditionalParams:()=>({column:r,colDef:r.getColDef(),rowIndex:e.cellPosition.rowIndex,node:a,data:a.data,valueFormatted:e.valueFormatted})};return this.createTooltipFeature(c,n)}setupFullWidthRowTooltip(e,t,i,n){const o={getGui:()=>t.getFullWidthElement(),getTooltipValue:()=>i,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:n},s=this.beans,r=s.context;e&&t.destroyBean(e,r);const a=this.createTooltipFeature(o,s);if(a)return t.createBean(a,r)}setupFormulaTooltip(e){var t;const{beans:i}=this,{context:n,formula:o}=i;if(null===(t=this.beans.formula)||void 0===t||!t.active||!e.column.isAllowFormula())return;const s={getGui:()=>e.eGui,getTooltipValue:()=>{const t=null===o||void 0===o?void 0:o.getFormulaError(e.column,e.rowNode);return t?t.message:void 0},getLocation:()=>"cellFormula",shouldDisplayTooltip:()=>!!(null===o||void 0===o?void 0:o.getFormulaError(e.column,e.rowNode))},r=this.createTooltipFeature(s,i);return r?e.createBean(r,n):void 0}setupCellEditorTooltip(e,t){var i,n;const{beans:o}=this,{context:s}=o,r=(null===(i=t.getValidationElement)||void 0===i?void 0:i.call(t,!0))||!(null!==(n=t.isPopup)&&void 0!==n&&n.call(t))&&e.eGui;if(!r)return;const a={getGui:()=>r,getTooltipValue:()=>fme(o,e,this.getLocaleTextFunc()),getLocation:()=>"cellEditor",shouldDisplayTooltip:()=>{var e,t;const{editModelSvc:i}=o,n=null===i||void 0===i||null===(e=i.getRowValidationModel())||void 0===e?void 0:e.getRowValidationMap(),s=null===i||void 0===i||null===(t=i.getCellValidationModel())||void 0===t?void 0:t.getCellValidationMap(),r=!!n&&n.size>0,a=!!s&&s.size>0;return r||a}},l=this.createTooltipFeature(a,o);return l?e.createBean(l,s):void 0}initCol(e){const{colDef:t}=e;e.tooltipEnabled=Fie(t.tooltipField)||Fie(t.tooltipValueGetter)||Fie(t.tooltipComponent)}createTooltipFeature(e,t){return this.beans.registry.createDynamicBean("tooltipFeature",!1,e,t)}}],dynamicBeans:{tooltipFeature:Dde,highlightTooltipFeature:class extends Dde{constructor(e,t,i){super(e,i),this.highlightTracker=t,this.onHighlight=this.onHighlight.bind(this)}postConstruct(){super.postConstruct(),this.wireHighlightListeners()}wireHighlightListeners(){this.addManagedPropertyListener("tooltipTrigger",e=>{let{currentValue:t}=e;this.setTooltipMode(t)}),this.setTooltipMode(this.gos.get("tooltipTrigger")),this.highlightTracker.addEventListener("itemHighlighted",this.onHighlight)}onHighlight(e){1===this.tooltipMode&&(e.highlighted?this.attemptToShowTooltip():this.attemptToHideTooltip())}setTooltipMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"focus";this.tooltipMode="focus"===e?1:0}destroy(){this.highlightTracker.removeEventListener("itemHighlighted",this.onHighlight),super.destroy()}},tooltipStateManager:class extends Ade{createTooltipComp(e,t){const i=function(e,t){return e.getCompDetails(t.colDef,wae,"agTooltipComponent",t,!0)}(this.beans.userCompFactory,e);null===i||void 0===i||i.newAgStackInstance().then(t)}setEventHandlers(e){[this.onColumnMovedEventCallback]=this.addManagedEventListeners({columnMoved:e})}clearEventHandlers(){var e;null===(e=this.onColumnMovedEventCallback)||void 0===e||e.call(this),this.onColumnMovedEventCallback=void 0}}},userComponents:{agTooltipComponent:class extends jae{constructor(){super({tag:"div",cls:"ag-tooltip"})}init(e){const{value:t}=e,i=this.getGui();i.textContent=jie(t);const n=e.location.replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase();i.classList.add("ag-".concat(n,"-tooltip"))}}},dependsOn:[mme],css:[".ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;white-space:normal;z-index:99999;&:where(.ag-cell-editor-tooltip),&:where(.ag-cell-formula-tooltip){background-color:var(--ag-tooltip-error-background-color);border:var(--ag-tooltip-error-border);color:var(--ag-tooltip-error-text-color);font-weight:500}}.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:where(:not(.ag-tooltip-interactive)),.ag-tooltip:where(:not(.ag-tooltip-interactive)){pointer-events:none}.ag-tooltip-animate{transition:opacity 1s;&:where(.ag-tooltip-hiding){opacity:0}}"]};var yme={paste:"api",rangeSvc:"api",fillHandle:"api",cellClear:"api",bulk:"api"};new Set(Object.keys(yme));var bme=class extends yoe{constructor(e){super(),this.rootNode=e,this.nextId=0,this.allNodesMap={},Cme(e)}getRowNode(e){return this.allNodesMap[e]}setNewRowData(e){var t;this.dispatchRowDataUpdateStarted(e),this.destroyAllNodes();const i=Cme(this.rootNode),n=new Array(e.length);i._leafs=n;let o=0;const s=null===(t=this.beans.groupStage)||void 0===t?void 0:t.getNestedDataGetter(),r=s?new Set:null,a=(e,t)=>{const i=e.level+1;for(let l=0,d=t.length;l<d;++l){const d=t[l];if(!d)continue;const c=this.createRowNode(d,i);if(c.sourceRowIndex=o,n[o++]=c,r&&!r.has(d)){r.add(d),c.treeParent=e;const t=s(d);t&&a(c,t)}}};a(i,e),n.length=o}destroyAllNodes(){const{selectionSvc:e,pinnedRowModel:t,groupStage:i}=this.beans;null===e||void 0===e||e.reset("rowDataChanged"),null!==t&&void 0!==t&&t.isManual()&&t.reset(),null===i||void 0===i||i.clearNonLeafs();const n=this.rootNode._leafs;if(n)for(let o=0,s=n.length;o<s;++o)n[o]._destroy(!1);this.allNodesMap=Object.create(null),this.nextId=0}setImmutableRowData(e,t){var i;const{rootNode:n,gos:o}=this;this.dispatchRowDataUpdateStarted(t);const s=Pse(o),r=e.changedRowNodes,{adds:a,updates:l}=r,d=new Set,c=[],u=null===(i=this.beans.groupStage)||void 0===i?void 0:i.getNestedDataGetter();let h=!!o.get("suppressMaintainUnsortedOrder")&&void 0,p=-1,g=!1;const m=(e,t)=>{if(!h&&void 0!==h){const t=e.sourceRowIndex;h=t<=p,p=t}e.data!==t&&(e.updateData(t),a.has(e)||l.add(e),!e.selectable&&e.isSelected()&&c.push(e))},f=(e,t,i)=>{for(let n=0,o=t.length;n<o;++n){const o=t[n];if(!o)continue;let r=this.getRowNode(s({data:o,level:i}));if(r?(m(r,o),g||(g=!!u&&r.treeParent!==e)):(r=this.createRowNode(o,i),a.add(r)),!u||d.has(r)){d.add(r);continue}d.add(r),r.treeParent=e;const l=u(o);l&&f(r,l,i+1)}};f(n,t,0);const v=this.deleteUnusedNodes(d,r,c,!!e.animate)||h||a.size>0;if(v){var y;const e=null!==(y=n._leafs)&&void 0!==y?y:n._leafs=[];void 0===h?kme(e,d,r):Mme(e,d)&&(r.reordered=!0)}(v||g||l.size)&&(e.rowDataUpdated=!0,this.deselect(c))}deleteUnusedNodes(e,t,i,n){let{removals:o}=t;const s=this.rootNode._leafs;for(let r=0,a=s.length;r<a;r++){const t=s[r];e.has(t)||this.destroyNode(t,n)&&(o.push(t),t.isSelected()&&i.push(t))}return o.length>0}updateRowData(e,t,i){var n;if(this.dispatchRowDataUpdateStarted(e.add),null!==(n=this.beans.groupStage)&&void 0!==n&&n.getNestedDataGetter())return lse(268),{remove:[],update:[],add:[]};const o=[],s=Pse(this.gos),r=this.executeRemove(s,e,t,o,i),a=this.executeUpdate(s,e,t,o),l=this.executeAdd(e,t);return this.deselect(o),{remove:r,update:a,add:l}}executeRemove(e,t,i,n,o){let{remove:s}=t,{adds:r,updates:a,removals:l}=i;const d=this.rootNode._leafs,c=null===d||void 0===d?void 0:d.length,u=null===s||void 0===s?void 0:s.length;if(!u||!c)return[];let h=0,p=c,g=0;const m=new Array(u);for(let f=0;f<u;++f){const t=this.lookupNode(e,s[f]);if(!t)continue;const i=t.sourceRowIndex;i<p&&(p=i),i>g&&(g=i),m[h++]=t,this.destroyNode(t,o)&&(t.isSelected()&&n.push(t),r.delete(t)||(a.delete(t),l.push(t)))}return m.length=h,h&&wme(d,p,g),m}executeUpdate(e,t,i,n){let{update:o}=t,{adds:s,updates:r}=i;const a=null===o||void 0===o?void 0:o.length;if(!a)return[];const l=new Array(a);let d=0;for(let c=0;c<a;c++){const t=o[c],i=this.lookupNode(e,t);i&&(i.updateData(t),!i.selectable&&i.isSelected()&&n.push(i),l[d++]=i,s.has(i)||r.add(i))}return l.length=d,l}executeAdd(e,t){var i,n;const o=null!==(i=(n=this.rootNode)._leafs)&&void 0!==i?i:n._leafs=[],s=o.length,r=e.add,a=null===r||void 0===r?void 0:r.length;if(!a)return[];const l=s+a;let d=this.sanitizeAddIndex(o,e.addIndex);if(d<s){for(let e=s-1,t=l-1;e>=d;--e){const i=o[e];i.sourceRowIndex=t,o[t--]=i}t.reordered=!0}o.length=l;const c=new Array(a),u=t.adds;for(let h=0;h<a;h++){const e=this.createRowNode(r[h],0);u.add(e),e.sourceRowIndex=d,o[d]=e,c[h]=e,d++}return c}dispatchRowDataUpdateStarted(e){this.eventSvc.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:null!==e&&void 0!==e&&e.length?e[0]:null})}deselect(e){var t;const i="rowDataChanged",n=this.beans.selectionSvc;var o;(e.length&&(null===n||void 0===n||n.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:i})),null===n||void 0===n||null===(t=n.updateGroupsFromChildrenSelections)||void 0===t||t.call(n,i),e.length)&&this.eventSvc.dispatchEvent({type:"selectionChanged",source:i,selectedNodes:null!==(o=null===n||void 0===n?void 0:n.getSelectedNodes())&&void 0!==o?o:null,serverSideState:null})}createRowNode(e,t){const i=new Qde(this.beans);i.parent=this.rootNode,i.level=t,i.group=!1,i.expanded=!1,i.setDataAndId(e,String(this.nextId++));const n=i.id,o=this.allNodesMap;return o[n]&&lse(2,{nodeId:n}),o[n]=i,i}destroyNode(e,t){if(!e._destroy(t))return!1;const i=e.id,n=this.allNodesMap;n[i]===e&&delete n[i];const o=e.pinnedSibling;var s;o&&(null===(s=this.beans.pinnedRowModel)||void 0===s||s.pinRow(o,null));return!0}lookupNode(e,t){if(!e)return Sme(this.rootNode._leafs,t);const i=e({data:t,level:0}),n=this.allNodesMap[i];return n||(dse(4,{id:i}),null)}sanitizeAddIndex(e,t){const i=e.length;if("number"!==typeof t)return i;if(t<0||t>=i||Number.isNaN(t))return i;t=Math.ceil(t);const n=this.gos;return t>0&&n.get("treeData")&&n.get("getDataPath")&&(t=xme(e,t)),t}},xme=(e,t)=>{for(let i=0,n=e.length;i<n;i++){const n=e[i];if((null===n||void 0===n?void 0:n.rowIndex)==t-1)return i+1}return t},Cme=e=>{var t;e.group=!0,e.level=-1,e.id="ROOT_NODE_ID",0!==(null===(t=e._leafs)||void 0===t?void 0:t.length)&&(e._leafs=[]);const i=[],n=[],o=[],s=[];e.childrenAfterGroup=i,e.childrenAfterSort=n,e.childrenAfterAggFilter=o,e.childrenAfterFilter=s;const r=e.sibling;return r&&(r.childrenAfterGroup=i,r.childrenAfterSort=n,r.childrenAfterAggFilter=o,r.childrenAfterFilter=s,r.childrenMapped=e.childrenMapped),e.updateHasChildren(),e},Sme=(e,t)=>{if(e)for(let i=0,n=e.length;i<n;i++){const n=e[i];if(n.data===t)return n}return dse(5,{data:t}),null},wme=(e,t,i)=>{for(let n=t=Math.max(0,t),o=e.length;n<o;++n){const o=e[n];n<=i&&o.destroyed||(o.sourceRowIndex=t,e[t++]=o)}e.length=t},Mme=(e,t)=>{const i=t.size;e.length=i;let n=0,o=!1,s=!1;for(const r of t){const t=r.sourceRowIndex;t===n?s||(s=o):(t>=0?s=!0:o=!0,r.sourceRowIndex=n,e[n]=r),++n}return s},kme=(e,t,i)=>{let{adds:n}=i;const o=e.length,s=t.size;s>o&&(e.length=s);let r=0;for(let a=0;a<o;++a){const t=e[a];t.destroyed||(r!==a&&(t.sourceRowIndex=r,e[r]=t),++r)}for(const a of n)a.sourceRowIndex<0&&(a.sourceRowIndex=r,e[r++]=a);e.length=r},Dme=(e,t,i,n,o,s)=>{const r=new Array(s);let a,l=0,d=i[l],c=-1,u=0,h=0;const p=i.length,g=n.length;for(;;){if(c<0){var m;if(u>=g)break;if(a=n[u++],c=null!==(m=o.get(a))&&void 0!==m?m:-1,c<0)continue}if((e.compareRowNodes(t,d,a)||~o.get(d)-c)<0){if(r[h++]=d,++l>=p)break;d=i[l]}else r[h++]=a,c=-1}for(;l<p;)r[h++]=i[l++];if(c<0)return r;for(r[h++]=a;u<g;){const e=n[u++];o.get(e)>=0&&(r[h++]=e)}return r},Ime=(e,t,i)=>{let n=0;i.length=t.size;for(let o=0,s=e.length;o<s;++o){const s=e[o];t.has(s)&&(i[n++]=s)}return i.length=n,i},Ame=e=>{const t=e.childrenAfterSort,i=e.sibling;if(i&&(i.childrenAfterSort=t),t)for(let n=0,o=t.length-1;n<=o;n++){const e=t[n],i=0===n,s=n===o;e.firstChild!==i&&(e.firstChild=i,e.dispatchRowEvent("firstChildChanged")),e.lastChild!==s&&(e.lastChild=s,e.dispatchRowEvent("lastChildChanged")),e.childIndex!==n&&(e.childIndex=n,e.dispatchRowEvent("childIndexChanged"))}},Lme=e=>{const t=e.childrenAfterSort,i=e.childrenAfterAggFilter,n=null===t||void 0===t?void 0:t.length,o=null===i||void 0===i?void 0:i.length;if(!n||!o)return null;const s=new Array(o),r=new Set;for(let l=0;l<o;++l)r.add(i[l]);let a=0;for(let l=0;l<n;++l){const e=t[l];r.delete(e)&&(s[a++]=e)}if(0===r.size&&a===n)return t;for(const l of r)s[a++]=l;return s.length=a,s},Nme=(e,t)=>{const i=t.childrenAfterGroup;if(i)for(let n=0,o=i.length;n<o;++n){const t=i[n];t.data&&e.push(t),t.group&&Nme(e,t)}};var Tme={moduleName:"ClientSideRowModel",version:Qoe,rowModels:["clientSide"],beans:[class extends yoe{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null,this.rowCountReady=!1,this.nodeManager=void 0,this.rowsToDisplay=[],this.formulaRows=[],this.rowDataUpdatedPending=!1,this.asyncTransactions=null,this.asyncTransactionsTimer=0,this.started=!1,this.refreshingModel=!1,this.rowNodesCountReady=!1,this.stages=null,this.stagesRefreshProps=new Map,this.onRowHeightChanged_debounced=Moe(this,this.onRowHeightChanged.bind(this),100)}postConstruct(){const e=this.beans,t=new Qde(e);this.rootNode=t,this.nodeManager=this.createBean(new bme(t));const i=()=>{var e;null===(e=this.beans.groupStage)||void 0===e||e.invalidateGroupCols(),this.refreshModel({step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame")})};this.addManagedEventListeners({newColumnsLoaded:i,columnRowGroupChanged:i,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:()=>this.refreshModel({step:"pivot"}),columnPivotModeChanged:()=>this.refreshModel({step:"group"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),stylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this),rowExpansionStateChanged:this.onRowGroupOpened.bind(this)}),this.addPropertyListeners()}addPropertyListeners(){const{beans:e,stagesRefreshProps:t}=this,i=[e.groupStage,e.filterStage,e.pivotStage,e.aggStage,e.sortStage,e.filterAggStage,e.flattenStage].filter(e=>!!e);this.stages=i;for(let n=i.length-1;n>=0;--n){const e=i[n];for(const i of e.refreshProps)t.set(i,n)}this.addManagedPropertyListeners([...t.keys(),"rowData"],e=>{var t;const i=null===(t=e.changeSet)||void 0===t?void 0:t.properties;i&&this.onPropChange(i)}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.started=!0,this.rowNodesCountReady?this.refreshModel({step:"group",rowDataUpdated:!0,newData:!0}):this.setInitialData()}setInitialData(){this.gos.get("rowData")&&this.onPropChange(["rowData"])}ensureRowHeightsValid(e,t,i,n){let o,s=!1;do{o=!1;const r=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(r,i),d=Math.min(a,n);for(let e=l;e<=d;e++){const t=this.getRow(e);if(t.rowHeightEstimated){const e=xse(this.beans,t);t.setRowHeight(e.height),o=!0,s=!0}}o&&this.setRowTopAndRowIndex()}while(o);return s}onPropChange(e){const{nodeManager:t,gos:i,beans:n}=this,o=n.groupStage;if(!t)return;const s=new Set(e),r=null===o||void 0===o?void 0:o.onPropChange(s);let a;s.has("rowData")?a=i.get("rowData"):r&&(a=null===o||void 0===o?void 0:o.extractData()),a&&!Array.isArray(a)&&(a=null,lse(1));const l={step:"nothing",changedProps:s};if(a){!r&&!this.isEmpty()&&a.length>0&&i.exists("getRowId")&&!i.get("resetRowDataOnUpdate")?(l.keepRenderedRows=!0,l.animate=!i.get("suppressAnimationFrame"),l.changedRowNodes=new Jue,t.setImmutableRowData(l,a)):(l.rowDataUpdated=!0,l.newData=!0,t.setNewRowData(a),this.rowNodesCountReady=!0)}const d=l.rowDataUpdated?"group":this.getRefreshedStage(e);d&&(l.step=d,this.refreshModel(l))}getRefreshedStage(e){const{stages:t,stagesRefreshProps:i}=this;if(!t)return null;const n=t.length;let o=n;for(let r=0,a=e.length;r<a&&o;++r){var s;o=Math.min(o,null!==(s=i.get(e[r]))&&void 0!==s?s:o)}return o<n?t[o].step:null}setRowTopAndRowIndex(e){var t;const{beans:i,rowsToDisplay:n}=this,o=i.environment.getDefaultRowHeight();let s=0;const r=fse(this.gos,"normal");for(let a=0,l=n.length;a<l;++a){const t=n[a],l=t.id;if(null!=l&&(null===e||void 0===e||e.add(l)),null==t.rowHeight){const e=xse(i,t,r,o);t.setRowHeight(e.height,e.estimated)}t.setRowTop(s),t.setRowIndex(a),s+=t.rowHeight}if(null!==(t=this.beans.formula)&&void 0!==t&&t.active){const e=this.formulaRows;for(let t=0,i=e.length;t<i;++t){e[t].formulaRowIndex=t}}}clearRowTopAndRowIndex(e,t){const i=e.active,n=e=>{null==(null===e||void 0===e?void 0:e.id)||t.has(e.id)||e.clearRowTopAndRowIndex()},o=e=>{n(e),n(e.detailNode),n(e.sibling);const t=e.childrenAfterGroup;if(!e.hasChildren()||!t)return;const s=-1==e.level;if(!(i&&!s&&!e.expanded))for(let i=0,n=t.length;i<n;++i)o(t[i])},s=this.rootNode;s&&o(s)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay.length}getTopLevelRowCount(){var e,t,i;const{rootNode:n,rowsToDisplay:o}=this;if(!n||!o.length)return 0;if(o[0]===n)return 1;const s=null!==(e=n.sibling)&&void 0!==e&&e.displayed?1:0;return(null!==(t=null===(i=n.childrenAfterSort)||void 0===i?void 0:i.length)&&void 0!==t?t:0)+s}getTopLevelRowDisplayedIndex(e){const{beans:t,rootNode:i,rowsToDisplay:n}=this;if(!i||!n.length||n[0]===i)return e;const o=i.childrenAfterSort,s=e=>{let t=o[e];if(this.gos.get("groupHideOpenParents"))for(;t.expanded&&t.childrenAfterSort&&t.childrenAfterSort.length>0;)t=t.childrenAfterSort[0];return t.rowIndex},r=t.footerSvc;return r?null===r||void 0===r?void 0:r.getTopDisplayIndex(n,e,o,s):s(e)}getTopLevelIndexFromDisplayedIndex(e){var t,i;const{rootNode:n,rowsToDisplay:o}=this;if(!n||!o.length||o[0]===n)return e;let s=this.getRow(e);s.footer&&(s=s.sibling);let r=s.parent;for(;r&&r!==n;)s=r,r=s.parent;const a=null!==(t=null===(i=n.childrenAfterSort)||void 0===i?void 0:i.indexOf(s))&&void 0!==t?t:-1;return a>=0?a:e}getRowBounds(e){const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){this.refreshModel({step:"map",keepRenderedRows:!0,animate:kse(this.gos)})}onFilterChanged(e){let{afterDataChange:t,columns:i}=e;if(!t){const e=0===i.length||i.some(e=>e.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:e,keepRenderedRows:!0,animate:kse(this.gos)})}}onSortChanged(){this.refreshModel({step:"sort",keepRenderedRows:!0,animate:kse(this.gos)})}getType(){return"clientSide"}onValueChanged(){this.refreshModel({step:this.beans.colModel.isPivotActive()?"pivot":"aggregate"})}createChangePath(e){const t=new vhe(!1,this.rootNode);return t.active=e,t}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;const{changedRowNodes:t,newData:i,rowDataUpdated:n}=e;return!(!t||i||!n)&&(!t.removals.length&&!t.adds.size)}refreshModel(e){var t,i;const{nodeManager:n,beans:o,eventSvc:s,started:r,refreshingModel:a}=this;if(!n)return;const l=!!e.rowDataUpdated,d=null!==(t=e.changedPath)&&void 0!==t?t:e.changedPath=this.createChangePath(!e.newData&&l);if(r&&l&&s.dispatchEvent({type:"rowDataUpdated"}),!r||a||o.colModel.changeEventsDispatching||this.isSuppressModelUpdateAfterUpdateTransaction(e))return void(this.rowDataUpdatedPending||(this.rowDataUpdatedPending=l));var c;(this.rowDataUpdatedPending&&(this.rowDataUpdatedPending=!1,e.step="group"),this.refreshingModel=!0,null===(i=o.masterDetailSvc)||void 0===i||i.refreshModel(e),l&&"group"!==e.step)&&(null===(c=o.colFilter)||void 0===c||c.refreshModel());switch(e.step){case"group":this.doGrouping(e);case"filter":this.doFilter(d);case"pivot":this.doPivot(d);case"aggregate":this.doAggregate(d);case"filter_aggregates":this.doFilterAggregates(d);case"sort":this.doSort(d,e.changedRowNodes);case"map":this.doRowsToDisplay()}const u=new Set;this.setRowTopAndRowIndex(u),this.clearRowTopAndRowIndex(d,u),this.refreshingModel=!1,s.dispatchEvent({type:"modelUpdated",animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack})}isEmpty(){var e,t;return!(null!==(e=this.rootNode)&&void 0!==e&&null!==(e=e._leafs)&&void 0!==e&&e.length)||!(null!==(t=this.beans.colModel)&&void 0!==t&&t.ready)}isRowsToRender(){return this.rowsToDisplay.length>0}getOverlayType(){var e;return this.isEmpty()?"noRows":null!==(e=this.beans.filterManager)&&void 0!==e&&e.isAnyFilterPresent()&&0===this.getRowCount()?"noMatchingRows":null}getNodesInRangeForSelection(e,t){let i=!1,n=!1;const o=[],s=Wse(this.gos);return this.forEachNodeAfterFilterAndSort(r=>{if(n)return;if(i&&(r===t||r===e)&&(n=!0,s&&r.group))return void Nme(o,r);if(!i){if(r!==t&&r!==e)return;i=!0,t===e&&(n=!0)}(!r.group||!s)&&o.push(r)}),o}getTopLevelNodes(){var e,t;return null!==(e=null===(t=this.rootNode)||void 0===t?void 0:t.childrenAfterGroup)&&void 0!==e?e:null}getRow(e){return this.rowsToDisplay[e]}getFormulaRow(e){return this.formulaRows[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){const t=this.rowsToDisplay,i=t.length;if(this.isEmpty()||0===i)return-1;let n=0,o=i-1;if(e<=0)return 0;if(t[o].rowTop<=e)return o;let s=-1,r=-1;for(;;){const i=Math.floor((n+o)/2),a=t[i];if(this.isRowInPixel(a,e))return i;a.rowTop<e?n=i+1:a.rowTop>e&&(o=i-1);if(s===n&&r===o)return i;s=n,r=o}}isRowInPixel(e,t){const i=e.rowTop,n=i+e.rowHeight;return i<=t&&n>t}forEachLeafNode(e){var t;const i=null===(t=this.rootNode)||void 0===t?void 0:t._leafs;if(i)for(let n=0,o=i.length;n<o;++n)e(i[n],n)}forEachNode(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.depthFirstSearchRowNodes(e,t)}forEachDisplayedNode(e){const t=this.rowsToDisplay;for(let i=0,n=t.length;i<n;++i)e(t[i],i)}forEachNodeAfterFilter(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.depthFirstSearchRowNodes(e,t,e=>e.childrenAfterAggFilter)}forEachNodeAfterFilterAndSort(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.depthFirstSearchRowNodes(e,t,e=>e.childrenAfterSort)}forEachPivotNode(e,t,i){const{colModel:n,rowGroupColsSvc:o}=this.beans;if(!n.isPivotMode())return;if(null===o||void 0===o||!o.columns.length)return void e(this.rootNode,0);const s=i?"childrenAfterSort":"childrenAfterGroup";this.depthFirstSearchRowNodes(e,t,e=>e.leafGroup?null:e[s])}depthFirstSearchRowNodes(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e.childrenAfterGroup,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rootNode,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!n)return o;const s=n===this.rootNode;if(s||e(n,o++),n.hasChildren()&&!n.footer){const l=i(n);if(l){var r,a;const d=this.beans.footerSvc;o=null!==(r=null===d||void 0===d?void 0:d.addTotalRows(o,n,e,t,s,"top"))&&void 0!==r?r:o;for(const n of l)o=this.depthFirstSearchRowNodes(e,t,i,n,o);return null!==(a=null===d||void 0===d?void 0:d.addTotalRows(o,n,e,t,s,"bottom"))&&void 0!==a?a:o}}return o}doAggregate(e){var t;this.rootNode&&(null===(t=this.beans.aggStage)||void 0===t||t.execute(e))}doFilterAggregates(e){const t=this.rootNode,i=this.beans.filterAggStage;i?i.execute(e):t.childrenAfterAggFilter=t.childrenAfterFilter}doSort(e,t){const i=this.beans.sortStage;i?i.execute(e,t):e.forEachChangedNodeDepthFirst(e=>{e.childrenAfterSort=e.childrenAfterAggFilter.slice(0),Ame(e)})}doGrouping(e){const t=this.rootNode;if(!t)return;const i=this.beans.groupStage,n=null===i||void 0===i?void 0:i.execute(e);if(void 0===n){const e=t._leafs;t.childrenAfterGroup=e,t.updateHasChildren();const i=t.sibling;i&&(i.childrenAfterGroup=e)}var o;(n||e.rowDataUpdated)&&(null===(o=this.beans.colFilter)||void 0===o||o.refreshModel());!this.rowCountReady&&this.rowNodesCountReady&&(this.rowCountReady=!0,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){const t=this.beans.filterStage;t?t.execute(e):e.forEachChangedNodeDepthFirst(e=>{e.childrenAfterFilter=e.childrenAfterGroup,pme(e)},!0)}doPivot(e){var t;null===(t=this.beans.pivotStage)||void 0===t||t.execute(e)}getRowNode(e){var t,i;const n=null===(t=this.nodeManager)||void 0===t?void 0:t.getRowNode(e);return"object"===typeof n?n:null===(i=this.beans.groupStage)||void 0===i?void 0:i.getNonLeaf(e)}batchUpdateRowData(e,t){if(!this.asyncTransactionsTimer){this.asyncTransactions=[];const e=this.gos.get("asyncTransactionWaitMillis");this.asyncTransactionsTimer=setTimeout(()=>this.executeBatchUpdateRowData(),e)}this.asyncTransactions.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){const e=this.asyncTransactionsTimer;e&&(clearTimeout(e),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){var e;const{nodeManager:t,beans:i,eventSvc:n,asyncTransactions:o}=this;if(!t)return;null===(e=i.valueCache)||void 0===e||e.onDataChanged();const s=[],r=[],a=new Jue,l=!this.gos.get("suppressAnimationFrame");for(const{rowDataTransaction:d,callback:c}of null!==o&&void 0!==o?o:[]){this.rowNodesCountReady=!0;const e=t.updateRowData(d,a,l);s.push(e),c&&r.push(c.bind(null,e))}this.commitTransactions(a,l),r.length>0&&setTimeout(()=>{for(let e=0,t=r.length;e<t;e++)r[e]()},0),s.length>0&&n.dispatchEvent({type:"asyncTransactionsFlushed",results:s}),this.asyncTransactionsTimer=0,this.asyncTransactions=null}updateRowData(e){var t;const i=this.nodeManager;if(!i)return null;null===(t=this.beans.valueCache)||void 0===t||t.onDataChanged(),this.rowNodesCountReady=!0;const n=new Jue,o=!this.gos.get("suppressAnimationFrame"),s=i.updateRowData(e,n,o);return this.commitTransactions(n,o),s}commitTransactions(e,t){this.refreshModel({step:"group",rowDataUpdated:!0,keepRenderedRows:!0,animate:t,changedRowNodes:e,changedPath:this.createChangePath(!0)})}doRowsToDisplay(){var e,t;const{rootNode:i,beans:n}=this;if(null!==(e=n.formula)&&void 0!==e&&e.active){var o;const e=null!==(o=null===i||void 0===i?void 0:i.childrenAfterSort)&&void 0!==o?o:[];this.formulaRows=e,this.rowsToDisplay=e.filter(e=>!e.softFiltered);for(const t of this.rowsToDisplay)t.setUiLevel(0);return}const s=n.flattenStage;if(s)return void(this.rowsToDisplay=s.execute());const r=null!==(t=this.rootNode.childrenAfterSort)&&void 0!==t?t:[];for(const a of r)a.setUiLevel(0);this.rowsToDisplay=r}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepUndoRedoStack:!0})}resetRowHeights(){const e=this.rootNode;if(!e)return;const t=this.resetRowHeightsForAllRowNodes();e.setRowHeight(e.rowHeight,!0);const i=e.sibling;null===i||void 0===i||i.setRowHeight(i.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const i=t.detailNode;null===i||void 0===i||i.setRowHeight(i.rowHeight,!0);const n=t.sibling;null===n||void 0===n||n.setRowHeight(n.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){var t;!e.rowHeightChanged||null!==(t=this.beans.rowAutoHeight)&&void 0!==t&&t.active||this.resetRowHeights()}onGridReady(){this.started||this.setInitialData()}destroy(){super.destroy(),this.nodeManager=this.destroyBean(this.nodeManager),this.started=!1,this.rootNode=null,this.rowsToDisplay=[],this.asyncTransactions=null,this.stages=null,this.stagesRefreshProps.clear(),clearTimeout(this.asyncTransactionsTimer)}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}},class extends yoe{constructor(){super(...arguments),this.beanName="sortStage",this.step="sort",this.refreshProps=["postSortRows","groupDisplayType","accentedSort"]}execute(e,t){const i=this.beans.sortSvc.getSortOptions(),n=i.length>0&&!!t&&this.gos.get("deltaSort"),{gos:o,colModel:s,rowGroupColsSvc:r,rowNodeSorter:a,rowRenderer:l,showRowGroupCols:d}=this.beans,c=o.get("groupMaintainOrder"),u=s.getCols().some(e=>e.isRowGroupActive()),h=null===r||void 0===r?void 0:r.columns,p=s.isPivotMode(),g=o.getCallback("postSortRows");let m,f=!1;if(null===e||void 0===e||e.forEachChangedNodeDepthFirst(o=>{var s,r,l;const d=p&&o.leafGroup;let v=c&&u&&!o.leafGroup;v&&(null!==m&&void 0!==m||(m=this.shouldSortContainsGroupCols(i)),v&&(v=!m));let y=null;if(v){let e=!1;if(h){const t=o.level+1;t<h.length&&(e=h[t].wasSortExplicitlyRemoved)}e||(y=Lme(o))}else!i.length||d||(y=n&&t?((e,t,i,n,o)=>{const s=t.childrenAfterSort,r=t.childrenAfterAggFilter;if(!r)return s&&s.length>0?s:[];const a=r.length;if(a<=1)return(null===s||void 0===s?void 0:s.length)!==a||0!==a&&s[0]!==r[0]?r.slice():s;if(!s||a<=4)return e.doFullSortInPlace(r.slice(),o);const l=new Map,{updates:d,adds:c}=i,u=[];for(let p=0;p<a;++p){const e=r[p];d.has(e)||c.has(e)||!n.canSkip(e)?(l.set(e,~p),u.push(e)):l.set(e,p)}const h=u.length;return 0===h?a===s.length?s:Ime(s,l,u):(u.sort((t,i)=>e.compareRowNodes(o,t,i)||~l.get(t)-~l.get(i)),h===a?u:Dme(e,o,u,s,l,a))})(a,o,t,e,i):a.doFullSortInPlace(o.childrenAfterAggFilter.slice(),i));if(y||(y=null!==(s=null===(r=o.childrenAfterAggFilter)||void 0===r?void 0:r.slice())&&void 0!==s?s:[]),f||(f=(null===(l=o.childrenAfterSort)||void 0===l?void 0:l[0])!==y[0]),o.childrenAfterSort=y,Ame(o),g){const e={nodes:o.childrenAfterSort};g(e)}}),f&&o.get("groupHideOpenParents")){const e=null===d||void 0===d?void 0:d.columns;null!==e&&void 0!==e&&e.length&&l.refreshCells({columns:e,force:!0})}}shouldSortContainsGroupCols(e){const t=e.length;if(!t)return!1;if(Ise(this.gos)){for(let i=0;i<t;++i){const t=e[i].column;if(t.isPrimary()&&t.isRowGroupActive())return!0}return!1}for(let i=0;i<t;++i)if(e[i].column.getColDef().showRowGroup)return!0;return!1}}],dependsOn:[Xge]},Rme={moduleName:"SharedExport",version:Qoe,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel}serialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{allColumns:i,columnKeys:n,skipRowGroups:o,exportRowNumbers:s}=t,r=this.getColumnsToExport({allColumns:i,skipRowGroups:o,columnKeys:n,exportRowNumbers:s});return[this.prepareSession(r),this.prependContent(t),this.exportColumnGroups(t,r),this.exportHeaders(t,r),this.processPinnedTopRows(t,r),this.processRows(t,r),this.processPinnedBottomRows(t,r),this.appendContent(t)].reduce((e,t)=>t(e),e).parse()}processRow(e,t,i,n){var o;const s=t.shouldRowBeSkipped||(()=>!1),r=null!=t.rowPositions||!!t.onlySelected,a=this.gos.get("groupHideOpenParents")&&!r,l=this.colModel.isPivotMode()?n.leafGroup:!n.group,d=!!n.footer,c=1===n.allChildrenCount&&1===(null===(o=n.childrenAfterGroup)||void 0===o?void 0:o.length)&&function(e,t){const i=e.get("groupHideParentOfSingleChild");return!0===i||!("leafGroupsOnly"!==i||!t.leafGroup)||!!e.get("groupRemoveSingleChildren")||!(!e.get("groupRemoveLowestSingleChildren")||!t.leafGroup)}(this.gos,n);if(!l&&!d&&(t.skipRowGroups||c||a)||t.onlySelected&&!n.isSelected()||t.skipPinnedTop&&"top"===n.rowPinned||t.skipPinnedBottom&&"bottom"===n.rowPinned||n.stub)return;if(-1===n.level&&!l&&!d)return;if(s(Kse(this.gos,{node:n})))return;const u=e.onNewBodyRow(n);if(i.forEach((e,t)=>{u.onColumn(e,t,n)}),t.getCustomContentBelowRow){const i=t.getCustomContentBelowRow(Kse(this.gos,{node:n}));i&&e.addCustomContent(i)}}appendContent(e){return t=>{const i=e.appendContent;return i&&t.addCustomContent(i),t}}prependContent(e){return t=>{const i=e.prependContent;return i&&t.addCustomContent(i),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return i=>{if(!e.skipColumnGroupHeaders){const n=new sae,{colGroupSvc:o}=this.beans,s=o?o.createColumnGroups({columns:t,idCreator:n,pinned:null,isStandaloneStructure:!0}):t;this.recursivelyAddHeaderGroups(s,i,e.processGroupHeaderCallback)}return i}}exportHeaders(e,t){return i=>{if(!e.skipColumnHeaders){const e=i.onNewHeaderRow();t.forEach((t,i)=>{e.onColumn(t,i,void 0)})}return i}}processPinnedTopRows(e,t){return i=>{var n;const o=this.processRow.bind(this,i,e,t);if(e.rowPositions)e.rowPositions.filter(e=>"top"===e.rowPinned).sort((e,t)=>e.rowIndex-t.rowIndex).map(e=>{var t;return null===(t=this.pinnedRowModel)||void 0===t?void 0:t.getPinnedTopRow(e.rowIndex)}).forEach(o);else if(null===(n=this.pinnedRowModel)||void 0===n||!n.isManual()){var s;null===(s=this.pinnedRowModel)||void 0===s||s.forEachPinnedRow("top",o)}return i}}processRows(e,t){return i=>{const n=this.rowModel,o=gse(this.gos),s=mse(this.gos),r=!o&&e.onlySelected,a=this.processRow.bind(this,i,e,t),{exportedRows:l="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(e=>null==e.rowPinned).sort((e,t)=>e.rowIndex-t.rowIndex).map(e=>n.getRow(e.rowIndex)).forEach(a);else if(this.colModel.isPivotMode())o?n.forEachPivotNode(a,!0,"filteredAndSorted"===l):s?n.forEachNodeAfterFilterAndSort(a,!0):n.forEachNode(a);else if(e.onlySelectedAllPages||r){var d,c;const e=null!==(d=null===(c=this.beans.selectionSvc)||void 0===c?void 0:c.getSelectedNodes())&&void 0!==d?d:[];this.replicateSortedOrder(e),e.forEach(a)}else"all"===l?n.forEachNode(a):o||s?n.forEachNodeAfterFilterAndSort(a,!0):n.forEachNode(a);return i}}replicateSortedOrder(e){const{sortSvc:t,rowNodeSorter:i}=this.beans;if(!t||!i)return;const n=t.getSortOptions(),o=(e,t)=>{return null!=e.rowIndex&&null!=t.rowIndex?e.rowIndex-t.rowIndex:e.level===t.level?(null===(s=e.parent)||void 0===s?void 0:s.id)===(null===(r=t.parent)||void 0===r?void 0:r.id)?i.compareRowNodes(n,e,t)||(null!==(a=e.rowIndex)&&void 0!==a?a:-1)-(null!==(l=t.rowIndex)&&void 0!==l?l:-1):o(e.parent,t.parent):e.level>t.level?o(e.parent,t):o(e,t.parent);var s,r,a,l};e.sort(o)}processPinnedBottomRows(e,t){return i=>{var n;const o=this.processRow.bind(this,i,e,t);if(e.rowPositions)e.rowPositions.filter(e=>"bottom"===e.rowPinned).sort((e,t)=>e.rowIndex-t.rowIndex).map(e=>{var t;return null===(t=this.pinnedRowModel)||void 0===t?void 0:t.getPinnedBottomRow(e.rowIndex)}).forEach(o);else if(null===(n=this.pinnedRowModel)||void 0===n||!n.isManual()){var s;null===(s=this.pinnedRowModel)||void 0===s||s.forEachPinnedRow("bottom",o)}return i}}getColumnsToExport(e){const{allColumns:t=!1,skipRowGroups:i=!1,exportRowNumbers:n=!1,columnKeys:o}=e,{colModel:s,gos:r,visibleCols:a}=this,l=s.isPivotMode(),d=e=>!Dre(e)&&(!Ire(e)||n);if(null!==o&&void 0!==o&&o.length)return s.getColsForKeys(o).filter(d);const c=r.get("treeData");let u=[];return u=t&&!l?s.getCols():a.allCols,u=u.filter(e=>d(e)&&(!(i&&!c)||!kre(e))),u}recursivelyAddHeaderGroups(e,t,i){const n=[];for(const s of e){const e=s;if(e.getChildren)for(const t of null!==(o=e.getChildren())&&void 0!==o?o:[]){var o;n.push(t)}}e.length>0&&Ude(e[0])&&this.doAddHeaderHeader(t,e,i),n&&n.length>0&&this.recursivelyAddHeaderGroups(n,t,i)}doAddHeaderHeader(e,t,i){const n=e.onNewHeaderGroupingRow();let o=0;for(const s of t){const e=s;let t;t=i?i(Kse(this.gos,{columnGroup:e})):this.beans.colNames.getDisplayNameForColumnGroup(e,"header");const r=(e.isExpandable()?e.getLeafColumns():[]).reduce((e,t,i,n)=>{let o=pre(e);return"open"===t.getColumnGroupShow()?o&&null==o[1]||(o=[i],e.push(o)):o&&null==o[1]&&(o[1]=i-1),i===n.length-1&&o&&null==o[1]&&(o[1]=i),e},[]);n.onColumn(e,t||"",o++,e.getLeafColumns().length-1,r)}}}]},Eme=class extends ume{constructor(e){super(e),this.config=e,this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:i}=e;this.suppressQuotes=t,this.columnSeparator=i}addCustomContent(e){e&&("string"===typeof e?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,"\r\n"),this.result+=e):e.forEach(e=>{this.beginNewLine(),e.forEach((e,t)=>{0!==t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e.data.value||""),e.mergeAcross&&this.appendEmptyCells(e.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,i,n){0!=i&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(n)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){0!=t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,i){var n;0!=t&&(this.result+=this.columnSeparator);const o=this.extractRowCellValue({column:e,node:i,currentColumnIndex:t,accumulatedRowIndex:t,type:"csv",useRawFormula:!1});this.result+=this.putInQuotes(null!==(n=o.valueFormatted)&&void 0!==n?n:o.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(null===e||void 0===e)return'""';let t;"string"===typeof e?t=e:"function"===typeof e.toString?t=e.toString():(lse(53),t="");return'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1}};var Pme={moduleName:"CsvExport",version:Qoe,beans:[class extends cme{constructor(){super(...arguments),this.beanName="csvCreator"}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed())return void lse(51);const t=()=>{const t=this.getMergedParams(e),i=this.getData(t),n=new Blob(["\ufeff",i],{type:"text/plain"}),o=t.fileName,s="function"===typeof o?o(Kse(this.gos,{})):o;hme(this.getFileName(s),n)},{overlays:i}=this.beans;i?i.showExportOverlay(t):t()}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Object.assign({},e):this.getMergedParams(e);return this.getData(t)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{colModel:t,colNames:i,rowGroupColsSvc:n,valueSvc:o,gos:s}=this.beans,{processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:d,suppressQuotes:c,columnSeparator:u}=e;return new Eme({colModel:t,colNames:i,valueSvc:o,gos:s,processCellCallback:r||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:d||void 0,suppressQuotes:c||!1,columnSeparator:u||",",rowGroupColsSvc:n})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}}],apiFunctions:{getDataAsCsv:function(e,t){var i;return null===(i=e.csvCreator)||void 0===i?void 0:i.getDataAsCsv(t)},exportDataAsCsv:function(e,t){var i;null===(i=e.csvCreator)||void 0===i||i.exportDataAsCsv(t)}},dependsOn:[Rme]};var Ome={tag:"span",children:[{tag:"span",ref:"eDelta",cls:"ag-value-change-delta"},{tag:"span",ref:"eValue",cls:"ag-value-change-value"}]},Fme={tag:"span",children:[{tag:"span",ref:"eCurrent",cls:"ag-value-slide-current"}]};var zme={moduleName:"HighlightChanges",version:Qoe,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="cellFlashSvc",this.nextAnimationTime=null,this.nextAnimationCycle=null,this.animations={highlight:new Map,"data-changed":new Map}}animateCell(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.beans.gos.get("cellFlashDuration"),n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.beans.gos.get("cellFadeDuration");const o=this.animations[t];o.delete(e);const s=Date.now(),r=s+i,a={phase:"flash",flashEndTime:r,fadeEndTime:s+i+n};o.set(e,a);const l="ag-cell-".concat(t),d="".concat(l,"-animation"),{comp:c,eGui:{style:u}}=e;c.toggleCss(l,!0),c.toggleCss(d,!1),u.removeProperty("transition"),u.removeProperty("transition-delay"),this.nextAnimationTime&&r+15<this.nextAnimationTime&&(clearTimeout(this.nextAnimationCycle),this.nextAnimationCycle=null,this.nextAnimationTime=null),this.nextAnimationCycle||(this.beans.frameworkOverrides.wrapIncoming(()=>{this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),i)}),this.nextAnimationTime=r)}advanceAnimations(){const e=Date.now();let t=null;for(const i of Object.keys(this.animations)){const n=this.animations[i],o="ag-cell-".concat(i),s="".concat(o,"-animation");for(const[i,r]of n){if(!i.isAlive()||!i.comp){n.delete(i);continue}const{phase:a,flashEndTime:l,fadeEndTime:d}=r,c="flash"===a?l:d;if(!(e+15>=c)){t=Math.min(c,null!==t&&void 0!==t?t:1/0);continue}const{comp:u,eGui:{style:h}}=i;switch(a){case"flash":u.toggleCss(o,!1),u.toggleCss(s,!0),h.transition="background-color ".concat(d-l,"ms"),h.transitionDelay="".concat(l-e,"ms"),t=Math.min(d,null!==t&&void 0!==t?t:1/0),r.phase="fade";break;case"fade":u.toggleCss(o,!1),u.toggleCss(s,!1),h.removeProperty("transition"),h.removeProperty("transition-delay"),n.delete(i)}}}null==t?(this.nextAnimationTime=null,this.nextAnimationCycle=null):t&&(this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),t-e),this.nextAnimationTime=t)}onFlashCells(e,t){if(!e.comp)return;const i=due(e.cellPosition);t.cells[i]&&this.animateCell(e,"highlight")}flashCell(e,t){this.animateCell(e,"data-changed",null===t||void 0===t?void 0:t.flashDuration,null===t||void 0===t?void 0:t.fadeDuration)}destroy(){for(const e of Object.keys(this.animations)){this.animations[e].clear()}}}],userComponents:{agAnimateShowChangeCellRenderer:class extends hae{constructor(){super(Ome),this.eValue=lae,this.eDelta=lae,this.refreshCount=0}init(e){this.refresh(e,!0)}showDelta(e,t){const i=Math.abs(t),n=e.formatValue(i),o=Fie(n)?n:i,s=t>=0,r=this.eDelta;r.textContent=s?"\u2191"+o:"\u2193"+o,r.classList.toggle("ag-value-change-delta-up",s),r.classList.toggle("ag-value-change-delta-down",!s)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),Fne(this.eDelta)}refresh(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{value:n,valueFormatted:o}=e,{eValue:s,lastValue:r,beans:a}=this;if(n===r)return!1;if(Fie(o)?s.textContent=o:Fie(n)?s.textContent=n:Fne(s),null!==(t=a.filterManager)&&void 0!==t&&t.isSuppressFlashingCellsBecauseFiltering())return!1;const l=n&&"object"===typeof n&&"toNumber"in n?n.toNumber():n,d=r&&"object"===typeof r&&"toNumber"in r?r.toNumber():r;if(l===d)return!1;if("number"===typeof l&&"number"===typeof d){const t=l-d;this.showDelta(e,t)}return r&&s.classList.add("ag-value-change-value-highlight"),i||this.setTimerToRemoveDelta(),this.lastValue=n,!0}},agAnimateSlideCellRenderer:class extends hae{constructor(){super(Fme),this.eCurrent=lae,this.refreshCount=0,this.registerCSS(".ag-value-slide-out{opacity:1}:where(.ag-ltr) .ag-value-slide-out{margin-right:5px;transition:opacity 3s,margin-right 3s}:where(.ag-rtl) .ag-value-slide-out{margin-left:5px;transition:opacity 3s,margin-left 3s}:where(.ag-ltr,.ag-rtl) .ag-value-slide-out{transition-timing-function:linear}.ag-value-slide-out-end{opacity:0}:where(.ag-ltr) .ag-value-slide-out-end{margin-right:10px}:where(.ag-rtl) .ag-value-slide-out-end{margin-left:10px}")}init(e){this.refresh(e,!0)}addSlideAnimation(){var e;this.refreshCount++;const t=this.refreshCount;null===(e=this.ePrevious)||void 0===e||e.remove();const{beans:i,eCurrent:n}=this,o=oce({tag:"span",cls:"ag-value-slide-previous ag-value-slide-out"});this.ePrevious=o,o.textContent=n.textContent,this.getGui().insertBefore(o,n),i.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{t===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{var e;t===this.refreshCount&&(null===(e=this.ePrevious)||void 0===e||e.remove(),this.ePrevious=null)},3e3)})}refresh(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.value;if(zie(n)&&(n=""),n===this.lastValue)return!1;if(null!==(t=this.beans.filterManager)&&void 0!==t&&t.isSuppressFlashingCellsBecauseFiltering())return!1;i||this.addSlideAnimation(),this.lastValue=n;const o=this.eCurrent;return Fie(e.valueFormatted)?o.textContent=e.valueFormatted:Fie(e.value)?o.textContent=n:Fne(o),!0}}},apiFunctions:{flashCells:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{cellFlashSvc:i}=e;i&&e.frameworkOverrides.wrapIncoming(()=>{for(const n of e.rowRenderer.getCellCtrls(t.rowNodes,t.columns))i.flashCell(n,t)})}}};var Bme=class extends yoe{constructor(e,t){super(),this.cellCtrl=e,this.staticClasses=[],this.beans=t,this.column=e.column}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const{column:e,cellComp:t}=this,i=e.colDef,n=i.cellClassRules,o=this.getCellClassParams(e,i);yge(this.beans.expressionSvc,n===this.cellClassRules?void 0:this.cellClassRules,n,o,e=>t.toggleCss(e,!0),e=>t.toggleCss(e,!1)),this.cellClassRules=n}applyUserStyles(){const e=this.column,t=e.colDef,i=t.cellStyle;if(!i)return;let n;if("function"===typeof i){n=i(this.getCellClassParams(e,t))}else n=i;n&&this.cellComp.setUserStyles(n)}applyClassesFromColDef(){const{column:e,cellComp:t}=this,i=e.colDef,n=this.getCellClassParams(e,i);for(const s of this.staticClasses)t.toggleCss(s,!1);const o=this.beans.cellStyles.getStaticCellClasses(i,n);this.staticClasses=o;for(const s of o)t.toggleCss(s,!0)}getCellClassParams(e,t){const{value:i,rowNode:n}=this.cellCtrl;return Kse(this.beans.gos,{value:i,data:n.data,node:n,colDef:t,column:e,rowIndex:n.rowIndex})}},Vme={moduleName:"CellStyle",version:Qoe,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="cellStyles"}processAllCellClasses(e,t,i,n){yge(this.beans.expressionSvc,void 0,e.cellClassRules,t,i,n),this.processStaticCellClasses(e,t,i)}getStaticCellClasses(e,t){const{cellClass:i}=e;if(!i)return[];let n;if("function"===typeof i){n=i(t)}else n=i;return"string"===typeof n&&(n=[n]),n||[]}createCellCustomStyleFeature(e){return new Bme(e,this.beans)}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach(e=>{i(e)})}}]};var Gme=i(950);const Hme=["key"];var jme,Wme=o.createContext({}),_me=o.createContext("default"),Kme=(e,t,i,n)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const o=e.newAgStackInstance();let s,r,a=!1;return o.then(e=>{a?t.destroyBean(e):(s=e,r=s.getGui(),i.appendChild(r),Ume(n,s))}),()=>{var e;a=!0,s&&(null===(e=r)||void 0===e||e.remove(),t.destroyBean(s),n&&Ume(n,void 0))}},Ume=(e,t)=>{if(e)if(e instanceof Function){e(t)}else{e.current=t}},Yme=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=t.filter(e=>null!=e&&""!==e);return n.join(" ")},$me=class e{constructor(){this.classesMap={};for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const n of t)this.classesMap[n]=!0}setClass(t,i){if(!!this.classesMap[t]==i)return this;const n=new e;return n.classesMap=p({},this.classesMap),n.classesMap[t]=i,n}toString(){return Object.keys(this.classesMap).filter(e=>this.classesMap[e]).join(" ")}},Zme=e=>"function"===typeof e&&!(e.prototype&&e.prototype.isReactComponent)||"object"===typeof e&&e.$$typeof===("function"===typeof Symbol&&Symbol.for?Symbol.for("react.memo"):60115),Xme=null===(jme=o.version)||void 0===jme?void 0:jme.split(".")[0],qme="16"===Xme||"17"===Xme;var Qme=!1;var Jme=(e,t)=>{qme||!e||Qme?t():Gme.flushSync(t)};function efe(e,t,i){if(null==t||null==e)return t;if(e===t||0===t.length&&0===e.length)return e;if(i||0===e.length&&t.length>0||e.length>0&&0===t.length)return t;const n=[],o=[],s=new Map,r=new Map;for(let a=0;a<t.length;a++){const e=t[a];r.set(e.instanceId,e)}for(let a=0;a<e.length;a++){const t=e[a];s.set(t.instanceId,t),r.has(t.instanceId)&&n.push(t)}for(let a=0;a<t.length;a++){const e=t[a],i=e.instanceId;s.has(i)||o.push(e)}return n.length===e.length&&0===o.length?e:0===n.length&&o.length===t.length?t:0===n.length?o:0===o.length?n:[...n,...o]}var tfe=(0,o.forwardRef)((e,t)=>{var i;const{registry:n,context:s}=(0,o.useContext)(Wme),r=(0,o.useRef)(null),a=(0,o.useRef)(null),l=(0,o.useRef)(null),d=(0,o.useRef)(null),c=(0,o.useRef)(null),u=(0,o.useRef)(),[h,g]=(0,o.useState)(),[m,f]=(0,o.useState)(),[v,y]=(0,o.useState)(),[b,x]=(0,o.useState)(()=>new $me),[C,S]=(0,o.useState)(()=>new $me("ag-hidden")),[w,M]=(0,o.useState)(()=>new $me("ag-hidden")),[k,D]=(0,o.useState)(()=>new $me("ag-invisible"));(0,o.useImperativeHandle)(t,()=>({refresh:()=>!1})),(0,o.useLayoutEffect)(()=>Kme(h,s,a.current),[h]);const I=(0,o.useCallback)(t=>{if(r.current=t,!t||s.isDestroyed())return void(u.current=s.destroyBean(u.current));const i={setInnerRenderer:(e,t)=>{g(e),y(t)},setChildCount:e=>f(e),toggleCss:(e,t)=>x(i=>i.setClass(e,t)),setContractedDisplayed:e=>M(t=>t.setClass("ag-hidden",!e)),setExpandedDisplayed:e=>S(t=>t.setClass("ag-hidden",!e)),setCheckboxVisible:e=>D(t=>t.setClass("ag-invisible",!e)),setCheckboxSpacing:e=>D(t=>t.setClass("ag-group-checkbox-spacing",e))},o=n.createDynamicBean("groupCellRendererCtrl",!0);o&&(u.current=s.createBean(o),u.current.init(i,t,l.current,d.current,c.current,tfe,e))},[]),A=(0,o.useMemo)(()=>"ag-cell-wrapper ".concat(b.toString()),[b]),L=(0,o.useMemo)(()=>"ag-group-expanded ".concat(C.toString()),[C]),N=(0,o.useMemo)(()=>"ag-group-contracted ".concat(w.toString()),[w]),T=(0,o.useMemo)(()=>"ag-group-checkbox ".concat(k.toString()),[k]),R=null===h||void 0===h?void 0:h.componentFromFramework,E=R?h.componentClass:void 0,P=null==h&&null!=v,O=jie(v);return o.createElement("span",p({className:A,ref:I},e.colDef?{}:{role:null===(i=u.current)||void 0===i?void 0:i.getCellAriaRole()}),o.createElement("span",{className:L,ref:d}),o.createElement("span",{className:N,ref:c}),o.createElement("span",{className:T,ref:l}),o.createElement("span",{className:"ag-group-value",ref:a},P?O:R?o.createElement(E,p({},h.params)):null),o.createElement("span",{className:"ag-group-child-count"},m))}),ife=tfe,nfe=(0,o.createContext)({setMethods:()=>{}}),ofe=(0,o.memo)(e=>{const{initialProps:t,addUpdateCallback:i,CustomComponentClass:n,setMethods:s}=e,[r,a]=(0,o.useState)(t),{key:d}=r,c=l(r,Hme);return(0,o.useEffect)(()=>{i(e=>a(e))},[]),o.createElement(nfe.Provider,{value:{setMethods:s}},o.createElement(n,p({key:d},c)))}),sfe=0;function rfe(){return"agPortalKey_".concat(++sfe)}var afe=class{constructor(e,t,i,n){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=i,this.suppressFallbackMethods=!!n,this.statelessComponent=this.isStateless(this.reactComponent),this.key=rfe(),this.portalKey=rfe(),this.instanceCreated=this.isStatelessComponent()?pae.resolve(!1):new pae(e=>{this.resolveInstanceCreated=e})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&"function"==typeof this.componentInstance.destroy&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),i=document.createElement(t||"div");return i.classList.add("ag-react-container"),e.reactContainer=i,i}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return"function"===typeof Symbol&&Symbol.for}isStateless(e){return"function"===typeof e&&!(e.prototype&&e.prototype.isReactComponent)||"object"===typeof e&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&null!=t[e]||this.fallbackMethodAvailable(e)}callMethod(e,t){const i=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!i)return void setTimeout(()=>this.callMethod(e,t));const n=i[e];return n?n.apply(i,t):this.fallbackMethodAvailable(e)?this.fallbackMethod(e,t&&t[0]?t[0]:{}):void 0}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new pae(e=>this.createReactComponent(e))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=e=>{var t;this.componentInstance=e,null===(t=this.resolveInstanceCreated)||void 0===t||t.call(this,!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,p(p({},e),{},{key:this.key})),this.portal=(0,Gme.createPortal)(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return(0,o.createElement)(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!(this.isStatelessComponent()||!this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const i=this["".concat(e,"Component")];if(!this.suppressFallbackMethods&&i)return i.bind(this)(t)}fallbackMethodAvailable(e){if(this.suppressFallbackMethods)return!1;return!!this["".concat(e,"Component")]}};function lfe(e,t,i){for(const n of e){const e=t[n];e&&(i[n]=e)}}var dfe=class extends afe{constructor(){super(...arguments),this.awaitUpdateCallback=new pae(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=ofe}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:e=>this.setMethods(e),addUpdateCallback:e=>{this.updateCallback=()=>(e(this.getProps()),new pae(e=>{setTimeout(()=>{e()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,lfe(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return p(p({},this.sourceParams),{},{key:this.key,ref:this.ref})}refreshProps(){return this.updateCallback?this.updateCallback():new pae(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},cfe=class extends dfe{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},ufe=class extends dfe{refresh(e){this.sourceParams=e,this.refreshProps()}},hfe=class extends dfe{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},pfe=class extends dfe{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:i,shake:n}=this;return e.label=t,e.icon=i,e.shake=n,e}},gfe=class extends dfe{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new pae(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return null!=this.model}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;var i;t?null===(i=t.afterGuiAttached)||void 0===i||i.call(t,e):this.awaitSetMethodsCallback.then(()=>{var t,i;return null===(t=this.providedMethods)||void 0===t||null===(i=t.afterGuiAttached)||void 0===i?void 0:i.call(t,e)})}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){var t,i;!1===this.expectingNewMethods&&this.hasBeenActive&&(null===(t=this.providedMethods)||void 0===t?void 0:t.doesFilterPass)!==(null===e||void 0===e?void 0:e.doesFilterPass)&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback(),null===(i=this.resolveFilterPassCallback)||void 0===i||i.call(this),this.resolveFilterPassCallback=void 0}updateModel(e){var t;null===(t=this.resolveFilterPassCallback)||void 0===t||t.call(this);const i=new pae(e=>{this.resolveFilterPassCallback=e});this.setModel(e).then(()=>{i.then(()=>{this.sourceParams.filterChangedCallback()})})}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,e}},mfe=class extends dfe{constructor(){super(...arguments),this.awaitSetMethodsCallback=new pae(e=>{this.resolveSetMethodsCallback=e})}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;var i;t?null===(i=t.afterGuiAttached)||void 0===i||i.call(t,e):this.awaitSetMethodsCallback.then(()=>{var t,i;return null===(t=this.providedMethods)||void 0===t||null===(i=t.afterGuiAttached)||void 0===i?void 0:i.call(t,e)})}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(e){super.setMethods(e),this.resolveSetMethodsCallback()}};function ffe(e,t){e.parentFilterInstance(i=>{(i.setModel(t)||pae.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var vfe=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=e=>this.updateModel(e)}getProps(){return p(p({},this.floatingFilterParams),{},{model:this.model,onModelChange:this.onModelChange})}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){lfe(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),ffe(this.floatingFilterParams,e)}},yfe=class extends dfe{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),ffe(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},bfe=class extends dfe{refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},xfe=class extends dfe{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Cfe=class extends dfe{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},Sfe=class extends dfe{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},wfe=class extends dfe{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function Mfe(){lse(231)}var kfe=class{constructor(e,t,i){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=i||1e3}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,i){this.portals=[...this.portals,e],this.waitForInstance(t,i),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();if(this.destroyed)t(null);else if(e.rendered())t(e);else{if(Date.now()-i>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate)return Jme(!0,()=>this.refresher()),void(e.rendered()&&t(e));window.setTimeout(()=>{this.waitForInstance(e,t,i)})}}},Dfe=(0,o.memo)(e=>{let{ctrl:t}=e;const i=t.isAlive(),{context:n}=(0,o.useContext)(Wme),[s,r]=(0,o.useState)(),[a,l]=(0,o.useState)(),d=(0,o.useRef)(),c=(0,o.useRef)(null),u=(0,o.useRef)(null),h=(0,o.useRef)(null),g=(0,o.useRef)(),m=(0,o.useRef)();i&&!m.current&&(m.current=new dae(()=>c.current));const f=(0,o.useCallback)(e=>{if(c.current=e,!e||!t.isAlive()||n.isDestroyed())return void(d.current=n.destroyBean(d.current));d.current=n.createBean(new rae);const i=()=>{const e=t.getSelectAllGui();var i;e&&(null===(i=u.current)||void 0===i||i.insertAdjacentElement("afterend",e),d.current.addDestroyFunc(()=>e.remove()))},o={setWidth:e=>{c.current&&(c.current.style.width=e)},toggleCss:(e,t)=>m.current.toggleCss(e,t),setUserStyles:e=>l(e),setAriaSort:e=>{c.current&&(e?vne(c.current,e):yne(c.current))},setUserCompDetails:e=>r(e),getUserCompInstance:()=>g.current||void 0,refreshSelectAllGui:i,removeSelectAllGui:()=>{var e;return null===(e=t.getSelectAllGui())||void 0===e?void 0:e.remove()}};t.setComp(o,e,u.current,h.current,d.current),i()},[]);(0,o.useLayoutEffect)(()=>Kme(s,n,h.current,g),[s]),(0,o.useEffect)(()=>{t.setDragSource(c.current)},[s]);const v=(0,o.useMemo)(()=>!!((null===s||void 0===s?void 0:s.componentFromFramework)&&Zme(s.componentClass)),[s]),y=null===s||void 0===s?void 0:s.componentFromFramework,b=null===s||void 0===s?void 0:s.componentClass;return o.createElement("div",{ref:f,style:a,className:"ag-header-cell",role:"columnheader"},o.createElement("div",{ref:u,className:"ag-header-cell-resize",role:"presentation"}),o.createElement("div",{ref:h,className:"ag-header-cell-comp-wrapper",role:"presentation"},y?v?o.createElement(b,p({},s.params)):o.createElement(b,p(p({},s.params),{},{ref:g})):null))}),Ife=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t}getProps(){return this.floatingFilterParams}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){lfe(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}},Afe=(0,o.memo)(e=>{let{ctrl:t}=e;const{context:i,gos:n}=(0,o.useContext)(Wme),[s,r]=(0,o.useState)(),[a,l]=(0,o.useState)(()=>new $me("ag-header-cell","ag-floating-filter")),[d,c]=(0,o.useState)(()=>new $me),[u,h]=(0,o.useState)(()=>new $me("ag-floating-filter-button","ag-hidden")),[g,m]=(0,o.useState)("false"),[f,v]=(0,o.useState)(),[,y]=(0,o.useState)(1),b=(0,o.useRef)(),x=(0,o.useRef)(null),C=(0,o.useRef)(null),S=(0,o.useRef)(null),w=(0,o.useRef)(null),M=(0,o.useRef)(),k=(0,o.useRef)(),D=e=>{null!=e&&M.current&&M.current(e)},I=(0,o.useCallback)(e=>{if(x.current=e,!e||!t.isAlive()||i.isDestroyed())return void(b.current=i.destroyBean(b.current));b.current=i.createBean(new rae),k.current=new pae(e=>{M.current=e});const n={toggleCss:(e,t)=>l(i=>i.setClass(e,t)),setUserStyles:e=>r(e),addOrRemoveBodyCssClass:(e,t)=>c(i=>i.setClass(e,t)),setButtonWrapperDisplayed:e=>{h(t=>t.setClass("ag-hidden",!e)),m(e?"false":"true")},setWidth:e=>{x.current&&(x.current.style.width=e)},setCompDetails:e=>v(e),getFloatingFilterComp:()=>k.current?k.current:null,setMenuIcon:e=>{var t;return null===(t=w.current)||void 0===t?void 0:t.appendChild(e)}};t.setComp(n,e,w.current,C.current,b.current)},[]);(0,o.useLayoutEffect)(()=>Kme(f,i,C.current,D),[f]);const A=(0,o.useMemo)(()=>a.toString(),[a]),L=(0,o.useMemo)(()=>d.toString(),[d]),N=(0,o.useMemo)(()=>u.toString(),[u]),T=(0,o.useMemo)(()=>!!(f&&f.componentFromFramework&&Zme(f.componentClass)),[f]),R=(0,o.useMemo)(()=>n.get("reactiveCustomComponents"),[]),E=(0,o.useMemo)(()=>n.get("enableFilterHandlers"),[]),[P,O]=(0,o.useState)();(0,o.useEffect)(()=>{if(null!==f&&void 0!==f&&f.componentFromFramework)if(R){const e=new(E?Ife:vfe)(f.params,()=>y(e=>e+1));D(e),O(e)}else Mfe()},[f]);const F=null===P||void 0===P?void 0:P.getProps(),z=null===f||void 0===f?void 0:f.componentFromFramework,B=null===f||void 0===f?void 0:f.componentClass;return o.createElement("div",{ref:I,style:s,className:A,role:"gridcell"},o.createElement("div",{ref:C,className:L,role:"presentation"},z?R?F&&o.createElement(nfe.Provider,{value:{setMethods:e=>P.setMethods(e)}},o.createElement(B,p({},F))):o.createElement(B,p(p({},f.params),{},{ref:T?()=>{}:D})):null),o.createElement("div",{ref:S,"aria-hidden":g,className:N,role:"presentation"},o.createElement("button",{ref:w,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))}),Lfe=(0,o.memo)(e=>{let{ctrl:t}=e;const{context:i}=(0,o.useContext)(Wme),[n,s]=(0,o.useState)(),[r,a]=(0,o.useState)(()=>new $me),[l,d]=(0,o.useState)(()=>new $me),[c,u]=(0,o.useState)("false"),[h,g]=(0,o.useState)(),[m,f]=(0,o.useState)(),v=(0,o.useRef)(),y=(0,o.useRef)(null),b=(0,o.useRef)(null),x=(0,o.useRef)(null),C=(0,o.useRef)(),S=(0,o.useCallback)(e=>{if(y.current=e,!e||!t.isAlive()||i.isDestroyed())return void(v.current=i.destroyBean(v.current));v.current=i.createBean(new rae);const n={setWidth:e=>{y.current&&(y.current.style.width=e)},toggleCss:(e,t)=>a(i=>i.setClass(e,t)),setUserStyles:e=>s(e),setHeaderWrapperHidden:e=>{const t=x.current;t&&(e?t.style.setProperty("display","none"):t.style.removeProperty("display"))},setHeaderWrapperMaxHeight:e=>{const t=x.current;t&&(null!=e?t.style.setProperty("max-height","".concat(e,"px")):t.style.removeProperty("max-height"),t.classList.toggle("ag-header-cell-comp-wrapper-limited-height",null!=e))},setUserCompDetails:e=>f(e),setResizableDisplayed:e=>{d(t=>t.setClass("ag-hidden",!e)),u(e?"false":"true")},setAriaExpanded:e=>g(e),getUserCompInstance:()=>C.current||void 0};t.setComp(n,e,b.current,x.current,v.current)},[]);(0,o.useLayoutEffect)(()=>Kme(m,i,x.current),[m]),(0,o.useEffect)(()=>{y.current&&t.setDragSource(y.current)},[m]);const w=(0,o.useMemo)(()=>!!((null===m||void 0===m?void 0:m.componentFromFramework)&&Zme(m.componentClass)),[m]),M=(0,o.useMemo)(()=>"ag-header-group-cell "+r.toString(),[r]),k=(0,o.useMemo)(()=>"ag-header-cell-resize "+l.toString(),[l]),D=null===m||void 0===m?void 0:m.componentFromFramework,I=null===m||void 0===m?void 0:m.componentClass;return o.createElement("div",{ref:S,style:n,className:M,role:"columnheader","aria-expanded":h},o.createElement("div",{ref:x,className:"ag-header-cell-comp-wrapper",role:"presentation"},D?w?o.createElement(I,p({},m.params)):o.createElement(I,p(p({},m.params),{},{ref:C})):null),o.createElement("div",{ref:b,"aria-hidden":c,className:k}))}),Nfe=(0,o.memo)(e=>{let{ctrl:t}=e;const{gos:i,context:n}=(0,o.useContext)(Wme),{topOffset:s,rowHeight:r}=(0,o.useMemo)(()=>t.getTopAndHeight(),[]),a=(0,o.useMemo)(()=>i.get("tabIndex"),[]),[l,d]=(0,o.useState)(()=>t.getAriaRowIndex()),c=t.headerRowClass,[u,h]=(0,o.useState)(()=>r+"px"),[p,g]=(0,o.useState)(()=>s+"px"),m=(0,o.useRef)(null),[f,v]=(0,o.useState)(()=>t.getUpdatedHeaderCtrls()),y=(0,o.useRef)(),b=(0,o.useRef)(null),x=(0,o.useCallback)(e=>{if(b.current=e,!e||!t.isAlive()||n.isDestroyed())return void(y.current=n.destroyBean(y.current));y.current=n.createBean(new rae);const i={setHeight:e=>h(e),setTop:e=>g(e),setHeaderCtrls:(e,t,i)=>{const n=m.current,o=efe(n,e,t);o!==n&&(m.current=o,Jme(i,()=>v(o)))},setWidth:e=>{b.current&&(b.current.style.width=e)},setRowIndex:e=>{d(e)}};t.setComp(i,y.current,!1)},[]),C=(0,o.useMemo)(()=>({height:u,top:p}),[u,p]),S=(0,o.useCallback)(e=>{switch(t.type){case"group":return o.createElement(Lfe,{ctrl:e,key:e.instanceId});case"filter":return o.createElement(Afe,{ctrl:e,key:e.instanceId});default:return o.createElement(Dfe,{ctrl:e,key:e.instanceId})}},[]);return o.createElement("div",{ref:x,className:c,role:"row",style:C,tabIndex:a,"aria-rowindex":l},f.map(S))}),Tfe=(0,o.memo)(e=>{let{pinned:t}=e;const[i,n]=(0,o.useState)(!0),[s,r]=(0,o.useState)([]),{context:a}=(0,o.useContext)(Wme),l=(0,o.useRef)(null),d=(0,o.useRef)(null),c=(0,o.useRef)(),u="left"===t,h="right"===t,p=!u&&!h,g=(0,o.useCallback)(e=>{if(l.current=e,!e||a.isDestroyed())return void(c.current=a.destroyBean(c.current));c.current=a.createBean(new Gue(t));const i={setDisplayed:n,setCtrls:e=>r(e),setCenterWidth:e=>{d.current&&(d.current.style.width=e)},setViewportScrollLeft:e=>{l.current&&(l.current.scrollLeft=e)},setPinnedContainerWidth:e=>{l.current&&(l.current.style.width=e,l.current.style.minWidth=e,l.current.style.maxWidth=e)}};c.current.setComp(i,l.current)},[]),m=i?"":"ag-hidden",f=()=>s.map(e=>o.createElement(Nfe,{ctrl:e,key:e.instanceId}));return u?o.createElement("div",{ref:g,className:"ag-pinned-left-header "+m,"aria-hidden":!i,role:"rowgroup"},f()):h?o.createElement("div",{ref:g,className:"ag-pinned-right-header "+m,"aria-hidden":!i,role:"rowgroup"},f()):p?o.createElement("div",{ref:g,className:"ag-header-viewport "+m,role:"rowgroup",tabIndex:-1},o.createElement("div",{ref:d,className:"ag-header-container",role:"presentation"},f())):null}),Rfe=(0,o.memo)(()=>{const[e,t]=(0,o.useState)(()=>new $me),[i,n]=(0,o.useState)(),{context:s}=(0,o.useContext)(Wme),r=(0,o.useRef)(null),a=(0,o.useRef)(),l=(0,o.useCallback)(e=>{if(r.current=e,!e||s.isDestroyed())return void(a.current=s.destroyBean(a.current));a.current=s.createBean(new Tue);const i={toggleCss:(e,i)=>t(t=>t.setClass(e,i)),setHeightAndMinHeight:e=>n(e)};a.current.setComp(i,e,e)},[]),d=(0,o.useMemo)(()=>"ag-header "+e.toString(),[e]),c=(0,o.useMemo)(()=>({height:i,minHeight:i}),[i]);return o.createElement("div",{ref:l,className:d,style:c,role:"presentation"},o.createElement(Tfe,{pinned:"left"}),o.createElement(Tfe,{pinned:null}),o.createElement(Tfe,{pinned:"right"}))}),Efe=(e,t)=>{(0,o.useEffect)(()=>{const i=t.current;if(i){const t=i.parentElement;if(t){const n=document.createComment(e);return t.insertBefore(n,i),()=>{n.remove()}}}},[e])},Pfe=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new pae(e=>{this.resolveInstanceCreated=e}),this.onValueChange=e=>this.updateValue(e),this.value=e.value}getProps(){return p(p({},this.cellEditorParams),{},{initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange})}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){lfe(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){var t;this.componentInstance=e,null===(t=this.resolveInstanceCreated)||void 0===t||t.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(e){this.value=e,this.refreshProps()}},Ofe=(0,o.memo)(e=>{const[t,i]=(0,o.useState)(),n=(0,o.useContext)(Wme),{context:s,popupSvc:r,gos:a,editSvc:l}=n,{editDetails:d,cellCtrl:c,eParentCell:u}=e;return(e=>{const t=(0,o.useRef)(e),i=(0,o.useRef)(),n=(0,o.useRef)(!1),s=(0,o.useRef)(!1),[,r]=(0,o.useState)(0);n.current&&(s.current=!0),(0,o.useEffect)(()=>(n.current||(i.current=t.current(),n.current=!0),r(e=>e+1),()=>{var e;s.current&&(null===(e=i.current)||void 0===e||e.call(i))}),[])})(()=>{const{compDetails:t}=d,n=a.get("stopEditingWhenCellsLoseFocus");let o,h;if(!s.isDestroyed()){var p,g;h=s.createBean(l.createPopupEditorWrapper(t.params));const a=h.getGui();if(e.jsChildComp){const t=e.jsChildComp.getGui();t&&a.appendChild(t)}const{column:m,rowNode:f}=c,v={column:m,rowNode:f,type:"popupCellEditor",eventSource:u,ePopup:a,position:d.popupPosition,keepWithinBounds:!0},y=null===r||void 0===r?void 0:r.positionPopupByComponent.bind(r,v),b=null===r||void 0===r?void 0:r.addPopup({modal:n,eChild:a,closeOnEsc:!0,closedCallback:()=>{c.onPopupEditorClosed()},anchorToElement:u,positionCallback:y,ariaOwns:u});o=b?b.hideFunc:void 0,i(h),null===(p=e.jsChildComp)||void 0===p||null===(g=p.afterGuiAttached)||void 0===g||g.call(p)}return()=>{var e;null===(e=o)||void 0===e||e(),s.destroyBean(h)}}),(0,o.useLayoutEffect)(()=>()=>{c.isCellFocused()&&null!==t&&void 0!==t&&t.getGui().contains(Uie(n))&&u.focus({preventScroll:!0})},[t]),t&&e.wrappedContent?(0,Gme.createPortal)(e.wrappedContent,t.getGui()):null}),Ffe=(e,t,i)=>e.compProxy?((e,t,i)=>{const{compProxy:n}=e;i(n);const s=n.getProps(),r=Zme(t);return o.createElement(nfe.Provider,{value:{setMethods:e=>n.setMethods(e)}},r?o.createElement(t,p({},s)):o.createElement(t,p(p({},s),{},{ref:e=>n.setRef(e)})))})(e,t,i):o.createElement(t,p(p({},e.compDetails.params),{},{ref:i})),zfe=function(e,t,i,n,s,r){let a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];const{context:l}=(0,o.useContext)(Wme),d=(0,o.useCallback)(()=>{const e=s.current;if(!e)return;const t=e.getGui();t&&t.parentElement&&t.remove(),l.destroyBean(e),s.current=void 0},[]);(0,o.useEffect)(()=>{const n=null!=e&&!a,o=(null===e||void 0===e?void 0:e.compDetails)&&!e.compDetails.componentFromFramework;if(!(n&&o&&!(t&&null==i)))return void d();const l=e.compDetails;if(s.current){const t=s.current,i=!!(null!=t.refresh&&0==e.force)&&t.refresh(l.params);if(!0===i||void 0===i)return;d()}l.newAgStackInstance().then(e=>{if(!e)return;const n=e.getGui();if(!n)return;(t?i:r.current).appendChild(n),s.current=e})},[e,t,n,a]),(0,o.useEffect)(()=>d,[])},Bfe=e=>{var t;let{cellCtrl:i,parent:n}=e;const s=(0,o.useRef)(),r=(0,o.useMemo)(()=>{const{loadingComp:e}=i.getDeferLoadingCellRenderer();return e?{value:void 0,compDetails:e,force:!1}:void 0},[i]);if(zfe(r,!1,void 0,1,s,n),null!==r&&void 0!==r&&null!==(t=r.compDetails)&&void 0!==t&&t.componentFromFramework){const e=r.compDetails.componentClass;return o.createElement(e,p({},r.compDetails.params))}return o.createElement(o.Fragment,null)},Vfe=(0,o.memo)(e=>{let{cellCtrl:t,printLayout:i,editingCell:n}=e;const s=(0,o.useContext)(Wme),{context:r}=s,{column:{colIdSanitised:a},instanceId:l}=t,d=(0,o.useRef)(),[c,u]=(0,o.useState)(()=>t.isCellRenderer()?void 0:{compDetails:void 0,value:t.getValueToDisplay(),force:!1}),[h,g]=(0,o.useState)(),[m,f]=(0,o.useState)(1),[v,y]=(0,o.useState)(),[b,x]=(0,o.useState)(!1),[C,S]=(0,o.useState)(!1),[w,M]=(0,o.useState)(!1),[k,D]=(0,o.useState)(),I=(0,o.useMemo)(()=>t.isForceWrapper(),[t]),A=(0,o.useMemo)(()=>t.getCellAriaRole(),[t]),L=(0,o.useRef)(null),N=(0,o.useRef)(null),T=(0,o.useRef)(null),R=(0,o.useRef)(),E=(0,o.useRef)(),P=(0,o.useRef)(),O=(0,o.useRef)([]),F=(0,o.useRef)(),z=(0,o.useRef)(),[B,V]=(0,o.useState)(0),G=(0,o.useCallback)(e=>{z.current=e,V(e=>e+1)},[]),H=null!=c&&(b||w||C)&&(null==h||!!h.popup),j=I||H,W=(0,o.useMemo)(()=>t.getCellValueClass(),[t]),_=(0,o.useCallback)(e=>{if(E.current=e,e){const i=e.isCancelBeforeStart&&e.isCancelBeforeStart();setTimeout(()=>{i?(t.stopEditing(!0),t.focusCell(!0)):(t.cellEditorAttached(),t.enableEditorTooltipFeature(e))})}},[t]),K=(0,o.useRef)();K.current||(K.current=new dae(()=>L.current));const U=!!h&&!h.popup;zfe(c,j,z.current,B,R,L,U);const Y=(0,o.useRef)();(0,o.useLayoutEffect)(()=>{var e,t;const i=Y.current,n=c;if(Y.current=c,null==i||null==i.compDetails||null==n||null==n.compDetails)return;null===(e=F.current)||void 0===e||e.refreshVisibility();const o=i.compDetails,s=n.compDetails;if(o.componentClass!=s.componentClass)return;if(null==(null===(t=T.current)||void 0===t?void 0:t.refresh))return;1!=T.current.refresh(s.params)&&f(e=>e+1)},[c]),(0,o.useLayoutEffect)(()=>{if(!(h&&!h.compDetails.componentFromFramework)||r.isDestroyed())return;const e=h.compDetails,i=!0===h.popup,n=e.newAgStackInstance();return n.then(e=>{if(!e)return;const t=e.getGui();if(_(e),!i){var n;const i=(I?P:L).current;null===i||void 0===i||i.appendChild(t),null===(n=e.afterGuiAttached)||void 0===n||n.call(e)}D(e)}),()=>{n.then(e=>{const i=e.getGui();t.disableEditorTooltipFeature(),r.destroyBean(e),_(void 0),D(void 0),null===i||void 0===i||i.remove()})}},[h]);const $=(0,o.useCallback)(e=>{if(P.current=e,!e||r.isDestroyed()||!t.isAlive()){const e=O.current;O.current=[];for(const t of e)t();return}let i;const n=t=>{t&&(e.insertAdjacentElement("afterbegin",t.getGui()),O.current.push(()=>{zne(t.getGui()),r.destroyBean(t),F.current===i&&(F.current=void 0)}))};b&&n(t.createSelectionCheckbox()),w&&n(t.createDndSource()),C&&(i=t.createRowDragComp(),F.current=i,i&&(n(i),i.refreshVisibility()))},[t,r,w,C,b]),Z=(0,o.useCallback)(()=>{var e;const s=!t.isCellSpanning()||N.current,a=L.current;if(!a||!s||!t||!t.isAlive()||r.isDestroyed())return void(d.current=r.destroyBean(d.current));d.current=r.createBean(new rae);const l={toggleCss:(e,t)=>K.current.toggleCss(e,t),setUserStyles:e=>y(e),getFocusableElement:()=>L.current,setIncludeSelection:e=>x(e),setIncludeRowDrag:e=>S(e),setIncludeDndSource:e=>M(e),getCellEditor:()=>{var e;return null!==(e=E.current)&&void 0!==e?e:null},getCellRenderer:()=>{var e;return null!==(e=T.current)&&void 0!==e?e:R.current},getParentOfValue:()=>{var e,t;return null!==(e=null!==(t=z.current)&&void 0!==t?t:P.current)&&void 0!==e?e:L.current},setRenderDetails:(e,i,n)=>{var s;const r=()=>{u(t=>(null===t||void 0===t?void 0:t.compDetails)!==e||(null===t||void 0===t?void 0:t.value)!==i||(null===t||void 0===t?void 0:t.force)!==n?{value:i,compDetails:e,force:n}:t)};if(null!==e&&void 0!==e&&null!==(s=e.params)&&void 0!==s&&s.deferRender&&!t.rowNode.group){const{loadingComp:e,onReady:i}=t.getDeferLoadingCellRenderer();if(e)return u({value:void 0,compDetails:e,force:!1}),void i.then(()=>{return e=r,void(qme?e():o.startTransition(e));var e})}r()},setEditDetails:(e,i,n,o)=>{if(e){let t;e.componentFromFramework&&(o?t=new Pfe(e.params,()=>f(e=>e+1)):Mfe()),g({compDetails:e,popup:i,popupPosition:n,compProxy:t}),i||u(void 0)}else{t.hasBrowserFocus()&&l.getFocusableElement().focus({preventScroll:!0}),E.current=void 0,g(void 0)}},refreshEditStyles:(e,t)=>{if(!L.current)return;const{current:i}=K;i.toggleCss("ag-cell-value",!j),i.toggleCss("ag-cell-inline-editing",!!e&&!t),i.toggleCss("ag-cell-popup-editing",!!e&&!!t),i.toggleCss("ag-cell-not-inline-editing",!e||!!t)}},c=P.current||void 0;t.setComp(l,a,null!==(e=N.current)&&void 0!==e?e:void 0,c,i,n,d.current)},[]),X=(0,o.useCallback)(e=>{L.current=e,Z()},[]),q=(0,o.useCallback)(e=>{N.current=e,Z()},[]),Q=(0,o.useMemo)(()=>{var e;return!!((null===c||void 0===c||null===(e=c.compDetails)||void 0===e?void 0:e.componentFromFramework)&&Zme(c.compDetails.componentClass))},[c]);(0,o.useLayoutEffect)(()=>{if(!L.current)return;const{current:e}=K;e.toggleCss("ag-cell-value",!j),e.toggleCss("ag-cell-inline-editing",!!h&&!h.popup),e.toggleCss("ag-cell-popup-editing",!!h&&!!h.popup),e.toggleCss("ag-cell-not-inline-editing",!h||!!h.popup)});const J=()=>{const{compDetails:e,value:i}=c;var n,s;if(!e)return null!==(n=null===i||void 0===i||null===(s=i.toString)||void 0===s?void 0:s.call(i))&&void 0!==n?n:i;if(e.componentFromFramework){const i=e.componentClass;return o.createElement(o.Suspense,{fallback:o.createElement(Bfe,{cellCtrl:t,parent:L})},Q?o.createElement(i,p(p({},e.params),{},{key:m})):o.createElement(i,p(p({},e.params),{},{key:m,ref:T})))}},ee=()=>{const e=()=>null==c?null:j?o.createElement("span",{role:"presentation",id:"cell-".concat(l),className:W,ref:G},J()):J(),i=e=>((e,t,i,n,s)=>{const r=e.compDetails,a=r.componentClass,l=r.componentFromFramework&&!e.popup,d=r.componentFromFramework&&e.popup,c=!r.componentFromFramework&&e.popup;return l?Ffe(e,a,t):d?o.createElement(Ofe,{editDetails:e,cellCtrl:n,eParentCell:i,wrappedContent:Ffe(e,a,t)}):c&&s?o.createElement(Ofe,{editDetails:e,cellCtrl:n,eParentCell:i,jsChildComp:s}):null})(e,_,L.current,t,k);return null!=h?h.popup?o.createElement(o.Fragment,null,e(),i(h)):i(h):e()},te=()=>o.createElement("div",{ref:X,style:v,role:A,"col-id":a},j?o.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:$},ee()):ee());return t.isCellSpanning()?o.createElement("div",{ref:q,className:"ag-spanned-cell-wrapper",role:"presentation"},te()):te()}),Gfe=(0,o.memo)(e=>{let{rowCtrl:t,containerType:i}=e;const{context:n,gos:s,editSvc:r}=(0,o.useContext)(Wme),a="default"===(0,o.useContext)(_me),l=(0,o.useRef)(),d=(0,o.useRef)(t.getDomOrder()),c=t.isFullWidth(),u=t.rowNode.displayed,[h,g]=(0,o.useState)(()=>u?t.rowNode.getRowIndexString():null),[m,f]=(0,o.useState)(()=>t.rowId),[v,y]=(0,o.useState)(()=>t.businessKey),[b,x]=(0,o.useState)(()=>t.rowStyles),C=(0,o.useRef)(null),[S,w]=(0,o.useState)(()=>null),[M,k]=(0,o.useState)(),[D,I]=(0,o.useState)(()=>u?t.getInitialRowTop(i):void 0),[A,L]=(0,o.useState)(()=>u?t.getInitialTransform(i):void 0),N=(0,o.useRef)(null),T=(0,o.useRef)(),R=(0,o.useRef)(),E=(0,o.useRef)(!1),[P,O]=(0,o.useState)(0);(0,o.useEffect)(()=>{var e;if(E.current||!M||P>10)return;const i=null===(e=N.current)||void 0===e?void 0:e.firstChild;i?(t.setupDetailRowAutoHeight(i),E.current=!0):O(e=>e+1)},[M,P]);const F=(0,o.useRef)();F.current||(F.current=new dae(()=>N.current));const z=(0,o.useRef)(()=>{}),B=(0,o.useCallback)(e=>(z.current=e,()=>{z.current=()=>{}}),[]),V=(G=B,H=()=>C.current,j=[],o.useSyncExternalStore?o.useSyncExternalStore(G,H):j);var G,H,j;const W=a?V:S,_=(0,o.useCallback)(e=>{if(N.current=e,l.current=e?n.createBean(new rae):n.destroyBean(l.current),!e)return void t.unsetComp(i);if(!t.isAlive()||n.isDestroyed())return;const o={setTop:I,setTransform:L,toggleCss:(e,t)=>F.current.toggleCss(e,t),setDomOrder:e=>d.current=e,setRowIndex:g,setRowId:f,setRowBusinessKey:y,setUserStyles:x,setCellCtrls:(e,t)=>{const i=C.current,n=efe(i,e,d.current);n!==i&&(C.current=n,a?z.current():Jme(t,()=>w(n)))},showFullWidth:e=>{R.current=e.params,k(e)},getFullWidthCellRenderer:()=>T.current,getFullWidthCellRendererParams:()=>R.current,refreshFullWidth:e=>{const t=e();return R.current=t,Z.current?(k(e=>p(p({},e),{},{params:t})),!0):!(!T.current||!T.current.refresh)&&T.current.refresh(t)}};t.setComp(o,e,i,l.current)},[]);(0,o.useLayoutEffect)(()=>Kme(M,n,N.current,T),[M]);const K=(0,o.useMemo)(()=>{const e={top:D,transform:A};return Object.assign(e,b),e},[D,A,b]),U=c&&(null===M||void 0===M?void 0:M.componentFromFramework),Y=!c&&null!=W,$=(0,o.useMemo)(()=>!!((null===M||void 0===M?void 0:M.componentFromFramework)&&Zme(M.componentClass)),[M]),Z=(0,o.useRef)(!1);(0,o.useEffect)(()=>{Z.current=$&&!!M&&!!s.get("reactiveCustomComponents")},[$,M]);return o.createElement("div",{ref:_,role:"row",style:K,"row-index":h,"row-id":m,"row-business-key":v},Y?null===W||void 0===W?void 0:W.map(e=>{var i;return o.createElement(Vfe,{cellCtrl:e,editingCell:null!==(i=null===r||void 0===r?void 0:r.isEditing(e,{withOpenEditor:!0}))&&void 0!==i&&i,printLayout:t.printLayout,key:e.instanceId})}):U?(()=>{const e=M.componentClass;return $?o.createElement(e,p({},M.params)):o.createElement(e,p(p({},M.params),{},{ref:T}))})():null)}),Hfe=(0,o.memo)(e=>{let{name:t}=e;const{context:i,gos:n}=(0,o.useContext)(Wme),s=(0,o.useMemo)(()=>jce(t),[t]),r=(0,o.useRef)(null),a=(0,o.useRef)(null),l=(0,o.useRef)(null),d=(0,o.useRef)([]),c=(0,o.useRef)([]),[u,h]=(0,o.useState)(()=>[]),p=!!n.get("enableCellSpan")&&!!s.getSpannedRowCtrls,g=(0,o.useRef)([]),m=(0,o.useRef)([]),[f,v]=(0,o.useState)(()=>[]),y=(0,o.useRef)(!1),b=(0,o.useRef)(),x=(0,o.useMemo)(()=>Yme("ag-viewport",Vce(t)),[t]),C=(0,o.useMemo)(()=>Yme(Gce(t)),[t]),S=(0,o.useMemo)(()=>Yme("ag-spanning-container",Hce(t)),[t]),w="center"===s.type||p;Efe(" AG Row Container "+t+" ",w?r:a);const M=(0,o.useCallback)(()=>{const e=!w||null!=r.current,t=null!=a.current,i=!p||null!=l.current;return e&&t&&i},[]),k=(0,o.useCallback)(()=>null==r.current&&null==a.current&&null==l.current,[]),D=(0,o.useCallback)(()=>{if(k()&&(b.current=i.destroyBean(b.current)),!i.isDestroyed()&&M()){var e;const n=e=>{const t=efe(c.current,d.current,y.current);t!==c.current&&(c.current=t,Jme(e,()=>h(t)))},o=e=>{const t=efe(m.current,g.current,y.current);t!==m.current&&(m.current=t,Jme(e,()=>v(t)))},s={setHorizontalScroll:e=>{r.current&&(r.current.scrollLeft=e)},setViewportHeight:e=>{r.current&&(r.current.style.height=e)},setRowCtrls:e=>{let{rowCtrls:t,useFlushSync:i}=e;const o=!!i&&d.current.length>0&&t.length>0;d.current=t,n(o)},setSpannedRowCtrls:(e,t)=>{const i=!!t&&g.current.length>0&&e.length>0;g.current=e,o(i)},setDomOrder:e=>{y.current!=e&&(y.current=e,n(!1))},setContainerWidth:e=>{a.current&&(a.current.style.width=e)},setOffsetTop:e=>{a.current&&(a.current.style.transform="translateY(".concat(e,")"))}};b.current=i.createBean(new qce(t)),b.current.setComp(s,a.current,null!==(e=l.current)&&void 0!==e?e:void 0,r.current)}},[M,k]),I=(0,o.useCallback)(e=>{a.current=e,D()},[D]),A=(0,o.useCallback)(e=>{l.current=e,D()},[D]),L=(0,o.useCallback)(e=>{r.current=e,D()},[D]),N=()=>o.createElement("div",{className:C,ref:I,role:w?"presentation":"rowgroup"},u.map(e=>o.createElement(Gfe,{rowCtrl:e,containerType:s.type,key:e.instanceId})));if(!w)return N();return o.createElement("div",{className:x,ref:L,role:"rowgroup"},N(),p?o.createElement("div",{className:S,ref:A,role:"presentation"},f.map(e=>o.createElement(Gfe,{rowCtrl:e,containerType:s.type,key:e.instanceId}))):null)}),jfe=(0,o.memo)(()=>{const e=(0,o.useContext)(Wme),{context:t,overlays:i}=e,[n,s]=(0,o.useState)(""),[r,a]=(0,o.useState)(0),[l,d]=(0,o.useState)(0),[c,u]=(0,o.useState)("0px"),[h,p]=(0,o.useState)("0px"),[g,m]=(0,o.useState)("100%"),[f,v]=(0,o.useState)("0px"),[y,b]=(0,o.useState)("0px"),[x,C]=(0,o.useState)("100%"),[S,w]=(0,o.useState)(!0),[M,k]=(0,o.useState)(!0),[D,I]=(0,o.useState)(null),[A,L]=(0,o.useState)(""),[N,T]=(0,o.useState)(null),[R,E]=(0,o.useState)("ag-layout-normal"),P=(0,o.useRef)();P.current||(P.current=new dae(()=>O.current));const O=(0,o.useRef)(null),F=(0,o.useRef)(null),z=(0,o.useRef)(null),B=(0,o.useRef)(null),V=(0,o.useRef)(null),G=(0,o.useRef)(null),H=(0,o.useRef)(null),j=(0,o.useRef)([]),W=(0,o.useRef)([]);Efe(" AG Grid Body ",O),Efe(" AG Pinned Top ",F),Efe(" AG Sticky Top ",z),Efe(" AG Middle ",G),Efe(" AG Pinned Bottom ",H);const _=(0,o.useCallback)(n=>{if(O.current=n,!n||t.isDestroyed()){j.current=t.destroyBeans(j.current);for(const e of W.current)e();return void(W.current=[])}const o=(e,t)=>{e.appendChild(t),W.current.push(()=>t.remove())},r=(e,i,n)=>{o(e,document.createComment(n)),o(e,(e=>{const i=t.createBean(new e);return j.current.push(i),i})(i).getGui())};r(n,nue," AG Fake Horizontal Scroll ");const l=null===i||void 0===i?void 0:i.getOverlayWrapperCompClass();l&&r(n,l," AG Overlay Wrapper "),V.current&&r(V.current,sue," AG Fake Vertical Scroll ");const c={setRowAnimationCssOnBodyViewport:s,setColumnCount:e=>{O.current&&gne(O.current,e)},setRowCount:e=>{O.current&&hne(O.current,e)},setTopHeight:a,setBottomHeight:d,setStickyTopHeight:u,setStickyTopTop:p,setStickyTopWidth:m,setTopInvisible:w,setBottomInvisible:k,setColumnMovingCss:(e,t)=>P.current.toggleCss(e,t),updateLayoutClasses:E,setAlwaysVerticalScrollClass:I,setPinnedTopBottomOverflowY:L,setCellSelectableCss:(e,t)=>T(t?e:null),setBodyViewportWidth:e=>{G.current&&(G.current.style.width=e)},registerBodyViewportResizeListener:t=>{if(G.current){const i=Xne(e,G.current,t);W.current.push(()=>i())}},setStickyBottomHeight:v,setStickyBottomBottom:b,setStickyBottomWidth:C,setGridRootRole:e=>n.setAttribute("role",e)},h=t.createBean(new Jce);j.current.push(h),h.setComp(c,n,G.current,F.current,H.current,z.current,B.current)},[]),K=(0,o.useMemo)(()=>Yme("ag-root","ag-unselectable",R),[R]),U=(0,o.useMemo)(()=>Yme("ag-body-viewport",n,R,D,N),[n,R,D,N]),Y=(0,o.useMemo)(()=>Yme("ag-body",R),[R]),$=(0,o.useMemo)(()=>Yme("ag-floating-top",S?"ag-invisible":null,N),[N,S]),Z=(0,o.useMemo)(()=>Yme("ag-sticky-top",N),[N]),X=(0,o.useMemo)(()=>Yme("ag-sticky-bottom","0px"===f?"ag-invisible":null,N),[N,f]),q=(0,o.useMemo)(()=>Yme("ag-floating-bottom",M?"ag-invisible":null,N),[N,M]),Q=(0,o.useMemo)(()=>({height:r,minHeight:r,overflowY:A}),[r,A]),J=(0,o.useMemo)(()=>({height:c,top:h,width:g}),[c,h,g]),ee=(0,o.useMemo)(()=>({height:f,bottom:y,width:x}),[f,y,x]),te=(0,o.useMemo)(()=>({height:l,minHeight:l,overflowY:A}),[l,A]),ie=e=>o.createElement(Hfe,{name:e,key:"".concat(e,"-container")}),ne=e=>{let{section:t,children:i,className:n,style:s}=e;return o.createElement("div",{ref:t,className:n,role:"presentation",style:s},i.map(ie))};return o.createElement("div",{ref:_,className:K},o.createElement(Rfe,null),ne({section:F,className:$,style:Q,children:["topLeft","topCenter","topRight","topFullWidth"]}),o.createElement("div",{className:Y,ref:V,role:"presentation"},ne({section:G,className:U,children:["left","center","right","fullWidth"]})),ne({section:z,className:Z,style:J,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),ne({section:B,className:X,style:ee,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),ne({section:H,className:q,style:te,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))}),Wfe=(0,o.forwardRef)((e,t)=>{const{children:i,eFocusableElement:n,onTabKeyDown:s,gridCtrl:r,forceFocusOutWhenTabGuardsAreEmpty:a,isEmpty:l}=e,{context:d}=(0,o.useContext)(Wme),c=(0,o.useRef)(null),u=(0,o.useRef)(null),h=(0,o.useRef)(),p=e=>{const t=null==e?void 0:parseInt(e,10).toString();for(const o of[c,u]){var i,n;if(void 0===t)null===(i=o.current)||void 0===i||i.removeAttribute("tabindex");else null===(n=o.current)||void 0===n||n.setAttribute("tabindex",t)}};(0,o.useImperativeHandle)(t,()=>({forceFocusOutOfContainer(e){var t;null===(t=h.current)||void 0===t||t.forceFocusOutOfContainer(e)}}));const g=(0,o.useCallback)(()=>{const e=c.current,t=u.current;if(!e&&!t||d.isDestroyed())h.current=d.destroyBean(h.current);else if(e&&t){const i={setTabIndex:p};h.current=d.createBean(new ihe({comp:i,eTopGuard:e,eBottomGuard:t,eFocusableElement:n,onTabKeyDown:s,forceFocusOutWhenTabGuardsAreEmpty:a,focusInnerElement:e=>r.focusInnerElement(e),isEmpty:l}))}},[]),m=(0,o.useCallback)(e=>{c.current=e,g()},[g]),f=(0,o.useCallback)(e=>{u.current=e,g()},[g]),v=e=>{const t="top"===e?lle:dle;return o.createElement("div",{className:"".concat(ale," ").concat(t),role:"presentation",ref:"top"===e?m:f})};return o.createElement(o.Fragment,null,v("top"),i,v("bottom"))}),_fe=(0,o.memo)(Wfe),Kfe=(0,o.memo)(e=>{let{context:t}=e;const[i,n]=(0,o.useState)(""),[s,r]=(0,o.useState)(""),[a,l]=(0,o.useState)(null),[d,c]=(0,o.useState)(null),[u,h]=(0,o.useState)(!1),[p,g]=(0,o.useState)(),m=(0,o.useRef)(),f=(0,o.useRef)(null),v=(0,o.useRef)(),[y,b]=(0,o.useState)(null),x=(0,o.useRef)(()=>{}),C=(0,o.useRef)(),S=(0,o.useRef)([]),w=(0,o.useCallback)(()=>{},[]);Efe(" AG Grid ",f);const M=(0,o.useCallback)(e=>{if(f.current=e,m.current=e?t.createBean(new dhe):t.destroyBean(m.current),!e||t.isDestroyed())return;const i=m.current;x.current=i.focusInnerElement.bind(i);const o={destroyGridUi:()=>{},setRtlClass:n,forceFocusOutOfContainer:e=>{var t,i;e||null===(t=C.current)||void 0===t||!t.isDisplayed()?null===(i=v.current)||void 0===i||i.forceFocusOutOfContainer(e):C.current.forceFocusOutOfContainer(e)},updateLayoutClasses:r,getFocusableContainers:()=>{var e;const t=[],i=null===(e=f.current)||void 0===e?void 0:e.querySelector(".ag-root");i&&t.push({getGui:()=>i});for(const n of S.current)n.isDisplayed()&&t.push(n);return t},setCursor:l,setUserSelect:c};i.setComp(o,e,e),h(!0)},[]);(0,o.useEffect)(()=>{const e=m.current,i=f.current;if(!p||!e||!y||!i||t.isDestroyed())return;const n=[],{watermarkSelector:o,paginationSelector:s,sideBarSelector:r,statusBarSelector:a,gridHeaderDropZonesSelector:l}=e.getOptionalSelectors(),d=[];if(l){const e=t.createBean(new l.component),o=e.getGui();i.insertAdjacentElement("afterbegin",o),d.push(o),n.push(e)}if(r){const e=t.createBean(new r.component),i=e.getGui(),o=y.querySelector(".ag-tab-guard-bottom");o&&(o.insertAdjacentElement("beforebegin",i),d.push(i)),n.push(e),S.current.push(e)}const c=e=>{const o=t.createBean(new e),s=o.getGui();return i.insertAdjacentElement("beforeend",s),d.push(s),n.push(o),o};if(a&&c(a.component),s){const e=c(s.component);C.current=e,S.current.push(e)}return o&&c(o.component),()=>{t.destroyBeans(n);for(const e of d)e.remove()}},[p,y,t]);const k=(0,o.useMemo)(()=>Yme("ag-root-wrapper",i,s),[i,s]),D=(0,o.useMemo)(()=>Yme("ag-root-wrapper-body","ag-focus-managed",s),[s]),I=(0,o.useMemo)(()=>({userSelect:null!=d?d:"",WebkitUserSelect:null!=d?d:"",cursor:null!=a?a:""}),[d,a]),A=(0,o.useCallback)(e=>{v.current=e,g(null!==e)},[]),L=(0,o.useCallback)(()=>{var e;return!(null!==(e=m.current)&&void 0!==e&&e.isFocusable())},[]);return o.createElement("div",{ref:M,className:k,style:I,role:"presentation"},o.createElement("div",{className:D,ref:b,role:"presentation"},u&&y&&!t.isDestroyed()&&o.createElement(Wme.Provider,{value:t.getBeans()},o.createElement(_fe,{ref:A,eFocusableElement:y,onTabKeyDown:w,gridCtrl:m.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:L},o.createElement(jfe,null)))))}),Ufe=class extends yoe{postConstruct(){if(this.beans.colAutosize){const e=this.queueResizeOperationsForTick.bind(this);this.addManagedEventListeners({rowExpansionStateChanged:e,expandOrCollapseAll:e,cellValueChanged:e,rowNodeDataChanged:e,rowDataUpdated:e})}}queueResizeOperationsForTick(){const e=this.beans.colAutosize;e.shouldQueueResizeOperations=!0,setTimeout(()=>{e.processResizeOperations()},0)}areHeaderCellsRendered(){return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(e=>e.areCellsRendered()))}areCellsRendered(){return this.beans.rowRenderer.getAllRowCtrls().every(e=>e.isRowRendered()&&e.getAllCellCtrls().every(e=>!!e.eGui))}},Yfe={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},$fe=p({gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0},Yfe),Zfe=new Set(Object.keys($fe)),Xfe=new Set(Object.keys(Yfe)),qfe=e=>{var t,i;const n=(0,o.useRef)(),s=(0,o.useRef)(null),r=(0,o.useRef)(null),a=(0,o.useRef)([]),l=(0,o.useRef)([]),d=(0,o.useRef)(e),c=(0,o.useRef)(),u=(0,o.useRef)(),h=(0,o.useRef)(!1),[g,m]=(0,o.useState)(void 0),[,f]=(0,o.useState)(0),v=(0,o.useRef)(),y=e=>{var t;const i=null===(t=s.current)||void 0===t?void 0:t.classList,n=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().split(/\s+/g).filter(Boolean)};if(v.current!==e){for(const e of n(v.current))null!==i&&void 0!==i&&i.contains(e)&&i.remove(e);for(const t of n(e))null!==i&&void 0!==i&&i.contains(t)||null===i||void 0===i||i.add(t);v.current=e}};(0,o.useLayoutEffect)(()=>{y(e.className)},[e.className]);const b=(0,o.useCallback)(t=>{var i;if(s.current=t,y(e.className),!t){for(const e of a.current)e();return void(a.current.length=0)}const o=e.modules||[];r.current||(r.current=new kfe(()=>f(e=>e+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),a.current.push(()=>{var e;null===(e=r.current)||void 0===e||e.destroy(),r.current=null}));const d=function(e,t,i){"object"!==typeof e&&(e={});const n=p({},e);for(const o of i){const e=t[o];"undefined"!==typeof e&&(n[o]=e)}return n}(e.gridOptions,e,Object.keys(e).filter(e=>!Zfe.has(e))),g=new eve(()=>{if(h.current){const e=()=>{var e;return null!==(e=c.current)&&void 0!==e&&e.shouldQueueUpdates()?void 0:l.current.shift()};let t=e();for(;t;)t(),t=e()}});c.current=g;const v=new Ufe,b={providedBeanInstances:{frameworkCompWrapper:new Qfe(r.current,d),renderStatus:v},modules:o,frameworkOverrides:g,setThemeOnGridDiv:!0},x=new sme;null!==(i=d.gridId)&&void 0!==i||(d.gridId=u.current),n.current=x.create(t,d,t=>{m(t),t.createBean(v),a.current.push(()=>{t.destroy()}),t.getBean("ctrlsSvc").whenReady({addDestroyFunc:e=>{a.current.push(e)}},()=>{if(t.isDestroyed())return;const i=n.current;var o;i&&(null===(o=e.passGridApi)||void 0===o||o.call(e,i))})},e=>{e.getBean("ctrlsSvc").whenReady({addDestroyFunc:e=>{a.current.push(e)}},()=>{for(const e of l.current)e();l.current.length=0,h.current=!0})},b),a.current.push(()=>{n.current=void 0}),n.current&&(u.current=n.current.getGridId())},[]),x=(0,o.useMemo)(()=>p({height:"100%"},e.containerStyle||{}),[e.containerStyle]),C=(0,o.useCallback)(e=>{var t;!h.current||null!==(t=c.current)&&void 0!==t&&t.shouldQueueUpdates()?l.current.push(e):e()},[]);(0,o.useEffect)(()=>{const t=function(e,t){const i={};for(const n of Object.keys(t)){if(Zfe.has(n)){Xfe.has(n)&&lse(274,{prop:n});continue}const o=t[n];e[n]!==o&&(i[n]=o)}return i}(d.current,e);d.current=e,C(()=>{n.current&&function(e,t){if(!e)return;const i={};let n=!1;for(const r of Object.keys(e))i[r]=e[r],n=!0;if(!n)return;const o={type:"gridOptionsChanged",options:i};t.dispatchEvent(o);const s=p({type:"componentStateChanged"},i);t.dispatchEvent(s)}(t,n.current)})},[e]);const S=o.useSyncExternalStore&&"legacy"!==Use(e,"renderingMode")?"default":"legacy";return o.createElement("div",{style:x,ref:b},o.createElement(_me.Provider,{value:S},g&&!g.isDestroyed()?o.createElement(Kfe,{key:g.instanceId,context:g}):null,null!==(t=null===(i=r.current)||void 0===i?void 0:i.getPortals())&&void 0!==t?t:null))};var Qfe=class extends lme{constructor(e,t){super(),this.parent=e,this.gridOptions=t}createWrapper(e,t){const i=this.gridOptions;if(Use(i,"reactiveCustomComponents")){const n=(e=>{switch(e){case"filter":return Use(i,"enableFilterHandlers")?mfe:gfe;case"floatingFilterComponent":return Use(i,"enableFilterHandlers")?bfe:yfe;case"dateComponent":return hfe;case"dragAndDropImageComponent":return pfe;case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":return ufe;case"statusPanel":return Sfe;case"toolPanel":return wfe;case"menuItem":return Cfe;case"cellRenderer":return cfe;case"innerHeaderComponent":return xfe}})(t.name);if(n)return new n(e,this.parent,t)}else switch(t.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":Mfe()}const n=!t.cellRenderer&&"toolPanel"!==t.name;return new afe(e,this.parent,t,n)}},Jfe=(0,o.forwardRef)((e,t)=>{const i=(0,o.useContext)(Wme),{registry:n,context:s,gos:r,rowModel:a}=i,[l,d]=(0,o.useState)(()=>new $me),[c,u]=(0,o.useState)(()=>new $me),[h,g]=(0,o.useState)(),[m,f]=(0,o.useState)(),v=(0,o.useRef)(),y=(0,o.useRef)(null),b=(0,o.useRef)(),x=(0,o.useMemo)(()=>{var t;return Zoe(e.api.getGridId(),null!==(t=null===h||void 0===h?void 0:h.rowModelType)&&void 0!==t?t:"clientSide")},[e]),C=(0,o.useMemo)(()=>l.toString()+" ag-details-row",[l]),S=(0,o.useMemo)(()=>c.toString()+" ag-details-grid",[c]);t&&(0,o.useImperativeHandle)(t,()=>({refresh(){var e,t;return null!==(e=null===(t=v.current)||void 0===t?void 0:t.refresh())&&void 0!==e&&e}})),e.template&&lse(230);const w=(0,o.useCallback)(t=>{var o;if(y.current=t,!t||s.isDestroyed())return v.current=s.destroyBean(v.current),void(null===(o=b.current)||void 0===o||o.call(b));const l={toggleCss:(e,t)=>d(i=>i.setClass(e,t)),toggleDetailGridCss:(e,t)=>u(i=>i.setClass(e,t)),setDetailGrid:e=>g(e),setRowData:e=>f(e),getGui:()=>y.current},c=n.createDynamicBean("detailCellRendererCtrl",!0);if(c&&(s.createBean(c),c.init(l,e),v.current=c,r.get("detailRowAutoHeight"))){const n=()=>{if(null==y.current)return;const t=y.current.clientHeight;if(null!=t&&t>0){setTimeout(()=>{e.node.setRowHeight(t),(gse(r)||mse(r))&&a.onRowHeightChanged()},0)}};b.current=Xne(i,t,n),n()}},[]),M=(0,o.useCallback)(e=>{var t;null===(t=v.current)||void 0===t||t.registerDetailWithMaster(e)},[]);return o.createElement("div",{className:C,ref:w},h&&o.createElement(qfe,p(p({className:S},h),{},{modules:x,rowData:m,passGridApi:M})))}),eve=class extends ohe{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:ife,agGroupRowRenderer:ife,agDetailCellRenderer:Jfe},this.wrapIncoming=(e,t)=>{return"ensureVisible"===t?(i=e,Qme||setTimeout(()=>Qme=!1,0),Qme=!0,i()):e();var i}}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return"19"===Xme}},tve=class extends o.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e;for(const t of this.apiListeners)t(e)}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return o.createElement(qfe,p(p({},this.props),{},{passGridApi:this.setGridApi}))}};var ive=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility="5d41402abc4b2a76b9719d911017c592"!=this.md5("hello")}md5cycle(e,t){let i=e[0],n=e[1],o=e[2],s=e[3];i=this.ff(i,n,o,s,t[0],7,-680876936),s=this.ff(s,i,n,o,t[1],12,-389564586),o=this.ff(o,s,i,n,t[2],17,606105819),n=this.ff(n,o,s,i,t[3],22,-1044525330),i=this.ff(i,n,o,s,t[4],7,-176418897),s=this.ff(s,i,n,o,t[5],12,1200080426),o=this.ff(o,s,i,n,t[6],17,-1473231341),n=this.ff(n,o,s,i,t[7],22,-45705983),i=this.ff(i,n,o,s,t[8],7,1770035416),s=this.ff(s,i,n,o,t[9],12,-1958414417),o=this.ff(o,s,i,n,t[10],17,-42063),n=this.ff(n,o,s,i,t[11],22,-1990404162),i=this.ff(i,n,o,s,t[12],7,1804603682),s=this.ff(s,i,n,o,t[13],12,-40341101),o=this.ff(o,s,i,n,t[14],17,-1502002290),n=this.ff(n,o,s,i,t[15],22,1236535329),i=this.gg(i,n,o,s,t[1],5,-165796510),s=this.gg(s,i,n,o,t[6],9,-1069501632),o=this.gg(o,s,i,n,t[11],14,643717713),n=this.gg(n,o,s,i,t[0],20,-373897302),i=this.gg(i,n,o,s,t[5],5,-701558691),s=this.gg(s,i,n,o,t[10],9,38016083),o=this.gg(o,s,i,n,t[15],14,-660478335),n=this.gg(n,o,s,i,t[4],20,-405537848),i=this.gg(i,n,o,s,t[9],5,568446438),s=this.gg(s,i,n,o,t[14],9,-1019803690),o=this.gg(o,s,i,n,t[3],14,-187363961),n=this.gg(n,o,s,i,t[8],20,1163531501),i=this.gg(i,n,o,s,t[13],5,-1444681467),s=this.gg(s,i,n,o,t[2],9,-51403784),o=this.gg(o,s,i,n,t[7],14,1735328473),n=this.gg(n,o,s,i,t[12],20,-1926607734),i=this.hh(i,n,o,s,t[5],4,-378558),s=this.hh(s,i,n,o,t[8],11,-2022574463),o=this.hh(o,s,i,n,t[11],16,1839030562),n=this.hh(n,o,s,i,t[14],23,-35309556),i=this.hh(i,n,o,s,t[1],4,-1530992060),s=this.hh(s,i,n,o,t[4],11,1272893353),o=this.hh(o,s,i,n,t[7],16,-155497632),n=this.hh(n,o,s,i,t[10],23,-1094730640),i=this.hh(i,n,o,s,t[13],4,681279174),s=this.hh(s,i,n,o,t[0],11,-358537222),o=this.hh(o,s,i,n,t[3],16,-722521979),n=this.hh(n,o,s,i,t[6],23,76029189),i=this.hh(i,n,o,s,t[9],4,-640364487),s=this.hh(s,i,n,o,t[12],11,-421815835),o=this.hh(o,s,i,n,t[15],16,530742520),n=this.hh(n,o,s,i,t[2],23,-995338651),i=this.ii(i,n,o,s,t[0],6,-198630844),s=this.ii(s,i,n,o,t[7],10,1126891415),o=this.ii(o,s,i,n,t[14],15,-1416354905),n=this.ii(n,o,s,i,t[5],21,-57434055),i=this.ii(i,n,o,s,t[12],6,1700485571),s=this.ii(s,i,n,o,t[3],10,-1894986606),o=this.ii(o,s,i,n,t[10],15,-1051523),n=this.ii(n,o,s,i,t[1],21,-2054922799),i=this.ii(i,n,o,s,t[8],6,1873313359),s=this.ii(s,i,n,o,t[15],10,-30611744),o=this.ii(o,s,i,n,t[6],15,-1560198380),n=this.ii(n,o,s,i,t[13],21,1309151649),i=this.ii(i,n,o,s,t[4],6,-145523070),s=this.ii(s,i,n,o,t[11],10,-1120210379),o=this.ii(o,s,i,n,t[2],15,718787259),n=this.ii(n,o,s,i,t[9],21,-343485551),e[0]=this.add32(i,e[0]),e[1]=this.add32(n,e[1]),e[2]=this.add32(o,e[2]),e[3]=this.add32(s,e[3])}cmn(e,t,i,n,o,s){return t=this.add32(this.add32(t,e),this.add32(n,s)),this.add32(t<<o|t>>>32-o,i)}ff(e,t,i,n,o,s,r){return this.cmn(t&i|~t&n,e,t,o,s,r)}gg(e,t,i,n,o,s,r){return this.cmn(t&n|i&~n,e,t,o,s,r)}hh(e,t,i,n,o,s,r){return this.cmn(t^i^n,e,t,o,s,r)}ii(e,t,i,n,o,s,r){return this.cmn(i^(t|~n),e,t,o,s,r)}md51(e){const t=e.length,i=[1732584193,-271733879,-1732584194,271733878];let n;for(n=64;n<=e.length;n+=64)this.md5cycle(i,this.md5blk(e.substring(n-64,n)));e=e.substring(n-64);const o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<e.length;n++)o[n>>2]|=e.charCodeAt(n)<<(n%4<<3);if(o[n>>2]|=128<<(n%4<<3),n>55)for(this.md5cycle(i,o),n=0;n<16;n++)o[n]=0;return o[14]=8*t,this.md5cycle(i,o),i}md5blk(e){const t=[];for(let i=0;i<64;i+=4)t[i>>2]=e.charCodeAt(i)+(e.charCodeAt(i+1)<<8)+(e.charCodeAt(i+2)<<16)+(e.charCodeAt(i+3)<<24);return t}rhex(e){const t="0123456789abcdef".split("");let i="",n=0;for(;n<4;n++)i+=t[e>>8*n+4&15]+t[e>>8*n&15];return i}hex(e){for(let t=0;t<e.length;t++)e[t]=this.rhex(e[t]);return e.join("")}md5(e){return this.hex(this.md51(e))}add32(e,t){return this.ieCompatibility?this.add32Compat(e,t):this.add32Std(e,t)}add32Std(e,t){return e+t&4294967295}add32Compat(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}},nve={"01":"GRID","02":"CHARTS","0102":"BOTH"},ove="https://www.ag-grid.com/licensing/",sve=class e{constructor(e){this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=e,this.md5=new ive,this.md5.init()}validateLicense(){const t=this.getLicenseDetails(e.licenseKey),i="AG Grid ".concat("BOTH"===t.currentLicenseType?"and AG Charts ":"","Enterprise"),n=void 0===t.suppliedLicenseType?"":"AG ".concat("BOTH"===t.suppliedLicenseType?"Grid and AG Charts":"GRID"===t.suppliedLicenseType?"Grid":"Charts"," Enterprise");if(t.missing)this.isWebsiteUrl()&&!this.isForceWatermark()||this.outputMissingLicenseKey(i);else if(t.expired){const o=e.getGridReleaseDate(),s=e.formatDate(o);this.outputExpiredKey(t.expiry,s,i,n)}else t.valid?t.isTrial&&t.trialExpired&&this.outputExpiredTrialKey(t.expiry,i,n):this.outputInvalidLicenseKey(!!t.incorrectLicenseType,i,n)}static extractExpiry(t){const i=t.substring(t.lastIndexOf("_")+1,t.length);return new Date(parseInt(e.decode(i),10))}static extractLicenseComponents(t){let i=t.replace(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replace(/\r?\n|\r/g,""),t.length<=32)return{md5:null,license:t,version:null,isTrial:null};const n=i.length-32,o=i.substring(n),s=i.substring(0,n),[r,a,l]=e.extractBracketedInformation(i);return{md5:o,license:s,version:r,isTrial:a,type:l}}getLicenseDetails(t){const i=e.chartsLicenseManager?"BOTH":"GRID";if(null===t||void 0===t||!t.length)return{licenseKey:t,valid:!1,missing:!0,currentLicenseType:i};const n=e.getGridReleaseDate(),{md5:o,license:s,version:r,isTrial:a,type:l}=e.extractLicenseComponents(t);let d,c,u,h=o===this.md5.md5(s)&&!t.includes("For_Trialing_ag-Grid_Only"),p=null,g=!1;function m(){d=p<new Date,c=void 0}if(h&&(p=e.extractExpiry(s),h=!isNaN(p.getTime()),h))switch(c=n>p,r){case"legacy":case"2":a&&m();break;case"3":null!==l&&void 0!==l&&l.length?(u=l,l!==nve["01"]&&l!==nve["0102"]||"BOTH"===i&&"BOTH"!==u?(h=!1,g=!0):a&&m()):h=!1}return h?{licenseKey:t,valid:h,expiry:e.formatDate(p),expired:c,version:r,isTrial:a,trialExpired:d,incorrectLicenseType:g,currentLicenseType:i,suppliedLicenseType:u}:{licenseKey:t,valid:h,incorrectLicenseType:g,currentLicenseType:i,suppliedLicenseType:u}}isDisplayWatermark(){var e;return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!(null===(e=this.watermarkMessage)||void 0===e||!e.length)}getWatermarkMessage(){return this.watermarkMessage||""}getHostname(){const e=(this.document.defaultView||window).location,{hostname:t=""}=e;return t}isForceWatermark(){const e=(this.document.defaultView||window).location,{pathname:t}=e;return!!t&&t.includes("forceWatermark")}isWebsiteUrl(){return null!==this.getHostname().match(/^((?:[\w-]+\.)?ag-grid\.com)$/)}isLocalhost(){return null!==this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)}static formatDate(e){const t=e.getDate(),i=e.getMonth(),n=e.getFullYear();return t+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][i]+" "+n}static getGridReleaseDate(){return new Date(parseInt(e.decode(e.RELEASE_INFORMATION),10))}static decode(t){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n,o,s,r,a,l,d,c="",u=0;const h=t.replace(/[^A-Za-z0-9+/=]/g,"");for(;u<h.length;)r=i.indexOf(h.charAt(u++)),a=i.indexOf(h.charAt(u++)),l=i.indexOf(h.charAt(u++)),d=i.indexOf(h.charAt(u++)),n=r<<2|a>>4,o=(15&a)<<4|l>>2,s=(3&l)<<6|d,c+=String.fromCharCode(n),64!=l&&(c+=String.fromCharCode(o)),64!=d&&(c+=String.fromCharCode(s));return c=e.utf8_decode(c),c}static utf8_decode(e){e=e.replace(/rn/g,"n");let t="";for(let i=0;i<e.length;i++){const n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}static setChartsLicenseManager(e){var t;this.chartsLicenseManager=e,null===(t=this.chartsLicenseManager)||void 0===t||t.setLicenseKey(this.licenseKey,!0)}static setLicenseKey(e){var t;Fie(this.licenseKey)&&this.licenseKey!==e&&nse(Foe,291,void 0,!0,"AG Grid: License Key being set multiple times with different values. This can result in an incorrect license key being used."),this.licenseKey=e,null===(t=this.chartsLicenseManager)||void 0===t||t.setLicenseKey(e,!0)}static extractBracketedInformation(e){if(!e.includes("["))return["legacy",!1,void 0];const t=e.match(/\[(.*?)\]/g).map(e=>e.replace("[","").replace("]",""));if(!t||0===t.length)return["legacy",!1,void 0];const i=1===t.filter(e=>"TRIAL"===e).length,n=t.filter(e=>0===e.indexOf("v"))[0];return[n?n.replace("v",""):"legacy",i,nve[t.filter(e=>nve[e])[0]]]}centerPadAndOutput(e){const t=this.totalMessageLength-e.length;console.error(e.padStart(t/2+e.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";console.error(e.padEnd(this.totalMessageLength-i.length,t)+i)}outputInvalidLicenseKey(e,t,i){e?(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(t," License ")),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput("* Your license key is for ".concat(i," only and does not cover you for ").concat(t,".")," ","*"),this.padAndOutput("* To troubleshoot your license key visit ".concat(ove,".")," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(t," License ")),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid."," ","*"),this.padAndOutput("* To troubleshoot your license key visit ".concat(ove,".")," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(e,t,i){this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(t," License ")),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput("* Your trial only license for ".concat(i," expired on ").concat(e,".")," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(e){this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(e," License ")),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput("* All ".concat(e," features are unlocked for trial.")," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(e,t,i,n){this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(i," License ")),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput("* Your license key works with versions".concat(""==n?"":" of ".concat(n)," released before ").concat(e,".")," ","*"),this.padAndOutput("* The version you are trying to use was released on ".concat(t,".")," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="License Expired"}};sve.RELEASE_INFORMATION="MTc2OTEwMTg5NDA0NQ==";var rve=sve,ave={tag:"div",cls:"ag-watermark",children:[{tag:"div",ref:"eLicenseTextRef",cls:"ag-watermark-text"}]},lve={selector:"AG-WATERMARK",component:class extends hae{constructor(){super(ave),this.eLicenseTextRef=lae,this.registerCSS('.ag-watermark{bottom:20px;color:#9b9b9b;opacity:.7;position:absolute;transition:opacity 1s ease-out 3s;&:before{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDkiIGhlaWdodD0iMzYiIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyMDkgMzYiPjxwYXRoIGZpbGw9IiM5YjliOWIiIGQ9Ik0xOTIuOTkzIDIzLjY1OHYtNy45NDZoLTEzLjU0MWwtNy45NDcgNy45NDZ6TTIwOC4yNSAzLjk1aC0xNi45NzRsLTguMDEgNy45NDdoMjQuOTg0ek0xNjMuNjIyIDMxLjYwNWw0LjA2OS00LjA2OWgxMy43MzJ2Ny45NDdoLTE3LjgwMXoiLz48cGF0aCBmaWxsPSIjOWI5YjliIiBkPSJNMTY2LjYxIDE5Ljc4aDguNzczbDguMDEtNy45NDZIMTY2LjYxek0xNTcuMDExIDMxLjYwNWg2LjYxMWw3Ljg4My03Ljk0N2gtMTQuNDk0ek0xOTEuMjc2IDMuOTVsLTQuMDY4IDQuMDdIMTYxLjI3Vi4wNzJoMzAuMDA2ek0yMC44NCAzMC4yMDZIOC4zNzhsLTIuMTYyIDUuMzRILjc1TDEyLjI1NyA4LjU5Mmg0Ljc2OEwyOC41MyAzNS41NDZoLTUuNTN6bS0xLjcxNy00LjI2TDE0LjYwOSAxNC45NWwtNC41MTQgMTAuOTk4ek0xMDQuNDM3IDE4LjUwOWMxLjU4OS0yLjM1MiA1LjU5NC0yLjYwNyA3LjI0Ny0yLjYwN3Y0LjU3OGMtMi4wMzQgMC00LjA2OS4wNjMtNS4yNzcuOTUzLTEuMjA3Ljg5LTEuODQzIDIuMDk4LTEuODQzIDMuNTZ2MTAuNTUzaC00Ljk1OVYxNS45MDJoNC43Njh6TTExOS4zNzYgMTUuOTAyaC00Ljk1OHYxOS42NDRoNC45NTh6TTExOS4zNzYgNy4xM2gtNC45NTh2NS44NDhoNC45NTh6TTE0My45NzkgNy4xM3YyOC40MTZoLTQuNzY4bC0uMTI3LTIuOTg4YTguMyA4LjMgMCAwIDEtMi42NyAyLjQ4Yy0xLjA4MS41NzItMi40MTYuODktMy45NDIuODktMS4zMzUgMC0yLjYwNi0uMjU1LTMuNjg3LS43LTEuMTQ0LS41MDgtMi4xNjItMS4xNDQtMi45ODgtMi4wMzRhOS42IDkuNiAwIDAgMS0xLjk3MS0zLjE3OWMtLjUwOC0xLjIwNy0uNjk5LTIuNjA2LS42OTktNC4xMzJzLjI1NC0yLjkyNC42OTktNC4xOTZjLjUwOS0xLjI3MSAxLjE0NS0yLjM1MiAxLjk3MS0zLjI0MnMxLjg0NC0xLjU4OSAyLjk4OC0yLjA5OCAyLjM1Mi0uNzYzIDMuNjg3LS43NjNjMS41MjYgMCAyLjc5Ny4yNTUgMy44NzguODI3czEuOTcxIDEuMzM1IDIuNjcgMi40MTZWNy4xOTNoNC45NTl6bS0xMC40MjYgMjQuNTM4YzEuNjUzIDAgMi45MjQtLjU3MiAzLjk0MS0xLjY1M3MxLjUyNi0yLjU0MyAxLjUyNi00LjMyMy0uNTA5LTMuMTc4LTEuNTI2LTQuMzIyYy0xLjAxNy0xLjA4MS0yLjI4OC0xLjY1My0zLjk0MS0xLjY1My0xLjU5IDAtMi45MjUuNTcyLTMuODc4IDEuNjUzLTEuMDE3IDEuMDgtMS41MjYgMi41NDMtMS41MjYgNC4zMjIgMCAxLjc4LjUwOSAzLjE4IDEuNTI2IDQuMjYgMS4wMTcgMS4xNDQgMi4yODggMS43MTYgMy44NzggMS43MTZNNTcuMjAyIDIwLjM1M0g0NC45MzN2NC4yNTloNi45OTNjLS4xOSAyLjE2MS0xLjAxNyAzLjgxNC0yLjQxNiA1LjE1LTEuMzk4IDEuMjctMy4xNzggMS45MDYtNS40NjcgMS45MDYtMS4yNzEgMC0yLjQ4LS4yNTQtMy40OTYtLjY5OWE3IDcgMCAwIDEtMi43MzQtMS45N2MtLjc2My0uODI3LTEuMzM1LTEuODQ0LTEuNzgtMy4wNTJzLS42MzYtMi40OC0uNjM2LTMuOTQyLjE5LTIuNzMzLjYzNi0zLjk0MWMuMzgxLTEuMjA4IDEuMDE3LTIuMTYyIDEuNzgtMy4wNTIuNzYzLS44MjYgMS42NTMtMS40NjIgMi43MzMtMS45N2E5LjEgOS4xIDAgMCAxIDMuNTYtLjdxNC4wMDUgMCA2LjEwMyAxLjkwN2wzLjMwNi0zLjMwNWMtMi40OC0xLjkwNy01LjY1OC0yLjkyNS05LjQwOS0yLjkyNS0yLjA5NyAwLTQuMDA0LjMxOC01LjcyMSAxLjAxOC0xLjcxNi42OTktMy4xNzkgMS41ODktNC4zODYgMi43OTdBMTIuMSAxMi4xIDAgMCAwIDMxLjIgMTYuMjJjLS42MzUgMS43MTctLjk1MyAzLjYyNC0uOTUzIDUuNjU4cy4zMTggMy45NDIgMS4wMTcgNS42NThjLjcgMS43MTcgMS41OSAzLjE3OSAyLjc5NyA0LjM4N2ExMi4xIDEyLjEgMCAwIDAgNC4zODcgMi43OTdjMS43MTYuNyAzLjYyMyAxLjAxNyA1LjY1NyAxLjAxNyAyLjAzNSAwIDMuODc4LS4zMTggNS41MzEtMS4wMTcgMS42NTMtLjcgMy4wNTItMS41OSA0LjE5Ni0yLjc5N3ExLjcxNi0xLjgxMiAyLjY3LTQuMzg3Yy42MzYtMS43MTYuOTU0LTMuNjIzLjk1NC01LjY1OHYtLjgyNmMtLjE5MS0uMTI3LS4yNTUtLjQ0NS0uMjU1LS43TTk1Ljk4MiAyMC4zNTNoLTEyLjI3djQuMjU5aDYuOTkzYy0uMTkgMi4xNjEtMS4wMTcgMy44MTQtMi40MTYgNS4xNS0xLjM5OCAxLjI3LTMuMTc4IDEuOTA2LTUuNDY3IDEuOTA2LTEuMjcxIDAtMi40OC0uMjU0LTMuNDk2LS42OTlhNyA3IDAgMCAxLTIuNzM0LTEuOTdjLS43NjMtLjgyNy0xLjMzNS0xLjg0NC0xLjc4LTMuMDUycy0uNjM2LTIuNDgtLjYzNi0zLjk0Mi4xOS0yLjczMy42MzYtMy45NDFjLjM4MS0xLjIwOCAxLjAxNy0yLjE2MiAxLjc4LTMuMDUyLjc2My0uODI2IDEuNjUzLTEuNDYyIDIuNzM0LTEuOTdhOS4xIDkuMSAwIDAgMSAzLjU2LS43cTQuMDA1IDAgNi4xMDMgMS45MDdsMy4zMDUtMy4zMDVjLTIuNDc5LTEuOTA3LTUuNjU4LTIuOTI1LTkuNDA4LTIuOTI1LTIuMDk4IDAtNC4wMDUuMzE4LTUuNzIyIDEuMDE4LTEuNzE2LjY5OS0zLjE3OCAxLjU4OS00LjM4NiAyLjc5N2ExMi4xIDEyLjEgMCAwIDAtMi43OTcgNC4zODZjLS42MzYgMS43MTctLjk1NCAzLjYyNC0uOTU0IDUuNjU4cy4zMTggMy45NDIgMS4wMTcgNS42NThjLjcgMS43MTcgMS41OSAzLjE3OSAyLjc5NyA0LjM4N2ExMi4xIDEyLjEgMCAwIDAgNC4zODcgMi43OTdjMS43MTYuNyAzLjYyMyAxLjAxNyA1LjY1OCAxLjAxNyAyLjAzNCAwIDMuODc4LS4zMTggNS41My0xLjAxNyAxLjY1My0uNyAzLjA1Mi0xLjU5IDQuMTk2LTIuNzk3cTEuNzE4LTEuODEyIDIuNjctNC4zODdjLjYzNi0xLjcxNi45NTQtMy42MjMuOTU0LTUuNjU4di0uODI2Yy0uMTktLjEyNy0uMjU1LS40NDUtLjI1NS0uNyIvPjwvc3ZnPg==");background-repeat:no-repeat;background-size:170px 40px;content:"";display:block;height:40px;width:170px}}:where(.ag-ltr) .ag-watermark{right:25px}:where(.ag-rtl) .ag-watermark{left:25px}.ag-watermark-text{font-family:Impact,sans-serif;font-size:19px;font-weight:700;opacity:.5}:where(.ag-ltr) .ag-watermark-text{padding-left:.7rem}:where(.ag-rtl) .ag-watermark-text{padding-right:.7rem}')}wireBeans(e){this.licenseManager=e.licenseManager}postConstruct(){const e=this.shouldDisplayWatermark();this.setDisplayed(e),e&&(this.eLicenseTextRef.textContent=this.licenseManager.getWatermarkMessage(),window.setTimeout(()=>this.addCss("ag-opacity-zero"),0),window.setTimeout(()=>this.setDisplayed(!1),5e3))}shouldDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}}};var dve=class extends Wde{constructor(e,t){super(function(e){return{tag:"div",cls:"ag-virtual-list-viewport ag-".concat(e,"-virtual-list-viewport"),role:"presentation",children:[{tag:"div",ref:"eContainer",cls:"ag-virtual-list-container ag-".concat(e,"-virtual-list-container")}]}}((null===t||void 0===t?void 0:t.cssIdentifier)||"default")),this.stopPropagationCallbacks=e,this.renderedRows=new Map,this.rowHeight=20,this.pageSize=-1,this.isScrolling=!1,this.isHeightFromTheme=!0,this.eContainer=lae,this.awaitStableCallbacks=[],this.registerCSS(":where(.ag-virtual-list-viewport) .ag-tab-guard{position:sticky}.ag-virtual-list-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:auto;position:relative;width:100%}.ag-virtual-list-container{overflow:hidden;position:relative}.ag-virtual-list-item{height:var(--ag-list-item-height);position:absolute;width:100%}");const{cssIdentifier:i="default",ariaRole:n="listbox",listName:o,moveItemCallback:s}=t||{};this.cssIdentifier=i,this.ariaRole=n,this.listName=o,this.moveItemCallback=s}postConstruct(){this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e),focusInnerElement:e=>this.focusInnerElement(e),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)},this.stopPropagationCallbacks),this.refreshAriaProperties(),this.addManagedEventListeners({stylesChanged:this.onStylesChanged.bind(this)})}onStylesChanged(e){e.listItemHeightChanged&&(this.rowHeight=this.getItemHeight(),this.refresh())}refreshAriaProperties(){var e;const t=this.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),i=this.eContainer;tne(i,(null===(e=this.model)||void 0===e?void 0:e.getRowCount())>0?this.ariaRole:"presentation"),ine(i,t)}addResizeObserver(){const e=Xne(this.beans,this.getGui(),()=>qne(this.beans,()=>this.drawVirtualRows()));this.addDestroyFunc(e)}focusInnerElement(e){return this.focusRow(e?this.model.getRowCount()-1:0),!0}onFocusIn(e){const t=e.target;var i;t.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=(i=t,Number.parseInt(i.getAttribute("aria-posinset"),10)-1))}onFocusOut(e){this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null)}handleKeyDown(e){const{key:t,shiftKey:i}=e;switch(t){case Eae.UP:case Eae.DOWN:{const n=t===Eae.UP;e.preventDefault(),i?this.moveItem(n):this.navigate(n)}break;case Eae.PAGE_HOME:case Eae.PAGE_END:case Eae.PAGE_UP:case Eae.PAGE_DOWN:null!==this.navigateToPage(t)&&e.preventDefault()}}onTabKeyDown(e){var t;null===(t=this.stopPropagationCallbacks)||void 0===t||t.stopPropagation(e),this.forceFocusOutOfContainer(e.shiftKey)}getNextRow(e){if(null==this.lastFocusedRowIndex)return;const t=this.lastFocusedRowIndex+(e?-1:1);return t<0||t>=this.model.getRowCount()?void 0:t}moveItem(e){if(!this.moveItemCallback)return;const t=this.getComponentAt(this.lastFocusedRowIndex);t&&this.moveItemCallback(t,e)}navigate(e){const t=this.getNextRow(e);void 0!==t&&this.focusRow(t)}navigateToPage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"focused",i=!1;"focused"===t&&(t=this.getLastFocusedRow(),i=!0);const n=this.model.getRowCount()-1;let o=-1;return e===Eae.PAGE_HOME?o=0:e===Eae.PAGE_END?o=n:e===Eae.PAGE_DOWN?o=Math.min(t+this.pageSize,n):e===Eae.PAGE_UP&&(o=Math.max(t-this.pageSize,0)),-1===o?null:(i?this.focusRow(o):this.ensureIndexVisible(o),o)}getLastFocusedRow(){return this.lastFocusedRowIndex}focusRow(e){this.isScrolling||(this.isScrolling=!0,this.ensureIndexVisible(e),qne(this.beans,()=>{if(this.isScrolling=!1,!this.isAlive())return;const t=this.renderedRows.get(e);t&&t.eDiv.focus()}))}getComponentAt(e){const t=this.renderedRows.get(e);return t&&t.rowComponent}forEachRenderedRow(e){this.renderedRows.forEach((t,i)=>e(t.rowComponent,i))}getItemHeight(){return this.isHeightFromTheme?this.beans.environment.getDefaultListItemHeight():this.rowHeight}ensureIndexVisible(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=this.model.getRowCount();if("number"!==typeof e||e<0||e>=i)return!1;const n=e*this.rowHeight,o=n+this.rowHeight,s=this.getGui(),r=s.scrollTop,a=s.offsetHeight,l=r+a,d=t?0:this.rowHeight,c=l<o-d;if(r>n+d)return s.scrollTop=n,!0;if(c){const e=o-a;return s.scrollTop=e,!0}return!1}setComponentCreator(e){this.componentCreator=e}setComponentUpdater(e){this.componentUpdater=e}getRowHeight(){return this.rowHeight}getScrollTop(){return this.getGui().scrollTop}setRowHeight(e){this.isHeightFromTheme=!1,this.rowHeight=e,this.refresh()}refresh(e){if(null==this.model||!this.isAlive())return;const t=this.model.getRowCount();this.eContainer.style.height="".concat(t*this.rowHeight,"px"),this.refreshAriaProperties(),this.awaitStable(()=>{this.isAlive()&&(this.canSoftRefresh(e)?this.drawVirtualRows(!0):(this.clearVirtualRows(),this.drawVirtualRows()))})}awaitStable(e){if(this.awaitStableCallbacks.push(e),this.awaitStableCallbacks.length>1)return;const t=this.model.getRowCount();Doe(this,()=>this.eContainer.clientHeight>=t*this.rowHeight,()=>{if(!this.isAlive())return;const e=this.awaitStableCallbacks;this.awaitStableCallbacks=[];for(const t of e)t()})}canSoftRefresh(e){return!!(e&&this.renderedRows.size&&"function"===typeof this.model.areRowsEqual&&this.componentUpdater)}clearVirtualRows(){this.renderedRows.forEach((e,t)=>this.removeRow(t))}drawVirtualRows(e){if(!this.isAlive()||!this.model)return;const t=this.getGui(),i=t.scrollTop,n=i+t.offsetHeight;if(i===n)this.clearVirtualRows();else{const t=Math.floor(i/this.rowHeight),o=Math.floor(n/this.rowHeight);this.pageSize=Math.floor((n-i)/this.rowHeight),this.ensureRowsRendered(t,o,e)}}ensureRowsRendered(e,t,i){this.renderedRows.forEach((i,n)=>{(n<e||n>t)&&n!==this.lastFocusedRowIndex&&this.removeRow(n)}),i&&this.refreshRows();for(let n=e;n<=t;n++)this.renderedRows.has(n)||n<this.model.getRowCount()&&this.insertRow(n)}insertRow(e){const t=this.model.getRow(e),i="tree"===this.ariaRole?"treeitem":"option",n=toe({tag:"div",cls:"ag-virtual-list-item ag-".concat(this.cssIdentifier,"-virtual-list-item"),role:i,attrs:{tabindex:"-1"}});cne(n,this.model.getRowCount()),une(n,e+1),n.style.height="".concat(this.rowHeight,"px"),n.style.top="".concat(this.rowHeight*e,"px");const o=this.componentCreator(t,n);o.addGuiEventListener("focusin",()=>this.lastFocusedRowIndex=e),n.appendChild(o.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",n):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",n):this.eContainer.appendChild(n),this.renderedRows.set(e,{rowComponent:o,eDiv:n,value:t})}removeRow(e){const t=this.renderedRows.get(e);t.eDiv.remove(),this.destroyBean(t.rowComponent),this.renderedRows.delete(e)}refreshRows(){const e=this.model.getRowCount();this.renderedRows.forEach((t,i)=>{if(i>=e)this.removeRow(i);else{var n,o;const e=this.model.getRow(i);null!==(n=(o=this.model).areRowsEqual)&&void 0!==n&&n.call(o,t.value,e)?this.componentUpdater(e,t.rowComponent):this.removeRow(i)}})}addScrollListener(){this.addGuiEventListener("scroll",()=>this.drawVirtualRows(),{passive:!0})}setModel(e){this.model=e}getAriaElement(){return this.eContainer}destroy(){this.isAlive()&&(this.clearVirtualRows(),this.awaitStableCallbacks.length=0,super.destroy())}};var cve=class extends Wde{constructor(e){super(),this.setTemplateFromElement(e.getGui(),void 0,void 0,!0)}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)})}handleKeyDown(e){e.key===Eae.ESCAPE&&this.closePanel()}onTabKeyDown(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())}closePanel(){const e=this.parentComponent;e.closeSubMenu(),setTimeout(()=>e.getGui().focus(),0)}},uve=class extends voe{constructor(e){super(),this.callbacks=e,this.ACTIVATION_DELAY=80,this.isActive=!1,this.subMenuIsOpen=!1,this.subMenuIsOpening=!1,this.suppressRootStyles=!0,this.suppressAria=!0,this.suppressFocus=!0}init(e){var t,i;const{menuItemDef:n,isAnotherSubMenuOpen:o,level:s,childComponent:r,contextParams:a}=e;return this.params=e.menuItemDef,this.level=s,this.isAnotherSubMenuOpen=o,this.childComponent=r,this.contextParams=a,this.cssClassPrefix=null!==(t=null===(i=this.params.menuItemParams)||void 0===i?void 0:i.cssClassPrefix)&&void 0!==t?t:"ag-menu-option",this.callbacks.getMenuItemComp(this.beans,this.params,p(p({},n),{},{level:s,isAnotherSubMenuOpen:o,openSubMenu:e=>this.openSubMenu(e),closeSubMenu:()=>this.closeSubMenu(),closeMenu:e=>this.closeMenu(e),updateTooltip:(e,t)=>this.refreshTooltip(e,t),onItemActivated:()=>this.onItemActivated()})).then(e=>{var t;if(!e)return;this.menuItemComp=e;const i=null===(t=e.configureDefaults)||void 0===t?void 0:t.call(e);i&&this.configureDefaults(!0===i?void 0:i)})}addListeners(e,t){null!==t&&void 0!==t&&t.suppressClick||this.addManagedElementListeners(e,{click:e=>this.onItemSelected(e)}),null!==t&&void 0!==t&&t.suppressKeyboardSelect||this.addManagedElementListeners(e,{keydown:e=>{e.key!==Eae.ENTER&&e.key!==Eae.SPACE||(e.preventDefault(),this.onItemSelected(e))}}),null!==t&&void 0!==t&&t.suppressMouseDown||this.addManagedElementListeners(e,{mousedown:e=>{e.stopPropagation(),e.preventDefault()}}),null!==t&&void 0!==t&&t.suppressMouseOver||this.addManagedElementListeners(e,{mouseenter:()=>this.onMouseEnter(),mouseleave:()=>this.onMouseLeave()})}isDisabled(){return!!this.params.disabled}openSubMenu(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0;if(this.closeSubMenu(),!this.params.subMenu)return;this.subMenuIsOpening=!0;const o=oce({tag:"div",cls:"ag-menu",role:"presentation"});let s;this.eSubMenuGui=o;let r=()=>{this.subMenuIsOpening=!1};if(this.childComponent){const e=this.createBean(new cve(this.childComponent));e.setParentComponent(this);const t=e.getGui(),i="mouseenter",n=()=>this.cancelDeactivate();t.addEventListener(i,n),s=()=>{t.removeEventListener(i,n),this.destroyBean(e)},o.appendChild(t),this.childComponent.afterGuiAttached&&(r=()=>{this.childComponent.afterGuiAttached(),this.subMenuIsOpening=!1})}else if(this.params.subMenu){const e=this.createBean(new hve(this.level+1,this.contextParams,this.callbacks));e.setParentComponent(this),e.addMenuItems(this.params.subMenu),o.appendChild(e.getGui()),this.addManagedListeners(e,{closeMenu:e=>this.dispatchLocalEvent(e)}),e.addGuiEventListener("mouseenter",()=>this.cancelDeactivate()),s=()=>this.destroyBean(e),i&&(r=()=>{e.activateFirstItem(),this.subMenuIsOpening=!1})}const a=this.beans.popupSvc,l=this.getLocaleTextFunc(),d=null===a||void 0===a?void 0:a.addPopup({modal:!0,eChild:o,positionCallback:()=>{const e=this.eGui;null===a||void 0===a||a.positionPopupForMenu({eventSource:e,ePopup:o,event:n instanceof MouseEvent?n:void 0,additionalParams:this.callbacks.getPostProcessPopupParams(this.contextParams)})},anchorToElement:this.eGui,ariaLabel:l("ariaLabelSubMenu","SubMenu"),afterGuiAttached:r});this.subMenuIsOpen=!0,this.setAriaExpanded(!0),this.hideSubMenu=()=>{var e,t;d&&d.hideFunc(),this.subMenuIsOpen=!1,this.setAriaExpanded(!1),s(),null===(e=(t=this.menuItemComp).setExpanded)||void 0===e||e.call(t,!1),this.eSubMenuGui=void 0},null===(e=(t=this.menuItemComp).setExpanded)||void 0===e||e.call(t,!0)}setAriaExpanded(e){this.suppressAria||lne(this.eGui,e)}closeSubMenu(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,this.setAriaExpanded(!1))}isSubMenuOpen(){return this.subMenuIsOpen}isSubMenuOpening(){return this.subMenuIsOpening}activate(e,t){var i,n;this.cancelActivate(),this.params.disabled&&!t||(this.isActive=!0,this.suppressRootStyles||this.eGui.classList.add("".concat(this.cssClassPrefix,"-active")),null===(i=(n=this.menuItemComp).setActive)||void 0===i||i.call(n,!0),this.suppressFocus||this.callbacks.preserveRangesWhile(this.beans,()=>this.eGui.focus({preventScroll:!t})),e&&this.params.subMenu&&window.setTimeout(()=>{this.isAlive()&&this.isActive&&this.openSubMenu()},300),this.onItemActivated())}deactivate(){var e,t;this.cancelDeactivate(),this.suppressRootStyles||this.eGui.classList.remove("".concat(this.cssClassPrefix,"-active")),null===(e=(t=this.menuItemComp).setActive)||void 0===e||e.call(t,!1),this.isActive=!1,this.subMenuIsOpen&&this.closeSubMenu()}getGui(){return this.menuItemComp.getGui()}getParentComponent(){return this.parentComponent}setParentComponent(e){this.parentComponent=e}getSubMenuGui(){return this.eSubMenuGui}onItemSelected(e){var t,i;null===(t=(i=this.menuItemComp).select)||void 0===t||t.call(i),this.params.action?this.beans.frameworkOverrides.wrapOutgoing(()=>this.params.action(this.gos.addCommon(p({},this.contextParams)))):this.openSubMenu(e&&"keydown"===e.type,e),this.params.subMenu&&!this.params.action||this.params.suppressCloseOnSelect||this.closeMenu(e)}closeMenu(e){const t={type:"closeMenu"};e&&(e instanceof MouseEvent?t.mouseEvent=e:t.keyboardEvent=e),this.dispatchLocalEvent(t)}onItemActivated(){const e={type:"menuItemActivated",menuItem:this};this.dispatchLocalEvent(e)}cancelActivate(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)}cancelDeactivate(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)}onMouseEnter(){this.cancelDeactivate(),this.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(()=>this.activate(!0),this.ACTIVATION_DELAY):this.activate(!0)}onMouseLeave(){this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(()=>this.deactivate(),this.ACTIVATION_DELAY):this.deactivate()}refreshRootElementGui(e){var t,i;let n=this.menuItemComp.getGui();const{cssClassPrefix:o,params:{cssClasses:s,disabled:r}}=this,a=null===(t=(i=this.menuItemComp).getRootElement)||void 0===t?void 0:t.call(i);if(a&&(e||n.classList.add("ag-menu-option-custom"),n=a),this.suppressRootStyles=!!e,!this.suppressRootStyles){n.classList.add(o);for(const e of null!==s&&void 0!==s?s:[])n.classList.add(e);r&&n.classList.add("".concat(o,"-disabled"))}return n}applyAriaProperties(e){const{params:{checked:t,subMenu:i,subMenuRole:n,disabled:o}}=this;var s;tne(e,null!=t?"menuitemcheckbox":"menuitem"),i&&qie(e,"haspopup",!1===(s=null!==n&&void 0!==n?n:"menu")?null:s),o&&rne(e,!0)}configureDefaults(e){if(!this.menuItemComp)return void setTimeout(()=>this.configureDefaults(e));const{suppressRootStyles:t,suppressTooltip:i,suppressAria:n,suppressTabIndex:o,suppressFocus:s}=e||{},{params:{tooltip:r,disabled:a}}=this,l=this.eGui=this.refreshRootElementGui(!!t);this.suppressAria=!!n,n||this.applyAriaProperties(l),o||l.setAttribute("tabindex","-1"),i||this.refreshTooltip(r),a||this.addListeners(l,e),this.suppressFocus=!!s}refreshTooltip(e,t){if(this.tooltip=e,this.tooltipFeature=this.destroyBean(this.tooltipFeature),!e||!this.menuItemComp)return;const i=this.beans.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),getTooltipValue:()=>this.tooltip,getLocation:()=>"menu",shouldDisplayTooltip:t});i&&(this.tooltipFeature=this.createBean(i))}destroy(){var e,t;this.tooltipFeature=this.destroyBean(this.tooltipFeature),null===(e=this.menuItemComp)||void 0===e||null===(t=e.destroy)||void 0===t||t.call(e),super.destroy()}},hve=class extends Wde{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;super({tag:"div",cls:"ag-menu-list",role:"menu"}),this.level=e,this.menuActionParams=t,this.callbacks=i,this.menuItems=[]}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.callbacks.preserveRangesWhile(this.beans,()=>this.handleKeyDown(e)),onFocusIn:e=>this.handleFocusIn(e),onFocusOut:e=>this.handleFocusOut(e)})}onTabKeyDown(e){var t;const i=this.getParentComponent();(null===i||void 0===i||null===(t=i.getGui())||void 0===t?void 0:t.classList.contains("ag-focus-managed"))||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)}handleKeyDown(e){switch(e.key){case Eae.UP:case Eae.RIGHT:case Eae.DOWN:case Eae.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case Eae.ESCAPE:this.closeIfIsChild()&&this.callbacks.stopPropagationCallbacks.stopPropagation(e)}}handleFocusIn(e){var t;const i=e.relatedTarget;!this.tabGuardFeature.getTabGuardCtrl().isTabGuard(i)&&(this.getGui().contains(i)||null!==(t=this.activeMenuItem)&&void 0!==t&&null!==(t=t.getSubMenuGui())&&void 0!==t&&t.contains(i))||(this.activeMenuItem?this.activeMenuItem.activate():this.activateFirstItem())}handleFocusOut(e){var t;const i=e.relatedTarget;!this.activeMenuItem||this.getGui().contains(i)||null!==(t=this.activeMenuItem.getSubMenuGui())&&void 0!==t&&t.contains(i)||this.activeMenuItem.isSubMenuOpening()||this.activeMenuItem.deactivate()}clearActiveItem(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)}addMenuItems(e){null!=e&&pae.all(e.map(e=>{return"separator"===e?pae.resolve({eGui:this.createSeparator()}):"string"===typeof e?(null===(t=(i=this.callbacks).warnNoItem)||void 0===t||t.call(i,e),pae.resolve({eGui:null})):this.addItem(e);var t,i})).then(e=>{for(const t of null!==e&&void 0!==e?e:[])null!==t&&void 0!==t&&t.eGui&&(this.appendChild(t.eGui),t.comp&&this.menuItems.push(t.comp))})}addItem(e){const t=this.createManagedBean(new uve(this.callbacks));return t.init({menuItemDef:e,isAnotherSubMenuOpen:()=>this.menuItems.some(e=>e.isSubMenuOpen()),level:this.level,contextParams:this.menuActionParams}).then(()=>(t.setParentComponent(this),this.addManagedListeners(t,{closeMenu:e=>{this.dispatchLocalEvent(e)},menuItemActivated:e=>{this.activeMenuItem&&this.activeMenuItem!==e.menuItem&&this.activeMenuItem.deactivate(),this.activeMenuItem=e.menuItem}}),{comp:t,eGui:t.getGui()}))}activateFirstItem(){const e=this.menuItems.filter(e=>!e.isDisabled())[0];e&&e.activate()}createSeparator(){const e={tag:"div",cls:"ag-menu-separator-part"};return toe({tag:"div",cls:"ag-menu-separator",attrs:{"aria-hidden":"true"},children:[e,e,e,e]})}handleNavKey(e){switch(e){case Eae.UP:case Eae.DOWN:{const t=this.findNextItem(e===Eae.UP);return void(t&&t!==this.activeMenuItem&&t.activate(!1,!0))}}e===(this.gos.get("enableRtl")?Eae.RIGHT:Eae.LEFT)?this.closeIfIsChild():this.openChild()}closeIfIsChild(e){const t=this.getParentComponent();return!!(t&&t instanceof uve)&&(e&&e.preventDefault(),t.closeSubMenu(),t.getGui().focus(),!0)}openChild(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)}findNextItem(e){const t=[...this.menuItems];if(!t.length)return;if(!this.activeMenuItem)return e?pre(t):t[0];let i;e&&t.reverse();let n=!1;for(const o of t){if(n){i=o;break}o===this.activeMenuItem&&(n=!0)}return n&&!i?t[0]:i||this.activeMenuItem}destroy(){this.clearActiveItem(),super.destroy()}},pve=class extends voe{constructor(e){super(),this.params=e,this.destroyLoadingSpinner=null,this.lastPromise=0}hideActiveMenu(){this.destroyBean(this.activeMenu)}showMenu(e,t,i){const{getMenuItems:n,shouldBlockMenuOpen:o}=this.params,s=n(e,t);if("function"===typeof s.then){const n=this.lastPromise+1;return this.lastPromise=n,this.destroyLoadingSpinner||this.createLoadingIcon(t),s.then(s=>{var r;if(this.lastPromise!==n)return;const{target:a}=t,l=!a;(null===s||void 0===s?void 0:s.length)&&(l||Vne(a))&&!(null!==o&&void 0!==o&&o())&&this.createContextMenu({menuItems:s,menuActionParams:e,mouseEvent:t,anchorToElement:i}),null===(r=this.destroyLoadingSpinner)||void 0===r||r.call(this)}),!0}return!(null===s||void 0===s||!s.length)&&(this.createContextMenu({menuItems:s,menuActionParams:e,mouseEvent:t,anchorToElement:i}),!0)}createLoadingIcon(e){var t;const{beans:i}=this,n=this.getLocaleTextFunc(),o=i.iconSvc.createIconNoSpan("loadingMenuItems"),s=toe({tag:"div",cls:"ag-context-menu-loading-icon"});s.appendChild(o);const r=Kie(i),a=Xie(i);if(!a)return;a.appendChild(s),null===(t=i.ariaAnnounce)||void 0===t||t.announceValue(n("ariaLabelLoadingContextMenu","Loading Context Menu"),"contextmenu"),i.environment.applyThemeClasses(s),uoe(s,e,i);const l=e=>{uoe(s,e,i)};r.addEventListener("mousemove",l),this.destroyLoadingSpinner=()=>{r.removeEventListener("mousemove",l),s.remove(),this.destroyLoadingSpinner=null}}createContextMenu(e){const{mapMenuItems:t,menuItemCallbacks:i,beforeMenuOpen:n,onMenuClose:o,afterMenuDestroyed:s,onVisibleChanged:r,onMenuOpen:a}=this.params,{menuItems:l,menuActionParams:d,mouseEvent:c,anchorToElement:u}=e,h=this.beans.popupSvc,g=new gve(t?e=>t(l,d,e):()=>l,d,i);this.createBean(g);const m=g.getGui();null===n||void 0===n||n(d);const f={additionalParams:i.getPostProcessPopupParams(d),type:"contextMenu",mouseEvent:c,ePopup:m,nudgeY:1},v=this.getLocaleTextFunc(),y=null===h||void 0===h?void 0:h.addPopup({modal:!0,eChild:m,closeOnEsc:!0,closedCallback:e=>{i.preserveRangesWhile(this.beans,()=>{null===o||void 0===o||o(),this.destroyBean(g),null===s||void 0===s||s(),null===r||void 0===r||r(!1,void 0===e?"api":"ui")})},click:c,positionCallback:()=>{const e=this.gos.get("enableRtl");null===h||void 0===h||h.positionPopupUnderMouseEvent(p(p({},f),{},{nudgeX:e?-1*(m.offsetWidth+1):1}))},anchorToElement:u,ariaLabel:v("ariaLabelContextMenu","Context Menu")});y&&(null===a||void 0===a||a(),g.afterGuiAttached({container:"contextMenu",hidePopup:y.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=g,g.addEventListener("destroyed",()=>{this.activeMenu===g&&(this.activeMenu=null)}),y&&g.addEventListener("closeMenu",e=>{var t,i;return y.hideFunc({mouseEvent:null!==(t=e.mouseEvent)&&void 0!==t?t:void 0,keyboardEvent:null!==(i=e.keyboardEvent)&&void 0!==i?i:void 0,forceHide:!0})});const b=c&&c instanceof MouseEvent&&"mousedown"===c.type;null===r||void 0===r||r(!0,b?"api":"ui")}destroy(){var e;null===(e=this.destroyLoadingSpinner)||void 0===e||e.call(this),super.destroy()}},gve=class extends uae{constructor(e,t,i){super({tag:"div",cls:"ag-menu",role:"presentation"}),this.getMenuItems=e,this.menuActionParams=t,this.callbacks=i,this.menuList=null}postConstruct(){const e=this.createManagedBean(new hve(0,this.menuActionParams,this.callbacks)),t=this.getMenuItems(()=>this.getGui());e.addMenuItems(t),this.appendChild(e),this.menuList=e,e.addEventListener("closeMenu",e=>this.dispatchLocalEvent(e))}afterGuiAttached(e){let{hidePopup:t}=e;t&&this.addDestroyFunc(t);const i=this.menuList;i&&this.callbacks.preserveRangesWhile(this.beans,()=>ile(i.getGui()))}},mve=class extends uae{constructor(e){super({tag:"div"}),this.callbacks=e}init(e){var t;this.params=e,this.cssClassPrefix=null!==(t=this.params.cssClassPrefix)&&void 0!==t?t:"ag-menu-option",this.addAriaAttributes(),this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu()}configureDefaults(){return!0}addAriaAttributes(){const{checked:e,subMenu:t}=this.params,i=this.getGui();e&&bne(i,e),t&&lne(i,!1)}addIcon(){if(this.params.isCompact)return;const e=toe({tag:"span",ref:"eIcon",cls:"".concat(this.getClassName("part")," ").concat(this.getClassName("icon")),role:"presentation"}),{checked:t,icon:i}=this.params;if(t)e.appendChild(this.beans.iconSvc.createIconNoSpan("check"));else if(i)if($ne(i))e.appendChild(i);else if("string"===typeof i)e.innerHTML=i;else{var n,o;null===(n=this.callbacks)||void 0===n||null===(o=n.warnNoIcon)||void 0===o||o.call(n)}this.getGui().appendChild(e)}addName(){const e=toe({tag:"span",ref:"eName",cls:"".concat(this.getClassName("part")," ").concat(this.getClassName("text")),children:this.params.name||""});this.getGui().appendChild(e)}addShortcut(){if(this.params.isCompact)return;const e=toe({tag:"span",ref:"eShortcut",cls:"".concat(this.getClassName("part")," ").concat(this.getClassName("shortcut")),children:this.params.shortcut||""});this.getGui().appendChild(e)}addSubMenu(){const e=toe({tag:"span",ref:"ePopupPointer",cls:"".concat(this.getClassName("part")," ").concat(this.getClassName("popup-pointer"))}),t=this.getGui();if(this.params.subMenu){const t=this.gos.get("enableRtl")?"subMenuOpenRtl":"subMenuOpen";e.appendChild(this.beans.iconSvc.createIconNoSpan(t))}t.appendChild(e)}getClassName(e){return"".concat(this.cssClassPrefix,"-").concat(e)}};var fve="35.0.1",vve={moduleName:"EnterpriseCore",version:fve,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="licenseManager"}postConstruct(){this.validateLicense()}validateLicense(){this.licenseManager=new rve(Yie(this.beans)),this.licenseManager.validateLicense()}static getLicenseDetails(e){return new rve(null).getLicenseDetails(e)}getWatermarkSelector(){return lve}isDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}getWatermarkMessage(){return this.licenseManager.getWatermarkMessage()}static setLicenseKey(e){rve.setLicenseKey(e)}static setChartsLicenseManager(e){rve.setChartsLicenseManager(e)}}],icons:{accordionOpen:"tree-open",accordionClosed:"tree-closed",accordionIndeterminate:"tree-indeterminate",close:"cross",cancel:"cancel",maximize:"maximize",minimize:"minimize",columnDrag:"grip"},dependsOn:[]};var yve=class extends dve{constructor(e){super(dce,e)}};var bve=class extends mve{constructor(){super({warnNoIcon:()=>lse(227)})}},xve={moduleName:"MenuItem",version:fve,userComponents:{agMenuItem:bve},icons:{check:"tick",subMenuOpen:"small-right",subMenuOpenRtl:"small-left"},css:['.ag-menu-list{cursor:default;display:table;padding:var(--ag-spacing) 0;width:100%}.ag-menu-option,.ag-menu-separator{display:table-row}.ag-menu-option-part,.ag-menu-separator-part{display:table-cell;vertical-align:middle}.ag-menu-option{cursor:pointer;font-weight:500}:where(.ag-ltr) :where(.ag-menu-option-popup-pointer) .ag-icon{text-align:right}:where(.ag-rtl) :where(.ag-menu-option-popup-pointer) .ag-icon{text-align:left}.ag-menu-option-text{white-space:nowrap}.ag-menu-option-custom{display:contents}.ag-compact-menu-option{display:flex;flex-wrap:nowrap;width:100%}.ag-compact-menu-option-text{flex:1 1 auto;white-space:nowrap}.ag-menu-separator{height:calc(var(--ag-spacing)*2 + 1px)}.ag-menu-separator-part:after{border-top:solid var(--ag-border-width) var(--ag-menu-separator-color);content:"";display:block}.ag-compact-menu-option-active,.ag-menu-option-active{background-color:var(--ag-row-hover-color)}.ag-compact-menu-option-part,.ag-menu-option-part{line-height:var(--ag-icon-size);padding:calc(var(--ag-spacing) + 2px) 0}.ag-compact-menu-option-disabled,.ag-menu-option-disabled{cursor:not-allowed;opacity:.5}.ag-compact-menu-option-icon,.ag-menu-option-icon{width:var(--ag-icon-size)}:where(.ag-ltr) .ag-compact-menu-option-icon,:where(.ag-ltr) .ag-menu-option-icon{padding-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-compact-menu-option-icon,:where(.ag-rtl) .ag-menu-option-icon{padding-right:calc(var(--ag-spacing)*2)}.ag-compact-menu-option-text,.ag-menu-option-text{padding-left:calc(var(--ag-spacing)*2);padding-right:calc(var(--ag-spacing)*2)}:where(.ag-ltr) .ag-compact-menu-option-shortcut,:where(.ag-ltr) .ag-menu-option-shortcut{padding-right:var(--ag-spacing)}:where(.ag-rtl) .ag-compact-menu-option-shortcut,:where(.ag-rtl) .ag-menu-option-shortcut{padding-left:var(--ag-spacing)}:where(.ag-ltr) .ag-compact-menu-option-popup-pointer,:where(.ag-ltr) .ag-menu-option-popup-pointer{padding-right:var(--ag-spacing)}:where(.ag-rtl) .ag-compact-menu-option-popup-pointer,:where(.ag-rtl) .ag-menu-option-popup-pointer{padding-left:var(--ag-spacing)}.ag-menu-column-select-wrapper{height:265px;overflow:auto;:where(.ag-column-select){height:100%}}.ag-menu:where(.ag-tabs){min-width:290px}.ag-context-menu-loading-icon{pointer-events:none;position:absolute}']};function Cve(e,t,i){var n;e.group!==i&&(e.group&&!i&&(e.expanded=!1),e.group=i,e.updateHasChildren(),null===(n=t.selectionSvc)||void 0===n||n.updateRowSelectable(e),e.dispatchRowEvent("groupChanged"))}function Sve(e,t){const{gos:i,rowGroupColsSvc:n}=t;if(!n||!e)return!1;const o=i.get("groupLockGroupColumns");if(!e.isRowGroupActive()||0===o)return!1;if(-1===o)return!0;return o>n.columns.findIndex(t=>t.getColId()===e.getColId())}var wve={name:"menuItem",optionalMethods:["setActive","select","setExpanded","configureDefaults"]},Mve={getMenuItemComp:(e,t,i)=>{var n;const o=e.userCompFactory.getCompDetails(t,wve,"agMenuItem",Kse(e.gos,i),!0);return null!==(n=null===o||void 0===o?void 0:o.newAgStackInstance())&&void 0!==n?n:pae.resolve()},getPostProcessPopupParams:e=>{let{column:t,node:i}=e;return{column:t,rowNode:i}},preserveRangesWhile:function(e,t){if(!e.gos.get("enableCellTextSelection"))return t();if(!_ae()&&!Wae())return t();const{selection:i,ranges:n}=function(e){const t=Kie(e),i="getSelection"in t?t.getSelection():null,n=[];for(let s=0;s<(null!==(o=null===i||void 0===i?void 0:i.rangeCount)&&void 0!==o?o:0);s++){var o;const e=null===i||void 0===i?void 0:i.getRangeAt(s);e&&n.push(e)}return{selection:i,ranges:n}}(e);t(),null===i||void 0===i||i.removeAllRanges();for(const o of n)null===i||void 0===i||i.addRange(o)},stopPropagationCallbacks:dce,warnNoItem:e=>{lse(228,{menuItemOrString:e})}};function kve(e,t,i){null!=e&&null!=t&&e.splice(i,0,...t)}var Dve={tag:"div",cls:"ag-unselectable",role:"presentation"},Ive=class extends hae{constructor(e){super(Dve),this.horizontal=e,this.state="notDragging",this.guiDestroyFunctions=[],this.childPillComponents=[],this.resizeEnabled=!1,this.addElementClasses(this.getGui()),this.ePillDropList=oce({tag:"div"}),this.addElementClasses(this.ePillDropList,"list"),this.registerCSS(".ag-column-drop{align-items:center;display:inline-flex;overflow:auto;position:relative;width:100%}.ag-column-drop-list{align-items:center;display:flex}.ag-column-drop-cell{align-items:center;background-color:var(--ag-column-drop-cell-background-color);border:var(--ag-column-drop-cell-border);border-radius:500px;color:var(--ag-column-drop-cell-text-color);display:flex;padding:calc(var(--ag-spacing)*.25);position:relative;&:focus-visible{box-shadow:var(--ag-focus-shadow)}:where(.ag-drag-handle){color:var(--ag-column-drop-cell-drag-handle-color)}}:where(.ag-ltr) .ag-column-drop-cell{padding-left:calc(var(--ag-spacing)*.75)}:where(.ag-rtl) .ag-column-drop-cell{padding-right:calc(var(--ag-spacing)*.75)}.ag-column-drop-cell-text{flex:1 1 auto;margin:0 var(--ag-spacing);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-column-drop-vertical{align-items:stretch;display:flex;flex-direction:column;min-height:75px;overflow:hidden}.ag-column-drop-vertical-title-bar{align-items:center;display:flex;flex:none;padding:var(--ag-widget-container-vertical-padding) calc(var(--ag-spacing)*2) 0}.ag-column-drop-vertical-list{align-items:stretch;flex-direction:column;flex-grow:1;overflow-x:auto;padding-bottom:var(--ag-spacing);padding-left:var(--ag-spacing);padding-right:var(--ag-spacing);position:relative;>*{flex:none}}:where(.ag-column-drop-empty) .ag-column-drop-vertical-list{overflow:hidden}.ag-column-drop-cell-button{cursor:pointer;min-width:0;opacity:.75;&:hover{opacity:1}}:where(.ag-ltr) .ag-column-drop-cell-button{margin-right:calc(var(--ag-spacing)/4)}:where(.ag-rtl) .ag-column-drop-cell-button{margin-left:calc(var(--ag-spacing)/4)}:where(.ag-ltr) .ag-column-drop-cell-drag-handle{margin-left:calc(var(--ag-spacing)/4)}:where(.ag-rtl) .ag-column-drop-cell-drag-handle{margin-right:calc(var(--ag-spacing)/4)}.ag-column-drop-wrapper{display:flex}.ag-column-drop-horizontal-half-width{width:50%!important}.ag-column-drop-cell-ghost{opacity:.5}.ag-column-drop-horizontal{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;white-space:nowrap}:where(.ag-ltr) .ag-column-drop-horizontal{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-column-drop-horizontal{padding-right:var(--ag-cell-horizontal-padding)}.ag-column-drop-horizontal-list{gap:var(--ag-cell-widget-spacing)}.ag-column-drop-vertical-cell{margin-top:var(--ag-spacing)}:where(.ag-ltr) .ag-column-drop-vertical-icon{margin-right:var(--ag-widget-horizontal-spacing)}:where(.ag-rtl) .ag-column-drop-vertical-icon{margin-left:var(--ag-widget-horizontal-spacing)}.ag-select-agg-func-popup{background:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);height:calc(var(--ag-spacing)*5*3.5);padding:0;position:absolute}.ag-select-agg-func-virtual-list-item{cursor:default;&:hover{background-color:var(--ag-selected-row-background-color)}}:where(.ag-ltr) .ag-select-agg-func-virtual-list-item{padding-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-select-agg-func-virtual-list-item{padding-right:calc(var(--ag-spacing)*2)}:where(.ag-ltr) .ag-column-drop-horizontal-half-width:where(:not(:last-child)){border-right:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-column-drop-horizontal-half-width:where(:not(:last-child)){border-left:solid var(--ag-border-width) var(--ag-border-color)}")}toggleResizable(e){this.positionableFeature.setResizable(!!e&&{bottom:!0}),this.resizeEnabled=e}isSourceEventFromTarget(e){const{dropZoneTarget:t,dragSource:i}=e;return t.contains(i.eElement)}destroy(){this.destroyGui(),super.destroy()}destroyGui(){for(const e of this.guiDestroyFunctions)e();this.guiDestroyFunctions.length=0,this.childPillComponents.length=0,Fne(this.getGui()),Fne(this.ePillDropList)}init(e){this.params=null!==e&&void 0!==e?e:{},this.createManagedBean(new cce(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.onKeyDown.bind(this)})),this.setupDropTarget(),this.positionableFeature=new sce(this.getGui()),this.createManagedBean(this.positionableFeature),this.refreshGui(),ine(this.ePillDropList,this.getAriaLabel())}onTabKeyDown(e){const t=tle(this.getFocusableElement(),null,!0),i=t.length;if(0===i)return;const{shiftKey:n}=e,o=Uie(this.beans),s=o===t[0],r=o===pre(t);1===i||s&&n||r&&!n||t[n?0:i-1].focus()}onKeyDown(e){const{key:t}=e,i=!this.horizontal;let n=t===Eae.DOWN,o=t===Eae.UP;if(!i){const e=this.gos.get("enableRtl");n=!e&&t===Eae.RIGHT||e&&t===Eae.LEFT,o=!e&&t===Eae.LEFT||e&&t===Eae.RIGHT}if(n||o)if(e.preventDefault(),e.shiftKey)this.moveFocusedItem(o);else{const e=nle(this.beans,this.getFocusableElement(),!1,o);e&&e.focus()}}moveFocusedItem(e){const t=this.getFocusedItem();if(-1===t)return;const i=e?-1:1;if(!this.normalizeAndUpdateInsertIndex(t,t+i))return;const n=this.childPillComponents[t];if(!n.isMovable())return;const o=n.getItem();this.focusItemAtIndex(this.insertIndex),this.rearrangeItems([o],!0)}addElementClasses(e,t){t=t?"-".concat(t):"";const i=this.horizontal?"horizontal":"vertical";e.classList.add("ag-column-drop".concat(t),"ag-column-drop-".concat(i).concat(t))}setupDropTarget(){var e;this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),onDragCancel:this.onDragCancel.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},null===(e=this.beans.dragAndDrop)||void 0===e||e.addDropTarget(this.dropTarget)}minimumAllowedNewInsertIndex(){return 0}checkInsertIndex(e){const t=this.getNewInsertIndex(e);return!(t<0)&&this.normalizeAndUpdateInsertIndex(this.insertIndex,t)}normalizeAndUpdateInsertIndex(e,t){const i=this.minimumAllowedNewInsertIndex(),n=Math.max(i,t),o=n!==e;return o&&(this.insertIndex=n),o}getNewInsertIndex(e){const t=e.event,i=this.horizontal?t.clientX:t.clientY,n=this.childPillComponents.map(e=>e.getGui().getBoundingClientRect()),o=n.findIndex(e=>this.horizontal?e.right>i&&e.left<i:e.top<i&&e.bottom>i);if(-1===o){const e=this.gos.get("enableRtl"),t=n.every(e=>i>(this.horizontal?e.right:e.bottom));if(t)return e&&this.horizontal?0:this.childPillComponents.length;const o=n.every(e=>i<(this.horizontal?e.left:e.top));return o?e&&this.horizontal?this.childPillComponents.length:0:this.insertIndex}return this.insertIndex<=o?o+1:o}checkDragStartedBySelf(e){"notDragging"===this.state&&(this.state="rearrangeItems",this.potentialDndItems=this.getItems(e.dragSource.getDragItem()),this.refreshGui(),this.checkInsertIndex(e),this.refreshGui())}onDragging(e){this.checkDragStartedBySelf(e),this.checkInsertIndex(e)&&this.refreshGui()}handleDragEnterEnd(e){}onDragEnter(e){const t=this.getItems(e.dragSource.getDragItem());this.state="newItemsIn";const i=t.filter(t=>this.isItemDroppable(t,e)),n=i.every(e=>-1!==this.childPillComponents.map(e=>e.getItem()).indexOf(e));0!==i.length&&(this.potentialDndItems=i,n?this.state="notDragging":(this.handleDragEnterEnd(e),this.checkInsertIndex(e),this.refreshGui()))}isPotentialDndItems(){var e;return!(null===(e=this.potentialDndItems)||void 0===e||!e.length)}handleDragLeaveEnd(e){}onDragLeave(e){if("rearrangeItems"===this.state){const t=this.getItems(e.dragSource.getDragItem());this.removeItems(t)}this.isPotentialDndItems()&&(this.handleDragLeaveEnd(e),this.potentialDndItems=[],this.refreshGui()),this.state="notDragging"}onDragCancel(e){this.isPotentialDndItems()&&("newItemsIn"===this.state&&this.handleDragLeaveEnd(e),this.potentialDndItems=[],this.refreshGui()),this.state="notDragging"}onDragStop(){this.isPotentialDndItems()&&("newItemsIn"===this.state?this.addItems(this.potentialDndItems):this.rearrangeItems(this.potentialDndItems),this.potentialDndItems=[],this.refreshGui()),this.state="notDragging"}removeItems(e){const t=this.getExistingItems().filter(t=>!e.includes(t));this.updateItems(t)}addItems(e){if(!e)return;const t=this.getExistingItems().slice(),i=e.filter(e=>t.indexOf(e)<0);kve(t,i,this.insertIndex),this.updateItems(t)}addItem(e){this.insertIndex=this.getExistingItems().length,this.addItems([e]),this.refreshGui()}rearrangeItems(e,t){let i;return i=t?this.getExistingItems().filter(t=>-1===e.indexOf(t)):this.getNonGhostItems().slice(),kve(i,e,this.insertIndex),!gre(i,this.getExistingItems())&&(this.updateItems(i),!0)}refreshGui(){let e=0;this.horizontal||(e=this.ePillDropList.scrollTop);const t=this.resizeEnabled,i=this.getFocusedItem(),{eGridDiv:n}=this.beans,o=ele();let s=null;var r;o&&(s=null!==(r=nle(this.beans,n))&&void 0!==r?r:nle(this.beans,n,!1,!0));this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addItemsToGui(),0!==e&&(this.ePillDropList.scrollTop=e),t&&this.toggleResizable(t),o&&this.restoreFocus(i,s)}getFocusedItem(){const e=this.getGui(),t=Uie(this.beans);if(!e.contains(t))return-1;return Array.from(e.querySelectorAll(".ag-column-drop-cell")).indexOf(t)}focusItemAtIndex(e){const t=this.getGui(),i=Array.from(t.querySelectorAll(".ag-column-drop-cell"))[e];i&&i.focus({preventScroll:!0})}restoreFocus(e,t){const i=this.getGui(),n=Array.from(i.querySelectorAll(".ag-column-drop-cell"));if(-1===e)return;0===n.length&&t.focus();const o=n[Math.min(n.length-1,e)];o&&o.focus()}focusList(e){const t=e?this.childPillComponents.length-1:0;this.restoreFocus(t,this.getFocusableElement())}getNonGhostItems(){const e=this.getExistingItems();return this.isPotentialDndItems()?e.filter(e=>!this.potentialDndItems.includes(e)):e}addItemsToGui(){const e=this.getNonGhostItems().map(e=>this.createItemComponent(e,!1));if(this.isPotentialDndItems()){const t=this.potentialDndItems.map(e=>this.createItemComponent(e,!0));this.insertIndex>=e.length?e.push(...t):e.splice(this.insertIndex,0,...t)}this.appendChild(this.ePillDropList),e.forEach((e,t)=>{t>0&&this.addArrow(this.ePillDropList),this.ePillDropList.appendChild(e.getGui())}),this.addAriaLabelsToComponents()}addAriaLabelsToComponents(){const{childPillComponents:e,ePillDropList:t}=this,i=e.length;tne(t,0===i?"presentation":"listbox");for(let n=0;n<i;n++){const t=e[n].getGui();une(t,n+1),cne(t,i)}}createItemComponent(e,t){const i=this.createPillComponent(e,this.dropTarget,t,this.horizontal);return i.addEventListener("columnRemove",this.removeItems.bind(this,[e])),this.createBean(i),this.guiDestroyFunctions.push(()=>this.destroyBean(i)),t||this.childPillComponents.push(i),i}addIconAndTitleToGui(){const{title:e,icon:t}=this.params;if(!e||!t)return;const i=oce({tag:"div"});if(ane(i,!0),this.addElementClasses(i,"title-bar"),this.addElementClasses(t,"icon"),this.toggleCss("ag-column-drop-empty",this.isExistingItemsEmpty()),i.appendChild(t),!this.horizontal){const t=oce({tag:"span"});this.addElementClasses(t,"title"),t.textContent=e,i.appendChild(t)}this.appendChild(i)}isExistingItemsEmpty(){return 0===this.getExistingItems().length}addEmptyMessageToGui(){const{emptyMessage:e}=this.params;if(!e||!this.isExistingItemsEmpty()||this.isPotentialDndItems())return;const t=oce({tag:"span"});t.textContent=e,this.addElementClasses(t,"empty-message"),this.ePillDropList.appendChild(t)}addArrow(e){if(this.horizontal){const t=_ue(this.gos.get("enableRtl")?"panelDelimiterRtl":"panelDelimiter",this.beans);this.addElementClasses(t,"cell-separator"),e.appendChild(t)}}},Ave={tag:"span",role:"option",children:[{tag:"span",ref:"eDragHandle",cls:"ag-drag-handle ag-column-drop-cell-drag-handle",role:"presentation"},{tag:"span",ref:"eText",cls:"ag-column-drop-cell-text",attrs:{"aria-hidden":"true"}},{tag:"span",ref:"eButton",cls:"ag-column-drop-cell-button",role:"presentation"}]},Lve=class extends hae{constructor(e,t,i,n,o){super(),this.dragSourceDropTarget=e,this.ghost=t,this.horizontal=i,this.template=n,this.agComponents=o,this.eText=lae,this.eDragHandle=lae,this.eButton=lae}postConstruct(){var e;this.setTemplate(null!==(e=this.template)&&void 0!==e?e:Ave,this.agComponents);const t=this.getGui(),{beans:i,eDragHandle:n,eText:o,eButton:s}=this;this.addElementClasses(t),this.addElementClasses(n,"drag-handle"),this.addElementClasses(o,"text"),this.addElementClasses(s,"button"),n.appendChild(_ue("columnDrag",i)),s.appendChild(_ue("cancel",i)),this.tooltipFeature=this.createOptionalManagedBean(i.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui()})),this.setupComponents(),!this.ghost&&this.isDraggable()&&this.addDragSource(),this.setupAria(),this.setupTooltip(),this.activateTabIndex(),this.refreshDraggable()}isDraggable(){return!0}refreshDraggable(){this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!this.isDraggable())}setupAria(){const e=this.getLocaleTextFunc(),t=[this.getAriaDisplayName()];this.addAdditionalAriaInstructions(t,e),ine(this.getGui(),t.join(". "))}addAdditionalAriaInstructions(e,t){if(this.isRemovable()){const i=t("ariaDropZoneColumnComponentDescription","Press DELETE to remove");e.push(i)}}setupTooltip(){const e=()=>{var e;return null===(e=this.tooltipFeature)||void 0===e?void 0:e.setTooltipAndRefresh(this.getTooltip())};e(),this.addManagedEventListeners({newColumnsLoaded:e})}getDragSourceId(){}getDefaultIconName(){return"notAllowed"}addDragSource(){const{beans:{dragAndDrop:e},eDragHandle:t}=this,i=this.createGetDragItem(),n=this.getDefaultIconName(),o={type:this.getDragSourceType(),sourceId:this.getDragSourceId(),eElement:t,getDefaultIconName:()=>n,getDragItem:i,dragItemName:this.getDisplayName()};null===e||void 0===e||e.addDragSource(o,!0),this.addDestroyFunc(()=>null===e||void 0===e?void 0:e.removeDragSource(o))}setupComponents(){this.eText.textContent=this.getDisplayValue(),this.setupRemove(),this.ghost&&this.addCss("ag-column-drop-cell-ghost")}isRemovable(){return!0}refreshRemove(){Mne(this.eButton,this.isRemovable())}setupRemove(){this.refreshRemove();const e={type:"columnRemove"};this.addGuiEventListener("keydown",e=>this.onKeyDown(e)),this.addManagedElementListeners(this.eButton,{click:t=>{this.dispatchLocalEvent(e),t.stopPropagation()}});const t=new nhe(this.eButton);this.addManagedListeners(t,{tap:()=>this.dispatchLocalEvent(e)}),this.addDestroyFunc(t.destroy.bind(t))}onKeyDown(e){e.key===Eae.DELETE&&this.isRemovable()&&(e.preventDefault(),this.dispatchLocalEvent({type:"columnRemove"}))}getDisplayValue(){return this.getDisplayName()}addElementClasses(e,t){t=t?"-".concat(t):"";const i=this.horizontal?"horizontal":"vertical";e.classList.add("ag-column-drop-cell".concat(t),"ag-column-drop-".concat(i,"-cell").concat(t))}destroy(){super.destroy(),this.dragSourceDropTarget=null}},Nve=class extends Lve{constructor(e,t,i,n,o){super(t,i,o),this.column=e,this.dropZonePurpose=n,this.eSortIndicator=lae,this.popupShowing=!1}postConstruct(){const{sortSvc:e,colNames:t}=this.beans;this.template={tag:"span",role:"option",children:[{tag:"span",ref:"eDragHandle",cls:"ag-drag-handle ag-column-drop-cell-drag-handle",role:"presentation"},{tag:"span",ref:"eText",cls:"ag-column-drop-cell-text",attrs:{"aria-hidden":"true"}},e?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:void 0,{tag:"span",ref:"eButton",cls:"ag-column-drop-cell-button",role:"presentation"}]},e&&(this.agComponents=[e.getSortIndicatorSelector()]),this.displayName=t.getDisplayNameForColumn(this.column,"columnDrop"),super.postConstruct(),e&&(this.setupSort(),this.addManagedEventListeners({sortChanged:()=>{this.setupAria()}})),this.isGroupingZone()&&this.addManagedPropertyListener("groupLockGroupColumns",()=>{this.refreshRemove(),this.refreshDraggable(),this.setupAria()})}getItem(){return this.column}getDisplayName(){return this.displayName}getTooltip(){return this.column.getColDef().headerTooltip}addAdditionalAriaInstructions(e,t){const i=this.gos.get("rowGroupPanelSuppressSort"),n=this.gos.get("functionsReadOnly");if(this.isAggregationZone()&&!n){const i=t("ariaDropZoneColumnValueItemDescription","Press ENTER to change the aggregation type");e.push(i)}if(this.isGroupingZone()&&this.column.isSortable()&&!i){const i=t("ariaDropZoneColumnGroupItemDescription","Press ENTER to sort");e.push(i)}super.addAdditionalAriaInstructions(e,t)}isMovable(){return this.isDraggable()}isDraggable(){return this.isReadOnly()}isRemovable(){return this.isReadOnly()}isReadOnly(){return!this.isGroupingAndLocked()&&!this.gos.get("functionsReadOnly")}getAriaDisplayName(){const e=this.getLocaleTextFunc(),{name:t,aggFuncName:i}=this.getColumnAndAggFuncName(),n=e("ariaDropZoneColumnComponentAggFuncSeparator"," of "),o={asc:e("ariaDropZoneColumnComponentSortAscending","ascending"),desc:e("ariaDropZoneColumnComponentSortDescending","descending")},s=this.column.getSort(),r=this.gos.get("rowGroupPanelSuppressSort");return[i&&"".concat(i).concat(n),t,this.isGroupingZone()&&!r&&s&&", ".concat(o[s])].filter(e=>!!e).join("")}getColumnAndAggFuncName(){const e=this.displayName;let t="";if(this.isAggregationZone()){const e=this.column.getAggFunc(),i="string"===typeof e?e:"agg";t=this.getLocaleTextFunc()(i,i)}return{name:e,aggFuncName:t}}setupSort(){if(this.column.isSortable()&&this.isGroupingZone()&&!this.gos.get("rowGroupPanelSuppressSort")){this.eSortIndicator.setupSort(this.column,!0);const e=e=>{e.preventDefault(),this.beans.sortSvc.progressSortFromEvent(this.column,e)};this.addGuiEventListener("click",e),this.addGuiEventListener("keydown",t=>{t.key===Eae.ENTER&&this.isGroupingZone()&&e(t)})}}getDefaultIconName(){return"hide"}createGetDragItem(){const{column:e}=this;return()=>{const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}}setupComponents(){super.setupComponents(),this.isAggregationZone()&&!this.gos.get("functionsReadOnly")&&this.addGuiEventListener("click",this.onShowAggFuncSelection.bind(this))}onKeyDown(e){super.onKeyDown(e);e.key===Eae.ENTER&&this.isAggregationZone()&&!this.gos.get("functionsReadOnly")&&(e.preventDefault(),this.onShowAggFuncSelection())}getDisplayValue(){const{name:e,aggFuncName:t}=this.getColumnAndAggFuncName();return this.isAggregationZone()?"".concat(t,"(").concat(e,")"):e}onShowAggFuncSelection(){if(this.popupShowing)return;this.popupShowing=!0;const{aggFuncSvc:e,popupSvc:t}=this.beans,i=new yve({cssIdentifier:"select-agg-func"}),n=e.getFuncNames(this.column),o=this.getGui(),s=i.getGui();i.setModel({getRow:function(e){return n[e]},getRowCount:function(){return n.length}}),this.createBean(i);const r=oce({tag:"div",cls:"ag-select-agg-func-popup"});r.style.top="0px",r.style.left="0px",r.appendChild(s),r.style.width="".concat(o.clientWidth,"px");const[a]=this.addManagedElementListeners(r,{focusout:e=>{!r.contains(e.relatedTarget)&&d&&d.hideFunc()}}),l=this.getLocaleTextFunc(),d=t.addPopup({modal:!0,eChild:r,closeOnEsc:!0,closedCallback:e=>{this.destroyBean(i),this.popupShowing=!1,"Escape"===(null===e||void 0===e?void 0:e.key)&&o.focus(),a&&a()},ariaLabel:l("ariaLabelAggregationFunction","Aggregation Function")});d&&i.setComponentCreator(this.createAggSelect.bind(this,d.hideFunc)),i.addGuiEventListener("keydown",e=>{if(e.key===Eae.ENTER||e.key===Eae.SPACE){const e=i.getLastFocusedRow();if(null==e)return;const t=i.getComponentAt(e);t&&t.selectItem()}}),t.positionPopupByComponent({type:"aggFuncSelect",eventSource:o,ePopup:r,keepWithinBounds:!0,additionalParams:{column:this.column},position:"under"}),i.refresh();let c=n.findIndex(e=>e===this.column.getAggFunc());-1===c&&(c=0),i.focusRow(c)}createAggSelect(e,t){const i=this.getLocaleTextFunc(),n=t.toString(),o=i(n,n);return new Tve(()=>{var i,n;e(),this.getGui().focus(),null===(i=this.beans.valueColsSvc)||void 0===i||null===(n=i.setColumnAggFunc)||void 0===n||n.call(i,this.column,t,"toolPanelDragAndDrop")},o)}isGroupingAndLocked(){return this.isGroupingZone()&&Sve(this.column,this.beans)}isAggregationZone(){return"aggregation"===this.dropZonePurpose}isGroupingZone(){return"rowGroup"===this.dropZonePurpose}getDragSourceType(){return _de.ToolPanel}destroy(){super.destroy(),this.column=null}},Tve=class extends hae{constructor(e,t){super({tag:"div",cls:"ag-select-agg-func-item",children:t}),this.selectItem=e,this.addGuiEventListener("click",this.selectItem)}},Rve=class extends Ive{constructor(e,t){super(e),this.dropZonePurpose=t,this.addElementClasses(this.getGui(),this.dropZonePurpose.toLowerCase())}init(e){super.init(e),this.addManagedEventListeners({newColumnsLoaded:this.refreshGui.bind(this)}),this.addManagedPropertyListeners(["functionsReadOnly","rowGroupPanelSuppressSort","groupLockGroupColumns"],this.refreshGui.bind(this))}getItems(e){var t;return null!==(t=e.columns)&&void 0!==t?t:[]}isInterestedIn(e){return e===_de.HeaderCell||e===_de.ToolPanel}minimumAllowedNewInsertIndex(){var e;const{gos:t,rowGroupColsSvc:i}=this.beans,n=t.get("groupLockGroupColumns"),o=null!==(e=null===i||void 0===i?void 0:i.columns.length)&&void 0!==e?e:0;return-1===n?o:Math.min(n,o)}showOrHideColumnOnExit(e){return this.isRowGroupPanel()&&Ose(this.gos,!0)&&!e.fromNudge}handleDragEnterEnd(e){if(this.showOrHideColumnOnExit(e)){const t=e.dragSource.getDragItem().columns;this.setColumnsVisible(t,!1,"uiColumnDragged")}}handleDragLeaveEnd(e){if(this.showOrHideColumnOnExit(e)){const t=e.dragSource.getDragItem();this.setColumnsVisible(t.columns,!0,"uiColumnDragged")}}setColumnsVisible(e,t,i){if(e){const n=e.filter(e=>!e.getColDef().lockVisible);this.beans.colModel.setColsVisible(n,t,i)}}isRowGroupPanel(){return"rowGroup"===this.dropZonePurpose}createPillComponent(e,t,i,n){return new Nve(e,t,i,this.dropZonePurpose,n)}},Eve=class extends Rve{constructor(e){super(e,"pivot")}postConstruct(){const e=this.getLocaleTextFunc(),t=e("pivotColumnsEmptyMessage","Drag here to set column labels"),i=e("pivots","Column Labels");super.init({icon:_ue("pivotPanel",this.beans,null),emptyMessage:t,title:i}),this.addManagedEventListeners({newColumnsLoaded:this.refresh.bind(this),columnPivotChanged:this.refresh.bind(this),columnPivotModeChanged:this.checkVisibility.bind(this)}),this.refresh()}getAriaLabel(){return this.getLocaleTextFunc()("ariaPivotDropZonePanelLabel","Column Labels")}refresh(){this.checkVisibility(),this.refreshGui()}checkVisibility(){const e=this.beans.colModel,t=e.isPivotMode();if(this.horizontal)switch(this.gos.get("pivotPanelShow")){case"always":this.setDisplayed(t);break;case"onlyWhenPivoting":{const i=e.isPivotActive();this.setDisplayed(t&&i);break}default:this.setDisplayed(!1)}else this.setDisplayed(t)}isItemDroppable(e,t){return!(this.gos.get("functionsReadOnly")||!e.isPrimary())&&(e.isAllowPivot()&&(!e.isPivotActive()||this.isSourceEventFromTarget(t)))}updateItems(e){var t;null===(t=this.beans.pivotColsSvc)||void 0===t||t.setColumns(e,"toolPanelUi")}getIconName(){return this.isPotentialDndItems()?"pivot":"notAllowed"}getExistingItems(){var e,t;return null!==(e=null===(t=this.beans.pivotColsSvc)||void 0===t?void 0:t.columns)&&void 0!==e?e:[]}},Pve=class extends Rve{constructor(e){super(e,"rowGroup")}postConstruct(){const e=this.getLocaleTextFunc(),t=e("rowGroupColumnsEmptyMessage","Drag here to set row groups"),i=e("groups","Row Groups");super.init({icon:_ue("rowGroupPanel",this.beans,null),emptyMessage:t,title:i}),this.addManagedEventListeners({columnRowGroupChanged:this.refreshGui.bind(this)})}getAriaLabel(){return this.getLocaleTextFunc()("ariaRowGroupDropZonePanelLabel","Row Groups")}isItemDroppable(e,t){return!(this.gos.get("functionsReadOnly")||!e.isPrimary()||e.colDef.showRowGroup)&&(e.isAllowRowGroup()&&(!e.isRowGroupActive()||this.isSourceEventFromTarget(t)))}updateItems(e){var t;null===(t=this.beans.rowGroupColsSvc)||void 0===t||t.setColumns(e,"toolPanelUi")}getIconName(){return this.isPotentialDndItems()?"group":"notAllowed"}getExistingItems(){var e,t;return null!==(e=null===(t=this.beans.rowGroupColsSvc)||void 0===t?void 0:t.columns)&&void 0!==e?e:[]}},Ove=class{constructor(e,t,i){this.beans=e,this.chartSvc=t,this.getLocaleTextFunc=i}getMenuItem(){var e=this;const t=this.getLocaleTextFunc(),i=function(i,n,o,s){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return{name:t(i,n+"\u200e"),action:()=>e.chartSvc.createPivotChart({chartType:o}),_key:s,_enterprise:r}};return{name:t("pivotChart","Pivot Chart"),_key:"pivotChart",subMenu:[{_key:"pivotColumnChart",name:t("columnChart","Column"),subMenu:[i("groupedColumn","Grouped","groupedColumn","pivotGroupedColumn"),i("stackedColumn","Stacked","stackedColumn","pivotStackedColumn"),i("normalizedColumn","100% Stacked","normalizedColumn","pivotNormalizedColumn")]},{_key:"pivotBarChart",name:t("barChart","Bar"),subMenu:[i("groupedBar","Grouped","groupedBar","pivotGroupedBar"),i("stackedBar","Stacked","stackedBar","pivotStackedBar"),i("normalizedBar","100% Stacked","normalizedBar","pivotNormalizedBar")]},{_key:"pivotPieChart",name:t("pieChart","Pie"),subMenu:[i("pie","Pie","pie","pivotPie"),i("donut","Donut","donut","pivotDonut")]},{_key:"pivotLineChart",name:t("lineChart","Line"),subMenu:[i("lineChart","Line","line","pivotLineChart"),i("stackedLine","Stacked","stackedLine","pivotStackedLine"),i("normalizedLine","100% Stacked","normalizedLine","pivotNormalizedLine")]},{_key:"pivotAreaChart",name:t("areaChart","Area"),subMenu:[i("areaChart","Area","area","pivotArea"),i("stackedArea","Stacked","stackedArea","pivotStackedArea"),i("normalizedArea","100% Stacked","normalizedArea","pivotNormalizedArea")]},{_key:"pivotXYChart",name:t("xyChart","X Y (Scatter)"),subMenu:[i("scatter","Scatter","scatter","pivotScatter"),i("bubble","Bubble","bubble","pivotBubble")]},{_key:"pivotStatisticalChart",_enterprise:!1,name:t("statisticalChart","Statistical"),subMenu:[i("histogramChart","Histogram","histogram","pivotHistogram",!1)]},{_key:"pivotHierarchicalChart",_enterprise:!0,name:t("hierarchicalChart","Hierarchical"),subMenu:[i("treemapChart","Treemap","treemap","pivotTreemap",!0),i("sunburstChart","Sunburst","sunburst","pivotSunburst",!0)]},{_key:"pivotFunnel",name:t("funnel","Funnel"),subMenu:[i("funnel","Funnel","funnel","pivotFunnel"),i("coneFunnel","Cone Funnel","coneFunnel","pivotConeFunnel"),i("pyramid","Pyramid","pyramid","pivotPyramid")]},{_key:"pivotCombinationChart",name:t("combinationChart","Combination"),subMenu:[i("columnLineCombo","Column & Line","columnLineCombo","pivotColumnLineCombo"),i("AreaColumnCombo","Area & Column","areaColumnCombo","pivotAreaColumnCombo")]}],icon:_ue("chart",this.beans,void 0)}}getConfigLookup(){return{columnGroup:{_key:"pivotColumnChart",column:"pivotGroupedColumn",stackedColumn:"pivotStackedColumn",normalizedColumn:"pivotNormalizedColumn"},barGroup:{_key:"pivotBarChart",bar:"pivotGroupedBar",stackedBar:"pivotStackedBar",normalizedBar:"pivotNormalizedBar"},pieGroup:{_key:"pivotPieChart",pie:"pivotPie",donut:"pivotDonut",doughnut:"pivotDonut"},lineGroup:{_key:"pivotLineChart",line:"pivotLineChart",stackedLine:"pivotStackedLine",normalizedLine:"pivotNormalizedLine"},areaGroup:{_key:"pivotAreaChart",area:"pivotArea",stackedArea:"pivotStackedArea",normalizedArea:"pivotNormalizedArea"},scatterGroup:{_key:"pivotXYChart",bubble:"pivotBubble",scatter:"pivotScatter"},combinationGroup:{_key:"pivotCombinationChart",columnLineCombo:"pivotColumnLineCombo",areaColumnCombo:"pivotAreaColumnCombo",customCombo:null},hierarchicalGroup:{_key:"pivotHierarchicalChart",treemap:"pivotTreemap",sunburst:"pivotSunburst"},statisticalGroup:{_key:"pivotStatisticalChart",histogram:"pivotHistogram",rangeBar:null,rangeArea:null,boxPlot:null},funnelGroup:{_key:"pivotFunnel",funnel:"pivotFunnel",coneFunnel:"pivotConeFunnel",pyramid:"pivotPyramid"},polarGroup:null,specializedGroup:null}}},Fve=class{constructor(e,t,i){this.beans=e,this.chartSvc=t,this.getLocaleTextFunc=i}getMenuItem(){var e=this;const t=this.getLocaleTextFunc(),i=function(i,n,o,s){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return{name:t(i,n),action:()=>e.chartSvc.createChartFromCurrentRange(o),_key:s,_enterprise:r}};return{name:t("chartRange","Chart Range"),_key:"chartRange",subMenu:[{name:t("columnChart","Column"),subMenu:[i("groupedColumn","Grouped","groupedColumn","rangeGroupedColumn"),i("stackedColumn","Stacked","stackedColumn","rangeStackedColumn"),i("normalizedColumn","100% Stacked","normalizedColumn","rangeNormalizedColumn")],_key:"rangeColumnChart"},{name:t("barChart","Bar"),subMenu:[i("groupedBar","Grouped","groupedBar","rangeGroupedBar"),i("stackedBar","Stacked","stackedBar","rangeStackedBar"),i("normalizedBar","100% Stacked","normalizedBar","rangeNormalizedBar")],_key:"rangeBarChart"},{name:t("pieChart","Pie"),subMenu:[i("pie","Pie","pie","rangePie"),i("donut","Donut","donut","rangeDonut")],_key:"rangePieChart"},{name:t("lineChart","Line"),subMenu:[i("lineChart","Line","line","rangeLineChart"),i("stackedLine","Stacked","stackedLine","rangeStackedLine"),i("normalizedLine","100% Stacked","normalizedLine","rangeNormalizedLine")],_key:"rangeLineChart"},{name:t("areaChart","Area"),subMenu:[i("areaChart","Area","area","rangeArea"),i("stackedArea","Stacked","stackedArea","rangeStackedArea"),i("normalizedArea","100% Stacked","normalizedArea","rangeNormalizedArea")],_key:"rangeAreaChart"},{name:t("xyChart","X Y (Scatter)"),subMenu:[i("scatter","Scatter","scatter","rangeScatter"),i("bubble","Bubble","bubble","rangeBubble")],_key:"rangeXYChart"},{name:t("polarChart","Polar"),subMenu:[i("radarLine","Radar Line","radarLine","rangeRadarLine"),i("radarArea","Radar Area","radarArea","rangeRadarArea"),i("nightingale","Nightingale","nightingale","rangeNightingale"),i("radialColumn","Radial Column","radialColumn","rangeRadialColumn"),i("radialBar","Radial Bar","radialBar","rangeRadialBar")],_key:"rangePolarChart",_enterprise:!0},{name:t("statisticalChart","Statistical"),subMenu:[i("boxPlot","Box Plot","boxPlot","rangeBoxPlot",!0),i("histogramChart","Histogram","histogram","rangeHistogram",!1),i("rangeBar","Range Bar","rangeBar","rangeRangeBar",!0),i("rangeArea","Range Area","rangeArea","rangeRangeArea",!0)],_key:"rangeStatisticalChart",_enterprise:!1},{name:t("hierarchicalChart","Hierarchical"),subMenu:[i("treemap","Treemap","treemap","rangeTreemap"),i("sunburst","Sunburst","sunburst","rangeSunburst")],_key:"rangeHierarchicalChart",_enterprise:!0},{name:t("specializedChart","Specialized"),subMenu:[i("heatmap","Heatmap","heatmap","rangeHeatmap"),i("waterfall","Waterfall","waterfall","rangeWaterfall")],_key:"rangeSpecializedChart",_enterprise:!0},{name:t("funnel","Funnel"),subMenu:[i("funnel","Funnel","funnel","rangeFunnel"),i("coneFunnel","Cone Funnel","coneFunnel","rangeConeFunnel"),i("pyramid","Pyramid","pyramid","rangePyramid")],_key:"rangeFunnel",_enterprise:!0},{name:t("combinationChart","Combination"),subMenu:[i("columnLineCombo","Column & Line","columnLineCombo","rangeColumnLineCombo"),i("AreaColumnCombo","Area & Column","areaColumnCombo","rangeAreaColumnCombo")],_key:"rangeCombinationChart"}],icon:_ue("chart",this.beans,void 0)}}getConfigLookup(){return{columnGroup:{_key:"rangeColumnChart",column:"rangeGroupedColumn",stackedColumn:"rangeStackedColumn",normalizedColumn:"rangeNormalizedColumn"},barGroup:{_key:"rangeBarChart",bar:"rangeGroupedBar",stackedBar:"rangeStackedBar",normalizedBar:"rangeNormalizedBar"},pieGroup:{_key:"rangePieChart",pie:"rangePie",donut:"rangeDonut",doughnut:"rangeDonut"},lineGroup:{_key:"rangeLineChart",line:"rangeLineChart",stackedLine:"rangeStackedLine",normalizedLine:"rangeNormalizedLine"},areaGroup:{_key:"rangeAreaChart",area:"rangeArea",stackedArea:"rangeStackedArea",normalizedArea:"rangeNormalizedArea"},scatterGroup:{_key:"rangeXYChart",bubble:"rangeBubble",scatter:"rangeScatter"},polarGroup:{_key:"rangePolarChart",radarLine:"rangeRadarLine",radarArea:"rangeRadarArea",nightingale:"rangeNightingale",radialColumn:"rangeRadialColumn",radialBar:"rangeRadialBar"},statisticalGroup:{_key:"rangeStatisticalChart",boxPlot:"rangeBoxPlot",histogram:"rangeHistogram",rangeBar:"rangeRangeBar",rangeArea:"rangeRangeArea"},hierarchicalGroup:{_key:"rangeHierarchicalChart",treemap:"rangeTreemap",sunburst:"rangeSunburst"},specializedGroup:{_key:"rangeSpecializedChart",heatmap:"rangeHeatmap",waterfall:"rangeWaterfall"},funnelGroup:{_key:"rangeFunnel",funnel:"rangeFunnel",coneFunnel:"rangeConeFunnel",pyramid:"rangePyramid"},combinationGroup:{_key:"rangeCombinationChart",columnLineCombo:"rangeColumnLineCombo",areaColumnCombo:"rangeAreaColumnCombo",customCombo:null}}}},zve={pinSubMenu:"PinnedColumn",pinLeft:"PinnedColumn",pinRight:"PinnedColumn",clearPinned:"PinnedColumn",pinRowSubMenu:"PinnedRow",pinBottom:"PinnedRow",pinTop:"PinnedRow",unpinRow:"PinnedRow",valueAggSubMenu:"SharedAggregation",autoSizeThis:"ColumnAutoSize",autoSizeAll:"ColumnAutoSize",rowGroup:"SharedRowGrouping",rowUnGroup:"SharedRowGrouping",resetColumns:"CommunityCore",expandAll:["ClientSideRowModelHierarchy","ServerSideRowModel"],contractAll:["ClientSideRowModelHierarchy","ServerSideRowModel"],copy:"Clipboard",copyWithHeaders:"Clipboard",copyWithGroupHeaders:"Clipboard",cut:"Clipboard",paste:"Clipboard",export:["CsvExport","ExcelExport"],csvExport:"CsvExport",excelExport:"ExcelExport",separator:"CommunityCore",pivotChart:"IntegratedCharts",chartRange:"IntegratedCharts",columnFilter:"ColumnFilter",columnChooser:"ColumnMenu",sortAscending:"Sort",sortDescending:"Sort",sortAbsoluteAscending:"Sort",sortAbsoluteDescending:"Sort",sortUnSort:"Sort"};var Bve="separator";function Vve(e,t){if(e)for(let i=e.length-2;i>=0;i--){const n=e[i]===t,o=e[i+1]===t;n&&o&&e.splice(i+1,1)}}var Gve={sortAscending:{fallback:"Sort Ascending",getSortDef:()=>({type:"default",direction:"asc"})},sortDescending:{fallback:"Sort Descending",getSortDef:()=>({type:"default",direction:"desc"})},sortAbsoluteAscending:{fallback:"Sort Absolute Ascending",getSortDef:()=>({type:"absolute",direction:"asc"})},sortAbsoluteDescending:{fallback:"Sort Absolute Descending",getSortDef:()=>({type:"absolute",direction:"desc"})},sortUnSort:{fallback:"Clear Sort",getSortDef:e=>{var t;return{type:are(null===(t=e.getSortDef())||void 0===t?void 0:t.type),direction:null}}}};function Hve(e,t,i,n){let o;if(e.isPrimary())o=e;else{const t=e.getColDef().pivotValueColumn;o=Fie(t)?t:void 0}const s=[];if(o){const e=o.isValueActive(),r=t.getFuncNames(o);s.push({name:n("noAggregation","None"),action:()=>{i.removeColumns([o],"contextMenu"),i.setColumnAggFunc(o,void 0,"contextMenu")},checked:!e});for(const a of r)s.push({name:n(a,t.getDefaultFuncLabel(a)),action:()=>{i.setColumnAggFunc(o,a,"contextMenu"),i.addColumns([o],"contextMenu")},checked:e&&o.getAggFunc()===a})}return s}var jve="ag-context-menu-open";var Wve={moduleName:"MenuCore",version:fve,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="menuItemMapper"}mapWithStockItems(e,t,i,n,o){if(!e)return[];const s=[],r=this.getLocaleTextFunc(),{beans:a,gos:l}=this,{pinnedCols:d,colAutosize:c,aggFuncSvc:u,rowGroupColsSvc:h,colNames:g,colModel:m,clipboardSvc:f,expansionSvc:v,focusSvc:y,csvCreator:b,excelCreator:x,menuSvc:C,colChooserFactory:S,sortSvc:w,chartMenuItemMapper:M,valueColsSvc:k,pinnedRowModel:D}=a,I=(e,t,n,o)=>{switch(function(e,t){const i=zve[t];i&&e.assertModuleRegistered(i,"menu item '".concat(t,"'"))}(l,e),e){case"pinSubMenu":return d&&t?{name:r("pinColumn","Pin Column"),icon:_ue("menuPin",a,null),subMenu:["clearPinned","pinLeft","pinRight"]}:null;case"pinLeft":return d&&t?{name:r("pinLeft","Pin Left"),action:()=>d.setColsPinned([t],"left",o),checked:!!t&&t.isPinnedLeft()}:null;case"pinRight":return d&&t?{name:r("pinRight","Pin Right"),action:()=>d.setColsPinned([t],"right",o),checked:!!t&&t.isPinnedRight()}:null;case"clearPinned":return d&&t?{name:r("noPin","No Pin"),action:()=>d.setColsPinned([t],null,o),checked:!!t&&!t.isPinned()}:null;case"pinRowSubMenu":{var s,p;const e=l.get("enableRowPinning"),n=[],o=null!==(s=null===i||void 0===i?void 0:i.rowPinned)&&void 0!==s?s:null===i||void 0===i||null===(p=i.pinnedSibling)||void 0===p?void 0:p.rowPinned;return o&&n.push("unpinRow"),e&&"bottom"!==e&&"top"!=o&&n.push("pinTop"),e&&"top"!==e&&"bottom"!=o&&n.push("pinBottom"),null!==D&&void 0!==D&&D.isManual()?{name:r("pinRow","Pin Row"),icon:_ue("rowPin",a,t),subMenu:n}:null}case"pinTop":return null!==D&&void 0!==D&&D.isManual()?{name:r("pinTop","Pin to Top"),icon:_ue("rowPinTop",a,t),action:e=>{let{node:t,column:i}=e;return t&&D.pinRow(t,"top",i)}}:null;case"pinBottom":return null!==D&&void 0!==D&&D.isManual()?{name:r("pinBottom","Pin to Bottom"),icon:_ue("rowPinBottom",a,t),action:e=>{let{node:t,column:i}=e;return t&&D.pinRow(t,"bottom",i)}}:null;case"unpinRow":return null!==D&&void 0!==D&&D.isManual()?{name:r("unpinRow","Unpin Row"),icon:_ue("rowUnpin",a,t),action:e=>{let{node:t,column:i}=e;return t&&D.pinRow(t,null,i)}}:null;case"valueAggSubMenu":return u&&k&&(null!==t&&void 0!==t&&t.isPrimary()||null!==t&&void 0!==t&&t.getColDef().pivotValueColumn)?{name:r("valueAggregation","Value Aggregation"),icon:_ue("menuValue",a,null),subMenu:Hve(t,u,k,r),disabled:l.get("functionsReadOnly")}:null;case"autoSizeThis":return c?{name:r("autosizeThisColumn","Autosize This Column"),action:()=>t&&c.autoSizeColumn(t,o,l.get("skipHeaderOnAutoSize"))}:null;case"autoSizeAll":return c?{name:r("autosizeAllColumns","Autosize All Columns"),action:()=>c.autoSizeAllColumns({source:o,skipHeader:l.get("skipHeaderOnAutoSize")})}:null;case"rowGroup":return h?{name:r("groupBy","Group by")+" "+g.getDisplayNameForColumn(t,"header"),disabled:l.get("functionsReadOnly")||(null===t||void 0===t?void 0:t.isRowGroupActive())||!(null!==t&&void 0!==t&&t.getColDef().enableRowGroup),action:()=>h.addColumns([t],o),icon:_ue("menuAddRowGroup",a,null)}:null;case"rowUnGroup":if(h&&l.isModuleRegistered("SharedRowGrouping")){const e=null===t||void 0===t?void 0:t.getColDef().showRowGroup,i=l.get("groupLockGroupColumns");let n,s,d;var I;if(!0===e)n=r("ungroupAll","Un-Group All"),s=l.get("functionsReadOnly")||-1===i||i>=(null!==(I=h.columns.length)&&void 0!==I?I:0),d=()=>h.setColumns(h.columns.slice(0,i),o);else if("string"===typeof e){const t=m.getColDefCol(e),i=null!=t?g.getDisplayNameForColumn(t,"header"):e;n=r("ungroupBy","Un-Group by")+" "+i,s=l.get("functionsReadOnly")||Sve(t,a),d=()=>{h.removeColumns([e],o)}}else n=r("ungroupBy","Un-Group by")+" "+g.getDisplayNameForColumn(t,"header"),s=l.get("functionsReadOnly")||!(null!==t&&void 0!==t&&t.isRowGroupActive())||!(null!==t&&void 0!==t&&t.getColDef().enableRowGroup)||Sve(t,a),d=()=>h.removeColumns([t],o);return{name:n,disabled:s,action:d,icon:_ue("menuRemoveRowGroup",a,null)}}return null;case"resetColumns":return{name:r("resetColumns","Reset Columns"),action:()=>Jre(a,o)};case"expandAll":return v?{name:r("expandAll","Expand All Row Groups"),action:()=>v.expandAll(!0)}:null;case"contractAll":return v?{name:r("collapseAll","Collapse All Row Groups"),action:()=>v.expandAll(!1)}:null;case"copy":return f?{name:r("copy","Copy"),shortcut:r("ctrlC","Ctrl+C"),icon:_ue("clipboardCopy",a,null),action:()=>f.copyToClipboard()}:null;case"copyWithHeaders":return f?{name:r("copyWithHeaders","Copy with Headers"),icon:_ue("clipboardCopy",a,null),action:()=>f.copyToClipboard({includeHeaders:!0})}:null;case"copyWithGroupHeaders":return f?{name:r("copyWithGroupHeaders","Copy with Group Headers"),icon:_ue("clipboardCopy",a,null),action:()=>f.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}:null;case"cut":if(f){const e=y.getFocusedCell(),t=e?mue(a,e):null,i=!!t&&(null===e||void 0===e?void 0:e.column.isCellEditable(t));return{name:r("cut","Cut"),shortcut:r("ctrlX","Ctrl+X"),icon:_ue("clipboardCut",a,null),disabled:!i||l.get("suppressCutToClipboard"),action:()=>f.cutToClipboard(void 0,"contextMenu")}}return null;case"paste":if(f){const e=l.get("suppressClipboardApi")||l.get("suppressClipboardPaste")||!t||!i||!t.isCellEditable(i)||t.isSuppressPaste(i);return{name:r("paste","Paste"),shortcut:r("ctrlV","Ctrl+V"),icon:_ue("clipboardPaste",a,null),disabled:e,action:()=>f.pasteFromClipboard()}}return null;case"export":{const e=[];return!l.get("suppressCsvExport")&&b&&e.push("csvExport"),!l.get("suppressExcelExport")&&x&&e.push("excelExport"),e.length?{name:r("export","Export"),subMenu:e,icon:_ue("save",a,null)}:null}case"csvExport":return b?{name:r("csvExport","CSV Export"),icon:_ue("csvExport",a,null),action:()=>b.exportDataAsCsv()}:null;case"excelExport":return x?{name:r("excelExport","Excel Export"),icon:_ue("excelExport",a,null),action:()=>x.exportDataAsExcel()}:null;case"separator":return e;case"pivotChart":case"chartRange":return M.getChartItems(e);case"columnFilter":return C&&t?{name:r("columnFilter","Column Filter"),icon:_ue("filter",a,null),action:()=>C.showFilterMenu({column:t,buttonElement:n(),containerType:"columnFilter",positionBy:"button"})}:null;case"columnChooser":{const e=y.focusedHeader;return S?{name:r("columnChooser","Choose Columns"),icon:_ue("columns",a,null),action:()=>S.showColumnChooser({column:t,eventSource:n(),headerPosition:e})}:null}case"sortUnSort":case"sortAscending":case"sortDescending":case"sortAbsoluteAscending":case"sortAbsoluteDescending":{if(!w||!t)return null;const{fallback:i,getSortDef:n}=Gve[e];return{name:r(e,i),icon:_ue(e,a,null),action:()=>w.setSortForColumn(t,n(t),!1,o)}}default:return lse(176,{key:e}),null}};for(const A of e){let e;if(e="string"===typeof A?I(A,t,n,o):p({},A),!e)continue;const r=e,{subMenu:a}=r;a&&a instanceof Array&&(r.subMenu=this.mapWithStockItems(a,t,i,n,o)),null!=e&&s.push(e)}return Vve(s,Bve),s}},class extends yoe{constructor(){super(...arguments),this.beanName="chartMenuItemMapper"}getChartItems(e){var t,i;const n=this.beans,o=n.chartSvc,s="pivotChart"===e;if(!o)return null;const r=this.getLocaleTextFunc.bind(this),a=s?new Ove(n,o,r):new Fve(n,o,r),l=o.isEnterprise();let d=a.getMenuItem();if(null!==(t=d)&&void 0!==t&&t.subMenu&&!l){const e=t=>{var i;return p(p({},t),{},{subMenu:null===(i=t.subMenu)||void 0===i?void 0:i.filter(e=>!e._enterprise).map(t=>e(t))})};d=e(d)}const c=null===(i=this.gos.get("chartToolPanelsDef"))||void 0===i||null===(i=i.settingsPanel)||void 0===i?void 0:i.chartGroupsDef;return c&&(d=this.filterAndOrderChartMenu(d,c,a.getConfigLookup())),this.cleanInternals(d)}cleanInternals(e){if(!e)return e;const t=e=>{null===e||void 0===e||delete e._key,null===e||void 0===e||delete e._enterprise;for(const n of null!==(i=null===e||void 0===e?void 0:e.subMenu)&&void 0!==i?i:[]){var i;t(n)}return e};return t(e)}buildLookup(e){const t={},i=e=>{if(t[e._key]=e,e.subMenu)for(const t of e.subMenu)i(t)};return i(e),t}filterAndOrderChartMenu(e,t,i){var n;const o=this.buildLookup(e),s=p(p({},e),{},{subMenu:[]});for(const l of Object.keys(t)){const e=t[l],n=i[l];if(null===n)continue;if(void 0==n){lse(173,{group:l});continue}const d=o[n._key];if(d)if(d.subMenu){const t=e.map(e=>{const t=n[e];if(void 0!=t)return o[t];lse(174,{group:l,chartType:e})}).filter(e=>void 0!==e);var r;if(t.length>0)d.subMenu=t,null===(r=s.subMenu)||void 0===r||r.push(d)}else{var a;null===(a=s.subMenu)||void 0===a||a.push(d)}}return 0==(null===(n=s.subMenu)||void 0===n?void 0:n.length)?null:s}},class extends yoe{constructor(){super(...arguments),this.beanName="menuUtils"}restoreFocusOnClose(e,t,i,n){const{eventSource:o}=e,s=i instanceof KeyboardEvent;if(!n&&!s||!o)return;const r=Uie(this.beans);(t.contains(r)||$ie(this.beans))&&this.focusHeaderCell(e)}closePopupAndRestoreFocusOnSelect(e,t,i){let n;null!==i&&void 0!==i&&i.keyboardEvent&&(n=i.keyboardEvent),e(n&&{keyboardEvent:n});const o=this.beans,s=o.focusSvc,r=s.getFocusedCell();if($ie(o))if(r){const{rowIndex:e,rowPinned:t,column:i}=r;s.setFocusedCell({rowIndex:e,column:i,rowPinned:t,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}else this.focusHeaderCell(t)}onContextMenu(e){const{mouseEvent:t,touchEvent:i,showMenuCallback:n,source:o}=e;if(!this.gos.get("allowContextMenuWithControlKey")&&t&&(t.ctrlKey||t.metaKey))return;if(t&&this.blockMiddleClickScrollsIfNeeded(t),"ui"===o&&this.gos.get("suppressContextMenu"))return;if(n(null!==t&&void 0!==t?t:i.touches[0])){const e=null!==t&&void 0!==t?t:i;null!==e&&void 0!==e&&e.cancelable&&e.preventDefault()}}async focusHeaderCell(e){const{column:t,columnIndex:i,headerPosition:n,eventSource:o}=e,{visibleCols:s,headerNavigation:r,focusSvc:a}=this.beans,l=await s.allCols.some(e=>e===t);if(this.isAlive())if(null!==t&&void 0!==t&&t.isAlive()&&l&&o&&Vne(o)){const e=ole(o);e&&(null===r||void 0===r||r.scrollToColumn(t),e.focus())}else if(n&&-1!==i){const e=s.allCols,t=e[i]||pre(e);t&&a.focusHeaderPosition({headerPosition:{headerRowIndex:n.headerRowIndex,column:t}})}}blockMiddleClickScrollsIfNeeded(e){this.gos.get("suppressMiddleClickScrolls")&&2===e.which&&e.preventDefault()}}],icons:{chart:"chart",columns:"columns",loadingMenuItems:"loading",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",save:"save",csvExport:"csv",excelExport:"excel",sortAscending:"asc",sortDescending:"desc",sortAbsoluteAscending:"aasc",sortAbsoluteDescending:"adesc",sortUnSort:"none"},dependsOn:[vve,mme,gme,xve]},_ve={moduleName:"ContextMenu",version:fve,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="contextMenuSvc",this.focusedCell=null}postConstruct(){this.menu=this.createManagedBean(new pve({menuItemCallbacks:Mve,getMenuItems:this.getMenuItems.bind(this),mapMenuItems:this.mapWithStockItems.bind(this),beforeMenuOpen:this.beforeMenuOpen.bind(this),onMenuOpen:this.onMenuOpen.bind(this),onMenuClose:this.onMenuClose.bind(this),afterMenuDestroyed:this.afterMenuDestroyed.bind(this),onVisibleChanged:this.dispatchVisibleChangedEvent.bind(this),shouldBlockMenuOpen:()=>{var e;return!(null===(e=this.beans.overlays)||void 0===e||!e.exclusive)}}))}hideActiveMenu(){this.menu.hideActiveMenu()}getMenuItems(e,t){var i;const{column:n,node:o,value:s}=e,r=[],{clipboardSvc:a,chartSvc:l,csvCreator:d,excelCreator:c,colModel:u,rangeSvc:h,gos:p}=this.beans;if(Fie(o)&&a&&n&&(p.get("suppressCutToClipboard")||r.push("cut"),r.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator")),p.get("enableCharts")&&l&&(u.isPivotMode()&&r.push("pivotChart"),h&&!h.isEmpty()&&r.push("chartRange")),Fie(o)){const e=p.get("enableRowPinning"),t=p.get("isRowPinnable");if(e){const e=o.level>-1&&o.footer,i=-1===o.level&&o.footer,n=Lse(p);if(i&&!("pinnedBottom"===n||"pinnedTop"===n)||!i&&!e){var g;(null===(g=null===t||void 0===t?void 0:t(o))||void 0===g||g)&&r.push("pinRowSubMenu")}}const i=p.get("suppressExcelExport")||!c,n=p.get("suppressCsvExport")||!d;!Uae()&&(!i||!n)&&r.push("export")}const m=r.length?r:void 0,f=null===n||void 0===n?void 0:n.getColDef().contextMenuItems;if(Array.isArray(f))return f;if("function"===typeof f)return f(Kse(p,{column:n,node:o,value:s,defaultItems:m,event:t}));const v=p.getCallback("getContextMenuItems");return null!==(i=null===v||void 0===v?void 0:v({column:n,node:o,value:s,defaultItems:m,event:t}))&&void 0!==i?i:r}getContextMenuPosition(e,t){const i=this.getRowCtrl(e),n=this.getCellGui(i,t);var o;if(!n)return{x:0,y:null!==(o=null===i||void 0===i?void 0:i.getRowYPosition())&&void 0!==o?o:0};const s=n.getBoundingClientRect();return{x:s.x+s.width/2,y:s.y+s.height/2}}showContextMenu(e){var t,i,n,o;const s=null!==(t=e.rowNode)&&void 0!==t?t:null,r=null!==(i=e.column)&&void 0!==i?i:null;let{anchorToElement:a,value:l,source:d}=e;s&&r&&null==l&&(l=this.beans.valueSvc.getValueForDisplay({column:r,node:s}).value),null==a&&(a=this.getContextMenuAnchorElement(s,r)),this.beans.menuUtils.onContextMenu({mouseEvent:null!==(n=e.mouseEvent)&&void 0!==n?n:null,touchEvent:null!==(o=e.touchEvent)&&void 0!==o?o:null,showMenuCallback:e=>this.menu.showMenu({node:s,column:r,value:l},e,a),source:d})}handleContextMenuMouseEvent(e,t,i,n){var o,s,r,a,l;const d=null!==(o=null!==(s=null===n||void 0===n?void 0:n.rowNode)&&void 0!==s?s:null===i||void 0===i?void 0:i.rowNode)&&void 0!==o?o:null,c=null!==(r=null!==(a=null===n||void 0===n?void 0:n.column)&&void 0!==a?a:null===i||void 0===i||null===(l=i.findFullWidthInfoForEvent(e||t))||void 0===l?void 0:l.column)&&void 0!==r?r:null,{valueSvc:u,ctrlsSvc:h}=this.beans,p=c?u.getValue(c,d):null,g=h.getGridBodyCtrl(),m=n?n.eGui:g.eGridBody;this.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:d,column:c,value:p,anchorToElement:m,source:"ui"})}beforeMenuOpen(e){e.column||this.beans.focusSvc.clearFocusedCell()}onMenuOpen(){const{ctrlsSvc:e,focusSvc:t}=this.beans;e.getGridBodyCtrl().eGridBody.classList.add(jve),this.focusedCell=t.getFocusedCell()}onMenuClose(){this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody.classList.remove(jve)}afterMenuDestroyed(){const{beans:e,focusedCell:t}=this;wue(e,t)}dispatchVisibleChangedEvent(e,t){this.eventSvc.dispatchEvent({type:"contextMenuVisibleChanged",visible:e,source:t})}getRowCtrl(e){const{rowIndex:t,rowPinned:i}=e||{};if(null!=t)return this.beans.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i})||void 0}getCellGui(e,t){if(!e||!t)return;const i=e.getCellCtrl(t);return(null===i||void 0===i?void 0:i.eGui)||void 0}getContextMenuAnchorElement(e,t){const i=this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody,n=this.getRowCtrl(e);if(!n)return i;const o=this.getCellGui(n,t);return o||(n.isFullWidth()?n.getFullWidthElement():i)}mapWithStockItems(e,t,i){const{column:n,node:o}=t;return this.beans.menuItemMapper.mapWithStockItems(e,n,o,i,"contextMenu")}}],apiFunctions:{showContextMenu:function(e,t){const{contextMenuSvc:i}=e;if(!i)return;const{rowNode:n,column:o,value:s,x:r,y:a}=t||{};let{x:l,y:d}=i.getContextMenuPosition(n,o);null!=r&&(l=r),null!=a&&(d=a),i.showContextMenu({mouseEvent:new MouseEvent("mousedown",{clientX:l,clientY:d}),rowNode:n,column:o,value:s,source:"api"})}},dependsOn:[Wve]};var Kve={sum:"Sum",first:"First",last:"Last",min:"Min",max:"Max",count:"Count",avg:"Average"};function Uve(e){const{values:t}=e;let i=null;for(let n=0;n<t.length;n++){const e=t[n];"number"===typeof e?null===i?i=e:i+="number"===typeof i?e:BigInt(e):"bigint"===typeof e&&(i=null===i?e:("bigint"===typeof i?i:BigInt(i))+e)}return i}function Yve(e){return e.values.length>0?e.values[0]:null}function $ve(e){return e.values.length>0?pre(e.values):null}function Zve(e){const{values:t}=e;let i=null;for(let n=0;n<t.length;n++){const e=t[n];"number"!==typeof e&&"bigint"!==typeof e||!(null===i||i>e)||(i=e)}return i}function Xve(e){const{values:t}=e;let i=null;for(let n=0;n<t.length;n++){const e=t[n];"number"!==typeof e&&"bigint"!==typeof e||!(null===i||i<e)||(i=e)}return i}var qve=Object.freeze({toString:function(){return this.value.toString()},toNumber:function(){return this.value}});function Qve(e){var t;const{values:i}=e;let n=0;for(let r=0;r<i.length;r++){const e=i[r];n+=null!=e&&"number"===typeof e.value?e.value:1}const o=null===(t=e.rowNode)||void 0===t||null===(t=t.aggData)||void 0===t?void 0:t[e.column.getColId()];if(o&&o.value===n)return o;const s=Object.create(qve);return s.value=n,s}var Jve=Object.freeze({toString:function(){return"number"===typeof this.value||"bigint"===typeof this.value?this.value.toString():""},toNumber:function(){return this.value}});function eye(e){var t,i;const{values:n}=e;let o=0,s=0;for(let d=0;d<n.length;d++){const e=n[d];let t=null;"number"===typeof e||"bigint"===typeof e?(t=e,s++):null==e||"number"!==typeof e.value&&"bigint"!==typeof e.value||"number"!==typeof e.count||(t=e.value*("number"===typeof e.value?e.count:BigInt(e.count)),s+=e.count),"number"===typeof t?o+="number"===typeof o?t:BigInt(t):"bigint"===typeof t&&(o=("bigint"===typeof o?o:BigInt(o))+t)}let r=null;s>0&&(r=o/("number"===typeof o?s:BigInt(s)));const a=null===(t=e.rowNode)||void 0===t||null===(t=t.aggData)||void 0===t?void 0:t[null===(i=e.column)||void 0===i?void 0:i.getColId()];if(a&&a.count===s&&a.value===r)return a;const l=Object.create(Jve);return l.count=s,l.value=r,l}function tye(e,t,i,n,o,s){const r="string"===typeof i?e.aggFuncSvc.getAggFunc(i):i;if("function"!==typeof r)return lse(109,{inputValue:i.toString(),allSuggestions:e.aggFuncSvc.getFuncNames(n)}),null;return r(Kse(e.gos,{values:t,column:n,colDef:n.colDef,pivotResultColumn:s,rowNode:o,data:null===o||void 0===o?void 0:o.data}))}function iye(e,t){if(e.sibling)return;const i=tce(e,t);i.footer=!0,i.setRowTop(null),i.setRowIndex(null),i.oldRowTop=null,i.id="rowGroupFooter_"+e.id,i.sibling=e,e.sibling=i}function nye(e){const t=e.sibling;t&&(t._destroy(!1),e.sibling=void 0,t.sibling=void 0)}var oye=class extends oae{constructor(){super(...arguments),this.beanName="valueColsSvc",this.eventName="columnValueChanged",this.columnProcessors={set:(e,t,i)=>this.setValueActive(t,e,i),add:(e,t,i)=>this.setValueActive(!0,e,i),remove:(e,t,i)=>this.setValueActive(!1,e,i)},this.columnExtractors={setFlagFunc:(e,t,i)=>this.setColValueActive(e,t,i),getIndexFunc:()=>{},getInitialIndexFunc:()=>{},getValueFunc:e=>{const t=e.aggFunc;return null===t||""===t?null:void 0!==t?!!t:void 0},getInitialValueFunc:e=>null!=e.initialAggFunc&&""!=e.initialAggFunc},this.modifyColumnsNoEventsCallbacks={addCol:e=>this.columns.push(e),removeCol:e=>fre(this.columns,e)}}extractCols(e,t){this.columns=super.extractCols(e,t);for(const i of this.columns){const e=i.getColDef();null!=e.aggFunc&&""!=e.aggFunc?this.setColAggFunc(i,e.aggFunc):i.getAggFunc()||this.setColAggFunc(i,e.initialAggFunc)}return this.columns}setColumnAggFunc(e,t,i){if(!e)return;const n=this.colModel.getColDefCol(e);n&&(this.setColAggFunc(n,t),this.dispatchColumnChangedEvent(this.eventSvc,this.eventName,[n],i))}syncColumnWithState(e,t,i){const n=i("aggFunc").value1;void 0!==n&&("string"===typeof n?(this.setColAggFunc(e,n),e.isValueActive()||(this.setColValueActive(e,!0,t),this.modifyColumnsNoEventsCallbacks.addCol(e))):(Fie(n)&&lse(33),e.isValueActive()&&(this.setColValueActive(e,!1,t),this.modifyColumnsNoEventsCallbacks.removeCol(e))))}setValueActive(e,t,i){if(e!==t.isValueActive()&&(this.setColValueActive(t,e,i),e&&!t.getAggFunc()&&this.aggFuncSvc)){const e=this.aggFuncSvc.getDefaultAggFunc(t);this.setColAggFunc(t,e)}}setColAggFunc(e,t){e.aggFunc=t,e.dispatchStateUpdatedEvent("aggFunc")}setColValueActive(e,t,i){e.aggregationActive!==t&&(e.aggregationActive=t,e.dispatchColEvent("columnValueChanged",i))}},sye={moduleName:"SharedAggregation",version:fve,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="aggFuncSvc",this.aggFuncsMap={},this.initialised=!1}postConstruct(){this.init()}init(){this.initialised||(this.initialiseWithDefaultAggregations(),this.addAggFuncs(this.gos.get("aggFuncs")))}initialiseWithDefaultAggregations(){const e=this.aggFuncsMap;e.sum=Uve,e.first=Yve,e.last=$ve,e.min=Zve,e.max=Xve,e.count=Qve,e.avg=eye,this.initialised=!0}isAggFuncPossible(e,t){const i=this.getFuncNames(e).includes(t),n=Fie(this.aggFuncsMap[t]);return i&&n}getDefaultFuncLabel(e){var t;return null!==(t=Kve[e])&&void 0!==t?t:e}getDefaultAggFunc(e){const t=e.getColDef().defaultAggFunc;if(Fie(t)&&this.isAggFuncPossible(e,t))return t;if(this.isAggFuncPossible(e,"sum"))return"sum";const i=this.getFuncNames(e);return null!==i&&void 0!==i&&i.length?i[0]:null}addAggFuncs(e){if(this.init(),e)for(const t of Object.keys(e))e[t]&&(this.aggFuncsMap[t]=e[t])}getAggFunc(e){return this.init(),this.aggFuncsMap[e]}getFuncNames(e){const t=e.getColDef().allowedAggFuncs;return null==t?Object.keys(this.aggFuncsMap).sort():t}clear(){this.aggFuncsMap={}}},class extends yoe{constructor(){super(...arguments),this.beanName="aggColNameSvc"}getHeaderName(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;const{valueColsSvc:i,colModel:n,rowGroupColsSvc:o}=this.beans,s=e.getColDef().pivotValueColumn;let r,a=null;if(Fie(s)){var l;const n=null!==(l=null===i||void 0===i?void 0:i.columns)&&void 0!==l?l:[],o=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&1===n.length,d=void 0!==e.getColDef().pivotTotalColumnIds;if(o&&!d)return t;a=s?s.getAggFunc():null,r=!0}else{const t=e.isValueActive(),i=0!==(null===o||void 0===o?void 0:o.columns.length),s=n.isPivotMode()||i||this.gos.get("treeData");t&&s?(a=e.getAggFunc(),r=!0):r=!1}if(r){const e="string"===typeof a?a:"func",i=this.getLocaleTextFunc()(e,e);return"".concat(i,"(").concat(t,")")}return t}},class extends yoe{constructor(){super(...arguments),this.beanName="footerSvc"}addTotalRows(e,t,i,n,o,s){let r=e;if(o){return function(e,t){switch(t){case"top":case"pinnedTop":return"top"===e;case"bottom":case"pinnedBottom":return"bottom"===e;default:return!1}}(s,n&&Lse(this.gos))&&(iye(t,this.beans),i(t.sibling,r++)),r}const a=Nse(this.gos);return(n&&a({node:t}))===s&&(iye(t,this.beans),i(t.sibling,r++)),r}getTopDisplayIndex(e,t,i,n){let o=t;if(e[0].footer){if(0===t)return 0;o-=1}const s=e[e.length-1],r=o>=i.length;return s.footer&&r?s.rowIndex:n(o)}doesCellShowTotalPrefix(e,t){return!(!e.footer||null===t||void 0===t||!t.getColDef().showRowGroup)&&(!!this.gos.get("treeData")||(-1===e.level?(null===(i=this.beans.showRowGroupCols)||void 0===i?void 0:i.columns[0])===t:!!e.rowGroupColumn&&(null===t||void 0===t?void 0:t.isRowGroupDisplayed(e.rowGroupColumn.getId()))));var i}applyTotalPrefix(e,t,i,n){var o,s;const r=null===(o=n.getColDef().cellRendererParams)||void 0===o?void 0:o.totalValueGetter;if(r){const o=Kse(this.gos,{column:n,node:i,value:e,formattedValue:t});if("function"===typeof r)return r(o);var a;if("string"===typeof r)return null===(a=this.beans.expressionSvc)||void 0===a?void 0:a.evaluate(r,o);lse(179)}return-1===i.level?this.getLocaleTextFunc()("footerTotal","Total")+" ":null!==(s=this.getTotalValue(null!==t&&void 0!==t?t:e))&&void 0!==s?s:""}getTotalValue(e){return this.getLocaleTextFunc()("footerTotal","Total")+" "+(null!==e&&void 0!==e?e:"")}},oye],apiFunctions:{addAggFuncs:function(e,t){e.aggFuncSvc&&e.aggFuncSvc.addAggFuncs(t)},clearAggFuncs:function(e){e.aggFuncSvc&&e.aggFuncSvc.clear()},setColumnAggFunc:function(e,t,i){var n,o;null===(n=e.valueColsSvc)||void 0===n||null===(o=n.setColumnAggFunc)||void 0===o||o.call(n,t,i,"api")}},dependsOn:[vve]},rye={moduleName:"Aggregation",version:fve,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="aggStage",this.step="aggregate",this.refreshProps=["getGroupRowAgg","alwaysAggregateAtRootLevel","suppressAggFilteredOnly","grandTotalRow"]}wireBeans(e){this.colModel=e.colModel,this.pivotColsSvc=e.pivotColsSvc,this.valueColsSvc=e.valueColsSvc,this.pivotResultCols=e.pivotResultCols,this.valueSvc=e.valueSvc}execute(e){var t;const i=!(null!==(t=this.valueColsSvc)&&void 0!==t&&null!==(t=t.columns)&&void 0!==t&&t.length),n=!this.gos.getCallback("getGroupRowAgg");if(i&&n&&null!==e&&void 0!==e&&e.active)return;const o=this.createAggDetails(e);this.recursivelyCreateAggData(o)}createAggDetails(e){var t;const i=this.colModel.isPivotActive(),n=null===(t=this.valueColsSvc)||void 0===t?void 0:t.columns,o=i&&this.pivotColsSvc?this.pivotColsSvc.columns:[];return{alwaysAggregateAtRootLevel:this.gos.get("alwaysAggregateAtRootLevel"),groupIncludeTotalFooter:!!Lse(this.gos),changedPath:e,valueColumns:null!==n&&void 0!==n?n:[],pivotColumns:o,filteredOnly:!this.isSuppressAggFilteredOnly(),userAggFunc:this.gos.getCallback("getGroupRowAgg")}}isSuppressAggFilteredOnly(){return void 0!==Ase(this.gos)||this.gos.get("suppressAggFilteredOnly")}recursivelyCreateAggData(e){e.changedPath.forEachChangedNodeDepthFirst(t=>{if(!t.hasChildren())return void(t.aggData&&this.setAggData(t,null));if(-1===t.level&&!e.groupIncludeTotalFooter){const i=!this.colModel.isPivotMode();if(!e.alwaysAggregateAtRootLevel&&i)return void this.setAggData(t,null)}this.aggregateRowNode(t,e)},!0)}aggregateRowNode(e,t){const i=0===t.valueColumns.length,n=0===t.pivotColumns.length;let o;o=t.userAggFunc?t.userAggFunc({nodes:e.childrenAfterFilter}):i?null:n?this.aggregateRowNodeUsingValuesOnly(e,t):this.aggregateRowNodeUsingValuesAndPivot(e),this.setAggData(e,o),e.sibling&&(this.setAggData(e.sibling,o),e.sibling.pinnedSibling&&this.setAggData(e.sibling.pinnedSibling,o))}aggregateRowNodeUsingValuesAndPivot(e){var t,i;const n={},o=null!==(t=null===(i=this.pivotResultCols)||void 0===i||null===(i=i.getPivotResultCols())||void 0===i?void 0:i.list)&&void 0!==t?t:[];let s=!0;const r=this.beans;for(let d=0;d<o.length;d++){var a;const t=o[d],i=t.getColDef();if(null!=i.pivotTotalColumnIds){s=!1;continue}const l=null!==(a=i.pivotKeys)&&void 0!==a?a:[];let c;c=e.leafGroup?this.getValuesFromMappedSet(e.childrenMapped,l,i.pivotValueColumn):this.getValuesPivotNonLeaf(e,i.colId),n[i.colId]=tye(r,c,i.pivotValueColumn.getAggFunc(),i.pivotValueColumn,e,t)}if(!s)for(let d=0;d<o.length;d++){var l;const t=o[d],i=t.getColDef();if(null===(l=i.pivotTotalColumnIds)||void 0===l||!l.length)continue;const s=i.pivotTotalColumnIds.map(e=>n[e]);n[i.colId]=tye(r,s,i.pivotValueColumn.getAggFunc(),i.pivotValueColumn,e,t)}return n}aggregateRowNodeUsingValuesOnly(e,t){const i={},{changedPath:n,valueColumns:o,filteredOnly:s}=t,r=n.active?n.getValueColumnsForNode(e,o):o,a=n.active?n.getNotValueColumnsForNode(e,o):null,l=this.getValuesNormal(e,r,s),d=e.aggData,c=this.beans;if(r.forEach((t,n)=>{i[t.getId()]=tye(c,l[n],t.getAggFunc(),t,e)}),a&&d)for(const u of a)i[u.getId()]=d[u.getId()];return i}getValuesPivotNonLeaf(e,t){return e.childrenAfterFilter.map(e=>e.aggData[t])}getValuesFromMappedSet(e,t,i){let n=e;for(let o=0;o<t.length;o++){const e=t[o];n=n?n[e]:null}return n?n.map(e=>this.valueSvc.getValue(i,e)):[]}getValuesNormal(e,t,i){const n=[];t.forEach(()=>n.push([]));const o=t.length,s=i?e.childrenAfterFilter:e.childrenAfterGroup,r=s.length;for(let a=0;a<r;a++){const e=s[a];for(let i=0;i<o;i++){const o=t[i],s=this.valueSvc.getValue(o,e);n[i].push(s)}}return n}setAggData(e,t){const i=e.aggData;if(e.aggData=t,e.__localEventService){const n=t=>{const n=e.aggData?e.aggData[t]:void 0,o=i?i[t]:void 0;if(n===o)return;const s=this.colModel.getColById(t);s&&e.dispatchCellChangedEvent(s,n,o)};if(i)for(const e of Object.keys(i))n(e);if(t)for(const e of Object.keys(t))i&&e in i||n(e)}}},class extends yoe{constructor(){super(...arguments),this.beanName="filterAggStage",this.step="filter_aggregates",this.refreshProps=[]}wireBeans(e){this.filterManager=e.filterManager}execute(e){var t,i,n=this;const o=this.beans.colModel.isPivotMode(),s=(null===(t=this.filterManager)||void 0===t?void 0:t.isAggregateFilterPresent())||(null===(i=this.filterManager)||void 0===i?void 0:i.isAggregateQuickFilterPresent()),r=Ase(this.gos)||(o?e=>e.node.leafGroup:e=>!e.node.group),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.childrenAfterFilter){if(e.childrenAfterAggFilter=e.childrenAfterFilter,t)for(const i of e.childrenAfterAggFilter)a(i,t);n.setAllChildrenCount(e)}e.sibling&&(e.sibling.childrenAfterAggFilter=e.childrenAfterAggFilter)};e.forEachChangedNodeDepthFirst(s?e=>{var t;e.childrenAfterAggFilter=(null===(t=e.childrenAfterFilter)||void 0===t?void 0:t.filter(e=>{var t;if(r({node:e})){if(this.filterManager.doesRowPassAggregateFilters({rowNode:e}))return a(e,!0),!0}return null===(t=e.childrenAfterAggFilter)||void 0===t?void 0:t.length}))||null,this.setAllChildrenCount(e),e.sibling&&(e.sibling.childrenAfterAggFilter=e.childrenAfterAggFilter)}:a,!0)}setAllChildrenCountTreeData(e){const t=e.childrenAfterAggFilter;let i=0;if(t){const e=t.length;i=e;for(let o=0;o<e;++o){var n;i+=null!==(n=t[o].allChildrenCount)&&void 0!==n?n:0}}e.setAllChildrenCount(0===i&&e.level>=0?null:i)}setAllChildrenCountGridGrouping(e){let t=0;e.childrenAfterAggFilter.forEach(e=>{e.group?t+=e.allChildrenCount:t++}),e.setAllChildrenCount(t)}setAllChildrenCount(e){e.hasChildren()?this.gos.get("treeData")?this.setAllChildrenCountTreeData(e):this.setAllChildrenCountGridGrouping(e):e.setAllChildrenCount(null)}}],rowModels:["clientSide"],dependsOn:[sye]},aye=(e,t,i,n)=>o=>{var s;const r=((e,t,i)=>{let{valueSvc:n,dataTypeSvc:o}=e;const s=n.getValue(t,i);let r=null;if(s instanceof Date)r=s;else if("string"===typeof s){var a,l;r=null!==(l=(null!==(a=null===o||void 0===o?void 0:o.getDateParserFunction(t))&&void 0!==a?a:Sle)(s))&&void 0!==l?l:null}return r})(e,t,o.node),a=ble(r);return a?null!==(s=null===n||void 0===n?void 0:n(a[i]))&&void 0!==s?s:a[i]:null},lye=(e,t,i)=>{let{colNames:n}=e;return e=>{const o=n.getDisplayNameForColumn(t,e.location);return o?"".concat(o," (").concat(i,")"):""}},dye=Object.fromEntries(xle.map(e=>[e,e.toLowerCase()]));function cye(e){var t;return null!==(t=e.groupHierarchy)&&void 0!==t?t:e.rowGroupingHierarchy}function uye(e,t,i){const n=e.get(t);e.set(t,(null!==n&&void 0!==n?n:[]).concat(i))}var hye={moduleName:"GroupHierarchy",version:fve,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="groupHierarchyColSvc",this.columns=null,this.sourceColumnMap=new WeakMap,this.inverseColumnMap=new WeakMap}addColumns(e){const t=this.columns;null!=t&&(e.list=t.list.filter(t=>!e.list.some(e=>e.getColId()===t.getColId())).concat(e.list),e.tree=t.tree.filter(t=>!e.tree.some(e=>e.getId()===t.getId())).concat(e.tree),Tre(e))}createColumns(e){var t,i,n,o,s;const r=new WeakMap,a=new WeakMap,l=this.createGroupHierarchyColumns(e,r,a);if(Nre(l,null!==(t=null===(i=this.columns)||void 0===i?void 0:i.list)&&void 0!==t?t:[]))return;Mre(this.beans,null===(n=this.columns)||void 0===n?void 0:n.tree),this.columns=null;const{colGroupSvc:d}=this.beans,c=null!==(o=null===d||void 0===d?void 0:d.findDepth(e.tree))&&void 0!==o?o:0,u=null!==(s=null===d||void 0===d?void 0:d.balanceTreeForAutoCols(l,c))&&void 0!==s?s:[];this.columns={list:l,tree:u,treeDepth:c,map:{}},this.sourceColumnMap=r,this.inverseColumnMap=a}updateColumns(e){}getColumn(e){var t,i;return null!==(t=null===(i=this.columns)||void 0===i?void 0:i.list.find(t=>Ere(t,e)))&&void 0!==t?t:null}getColumns(){var e,t;return null!==(e=null===(t=this.columns)||void 0===t?void 0:t.list)&&void 0!==e?e:null}expandColumnInto(e,t){const i=this.getVirtualColumnsForColumn(t).concat(t);for(const n of i)e.some(e=>Ere(e,n)||e.getColId()===n.getColId())||e.push(n)}compareVirtualColumns(e,t){var i,n;const o=this.inverseColumnMap.get(e),s=this.inverseColumnMap.get(t);if(o&&o===s){var r;const i=null!==(r=this.sourceColumnMap.get(o))&&void 0!==r?r:[];return(null===i||void 0===i?void 0:i.indexOf(e))-(null===i||void 0===i?void 0:i.indexOf(t))}return null!==(i=this.sourceColumnMap.get(e))&&void 0!==i&&i.includes(t)?1:null!==(n=this.sourceColumnMap.get(t))&&void 0!==n&&n.includes(e)?-1:null}insertVirtualColumnsForCol(e,t){const i=this.getVirtualColumnsForColumn(t);if(!i)return[];let n=e.indexOf(t);return n<0&&(n=e.length-1),vre(e,i),e.splice(n,0,...i),i}getVirtualColumnsForColumn(e){var t;return this.isGroupHierarchyColsEnabledForCol(e)&&null!==(t=this.sourceColumnMap.get(e))&&void 0!==t?t:[]}isGroupHierarchyColsEnabled(e){return e.list.some(e=>this.isGroupHierarchyColsEnabledForCol(e))}isGroupHierarchyColsEnabledForCol(e){const t=e.getColDef();return!(!cye(t)||!(t.rowGroup||t.enableRowGroup||null!=t.rowGroupIndex||t.pivot||t.enablePivot||null!=t.pivotIndex))}createGroupHierarchyColDefs(e){const t=[],i=e.getColDef(),n=cye(i);if(!n)return t;if(!this.isGroupHierarchyColsEnabledForCol(e))return t;for(const o of n){let n=null;n="string"===typeof o?this.createColDefForPart(o,e,i):o,n&&t.push(n)}return t}createGroupHierarchyColumns(e,t,i){if(!this.isGroupHierarchyColsEnabled(e))return[];const n=[];for(const o of e.list)for(const e of this.createGroupHierarchyColDefs(o)){const s=e.colId;this.gos.validateColDef(e,s,!0);const r=new ere(e,null,s,!0);this.createBean(r),n.push(r),uye(t,o,r),i.set(r,o)}return n}createColDefForPart(e,t,i){var n;const{beans:o,gos:s}=this,r="".concat("ag-Grid-HierarchyColumn","-").concat(t.getColId(),"-").concat(e),a={enableRowGroup:i.enableRowGroup,rowGroup:i.rowGroup,enablePivot:i.enablePivot,hide:!0,editable:!1},l=null!==(n=s.get("groupHierarchyConfig"))&&void 0!==n?n:{};if(e in l){var d;const t=p(p({},a),l[e]);return null!==(d=t.colId)&&void 0!==d||(t.colId=r),Wre(o,t,t.colId,!0)}const c=Wre(o,p({colId:r},a),r,!0),u=this.getLocaleTextFunc(),h=(e,t)=>{var i;return null!==(i=null===u||void 0===u?void 0:u(e,t))&&void 0!==i?i:t};switch(e){case"year":return p(p({},c),{},{headerValueGetter:lye(o,t,h(e,"Year")),valueGetter:aye(o,t,0)});case"quarter":return p(p({},c),{},{headerValueGetter:lye(o,t,h(e,"Quarter")),valueGetter:aye(o,t,1,e=>(Math.floor(Number(e)/4)+1).toString())});case"month":return p(p({},c),{},{headerValueGetter:lye(o,t,h(e,"Month")),valueGetter:aye(o,t,1)});case"formattedMonth":return p(p({},c),{},{headerValueGetter:lye(o,t,h("month","Month")),valueGetter:aye(o,t,1,e=>{const t=(e=>{var t,i;const n=null!==(t=xle[Number.parseInt(e,10)-1])&&void 0!==t?t:e;return{month:n,localeKey:null!==(i=dye[n])&&void 0!==i?i:e}})(e);return h(t.localeKey,t.month)})});case"day":return p(p({},c),{},{headerValueGetter:lye(o,t,h(e,"Day")),valueGetter:aye(o,t,2)});case"hour":return p(p({},c),{},{headerValueGetter:lye(o,t,h(e,"Hour")),valueGetter:aye(o,t,3)});case"minute":return p(p({},c),{},{headerValueGetter:lye(o,t,h(e,"Minute")),valueGetter:aye(o,t,4)});case"second":return p(p({},c),{},{headerValueGetter:lye(o,t,h(e,"Second")),valueGetter:aye(o,t,5)});default:return null}}}]},pye=class extends oae{constructor(){super(...arguments),this.beanName="pivotColsSvc",this.eventName="columnPivotChanged",this.columnProcessors={set:(e,t,i)=>this.setColPivotActive(e,t,i),add:(e,t,i)=>this.setColPivotActive(e,!0,i),remove:(e,t,i)=>this.setColPivotActive(e,!1,i)},this.columnOrdering={enableProp:"pivot",initialEnableProp:"initialPivot",indexProp:"pivotIndex",initialIndexProp:"initialPivotIndex"},this.columnExtractors={setFlagFunc:(e,t,i)=>this.setColPivotActive(e,t,i),getIndexFunc:e=>e.pivotIndex,getInitialIndexFunc:e=>e.initialPivotIndex,getValueFunc:e=>e.pivot,getInitialValueFunc:e=>e.initialPivot},this.modifyColumnsNoEventsCallbacks={addCol:e=>{this.columns.includes(e)||this.columns.push(e)},removeCol:e=>fre(this.columns,e)}}syncColumnWithState(e,t,i,n){const{value1:o,value2:s}=i("pivot","pivotIndex");void 0===o&&void 0===s||("number"===typeof s||o?(e.isPivotActive()||(this.setColPivotActive(e,!0,t),this.modifyColumnsNoEventsCallbacks.addCol(e)),n&&"number"===typeof s&&(n[e.getId()]=s)):e.isPivotActive()&&(this.setColPivotActive(e,!1,t),this.modifyColumnsNoEventsCallbacks.removeCol(e)))}setColPivotActive(e,t,i){if(e.pivotActive!==t){if(e.pivotActive=t,t){var n;const o=null===(n=this.beans.groupHierarchyColSvc)||void 0===n?void 0:n.insertVirtualColumnsForCol(this.columns,e);null===o||void 0===o||o.forEach(e=>this.setColPivotActive(e,t,i))}e.dispatchColEvent("columnPivotChanged",i)}e.dispatchStateUpdatedEvent("pivot")}},gye=class extends yoe{addExpandedCss(e,t){t.isExpandable()&&(e.push("ag-row-group"),e.push(t.expanded?"ag-row-group-expanded":"ag-row-group-contracted"))}getRowExpandedListeners(e){const{rowNode:t}=e,i=this.updateExpandedCss.bind(this,e,t);return{expandedChanged:i,hasChildrenChanged:i}}setExpanded(e,t,i,n){if(e.expanded===t)return;e.expanded=t,e.dispatchRowEvent("expandedChanged");const o=p(p({},Jde(e,this.gos,"rowGroupOpened")),{},{expanded:t,event:i||null});this.dispatchExpandedEvent(o,n)}isExpandable(e){return!e.footer&&(this.beans.colModel.isPivotMode()?e.hasChildren()&&!e.leafGroup:e.hasChildren()||e.master)}updateExpandedCss(e,t){const i=t.isExpandable(),n=1==t.expanded;e.forEachGui(void 0,e=>{const t=e.rowComp;t.toggleCss("ag-row-group",i),t.toggleCss("ag-row-group-expanded",i&&n),t.toggleCss("ag-row-group-contracted",i&&!n),lne(e.element,i&&n)})}dispatchStateUpdatedEvent(){this.eventSvc.dispatchEvent({type:"rowExpansionStateChanged"})}};function mye(e){let t=e.get("groupHideParentOfSingleChild");return t||(t=e.get("groupRemoveSingleChildren"),!t&&e.get("groupRemoveLowestSingleChildren")&&(t="leafGroupsOnly")),{groupHideParentOfSingleChild:t,isGroupMultiAutoColumn:Tse(e),hideOpenParents:e.get("groupHideOpenParents"),grandTotalRow:Lse(e),groupTotalRow:Nse(e)}}function fye(e,t,i){return!0===e.groupHideParentOfSingleChild&&i&&1===t.childrenAfterGroup.length}function vye(e,t,i){return"leafGroupsOnly"===e.groupHideParentOfSingleChild&&i&&t.leafGroup&&1===t.childrenAfterGroup.length}function yye(e,t,i,n,o,s){const r=n&&!i,a=n&&t.leafGroup,l=e.hideOpenParents&&t.expanded&&!t.master&&!a;return!r&&!l&&!o&&!s}var bye=()=>{const e=new Jue;return e.reordered=!0,e},xye=(e,t)=>{if(!e||!t)return!1;let i=t;for(;i;){if(i===e)return!0;i=i.parent}return!1},Cye=(e,t)=>{if(!t||e.parent===t)return!1;let i=t;const n=e.id;for(;i;){if(i===e)return!0;if(null!=n&&i.id===n)return!0;i=i.parent}return!1},Sye=(e,t)=>{for(let i=0,n=e.length;i<n;++i)if(e[i].parent!==t)return!1;return!0},wye=e=>{const t=e.sibling;if(!t)return null;const i=t._leafs;return void 0!==i?i:Mye(t)},Mye=e=>{const t=e.childrenAfterGroup,i=null===t||void 0===t?void 0:t.length;if(e._leafs=null,!i)return null;let n;const o=1===i?t[0]:null;if(null!==o&&void 0!==o&&o.group&&o.sourceRowIndex<0)n=o._leafs,void 0===n&&(n=Mye(o));else if(e.leafGroup)n=t;else{n=[];for(let e=0;e<i;++e){const i=t[e];if(i.sourceRowIndex>=0&&n.push(i),!i.group)continue;let o=i._leafs;if(void 0===o&&(o=Mye(i)),o)for(let e=0,t=o.length;e<t;++e)n.push(o[e])}}return e._leafs=n,n},kye=(e,t)=>{const i=e._leafs,n=e.sibling;e.treeNodeFlags=0,e.childrenAfterGroup=i,e.childrenMapped=null,e._groupData=void 0,n&&(n.childrenAfterGroup=e.childrenAfterGroup,n.childrenAfterAggFilter=e.childrenAfterAggFilter,n.childrenAfterFilter=e.childrenAfterFilter,n.childrenAfterSort=e.childrenAfterSort,n.childrenMapped=null,n._groupData=void 0);for(let s=0,r=null!==(o=i.length)&&void 0!==o?o:0;s<r;++s){var o;const n=i[s],r=n.sibling;n._leafs=void 0,Dye(n),r&&Dye(r),n.parent=e,t&&(n.treeParent=null),n.group=!1,n.updateHasChildren()}e.updateHasChildren()},Dye=e=>{e.key=null,e.treeNodeFlags=0,e.allChildrenCount=null,e.childrenAfterGroup=null,e.childrenAfterAggFilter=null,e.childrenAfterFilter=null,e.childrenAfterSort=null,e.childrenMapped=null,e.level=0,e._groupData=void 0};function Iye(e,t,i){let n=e;const o=n.level-t.level;if(o<=0)return!1;if(!i.get("groupHideOpenParents"))return!1;for(let r=0;r<o;r++){var s;if(!((null===(s=n.parent)||void 0===s?void 0:s.getFirstChild())===n))return!1;n=n.parent}return n===t}var Aye=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.group;const o=e.gos,s=n&&o.get("isGroupOpenByDefault");if(!s){const e=o.get("groupDefaultExpanded");return-1===e||i<e}return 1==s({api:e.gridApi,context:e.gridOptions.context,rowNode:t,field:t.field,key:t.key,level:i,rowGroupColumn:t.rowGroupColumn})},Lye=class extends yoe{constructor(){super(...arguments),this.indentClass=null}init(e,t,i,n,o,s,r){var a,l;this.params=r,this.eGui=t,this.eCheckbox=i,this.eExpanded=n,this.eContracted=o,this.comp=e,this.compClass=s;const{node:d,column:c}=r;this.node=d,this.displayedNode=d;this.isEmbeddedRowMismatch()||(d.footer?this.initFooterCell():c?(this.displayedNode=null!==(a=null===(l=this.beans.showRowGroupColValueSvc)||void 0===l?void 0:l.getDisplayedNode(d,c))&&void 0!==a?a:this.node,this.setupExpand(),this.setupCheckbox(),this.addGroupValue(),this.setupIndent()):this.initFullWidthCell())}initFooterCell(){const{node:e}=this.params;this.addGroupValue(),this.setupIndent();-1===e.level||this.comp.toggleCss("ag-row-group-leaf-indent",!0)}initFullWidthCell(){this.setupExpand(),(()=>{const{rowDragSvc:e}=this.beans;if(!this.params.rowDrag||!e)return;const t=e.createRowDragComp(()=>this.params.value,this.params.node);this.createManagedBean(t),this.eGui.insertAdjacentElement("afterbegin",t.getGui())})(),this.setupCheckbox(),this.addGroupValue(),this.setupIndent()}getCellAriaRole(){var e,t;const i=null===(e=this.params.colDef)||void 0===e?void 0:e.cellAriaRole,n=null===(t=this.params.column)||void 0===t?void 0:t.getColDef().cellAriaRole;return i||n||"gridcell"}isEmbeddedRowMismatch(){if(!this.params.fullWidth||!this.gos.get("embedFullWidthRows"))return!1;const{visibleCols:e}=this.beans,t="left"===this.params.pinned,i="right"===this.params.pinned,n=!t&&!i;return this.gos.get("enableRtl")?e.isPinningLeft()?!i:!n:e.isPinningLeft()?!t:!n}addGroupValue(){var e;const{params:{value:t,valueFormatted:i}}=this,n=this.getInnerCompDetails();this.comp.setInnerRenderer(n,null!==(e=null!==i&&void 0!==i?i:t)&&void 0!==e?e:null)}setupExpand(){const{colModel:e}=this.beans,{eGridCell:t,column:i,suppressDoubleClickExpand:n}=this.params,o=(e,t)=>{const i=_ue(e,this.beans,null);i&&(t.appendChild(i),this.addDestroyFunc(()=>i.remove()))};o("groupExpanded",this.eExpanded),o("groupContracted",this.eContracted);const s=this.comp,r=()=>{if(!this.isExpandable())return;const e=this.displayedNode.expanded;s.setExpandedDisplayed(e),s.setContractedDisplayed(!e),lne(t,!!this.displayedNode.expanded)},a=()=>{const i=this.isExpandable();s.toggleCss("ag-cell-expandable",i),s.toggleCss("ag-row-group",i);const n=!i&&e.isPivotMode();s.toggleCss("ag-pivot-leaf-group",n);const o=!e.isPivotMode()&&(!this.displayedNode.footer||-1!==this.displayedNode.level);s.toggleCss("ag-row-group-leaf-indent",!i&&o);const a=this.getChildCount(),l=a>0?"(".concat(a,")"):"";s.setChildCount(l),i?r():(s.setExpandedDisplayed(!1),s.setContractedDisplayed(!1),dne(t))};(()=>{(null===i||void 0===i?void 0:i.isCellEditable(this.displayedNode))&&this.gos.get("enableGroupEdit")||n||this.addManagedListeners(t,{dblclick:this.onCellDblClicked.bind(this)}),this.addManagedListeners(this.eExpanded,{click:this.onExpandClicked.bind(this)}),this.addManagedListeners(this.eContracted,{click:this.onExpandClicked.bind(this)}),this.addManagedListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedListeners(this.displayedNode,{allChildrenCountChanged:a,masterChanged:a,groupChanged:a,hasChildrenChanged:a,expandedChanged:r})})(),a()}getInnerCompDetails(){var e;const{userCompFactory:t,findSvc:i}=this.beans,n=this.params;if(n.fullWidth){const e=this.gos.get("groupRowRendererParams"),o=Aae(t,e,n);return o||(null!==i&&void 0!==i&&i.isMatch(n.node,null)?Aae(t,p(p({},e),{},{innerRenderer:"agFindCellRenderer"}),n):void 0)}const o=e=>e&&e.componentClass==this.compClass,s=Aae(t,n,n);if(s&&!o(s))return s;const{displayedNode:{rowGroupColumn:r}}=this,a=null===r||void 0===r?void 0:r.colDef,l=r&&(null===(e=n.column)||void 0===e?void 0:e.isRowGroupDisplayed(r.getId()));if(a&&l){const e=Lae(t,a,n);if(e){if(!o(e))return e;var d;if(null!==a&&void 0!==a&&null!==(d=a.cellRendererParams)&&void 0!==d&&d.innerRenderer)return Aae(t,a.cellRendererParams,n)}}return null!==i&&void 0!==i&&i.isMatch(n.node,n.column)?Lae(t,p(p({},null!==a&&void 0!==a?a:n.colDef),{},{cellRenderer:"agFindCellRenderer"}),n):void 0}getChildCount(){const{column:e,suppressCount:t}=this.params;if(t)return 0;const{allChildrenCount:i,rowGroupColumn:n}=this.displayedNode;if(!((null!==i&&void 0!==i?i:0)>0&&(!n||!e||(null===e||void 0===e?void 0:e.isRowGroupDisplayed(n.getId())))))return 0;return this.gos.get("showOpenedGroup")&&this.displayedNode!==this.node&&!Iye(this.node,this.displayedNode,this.gos)?0:null!==i&&void 0!==i?i:0}isExpandable(){const{node:e,column:t,colDef:i}=this.params;if(!this.displayedNode.isExpandable())return!1;if(e.rowPinned)return!1;if(!t)return!0;if(e.hasChildren()&&i){const{showRowGroup:e}=i;if(!e)return!1;if(!0===e)return!0}if(e===this.displayedNode){if(e.rowGroupColumn){if(null===t||void 0===t?void 0:t.isRowGroupDisplayed(e.rowGroupColumn.getId()))return!0}return!!e.master&&(!0===(null===i||void 0===i?void 0:i.showRowGroup)||null==(null===i||void 0===i?void 0:i.showRowGroup))}return Iye(this.node,this.displayedNode,this.gos)}setupIndent(){const{suppressPadding:e,node:t,colDef:i}=this.params;if(e)return;const n=()=>{let e=t.uiLevel;i&&!0!==i.showRowGroup&&(e=0);const n="ag-row-group-indent-"+e;n!==this.indentClass&&(this.indentClass&&this.comp.toggleCss(this.indentClass,!1),this.indentClass=n,this.comp.toggleCss(n,!0),this.eGui.style.setProperty("--ag-indentation-level",String(e)))};this.addManagedListeners(t,{uiLevelChanged:n.bind(this)}),n()}setupCheckbox(){const{node:e}=this.params;!e.footer&&!e.rowPinned&&!e.detail&&(this.addManagedPropertyListener("rowSelection",e=>{let{currentValue:t,previousValue:i}=e;const n="object"===typeof t?t:void 0,o="object"===typeof i?i:void 0;(null===n||void 0===n?void 0:n.checkboxLocation)!==(null===o||void 0===o?void 0:o.checkboxLocation)&&(this.destroyCheckbox(),this.addCheckbox())}),this.addCheckbox())}addCheckbox(){const{selectionSvc:e}=this.beans;if(!e||!vse(this.gos))return;const{node:t,column:i}=this.params,n=this.gos.get("rowSelection"),o=zse(n);if("selectionColumn"===o)return;if("autoGroupColumn"===o){const e=null!=(null===i||void 0===i?void 0:i.getColDef().showRowGroup),n=!i&&t.group;if(!(e||n))return}const s="object"===typeof n?Fse(n):this.params.checkbox;if(!("function"===typeof s||!0===s))return;if("string"===typeof(null===i||void 0===i?void 0:i.getColDef().showRowGroup)&&!this.isExpandable())return void this.comp.setCheckboxSpacing(!0);const r=e.createCheckboxSelectionComponent();this.cbComp=r,this.createBean(r),r.init({rowNode:t,column:i,overrides:{isVisible:s,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(r.getGui()),this.comp.setCheckboxVisible(!0)}destroyCheckbox(){var e;this.comp.setCheckboxSpacing(!1),this.comp.setCheckboxVisible(!1),null===(e=this.cbComp)||void 0===e||e.getGui().remove(),this.cbComp=this.destroyBean(this.cbComp)}onExpandClicked(e){lce(e)||(ace(e),this.onExpandOrContract(e))}onKeyDown(e){var t;if(!(e.key===Eae.ENTER)||this.params.suppressEnterExpand)return;(null===(t=this.params.column)||void 0===t?void 0:t.isCellEditable(this.params.node))||this.onExpandOrContract(e)}onCellDblClicked(e){if(lce(e))return;roe(this.eExpanded,e)||roe(this.eContracted,e)||this.onExpandOrContract(e)}onExpandOrContract(e){if(!this.isExpandable())return;const t=this.displayedNode,i=!t.expanded;!i&&t.sticky&&this.beans.ctrlsSvc.getScrollFeature().setVerticalScrollPosition(t.rowTop-t.stickyRowTop),t.setExpanded(i,e)}destroy(){super.destroy(),this.destroyCheckbox()}},Nye={tag:"span",cls:"ag-cell-wrapper",children:[{tag:"span",ref:"eExpanded",cls:"ag-group-expanded ag-hidden"},{tag:"span",ref:"eContracted",cls:"ag-group-contracted ag-hidden"},{tag:"span",ref:"eCheckbox",cls:"ag-group-checkbox ag-invisible"},{tag:"span",ref:"eValue",cls:"ag-group-value"},{tag:"span",ref:"eChildCount",cls:"ag-group-child-count"}]},Tye=class extends hae{constructor(){super(Nye),this.eExpanded=lae,this.eContracted=lae,this.eCheckbox=lae,this.eValue=lae,this.eChildCount=lae}init(e){const t={setInnerRenderer:(e,t)=>this.setRenderDetails(e,t),setChildCount:e=>this.eChildCount.textContent=e,toggleCss:(e,t)=>this.toggleCss(e,t),setContractedDisplayed:e=>Mne(this.eContracted,e),setExpandedDisplayed:e=>Mne(this.eExpanded,e),setCheckboxVisible:e=>this.eCheckbox.classList.toggle("ag-invisible",!e),setCheckboxSpacing:e=>this.eCheckbox.classList.toggle("ag-group-checkbox-spacing",e)},i=this.createManagedBean(new Lye),n=!e.colDef,o=this.getGui();i.init(t,o,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,e),n&&tne(o,i.getCellAriaRole())}setRenderDetails(e,t){e?e.newAgStackInstance().then(e=>{if(!e)return;const t=()=>this.destroyBean(e);this.isAlive()?(this.eValue.appendChild(e.getGui()),this.addDestroyFunc(t)):t()}):this.eValue.innerText=t}destroy(){this.destroyBean(this.innerCellRenderer),super.destroy()}refresh(){return!1}},Rye=class extends yoe{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.extraTopHeight=0,this.extraBottomHeight=0}postConstruct(){this.isClientSide=gse(this.gos),this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl}),this.resetStickyContainers()}setOffsetTop(e){this.extraTopHeight!==e&&(this.extraTopHeight=e,this.eventSvc.dispatchEvent({type:"stickyTopOffsetChanged",offset:e}))}setOffsetBottom(e){this.extraBottomHeight!==e&&(this.extraBottomHeight=e)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getLastPixelOfGroup(e){return this.isClientSide?function(e){if(e.isExpandable()||e.footer){if(e.footer&&0===e.rowIndex)return Number.MAX_SAFE_INTEGER;if(!e.sibling||1===Math.abs(e.sibling.rowIndex-e.rowIndex)){let t=e.footer?e.sibling:e;for(;t.isExpandable()&&t.expanded;)if(t.master&&t.detailNode)t=t.detailNode;else if(t.childrenAfterSort){if(0===t.childrenAfterSort.length)break;t=pre(t.childrenAfterSort)}return t.rowTop+t.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}(e):function(e){if(e.isExpandable()||e.footer){if(e.master&&e.detailNode)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||1===Math.abs(e.sibling.rowIndex-e.rowIndex)){var t,i,n,o,s;let a=null===(t=e.childStore)||void 0===t?void 0:t.getStoreBounds();var r;if(e.footer)a=null===(r=e.sibling.childStore)||void 0===r?void 0:r.getStoreBounds();return(null!==(i=null===(n=a)||void 0===n?void 0:n.heightPx)&&void 0!==i?i:0)+(null!==(o=null===(s=a)||void 0===s?void 0:s.topPx)&&void 0!==o?o:0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}updateStickyRows(e){const t="top"===e;let i=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,i);const{rowModel:n,rowRenderer:o,pinnedRowModel:s}=this.beans,r=t?o.firstVisibleVPixel-this.extraTopHeight:o.lastVisibleVPixel-this.extraTopHeight,a=new Set,l=e=>{if(a.add(e),t){const t=this.getLastPixelOfGroup(e),n=r+i+e.rowHeight;e.stickyRowTop=t<n?i+(t-n):i}else{const t=this.getFirstPixelOfGroup(e),n=r-(i+e.rowHeight);e.stickyRowTop=t>n?i-(t-n):i}i=0,a.forEach(e=>{const t=e.stickyRowTop+e.rowHeight;i<t&&(i=t)})},d=this.areFooterRowsStickySuppressed(),c=this.gos.get("suppressGroupRowsSticky"),u=t=>{if(!t.displayed)return!1;if(t.footer){if(!0===d)return!1;if("grand"===d&&-1===t.level)return!1;if("group"===d&&t.level>-1)return!1;const i=!!t.sibling.rowIndex&&t.sibling.rowIndex+1===t.rowIndex;if("bottom"===e&&i)return!1;if(-1===t.level&&null!==s&&void 0!==s&&s.getGrandTotalPinned())return!1;return!a.has(t)}if(t.isExpandable()){if(!0===c)return!1;if("bottom"===e)return!1;return!a.has(t)&&t.expanded}return!1};for(let h=0;h<100;h++){let e=r+i;t||(e=r-i);const o=n.getRowIndexAtPixel(e),s=n.getRow(o);if(null==s)break;const a=this.getStickyAncestors(s).find(e=>(t?e.rowIndex<o:e.rowIndex>o)&&u(e));if(a){l(a);continue}if(!(t?s.rowTop<e:s.rowTop+s.rowHeight>e)||!u(s))break;l(s)}return t||a.forEach(e=>{e.stickyRowTop=i-(e.stickyRowTop+e.rowHeight)}),this.refreshNodesAndContainerHeight(e,a,i)}areFooterRowsStickySuppressed(){const e=this.gos.get("suppressStickyTotalRow");if(!0===e)return!0;const t="group"===e,i="grand"===e;return!(!t||!i)||(i?"grand":!!t&&"group")}canRowsBeSticky(){const e=Dse(this.gos),t=this.areFooterRowsStickySuppressed(),i=this.gos.get("suppressGroupRowsSticky");return e&&(!t||!i)}getStickyAncestors(e){const t=[];let i=e.footer?e.sibling:e.parent;for(;i;)i.sibling&&t.push(i.sibling),t.push(i),i=i.parent;return t.reverse()}checkStickyRows(){const e=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return e||t}destroyStickyCtrls(){this.resetStickyContainers()}resetStickyContainers(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){const t=new Set;if(this.stickyTopRowCtrls.some(t=>t.rowNode===e)){for(let i=0;i<this.stickyTopRowCtrls.length;i++){const n=this.stickyTopRowCtrls[i].rowNode;n!==e&&t.add(n)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows()}else{for(let i=0;i<this.stickyBottomRowCtrls.length;i++){const n=this.stickyBottomRowCtrls[i].rowNode;n!==e&&t.add(n)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}}refreshNodesAndContainerHeight(e,t,i){const n="top"===e,o=n?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,s={},r=[];for(let p=0;p<o.length;p++){const e=o[p].rowNode;!t.has(e)?(s[e.id]=o[p],e.sticky=!1):r.push(o[p])}const a=new Set;for(let p=0;p<r.length;p++)a.add(r[p].rowNode);const l=[];t.forEach(e=>{a.has(e)||(e.sticky=!0,l.push(this.createRowCon(e,!1,!1)))});let d=!!l.length||r.length!==o.length;n?this.topContainerHeight!==i&&(this.topContainerHeight=i,this.gridBodyCtrl.setStickyTopHeight(i),d=!0):this.bottomContainerHeight!==i&&(this.bottomContainerHeight=i,this.gridBodyCtrl.setStickyBottomHeight(i),d=!0),this.destroyRowCtrls(s,!1);const c=[...r,...l];c.sort((e,t)=>t.rowNode.rowIndex-e.rowNode.rowIndex),n||c.reverse();for(const p of c)p.setRowTop(p.rowNode.stickyRowTop);const u=this.beans.pageBounds;let h=0;if(n){for(const e of t)e.rowIndex<u.getFirstRow()&&(h+=e.rowHeight);h>this.topContainerHeight&&(h=this.topContainerHeight),this.setOffsetTop(h)}else{for(const e of t)e.rowIndex>u.getLastRow()&&(h+=e.rowHeight);h>this.bottomContainerHeight&&(h=this.bottomContainerHeight),this.setOffsetBottom(h)}return!!d&&(n?this.stickyTopRowCtrls=c:this.stickyBottomRowCtrls=c,!0)}ensureRowHeightsValid(){let e=!1;const t=t=>{const i=t.rowNode;if(i.rowHeightEstimated){const t=xse(this.beans,i);i.setRowHeight(t.height),e=!0}};return this.stickyTopRowCtrls.forEach(t),this.stickyBottomRowCtrls.forEach(t),e}};var Eye={moduleName:"GroupCellRenderer",version:fve,userComponents:{agGroupRowRenderer:Tye,agGroupCellRenderer:Tye},dynamicBeans:{groupCellRendererCtrl:Lye},icons:{groupContracted:"tree-closed",groupExpanded:"tree-open"},css:[".ag-group-checkbox-spacing{width:var(--ag-icon-size)}:where(.ag-ltr) .ag-group-checkbox-spacing{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-checkbox-spacing{margin-left:var(--ag-cell-widget-spacing)}"],dependsOn:[vve]},Pye={moduleName:"GroupColumn",version:fve,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="autoColSvc"}postConstruct(){this.addManagedPropertyListener("autoGroupColumnDef",this.updateColumns.bind(this))}addColumns(e){null!=this.columns&&(e.list=this.columns.list.concat(e.list),e.tree=this.columns.tree.concat(e.tree),Tre(e))}createColumns(e,t,i){var n,o,s;const r=this.beans,{colModel:a,gos:l,rowGroupColsSvc:d,colGroupSvc:c}=r,u=a.isPivotMode(),h=Rse(l,u),p=u?l.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),g=null===d||void 0===d?void 0:d.columns,m=()=>{this.columns&&(Mre(r,this.columns.tree),this.columns=null)};if(!(g&&g.length>0||l.get("treeData"))||p||h)return void m();const f=this.generateAutoCols(g),v=Nre(f,(null===(n=this.columns)||void 0===n?void 0:n.list)||null),y=e.treeDepth,b=this.columns?this.columns.treeDepth:-1;if(v&&b==y){const e=new Map(f.map(e=>[e.getId(),e]));for(const t of null!==(x=null===(C=this.columns)||void 0===C?void 0:C.list)&&void 0!==x?x:[]){var x,C;const n=e.get(t.getId());n&&t.setColDef(n.getColDef(),null,i)}return}m();const S=null!==(o=null===c||void 0===c?void 0:c.findDepth(e.tree))&&void 0!==o?o:0,w=null!==(s=null===c||void 0===c?void 0:c.balanceTreeForAutoCols(f,S))&&void 0!==s?s:[];this.columns={list:f,tree:w,treeDepth:S,map:{}};t(e=>{if(!e)return null;const t=e.filter(e=>!kre(e));return[...f,...t]})}updateColumns(e){var t;const i=Rre(e.source);null===(t=this.columns)||void 0===t||t.list.forEach((e,t)=>this.updateOneAutoCol(e,t,i))}getColumn(e){var t,i;return null!==(t=null===(i=this.columns)||void 0===i?void 0:i.list.find(t=>Ere(t,e)))&&void 0!==t?t:null}getColumns(){var e,t;return null!==(e=null===(t=this.columns)||void 0===t?void 0:t.list)&&void 0!==e?e:null}generateAutoCols(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[],{gos:i}=this,n=i.get("treeData");let o=Tse(i);return n&&o&&(lse(182),o=!1),o?e.forEach((e,i)=>{t.push(this.createOneAutoCol(e,i))}):t.push(this.createOneAutoCol()),t}isSuppressAutoCol(){const e=this.gos;if("custom"===e.get("groupDisplayType"))return!0;return"custom"===e.get("treeDataDisplayType")}createOneAutoCol(e,t){let i;i=e?"".concat(bre,"-").concat(e.getId()):bre;const n=this.createAutoColDef(i,e,t);n.colId=i;const o=new ere(n,null,i,!0);return this.createBean(o),o}updateOneAutoCol(e,t,i){const n=e.getColDef(),o="string"==typeof n.showRowGroup?n.showRowGroup:void 0,s=this.beans,r=null!=o?s.colModel.getColDefCol(o):void 0,a=e.getId(),l=this.createAutoColDef(a,null!==r&&void 0!==r?r:void 0,t);e.setColDef(l,null,i),Qre(s,{state:[Pre(l,a)]},i)}createAutoColDef(e,t,i){let n=this.createBaseColDef(t);if(Aoe(n,this.gos.get("autoGroupColumnDef")),n=Wre(this.beans,n,e,!0),!this.gos.get("treeData")){zie(n.field)&&zie(n.valueGetter)&&zie(n.filterValueGetter)&&"agGroupColumnFilter"!==n.filter&&(n.filter=!1)}i&&i>0&&(n.headerCheckboxSelection=!1);const o=Ise(this.gos),s=n.valueGetter||null!=n.field;return o&&!s&&(n.sortIndex=void 0,n.initialSort=void 0),n}createBaseColDef(e){var t;const i=this.gos.get("autoGroupColumnDef"),n={headerName:this.getLocaleTextFunc()("group","Group"),showRowGroup:null===(t=null===e||void 0===e?void 0:e.getColId())||void 0===t||t};var o;(i&&(i.cellRenderer||i.cellRendererSelector)||(n.cellRenderer="agGroupCellRenderer"),e)&&(n.headerName=null!==(o=this.beans.colNames.getDisplayNameForColumn(e,"header"))&&void 0!==o?o:void 0,n.headerValueGetter=e.colDef.headerValueGetter);return n}destroy(){var e;Mre(this.beans,null===(e=this.columns)||void 0===e?void 0:e.tree),super.destroy()}},class extends yoe{constructor(){super(...arguments),this.beanName="showRowGroupCols",this.columns=[],this.colsSet=new Set,this.colsMap=new Map}destroy(){super.destroy(),this.columns.length=0,this.colsSet.clear(),this.colsMap.clear()}refresh(){const{colModel:e,rowGroupColsSvc:t}=this.beans,i=this.columns,n=this.colsSet,o=this.colsMap;o.clear();const s=i.length;let r=0,a=!1;const l=e.getCols();for(let d=0,c=l.length;d<c;++d){const e=l[d],c=e.getColDef().showRowGroup;if("string"===typeof c)o.set(c,e);else{if(!0!==c)continue;{const i=null===t||void 0===t?void 0:t.columns;if(i)for(let t=0,n=i.length;t<n;++t)o.set(i[t].getId(),e)}}a||(a=r>=s||!n.has(e)),i[r++]=e}if(a||(a=r!==s),a){i.length=r,n.clear();for(let e=0;e<r;++e)n.add(i[e]);this.eventSvc.dispatchEvent({type:"showRowGroupColsSetChanged"})}}getShowRowGroupCol(e){return this.colsMap.get(e)}getSourceColumnsForGroupColumn(e){const t=e.getColDef().showRowGroup;if(!t)return null;const{rowGroupColsSvc:i,colModel:n}=this.beans;if(!0===t&&i)return i.columns;const o=n.getColDefCol(t);return o?[o]:null}isRowGroupDisplayed(e,t){var i;const n=null===(i=e.getColDef())||void 0===i?void 0:i.showRowGroup;return!0===n||null!=n&&n===t}},class extends yoe{constructor(){super(...arguments),this.beanName="showRowGroupColValueSvc"}getGroupValue(e,t){if(!t)return e.group?{displayedNode:e,value:e.groupValue}:null;const i=this.beans.valueSvc,n=t.colDef.showRowGroup;if(!n)return null;if(-1===e.level&&e.footer)return{displayedNode:e,value:null};if("string"===typeof n){var o,s;if((null!==(o=null===(s=this.beans.rowGroupColsSvc)||void 0===s?void 0:s.getColumnIndex(n))&&void 0!==o?o:-1)>e.level)return null;const r=this.getDisplayedNode(e,t,!0);if(r)return{displayedNode:r,value:i.getValue(t,r)}}const r=i.getValue(t,e);if(null==r){const n=this.getDisplayedNode(e,t);if(n)return{displayedNode:n,value:i.getValue(t,n)}}return{displayedNode:e,value:r}}formatAndPrefixGroupColValue(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=this.formatGroupColValue(e,t,i),{value:o,displayedNode:s}=e,r=this.beans.footerSvc;if(null!==r&&void 0!==r&&r.doesCellShowTotalPrefix(s,t)){return r.applyTotalPrefix(o,n,s,t)}return s.footer&&-1===s.level?null:n}formatGroupColValue(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=this.beans.valueSvc,{displayedNode:o,value:s}=e,r=o.rowGroupColumn,a=o.group&&!t;if(r&&(a||(null===t||void 0===t?void 0:t.isRowGroupDisplayed(r.colId)))){if(i&&!1===r.colDef.useValueFormatterForExport)return null;const e=n.formatValue(r,o,s);if(null==e&&""===o.key){return this.getLocaleTextFunc()("blanks","(Blanks)")}return e}return!t||o.group||i&&!1===t.colDef.useValueFormatterForExport?null:n.formatValue(t,o,s)}getDisplayedNode(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=this.gos,o=n.get("groupHideOpenParents"),s=n.get("showOpenedGroup")&&!i;if(!o&&!s)return;const r=t.colDef.showRowGroup;if(!0===r){var a;if(e.group)return;return null!==(a=e.parent)&&void 0!==a?a:void 0}let l=e;for(;l&&(null===(d=l.rowGroupColumn)||void 0===d?void 0:d.getId())!=r;){var d,c;const e=l===(null===(c=l.parent)||void 0===c?void 0:c.getFirstChild());if(!s&&!e)return;l=l.parent}return l!==e&&null!==l&&void 0!==l?l:void 0}},class extends oae{constructor(){super(...arguments),this.beanName="rowGroupColsSvc",this.eventName="columnRowGroupChanged",this.columnProcessors={set:(e,t,i)=>this.setActive(t,e,i),add:(e,t,i)=>this.setActive(!0,e,i),remove:(e,t,i)=>this.setActive(!1,e,i)},this.columnOrdering={enableProp:"rowGroup",initialEnableProp:"initialRowGroup",indexProp:"rowGroupIndex",initialIndexProp:"initialRowGroupIndex"},this.columnExtractors={setFlagFunc:(e,t,i)=>this.setColRowGroupActive(e,t,i),getIndexFunc:e=>e.rowGroupIndex,getInitialIndexFunc:e=>e.initialRowGroupIndex,getValueFunc:e=>e.rowGroup,getInitialValueFunc:e=>e.initialRowGroup},this.modifyColumnsNoEventsCallbacks={addCol:e=>{this.columns.includes(e)||this.columns.push(e)},removeCol:e=>fre(this.columns,e)}}moveColumn(e,t,i){if(0===this.columns.length)return;const n=this.columns[e],o=this.columns.slice(e,t);this.columns.splice(e,1),this.columns.splice(t,0,n),this.updateIndexMap(),this.eventSvc.dispatchEvent({type:this.eventName,columns:o,column:1===o.length?o[0]:null,source:i})}syncColumnWithState(e,t,i,n){const{value1:o,value2:s}=i("rowGroup","rowGroupIndex");void 0===o&&void 0===s||("number"===typeof s||o?(e.isRowGroupActive()||(this.setColRowGroupActive(e,!0,t),this.modifyColumnsNoEventsCallbacks.addCol(e)),n&&"number"===typeof s&&(n[e.getId()]=s)):e.isRowGroupActive()&&(this.setColRowGroupActive(e,!1,t),this.modifyColumnsNoEventsCallbacks.removeCol(e)))}setActive(e,t,i){var n;if(e===t.isRowGroupActive())return;this.setColRowGroupActive(t,e,i);const o=null===(n=this.beans.groupHierarchyColSvc)||void 0===n?void 0:n.getColumn(t);Ose(this.gos,e)&&!o&&this.colModel.setColsVisible([t],!e,i)}setColRowGroupActive(e,t,i){if(e.rowGroupActive!==t){if(e.rowGroupActive=t,t){var n;const o=null===(n=this.beans.groupHierarchyColSvc)||void 0===n?void 0:n.insertVirtualColumnsForCol(this.columns,e);null===o||void 0===o||o.forEach(e=>this.setColRowGroupActive(e,t,i))}e.dispatchColEvent("columnRowGroupChanged",i)}e.dispatchStateUpdatedEvent("rowGroup")}},pye,oye],dependsOn:[vve,Eye]},Oye={moduleName:"ClientSideRowModelHierarchy",version:fve,rowModels:["clientSide"],beans:[class extends yoe{constructor(){super(...arguments),this.beanName="groupStage",this.step="group",this.refreshProps=["groupAllowUnbalanced","groupDefaultExpanded","groupDisplayType","groupHideOpenParents","initialGroupOrderComparator","treeData","treeDataChildrenField","treeDataParentIdField"],this.treeData=!1,this.hasTreeData=!1,this.needReset=!1,this.nested=!1,this.strategy=void 0}postConstruct(){const e=this.gos;e.isModuleRegistered("TreeData")&&(this.hasTreeData=!0,this.treeData=e.get("treeData")),this.addManagedEventListeners({showRowGroupColsSetChanged:()=>{var e;return null===(e=this.strategy)||void 0===e?void 0:e.onShowRowGroupColsSetChanged()}})}invalidateGroupCols(){var e,t;null===(e=this.strategy)||void 0===e||null===(t=e.invalidateGroupCols)||void 0===t||t.call(e)}destroy(){this.strategy=this.destroyBean(this.strategy),super.destroy()}getNonLeaf(e){var t;return null===(t=this.strategy)||void 0===t||null===(t=t.nonLeafsById)||void 0===t?void 0:t.get(e)}getNestedDataGetter(){var e;return null===(e=this.getStrategy())||void 0===e?void 0:e.nestedDataGetter}onPropChange(e){var t,i,n;const o=this.gos,s=null===(t=this.strategy)||void 0===t?void 0:t.nestedDataGetter;if(e.has("treeData")){const e=o.get("treeData")&&this.hasTreeData;var r;if(this.treeData!==e)null===(r=this.beans.rowDragSvc)||void 0===r||r.cancelRowDrag(),this.treeData=e,this.needReset=!0,this.strategy=this.destroyBean(this.strategy)}return null===(i=this.strategy)||void 0===i||null===(n=i.onPropChange)||void 0===n||n.call(i,e),this.getNestedDataGetter()!==s}extractData(){const e=this.beans.rowModel.rootNode,t=this.nested?null===e||void 0===e?void 0:e.childrenAfterGroup:null===e||void 0===e?void 0:e._leafs;var i;if(!t)return null!==(i=this.gos.get("rowData"))&&void 0!==i?i:[];const n=t.length,o=new Array(n);let s=0;for(let r=0;r<n;++r){const e=t[r].data;null!=e&&(o[s++]=e)}return o.length=s,o}execute(e){const t=this.beans,i=t.rowModel.rootNode;if(!i)return!1;const n=this.getStrategy(),o=!(null===n||void 0===n||!n.nestedDataGetter),s=this.needReset;var r;(this.nested=o,s)&&(this.needReset=!1,null===(r=t.rowDragSvc)||void 0===r||r.cancelRowDrag(),e.animate=!1,kye(i,!o));return n?n.execute(i,e)||s:void 0}loadLeafs(e){return e.footer?wye(e):Mye(e)}loadGroupData(e){const t=this.getStrategy();return t?t.loadGroupData(e):(e._groupData=null,null)}clearNonLeafs(){var e;null===(e=this.strategy)||void 0===e||e.clearNonLeafs()}getStrategy(){var e;let t=this.strategy;return void 0!==t&&this.isAlive()||(t=null!==(e=this.beans.registry.createDynamicBean(this.treeData?"treeGroupStrategy":"groupStrategy",!1))&&void 0!==e?e:null,this.strategy=t&&this.createBean(t)),t}},class extends yoe{constructor(){super(...arguments),this.beanName="flattenStage",this.step="map",this.refreshProps=["groupHideParentOfSingleChild","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupTotalRow","masterDetail"]}execute(){const{beans:e,gos:t}=this,i=[],n=e.rowModel.rootNode;if(!n)return i;const o=e.colModel.isPivotMode(),s=o&&n.leafGroup&&n.aggData,r=s?[n]:n.childrenAfterSort,a=mye(t);this.recursivelyAddToRowsToDisplay(a,r,i,o,0);const l=i.length>0,d=a.grandTotalRow;if(!s&&l&&d)if(iye(n,e),"pinnedBottom"===d||"pinnedTop"===d){var c;null===(c=this.beans.pinnedRowModel)||void 0===c||c.setGrandTotalPinned("pinnedBottom"===d?"bottom":"top")}else{const e="top"===d;this.addRowNodeToRowsToDisplay(a,n.sibling,i,0,e)}return i}recursivelyAddToRowsToDisplay(e,t,i,n,o){if(null===t||void 0===t||!t.length)return;const s=this.beans.masterDetailSvc;for(let r=0;r<t.length;r++){const a=t[r],l=a.hasChildren(),d=fye(e,a,l),c=vye(e,a,l);if(yye(e,a,l,n,d,c)&&this.addRowNodeToRowsToDisplay(e,a,i,o),!n||!a.leafGroup)if(l){const t=d||c;if(a.expanded||t){const r=e.groupTotalRow({node:a});r||nye(a);const l=t?o:o+1;"top"===r&&(iye(a,this.beans),this.addRowNodeToRowsToDisplay(e,a.sibling,i,l));const d=null===s||void 0===s?void 0:s.getDetail(a);d&&this.addRowNodeToRowsToDisplay(e,d,i,o),this.recursivelyAddToRowsToDisplay(e,a.childrenAfterSort,i,n,l),"bottom"===r&&(iye(a,this.beans),this.addRowNodeToRowsToDisplay(e,a.sibling,i,l))}}else{const t=null===s||void 0===s?void 0:s.getDetail(a);t&&this.addRowNodeToRowsToDisplay(e,t,i,o)}}}addRowNodeToRowsToDisplay(e,t,i,n,o){o?i.unshift(t):i.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:n)}},class extends gye{constructor(){super(...arguments),this.beanName="expansionSvc",this.events=null,this.dispatchExpandedDebounced=null}destroy(){super.destroy(),this.events=null,this.dispatchExpandedDebounced=null}setExpansionState(e){const t=new Set(e.expandedRowGroupIds);this.beans.rowModel.forEachNode(e=>{const i=e.id;i&&(e.expanded=t.has(i))}),this.onGroupExpandedOrCollapsed()}getExpansionState(){const e=[],t=[];return this.beans.rowModel.forEachNode(i=>{const n=i.id;n&&(i.expanded?e.push(n):t.push(n))}),{expandedRowGroupIds:e,collapsedRowGroupIds:t}}expandAll(e){const{gos:t,rowModel:i,colModel:n,eventSvc:o}=this.beans,s=t.get("treeData"),r=n.isPivotActive(),a=t=>{if(t)for(const i of t){const t=()=>{i.expanded=e,a(i.childrenAfterGroup)};if(i.master){t();continue}if(s){Fie(i.childrenAfterGroup)&&t();continue}if(r){!i.leafGroup&&t();continue}i.group&&t()}},l=i.rootNode;l&&a(l.childrenAfterGroup),this.onGroupExpandedOrCollapsed(),o.dispatchEvent({type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"})}onGroupExpandedOrCollapsed(){this.dispatchStateUpdatedEvent(),this.beans.rowModel.refreshModel({step:"map"})}setDetailsExpansionState(e){const t=this.getExpansionState(),i=0===t.collapsedRowGroupIds.length;if(0===t.expandedRowGroupIds.length!==i)return i?e.expandAll():e.collapseAll()}dispatchExpandedEvent(e,t){var i;if((null!==(i=this.events)&&void 0!==i?i:this.events=[]).push(e),t)return void this.dispatchExpandedEvents();let n=this.dispatchExpandedDebounced;if(!n){if(!this.isAlive())return;n=this.debounce(()=>this.dispatchExpandedEvents()),this.dispatchExpandedDebounced=n}n()}dispatchExpandedEvents(){const{eventSvc:e,rowRenderer:t}=this.beans,i=this.events,n=null===i||void 0===i?void 0:i.length;if(!n)return;this.events=null;const o=new Array(n);for(let s=0;s<n;++s)o[s]=i[s].node,e.dispatchEvent(i[s]);this.dispatchStateUpdatedEvent(),t.refreshCells({rowNodes:o})}debounce(e){const t=this.beans.animationFrameSvc;if(!t)return()=>window.setTimeout(e,0);let i=!1;return()=>{t.active?i||(i=!0,t.addDestroyTask(()=>{i=!1,e()})):window.setTimeout(e,0)}}}],dependsOn:[vve]},Fye={moduleName:"StickyRow",version:fve,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="stickyRowSvc"}createStickyRowFeature(e,t,i){const n=this.gos;if(Dse(n)&&gse(n)||mse(n))return e.createManagedBean(new Rye(t,i))}}]},zye={moduleName:"GroupEdit",version:fve,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="groupEditSvc",this.pendingEditRefresh=null,this.dropGroupTarget=null,this.dropGroupTimer=null,this.dropGroupThrottled=!1,this.draggingGroups=null}postConstruct(){gse(this.gos)&&this.addManagedListeners(this.eventSvc,{cellValueChanged:e=>this.onCsrmCellChange(e),batchEditingStopped:()=>this.flushGroupEdits()})}destroy(){this.stopDragging(!0),super.destroy()}isGroupingDrop(e){var t;return!(!e.rowDragManaged||!e.sameGrid)&&(!!this.gos.get("refreshAfterGroupEdit")&&(!(null===(t=this.beans.rowGroupColsSvc)||void 0===t||null===(t=t.columns)||void 0===t||!t.length)&&!this.beans.colModel.isPivotMode()))}initDraggingGroups(e){const t=new Map,i=e=>{const n=e.childrenAfterGroup;if(n){if(t.has(e))return;const o=n.slice();t.set(e,o);for(const e of o)i(e)}};for(const n of e.rows)n.group&&i(n);this.draggingGroups=t}canSetParent(e){var t,i;return!!e.sameGrid&&(!(null===(t=this.beans.groupStage)||void 0===t||!t.treeData)||!(e.rowDragManaged&&!this.gos.get("refreshAfterGroupEdit"))&&!(null===(i=this.beans.rowGroupColsSvc)||void 0===i||null===(i=i.columns)||void 0===i||!i.length))}canDropRow(e,t){var i,n,o;if(null!==(i=this.beans.groupStage)&&void 0!==i&&i.treeData)return!Cye(e,t.newParent);const{position:s,target:r,newParent:a,rootNode:l}=t,d=e.parent;if(e.group&&(xye(e,r)||xye(e,a)))return!1;if("inside"===s)return!0;if(a&&a!==d)return a!==l||d===l;const c=null!==(n=null!==a&&void 0!==a?a:null===r||void 0===r?void 0:r.parent)&&void 0!==n?n:l;if(c!==d)return!1;const u=e.group?e.level:null!==(o=d.level)&&void 0!==o?o:-1;let h=-1;var p,g;r?h=r.group?r.level:null!==(p=null===(g=r.parent)||void 0===g?void 0:g.level)&&void 0!==p?p:-1:c&&(h=c.level);return!(u>=0&&h>=0&&h!==u)}fixRowsDrop(e,t,i,n){var o,s,r,a,l;const d=!(null===(o=this.beans.groupStage)||void 0===o||!o.treeData);e.treeData=d;if(!(!(null===(s=this.beans.rowGroupColsSvc)||void 0===s||null===(s=s.columns)||void 0===s||!s.length)||this.gos.get("pivotMode"))&&!d)return;this.draggingGroups||!this.isGroupingDrop(e)||e.suppressMoveWhenRowDragging||this.initDraggingGroups(e);let c=e.target,u=null,h=!1;const p=e.rootNode,g=this.beans.rowModel,m=this.canStartGroup(c,d);this.updateDropTarget(e,i,m);const f=null!==(r=null===(a=this.beans.pageBounds)||void 0===a||null===(l=a.getLastRow)||void 0===l?void 0:l.call(a))&&void 0!==r?r:g.getRowCount()-1;var v,y;t&&(!c||n>=.5&&c.rowIndex===f?u=p:e.moved&&c&&this.dropGroupThrottled&&this.shouldDropTargetBeParent(e)&&(u=c),u||(u=null!==(v=null===(y=c)||void 0===y?void 0:y.parent)&&void 0!==v?v:p));if(i||!c||!m||c.group&&c.expanded||this.startDropGroupDelay(c),u){if(c&&u===c&&u!==p){const e=u.expanded?ice(g,1,c):null;(null===e||void 0===e?void 0:e.parent)===u?(c=e,n=-.5):h=!0}if(c&&!h){let e=c;for(;e&&e!==p&&e!==u;)c=e,e=e.parent}}e.target=c,e.newParent=u,e.yDelta=n,e.inside=h}clearNewSameParent(e,t){const i=e.newParent;!i||t&&!Sye(e.rows,i)||(e.newParent=null)}updateDropTarget(e,t,i){var n,o;const s=i?e.target:null;this.dropGroupTarget&&this.dropGroupTarget!==s&&this.resetDragGroup(),null!==s&&void 0!==s&&null!==(n=s.childrenAfterSort)&&void 0!==n&&n.length&&(t&&this.dropGroupThrottled&&!s.expanded&&null!==(o=s.isExpandable)&&void 0!==o&&o.call(s)&&s.setExpanded(!0,void 0,!0),this.canDropInTarget(s,e)&&(this.dropGroupThrottled=!0,this.dropGroupTarget=s))}canDropInTarget(e,t){if(e.expanded)return!0;if(!e.group)return!1;if("inside"===t.pointerPos)return!0;if(t.treeData)return!1;const i=t.rows,n=e.level;for(let o=0,s=i.length;o<s;++o){const t=i[o];if(t!==e&&t.group&&t.level!==n)return!1}return!0}startDropGroupDelay(e){if(this.dropGroupTarget&&this.dropGroupTarget!==e&&this.resetDragGroup(),this.dropGroupTarget=e,null!==this.dropGroupTimer)return;const t=this.gos.get("rowDragInsertDelay");this.dropGroupTimer=window.setTimeout(()=>{var e;this.dropGroupTimer=null,this.dropGroupThrottled=!0,null===(e=this.beans.dragAndDrop)||void 0===e||e.nudge()},t)}resetDragGroup(){null!==this.dropGroupTimer&&(window.clearTimeout(this.dropGroupTimer),this.dropGroupTimer=null),this.dropGroupTarget=null,this.dropGroupThrottled=!1}stopDragging(e){e&&(this.draggingGroups=null),this.resetDragGroup()}shouldDropTargetBeParent(e){var t,i;let{target:n,rows:o,pointerPos:s,treeData:r}=e;if(!n||"none"===s)return!1;if("inside"===s)return!0;if(!r&&n.group&&!n.expanded)return!0;if("above"===s)return!1;const a=this.beans.rowModel;let l,d=n.rowIndex+1;do{var c;l=a.getRow(d++)}while(null!==(c=l)&&void 0!==c&&c.footer);const u=null!==(t=null===(i=this.draggingGroups)||void 0===i?void 0:i.get(n))&&void 0!==t?t:n.childrenAfterGroup;if(l&&l.parent===n&&null!==u&&void 0!==u&&u.length){const e=new Set(o);for(let t=0,i=u.length;t<i;++t){const i=u[t];if(null!==i.rowIndex&&!e.has(i))return!0}}return!1}dropGroupEdit(e){var t,i,n,o;const{beans:s}=this,r=e.position,a=null!==(t=e.target)&&void 0!==t?t:null,l=e.rootNode,d=null!==(i=null!==(n=e.newParent)&&void 0!==n?n:null===a||void 0===a?void 0:a.parent)&&void 0!==i?i:l,c=s.focusSvc,u=c.getFocusedCell(),h=u&&fue(s,u),p=new Set,g=new Jue,m=g.updates;let f;const v=e=>{p.has(e)||(p.add(e),null!==f&&void 0!==f||(f=this.newGroupValues(d)),this.setRowGroup(e,f)&&m.add(e))},y=e=>{var t,i;const n=null!==(t=null===(i=this.draggingGroups)||void 0===i?void 0:i.get(e))&&void 0!==t?t:e.childrenAfterGroup,o=null===n||void 0===n?void 0:n.length;if(o)for(let s=0;s<o;++s){const e=n[s];e.sourceRowIndex>=0?v(e):y(e)}};for(const S of e.rows)if(S.group)y(S);else{const e=S.sourceRowIndex>=0&&!S.destroyed?S:this.csrmFirstLeaf(S);e&&v(e)}const b="inside"===r?"above":r,x="inside"===r&&null!==(o=this.findFirstLeafForParent(d,p))&&void 0!==o?o:a;let C=!1;if(p.size&&"none"!==b&&(C=Que(l._leafs,p,x,"above"===b)),!m.size&&!C)return!1;g.reordered=C;for(const S of p)g.updates.add(S);return this.csrmRefresh(g),h?h.focusCell():c.clearFocusedCell(),!0}canStartGroup(e,t){return!(!e||e.level<0||e.footer||e.detail)&&(!!e.group||t)}flushGroupEdits(){const e=this.pendingEditRefresh;e&&(this.pendingEditRefresh=null,this.csrmRefresh(e))}csrmRefresh(e){const t=this.beans.rowModel,i=t.rootNode;i&&t.refreshModel({step:"group",keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedPath:new vhe(!1,i),changedRowNodes:e})}newGroupValues(e){var t,i;const n=null!==(t=null===(i=this.beans.rowGroupColsSvc)||void 0===i?void 0:i.columns)&&void 0!==t?t:[],o=new Array(n.length);let s=-1,r=e;for(;r&&r.level>=0;){const e=n[r.level];if(e){var a,l,d;const t=e.getColId(),i=r.level;o[i]=null!==(a=null!==(l=null===(d=r.groupData)||void 0===d?void 0:d[t])&&void 0!==l?l:r.key)&&void 0!==a?a:void 0,i>s&&(s=i)}r=r.parent}return{values:o,columns:n,maxLevel:s}}setRowGroup(e,t){let{values:i,columns:n,maxLevel:o}=t;if(o<0)return!1;const{valueSvc:s,editSvc:r}=this.beans;let a=!1;for(let l=0;l<n.length;++l){const t=n[l];if(!t||l>o)continue;const d=i[l],c=s.getValue(t,e,!1,"api");if(c===d||null==c&&null==d)continue;let u=d;const h=s.parseValue(t,e,d,c);void 0!==h&&(u=h);const p=null===r||void 0===r?void 0:r.setDataValue({rowNode:e,column:t},u,"rowDrag");(null!=p?!!p:e.setDataValue(t,u,"rowDrag"))&&(a=!0)}return a}onCsrmCellChange(e){const{column:t,node:i,source:n}=e;if(!this.gos.get("refreshAfterGroupEdit"))return;if("rowDrag"===n)return;if(null===t||void 0===t||!t.isRowGroupActive())return;if(i.group||!i.data)return;const o=this.beans.editSvc;if(null!==o&&void 0!==o&&o.isBatchEditing()){let e=this.pendingEditRefresh;e||(e=bye(),this.pendingEditRefresh=e),e.updates.add(i)}else{const e=bye();e.updates.add(i),this.csrmRefresh(e)}}csrmFirstLeaf(e){var t;if(!e)return null;const i=this.draggingGroups;let n=null!==(t=null===i||void 0===i?void 0:i.get(e))&&void 0!==t?t:e.childrenAfterGroup;for(;null!==(o=n)&&void 0!==o&&o.length;){var o,s;const e=n[0];if(e.sourceRowIndex>=0)return e.destroyed?this.firstAliveChildLeaf(e):e;n=null!==(s=null===i||void 0===i?void 0:i.get(e))&&void 0!==s?s:e.childrenAfterGroup}return que(e)}firstAliveChildLeaf(e){var t,i;const n=null!==(t=null===(i=this.draggingGroups)||void 0===i?void 0:i.get(e))&&void 0!==t?t:e.childrenAfterGroup;if(n)for(const o of n)if(o.sourceRowIndex>=0&&!o.destroyed)return o;return null}findFirstLeafForParent(e,t){var i,n;if(!e)return null;const o=null!==(i=null===(n=this.draggingGroups)||void 0===n?void 0:n.get(e))&&void 0!==i?i:null===e||void 0===e?void 0:e.childrenAfterGroup;if(!o)return null;for(let s=0,r=o.length;s<r;++s){const e=o[s];if(e.sourceRowIndex>=0&&!t.has(e))return e;const i=this.findFirstLeafForParent(e,t);if(null!==i)return i}return null}}],dependsOn:[vve,Oye]},Bye={selector:"AG-GRID-HEADER-DROP-ZONES",component:class extends hae{constructor(){super()}postConstruct(){this.setGui(this.createNorthPanel());const e=this.onRowGroupChanged.bind(this);this.addManagedEventListeners({columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedPropertyListener("rowGroupPanelShow",e),this.addManagedPropertyListener("pivotPanelShow",()=>this.onPivotPanelShow()),this.onRowGroupChanged()}createNorthPanel(){const e=oce({tag:"div",cls:"ag-column-drop-wrapper",role:"presentation"}),t=new Pve(!0);this.rowGroupComp=this.createManagedBean(t);const i=new Eve(!0);this.pivotComp=this.createManagedBean(i),e.appendChild(t.getGui()),e.appendChild(i.getGui());const n=this.onDropPanelVisible.bind(this);return this.addManagedListeners(t,{displayChanged:n}),this.addManagedListeners(i,{displayChanged:n}),this.onDropPanelVisible(),e}onDropPanelVisible(){const{rowGroupComp:e,pivotComp:t}=this,i=e.isDisplayed()&&t.isDisplayed(),n="ag-column-drop-horizontal-half-width";e.toggleCss(n,i),t.toggleCss(n,i)}onRowGroupChanged(){const e=this.rowGroupComp;if(!e)return;const t=this.gos.get("rowGroupPanelShow");if("always"===t)e.setDisplayed(!0);else if("onlyWhenGrouping"===t){var i;const t=0!==(null===(i=this.beans.rowGroupColsSvc)||void 0===i||null===(i=i.columns)||void 0===i?void 0:i.length);e.setDisplayed(t)}else e.setDisplayed(!1)}onPivotPanelShow(){const e=this.pivotComp;if(!e)return;const t=this.gos.get("pivotPanelShow");if("always"===t)e.setDisplayed(!0);else if("onlyWhenPivoting"===t){const t=this.beans.colModel.isPivotActive();e.setDisplayed(t)}else e.setDisplayed(!1)}}};function Vye(e,t){const i=e.sourceRowIndex,n=t.sourceRowIndex,o=i>=0,s=n>=0;return o&&s?i-n:!o&&!s?e.__objectId-t.__objectId:o?1:-1}var Gye=e=>{for(const t of e){const e=null===t||void 0===t?void 0:t.childrenAfterGroup;if(!e)continue;const i=e.length;let n=0;for(let o=0;o<i;++o){const i=e[o];i.parent!==t||i.destroyed||(n!==o&&(e[n]=i),++n)}i!==n&&(e.length=n,t.updateHasChildren(),Hye(t))}},Hye=e=>{for(;void 0!==e._leafs;){const t=e.parent;if(!t)break;e._leafs=void 0,e=t}};var jye={moduleName:"SharedRowGrouping",version:fve,apiFunctions:{setRowGroupColumns:function(e,t){var i;null===(i=e.rowGroupColsSvc)||void 0===i||i.setColumns(t,"api")},removeRowGroupColumns:function(e,t){var i;null===(i=e.rowGroupColsSvc)||void 0===i||i.removeColumns(t,"api")},addRowGroupColumns:function(e,t){var i;null===(i=e.rowGroupColsSvc)||void 0===i||i.addColumns(t,"api")},getRowGroupColumns:function(e){var t,i;return null!==(t=null===(i=e.rowGroupColsSvc)||void 0===i?void 0:i.columns)&&void 0!==t?t:[]},moveRowGroupColumn:function(e,t,i){var n,o;null===(n=e.rowGroupColsSvc)||void 0===n||null===(o=n.moveColumn)||void 0===o||o.call(n,t,i,"api")}},dependsOn:[vve,sye,Pye,Fye,hye]},Wye={moduleName:"RowGrouping",version:fve,dynamicBeans:{groupStrategy:class extends yoe{constructor(){super(...arguments),this.groupCols=[],this.nonLeafsById=new Map,this.checkGroupCols=!0,this.pivotMode=!1,this.groupEmpty=!1}invalidateGroupCols(){this.checkGroupCols=!0}destroy(){super.destroy(),this.groupCols.length=0,this.nonLeafsById.clear()}clearNonLeafs(){const e=this.nonLeafsById;for(const t of e.values())t._destroy(!1);e.clear()}loadGroupData(e){if(!e.group)return e._groupData=null,null;const t=e.rowGroupColumn,{valueSvc:i,showRowGroupCols:n}=this.beans,o={};if(e._groupData=o,!t)return o;const s=que(e),r=t.getId();if(!n)return o;const a=n.columns;for(let l=0,d=a.length;l<d;++l){const e=a[l];e.isRowGroupDisplayed(r)&&(o[e.getColId()]=i.getValue(t,s))}return o}execute(e,t){var i;const n=t.changedPath;if(this.initRefresh(t)){const i=t.changedRowNodes;i?this.handleDeltaUpdate(e,n,i,!!t.animate):this.shotgunResetEverything(e)}this.positionLeafsAndGroups(n),this.orderGroups(e),null===(i=this.beans.selectionSvc)||void 0===i||i.updateSelectableAfterGrouping(n)}positionLeafsAndGroups(e){e.forEachChangedNodeDepthFirst(e=>{const t=e.childrenAfterGroup,i=null===t||void 0===t?void 0:t.length;if(!i)return;const n=new Array(i);let o,s=0,r=!1;for(let d=0;d<i;++d){var a;const e=t[d];if(null!==(a=e.childrenAfterGroup)&&void 0!==a&&a.length){if(!o&&""===e.key){o=e;const t=i-1;r||(r=d!==t),n[t]=e}}else r||(r=s!==d),n[s++]=e}if(r){for(let e=0;e<i;++e){var l;const i=t[e];null!==(l=i.childrenAfterGroup)&&void 0!==l&&l.length&&i!==o&&(n[s++]=i)}e.childrenAfterGroup=n;const r=e.sibling;r&&(r.childrenAfterGroup=n)}},!1)}initRefresh(e){const{rowGroupColsSvc:t,colModel:i,gos:n}=this.beans,o=i.isPivotMode();this.pivotMode=o,this.groupEmpty=o||!n.get("groupAllowUnbalanced");const s=null===t||void 0===t?void 0:t.columns,r=this.groupCols,a=e.afterColumnsChanged;if(a||!r||this.checkGroupCols)if(this.checkGroupCols=!1,r&&!((e,t)=>{const i=e.length;if(i!==(null===t||void 0===t?void 0:t.length))return!0;for(let n=0;n<i;n++){const i=e[n],o=t[n];if(i.col!==o)return!0;const s=o.getColDef();if(i.field!==s.field||i.type!==s.type||i.valueGetter!==s.valueGetter||i.keyCreator!==s.keyCreator)return!0}return!1})(r,s)){if(a)return!1}else e.animate=!1,((e,t)=>{if(!e)return void(t.length=0);const i=e.length;t.length=i;for(let n=0;n<i;n++){const i=e[n],o=i.getColDef();t[n]={col:i,field:o.field,type:o.type,keyCreator:o.keyCreator,valueGetter:o.valueGetter}}})(s,this.groupCols);return!0}handleDeltaUpdate(e,t,i,n){let{removals:o,updates:s,adds:r,reordered:a}=i;const l=new Set;let d=t;d.active||(d=null);for(let y=0,b=o.length;y<b;++y){const e=o[y],t=this.removeFromParent(e);var c;if(!l.has(t))l.add(t),null===(c=d)||void 0===c||c.addParentNode(t)}for(const y of s){var u;const t=y.parent;if(null===(u=d)||void 0===u||u.addParentNode(t),this.moveNodeInWrongPath(e,y)){var h,p,g;l.add(t);const e=y.parent;null===(h=d)||void 0===h||h.addParentNode(e),a||(a=(null!==(p=null===e||void 0===e||null===(g=e.childrenAfterGroup)||void 0===g?void 0:g.length)&&void 0!==p?p:0)>1)}}if(r.size)for(const y of r){var m,f,v;this.insertOneNode(e,y);const t=y.parent;null===(m=d)||void 0===m||m.addParentNode(t),a||(a=(null!==(f=null===t||void 0===t||null===(v=t.childrenAfterGroup)||void 0===v?void 0:v.length)&&void 0!==f?f:0)>1)}l.size&&(Gye(l),this.removeEmptyGroups(l,n)),a&&this.sortChildren(t)}sortChildren(e){e.forEachChangedNodeDepthFirst(t=>{(function(e){if(!e)return!1;const t=e.length;if(t<2)return!1;let i=!1;for(let n=1;n<t;n++)if(Vye(e[n-1],e[n])>0){i=!0;break}return!!i&&(e.sort(Vye),!0)})(t.childrenAfterGroup)&&e.active&&e.addParentNode(t)},!1,!0)}orderGroups(e){const t=this.gos.getCallback("initialGroupOrderComparator");if(!t)return;const i=this.beans,n=i.gridApi,o=i.gridOptions.context,s=(e,i)=>t({api:n,context:o,nodeA:e,nodeB:i}),r=e=>{const t=e.childrenAfterGroup,i=null===t||void 0===t?void 0:t.length;if(i&&!e.leafGroup){i>1&&t.sort(s);for(let e=0,n=i;e<n;++e)r(t[e])}};r(e)}moveNodeInWrongPath(e,t){var i;const{valueSvc:n}=this.beans,o=this.groupEmpty;let s=t.parent,r=!1;const a=this.groupCols;if(!a)return!1;for(let d=a.length-1;d>=0;--d){var l;const{col:e}=a[d];let i=n.getKeyForNode(e,t);if(null==i||""===i){if(!o)continue;i=""}if(null===(l=s)||void 0===l||!l.parent||s.key!==i){r=!0;break}s=s.parent}return r||(r=!(null===(i=s)||void 0===i||!i.parent)),!!r&&(this.removeFromParent(t),this.insertOneNode(e,t),t.setData(t.data),!0)}groupShouldBeRemoved(e){var t,i,n;const o=this.getChildrenMappedKey(e.key,e.rowGroupColumn),s=null===(t=e.parent)||void 0===t?void 0:t.childrenMapped;return!(!s||!s[o])&&(!!e.group&&0===(null!==(i=null===(n=e.childrenAfterGroup)||void 0===n?void 0:n.length)&&void 0!==i?i:0))}removeEmptyGroups(e,t){const i=this.beans.selectionSvc;let n;const o=Array.from(e),s=this.nonLeafsById;do{e.clear();for(let r=0;r<o.length;++r){let a=o[r];for(;a;){const l=a.parent;if(a.destroyed)o[r]=l,a=l;else{if(!l)break;this.groupShouldBeRemoved(a)?(e.add(l),this.removeFromParent(a),i&&a.isSelected()&&(null!==n&&void 0!==n||(n=[]),n.push(a)),o[r]=l,s.delete(a.id),a._destroy(t),a=l):a=l}}}Gye(e)}while(e.size);n&&i.setNodesSelected({nodes:n,newValue:!1,source:"rowGroupChanged"})}removeFromParent(e){const t=e.parent;if(t){const i=this.getChildrenMappedKey(e.key,e.rowGroupColumn),n=t.childrenMapped;n&&delete n[i]}return e.setRowTop(null),e.setRowIndex(null),t}addToParent(e,t){var i;const n=null!==(i=t.childrenMapped)&&void 0!==i?i:t.childrenMapped={},o=this.getChildrenMappedKey(e.key,e.rowGroupColumn);if(n[o]!==e){n[o]=e;let i=t.childrenAfterGroup;if(!i){t.childrenAfterGroup=i=[];const e=t.sibling;e&&(e.childrenAfterGroup=t.childrenAfterGroup)}i.push(e),Cve(t,this.beans,!0),Hye(t)}}shotgunResetEverything(e){var t,i,n;null===(t=this.beans.selectionSvc)||void 0===t||null===(i=t.filterFromSelection)||void 0===i||i.call(t,e=>!e.group),this.nonLeafsById.clear(),e.leafGroup=!(null!==(n=this.groupCols)&&void 0!==n&&n.length),e.childrenAfterGroup=[],e.childrenMapped={},e.updateHasChildren();const o=e.sibling;o&&(o.childrenAfterGroup=e.childrenAfterGroup,o.childrenMapped=e.childrenMapped);const s=e._leafs;for(let r=0,a=s.length;r<a;++r)this.insertOneNode(e,s[r])}insertOneNode(e,t){let i=e;const{beans:n,pivotMode:o,groupCols:s,groupEmpty:r}=this,a=n.valueSvc;if(!s)return;const l=s.length;for(let c=0;c<l;++c){var d;const e=s[c],n=e.col;let u=a.getKeyForNode(n,t);if(null==u||""===u){if(!r)continue;u=""}const h=null===(d=i.childrenMapped)||void 0===d?void 0:d[this.getChildrenMappedKey(u,n)];if(h){i=h;continue}const p=i.level+1,g=p>=l-1,m=this.createGroup(i,e,u,p,g,t);this.addToParent(m,i),this.setExpandedInitialValue(o,m),i=m}i.group||lse(184,{parentGroupData:i.data,childNodeData:t.data}),t.parent=i,t.level=i.level+1,i.childrenAfterGroup.push(t),i.updateHasChildren(),Hye(i)}createGroup(e,t,i,n,o,s){var r;const a=t.col,l=(e.level>=0?e.id+"-":"row-group-")+a.getColId()+"-"+i,d=this.nonLeafsById;let c=d.get(l);return void 0!==c||(c=new Qde(this.beans),c.group=!0,c.parent=e,c.field=null!==(r=t.field)&&void 0!==r?r:null,c.rowGroupColumn=a,c.key=i,c.id=l,c.level=n,c.leafGroup=o,c.rowGroupIndex=n,c.childrenAfterGroup=[],c.childrenMapped={},d.set(l,c),c.groupValue=s&&this.beans.valueSvc.getValue(a,s),c.setAllChildrenCount(0),c.updateHasChildren()),c}getChildrenMappedKey(e,t){return t?t.getId()+"-"+e:e}setExpandedInitialValue(e,t){e&&t.leafGroup?t.expanded=!1:t.expanded=Aye(this.beans,t,t.level)}onShowRowGroupColsSetChanged(){var e;const{rowModel:t,valueSvc:i}=this.beans;for(const o of this.nonLeafsById.values()){o._groupData=void 0;const e=o.rowGroupColumn,t=e&&que(o);o.groupValue=t&&i.getValue(e,t)}const n=null===(e=t.rootNode)||void 0===e?void 0:e._leafs;if(n)for(let o=0,s=n.length;o<s;++o){n[o].parent._groupData=void 0}}}},rowModels:["clientSide"],dependsOn:[jye,rye,Oye,zye]},_ye={moduleName:"RowGroupingPanel",version:fve,selectors:[Bye],icons:{pivotPanel:"pivot",rowGroupPanel:"group",panelDelimiter:"small-right",panelDelimiterRtl:"small-left"},dependsOn:[vve,mme]};var Kye="paste",Uye="dragCopy",Yye="clipboard";var $ye={moduleName:"Clipboard",version:fve,beans:[class extends yoe{constructor(){super(...arguments),this.beanName="clipboardSvc",this.clientSideRowModel=null,this.gridCtrl=null,this.lastPasteOperationTime=0,this.navigatorApiFailed=!1}postConstruct(){const{gos:e,rowModel:t,ctrlsSvc:i}=this.beans;gse(e)&&(this.clientSideRowModel=t),i.whenReady(this,e=>{this.gridCtrl=e.gridCtrl})}destroy(){super.destroy(),this.clientSideRowModel=null,this.gridCtrl=null}pasteFromClipboard(){var e;!this.gos.get("suppressClipboardApi")&&!this.navigatorApiFailed&&null!==(e=navigator.clipboard)&&void 0!==e&&e.readText?navigator.clipboard.readText().then(this.processClipboardData.bind(this)).catch(e=>{lse(40,{e:e,method:"readText"}),this.navigatorApiFailed=!0,this.pasteFromClipboardLegacy()}):this.pasteFromClipboardLegacy()}pasteFromClipboardLegacy(){let e=!1;const t=t=>{const i=Date.now();i-this.lastPasteOperationTime<50&&(e=!0,t.preventDefault()),this.lastPasteOperationTime=i};this.executeOnTempElement(e=>{e.addEventListener("paste",t),e.focus({preventScroll:!0})},i=>{const n=i.value;e?this.refocusLastFocusedCell():this.processClipboardData(n),i.removeEventListener("paste",t)})}refocusLastFocusedCell(){const{focusSvc:e}=this.beans,t=e.getFocusedCell();t&&e.setFocusedCell({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0})}getClipboardDelimiter(){const e=this.gos.get("clipboardDelimiter");return Fie(e)?e:"\t"}processClipboardData(e){if(null==e)return;let t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";const i=[],n=e=>"\r"===e||"\n"===e;let o=!1;if(""===e)return[[""]];for(let s=0,r=0,a=0;a<e.length;a++){const l=e[a-1],d=e[a],c=e[a+1],u=()=>{i[s]||(i[s]=[]),i[s][r]||(i[s][r]="")};if(u(),'"'===d&&(o?'"'===c?(i[s][r]+='"',a++):o=!1:(void 0===l||l===t||n(l))&&(o=!0)),!o&&'"'!==d){if(d===t){r++,u();continue}if(n(d)){r=0,s++,u(),"\r"===d&&"\n"===c&&a++;continue}}i[s][r]+=d}return i}(e,this.getClipboardDelimiter());const i=this.gos.getCallback("processDataFromClipboard");if(i&&(t=i({data:t})),null==t)return;this.gos.get("suppressLastEmptyLineOnPaste")&&this.removeLastLineIfBlank(t);const{rangeSvc:n,editSvc:o}=this.beans;this.doPasteOperation((e,i,s,r)=>{(null===n||void 0===n?void 0:n.isMoreThanOneCell())&&!this.hasOnlyOneValueToPaste(t)?this.pasteIntoActiveRange(t,e,i,r):this.pasteStartingFromFocusedCell(t,e,i,s,r),null===o||void 0===o||o.stopEditing(void 0,{source:Kye})})}doPasteOperation(e){const t="clipboard",{eventSvc:i,focusSvc:n,rowRenderer:o,gos:s}=this.beans;i.dispatchEvent({type:"pasteStart",source:t});const{clientSideRowModel:r}=this,a=null===r||void 0===r?void 0:r.rootNode,l=a&&new vhe(s.get("aggregateOnlyChangedColumns"),a),d={},c=[];e(d,c,n.getFocusedCell(),l);const u=[...c];l&&(r.doAggregate(l),l.forEachChangedNodeDepthFirst(e=>{u.push(e)})),o.refreshCells({rowNodes:u}),this.dispatchFlashCells(d),this.fireRowChanged(c),this.refocusLastFocusedCell(),i.dispatchEvent({type:"pasteEnd",source:t})}getPreProcessRangeCallback(e){return t=>{const{rangeSvc:i}=this.beans;if(!i)return;const{rowDiff:n,colDiff:o}=this.getAdjustedRangeDimensionForPaste(t,e);0!==n&&i.extendRangeRowCountBy(t,n),0!==o&&i.extendRangeColumnCountBy(t,o)}}getAdjustedRangeDimensionForPaste(e,t){const i=this.beans.rangeSvc,n=t.length,o=i.getRangeRowCount(e),s=o>=n&&o%n===0,r=t[0].length,a=e.columns.length;return{rowDiff:s?0:n-o,colDiff:a>=r&&a%r===0?0:r-a}}pasteIntoActiveRange(e,t,i,n){let o=0,s=0;this.iterateActiveRanges((r,a,l,d)=>{if(d-o>=e.length){if(d%e.length!==0)return;o+=s,s=0}const c=e[d-o];i.push(a);const u=this.gos.getCallback("processCellFromClipboard"),h=l.columns,p=h.findIndex(Dre);-1!==p&&h.splice(p,1);for(let e=0;e<h.length;e++){const i=h[e];if(!i.isCellEditable(a)||i.isSuppressPaste(a))continue;let o=e;e>=c.length&&(o=e%c.length);const s=this.processCell(a,i,c[o],Uye,u,!0);a.setDataValue(i,s,Kye),null===n||void 0===n||n.addParentNode(a.parent,[i]);const{rowIndex:l,rowPinned:d}=r,p=due({rowIndex:l,column:i,rowPinned:d});t[p]=!0}s++},!1,this.getPreProcessRangeCallback(e))}getDisplayedColumnsStartingAt(e){let t=e;const i=[],{visibleCols:n}=this.beans;for(;t&&Are(t);)t=n.getColAfter(t);for(;null!=t;)i.push(t),t=n.getColAfter(t);return i}pasteStartingFromFocusedCell(e,t,i,n,o){if(!n)return;const s={rowIndex:n.rowIndex,rowPinned:n.rowPinned},r=this.getDisplayedColumnsStartingAt(n.column);this.isPasteSingleValueIntoRange(e)?this.pasteSingleValueIntoRange(e,i,t,o):this.pasteMultipleValues(e,s,i,r,t,Yye,o)}isPasteSingleValueIntoRange(e){const t=this.beans.rangeSvc;return this.hasOnlyOneValueToPaste(e)&&!!t&&!t.isEmpty()}pasteSingleValueIntoRange(e,t,i,n){const o=e[0][0];this.iterateActiveRanges((e,s,r)=>{t.push(s),r.columns.forEach(e=>this.updateCellValue(s,e,o,i,Yye,n))})}hasOnlyOneValueToPaste(e){return 1===e.length&&1===e[0].length}copyRangeDown(){const{rangeSvc:e,gos:t,formula:i,valueSvc:n}=this.beans;if(!e||e.isEmpty())return;const o=[];this.doPasteOperation((e,s,r,a)=>{const l=t.getCallback("processCellForClipboard"),d=t.getCallback("processCellFromClipboard");this.iterateActiveRanges((t,r,c)=>{const{columns:u}=c;o.length?(s.push(r),u.forEach((n,s)=>{if(!n.isCellEditable(r)||n.isSuppressPaste(r))return;n.isAllowFormula()&&(null===i||void 0===i?void 0:i.isFormula(o[s]))&&(o[s]=null===i||void 0===i?void 0:i.updateFormulaByOffset({value:o[s],rowDelta:1}));const l=this.processCell(r,n,o[s],Uye,d,!0);r.setDataValue(n,l,Kye),a&&a.addParentNode(r.parent,[n]);const{rowIndex:c,rowPinned:u}=t,h=due({rowIndex:c,column:n,rowPinned:u});e[h]=!0})):u.forEach(e=>{const t=this.processCell(r,e,n.getValue(e,r),Uye,l,!1,!0);o.push(t)})},!0)})}removeLastLineIfBlank(e){const t=pre(e);if(t&&1===t.length&&""===t[0]){if(1===e.length)return;fre(e,t)}}fireRowChanged(e){if("fullRow"===this.gos.get("editType"))for(const t of e)this.eventSvc.dispatchEvent({type:"rowValueChanged",node:t,data:t.data,rowIndex:t.rowIndex,rowPinned:t.rowPinned})}pasteMultipleValues(e,t,i,n,o,s,r){let a=t;const l=this.beans,{gos:d}=l,c=null!=this.clientSideRowModel&&!d.get("enableGroupEdit")&&!d.get("treeData"),u=()=>{for(;;){if(!a)return null;const e=mue(l,a);if(a=yue(l,{rowPinned:a.rowPinned,rowIndex:a.rowIndex}),null==e)return null;if(!(e.detail||e.footer||c&&e.group))return e}};for(const h of e){const e=u();e&&(h.forEach((t,i)=>this.updateCellValue(e,n[i],t,o,s,r)),i.push(e))}}updateCellValue(e,t,i,n,o,s){if(!e||null===t||void 0===t||!t.isCellEditable(e)||null!==t&&void 0!==t&&t.isSuppressPaste(e))return;const r=this.processCell(e,t,i,o,this.gos.getCallback("processCellFromClipboard"),!0);e.setDataValue(t,r,Kye);const{rowIndex:a,rowPinned:l}=e;n[due({rowIndex:a,column:t,rowPinned:l})]=!0,s&&s.addParentNode(e.parent,[t])}copyToClipboard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.copyOrCutToClipboard(e)}cutToClipboard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this.gos.get("suppressCutToClipboard")||(this.eventSvc.dispatchEvent({type:"cutStart",source:t}),this.copyOrCutToClipboard(e,!0),this.eventSvc.dispatchEvent({type:"cutEnd",source:t}))}copyOrCutToClipboard(e,t){let{includeHeaders:i,includeGroupHeaders:n}=e;const{gos:o,focusSvc:s}=this.beans;null==i&&(i=o.get("copyHeadersToClipboard")),null==n&&(n=o.get("copyGroupHeadersToClipboard"));const r={includeHeaders:i,includeGroupHeaders:n},a=o.get("rowSelection"),l=o.get("cellSelection");let d=null;this.shouldCopyCells(l,a)?(this.copySelectedRangeToClipboard(r),d=0):this.shouldCopyRows(a)?(this.copySelectedRowsToClipboard(r),d=1):s.isAnyCellFocused()&&(this.copyFocusedCellToClipboard(r),d=2),t&&null!==d&&this.clearCellsAfterCopy(d)}shouldCopyCells(e,t){const{rangeSvc:i,selectionSvc:n,gos:o}=this.beans;if(!i||i.isEmpty())return!1;if(e){return!("object"===typeof t&&t.copySelectedRows&&!(null!==n&&void 0!==n&&n.isEmpty()))}{const e=o.get("suppressCopySingleCellRanges");return!(!i.isMoreThanOneCell()&&e)}}shouldCopyRows(e){var t;const{selectionSvc:i,gos:n}=this.beans;return null!==(t=null===i||void 0===i?void 0:i.isEmpty())&&void 0!==t&&!t&&(e&&"string"!==typeof e?null!==(o=e.copySelectedRows)&&void 0!==o&&o:!n.get("suppressCopyRowsToClipboard"));var o}clearCellsAfterCopy(e){const t=this.beans,{rangeSvc:i,focusSvc:n,eventSvc:o}=t;if(o.dispatchEvent({type:"keyShortcutChangedCellStart"}),0===e)i.clearCellRangeCellValues({cellEventSource:"clipboardSvc"});else if(1===e)this.clearSelectedRows();else{const e=n.getFocusedCell();if(null==e)return;const i=mue(t,e);i&&this.clearCellValue(i,e.column)}o.dispatchEvent({type:"keyShortcutChangedCellEnd"})}clearSelectedRows(){var e;const{selectionSvc:t,visibleCols:i}=this.beans,n=null!==(e=null===t||void 0===t?void 0:t.getSelectedNodes())&&void 0!==e?e:[],o=i.allCols;for(const s of n)for(const e of o)this.clearCellValue(s,e)}clearCellValue(e,t){if(!t.isCellEditable(e))return;const i=this.beans.valueSvc.getDeleteValue(t,e);e.setDataValue(t,i,"clipboardSvc")}iterateActiveRanges(e,t,i){const n=this.beans.rangeSvc;if(!n||n.isEmpty())return;const o=n.getCellRanges(),s=t?[o[0]]:o;for(const r of s)this.iterateActiveRange({cellRange:r,rowCallback:e,preProcessRange:i})}iterateActiveRange(e){const{cellRange:t,preProcessRange:i,rowCallback:n}=e,{beans:o}=this,{rangeSvc:s}=o;if(!s)return;i&&i(t);let r=s.getRangeStartRow(t);const a=s.getRangeEndRow(t);let l=0,d=!1;for(;!d&&null!=r;){const e=mue(o,r);d=hue(r,a),n(r,e,t,l++),r=yue(o,r)}}copySelectedRangeToClipboard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.beans.rangeSvc;if(!t||t.isEmpty())return;const i=t.areAllRangesAbleToMerge(),{data:n,cellsToFlash:o}=i?this.buildDataFromMergedRanges(t,e):this.buildDataFromRanges(t,e);this.copyDataToClipboard(n),this.dispatchFlashCells(o)}buildDataFromMergedRanges(e,t){const i=new Set,n=e.getCellRanges(),o=new Map,s=[],r={},a=gse(this.gos,this.beans.rowModel),l=new Set;a||this.beans.rowModel.forEachNode(e=>{l.add(e.rowIndex)});for(const u of n){u.columns.forEach(e=>i.add(e));const{rowPositions:t,cellsToFlash:n}=this.getRangeRowPositionsAndCellsToFlash(e,u);for(const e of t){const t=l.has(e.rowIndex);if(!a&&!t)continue;const i="".concat(e.rowIndex,"-").concat(e.rowPinned||"null");o.get(i)||(o.set(i,!0),s.push(e))}Object.assign(r,n)}const d=this.beans.visibleCols.allCols,c=Array.from(i);c.sort((e,t)=>d.indexOf(e)-d.indexOf(t));return{data:this.buildExportParams({columns:c,rowPositions:s,includeHeaders:t.includeHeaders,includeGroupHeaders:t.includeGroupHeaders}),cellsToFlash:r}}buildDataFromRanges(e,t){const i=e.getCellRanges(),n=[],o={};for(const s of i){const{rowPositions:i,cellsToFlash:r}=this.getRangeRowPositionsAndCellsToFlash(e,s);Object.assign(o,r),n.push(this.buildExportParams({columns:s.columns,rowPositions:i,includeHeaders:t.includeHeaders,includeGroupHeaders:t.includeGroupHeaders}))}return{data:n.join("\n"),cellsToFlash:o}}getRangeRowPositionsAndCellsToFlash(e,t){const i=[],n={},o=e.getRangeStartRow(t),s=e.getRangeEndRow(t);let r=o;for(;r;){i.push(r);for(const e of t.columns){const{rowIndex:t,rowPinned:i}=r;n[due({rowIndex:t,column:e,rowPinned:i})]=!0}if(hue(r,s))break;r=yue(this.beans,r)}return{rowPositions:i,cellsToFlash:n}}getCellsToFlashFromRowNodes(e){const t=this.beans.visibleCols.allCols,i={};for(let n=0;n<e.length;n++){const{level:o,rowIndex:s,rowPinned:r,sibling:a}=e[n],l=-1===o?a.rowIndex:s;if(null!=l)for(let e=0;e<t.length;e++){i[due({rowIndex:l,column:t[e],rowPinned:r})]=!0}}return i}copyFocusedCellToClipboard(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.beans.focusSvc.getFocusedCell();if(null==n)return;n=null!==(e=null===(t=this.beans.rowSpanSvc)||void 0===t?void 0:t.getCellStart(n))&&void 0!==e?e:n;const o=due(n),s={rowPinned:n.rowPinned,rowIndex:n.rowIndex},r=n.column,a=this.buildExportParams({columns:[r],rowPositions:[s],includeHeaders:i.includeHeaders,includeGroupHeaders:i.includeGroupHeaders});this.copyDataToClipboard(a),this.dispatchFlashCells({[o]:!0})}copySelectedRowsToClipboard(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{columnKeys:i,includeHeaders:n,includeGroupHeaders:o}=t,s=this.buildExportParams({columns:i,includeHeaders:n,includeGroupHeaders:o});this.copyDataToClipboard(s);const r=(null===(e=this.beans.selectionSvc)||void 0===e?void 0:e.getSelectedNodes())||[];this.dispatchFlashCells(this.getCellsToFlashFromRowNodes(r))}buildExportParams(e){const{columns:t,rowPositions:i,includeHeaders:n=!1,includeGroupHeaders:o=!1}=e,{gos:s,csvCreator:r}=this.beans,a={columnKeys:t,rowPositions:i,skipColumnHeaders:!n,skipColumnGroupHeaders:!o,suppressQuotes:!0,columnSeparator:this.getClipboardDelimiter(),onlySelected:!i,processCellCallback:s.getCallback("processCellForClipboard"),processRowGroupCallback:e=>{var t;let{node:i,column:n}=e;const{value:o,valueFormatted:r}=this.beans.valueSvc.getValueForDisplay({column:n,node:i,includeValueFormatted:!0}),a=null!==(t=null!==r&&void 0!==r?r:o)&&void 0!==t?t:"",l=s.getCallback("processCellForClipboard");return l?l({column:n,node:i,value:a,type:Yye,formatValue:e=>{var t;return null!==(t=this.beans.valueSvc.formatValue(n,i,e))&&void 0!==t?t:e},parseValue:e=>{var t;return null!==(t=this.beans.valueSvc.parseValue(n,i,e,o))&&void 0!==t?t:e}}):a},processHeaderCallback:s.getCallback("processHeaderForClipboard"),processGroupHeaderCallback:s.getCallback("processGroupHeaderForClipboard")};return r.getDataAsCsv(a,!0)}dispatchFlashCells(e){window.setTimeout(()=>{this.eventSvc.dispatchEvent({type:"flashCells",cells:e})},0)}processCell(e,t,i,n,o,s,r){const{valueSvc:a,formula:l}=this.beans;if(o){return o({column:t,node:e,value:i,type:n,formatValue:i=>{var n;return null!==(n=a.formatValue(t,null!==e&&void 0!==e?e:null,i))&&void 0!==n?n:i},parseValue:i=>a.parseValue(t,null!==e&&void 0!==e?e:null,i,a.getValue(t,e))})}return s&&!1!==t.getColDef().useValueParserForImport?a.parseValue(t,null!==e&&void 0!==e?e:null,i,a.getValue(t,e)):r&&!1!==t.getColDef().useValueFormatterForExport?null!==l&&void 0!==l&&l.isFormula(i)?i:null!==(d=a.formatValue(t,null!==e&&void 0!==e?e:null,i))&&void 0!==d?d:i:i;var d}copyDataToClipboard(e){const t=this.gos.getCallback("sendToClipboard");if(t)return void t({data:e});!this.gos.get("suppressClipboardApi")&&navigator.clipboard?navigator.clipboard.writeText(e).catch(t=>{lse(40,{e:t,method:"writeText"}),this.copyDataToClipboardLegacy(e)}):this.copyDataToClipboardLegacy(e)}copyDataToClipboardLegacy(e){this.executeOnTempElement(t=>{const i=Yie(this.beans),n=Uie(this.beans);t.value=e||" ",t.select(),t.focus({preventScroll:!0});i.execCommand("copy")||lse(41),null!=(null===n||void 0===n?void 0:n.focus)&&n.focus({preventScroll:!0})})}executeOnTempElement(e,t){if(!this.gridCtrl)return;const i=Yie(this.beans),n=i.createElement("textarea"),o=n.style;o.width="1px",o.height="1px";const s=i.documentElement;o.top=s.scrollTop+"px",o.left=s.scrollLeft+"px",o.position="absolute",o.opacity="0";this.gridCtrl.getGui().appendChild(n);try{e(n)}catch(r){lse(42)}t?window.setTimeout(()=>{t(n),n.remove()},100):n.remove()}}],apiFunctions:{copyToClipboard:function(e,t){var i;null===(i=e.clipboardSvc)||void 0===i||i.copyToClipboard(t)},cutToClipboard:function(e,t){var i;null===(i=e.clipboardSvc)||void 0===i||i.cutToClipboard(t)},copySelectedRowsToClipboard:function(e,t){var i;null===(i=e.clipboardSvc)||void 0===i||i.copySelectedRowsToClipboard(t)},copySelectedRangeToClipboard:function(e,t){var i;null===(i=e.clipboardSvc)||void 0===i||i.copySelectedRangeToClipboard(t)},copySelectedRangeDown:function(e){var t;null===(t=e.clipboardSvc)||void 0===t||t.copyRangeDown()},pasteFromClipboard:function(e){var t;null===(t=e.clipboardSvc)||void 0===t||t.pasteFromClipboard()}},dependsOn:[vve,Pme,wge,zme]};String.fromCodePoint(31,41150,8291);var Zye=[{symbol:"%",fixity:"postfix",precedence:100},{symbol:"-",fixity:"prefix",precedence:90},{symbol:"+",fixity:"prefix",precedence:90},{symbol:"^",fixity:"infix",precedence:80,associativity:"right"},{symbol:"*",fixity:"infix",precedence:70,associativity:"left",isAssociative:!0},{symbol:"/",fixity:"infix",precedence:70,associativity:"left"},{symbol:"+",fixity:"infix",precedence:60,associativity:"left",isAssociative:!0},{symbol:"-",fixity:"infix",precedence:60,associativity:"left"},{symbol:"&",fixity:"infix",precedence:55,associativity:"left",isAssociative:!0},{symbol:"=",fixity:"infix",precedence:50,associativity:"left"},{symbol:"<>",fixity:"infix",precedence:50,associativity:"left"},{symbol:">=",fixity:"infix",precedence:50,associativity:"left"},{symbol:"<=",fixity:"infix",precedence:50,associativity:"left"},{symbol:">",fixity:"infix",precedence:50,associativity:"left"},{symbol:"<",fixity:"infix",precedence:50,associativity:"left"}],Xye=new Map;for(const Sxe of Zye){var qye;const e=null!==(qye=Xye.get(Sxe.symbol))&&void 0!==qye?qye:[];e.push(Sxe),Xye.set(Sxe.symbol,e)}[...new Set(Zye.map(e=>e.symbol))].sort((e,t)=>t.length-e.length);var Qye=class extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#ERROR!";super(e),this.type=t,this.name="FormulaError"}};function Jye(e){return!(!e.endColumn||!e.endRow)}function ebe(e,t){var i;const{row:n,column:o}=t,s=n.absolute?null===(i=ame(e))||void 0===i?void 0:i.getFormulaRow(Number(n.id)-1):e.rowModel.getRowNode(n.id),r=o.absolute?e.formula.getColByRef(o.id):e.colModel.getColById(o.id);return s&&r?{row:s,column:r}:null}function tbe(e,t,i,n){var o;if("operand"===t.type){const n=t.value;if("object"!==typeof n)return n;if(Jye(n))throw new Qye("Range is not allowed in scalar context");const o=ebe(e,n);if(!o)throw new Qye("Unknown reference to cell","#REF!");return i(o)}const s=null===(o=e.formula)||void 0===o?void 0:o.getFunction(t.operation);if(!s)throw new Qye("Unsupported operation ".concat(t.operation),"#NAME?");const{args:r,values:a}=function(e,t,i,n){const o={[Symbol.iterator]:()=>new nbe(e,t,i,n)},s={[Symbol.iterator]:()=>new obe(e,t,i,n)};return{args:o,values:s}}(e,t.operands,i,n);return s({row:n.row,column:n.column,args:r,values:a})}function ibe(e,t,i,n){if("operand"===t.type){const n=t.value;if("object"!==typeof n)return{kind:"value",value:n};if(Jye(n))return function(e,t,i){const n=sbe(e,t.row),o=t.endRow?sbe(e,t.endRow):n,s=Math.min(n,o),r=Math.max(n,o),a=rbe(e,t.column),l=t.endColumn?rbe(e,t.endColumn):a;return{kind:"range",rowStart:s,rowEnd:r,colStart:a,colEnd:l,[Symbol.iterator]:()=>new abe(e,s,r,a,l,i)}}(e,n,i);const o=ebe(e,n);if(!o)throw new Qye("Unknown reference to cell","#REF!");return{kind:"value",value:i(o)}}return{kind:"value",value:tbe(e,t,i,n)}}var nbe=class{constructor(e,t,i,n){this.beans=e,this.operandNodes=t,this.getCellValue=i,this.caller=n,this.i=0,this.res={done:!1,value:void 0}}next(){return this.i>=this.operandNodes.length?(this.res.done=!0,this.res.value=void 0,this.res):(this.res.done=!1,this.res.value=ibe(this.beans,this.operandNodes[this.i++],this.getCellValue,this.caller),this.res)}[Symbol.iterator](){return this}},obe=class{constructor(e,t,i,n){this.beans=e,this.operandNodes=t,this.getCellValue=i,this.caller=n,this.i=0,this.inner=null,this.res={done:!1,value:void 0}}next(){for(;;){if(this.inner){const e=this.inner.next();if(!e.done)return this.res.done=!1,this.res.value=e.value,this.res;this.inner=null;continue}if(this.i>=this.operandNodes.length)return this.res.done=!0,this.res.value=void 0,this.res;const e=ibe(this.beans,this.operandNodes[this.i++],this.getCellValue,this.caller);if("value"===e.kind)return this.res.done=!1,this.res.value=e.value,this.res;this.inner=e[Symbol.iterator]()}}[Symbol.iterator](){return this}};function sbe(e,t){var i,n;if(t.absolute){const e=Number(t.id)-1;if(!Number.isFinite(e)||e<0)throw new Qye("Invalid absolute row","#REF!");return e}const o=null===(i=e.rowModel)||void 0===i||null===(n=i.getRowNode)||void 0===n?void 0:n.call(i,t.id);if(null==(null===o||void 0===o?void 0:o.formulaRowIndex))throw new Qye("Unrecognised row id","#REF!");return o.formulaRowIndex}function rbe(e,t){if(t.absolute){var i;const n=null===(i=e.formula)||void 0===i?void 0:i.getColByRef(t.id);if(!n)throw new Qye("Invalid absolute column","#REF!");return n}const n=e.colModel.getColById(t.id);if(!n)throw new Qye("Unrecognised column id","#REF!");return n}var abe=class{constructor(e,t,i,n,o,s){this.beans=e,this.rowStartIndex=t,this.rowEndIndex=i,this.colStart=n,this.colEnd=o,this.getCellValue=s,this.cols=null,this.currentRowIndex=this.rowStartIndex,this.currentColIdx=-1,this.colStartIdx=-1,this.colEndIdx=-1,this.res={done:!1,value:void 0}}initColsOnce(){var e;if(this.cols)return;this.cols=null!==(e=this.beans.colModel.getCols())&&void 0!==e?e:[];const t=lbe(this.beans,this.colStart,this.colEnd);if(!t)return this.colStartIdx=-1,void(this.colEndIdx=-1);[this.colStartIdx,this.colEndIdx]=t,this.currentColIdx=this.colStartIdx}next(){if(!this.cols&&(this.initColsOnce(),this.colStartIdx<0))return this.res.done=!0,this.res;if(this.currentRowIndex<=this.rowEndIndex){var e;const t=null===(e=ame(this.beans))||void 0===e?void 0:e.getFormulaRow(this.currentRowIndex);if(!t)throw new Qye("Unrecognised row in range","#REF!");const i=this.cols[this.currentColIdx];return this.currentColIdx<this.colEndIdx?this.currentColIdx++:(this.currentColIdx=this.colStartIdx,this.currentRowIndex++),this.res.value=this.getCellValue({row:t,column:i}),this.res}return this.res.done=!0,this.res.value=void 0,this.res}};function lbe(e,t,i){var n;const o=null!==(n=e.colModel.getCols())&&void 0!==n?n:[];let s=null,r=null;for(let a=0;a<o.length&&(null===s||null===r);a++){const e=o[a];if(e===i&&(r=a),e===t&&(s=a),null!==r&&null!==s)break}if(null===s||null===r)return null;return[Math.min(s,r),Math.max(s,r)]}var dbe=Symbol("WrappedFunctionMarker"),cbe=(e,t)=>{if(e[dbe])return e;const i=function(){for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return t(e,...n)};return i[dbe]=dbe,i};function ube(e){return{content:"".concat(e.xValue," ").concat(e.yValue)}}function hbe(e){return{content:"".concat(e.yValue)}}var pbe=class extends hae{constructor(){super({tag:"div",cls:"ag-sparkline-wrapper",children:[{tag:"span",ref:"eSparkline"}]}),this.eSparkline=lae,this.cachedWidth=0,this.cachedHeight=0,this.dataRef=[],this.processedData=[]}postConstruct(){this.env=this.beans.environment,this.addManagedPropertyListeners(["chartThemeOverrides","chartThemes","styleNonce"],()=>this.refresh(this.params))}createListener(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return()=>{var t,i,n,o;return this.updateSize(null!==(t=null===(i=this.params)||void 0===i||null===(i=i.column)||void 0===i?void 0:i.getActualWidth())&&void 0!==t?t:0,(null!==(n=null===(o=this.params)||void 0===o?void 0:o.node.rowHeight)&&void 0!==n?n:0)-2,e)}}initGridObserver(){var e,t;const i=this.createListener(),n=this.createListener(!1),o=null===(e=this.params)||void 0===e?void 0:e.column,s=null===(t=this.params)||void 0===t?void 0:t.node;o.__addEventListener("columnStateUpdated",i),s.__addEventListener("heightChanged",i),this.addDestroyFunc(()=>{o.__removeEventListener("columnStateUpdated",i),s.__removeEventListener("heightChanged",i)}),n()}updateSize(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if((e-=this.env.getCellPadding())!==this.cachedWidth||t!==this.cachedHeight){this.cachedWidth=e,this.cachedHeight=t;const n=this.refresh.bind(this);i?woe(()=>this.isAlive()&&n()):n()}}init(e){this.params=e,this.initGridObserver()}refresh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params;var t;this.params=e;const i=this.cachedWidth,n=this.cachedHeight,o=this.gos.get("styleNonce");if(!this.sparklineInstance&&e&&i>0&&n>0){var s,r,a,l;if(this.sparklineOptions=p(p(p({container:this.eSparkline,width:i,height:n},e.sparklineOptions),o?{styleNonce:o}:{}),{},{data:this.processData(e.value)}),null!==(s=(t=this.sparklineOptions).type)&&void 0!==s||(t.type="line"),null!==(r=this.sparklineOptions.tooltip)&&void 0!==r&&r.renderer)this.wrapTooltipRenderer();else{const e=this.getDefaultTooltipRenderer();this.sparklineOptions.tooltip=p(p({},this.sparklineOptions.tooltip),{},{renderer:e})}const d=null===(a=this.sparklineOptions)||void 0===a?void 0:a.theme;return"bar"===this.sparklineOptions.type&&this.sparklineOptions.itemStyler?this.wrapItemStyler(this.sparklineOptions):null!==d&&void 0!==d&&null!==(l=d.overrides)&&void 0!==l&&null!==(l=l.bar)&&void 0!==l&&null!==(l=l.series)&&void 0!==l&&l.itemStyler&&this.wrapItemStyler(d.overrides.bar.series),this.sparklineInstance=e.createSparkline(this.sparklineOptions),!0}return!!this.sparklineInstance&&(this.sparklineInstance.update(p(p({},this.sparklineOptions),{},{data:this.processData(null===e||void 0===e?void 0:e.value),width:i,height:n},o?{styleNonce:o}:{})),!0)}processData(e){return null!==e&&void 0!==e&&e.length?(this.dataRef!==e&&(this.dataRef=e,this.processedData=Array.isArray(e[0])?e.filter(e=>null!=e):e),this.processedData):null!==e&&void 0!==e?e:[]}createContext(){var e,t;return{data:null===(e=this.params)||void 0===e?void 0:e.data,cellData:null===(t=this.params)||void 0===t?void 0:t.value}}getDefaultTooltipRenderer(e){var t;const i=null===e||void 0===e?void 0:e.title,n=this.sparklineOptions.xKey,o=Array.isArray(null===(t=this.sparklineOptions.data)||void 0===t?void 0:t[0]);return!i&&(n||o)?ube:hbe}wrapItemStyler(e){e.itemStyler=cbe(e.itemStyler,(e,t)=>e(p(p({},t),{},{context:this.createContext()})))}wrapTooltipRenderer(){this.sparklineOptions.tooltip=p(p({},this.sparklineOptions.tooltip),{},{renderer:cbe(this.sparklineOptions.tooltip.renderer,(e,t)=>{const i=e(p(p({},t),{},{context:this.createContext()}));return"string"===typeof i?i:p(p({},this.getDefaultTooltipRenderer(i)(t)),i)})})}destroy(){var e;super.destroy(),null===(e=this.sparklineInstance)||void 0===e||e.destroy()}},gbe="Sparklines",mbe=e=>(e.setup(),{moduleName:gbe,version:fve,dependsOn:[vve],css:[".ag-sparkline-wrapper{height:100%;line-height:normal;position:absolute;top:0;width:100%}"],userComponents:{agSparklineCellRenderer:{classImp:pbe,params:{createSparkline:e.createSparkline}}},validate:()=>({isValid:!0})});var fbe={column:"bar",groupedColumn:"bar",stackedColumn:"bar",normalizedColumn:"bar",bar:"bar",groupedBar:"bar",stackedBar:"bar",normalizedBar:"bar",line:"line",stackedLine:"line",normalizedLine:"line",scatter:"scatter",bubble:"bubble",pie:"pie",donut:"donut",doughnut:"donut",area:"area",stackedArea:"area",normalizedArea:"area",histogram:"histogram",radarLine:"radar-line",radarArea:"radar-area",nightingale:"nightingale",radialColumn:"radial-column",radialBar:"radial-bar",sunburst:"sunburst",rangeBar:"range-bar",rangeArea:"range-area",boxPlot:"box-plot",treemap:"treemap",heatmap:"heatmap",waterfall:"waterfall",funnel:"funnel",coneFunnel:"cone-funnel",pyramid:"pyramid"},vbe=new Set(["columnLineCombo","areaColumnCombo","customCombo"]);function ybe(e){return vbe.has(e)}function bbe(e){return"doughnut"===e?"donut":e}function xbe(e){return fbe[e]}var Cbe=["number","category","grouped-category","log","time"];Cbe.reduce((e,t)=>p(p({},e),{},{[t]:{title:{_enabledFromTheme:!0}}}),{});var Sbe=e=>t=>void 0==t||e(t),wbe=["doughnut"];Sbe(e=>{if(xbe(t=e)||ybe(t))return!0;var t;if(function(e){return wbe.includes(e)}(e)){const t=bbe(e);return Foe("The chart type '".concat(e,"' has been deprecated. Please use '").concat(t,"' instead.")),t}return!1}),Sbe(e=>"object"===typeof e),Sbe(e=>"object"===typeof e),Sbe(e=>"string"===typeof e||"function"===typeof e);function Mbe(e){return e.map((e,t,i)=>e.map((e,n)=>i.slice(0,t+1).reduce((e,t)=>e+t[n],0)))}function kbe(e){const t=e.map((t,i)=>e.reduce((e,t)=>Math.max(e,t[i]),0));return e.map(e=>e.map((e,i)=>e/t[i]*19))}var Dbe=[[1,3,5],[2,6,4],[5,3,1]],Ibe=Mbe(Dbe),Abe=(kbe(Ibe),Dbe),Lbe=Mbe(Abe);kbe(Lbe);var Nbe=["number","category","time","grouped-category"];const Tbe=["component","direction","spacing","divider","children","className","useFlexGap"],Rbe=fi(),Ebe=sie("div",{name:"MuiStack",slot:"Root"});function Pbe(e){return rie({props:e,name:"MuiStack",defaultTheme:Rbe})}function Obe(e,t){const i=o.Children.toArray(e).filter(Boolean);return i.reduce((e,n,s)=>(e.push(n),s<i.length-1&&e.push(o.cloneElement(t,{key:"separator-".concat(s)})),e),[])}const Fbe=e=>{let{ownerState:t,theme:i}=e,n=p({display:"flex",flexDirection:"column"},ht({theme:i},mt({values:t.direction,breakpoints:i.breakpoints.values}),e=>({flexDirection:e})));if(t.spacing){const e=Nt(i),o=Object.keys(i.breakpoints.values).reduce((e,i)=>(("object"===typeof t.spacing&&null!=t.spacing[i]||"object"===typeof t.direction&&null!=t.direction[i])&&(e[i]=!0),e),{}),s=mt({values:t.direction,base:o}),r=mt({values:t.spacing,base:o});"object"===typeof s&&Object.keys(s).forEach((e,t,i)=>{if(!s[e]){const n=t>0?s[i[t-1]]:"column";s[e]=n}});n=ot(n,ht({theme:i},r,(i,n)=>{return t.useFlexGap?{gap:Tt(e,i)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{["margin".concat((o=n?s[n]:t.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[o]))]:Tt(e,i)}};var o}))}return n=function(e){const t=pt(e);for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];const s=[t,...n].reduce((e,t)=>ot(e,t),{});return gt(Object.keys(t),s)}(i.breakpoints,n),n};const zbe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=Ebe,useThemeProps:i=Pbe,componentName:n="MuiStack"}=e,s=t(Fbe),r=o.forwardRef(function(e,t){const o=Po(i(e)),{component:r="div",direction:a="column",spacing:d=0,divider:c,children:u,className:h,useFlexGap:g=!1}=o,v=l(o,Tbe),y={direction:a,spacing:d,useFlexGap:g},b=f({root:["root"]},e=>Co(n,e),{});return(0,ao.jsx)(s,p(p({as:r,ownerState:y,ref:t,className:m(b.root,h)},v),{},{children:c?Obe(u,c):u}))});return r}({createStyledComponent:no("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>uo({props:e,name:"MuiStack"})}),Bbe=zbe;let Vbe=0;const Gbe=p({},s).useId;const Hbe=function(e){if(void 0!==Gbe){const t=Gbe();return null!==e&&void 0!==e?e:t}return function(e){const[t,i]=o.useState(e),n=e||t;return o.useEffect(()=>{null==t&&(Vbe+=1,i("mui-".concat(Vbe)))},[t]),n}(e)};function jbe(e){return Co("MuiCircularProgress",e)}So("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Wbe=["className","color","disableShrink","enableTrackSlot","size","style","thickness","value","variant"];var _be,Kbe,Ube,Ybe;const $be=44,Zbe=Fs(_be||(_be=Ss(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"]))),Xbe=Fs(Kbe||(Kbe=Ss(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: -126px;\n  }\n"]))),qbe="string"!==typeof Zbe?Os(Ube||(Ube=Ss(["\n        animation: "," 1.4s linear infinite;\n      "])),Zbe):null,Qbe="string"!==typeof Xbe?Os(Ybe||(Ybe=Ss(["\n        animation: "," 1.4s ease-in-out infinite;\n      "])),Xbe):null,Jbe=no("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.variant],t["color".concat(ho(i.color))]]}})(so(e=>{let{theme:t}=e;return{display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:qbe||{animation:"".concat(Zbe," 1.4s linear infinite")}},...Object.entries(t.palette).filter(po()).map(e=>{let[i]=e;return{props:{color:i},style:{color:(t.vars||t).palette[i].main}}})]}})),exe=no("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),txe=no("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.circle,t["circle".concat(ho(i.variant))],i.disableShrink&&t.circleDisableShrink]}})(so(e=>{let{theme:t}=e;return{stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&!t.disableShrink},style:Qbe||{animation:"".concat(Xbe," 1.4s ease-in-out infinite")}}]}})),ixe=no("circle",{name:"MuiCircularProgress",slot:"Track"})(so(e=>{let{theme:t}=e;return{stroke:"currentColor",opacity:(t.vars||t).palette.action.activatedOpacity}})),nxe=o.forwardRef(function(e,t){const i=uo({props:e,name:"MuiCircularProgress"}),{className:n,color:o="primary",disableShrink:s=!1,enableTrackSlot:r=!1,size:a=40,style:d,thickness:c=3.6,value:u=0,variant:h="indeterminate"}=i,g=l(i,Wbe),v=p(p({},i),{},{color:o,disableShrink:s,size:a,thickness:c,value:u,variant:h,enableTrackSlot:r}),y=(e=>{const{classes:t,variant:i,color:n,disableShrink:o}=e;return f({root:["root",i,"color".concat(ho(n))],svg:["svg"],track:["track"],circle:["circle","circle".concat(ho(i)),o&&"circleDisableShrink"]},jbe,t)})(v),b={},x={},C={};if("determinate"===h){const e=2*Math.PI*(($be-c)/2);b.strokeDasharray=e.toFixed(3),C["aria-valuenow"]=Math.round(u),b.strokeDashoffset="".concat(((100-u)/100*e).toFixed(3),"px"),x.transform="rotate(-90deg)"}return(0,ao.jsx)(Jbe,p(p(p({className:m(y.root,n),style:p(p({width:a,height:a},x),d),ownerState:v,ref:t,role:"progressbar"},C),g),{},{children:(0,ao.jsxs)(exe,{className:y.svg,ownerState:v,viewBox:"".concat(22," ").concat(22," ").concat($be," ").concat($be),children:[r?(0,ao.jsx)(ixe,{className:y.track,ownerState:v,cx:$be,cy:$be,r:($be-c)/2,fill:"none",strokeWidth:c,"aria-hidden":"true"}):null,(0,ao.jsx)(txe,{className:y.circle,style:b,ownerState:v,cx:$be,cy:$be,r:($be-c)/2,fill:"none",strokeWidth:c})]})}))}),oxe=nxe;function sxe(e){return Co("MuiButton",e)}const rxe=So("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]);const axe=o.createContext({});const lxe=o.createContext(void 0),dxe=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","id","loading","loadingIndicator","loadingPosition","size","startIcon","type","variant"],cxe=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],uxe=no(ir,{shouldForwardProp:e=>io(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.variant],t["".concat(i.variant).concat(ho(i.color))],t["size".concat(ho(i.size))],t["".concat(i.variant,"Size").concat(ho(i.size))],"inherit"===i.color&&t.colorInherit,i.disableElevation&&t.disableElevation,i.fullWidth&&t.fullWidth,i.loading&&t.loading]}})(so(e=>{let{theme:t}=e;const i="light"===t.palette.mode?t.palette.grey[300]:t.palette.grey[800],n="light"===t.palette.mode?t.palette.grey.A100:t.palette.grey[700];return p(p({},t.typography.button),{},{minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},["&.".concat(rxe.disabled)]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},["&.".concat(rxe.focusVisible)]:{boxShadow:(t.vars||t).shadows[6]},["&.".concat(rxe.disabled)]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",["&.".concat(rxe.disabled)]:{border:"1px solid ".concat((t.vars||t).palette.action.disabledBackground)}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(po()).map(e=>{let[i]=e;return{props:{color:i},style:{"--variant-textColor":(t.vars||t).palette[i].main,"--variant-outlinedColor":(t.vars||t).palette[i].main,"--variant-outlinedBorder":t.alpha((t.vars||t).palette[i].main,.5),"--variant-containedColor":(t.vars||t).palette[i].contrastText,"--variant-containedBg":(t.vars||t).palette[i].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[i].dark,"--variant-textBg":t.alpha((t.vars||t).palette[i].main,(t.vars||t).palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[i].main,"--variant-outlinedBg":t.alpha((t.vars||t).palette[i].main,(t.vars||t).palette.action.hoverOpacity)}}}}}),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:i,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity),"--variant-outlinedBg":t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},["&.".concat(rxe.focusVisible)]:{boxShadow:"none"},"&:active":{boxShadow:"none"},["&.".concat(rxe.disabled)]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),["&.".concat(rxe.loading)]:{color:"transparent"}}}]})})),hxe=no("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.startIcon,i.loading&&t.startIconLoadingStart,t["iconSize".concat(ho(i.size))]]}})(e=>{let{theme:t}=e;return{display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...cxe]}}),pxe=no("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.endIcon,i.loading&&t.endIconLoadingEnd,t["iconSize".concat(ho(i.size))]]}})(e=>{let{theme:t}=e;return{display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...cxe]}}),gxe=no("span",{name:"MuiButton",slot:"LoadingIndicator"})(e=>{let{theme:t}=e;return{display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]}}),mxe=no("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),fxe=o.forwardRef(function(e,t){const i=o.useContext(axe),n=o.useContext(lxe),s=uo({props:ro(i,e),name:"MuiButton"}),{children:r,color:a="primary",component:d="button",className:c,disabled:u=!1,disableElevation:h=!1,disableFocusRipple:g=!1,endIcon:v,focusVisibleClassName:y,fullWidth:b=!1,id:x,loading:C=null,loadingIndicator:S,loadingPosition:w="center",size:M="medium",startIcon:k,type:D,variant:I="text"}=s,A=l(s,dxe),L=Hbe(x),N=null!==S&&void 0!==S?S:(0,ao.jsx)(oxe,{"aria-labelledby":L,color:"inherit",size:16}),T=p(p({},s),{},{color:a,component:d,disabled:u,disableElevation:h,disableFocusRipple:g,fullWidth:b,loading:C,loadingIndicator:N,loadingPosition:w,size:M,type:D,variant:I}),R=(e=>{const{color:t,disableElevation:i,fullWidth:n,size:o,variant:s,loading:r,loadingPosition:a,classes:l}=e,d=f({root:["root",r&&"loading",s,"".concat(s).concat(ho(t)),"size".concat(ho(o)),"".concat(s,"Size").concat(ho(o)),"color".concat(ho(t)),i&&"disableElevation",n&&"fullWidth",r&&"loadingPosition".concat(ho(a))],startIcon:["icon","startIcon","iconSize".concat(ho(o))],endIcon:["icon","endIcon","iconSize".concat(ho(o))],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},sxe,l);return p(p({},l),d)})(T),E=(k||C&&"start"===w)&&(0,ao.jsx)(hxe,{className:R.startIcon,ownerState:T,children:k||(0,ao.jsx)(mxe,{className:R.loadingIconPlaceholder,ownerState:T})}),P=(v||C&&"end"===w)&&(0,ao.jsx)(pxe,{className:R.endIcon,ownerState:T,children:v||(0,ao.jsx)(mxe,{className:R.loadingIconPlaceholder,ownerState:T})}),O=n||"",F="boolean"===typeof C?(0,ao.jsx)("span",{className:R.loadingWrapper,style:{display:"contents"},children:C&&(0,ao.jsx)(gxe,{className:R.loadingIndicator,ownerState:T,children:N})}):null;return(0,ao.jsxs)(uxe,p(p({ownerState:T,className:m(i.className,R.root,c,O),component:d,disabled:u||C,focusRipple:!g,focusVisibleClassName:m(R.focusVisible,y),ref:t,type:D,id:C?L:x},A),{},{classes:R,children:[E,"end"!==w&&F,r,"end"===w&&F,P]}))}),vxe=fxe;qoe.registerModules([Tme,mbe(cV),$ye,_ve,Wye,vme,Vme,_ye]),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"shallow";Toe.gridOptions=e,Toe.mergeStrategy=t}({theme:"legacy"});const yxe=()=>{const e=(0,o.useRef)(),[t,i]=(0,o.useState)({expanded:!0,groupDefaultExpanded:1}),[n,s]=(0,o.useState)(null),r=[{field:"year",rowGroup:!0,hide:!0,enableRowGroup:!0},{field:"state",headerName:"State",rowGroup:!0,hide:!0,enableRowGroup:!0},{field:"city",headerName:"City",rowGroup:!0,hide:!0,enableRowGroup:!0},{field:"variety",headerName:"Mango Variety",rowGroup:!0,hide:!0,enableRowGroup:!0},{field:"mangoSales",headerName:"Mango Sales (Tons)",valueGetter:e=>e.data?new Intl.NumberFormat("en-IN").format(e.data.mangoSales):null,tooltipValueGetter:e=>e.data?"".concat((new Intl.NumberFormat).format(e.data.mangoSales)," tons"):null,cellRenderer:e=>{if(null!=e.value)return(0,ao.jsxs)("div",{children:[(0,ao.jsx)("span",{class:"material-symbols-outlined",style:{fontSize:"16px",verticalAlign:"middle",marginRight:"4px"},children:"weight"}),(0,ao.jsx)("span",{style:{marginLeft:"2px"},children:e.value})]})}},{field:"revenue",headerName:"Revenue",valueGetter:e=>e.data?"$".concat(new Intl.NumberFormat("en-IN").format(e.data.revenue)):null,tooltipValueGetter:e=>e.data?"\u20b9".concat(new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e.data.revenue)):null,cellRenderer:e=>{if(null!=e.value)return(0,ao.jsxs)("div",{children:[(0,ao.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/9400/9400200.png",alt:"revenue icon",style:{width:"16px",height:"16px",verticalAlign:"middle",marginRight:"4px"}}),(0,ao.jsx)("span",{style:{marginLeft:"2px"},children:e.value})]})}},{field:"profit",headerName:"Profit",valueGetter:e=>e.data?"\u20b9".concat(new Intl.NumberFormat("en-IN").format(e.data.profit)):null,tooltipValueGetter:e=>e.data?"\u20b9".concat(new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e.data.profit)):null,cellRenderer:e=>{if(null!=e.value)return(0,ao.jsxs)("div",{children:[(0,ao.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/2460/2460494.png",alt:"revenue icon",style:{width:"16px",height:"16px",verticalAlign:"middle",marginRight:"4px"}}),(0,ao.jsx)("span",{style:{marginLeft:"2px"},children:e.value})]})}},{field:"profitMargin",headerName:"Profit Margin",valueGetter:e=>e.data?"".concat(e.data.profitMargin,"%"):null,tooltipValueGetter:e=>e.data?"".concat(e.data.profitMargin,"%"):null,cellRenderer:e=>{if(null!=e.value)return(0,ao.jsxs)("div",{children:[(0,ao.jsx)("img",{src:"https://png.pngtree.com/png-vector/20211013/ourmid/pngtree-profit-flat-icon-png-image_3982587.png",alt:"profit margin icon",style:{width:"16px",height:"16px",verticalAlign:"middle",marginRight:"4px"}}),(0,ao.jsx)("span",{style:{marginLeft:"2px"},children:e.value})]})}},{headerName:"Profit Margin Trend",valueGetter:e=>{var t;const i=(null===(t=e.data)||void 0===t?void 0:t.profitMargin)/10,n=[];for(let o=1;o<=5;o++)n.push(Math.min(100,Math.max(0,Math.round(i*o+(10*Math.random()-5)))));return n},cellRenderer:"agSparklineCellRenderer",cellRendererParams:{sparklineOptions:{type:"area",fill:"rgba(216, 204, 235, 0.3)",stroke:"#f5b800",marker:{enabled:!0,size:0,itemStyler:e=>{if("highlighted-item"===e.highlightState)return{size:7}}},highlight:{highlightedItem:{fill:"rgb(211, 19, 19)",strokeWidth:0}},axis:{type:"category",stroke:"rgb(204, 204, 235)"}}}}],a=(0,o.useMemo)(()=>({flex:1,minWidth:100,filter:!0,sortable:!0,resizable:!0,cellStyle:{fontFamily:"Roboto Serif, serif",fontSize:"12px",color:"#333333"},headerStyle:{fontFamily:"Roboto Serif, serif",fontSize:"14px",fontWeight:"600",color:"#ffffff",backgroundColor:"#f5b800"}}),[]),l={headerName:"Group",minWidth:250,cellStyle:{fontFamily:"Roboto Serif, serif",fontSize:"12px",color:"#333333"},headerStyle:{fontFamily:"Roboto Serif, serif",fontSize:"14px",fontWeight:"600",color:"#ffffff",backgroundColor:"#f5b800"},cellRendererParams:{suppressCount:!0,innerRenderer:e=>{const t=e.node.level,i={0:"calendar_today",1:"location_on",2:"location_city",3:"https://cdn-icons-png.flaticon.com/512/1054/1054117.png"};return(0,ao.jsx)(ao.Fragment,{children:3===t?(0,ao.jsxs)("div",{children:[(0,ao.jsx)("img",{src:i[t],alt:"variety icon",style:{width:"16px",height:"16px",verticalAlign:"middle",marginRight:"4px"}}),(0,ao.jsx)("span",{children:e.value})]}):(0,ao.jsxs)("div",{children:[(0,ao.jsx)("span",{class:"material-symbols-outlined",style:{fontSize:"16px",verticalAlign:"middle",marginRight:"4px",color:0===t?"#100c35":1===t?"#c92222":"#126bb9"},children:i[t]}),(0,ao.jsx)("span",{children:e.value})]})})}}};return(0,ao.jsx)(ao.Fragment,{children:(0,ao.jsxs)(Do,{elevation:3,sx:{width:"98%",margin:"16px 0 0 16px"},children:[(0,ao.jsxs)(Bbe,{direction:"row",children:[(0,ao.jsx)(Qo,{sx:{fontFamily:"Roboto Serif, serif",fontSize:"18px",fontWeight:"600",color:"#333333",margin:"16px"},children:"Mango Sales Data"}),(0,ao.jsxs)(Bbe,{flex:1,alignItems:"flex-end",direction:"row",children:[(0,ao.jsx)(vxe,{variant:"contained",sx:{fontFamily:"Roboto Serif, serif",fontSize:"14px",fontWeight:"600",backgroundColor:"#f5b800",color:"#ffffff",margin:"16px",textTransform:"none","&:hover":{backgroundColor:"#e6ac00"}},onClick:()=>{const e=!t.expanded;i({expanded:e,groupDefaultExpanded:e?-1:1})},children:t.expanded?"Collapse All":"Expand All"}),(0,ao.jsx)(vxe,{variant:"contained",sx:{fontFamily:"Roboto Serif, serif",fontSize:"14px",fontWeight:"600",backgroundColor:"#f5b800",color:"#ffffff",margin:"16px",textTransform:"none","&:hover":{backgroundColor:"#e6ac00"}},onClick:()=>n.exportDataAsExcel(),children:"Export Excel"})]})]}),(0,ao.jsx)(tve,{style:{margin:"0 16px 16px 16px",width:"calc(100% - 32px)"},autoGroupColumnDef:l,theme:Lpe,ref:e,domLayout:"autoHeight",rowData:Nie(),columnDefs:r,defaultColDef:a,animateRows:!0,groupDefaultExpanded:t.groupDefaultExpanded,rowGroupPanelShow:"always",pagination:!0,paginationPageSize:20,paginationPageSizeSelector:[10,20,50,100],onGridReady:e=>{s(e.api)}})]})})},bxe=()=>(console.log("Row Data:",Tie),(0,ao.jsxs)(ao.Fragment,{children:[(0,ao.jsx)(Jo,{}),(0,ao.jsx)(gr,{"aria-label":"breadcrumb",sx:{margin:"16px 0 0 16px"},children:(0,ao.jsx)(Qo,{sx:{fontSize:"12px",fontFamily:"Roboto Serif, serif",fontWeight:"300",color:"#555555"},children:"Home / Dashboard"})}),(0,ao.jsxs)(Iie,{container:!0,spacing:5,sx:{padding:"16px"},children:[(0,ao.jsx)(Iie,{item:!0,xs:12,sm:6,md:4,children:(0,ao.jsx)(Do,{elevation:3,children:(0,ao.jsx)(Aie,{rowData:Tie})})}),(0,ao.jsx)(Iie,{item:!0,xs:12,sm:6,md:4,children:(0,ao.jsx)(Do,{elevation:3,children:(0,ao.jsx)(oie,{rowData:Tie})})}),(0,ao.jsx)(Iie,{item:!0,xs:12,sm:6,md:4,children:(0,ao.jsx)(Do,{elevation:3,children:(0,ao.jsx)(Lie,{rowData:Tie})})})]}),(0,ao.jsx)(yxe,{rowData:Tie}),(0,ao.jsx)(Do,{elevation:3,sx:{width:"100%",height:"50px",display:"flex",justifyContent:"center",alignItems:"center",margin:"16px 0 0 0",textAlign:"center",backgroundColor:"#f5b800"},children:(0,ao.jsxs)(Qo,{sx:{fontSize:"14px",fontFamily:"Roboto Serif, serif",fontWeight:"400",color:"#ffffff"},children:[(new Date).getFullYear()," \xa9 its-gopika-git. All rights reserved."]})})]}));const xxe=function(){return(0,ao.jsx)(ao.Fragment,{children:(0,ao.jsx)(bxe,{})})},Cxe=e=>{e&&e instanceof Function&&i.e(453).then(i.bind(i,453)).then(t=>{let{getCLS:i,getFID:n,getFCP:o,getLCP:s,getTTFB:r}=t;i(e),n(e),o(e),s(e),r(e)})};r.createRoot(document.getElementById("root")).render((0,ao.jsx)(o.StrictMode,{children:(0,ao.jsx)(xxe,{})})),Cxe()})();
//# sourceMappingURL=main.6507276c.js.map